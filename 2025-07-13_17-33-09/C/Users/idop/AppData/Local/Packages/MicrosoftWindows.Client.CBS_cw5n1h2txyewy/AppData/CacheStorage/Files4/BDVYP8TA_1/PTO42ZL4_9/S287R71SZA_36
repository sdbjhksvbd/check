var WSB;(function(n){var t;(function(t){const i=60;class r extends React.Component{constructor(){super(...arguments);this.flyoutIframeRef=React.createRef();this.rewardsFlyoutRef=React.createRef()}componentDidUpdate(){const{dataModel:t}=this.props;if(t&&t.innerHtml){const i=this.flyoutIframeRef.current;i.contentWindow.focus();i.contentDocument.open();i.contentWindow.history.replaceState(undefined,"",t.flyoutUrl);i.contentDocument.write(t.innerHtml);i.contentDocument.close();(n.MockUrlParameters===null||n.MockUrlParameters===void 0?void 0:n.MockUrlParameters.isTest)&&this.displayContent(i);i.contentDocument.body.onload=()=>{this.displayContent(i)};i.contentWindow.open=i=>{const r=n.getCurrentTime();return t.launchUri(i,r,0),null};i.contentDocument.body.onclick=i=>{let r=i.target;while(r&&!r.href)r=r.parentNode;if(r){const u=n.getCurrentTime();return t.launchUri(r.href,u,n.getInputType(i)),i.preventDefault()}};t.onBlur&&(i.contentWindow.onblur=t.onBlur);i.contentDocument.onkeydown=t=>{t.key==="Escape"&&(n.RewardsFlyoutViewModel===null||n.RewardsFlyoutViewModel===void 0?void 0:n.RewardsFlyoutViewModel.hideRewardsFlyout(!0))}}}displayContent(n){const t=this.rewardsFlyoutRef.current,r=window.innerHeight?window.innerHeight-i:600;t.style.height=`${Math.min(n.contentWindow.document.body.scrollHeight,600,r-24)}px`;t.classList.add("loadedFlyout")}render(){const{dataModel:n}=this.props;return n?React.createElement("div",{id:"rewardsFlyout",ref:this.rewardsFlyoutRef},n.loadingText&&React.createElement("p",null,n.loadingText),React.createElement("iframe",{ref:this.flyoutIframeRef,"data-partnertag":t.whenTestHooks("AutoSuggest.RewardsFlyout")})):null}}t.RewardsFlyout=r})(t=n.View||(n.View={}))})(WSB||(WSB={}))