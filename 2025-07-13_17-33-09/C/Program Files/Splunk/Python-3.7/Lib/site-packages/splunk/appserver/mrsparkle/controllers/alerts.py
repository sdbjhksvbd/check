# coding=UTF-8
from splunk.appserver.mrsparkle.controllers import BaseController
from splunk.appserver.mrsparkle.lib.decorators import expose_page
from splunk.appserver.mrsparkle.lib.routes import route

class AlertsController(BaseController):
    # Keep this route because customers may have old saved links which match this style
    @route('/:app')
    @expose_page(must_login=True, methods='GET')
    def index(self, app, **params):
        # There is no such app context as "-" (ie. all apps). Default to search in this case.
        app = 'search' if app == '-' else app
        return self.redirect_to_url('/app/{app}/triggered_alerts'.format(app = app), _qs=params)
