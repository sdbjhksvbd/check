.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "PARTITION" "1" "May 2020" "Splunk, Inc." "Splunk Packaging Toolkit"
.
.SH "NAME"
\fBpartition\fR \- split an app source package into a set of targeted deployment packages
.
.SH "SYNOPSIS"
\fBslim\fR \fBpartition\fR [(\fB\-h\fR|\fB\-\-help\fR)] [(\fB\-i\fR|\fB\-\-installation=\fR)<filename>] [(\fB\-o\fR|\fB\-\-output\-dir=\fR)<output\-dir>] [(\fB\-r\fR|\fB\-\-repository=\fR)<repository>] [(\fB\-c\fR|\fBcombine\-search\-head\-indexer\-workloads\fR)] [(\fB\-d\fR|\fB\-\-deployment\-packages=)\fR<specification> [<specification>\.\.\.]] [(\fB\-f\fR|\fB\-\-forwarder\-workloads=\fR<forwarder\-workloads>] [(\fB\-t\fR|\fB\-\-target\-os=\fR)<os\-name>] [(\fB\-p\fR|\fB\-\-partition\-only\fR)] <app\-source>
.
.SH "DESCRIPTION"
Partitions an app source package into a set of targeted deployment packages based on user\-defined deployment specifications\. A deployment specification can contain any combination of three different types of Splunk workloads: indexer (named as \fB"_indexers"\fR), search head (named as \fB"_search_heads"\fR) and forwarder (named as \fB"_forwarders"\fR)\.
.
.SH "OPTIONS"
<app\-source>
.
.br
Location of an app source package\.
.
.P
\fB\-h\fR, \fB\-\-help\fR
.
.br
Print help message and exit\.
.
.P
\fB\-i\fR <filename>, \fB\-\-installation=\fR<filename>
.
.br
Read installation graph from the file at this location (default: empty)\.
.
.P
\fB\-o\fR <output\-dir>, \fB\-\-output\-dir=\fR<output\-dir>
.
.br
Save targeted deployment packages to the directory at this location (default: current directory)\.
.
.P
\fB\-r\fR <repository>, \fB\-\-repository=\fR<repository>
.
.br
Look for dependent source packages in the directory at this location (default: \fB${SLIM_REPOSITORY:=~/\.slim/repository}\fR)\.
.
.P
\fB\-c\fR, \fB\-\-combine\-search\-head\-indexer\-workloads\fR Combine search head and indexer workloads into a single deployment package\.
.
.P
\fB\-d\fR <specification> [<specification> \.\.\.], \fB\-\-deployment\-packages=\fR<specification> [<specification> \.\.\.]
.
.br
Specify a set of deployment packages by name, workload, andâ€”for forwarder workloadsâ€”input groups\. A deployment specification is represented by a JSON object:
.
.IP "" 4
.
.nf

{
    "name": "<package\-name>",
    "workload": [("searchHead" | "indexer" | "forwarder")(,("searchHead" | "indexer" | "forwarder") \.\.\.)](,
    "inputGroups": ["<group\-name>"(, "<group\-name>" \.\.\.)])
}
.
.fi
.
.IP "" 0
.
.P
\fB\-f\fR <forwarder\-workloads>, \fB\-\-forwarder\-workloads\fR <forwarder\-workloads>
.
.br
Map app input groups to a set of server classes (default: ["\fIsearch_heads", "\fRindexers", "_forwarders"])\. A forwarder workload is represented by an JSON array of objects:
.
.IP "" 4
.
.nf

[
    "<server\-class\-name>": ["<input\-group\-name>"(, "<input\-group\-name>" \.\.\.)],
    "<server\-class\-name>": ["<input\-group\-name>"(, "<input\-group\-name>" \.\.\.)] \.\.\.
]
.
.fi
.
.IP "" 0
.
.P
\fB\-t\fR <os\-name>, \fB\-\-target\-os\fR <os\-name> Specify the target OS to be used when evaluating OS\-specific dependencies defined in the manifest: \fI, \fImac,\fRwindows, \fIlinux_x86,\fRlinux_x86_64\. By default, all OS\-specific dependencies will be installed (\fR)\. This option is ignored when the \-\-partition\-only is used, since the installation graph is not updated\.
.
.P
\fB\-p\fR, \fB\-\-partition\-only\fR Verify installation graph to ensure it is unchanged after partitioning\. This is useful when you are partitioning an app for re\-deployment\.
.
.SH "EXAMPLES"
The following example demonstrates the usage of the partition command along with the \fBforwarder\-workloads\fR and \fBcombine\-search\-head\-and\-indexer\fR flags on an app called "fictional\."
.
.IP "" 4
.
.nf

$ slim partition \-\-forwarder\-workloads \'{"Microsoft Windows monitoring":["server\-class\-1"], "*nix monitoring":["server\-class\-1", "server\-class\-2"]}\' com\.splunk\.addons\-fictional\-1\.0\.0\.tar\.gz
partition: [INFO] fictional manifest lists these undefined inputs in forwarder group "Microsoft Windows monitoring": "input_1", "input_2", "input_3"
partition: [INFO] fictional manifest lists these undefined inputs in forwarder group "*nix monitoring": "input_4", "input_5", "input_6"
partition: [INFO] Deployment packages created:
    /Users/splunkuser/SplunkSource/python\-site/splunk/slim/com\.splunk\.addons\-fictional\-1\.0\.0\-server\-class\-1\.tar\.gz
    /Users/splunkuser/SplunkSource/python\-site/splunk/slim/com\.splunk\.addons\-fictional\-1\.0\.0\-server\-class\-2\.tar\.gz
    /Users/splunkuser/SplunkSource/python\-site/splunk/slim/com\.splunk\.addons\-fictional\-1\.0\.0\-splunk\-search\-head\.tar\.gz
    /Users/splunkuser/SplunkSource/python\-site/splunk/slim/com\.splunk\.addons\-fictional\-1\.0\.0\-splunk\-indexer\.tar\.gz
.
.fi
.
.IP "" 0

