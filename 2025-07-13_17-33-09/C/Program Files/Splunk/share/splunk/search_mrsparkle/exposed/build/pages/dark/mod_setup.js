!function(e){function t(t){for(var a,o,r=t[0],l=t[1],u=t[2],p=0,f=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(t);f.length;)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={60:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=a);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=function(e){return o.p+""+({}[e]||e)+".js"}(e);var l=new Error;s=function(t){r.onerror=r.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,n[1](l)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var d=l;s.push([2556,0]),n()}({2556:function(e,t,n){var a,i;n.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,n,a="",i=0,s=arguments.length;i<s;i++)(n=(t=arguments[i].toString()).length)>1&&"/"==t.charAt(n-1)&&(t=t.substring(0,n-1)),"/"!=t.charAt(0)?a+="/"+t:a+=t;if("/"!=a){var o=a.split("/"),r=o[1];if("static"==r||"modules"==r){var l=a.substring(r.length+2,a.length);a="/"+r,window.$C.BUILD_NUMBER&&(a+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(a+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(a+=":"+e("APP_BUILD",0)),a+="/"+l}}var u=e("MRSPARKLE_ROOT_PATH","/"),d=e("LOCALE","en-US"),p="/"+d+a;return""==u||"/"==u?p:u+p}("/static/build/pages/dark")+"/"}(),a=[n("routers/ModSetup"),n("util/router_utils")],void 0===(i=function(e,t){new e;t.start_backbone_history()}.apply(t,a))||(e.exports=i)},2557:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,'.content-body{max-height:560px;position:relative}.content-body .main-tabs{margin-bottom:2px;position:absolute;top:0;width:100%;z-index:1000}.content-body .main-tabs .icon-alert{color:#dc4e41}.content-body .tab-content{border-top:.5px solid #dfdfdf;max-height:560px;overflow:auto;padding:30px 10px 10px}.content-body .tab-content .tab-pane{display:block;margin-left:25px;margin-top:10px}.content-body .control-group.error .mod-setup-error-message{color:#dc4e41;font-size:10px}.content-body .icon-alert{font-size:100%;padding-left:10px}.bundle-name{margin-left:30px;margin-top:10px}.nav.nav-tabs-left{border-right:.5px solid #dfdfdf;border-top:.5px solid #dfdfdf;float:left;min-height:600px;overflow:auto;position:relative;width:300px}.nav.nav-tabs-left li a{display:inline-block;overflow:hidden;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.nav.nav-tabs-left li{border-bottom:1px dotted #32414c;display:block;font-size:14px;padding:10px 30px 10px 20px;position:relative;text-decoration:none!important;text-overflow:ellipsis}.nav.nav-tabs-left li .icon-alert{color:#dc4e41;display:block;font-size:100%;position:absolute;right:10%;top:8px}.nav.nav-tabs-left li:hover{background-color:#3c444d}.nav.nav-tabs-left li:hover a{background-color:transparent}.nav.nav-tabs-left li:focus{background-color:#5c6773;outline:none}.nav.nav-tabs-left li.active{background-color:rgba(61,171,255,.12)}.nav.nav-tabs-left li.active a{color:#666}.nav.nav-tabs-left li.active:after{color:#5c6773;content:"\\203A";font-family:Splunk Icons;font-size:24px;line-height:33px;position:absolute;right:10px;top:0}.nav.nav-tabs-left li>a:focus{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.nav-tabs-left+.tab-content{height:600px;margin-left:300px}.app-name{font-weight:700}',""])},2558:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".modsetup-missing-setup-app{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}",""])},2559:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".main-section{background-color:#fff;min-height:600px}.wait-spinner{margin:5px}.success-section{margin-left:25px}.success-section .success-header{padding:10px}",""])},"api/SplunkFormHandlerBase":function(e,t,n){var a,i;a=[n("require/underscore"),n("require/backbone")],void 0===(i=function(e,t){const n=function(e){this.errors=[],this.ignoreList=[],this.options=e||{}};return e.extend(n.prototype,t.Events,{initialize:function(t,n){this.forms=t,this.options=n||{},e.each(t,(function(e){e.addEventListener("submit",(function(e){e.preventDefault()}))}))},save:function(e,t){},change:function(e,t){},validate:function(t,n,a){return this.resetErrors(),a&&(this.errors=a),e.each(t,(function(e){this._validateForm(e)}),this),a},_validateForm:function(t){if(!t.checkValidity()){const n=t.querySelectorAll(":invalid");e.each(n,(function(t){let n="",a="",i=t;for(;i;)n||(n=i.attributes.name&&i.attributes.name.value.startsWith(this.options.attributePrefix)?i.attributes.name.value:"",n&&i.dataset.errorMessage&&(a=i.dataset.errorMessage)),i=i.parentElement;e.contains(this.ignoreList,n)||this.addError("error",n,a||t.validationMessage)}),this)}},readFormValues:function(e){return e},writeFormValues:function(e){return e},destroy:function(){},addError:function(e,t,n){this.errors.push({type:e||"error",html:n,name:t})},markFieldsWithError:function(){e.each(this.errors,(function(e){const t=e.name;let n=!1;const a=this.getElementWithName(t);let i=a;for(;i;){if(i.classList.contains("control-group")){n=!0,i.classList.add("error");break}if(i=i.parentElement,i&&i.classList.contains("tab-content")){i=a;break}}i&&!n&&i.classList.add("error")}),this)},showErrors:function(t){e.each(this.errors,(function(e){const t=document.createElement("div");t.className="mod-setup-error-message",t.innerHTML=e.html;const n=this.getElementWithName(e.name);n&&n.parentNode.appendChild(t)}),this),this.markFieldsWithError()},resetErrors:function(){e.each(this.forms,(function(t){e.each(t.querySelectorAll(".mod-setup-error-message"),(function(e){e.remove()}),this),this.errors=[];const n=t.querySelectorAll("*");e.each(n,(function(e){let t=e;for(e.classList.contains("error")&&e.classList.remove("error");(t=t.parentElement)&&!t.classList.contains("error");)t.classList.remove("error")}),this)}),this)},addToIgnoreList:function(t){e.contains(this.ignoreList,t)||this.ignoreList.push(t)},removeFromIgnoreList:function(e){const t=this.ignoreList.indexOf(e);t>-1&&this.ignoreList.splice(t,1)},getElementWithName:function(e){for(let t=0;t<this.forms.length;t++){const n=this.forms[t].querySelector('[name="'+e+'"]');if(n)return n}return null}}),e.extend(n,{extend:t.View.extend}),n}.apply(t,a))||(e.exports=i)},"collections/modsetup/ModSetupScripts":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("util/splunkd_utils")),i=o(n("models/modsetup/ModSetupScript")),s=o(n("collections/SplunkDsBase"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.extend({model:i.default,url:function(){return a.default.fullpath(this.scriptUrl,{app:this.bundleId,owner:"nobody"})}}),e.exports=t.default},"collections/modsetup/ModSetupSplunkDConfs":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("shim/jquery")),i=l(n("require/underscore")),s=l(n("util/splunkd_utils")),o=l(n("models/modsetup/ModSetupSplunkDConf")),r=l(n("collections/SplunkDsBase"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.extend({urlBase:"configs/conf-",model:o.default,url:function(){var e=this.urlBase+this.config.file;return s.default.fullpath(e,{app:this.config.bundleId,owner:"nobody"})},fetch:function(e){var t=e;t=i.default.defaults(t||{},{count:0});var n={url:this.url(),data:i.default.defaults(t.data||{},{count:-1})};this.config.query&&(n.data.search=this.config.query);var s=a.default.extend(!0,n,t);return r.default.prototype.fetch.call(this,s)}}),e.exports=t.default},"helpers/modsetup/ModHandlersHelper":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(16)),i=u(n(17)),s=u(n("shim/jquery")),o=u(n("require/underscore")),r=u(n("api/SplunkFormHandlerBase")),l=u(n("shim/requirejs"));function u(e){return e&&e.__esModule?e:{default:e}}var d=["FormHandler.js","FormHandler.css"],p=function(){function e(t){(0,a.default)(this,e),this.supportedExtensions=t.supportedExtensions||d,this.handler=null}return(0,i.default)(e,[{key:"initialize",value:function(e){return this.bundleId=e.bundle,this.basePath=e.path,this.supportedExtensions=e.supportedExtensions||this.supportedExtensions,this.loadHandlers()}},{key:"getFilePaths",value:function(){var e=this,t=[];return o.default.each(this.supportedExtensions,(function(n){n.endsWith(".css")?t.push("css!"+e.basePath+"/"+e.bundleId+"/setup/"+n):t.push(e.basePath+"/"+e.bundleId+"/setup/"+n)})),t}},{key:"loadHandlers",value:function(){var e=this,t=this.getFilePaths(),n=s.default.Deferred();return(0,l.default)(t,(function(t){if(t){var a=new t;a instanceof r.default&&(e.handler=a)}else e.handler=new r.default,n.resolve();n.resolve()}),(function(){e.handler||(e.handler=new r.default,n.resolve())})),n}}]),e}();t.default=p,e.exports=t.default},"helpers/modsetup/ModSetupDataHelper":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(16)),i=l(n(17)),s=l(n("shim/jquery")),o=l(n("require/underscore")),r=n("helpers/modsetup/managers/ModSetupTypes");function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n,i){var s=this;(0,a.default)(this,e),this.bundleId=t,this.prefix=n,this.isDMCEnabled=i,this.typeMap={},o.default.each(o.default.keys(r.TYPES),(function(e){s.typeMap[r.TYPES[e]]=(0,r.getHelperForType)(e,s.isDMCEnabled,s.bundleId,s.prefix)}))}return(0,i.default)(e,[{key:"manageConfigurations",value:function(e,t){var n=this,a=this.constructValidConfiguration(e,t),i=s.default.Deferred(),r=[];o.default.each(a.setup,(function(e){r=r.concat(n.create(e))}));var l=0;return o.default.each(r,(function(e){e.always((function(){(l+=1)===r.length&&i.resolve()}))})),i}},{key:"save",value:function(e){var t=this,n=[],a=[],i=0,r=s.default.Deferred();return o.default.each(o.default.keys(this.typeMap),(function(a){n=n.concat(t.typeMap[a].save(e,a))})),o.default.each(n,(function(e){e.fail((function(e){if(e.responseText){var t=JSON.parse(e.responseText);t.messages&&(a=a.concat(t.messages))}})).always((function(){(i+=1)===n.length&&(a.length>0?r.reject(a):r.resolve())}))})),r}},{key:"getDefaultValues",value:function(){var e={};return o.default.each(o.default.values(this.typeMap),(function(t){e=o.default.extend({},e,t.getDefaultValues())})),e}},{key:"setType",value:function(e){var t=e,n=o.default.intersection(o.default.keys(t),o.default.values(r.TYPES));if(n.length>0)return t.type=n[0],t;throw new Error("Invalid type")}},{key:"create",value:function(e){var t=this,n=[],a=["name","isList"];if(e.isList&&e.types)o.default.each(o.default.keys(e.types),(function(i){var s=o.default.pick.apply(o.default,[e].concat(a));s[i]=e.types[i],s=t.setType(s),n=n.concat(t.typeMap[i].create(s))}));else{var i=this.setType(e);n=n.concat(this.typeMap[e.type].create(i))}return n}},{key:"constructValidConfiguration",value:function(e,t){var n=this,a=(0,s.default)(t),i=[],r={setup:[]};return a.find("[name]").each((function(e,t){i.push((0,s.default)(t).attr("name").substr(n.prefix.length+1))})),o.default.each(e.setup,(function(e){o.default.contains(i,e.name)&&r.setup.push(e)})),r}}]),e}();t.default=u,e.exports=t.default},"helpers/modsetup/configuration/ModSetupConfigurationHelper":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(16)),i=f(n(17)),s=f(n("models/modsetup/AppDependenciesInfo")),o=f(n("collections/modsetup/ModSetupSplunkDConfs")),r=f(n("shim/jquery")),l=f(n("require/underscore")),u=f(n("shim/splunk.util")),d=f(n("util/splunkd_utils")),p=n("helpers/modsetup/managers/ModSetupTypes");function f(e){return e&&e.__esModule?e:{default:e}}var c=["file","stanzas","properties"],h=function(){function e(t){(0,a.default)(this,e),this.options=t}return(0,i.default)(e,[{key:"getSetup",value:function(){var e=this,t=r.default.Deferred(),n=this.fetchConfiguration(),a=0;return l.default.each(n,(function(i){i.always((function(){e.json&&e.html&&(e.hasSetup=!0),(a+=1)===n.length&&t.resolve()}))})),t}},{key:"fetchConfiguration",value:function(){var e=[];if(this.options.isDMCEnabled)throw new Error("Not supported");var t="/static/app/"+this.options.bundleId+"/setup.json";e.push(this.fetchConfigJson(t));var n="/static/app/"+this.options.bundleId+"/setup.html";return e.push(this.fetchConfigHtml(n)),e.push(this.fetchDependencies()),e.push(this.fetchAppInfo()),e}},{key:"fetchConfigJson",value:function(t){var n=this;return r.default.get(d.default.fullpath(t)).then((function(t){n.json=e.parseJson(t)}))}},{key:"fetchConfigHtml",value:function(e){var t=this;return r.default.get(d.default.fullpath(e)).then((function(e){t.html=e}))}},{key:"fetchDependencies",value:function(){var e=this,t=new s.default;return t.set("bundleId",this.options.bundleId),t.fetch().then((function(){e.dependencies=l.default.filter(t.entry.content.keys(),(function(e){return!/^eai:/i.test(e)}))})).fail((function(){e.dependencies=[]}))}},{key:"fetchAppInfo",value:function(){var e=this,t=["ui","install"],n={file:"app",stanzas:t,bundleId:this.options.bundleId,query:t.map((function(e){return"name="+e})).join(" OR ")};return this.appCollection=new o.default,this.appCollection.config=n,this.appCollection.fetch().then((function(){e.isConfiguredModel=e.appCollection.find((function(e){return"install"===e.entry.get("name")})),e.appUiModel=e.appCollection.find((function(e){return"ui"===e.entry.get("name")}))}))}},{key:"getNeedsConfiguration",value:function(e){return!!e||!this.isConfigured}},{key:"isDMCEnabled",get:function(){return this.options.isDMCEnabled}},{key:"label",get:function(){return this.appUiModel.entry.content.get("label")}},{key:"isConfigured",get:function(){return u.default.normalizeBoolean(this.isConfiguredModel.entry.content.get("is_configured"))}}],[{key:"parseJson",value:function(t){try{return e.validateSetup(t.setup)?(l.default.each(t.setup,(function(t){t.conf&&e.formatConf(t),t.types&&t.types.conf&&e.formatConf(t.types)})),t):null}catch(e){return window.console.log(e),null}}},{key:"formatConf",value:function(e){var t=e;t.conf&&!l.default.isArray(t.conf)&&(t.conf=[t.conf]),t.conf&&l.default.each(t.conf,(function(e){var t=e;t.stanzas&&l.default.isString(t.stanzas)&&(t.stanzas=[t.stanzas]),t.properties&&!l.default.isArray(t.properties)&&(t.properties=[t.properties])}))}},{key:"validateSetup",value:function(t){if(l.default.isEmpty(t)||!l.default.isArray(t))throw new Error("No setup configuration provided");return l.default.each(t,(function(t){var n=l.default.intersection(l.default.keys(t),l.default.values(p.TYPES));if(1!==n.length)throw new Error("Invalid Config type "+JSON.stringify(t));if("conf"===n[0]&&(l.default.isArray(t.conf)?l.default.each(t.conf,(function(t){e.validateConf(t)})):e.validateConf(t.conf)),"password"===n[0]&&l.default.isEmpty(t.password.key))throw new Error("Invalid Password configuration : "+JSON.stringify(t));if("script"===n[0]&&l.default.isEmpty(t.script.url))throw new Error("Invalid script configuration "+JSON.stringify(t))})),!0}},{key:"validateConf",value:function(e){var t=l.default.keys(e);if(!c.every((function(n){return t.indexOf(n)>-1&&!l.default.isEmpty(e[n])})))throw new Error("Conf does not have all required properties\n             ("+c.join(",")+") : "+JSON.stringify(e))}}]),e}();t.default=h,e.exports=t.default},"helpers/modsetup/configuration/ModSetupConfigurationManager":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(16)),i=l(n(17)),s=l(n("shim/jquery")),o=l(n("require/underscore")),r=l(n("helpers/modsetup/configuration/ModSetupConfigurationHelper"));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,a.default)(this,e),this.options=t,this.configurations={},this.isEditAll=this.options.isEditAll||!1,this.mainApp=this.options.app,this.appsSetupDeferreds=[],this.appsFetchDeferred=s.default.Deferred()}return(0,i.default)(e,[{key:"createConfiguration",value:function(e){return this.configurations[e]=new r.default({bundleId:e,isDMCEnabled:this.options.isDMCEnabled}),this.configurations[e]}},{key:"requiresSetup",value:function(){return o.default.values(this.configurations).some((function(e){return e.hasSetup}))}},{key:"checkDeferredsStatus",value:function(){var e=!0;o.default.each(this.appsSetupDeferreds,(function(t){"pending"===t.state()&&(e=!1)})),e&&this.appsFetchDeferred.resolve()}},{key:"fetchConfigAppsList",value:function(e){var t=this,n=this.createConfiguration(e),a=n.getSetup();return this.appsSetupDeferreds.push(a),s.default.when(a).always((function(){var e=n.dependencies;o.default.isEmpty(e)||o.default.each(e,(function(e){t.fetchConfigAppsList(e)})),t.checkDeferredsStatus()})),this.appsFetchDeferred}},{key:"apps",get:function(){var e=this,t=[];return o.default.each(o.default.keys(this.configurations),(function(n){e.configurations[n].getNeedsConfiguration(e.isEditAll)&&t.push({label:e.configurations[n].label,value:n,parentApp:e.mainApp===n,hasSetup:e.configurations[n].hasSetup})})),t}}]),e}();t.default=u,e.exports=t.default},"helpers/modsetup/managers/ModSetupBaseType":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(16)),i=s(n(17));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,n,i){(0,a.default)(this,e),this.options={bundleId:t,prefix:n,isDMCEnabled:i},this.models=[]}return(0,i.default)(e,[{key:"getDefaultValues",value:function(){}},{key:"create",value:function(){}},{key:"save",value:function(){}}],[{key:"getType",value:function(){return null}}]),e}();t.default=o,e.exports=t.default},"helpers/modsetup/managers/ModSetupConfType":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(73)),i=h(n(83)),s=h(n(16)),o=h(n(17)),r=h(n(20)),l=h(n(21)),u=h(n("models/modsetup/ModSetupSplunkDConf")),d=h(n("collections/modsetup/ModSetupSplunkDConfs")),p=h(n("require/underscore")),f=h(n("helpers/modsetup/managers/ModSetupBaseType")),c=n("helpers/modsetup/managers/ModSetupTypes");function h(e){return e&&e.__esModule?e:{default:e}}var v=["name","isList","viewConfig"],m=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=(0,r.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return o.dataMap={},o.listMap={},o}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getDefaultValues",value:function(){var e=this,t={},n=this.options.prefix||"";return p.default.each(p.default.keys(this.dataMap),(function(a){if(e.dataMap[a]&&e.dataMap[a].length>0){var s=e.dataMap[a][0],o=s.get("properties")||[],r=p.default.pick.apply(p.default,[s.entry.content.toJSON()].concat((0,i.default)(o))),l=o[0];r[l]&&(t[n+"."+a]=r[l])}})),p.default.each(p.default.keys(this.listMap),(function(n){t[e.options.prefix+"."+n]=e.getDefaultDataForList(e.listMap[n])})),t}},{key:"getDefaultDataForList",value:function(e){var t={};return p.default.each(e,(function(e){var n=e.config;n.viewConfig&&(t["@config"]=(0,a.default)({},"@config",n.viewConfig)),e.each((function(e){if(!p.default.isArray(n.stanzas)||p.default.contains(n.stanzas,e.entry.get("name"))){var a=e.get("properties")||[],s=p.default.pick.apply(p.default,[e.entry.content.toJSON()].concat((0,i.default)(a))),o=e.entry.get("name");t[o]?t[o]=p.default.extend({},t[o],s):(s["@name"]=e.entry.get("name"),t[o]=s)}}))})),p.default.values(t)}},{key:"create",value:function(e){var t=this,n=[],a=e.conf;return p.default.each(a,(function(a){var i=a;i=p.default.extend({},i,p.default.pick.apply(p.default,[e].concat(v))),n=e.isList?n.concat(t.handleListConf(i)):n.concat(t.handleSingleConf(i))})),n}},{key:"handleListConf",value:function(e){var t=this,n=[],a=null;(a=new d.default).config=e,this.constructFetchQuery(a);var i=a.fetch().done((function(){p.default.each(a.models,(function(n){t.updateModelProperties(n,e)}),t),t.updateMap(t.dataMap,e.name,a.models),t.addModelToList(a.models),t.updateMap(t.listMap,e.name,[a])}));return n.push(i),n}},{key:"handleSingleConf",value:function(e){var t=this,n=[];if(p.default.isArray(e.stanzas))p.default.each(e.stanzas,(function(a){var i=null;p.default.isString(a)&&(i=new u.default,t.updateModelProperties(i,e),i.entry.set("name",a));var s=i.fetch().done((function(){t.updateMap(t.dataMap,e.name,[i]),t.addModelToList([i])}));n.push(s)}));else if(p.default.isObject(e.stanzas)&&e.stanzas.pattern){var a=new d.default;a.config=e,this.constructFetchQuery(a);var i=a.fetch().done((function(){p.default.each(a.models,(function(n){t.updateModelProperties(n,e)}),t),t.updateMap(t.dataMap,e.name,a.models),t.addModelToList(a.models)}));n.push(i)}return n}},{key:"constructFetchQuery",value:function(e){var t=e,n=t.config,a={};t.config.bundleId=this.options.bundleId,a=p.default.isObject(n.stanzas)&&n.stanzas.pattern?"name="+n.stanzas.pattern:p.default.isArray(n.stanzas)?n.stanzas.map((function(e){return"name="+e})).join(" OR "):n.stanzas,t.config.query=a}},{key:"updateMap",value:function(e,t,n){var a=e;a[t]?a[t]=a[t].concat(n):a[t]=n}},{key:"updateModelProperties",value:function(e,t){e.set({bundle:this.options.bundleId,type:t.file,key:t.name,properties:t.properties,allProperties:t.properties})}},{key:"addModelToList",value:function(e){var t=this;p.default.each(e,(function(e){var n=t.findInModelsList(e);n?n.set("allProperties",p.default.union(n.get("allProperties"),e.get("properties"))):t.models.push(e)}))}},{key:"save",value:function(e){var t=this,n=[];return p.default.each(p.default.keys(e),(function(a){var i=e[a];p.default.isString(i)?t.saveStringValues(a,e):p.default.isArray(i)&&(n=n.concat(t.saveListValues(a,i)))})),p.default.each(this.models,(function(e){e.dirty&&!e.delete&&n.push(e.save({}))})),n}},{key:"saveStringValues",value:function(e,t){var n=this,a=e.substr(this.options.prefix.length+1),i=this.dataMap[a];p.default.each(i,(function(e){var a=[];p.default.each(e.get("properties"),(function(i){var s=[i],o=n.options.prefix+"."+e.get("key");o in t&&(s.push(t[o]),a.push(s))})),n.saveModelWithProperties(e,t,a)}))}},{key:"saveListValues",value:function(e,t){var n,a=this,i=e.substr(this.options.prefix.length+1),s=[],o=p.default.pluck(t,"@name"),r=[],l=this.listMap[i];return p.default.each(t,(function(e){var t=a.findInCollections(l,e);t&&t.length>0?p.default.each(t,(function(t){var n=[];p.default.each(t.get("properties"),(function(t){var a=[t];t in e&&(a.push(e[t]),n.push(a))})),a.saveModelWithProperties(t,e,n)})):p.default.each(l,(function(t){var n=new u.default,i=[];n.set({bundle:a.options.bundleId,type:t.config.file,name:e["@name"]}),n.entry.set("name",e["@name"]),p.default.each(t.config.properties,(function(t){var n=[t];e[t]&&(n.push(e[t]),i.push(n))})),i.push(["@name",e["@name"]]),n.set("allProperties",t.config.properties),n.entry.content.set(p.default.object(i)),s.push(n.save({}))}))})),p.default.each(l,(function(e){r=r.concat(e.models)})),n=p.default.filter(r,(function(e){return!p.default.contains(o,e.entry.get("name"))})),p.default.each(n,(function(e){var t=a.findInModelsList(e);t?(t.delete=!0,s.push(t.destroy())):s.push(e.destroy())})),s}},{key:"saveModelWithProperties",value:function(e,t,n){var a=this.findInModelsList(e);a.entry.content.set(p.default.object(n)),a.dirty=!0}},{key:"findInCollections",value:function(e,t){var n=[];return p.default.each(e,(function(e){n=n.concat(e.filter((function(e){return e.entry.get("name")===t["@name"]})))})),n}},{key:"findInModelsList",value:function(e){return p.default.find(this.models,(function(t){return t.entry.get("name")===e.entry.get("name")&&t.get("type")===e.get("type")}))}}],[{key:"getType",value:function(){return c.TYPES.CONF}}]),t}(f.default);t.default=m,e.exports=t.default},"helpers/modsetup/managers/ModSetupPasswordType":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(16)),i=p(n(17)),s=p(n(20)),o=p(n(21)),r=p(n("models/modsetup/ModSetupPassword")),l=p(n("require/underscore")),u=p(n("helpers/modsetup/managers/ModSetupBaseType")),d=n("helpers/modsetup/managers/ModSetupTypes");function p(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"getDefaultValues",value:function(){var e=this,t={};return l.default.each(this.models,(function(n){var a=n.entry.content.get("clear_password");if(a){var i=JSON.parse(a);l.default.each(l.default.keys(i),(function(n){t[e.options.prefix+"."+n]=i[n]}))}})),t}},{key:"create",value:function(e){var t=[],n=new r.default;return n.set({name:e.name,fields:e.password.fields,bundle:this.options.bundleId}),n.entry.set({name:e.password.key}),this.models.push(n),t.push(n.fetch()),t}},{key:"save",value:function(e){var t=this,n=e,a=[];return l.default.each(this.models,(function(e){var i={};l.default.each(e.get("fields"),(function(e){i[e]=n[t.options.prefix+"."+e]}));var s={name:e.get("key"),password:JSON.stringify(i)};e.entry.content.clear(),e.entry.content.set(s),a.push(e.save({}))})),a}}],[{key:"getType",value:function(){return d.TYPES.PASSWORD}}]),t}(u.default);t.default=f,e.exports=t.default},"helpers/modsetup/managers/ModSetupScriptType":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(16)),i=c(n(17)),s=c(n(20)),o=c(n(21)),r=c(n("collections/modsetup/ModSetupScripts")),l=c(n("models/modsetup/ModSetupScript")),u=c(n("shim/jquery")),d=c(n("require/underscore")),p=c(n("helpers/modsetup/managers/ModSetupBaseType")),f=n("helpers/modsetup/managers/ModSetupTypes");function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=(0,s.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return r.collectionsMap={},r}return(0,o.default)(t,e),(0,i.default)(t,[{key:"getDefaultValues",value:function(){var e=this,t={};return d.default.each(d.default.values(this.collectionsMap),(function(n){d.default.each(n.models,(function(n){var a=n.entry.content.toJSON();a["@name"]=n.entry.get("name");var i=e.options.prefix+"."+n.get("key");t[i]?t[i].push(a):t[i]=[a]}))})),t}},{key:"create",value:function(e){var t=[],n=new r.default;n.bundleId=this.options.bundleId,n.scriptUrl=e.script.url;var a=n.fetch({}).done((function(){d.default.each(n.models,(function(t){t.set({key:e.name})}))}));return this.collectionsMap[e.name]=n,t.push(a),t}},{key:"addNew",value:function(e,t){var n=new l.default;n.entry.set("name",t["@name"]);var a=u.default.extend(!0,{},t);return n.bundleId=this.options.bundleId,n.scriptUrl=e.scriptUrl,delete a["@name"],n.entry.content.set(a),n}},{key:"save",value:function(e){var t=this,n=[];return d.default.each(d.default.keys(this.collectionsMap),(function(a){var i=t.collectionsMap[a],s=e[t.options.prefix+"."+a];d.default.each(s,(function(e){var a=i.find((function(t){return t.entry.get("name")===e["@name"]}));if(a){var s=u.default.extend(!0,{},e);delete s["@name"],a.entry.content.set(s),n.push(a.save({}))}else{var o=t.addNew(i,e);n.push(o.save({}))}}));var o=d.default.pluck(s,"@name"),r=i.filter((function(e){return!d.default.contains(o,e.entry.get("name"))}));d.default.each(r,(function(e){n.push(e.destroy())}))})),n}}],[{key:"getType",value:function(){return f.TYPES.SCRIPT}}]),t}(p.default);t.default=h,e.exports=t.default},"helpers/modsetup/managers/ModSetupTypes":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=void 0,t.getHelperForType=function(e,t){for(var n=r[e].helper,a=arguments.length,i=Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s];return new(Function.prototype.bind.apply(n,[null].concat(i,[t])))};var a=o(n("helpers/modsetup/managers/ModSetupConfType")),i=o(n("helpers/modsetup/managers/ModSetupPasswordType")),s=o(n("helpers/modsetup/managers/ModSetupScriptType"));function o(e){return e&&e.__esModule?e:{default:e}}var r={CONF:{name:"conf",helper:a.default},PASSWORD:{name:"password",helper:i.default},SCRIPT:{name:"script",helper:s.default}};var l;t.TYPES=(l={},Object.keys(r).forEach((function(e){l[e]=function(e){return r[e]}(e).name})),l)},"models/modsetup/AppDependenciesInfo":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("shim/jquery")),i=o(n("util/splunkd_utils")),s=o(n("models/SplunkDBase"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.extend({url:function(){var e="/services/apps/local/"+this.get("bundleId")+"/dependencies";return i.default.fullpath(e,{app:this.get("bundleId"),owner:"nobody"})},sync:function(e,t,n){var i={url:this.url(),data:{output_mode:"json"}},o=a.default.extend({},i,n);return s.default.prototype.sync.call(this,e,t,o)}}),e.exports=t.default},"models/modsetup/ModSetupPassword":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("shim/jquery")),i=o(n("util/splunkd_utils")),s=o(n("models/SplunkDBase"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.extend({url:function(){return i.default.fullpath("storage/passwords",{app:this.get("bundle"),owner:"nobody"})},sync:function(e,t,n){var i={};switch(e){case"create":i={data:{output_mode:"json",name:this.entry.get("name")}};break;case"read":i={url:this.url()+"/"+this.entry.get("name"),data:{output_mode:"json"}}}var o=a.default.extend({},i,n);return s.default.prototype.sync.call(this,e,t,o)}}),e.exports=t.default},"models/modsetup/ModSetupScript":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("shim/jquery")),i=o(n("models/SplunkDBase")),s=o(n("util/splunkd_utils"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.extend({url:function(){return s.default.fullpath(""+this.scriptUrl,{app:this.bundleId,owner:"nobody"})},sync:function(e,t,n){var s={};switch(e){case"create":s={data:{output_mode:"json",name:this.entry.get("name")}}}var o=a.default.extend({},s,n);return i.default.prototype.sync.call(this,e,t,o)}}),e.exports=t.default},"models/modsetup/ModSetupSplunkDConf":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(83)),i=l(n("shim/jquery")),s=l(n("require/underscore")),o=l(n("util/splunkd_utils")),r=l(n("models/SplunkDBase"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.extend({urlBase:"configs/conf-",url:function(){var e=this.urlBase+this.get("type");return o.default.fullpath(e,{app:this.get("bundle"),owner:"nobody"})},sync:function(e,t,n){var a={url:this.url(),data:{}};switch(e){case"create":a.data.name=this.entry.get("name"),this.updateAllProperties(a);break;case"update":a.url=a.url+"/"+this.entry.get("name"),this.updateAllProperties(a);break;case"delete":delete a.url;break;default:a.url=a.url+"/"+this.entry.get("name")}var s=i.default.extend(!0,a,n);return r.default.prototype.sync.call(this,e,t,s)},updateAllProperties:function(e){this.allProperties=this.get("allProperties")||[],i.default.extend(!0,e.data,s.default.pick.apply(s.default,[this.entry.content.toJSON()].concat((0,a.default)(this.allProperties))))},reloadAppConfigurations:function(){var e=o.default.fullpath("/services/apps/local/"+this.get("bundle")+"/_reload");return i.default.ajax({url:e,data:{output_mode:"json"}})}}),e.exports=t.default},"routers/ModSetup":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=u(n("require/underscore")),i=u(n("shim/jquery")),s=u(n("routers/Base")),o=u(n("views/modsetup/Master")),r=u(n("helpers/modsetup/configuration/ModSetupConfigurationManager")),l=u(n("models/classicurl"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.extend({initialize:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.default.prototype.initialize.apply(this,t),this.setPageTitle((0,a.default)("Mod setup").t()),this.enableAppBar=!1,this.showAppsList=!1,a.default.isUndefined(t.supportedExtensions)||(this.supportedExtensions=t.supportedExtensions),this.model.classicurl=l.default,this.deferreds.classicurl=this.model.classicurl.fetch()},page:function(){for(var e=this,t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];s.default.prototype.page.apply(this,n),i.default.when(this.deferreds.classicurl).then((function(){var t=e.model.classicurl.get("action"),n=new r.default({app:e.model.application.get("app"),isDMCEnabled:!1,isEditAll:t&&"edit"===t});i.default.when(n.fetchConfigAppsList(e.model.application.get("app"))).done((function(){var t={configurationManager:n,model:{application:e.model.application,classicurl:e.model.classicurl},collection:{}};a.default.isUndefined(e.supportedExtensions)||(t.supportedExtensions=e.supportedExtensions),n.requiresSetup()&&(e.addPageViewEl(e.pageView.el),e.masterView=new o.default(t),e.pageView.$(".main-section-body").append(e.masterView.render().el))}))}))}}),e.exports=t.default},"util/form_list_databind":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0}),t.readFormValues=function(e){var t={};return(0,i.default)(o(e)).each((function(e){var n=(0,a.default)(e),i=n.attr("name");t[i]=n.data("value")||[]})),t},t.applyFormValues=function(e,t){(0,i.default)(o(e)).each((function(e){var n=(0,a.default)(e),i=n.attr("name");n.data("value",t[i]),n.trigger("data")}))};var a=s(n("shim/jquery")),i=s(n("require/underscore"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,a.default)(e).find("splunk-repeat")}},"views/modsetup/Master":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(83)),i=h(n("require/underscore")),s=h(n("shim/jquery")),o=h(n("require/backbone")),r=h(n("views/Base")),l=h(n("shim/splunk.util")),u=h(n("views/shared/waitspinner/Master")),d=h(n("views/modsetup/ModSetup")),p=h(n("views/shared/FlashMessagesLegacy")),f=h(n("collections/shared/FlashMessages")),c=h(n("views/modsetup/ModSetupAppsListDialog"));function h(e){return e&&e.__esModule?e:{default:e}}n("views/modsetup/Master.pcss"),t.default=r.default.extend({initialize:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.initialize.apply(this,t),this.children.waitSpinner=new u.default,this.collection.flashMessages=new f.default,this.children.flashMessagesView=new p.default({collection:this.collection.flashMessages}),this.children.setup=[],this.children.waitSpinner.start(),this.children.waitSpinner.$el.hide(),this.compiledSuccessTemplate=i.default.template(this.successTemplate),this.model.appsModel=new o.default.Model,this.model.appsModel.set("apps",this.options.configurationManager.apps),this.options.configurationManager.apps.length>1&&(this.children.dialog=new c.default({configurationManager:this.options.configurationManager,backdrop:"static",keyboard:!1,onHiddenRemove:!0,model:{appsModel:this.model.appsModel}}),this.listenTo(this.children.dialog,"appsSelected",this.createSetupViews))},events:{"click .mod-setup-save":"saveClicked","click .app-tab":"leftTabClicked"},leftTabClicked:function(e){e.preventDefault();var t=(0,s.default)(e.currentTarget),n=t.find("a").data().type;(0,i.default)(this.children.setup).each((function(e){e.id===n?(e.view.$el.show(),e.view.$el.trigger("setup:viewActive")):e.view.$el.hide()})),this.$el.find(".nav-tabs-left > li").removeClass("active"),t.addClass("active")},instantiateModSetupView:function(e){var t={configuration:this.options.configurationManager.configurations[e],bundleId:e,model:{application:this.model.application},collection:{}};return i.default.isUndefined(this.options.supportedExtensions)||(t.supportedExtensions=this.options.supportedExtensions),new d.default(t)},createSetupViews:function(){var e=this;i.default.each(this.model.appsModel.get("apps"),(function(t){e.children.setup.push({id:t.value,view:e.instantiateModSetupView(t.value),appLabel:t.label})})),this.renderSetupViews()},saveClicked:function(e){var t=this;if(e.preventDefault(),this.validateAllForms().length>0);else{var n=this.saveAllForms();this.children.waitSpinner.$el.show(),this.$(".mod-setup-save").removeClass("enabled").addClass("disabled"),s.default.when.apply(s.default,(0,a.default)(n)).then((function(){s.default.when.apply(s.default,(0,a.default)(t.saveIsConfigured())).always((function(){t.reloadConfigurations()}))})).fail((function(e){t.onSaveFailed(e)}))}},saveIsConfigured:function(){var e=this,t=[];return i.default.each(this.model.appsModel.get("apps"),(function(n){var a=e.options.configurationManager.configurations[n.value];l.default.normalizeBoolean(a.isConfiguredModel.entry.content.get("is_configured"))||(a.isConfiguredModel.entry.content.set("is_configured",!0),t.push(a.isConfiguredModel.save({})))})),t},reloadConfigurations:function(){var e=this,t=[];i.default.each(this.model.appsModel.get("apps"),(function(n){var a=e.options.configurationManager.configurations[n.value];t.push(a.isConfiguredModel.reloadAppConfigurations())})),s.default.when.apply(s.default,t).always((function(){e.children.waitSpinner.$el.hide();var t=e.model.classicurl.get("redirect_override");t&&i.default.isString(t)&&"/"===t.charAt(0)&&"\\"!==t.charAt(1)&&"/"!==t.charAt(1)?window.location.href=t:e.$el.find(".main-section").html(e.compiledSuccessTemplate({message:(0,i.default)("Splunk Web successfully saved your configuration.").t()}))}))},onSaveFailed:function(e){this.children.waitSpinner.$el.hide(),this.$(".mod-setup-save").removeClass("disabled").addClass("enabled"),this.formatErrors(e),this.collection.flashMessages.reset(),this.collection.flashMessages.add(e)},formatErrors:function(e){i.default.each(e,(function(e){var t=e;t.text&&(t.html=t.text),delete t.text}))},validateAllForms:function(){var e=[];return this.clearErrors(),i.default.each(this.children.setup,(function(t){e=e.concat(t.view.validateAllForms())})),e.length>0&&this.showErrors(),e},showErrors:function(){var e=this;i.default.each(this.children.setup,(function(t){t.view.$el.find(".mod-setup-error-message").length>0&&e.$el.find(".nav-tabs-left li."+t.id+" .icon-alert").show()}))},clearErrors:function(){this.$el.find(".nav-tabs-left li .icon-alert").hide()},saveAllForms:function(){var e=[];return i.default.each(this.children.setup,(function(t){e.push(t.view.save())})),e},render:function(){return this.$el.html(this.compiledTemplate({})),this.children.waitSpinner.render().appendTo(this.$(".wait-spinner")),this.options.configurationManager.apps.length>1?(this.children.dialog.render().appendTo((0,s.default)("body")),this.children.dialog.show()):this.createSetupViews(),this.$(".flash-messages-placeholder").append(this.children.flashMessagesView.render().el),this},renderSetupViews:function(){var e=null;this.model.appsModel.get("apps").length>1?(this.$el.find(".main-section").html((0,i.default)(this.templateWithTabs).template({setups:this.children.setup})),e=this.$el.find(".tab-content")):(this.$el.find(".main-section").html((0,i.default)(this.templateWithoutTabs).template({setups:this.children.setup})),e=this.$el.find(".mod-setup-content")),i.default.each(this.children.setup,(function(t){t.view.render().$el.appendTo(e),t.view.$el.hide()})),this.children.setup[0].view.$el.show()},template:'\n        <div class="section-header section-padded">\n            <div>\n                <span class="wait-spinner pull-right"></span>\n                <button class="pull-right btn btn-primary mod-setup-save"><%- _("Save configuration").t() %></button>\n            </div>\n            <h3 class="section-title"><%- _("Setup").t() %></h3>\n            <p class="description"><%- _("Provide initial configurations for the app").t() %></p>\n            <div class="flash-messages-placeholder"></div>\n            <div clas="clearfix"></div>\n        </div>\n        <div class="main-section">\n    ',templateWithoutTabs:'<div class="mod-setup-content"></div>',templateWithTabs:'\n        <ul class="nav nav-tabs-left">\n            <% _(setups).each((setup, i) => { %>\n                <li class="<%= i === 0 ? "active" : "" %> app-tab  <%- setup.id %>"</li>\n                    <a href="#" data-toggle="tab" data-type="<%- setup.id %>">                        <%- setup.appLabel %>\n                        <i class="icon-alert" style="display: none"></i>\n                    </a>\n                </li>\n            <% }) %>\n        </ul>\n        <div class="tab-content">\n    ',successTemplate:'<div class="success-section">\n            <div class="success-header">\n                <h3><%- message %></h3>\n            </div>\n        </div>'}),e.exports=t.default},"views/modsetup/Master.pcss":function(e,t,n){var a=n(2559);"string"==typeof a&&(a=[[e.i,a,""]]);var i={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};n(6)(a,i);a.locals&&(e.exports=a.locals)},"views/modsetup/ModSetup":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=d(n("shim/jquery")),i=d(n("require/underscore")),s=d(n("models/Base")),o=d(n("views/Base")),r=d(n("views/shared/databind/HtmlFormDataBindWithDelegate")),l=d(n("helpers/modsetup/ModHandlersHelper")),u=d(n("helpers/modsetup/ModSetupDataHelper"));function d(e){return e&&e.__esModule?e:{default:e}}n("views/modsetup/ModSetup.pcss");t.default=o.default.extend({initialize:function(e){var t=this;o.default.prototype.initialize.call(this,e);var n={};this.options=e||{},this.setupDataHelper=new u.default(this.options.bundleId,"setup",this.options.configuration.isDMCEnabled),this.tabsConfig=[],this.setupProperties=this.options.configuration.json,this.setupHtml=this.options.configuration.html,this.model.target=new s.default,this.createFormViews(),i.default.isUndefined(this.options.supportedExtensions)||(n={supportedExtensions:this.options.supportedExtensions}),this.modHandlers=new l.default(n);var r=this.modHandlers.initialize({bundle:this.options.bundleId,path:"/static/app"});a.default.when(r).done((function(){t.updateViewWithDefaultValues()}))},events:{"click a[data-toggle]":"tabClicked","setup:viewActive":"viewActive"},tabClicked:function(e){e.preventDefault();var t=(0,a.default)(e.currentTarget),n=t.data().type,s=i.default.find(this.tabsConfig,(function(e){return e.id===n}));(0,i.default)(this.children.form.$el.find(".mod-parent > form")).each((function(e){(0,a.default)(e).hide()})),this.children.form.$el.find('[section-label="'+s.label+'"]').show(),this.$el.find(".nav > li").removeClass("active"),t.parent().addClass("active")},viewActive:function(){var e=i.default.find(this.tabsConfig,(function(e){var t=(0,a.default)("li."+e.id+" i");return!!t&&t.is(":visible")}));e&&(0,a.default)("li."+e.id+" a").click()},updateViewWithDefaultValues:function(){var e=this;a.default.when(this.setupDataHelper.manageConfigurations(this.setupProperties,this.setupHtml)).done((function(){e.model.target.set(e.setupDataHelper.getDefaultValues()),e.children.form.registerDelegate(e.modHandlers.handler),e.children.form.writeFormValues(),e.children.form.readFormValues()}))},createFormViews:function(){var e=this,t=this.options.configuration.html,n=(0,a.default)(t).filter("form");i.default.each(n,(function(t,n){var s=(0,a.default)(t).attr("section-label");s||(s=(0,i.default)("Section").t()+" "+n);var o={label:s,id:s.replace(/ /g,"_")};e.tabsConfig.push(o)})),this.children.form=new r.default({className:"tab-pane",model:{application:this.model.application,target:this.model.target},html:t,attributePrefix:"setup",entityReference:"setup:"})},showErrors:function(){var e=this;i.default.each(this.tabsConfig,(function(t){e.$el.find('[section-label="'+t.label+'"]').find(".mod-setup-error-message").length>0&&e.$el.find("li."+t.id+" .icon-alert").show()}))},clearErrors:function(){this.$el.find(".main-tabs li .icon-alert").hide()},validateAllForms:function(){var e=[];return this.clearErrors(),(e=e.concat(this.children.form.validateForm())).length>0&&this.showErrors(e),e},save:function(){return this.children.form.save(),this.setupDataHelper.save(this.model.target.toJSON(),"setup")},render:function(){return this.$el.append(this.compiledTemplate({config:this.tabsConfig,useTabs:1!==this.tabsConfig.length,bundleId:this.options.bundleId})),this.children.form.render().$el.appendTo(this.$el.find(".tab-content")),this.children.form.$el.find("form").hide().filter(":first-child").show(),this.$el.find("."+this.tabsConfig[0].id).addClass("active"),this},template:'\n        <div class="content-body">\n            <% if(useTabs) { %>\n            <ul class="nav nav-tabs main-tabs">\n                <% _.each(config, function(item) { %>\n                <li class="<%- item.id %>">\n                    <a href="#<%- item.id %>" data-toggle="tab" data-type="<%- item.id %>">\n                        <%- item.label %>\n                        <i class="icon-alert" style="display: none"></i>\n                    </a>\n                </li>\n                <% }); %>\n            </ul>\n            <% } %>\n            <div class="tab-content">\n            </div>\n        </div>\n        '}),e.exports=t.default},"views/modsetup/ModSetup.pcss":function(e,t,n){var a=n(2557);"string"==typeof a&&(a=[[e.i,a,""]]);var i={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};n(6)(a,i);a.locals&&(e.exports=a.locals)},"views/modsetup/ModSetupAppsListDialog":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("require/underscore")),i=l(n("require/backbone")),s=l(n("views/shared/Modal")),o=l(n("views/shared/controls/ControlGroup")),r=l(n("shim/splunk.util"));function l(e){return e&&e.__esModule?e:{default:e}}n("views/modsetup/ModSetupAppsListDialog.pcss"),t.default=s.default.extend({initialize:function(e){s.default.prototype.initialize.apply(this,e);var t=this.model.appsModel.get("apps").filter((function(e){return e.hasSetup&&!e.parentApp}));this.model.list=new i.default.Model({apps:a.default.pluck(t,"value")}),this.children.list=new o.default({label:(0,a.default)("Apps list").t(),controlType:"CheckboxGroup",controlOptions:{model:this.model.list,modelAttribute:"apps",items:t}})},events:{"click .btn-primary":"nextClicked"},nextClicked:function(e){var t=this;e.preventDefault();var n=this.model.appsModel.get("apps").filter((function(e){return!(!a.default.contains(t.model.list.get("apps"),e.value)&&!e.parentApp)}));this.model.appsModel.set("apps",n),this.trigger("appsSelected"),this.hide()},getAppsWithoutSetup:function(){return a.default.pluck(this.model.appsModel.get("apps").filter((function(e){return!e.hasSetup})),"label")},render:function(){this.$el.html(s.default.TEMPLATE),this.$(s.default.HEADER_TITLE_SELECTOR).html(a.default.escape((0,a.default)("Select apps to configure").t())),this.$(s.default.BODY_SELECTOR).append(s.default.FORM_HORIZONTAL);var e=(0,a.default)('<span class="app-name">%s</span> requires the following dependencies. Select one or more of the following apps to configure them now.').t(),t=this.model.appsModel.get("apps").find((function(e){return!0===e.parentApp})),n=r.default.sprintf(e,t.label),i=this.getAppsWithoutSetup();this.$(s.default.BODY_FORM_SELECTOR).html(this.compiledTemplate({message:n,appsWithoutSetupList:i,missingSetupMessage:(0,a.default)("You cannot configure the following dependencies at this time. Check the App Listing page to see if any of the following apps need additional setup.").t()})),this.children.list.render().appendTo(this.$(".mod-setup-apps-list")),this.$(s.default.FOOTER_SELECTOR).append(s.default.BUTTON_NEXT),this.$("."+s.default.BUTTON_CLOSE_CLASS).remove()},template:'<%= message %><div class="mod-setup-apps-list"></div><% if (appsWithoutSetupList && appsWithoutSetupList.length > 0) { %><p> <%- missingSetupMessage %></p><ul class="modsetup-missing-setup-app"><% _.each(appsWithoutSetupList, function(app) { %><li> <%- app %></li><% });%></ul><% } %>'}),e.exports=t.default},"views/modsetup/ModSetupAppsListDialog.pcss":function(e,t,n){var a=n(2558);"string"==typeof a&&(a=[[e.i,a,""]]);var i={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};n(6)(a,i);a.locals&&(e.exports=a.locals)},"views/shared/databind/HtmlFormDataBindWithDelegate":function(e,t,n){var a,i;a=[n("shim/jquery"),n("require/underscore"),n("require/backbone"),n("util/form_databind"),n("util/form_list_databind"),n("views/shared/databind/HtmlFormDialog")],void 0===(i=function(e,t,n,a,i,s){return s.extend({tag:"div",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.delegates=null,e.delegate&&this.registerDelegate(e.delegate)},getForm:function(){return this.$("form")},getFormElement:function(){return this.el.querySelectorAll("form")},registerDelegate:function(e){this.delegate=e,this.delegate.initialize(this.getFormElement(),{attributePrefix:this.attributePrefix})},validateForm:function(){var e=[];return this.delegate&&(e=this.delegate.validate.call(this.delegate,this.getFormElement(),this.model.target.toJSON(),e)).length>0&&this.delegate.showErrors(this.getFormElement()),e},save:function(){this.delegate&&this.delegate.save.call(this.delegate,this.getFormElement(),this.model.target.toJSON())},change:function(){this.delegate&&this.delegate.change.call(this.delegate,this.getFormElement(),this.model.target.toJSON())},removeIgnoredFieldsFromModel:function(){this.delegate&&t.each(this.delegate.ignoreList,(function(e){this.model.target.unset(e)}),this)},writeFormValues:function(){var e=this.model.target.toJSON();i.applyFormValues(this.getForm(),e),s.prototype.writeFormValues.apply(this,arguments),this.delegate&&(e=this.delegate.writeFormValues.call(this.delegate,e)),i.applyFormValues(this.getForm(),e),a.applyFormValues(this.getForm(),e)},readFormValues:function(){s.prototype.readFormValues.apply(this,arguments);var e=this.model.target.toJSON();t(i.readFormValues(this.getForm())).each(function(t,n){0===n.indexOf(this.attributePrefix)&&(e[n]=t||[])}.bind(this)),this.delegate&&(e=this.delegate.readFormValues.call(this.delegate,e)),this.model.target.set(e),this.removeIgnoredFieldsFromModel(),this.change()},renderContentHtml:function(e){this.$el.append('<div class="mod-parent"></div>'),this.$el.find(".mod-parent").html(e)}})}.apply(t,a))||(e.exports=i)}});