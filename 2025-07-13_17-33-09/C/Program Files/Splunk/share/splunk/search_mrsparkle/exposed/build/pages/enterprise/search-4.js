(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1810:function(e,t,i){var s;(function(){
/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
(function(){var i,a={},l="en",n=null,r="0,0",o=e.exports;function h(e){this._value=e}function d(e,t,i,s){var a,l,n=Math.pow(10,t);return l=(i(e*n)/n).toFixed(t),s&&(a=new RegExp("0{1,"+s+"}$"),l=l.replace(a,"")),l}function u(e,t,i){return t.indexOf("$")>-1?function(e,t,i){var s,n,r=t.indexOf("$"),o=t.indexOf("("),h=t.indexOf("-"),d="";t.indexOf(" $")>-1?(d=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(d=" ",t=t.replace("$ ","")):t=t.replace("$","");n=g(e._value,t,i),r<=1?n.indexOf("(")>-1||n.indexOf("-")>-1?(n=n.split(""),s=1,(r<o||r<h)&&(s=0),n.splice(s,0,a[l].currency.symbol+d),n=n.join("")):n=a[l].currency.symbol+d+n:n.indexOf(")")>-1?((n=n.split("")).splice(-1,0,d+a[l].currency.symbol),n=n.join("")):n=n+d+a[l].currency.symbol;return n}(e,t,i):t.indexOf("%")>-1?function(e,t,i){var s,a="",l=100*e._value;t.indexOf(" %")>-1?(a=" ",t=t.replace(" %","")):t=t.replace("%","");(s=g(l,t,i)).indexOf(")")>-1?((s=s.split("")).splice(-1,0,a+"%"),s=s.join("")):s=s+a+"%";return s}(e,t,i):t.indexOf(":")>-1?function(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*t*60)/60),s=Math.round(e._value-60*t*60-60*i);return t+":"+(i<10?"0"+i:i)+":"+(s<10?"0"+s:s)}(e):g(e._value,t,i)}function c(e,t){var i,s,r,o,h,d=t,u=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(t.indexOf(":")>-1)e._value=function(e){var t=e.split(":"),i=0;3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1]));return Number(i)}(t);else if(t===n)e._value=0;else{for("."!==a[l].delimiters.decimal&&(t=t.replace(/\./g,"").replace(a[l].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+a[l].abbreviations.thousand+"(?:\\)|(\\"+a[l].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+a[l].abbreviations.million+"(?:\\)|(\\"+a[l].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+a[l].abbreviations.billion+"(?:\\)|(\\"+a[l].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+a[l].abbreviations.trillion+"(?:\\)|(\\"+a[l].currency.symbol+")?(?:\\))?)?$"),h=0;h<=u.length&&!(c=t.indexOf(u[h])>-1&&Math.pow(1024,h+1));h++);e._value=(c||1)*(d.match(i)?Math.pow(10,3):1)*(d.match(s)?Math.pow(10,6):1)*(d.match(r)?Math.pow(10,9):1)*(d.match(o)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=c?Math.ceil(e._value):e._value}return e._value}function g(e,t,i){var s,r,o,h,u,c,g=!1,p=!1,m=!1,f="",v=!1,b=!1,L=!1,C=!1,_=!1,E="",D="",y=Math.abs(e),w=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],T="",F=!1;if(0===e&&null!==n)return n;if(t.indexOf("(")>-1?(g=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(p=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(v=t.indexOf("aK")>=0,b=t.indexOf("aM")>=0,L=t.indexOf("aB")>=0,C=t.indexOf("aT")>=0,_=v||b||L||C,t.indexOf(" a")>-1?(f=" ",t=t.replace(" a","")):t=t.replace("a",""),y>=Math.pow(10,12)&&!_||C?(f+=a[l].abbreviations.trillion,e/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!_||L?(f+=a[l].abbreviations.billion,e/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!_||b?(f+=a[l].abbreviations.million,e/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!_||v)&&(f+=a[l].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(E=" ",t=t.replace(" b","")):t=t.replace("b",""),o=0;o<=w.length;o++)if(s=Math.pow(1024,o),r=Math.pow(1024,o+1),e>=s&&e<r){E+=w[o],s>0&&(e/=s);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(D=" ",t=t.replace(" o","")):t=t.replace("o",""),D+=a[l].ordinal(e)),t.indexOf("[.]")>-1&&(m=!0,t=t.replace("[.]",".")),h=e.toString().split(".")[0],u=t.split(".")[1],c=t.indexOf(","),u?(h=(T=u.indexOf("[")>-1?d(e,(u=(u=u.replace("]","")).split("["))[0].length+u[1].length,i,u[1].length):d(e,u.length,i)).split(".")[0],T=T.split(".")[1].length?a[l].delimiters.decimal+T.split(".")[1]:"",m&&0===Number(T.slice(1))&&(T="")):h=d(e,null,i),h.indexOf("-")>-1&&(h=h.slice(1),F=!0),c>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+a[l].delimiters.thousands)),0===t.indexOf(".")&&(h=""),(g&&F?"(":"")+(!g&&F?"-":"")+(!F&&p?"+":"")+h+T+(D||"")+(f||"")+(E||"")+(g&&F?")":"")}function p(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function m(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,t){var i=p(e),s=p(t);return i>s?i:s}),-1/0)}(i=function(e){return i.isNumeral(e)?e=e.value():0===e||void 0===e?e=0:Number(e)||(e=i.fn.unformat(e)),new h(Number(e))}).version="1.5.3",i.isNumeral=function(e){return e instanceof h},i.language=function(e,t){if(!e)return l;if(e&&!t){if(!a[e])throw new Error("Unknown language : "+e);l=e}return!t&&a[e]||function(e,t){a[e]=t}(e,t),i},i.languageData=function(e){if(!e)return a[l];if(!a[e])throw new Error("Unknown language : "+e);return a[e]},i.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),i.zeroFormat=function(e){n="string"==typeof e?e:null},i.defaultFormat=function(e){r="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,s,a=this.length>>>0,l=!1;for(1<arguments.length&&(s=t,l=!0),i=0;a>i;++i)this.hasOwnProperty(i)&&(l?s=e(s,this[i],i,this):(s=this[i],l=!0));if(!l)throw new TypeError("Reduce of empty array with no initial value");return s}),i.fn=h.prototype={clone:function(){return i(this)},format:function(e,t){return u(this,e||r,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:c(this,e||r)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){var t=m.call(null,this._value,e);return this._value=[this._value,e].reduce((function(e,i,s,a){return e+t*i}),0)/t,this},subtract:function(e){var t=m.call(null,this._value,e);return this._value=[e].reduce((function(e,i,s,a){return e-t*i}),this._value*t)/t,this},multiply:function(e){return this._value=[this._value,e].reduce((function(e,t,i,s){var a=m(e,t);return e*a*(t*a)/(a*a)}),1),this},divide:function(e){return this._value=[this._value,e].reduce((function(e,t,i,s){var a=m(e,t);return e*a/(t*a)})),this},difference:function(e){return Math.abs(i(this._value).subtract(e).value())}},o&&(e.exports=i),"undefined"==typeof ender&&(this.numeral=i),void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}).call(this)}).call(window)},"shim/numeral":function(e,t,i){var s,a;s=[i(1810)],void 0===(a=function(e){return e}.apply(t,s))||(e.exports=a)},"util/numeral":function(e,t,i){var s,a;s=[i("stubs/i18n"),i("shim/numeral")],void 0===(a=function(e,t){var i=e.numeral_install;return"function"==typeof i&&(i(t),t.language({de_DE:"de",en_DEBUG:"en-debug",en_GB:"en-gb",en_US:"en-us",it_IT:"it",ko_KR:"ko",zh_CN:"chs",zh_TW:"chs-traditional",fr_FR:"fr"}[e.locale_name()])),t}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/Delta":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],void 0===(a=function(e,t,i,s,a,l,n){return s.extend({moduleId:i.i,className:"single-value-delta",el:function(){return a.createElement("g").attr("class","single-value-delta")},SVG_POINTS:{decrease:{polylinePoints:"20.5,3 20.5,20.5 3,20.5",linePoints:[20.2,20.9,3.4,4]},increase:{polylinePoints:"20.5,21 20.5,3.5 3,3.5",linePoints:[20.2,3.3,3.4,20.2]},noChange:{polylinePoints:"14.8,20.2 23.8,11.2 14.8,2.2",linePoints:[0,11.2,23,11.2]}},INDICATOR_WIDTH:22,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.updateContainerDimensions(),this.activate()},drawComponents:function(){var e=this.model.state.get("display.visualizations.singlevalue.trendDisplayMode");this.deltaValue=this.model.results.get("deltaValue"),this.formattedDeltaValue=this.model.results.get("formattedDeltaValue"),this.deltaValue&&0!==this.deltaValue?"percentageDecrease"===this.deltaValue||this.deltaValue<0?(this.indicatorMode="decrease",this.indicatorClass="delta-down-indicator"):("percentageIncrease"===this.deltaValue||this.deltaValue>0)&&(this.indicatorMode="increase",this.indicatorClass="delta-up-indicator"):(this.indicatorMode="noChange",this.indicatorClass="delta-no-change-indicator"),this.indicatorColor=this.model.presentation.get("deltaColor"),isNaN(this.deltaValue)||this.deltaValue===1/0||this.deltaValue===-1/0?this.formattedDeltaValue="N/A":e&&"percent"===e.toLowerCase()&&(this.formattedDeltaValue+="%"),this.drawLabel(),this.drawIndicator()},drawIndicator:function(){var e=a.createElement("g").attr({class:"delta-indicator "+this.indicatorClass}),t=this.SVG_POINTS[this.indicatorMode],i=a.createElement("polyline").attr({points:t.polylinePoints,fill:"none",stroke:this.indicatorColor,"stroke-width":"5px"}),s=a.createElement("line").attr({x1:t.linePoints[0],y1:t.linePoints[1],x2:t.linePoints[2],y2:t.linePoints[3],fill:this.indicatorColor,stroke:this.indicatorColor,"stroke-width":"5px"});e.append(i),e.append(s),this.$el.append(e)},drawLabel:function(){var e=a.createElement("text").attr({class:"delta-label"}).text(this.formattedDeltaValue).css({"font-size":this.model.presentation.get("deltaFontSize"),fill:this.indicatorColor,fontWeight:"bold"});this.$el.append(e)},updateContainerDimensions:function(){this.scaleRatio=this.model.presentation.get("scaleRatio")},positionAndScaleElements:function(){var e,t,i,s,a=this.$el.find(".delta-label"),r=this.$el.find(".delta-indicator"),o=this.model.presentation.get("deltaScale"),h=this.INDICATOR_WIDTH*o,d=this.model.presentation.get("deltaLeft")||0,u=this.model.presentation.get("maxDeltaWidth");this.defaultDeltaWidth||(this.defaultDeltaWidth=this.getDeltaWidth()),this.defaultLabelWidth||(this.defaultLabelWidth=a[0].getBBox().width),i=(d+10)/this.scaleRatio,e=this.defaultLabelWidth,t=n.roundToDecimal(e/2-h/2,-2),l.valuesAreNumericAndFinite([this.scaleRatio,t,-45,i])&&(r.attr({transform:"scale("+o+")translate("+t+","+"-45)"}),this.$el.attr({transform:"scale("+this.scaleRatio+")translate("+i+")"})),this.getDeltaWidth()>u&&(i=(d+10)/(s=n.roundToDecimal(u/this.defaultDeltaWidth,-2)),l.valuesAreNumericAndFinite([s,i])&&this.$el.attr({transform:"scale("+s+")translate("+i+")"}))},getDeltaWidth:function(){return this.el.getBoundingClientRect().width},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleElements()},render:function(){return this.drawComponents(),this}})}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/Label":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("uri/route"),i("util/numeral")],void 0===(a=function(e,t,i,s,a,l,n,r,o,h){var d=function(e,i){if(t.isFunction(e))try{e=e(i)}catch(e){return""}return e};return s.extend({moduleId:i.i,className:"single-value-label",el:function(){return n.createElement("g").attr({class:"single-value-label","data-name":this.options.configName})},initialize:function(e){if(s.prototype.initialize.apply(this,arguments),this.activate(),this.LABEL_FONT_SIZE=this.options.labelFontSize,this.labelFontColor=this.options.labelFontColor,this.labelGroupClass=this.options.labelGroupClass,this.labelClass=this.options.labelClass,this.linkField=this.options.linkField,this.resultFieldValue=this.model.results.get("resultFieldValue"),this.configName=this.options.configName,this.unit=this.options.unit,this.unitPosition=this.options.unitPosition,this.hasUnit=this.options.hasUnit,this.isNumericLabelValue=!1,this.options.useResultField)if(isNaN(this.resultFieldValue))this.labelValue=this.resultFieldValue;else{var t=this.model.presentation.get("formatPattern");this.labelValue=h(this.resultFieldValue).format(t),this.isNumericLabelValue=!0}else this.labelValue=d(this.model.state.get(this.configName)||"",this.resultFieldValue);this.fontWeight=this.options.fontWeight,this.labelOpacity=this.options.labelOpacity,this.exportMode=this.options.exportMode},events:{"click a.single-drilldown":function(i){i.preventDefault();var s=e(i.currentTarget),a=this.model.results.get("searchResultsColumn"),n=a.get("fields");t.isObject(n[0])&&(n=t(n).pluck("name"));var r=t.object(t(n).map((function(e){return"row."+e})),t(a.get("columns")).map((function(e){return t(e).last()}))),o={name:s.data("field"),value:s.data("value"),rowContext:r,originalEvent:i,type:"cell"};if(this.model.results.has("sparklineData")){var h=t(n).indexOf("_time"),d=t(n).indexOf("_span"),u=a.get("columns"),c=l.getEpochTimeFromISO(t(u[h]).last()),g=parseFloat(t(u[d]).last());o.name2=o.name,o.value2=o.value,o.name="_time",o.value=c,o._span=g,o.rowContext["row._time"]=c,o.rowContext["row._span"]=g}var p=t(s.children("text").attr("class").split(" ")).map((function(e){return"click:"+e})).join(" ");this.trigger("singleDrilldownClicked",{specificEventNames:"click drilldown "+p,drilldownInfo:o})},"click a.link-drilldown":function(e){e.preventDefault(),this.trigger("anchorTagClicked",e)}},constructLabelData:function(){this.model.presentation.get("severityColor");return{name:this.labelClass,linkField:this.linkField,value:this.labelValue,fontSize:this.LABEL_FONT_SIZE+"px",fontWeight:this.fontWeight,fontColor:this.labelFontColor,opacity:this.labelOpacity||1}},drawLabel:function(e,t){var i,s,a;i=n.createElement("g").attr("class","svg-label"),s=n.createElement("text").attr({x:t.x,y:t.y,class:t.name}).css({"letter-spacing":this.isNumericLabelValue?"-0.02em":"normal","font-size":t.fontSize,"font-weight":t.fontWeight,fill:t.fontColor,opacity:t.opacity});var l=""+t.value;if(this.hasUnit&&"before"===this.unitPosition)if(/^\-\d/.test(l)&&(s.append(document.createTextNode("-")),l=l.substring(1)),this.exportMode)l=""+this.unit+l;else{var r=n.createElement("tspan").attr({class:t.name+"-unit"}).css({"letter-spacing":"normal"}).text(""+this.unit);s.append(r)}if(s.append(document.createTextNode(l)),this.hasUnit&&"after"===this.unitPosition)if(this.exportMode)s.append(document.createTextNode("â€‰"+this.unit));else{var o=n.createElement("tspan").attr({class:t.name+"-unit"}).css({"letter-spacing":"normal"}).text("â€‰"+this.unit);s.append(o)}t.link?((a=n.createElement("a").attr({href:t.link.attr("href"),class:t.link.attr("class")}).css({"text-decoration":"none"})).data("value",t.value),a.data("field",t.linkField),a.append(s),i.append(a),s.hover((function(e){s.css({"text-decoration":"mouseenter"===e.type?"underline":"none"})}))):i.append(s),e.append(i),this.labelElement=this.getLabelElement()},getWidth:function(){return this.getBBox(this.labelElement).width},getLeftX:function(e){return parseInt(e.attr("x"),10)},getBBox:function(e){var t;try{t=e[0].getBBox()}catch(e){t={x:0,y:0,width:0,height:0}}return t},getRightX:function(e){return this.getLeftX(e)+this.getWidth(e)},getClientRect:function(e){return e[0].getBoundingClientRect()},getLabelElement:function(){var e=this.$("."+this.labelClass);if(e.length>0)return e},wrapLinks:function(i,s){if(this.model.application){var a=this.model.state.get("display.visualizations.singlevalue.linkFields");a=a?e.trim(a).split(/\s*,\s*/):[];var n,r=this.model.state.get("display.visualizations.singlevalue.linkView"),h=this.model.state.get("display.visualizations.singlevalue.linkSearch"),d=this.model.state.get("display.visualizations.singlevalue.drilldown")||"none",u=this.model.application.toJSON();if("search"!==r&&a.length||h){var c;if(r){var g=h?{q:h}:void 0;c="/"===r.charAt(0)?l.make_full_url(r,g):o.page(u.root,u.locale,u.app,r,{data:g})}else c=o.search(u.root,u.locale,u.app,{data:{q:h}});n=e('<a class="link-drilldown" />').attr("href",c)}else"none"!==d&&(n=e('<a class="single-drilldown" href="#"></a>'),t(a).contains("result")||a.push("result"));return n?(n.data({field:i,value:s}),{linkFields:a,link:n}):void 0}},render:function(){var e,i=this.constructLabelData(),s=this.model.results.get("resultFieldValue"),a=this.wrapLinks(this.model.results.get("resultField"),s);return a&&t.each(a.linkFields,(function(e){this.linkField===e&&(i.link=a.link)}),this),(e=this.$el.find("."+this.labelGroupClass)).length>0&&e.remove(),e=n.createElement("g").attr("class",this.labelGroupClass),this.$el.append(e),this.drawLabel(e,i),this}})}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/Labels":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Label"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/math_utils")],void 0===(a=function(e,t,i,s,a,l,n,r,o){return s.extend({moduleId:i.i,className:"single-value-labels",el:function(){return r.createElement("g").attr("class","single-value-labels")},LABEL_SIDE_PADDING:5,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.activate(),this.unit=e.unit,this.unitPosition=e.unitPosition,this.hasUnit=e.hasUnit,this.hasAfterLabel=e.hasAfterLabel,this.hasBeforeLabel=e.hasBeforeLabel,this.originalSingleValueFontSize=this.model.presentation.get("singleValueFontSize"),this.originalSideLabelFontSize=this.model.presentation.get("sideLabelFontSize"),this.updateContainerDimensions()},reflow:function(){this.updateContainerDimensions(),this.scaleLabels()},updateContainerDimensions:function(){this.scaleRatio=this.model.presentation.get("scaleRatio"),this.singleValueFontSize=this.originalSingleValueFontSize*this.scaleRatio,this.labelFontSize=this.originalSideLabelFontSize*this.scaleRatio},constructMainLabelData:function(){var e,t=this.model.presentation.get("fontColor");return e={singleResultData:{labelFontSize:this.originalSingleValueFontSize,labelFontColor:t,labelGroupClass:"single-result-group",labelClass:"single-result",linkField:"result",configName:"display.visualizations.singlevalue.singleResult",useResultField:!0,fontWeight:"bold",unit:this.unit,unitPosition:this.unitPosition,hasUnit:this.hasUnit,exportMode:!!this.model.state.get("exportMode")}},this.hasBeforeLabel&&(e.beforeLabelData={labelFontSize:this.originalSideLabelFontSize,labelFontColor:t,labelGroupClass:"before-label-group",labelClass:"before-label",linkField:"beforelabel",configName:"display.visualizations.singlevalue.beforeLabel",useResultField:!1,fontWeight:"normal"}),this.hasAfterLabel&&(e.afterLabelData={labelFontSize:this.originalSideLabelFontSize,labelFontColor:t,labelGroupClass:"after-label-group",labelClass:"after-label",linkField:"afterlabel",configName:"display.visualizations.singlevalue.afterLabel",useResultField:!1,fontWeight:"normal"}),e},getMainLabelsWidth:function(){var e=0;return this.hasBeforeLabel&&(e+=this.children.beforeLabelView.getWidth(),e+=this.LABEL_SIDE_PADDING),this.hasAfterLabel&&(e+=this.children.afterLabelView.getWidth(),e+=this.LABEL_SIDE_PADDING),e+=this.children.singleResultView.getWidth()},positionLabels:function(){var e,t,i,s=0,a=this.children.singleResultView.getLabelElement(),l=s,n=s,r=0,h=this.children.singleResultView.getWidth(),d=this.getMainLabelsWidth(),u=this.model.presentation.get("deltaWidth")||0,c=this.model.presentation.get("svgWidth");u>0&&(u+=this.model.presentation.get("deltaPadding")),s=o.roundToDecimal(c/2-(d+u)/2,-2),this.hasBeforeLabel?(i=this.children.beforeLabelView.getWidth(),e=this.children.beforeLabelView.getLabelElement(),n=i+(l=s)+this.LABEL_SIDE_PADDING,e.attr("x",l)):n=s,a.attr("x",n),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),r=n+h+this.LABEL_SIDE_PADDING,t.attr("x",r))},scaleLabels:function(){var e,t=this.children.singleResultView.getLabelElement(),i=this.model.presentation.get("maxLabelsWidth");this.defaultMainLabelsWidth||(this.defaultMainLabelsWidth=this.getMainLabelsWidth()),t.css("font-size",this.singleValueFontSize),(this.model.state.get("exportMode")||0!==this.children.singleResultView.getWidth())&&(this.hasBeforeLabel&&this.children.beforeLabelView.getLabelElement().css("font-size",this.labelFontSize),this.hasAfterLabel&&this.children.afterLabelView.getLabelElement().css("font-size",this.labelFontSize),this.getMainLabelsWidth()>i&&"simple"!==this.model.presentation.get("displayMode")&&(e=o.roundToDecimal(i/this.defaultMainLabelsWidth,-4),this.singleValueFontSize=o.roundToDecimal(this.originalSingleValueFontSize*e,-4),this.labelFontSize=o.roundToDecimal(this.originalSideLabelFontSize*e,-4),t.css("font-size",this.singleValueFontSize),this.hasBeforeLabel&&this.children.beforeLabelView.getLabelElement().css("font-size",this.labelFontSize),this.hasAfterLabel&&this.children.afterLabelView.getLabelElement().css("font-size",this.labelFontSize)))},createLabel:function(e,i,s,l,n){this.children[l]&&(this.children[l].detach(),this.children[l].remove()),this.children[l]=new a(t.extend(s,i[n])),this.children[l].render().appendTo(e),this.listenTo(this.children[l],"singleDrilldownClicked",(function(e){this.trigger("singleDrilldownClicked",e)})),this.listenTo(this.children[l],"anchorTagClicked",(function(e){this.trigger("anchorTagClicked",e)}))},render:function(){var e=this.$el.find(".main-label-group"),t=this.constructMainLabelData(),i={model:{state:this.model.state,results:this.model.results,presentation:this.model.presentation,application:this.model.application}};return e.length>0&&e.remove(),e=r.createElement("g").attr("class","main-label-group"),this.$el.append(e),this.hasBeforeLabel&&this.createLabel(e,t,i,"beforeLabelView","beforeLabelData"),this.createLabel(e,t,i,"singleResultView","singleResultData"),this.hasAfterLabel&&this.createLabel(e,t,i,"afterLabelView","afterLabelData"),this}})}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/MainBody":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Labels"),i("views/shared/singlevalue/Delta"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],void 0===(a=function(e,t,i,s,a,l,n,r,o,h,d){return s.extend({moduleId:i.i,className:"single-value-main-body",el:function(){return o.createElement("g").attr("class","single-value-main-body")},DELTA_PADDING:10,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.model.presentation.set("deltaPadding",this.DELTA_PADDING)},reflow:function(){var e,t,i,s,a,l,n=this.model.presentation.get("edgePadding"),r=this.model.presentation.get("svgWidth")-2*n,o=this.model.presentation.get("scaleRatio"),u=this.model.presentation.get("mainBodyPadding")*o;if(this.displayDelta()?(r-=this.DELTA_PADDING,this.maxLabelProportion||(i=this.children.labels.getMainLabelsWidth(),t=this.children.delta.el.getBBox().width,this.maxLabelProportion=d.roundToDecimal(i/(i+t),-2)),s=r-(a=d.roundToDecimal(r*this.maxLabelProportion,-2)),this.model.presentation.set("maxLabelsWidth",a),this.model.presentation.set("maxDeltaWidth",s)):(this.model.presentation.set("maxLabelsWidth",r),this.model.presentation.set("maxDeltaWidth",0)),this.children.labels.validateReflow(!0),this.displayDelta()?(this.children.delta.validateReflow(!0),t=this.children.delta.el.getBoundingClientRect().width,this.model.presentation.set("deltaWidth",t)):this.model.presentation.set("deltaWidth",0),this.children.labels.positionLabels(),this.displayDelta()&&(l=this.hasAfterLabel?this.children.labels.children.afterLabelView:this.children.labels.children.singleResultView,e=parseFloat(l.$("text").attr("x"))+l.getWidth(),this.model.presentation.set("deltaLeft",e),this.children.delta.positionAndScaleElements()),h.valuesAreNumericAndFinite([u])){var c=this.transformToFit(u,this.$el[0].getBBox().width);this.$el.attr("transform",c)}},transformToFit:function(e,t){return this.model.presentation.get("svgWidth")<t?"translate("+e+","+e+") scale(0.4)":"translate(0,"+e+")"},drawLabels:function(){this.children.labels&&this.children.labels.remove();var e=this.model.state.get("display.visualizations.singlevalue.unit");void 0===e||""===e?(this.hasUnit=!1,this.hasAfterLabel=!!this.model.state.get("display.visualizations.singlevalue.afterLabel"),this.hasBeforeLabel=!!this.model.state.get("display.visualizations.singlevalue.beforeLabel")):(this.hasUnit=!0,"before"===this.model.state.get("display.visualizations.singlevalue.unitPosition")?(this.unitPosition="before",this.hasBeforeLabel=!1,this.hasAfterLabel=!1):(this.unitPosition="after",this.hasBeforeLabel=!1,this.hasAfterLabel=!1));this.children.labels=new a({model:{application:this.model.application,state:this.model.state,results:this.model.results,presentation:this.model.presentation},unit:e,unitPosition:this.unitPosition,hasUnit:this.hasUnit,hasBeforeLabel:this.hasBeforeLabel,hasAfterLabel:this.hasAfterLabel}),this.listenTo(this.children.labels,"singleDrilldownClicked",(function(e){this.trigger("singleDrilldownClicked",e)})),this.listenTo(this.children.labels,"anchorTagClicked",(function(e){this.trigger("anchorTagClicked",e)})),this.children.labels.render().appendTo(this.$el)},drawDelta:function(){this.children.delta&&(this.children.delta.detach(),this.children.delta.remove()),this.displayDelta()&&(this.children.delta=new l({model:{state:this.model.state,presentation:this.model.presentation,results:this.model.results}}),this.children.delta.render().appendTo(this.$el))},displayDelta:function(){var e=r.normalizeBoolean(this.model.state.get("display.visualizations.singlevalue.showTrendIndicator")),t=this.model.results.get("deltaValue");return!1!==e&&(t||0===t)},drawComponents:function(){this.drawLabels(),this.drawDelta()},render:function(){return this.drawComponents(),this}})}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/Master":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/shared/viz/Base"),i("views/shared/singlevalue/Sparkline"),i("views/shared/singlevalue/MainBody"),i("views/shared/singlevalue/UnderLabel"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("uri/route"),i("util/drilldown"),i("util/time"),i("util/color_utils"),i("util/general_utils"),i("util/moment/relative"),i("util/theme_utils"),i("util/numeral"),i("splunk/palettes/ColorCodes")],void 0===(a=function(e,t,i,s,a,l,n,r,o,h,d,u,c,g,p,m,f,v,b){var L={enterprise:{SEVERITY_COLORS:{severe:b.SEMANTIC_BY_NAME.error,high:b.SEMANTIC_BY_NAME.alert,elevated:b.SEMANTIC_BY_NAME.warning,guarded:b.SEMANTIC_BY_NAME.info,low:b.SEMANTIC_BY_NAME.success,none:b.DARK_GREY},SEVERITIES:["none","low","guarded","elevated","high","severe"],BLOCK_DEFAULT_FONT_COLOR:"#FFFFFF",BLOCK_DEFAULT_BACKGROUND_COLOR:"#333333",DEFAULT_FONT_COLOR:"#333333",DEFAULT_BACKGROUND_COLOR:"#FFFFFF",UNDERLABEL_COLOR:b.DARK_GREY,NEUTRAL_CHANGE_COLOR:b.DARK_GREY,NEUTRAL_CHANGE_BACKGROUND_COLOR:b.DARK_GREY,DELTA_GREEN:b.SEMANTIC_BY_NAME.success,DELTA_RED:b.SEMANTIC_BY_NAME.error,EDGE_PADDING:32,NEUTRAL_SPARKLINE_COLOR:"#999999"},dark:{SEVERITY_COLORS:{severe:b.SEMANTIC_BY_NAME.error,high:b.SEMANTIC_BY_NAME.alert,elevated:b.SEMANTIC_BY_NAME.warning,guarded:b.SEMANTIC_BY_NAME.info,low:b.SEMANTIC_BY_NAME.success,none:"#FFFFFF"},SEVERITIES:["none","low","guarded","elevated","high","severe"],BLOCK_DEFAULT_FONT_COLOR:"#FFFFFF",BLOCK_DEFAULT_BACKGROUND_COLOR:"#212527",DEFAULT_FONT_COLOR:"#FFFFFF",DEFAULT_BACKGROUND_COLOR:"#212527",UNDERLABEL_COLOR:"#C3CBD4",NEUTRAL_CHANGE_COLOR:"#FFFFFF",NEUTRAL_CHANGE_BACKGROUND_COLOR:"#212527",DELTA_GREEN:b.SEMANTIC_BY_NAME.success,DELTA_RED:b.SEMANTIC_BY_NAME.error,EDGE_PADDING:32,NEUTRAL_SPARKLINE_COLOR:"#FFFFFF"}};return s.extend(t.extend({moduleId:i.i,className:"single-value",MAX_RESULT_COUNT:1e3,initialize:function(t){s.prototype.initialize.apply(this,arguments),this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||100),this.$el.css("position","relative"),this.getPrimaryDataSource()?(this.model.searchData=this.getPrimaryDataSource().searchResults,this.model.searchDataParams=this.getPrimaryDataSource().fetchParams):this.listenTo(this.model.searchData,"change",this.onDataChange),this.model.results=new r({searchResultsColumn:this.model.searchData,resultField:"",resultFieldValue:""}),this.model.presentation=new r,this.updateContainerDimensions(),this.originalHeight=this.$el.height()||100,this.model.presentation.set({fontColor:this.getFontColor(),scaleRatio:1,edgePadding:this.EDGE_PADDING}),this.$inlineMessage=e('<div class="inline-message"></div>').css({"text-align":"center",height:"32px",width:"100%",position:"absolute",bottom:"0"}).addClass(this.options.messageContainerClass||"")},getRequiredDataSources:function(){return[]},onConfigChange:function(e){t(e).chain().keys().any((function(e){return 0===e.indexOf("display.visualizations.singlevalue.")})).value()&&this.invalidate("formatDataPass")},updateResultState:function(){var e,t,i,s=this.determineResultFieldName(this.model.config.get("display.visualizations.singlevalue.field")),a=this.getFieldValue(s);this.model.results.set("resultField",s),this.model.results.set("resultFieldValue",a),this.isTimeSeries()&&!isNaN(a)?(e=this.getFieldValues(s),this.model.results.set("sparkline",e),this.setDeltaValue(a),this.model.config.set("is_timeseries",!0,{transient:!0})):(this.model.results.unset("sparkline"),this.model.results.unset("deltaValue"),this.model.results.unset("deltaBacktrack"),this.model.config.set("is_timeseries",!1,{transient:!0})),this.severityColor=this.getSeverityColor(a),this.severityBackgroundColor=this.getSeverityColor(a,{isBackground:!0}),this.deltaColor=this.getDeltaColor(),this.deltaBackgroundColor=this.getDeltaColor({isBackground:!0}),i=this.getDeltaIndicatorColor(),t=this.useColors()&&"trend"===this.model.config.get("display.visualizations.singlevalue.colorBy")||this.hasBackground()?i:this.NEUTRAL_SPARKLINE_COLOR,this.model.presentation.set("deltaColor",i),this.model.presentation.set("sparklineColor",t),this.model.presentation.set("fontColor",this.getFontColor()),this.model.presentation.set("formatPattern",this.getFormatPattern())},getDeltaColor:function(e){var t=this.model.config.get("display.visualizations.singlevalue.trendColorInterpretation")||"standard",i=this.model.results.get("deltaValue"),s="percentageIncrease"===i||i>0;return 0===i?e&&e.isBackground?this.NEUTRAL_CHANGE_BACKGROUND_COLOR:this.NEUTRAL_CHANGE_COLOR:"inverse"===t?s?this.DELTA_RED:this.DELTA_GREEN:s?this.DELTA_GREEN:this.DELTA_RED},getSeverityColor:function(e,t){var i,s,a,l,n=this.model.config.get("display.visualizations.singlevalue.rangeValues"),r=this.model.config.get("display.visualizations.singlevalue.rangeColors"),h=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useColors"))||!1,d=t&&t.isBackground?this.BLOCK_DEFAULT_BACKGROUND_COLOR:this.DEFAULT_FONT_COLOR,u=this.getResultField("range");if(u&&!h)return this.SEVERITY_COLORS[u]||d;if(n){if(i=p.stringToArray(n),a=(s=p.stringToArray(r)).length>0,0===i.length||isNaN(e))return d;l=this.SEVERITIES.slice(1,6);for(var c=0;c<i.length;c++){if(isNaN(i[c]))return d;if(parseFloat(e)<=parseFloat(i[c]))return a?g.replaceSymbols(s[c],"#")||d:this.SEVERITY_COLORS[l[c]]}return a?g.replaceSymbols(s[i.length],"#")||d:this.SEVERITY_COLORS[l[l.length-1]]}return d},getDeltaIndicatorColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:"value"!==e&&this.useColors()?this.deltaColor:this.DEFAULT_FONT_COLOR},getFontColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:"trend"===e&&this.isTimeSeries()||!this.useColors()?this.DEFAULT_FONT_COLOR:this.severityColor},useColors:function(){var e=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useColors"))||!1;return!(!this.getFieldValues("range")||e)||e},hasBackground:function(){return"block"===this.model.config.get("display.visualizations.singlevalue.colorMode")&&this.useColors()&&this.getBackgroundColor()},getBackgroundColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.useColors()?"trend"===e?this.deltaBackgroundColor:this.severityBackgroundColor:this.BLOCK_DEFAULT_BACKGROUND_COLOR},getFormatPattern:function(){var e,t,i="0",s=this.model.config.get("display.visualizations.singlevalue.numberPrecision");return!1!==o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useThousandSeparators"))&&(i+=",0"),s&&(e=s.match(/^0\.?(0*)$/))&&2===e.length&&((t=e[1]).length>4&&(t="0000"),t.length>0&&(i=i+"."+t)),i},setDeltaValue:function(e){var i,s,a,l,n,r,o,h,d,u,g,p,f,b=this.model.config.get("display.visualizations.singlevalue.trendInterval"),L=this.model.config.get("display.visualizations.singlevalue.trendDisplayMode"),C=this.getFieldValues("_time"),_=this.model.results.get("resultField"),E=this.getFormatPattern(),D=function(e){return c.bdTimeToDateObject(c.extractBdTime(C[C.length-e]))};if(b&&"auto"!==b){try{i=m.parseRelativeTimeExpression(b)}catch(e){return}if(i&&i[0]&&(s=i[0]),C.length>=2&&s&&s.unit&&!isNaN(s.amount)){if(f=c.normalizeUnit(s.unit),p=Math.abs(s.amount),h=D(1),u=D(1),d=D(2),g=(h.getTime()-d.getTime())/1e3,-1!==t.indexOf(["s","m","h"],f))r=c.convertAmountAndUnitToSeconds(p,f);else{switch(f){case"y":u.setFullYear(u.getFullYear()-p);break;case"q":u.setMonth(u.getMonth()-3*p);break;case"mon":u.setMonth(u.getMonth()-p);break;case"w":u.setDate(u.getDate()-7*p);break;case"d":u.setDate(u.getDate()-p);break;default:return u=void 0}u&&(r=(h.getTime()-u)/1e3)}r&&(o=Math.round(r/g))<C.length&&(a=this.calculateDeltaValue(_,o,L,e),l=o)}}a||0===a||(a=this.calculateDeltaValue(_,1,L,e),l=1),E&&!isNaN(a)&&(n=v(a).format(E),this.model.results.set("formattedDeltaValue",n)),this.model.results.set("deltaValue",a),this.model.results.set("deltaBacktrack",l)},calculateDeltaValue:function(e,t,i,s){var a=this.getFieldValue(e,t);return i&&"percent"===i.toLowerCase()?"0"===a?"0"===s?0:s>a?"percentageIncrease":"percentageDecrease":(s-a)/a*100:s-a},onAddedToDocument:function(){s.prototype.onAddedToDocument.apply(this,arguments),this.validateReflow(!0)},reflow:function(){this.updateContainerDimensions(),this.updateBackgroundDimensions(),this.invokeOnChildren("validateReflow",!0)},updateContainerDimensions:function(){var e,t=this.getSvgContainer();this.model.config.get("exportMode")?(this.svgWidth=this.options.width,this.svgHeight=this.options.height):(this.svgHeight=this.$el.height(),this.svgWidth=this.$el.width()),1==this.$el.find(this.$inlineMessage).length&&(this.svgHeight=this.svgHeight-this.$inlineMessage.height()),p.valuesAreNumericAndFinite([this.svgHeight,this.svgWidth])&&(t.height(this.svgHeight).width(this.svgWidth),e=this.svgHeight/this.originalHeight,p.valuesAreNumericAndFinite([e])&&0!==e||(e=1),this.model.presentation.set({svgWidth:this.svgWidth,svgHeight:this.svgHeight,scaleRatio:e}))},getResultField:function(e){var i=this.getFieldValue(this.determineResultFieldName(e));return i||t("N/A").t()},getFieldNames:function(){var i=this.model.searchData.get("fields");return i&&0!==i.length?t.isObject(i[0])?t(i).pluck("name"):e.extend([],i):[]},getFieldValue:function(e,t){var i=this.getFieldValues(e);return t||(t=0),i&&i.length?this.isTimeSeries()?i[i.length-t-1]:i[t]:""},getFieldValues:function(e){var i=this.getFieldNames();return(this.model.searchData.get("columns")||[])[t(i).indexOf(e)]},determineResultFieldName:function(e){var i=this.getFieldNames();return e&&t(i).contains(e)?e:t(i).find((function(e){return"_raw"===e||"_"!==e[0]}))},isTimeSeries:function(){var e=this.getFieldNames();return t(e).some((function(e){return"_time"===e}))},getSvgContainer:function(){return this.$(".svg-container")},getBackgroundMode:function(){return this.model.config.get("display.visualizations.singlevalue.colorMode")||"none"},updateBackgroundDimensions:function(){var e;this.hasBackground()&&(e=this.getSvgContainer().find(".block-background")).length>0&&(e.attr("width",this.svgWidth),e.attr("height",this.svgHeight))},drawSeverityBackground:function(e){this.hasBackground()&&e.append(h.createElement("rect").attr({x:0,y:0,width:this.svgWidth,height:this.svgHeight,class:"block-background",fill:this.getBackgroundColor()}))},drawSvgContainer:function(){var e=this.getSvgContainer();return e.length>0&&e.remove(),(e=h.createElement("svg").width(this.svgWidth).height(this.svgHeight).attr("class","svg-container").css("position","absolute").css("top","0").css("left","0")).appendTo(this.el),e},drawSparkline:function(e){this.children.sparkline&&(this.children.sparkline.detach(),this.children.sparkline.remove()),this.hasSparkline?(this.model.results.set({sparklineData:this.model.results.get("sparkline").slice(0)}),this.model.presentation.set({sparklineOpacity:1}),this.children.sparkline=new a({model:{presentation:this.model.presentation,results:this.model.results,state:this.model.config}}),this.children.sparkline.render().appendTo(e)):this.model.results.unset("sparklineData")},setDisplayMode:function(e){this.model.presentation.set("displayMode",e)},drawMainBody:function(e){var t,i,s,a,n,r=this.model.config.get("display.visualizations.singlevalue.underLabel"),o=this.model.presentation.get("displayMode");this.hasSparkline&&r?(a=50,n=28,t=50,i=20,s=.85):(a=66,n=37,i=26,s=1.1,t=this.hasSparkline||r?60:70),"simple"===o&&(a*=.5,n*=.5,i*=.5,s*=.5,t-=6),this.children.mainBody&&(this.children.mainBody.detach(),this.children.mainBody.remove()),this.model.presentation.set({singleValueFontSize:a,sideLabelFontSize:n,mainBodyPadding:t,deltaFontSize:i,deltaScale:s}),this.children.mainBody=new l({model:{application:this.model.application,state:this.model.config,results:this.model.results,presentation:this.model.presentation}}),this.listenTo(this.children.mainBody,"singleDrilldownClicked",(function(e){this.handleSingleDrilldownClicked(e)})),this.listenTo(this.children.mainBody,"anchorTagClicked",(function(e){this.handleAnchorTagClicked(e)})),this.children.mainBody.render().appendTo(e)},handleSingleDrilldownClicked:function(e){this.trigger(e.specificEventNames,e.drilldownInfo)},handleAnchorTagClicked:function(t){var i=e(t.currentTarget).attr("href");i&&d.redirectTo(i,u.shouldDrilldownInNewTab(t))},drawUnderLabel:function(e){var t,i=this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:this.UNDERLABEL_COLOR,s=this.hasBackground()?.8:1;t=this.hasSparkline?72:85,this.children.underLabel&&(this.children.underLabel.detach(),this.children.underLabel.remove()),this.model.presentation.set({underLabelY:t,underLabelColor:i,underLabelOpacity:s}),this.children.underLabel=new n({model:{state:this.model.config,results:this.model.results,presentation:this.model.presentation,application:this.model.application}}),this.listenTo(this.children.underLabel,"singleDrilldownClicked",(function(e){this.handleSingleDrilldownClicked(e)})),this.listenTo(this.children.underLabel,"anchorTagClicked",(function(e){this.handleAnchorTagClicked(e)})),this.children.underLabel.render().appendTo(e)},drawComponents:function(){var e=this.drawSvgContainer();this.hasSparkline=this.model.results.get("sparkline")&&!1!==o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.showSparkline")),this.model.presentation.set("hasSparkline",this.hasSparkline),this.drawSeverityBackground(e),this.drawMainBody(e),this.model.config.get("display.visualizations.singlevalue.underLabel")&&this.drawUnderLabel(e),this.drawSparkline(e)},renderMaxResultCountMessage:function(e){var i=o.sprintf(t("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),e);this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:i,level:"warning"}))},inlineMessageTemplate:'                <div class="alert alert-inline alert-<%= level %> alert-inline">                     <i class="icon-alert"></i>                     <%- message %>                 </div>             ',updateView:function(){this.updateResultState(),this.$el.removeClass(this._dynamicClasses||""),this._dynamicClasses=[this.model.config.get("display.visualizations.singlevalue.additionalClass"),this.getFieldValue(this.model.config.get("display.visualizations.singlevalue.classField"))].join(" "),this.$el.addClass(this._dynamicClasses),this.drawComponents(),this.$inlineMessage.remove(),this.model.searchDataParams&&(this.MAX_RESULT_COUNT=this.model.searchDataParams.get("count")),this.model.results.get("sparkline")&&this.model.results.get("sparkline").length>=this.MAX_RESULT_COUNT&&(this.renderMaxResultCountMessage(this.MAX_RESULT_COUNT),this.$inlineMessage.insertAfter(this.$(".svg-container"))),this.isAddedToDocument()&&this.reflow()}},"dark"===f.getCurrentTheme().colorScheme?L.dark:L.enterprise))}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/Sparkline":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],void 0===(a=function(e,t,i,s,a,l,n,r){return s.extend({moduleId:i.i,className:"single-value-sparkline",el:function(){return l.createElement("g").attr("class","single-value-sparkline")},SPARKLINE_WIDTH:150,SPARKLINE_HEIGHT:14,SPARKLINE_Y:77,DEFAULT_SPARKLINE_COLOR:"#000000",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.sparklineColor=this.model.presentation.get("sparklineColor"),this.activate()},drawSparkline:function(){var e=this.model.presentation.get("sparklineOpacity")||1,i=1,s=this.model.results.get("sparklineData"),a=this.model.results.get("deltaBacktrack");if(this.$el.empty(),s&&!(s.length<2)){var n=[],r=1/0,o=-1/0,h=1/0,d=-1/0;t.each(s,(function(e){var t=i++,s=parseFloat(e)||0;r=Math.min(t,r),o=Math.max(t,o),h=Math.min(s,h),d=Math.max(s,d),n.push({x:t,y:s})}));var u=this.SPARKLINE_WIDTH,c=this.SPARKLINE_HEIGHT;if(t.each(n,(function(e,t){e.x=u*((e.x-r)/Math.max(o-r,1)),e.y=c*(1-(e.y-h)/Math.max(d-h,1))})),a>0&&this.displayDeltaRange()){var g=n.length-1,p=Math.max(g-a,0);l.createElement("path").attr("class","sparkline").attr("d",this.pointsToPath(n.slice(0,p+1))).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",.6*e).attr("stroke-width","1px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el),l.createElement("path").attr("class","sparkline-delta").attr("d",this.pointsToPath(n.slice(p,g+1))).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",e).attr("stroke-width","1.5px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el);var m=n[p];l.createElement("circle").attr("class","sparkline-point").attr("cx",m.x).attr("cy",m.y).attr("r",2).attr("fill",this.sparklineColor).attr("stroke","none").attr("opacity",e).appendTo(this.$el)}else l.createElement("path").attr("class","sparkline").attr("d",this.pointsToPath(n)).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",e).attr("stroke-width","1.5px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el);var f=n[n.length-1];l.createElement("circle").attr("class","sparkline-point").attr("cx",f.x).attr("cy",f.y).attr("r",2).attr("fill",this.sparklineColor).attr("stroke","none").attr("opacity",e).appendTo(this.$el)}},positionAndScaleSparkline:function(){var e,t,i,s,a=r.roundToDecimal((this.svgWidth/2-this.sparklineWidth/2)/this.scaleRatio,-2),l=this.SPARKLINE_Y,o=this.model.presentation.get("edgePadding"),h=this.svgWidth-2*o;this.sparklineWidth<h?n.valuesAreNumericAndFinite([this.scaleRatio,a,l])&&this.$el.attr({transform:"scale("+this.scaleRatio+")translate("+a+","+l+")"}):(t=r.roundToDecimal(h/this.SPARKLINE_WIDTH,-2),i=r.roundToDecimal(o/t,-2),e=r.roundToDecimal(this.svgHeight/this.scaleRatio,-2)*t,s=r.roundToDecimal(l+(this.svgHeight-e)/t,-2),n.valuesAreNumericAndFinite([t,i,s])&&this.$el.attr({transform:"scale("+t+")translate("+i+","+s+")"}))},pointsToPath:function(e){for(var t,i="",s=0,a=e.length;s<a;s++)i+=0===s?"M":"L",i+=(t=e[s]).x+","+t.y;return i},displayDeltaRange:function(){var e=a.normalizeBoolean(this.model.state.get("display.visualizations.singlevalue.showTrendIndicator")),t=this.model.results.get("deltaValue");return!1!==e&&null!=t},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleSparkline()},updateContainerDimensions:function(){this.svgWidth=this.model.presentation.get("svgWidth"),this.svgHeight=this.model.presentation.get("svgHeight"),this.scaleRatio=this.model.presentation.get("scaleRatio"),this.sparklineWidth=this.SPARKLINE_WIDTH*this.scaleRatio},render:function(){return this.drawSparkline(),this}})}.apply(t,s))||(e.exports=a)},"views/shared/singlevalue/UnderLabel":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Label"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],void 0===(a=function(e,t,i,s,a,l,n,r,o,h){return s.extend({moduleId:i.i,className:"single-value-under-label",initialize:function(e){s.prototype.initialize.apply(this,arguments)},el:function(){return r.createElement("g").attr("class","single-value-under-label")},LABEL_FONT_SIZE:12,createUnderLabel:function(){this.children.underLabel&&(this.children.underLabel.detach(),this.children.underLabel.remove()),this.children.underLabel=new a({model:{state:this.model.state,results:this.model.results,presentation:this.model.presentation,application:this.model.application},labelFontSize:this.LABEL_FONT_SIZE,labelFontColor:this.model.presentation.get("underLabelColor"),labelGroupClass:"under-label-group",labelClass:"under-label",linkField:"underlabel",configName:"display.visualizations.singlevalue.underLabel",useResultField:!1,labelOpacity:this.model.presentation.get("underLabelOpacity"),fontWeight:"normal"}),this.listenTo(this.children.underLabel,"singleDrilldownClicked",(function(e){this.trigger("singleDrilldownClicked",e)})),this.listenTo(this.children.underLabel,"anchorTagClicked",(function(e){this.trigger("anchorTagClicked",e)}))},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleUnderLabel()},updateContainerDimensions:function(){this.svgWidth=this.model.presentation.get("svgWidth"),this.svgHeight=this.model.presentation.get("svgHeight"),this.scaleRatio=this.model.presentation.get("scaleRatio"),this.UNDER_LABEL_WIDTH=this.children.underLabel.getWidth()},positionAndScaleUnderLabel:function(){if(this.UNDER_LABEL_WIDTH){var e=h.roundToDecimal(this.svgWidth/2-this.UNDER_LABEL_WIDTH/2,-2),t=this.model.presentation.get("underLabelY")*this.scaleRatio;o.valuesAreNumericAndFinite([e,t])&&this.$el.attr({transform:"translate("+e+","+t+")"})}},render:function(){return this.createUnderLabel(),this.children.underLabel.render().appendTo(this.$el),this}})}.apply(t,s))||(e.exports=a)}}]);