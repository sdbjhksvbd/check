/*! For license information please see 251.251.ec451022f033c04ca5ef.js.LICENSE.txt */
(self.webpackChunkremote_manage_config_page=self.webpackChunkremote_manage_config_page||[]).push([[251],{31856:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n(4942),a=n(12650),o=n.n(a),s=n(96486),l=n(6472),i=n(95414),c=n.n(i),u=n(72361),p=n(2249);const E={LOOKUP_HOST:{LABEL:"Select target host *",DESCRIPTION:'Enter a host name then click "Query" to find available classes.',BUTTON_LABEL:"Query..."},AVAILABLE_OBJECTS:{LABEL:"Available objects *",DESCRIPTION:"Select an object to view and add available counters."},COUNTERS:{LABEL:"Counters",SOURCE_LABEL:"Available counters",TARGET_LABEL:"Selected counters"},INSTANCES:{LABEL:"Instances",SOURCE_LABEL:"Available instances",TARGET_LABEL:"Selected instances"},ADDITIONAL_HOSTS:{LABEL:"Collect the same set of metrics from additional hosts",DESCRIPTION:"Comma separated list"},POLLING_INTERVAL:{LABEL:"Polling interval *",DESCRIPTION:"Seconds"},INDEX:{LABEL:"Index",SELECT_LABEL:"Set the destination index for this source"},ERRORS:{["FETCH_AVAILABLE_COUNTERS_NOT_FOUND"]:e=>"Failed to fetch data: Unable to get the available counters for class '"+e+"'. WMI error.",["FETCH_AVAILABLE_INSTANCES_NOT_FOUND"]:e=>"Failed to fetch data: Unable to get the available instances for class '"+e+"'. WMI error"}};(0,p.localizeMessages)(E);var m=n(39839);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(66070);const L={CONTAINER:"Container",WAITSPINNER:"WaitSpinner",ERROR_MSG:"ErrorMessage"};(0,p.normalizeDataTestIds)({remoteAppName:O.KH,compName:"WinELC",testIds:L});const g=L;var f,y,S,I=n(30168),v=n(97026),C=n.n(v),A=n(25947);const T=C().div(f||(f=(0,I.Z)(["\n    max-width: 960px;\n    padding: 30px 20px 20px 20px;\n    background-color: ",";\n    box-shadow: ",";\n    margin: 0 auto 20px;\n    display: flex;\n    flex-direction: column;\n"])),(0,A.pick)({enterprise:A.variables.backgroundColor,prisma:A.variables.backgroundColorPopup}),A.variables.overlayShadow),R=C().div(y||(y=(0,I.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    border-top: 1px solid #ccc;\n    padding: 20px;\n"]))),h=C().div(S||(S=(0,I.Z)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 40px;\n    margin-bottom: 40px;\n"])));var j=n(17563),w=n(97212),P=n(956);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const D="data/inputs/win-wmi-collections",B=(0,w.createRESTURL)(D),x=(0,w.createRESTURL)("admin/win-wmi-find-collection"),U=(0,w.createRESTURL)("data/indexes"),G={app:"",owner:""},k=async e=>{const t=B+"/"+e+"?"+(0,j.stringify)({output_mode:"json"}),n=await fetch(t,_({},P.pX)),r=await n.json();if(200===n.status){const{classes:e="",fields:t=[],index:n="",instances:a=[],interval:o=null,lookup_host:l="",server:i=null}=(0,s.get)(r,"entry[0].content",{}),{app:c,owner:u}=(0,s.get)(r,"entry[0].acl");G.app=c,G.owner=u;const p=(0,m.YJ)(e);return{lookupHost:l,availableObjects:{label:p,value:p},counters:{targetItemsList:t},instances:{targetItemsList:a},additionalHosts:i||"",pollingInterval:o,index:{label:n,value:n}}}throw new Error((0,m.IG)(r))},H=async function(e){void 0===e&&(e="");const t={server:e,output_mode:"json"},n=x+"?"+(0,j.stringify)(t),r=await fetch(n,_({},P.pX)),a=await r.json();if(200===r.status)return(0,s.get)(a,"entry[0].content.classes",[]).map((e=>{const t=(0,m.YJ)(e);return{label:t,value:t}}));throw new Error((0,m.IG)(a))},F=async e=>{let{availableObjects:t}=e;const n={class:(0,m.K)(t),output_mode:"json"},r=x+"?"+(0,j.stringify)(n),a=await fetch(r,_({},P.pX)),o=await a.json();if(200===a.status)return{counters:(0,s.get)(o,"entry[0].content.fields",[]),instances:(0,s.get)(o,"entry[0].content.instances",[])};throw new Error((0,m.IG)(o))},X=async()=>{const e=U+"?"+(0,j.stringify)(m.$t),t=await fetch(e,_({},P.pX)),n=await t.json();if(200===t.status)return[m.Pt,...(n.entry||[]).map((e=>({label:e.name,value:e.name})))];throw new Error((0,m.IG)(n))};var Z=n(27626),M=n(8513);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Y=(0,s.flowRight)([(0,u.ZL)(["Windows"]),(0,u.ao)(["cmp"]),(0,u.Bv)(["edit_win_wmiconf"])])((e=>{let{entity:t}=e;const[n,i]=(0,a.useState)(!0),[u,p]=(0,a.useState)(void 0),[d,L]=(0,a.useState)({}),[f,y]=(0,a.useState)({}),[S,I]=(0,a.useState)([]),[v,C]=(0,a.useState)(!1),A=async(e,t)=>{let{refreshDataSources:n}=t;const r=[["counters",[]],["instances",[]]];try{I([]),C(!0);const t=await H(e);r.push(["availableObjects",t])}catch(e){I([e.message]),r.push(["availableObjects",[]])}finally{C(!1),n(r)}},N=async(e,t)=>{let{refreshDataSources:n}=t,r=[["counters",[]],["instances",[]]];try{I([]),C(!0);const{counters:t,instances:n}=await F({availableObjects:e});r=[["counters",t],["instances",n]]}catch(e){I([e.message])}finally{n(r),C(!1)}};(0,a.useEffect)((()=>{t?(async()=>{let e,n={},a=[],o=[];try{var s;[n,a,o]=await(async e=>Promise.all([k(e),H(),X()]))(t),e=await F({availableObjects:null==(s=n.availableObjects)?void 0:s.value}),n=(e=>{var t,n,r,a;let{defaultSettings:o,countersInstances:s}=e;return null!=(t=o.counters)&&null!=(n=t.targetItemsList)&&n.includes("*")&&(o.counters.targetItemsList=s.counters),null!=(r=o.instances)&&null!=(a=r.targetItemsList)&&a.includes("*")&&(o.instances.targetItemsList=s.instances),o})({defaultSettings:n,countersInstances:e})}catch(e){I([e.message])}finally{var l,c;i(!1),p(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t},n)),L((e=>{let{availableObjects:t=[],indexes:n=[]}=e;return{type:"object",properties:{name:{type:"string"},lookupHost:{type:"string",description:E.LOOKUP_HOST.DESCRIPTION},availableObjects:t.length?{type:"object",enum:t,description:E.AVAILABLE_OBJECTS.DESCRIPTION}:{},counters:{type:"object"},instances:{type:"object"},additionalHosts:{type:"string",description:E.ADDITIONAL_HOSTS.DESCRIPTION},pollingInterval:{type:"number",description:E.POLLING_INTERVAL.DESCRIPTION},index:n.length?{type:"object",enum:n}:{}},required:["lookupHost","availableObjects","pollingInterval"]}})({availableObjects:a,indexes:o})),y((e=>{let{countersDataSource:t,instancesDataSource:n,handleQueryButtonClick:r,handleAvailableObjectsSelectChange:a}=e;return{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/name",label:"Name",rule:b({},(0,m.LD)()),options:{suiControlGroupProps:b({},(0,m.bY)())}},{type:"InputButtonGroup",scope:"#/properties/lookupHost",label:E.LOOKUP_HOST.LABEL,options:{suiControlGroupProps:b({},(0,m.bY)()),customComponentProps:{inputProps:{},buttonProps:{label:E.LOOKUP_HOST.BUTTON_LABEL,onClick:r}}}},{type:"Select",scope:"#/properties/availableObjects",label:E.AVAILABLE_OBJECTS.LABEL,options:{suiControlGroupProps:b({},(0,m.bY)()),suiComponentProps:{filter:!1},customComponentProps:{onSelectValueChange:a}}},{type:"TransferList",scope:"#/properties/counters",label:E.COUNTERS.LABEL,options:{suiControlGroupProps:b({},(0,m.bY)()),customComponentProps:{source:{label:E.COUNTERS.SOURCE_LABEL},target:{label:E.COUNTERS.TARGET_LABEL},dataSource:t}}},{type:"TransferList",scope:"#/properties/instances",label:E.INSTANCES.LABEL,options:{suiControlGroupProps:b({},(0,m.bY)()),customComponentProps:{source:{label:E.INSTANCES.SOURCE_LABEL},target:{label:E.INSTANCES.TARGET_LABEL},dataSource:n}}},{type:"Control",label:E.ADDITIONAL_HOSTS.LABEL,scope:"#/properties/additionalHosts",options:{suiControlGroupProps:b({},(0,m.bY)())}},{type:"Control",label:E.POLLING_INTERVAL.LABEL,scope:"#/properties/pollingInterval",options:{suiControlGroupProps:b({},(0,m.bY)())}},{type:"Label",text:E.INDEX.LABEL},{type:"Select",scope:"#/properties/index",label:E.INDEX.SELECT_LABEL,options:{suiControlGroupProps:b({},(0,m.bY)()),suiComponentProps:{filter:!1}}}]}})({countersDataSource:(null==(l=e)?void 0:l.counters)||[],instancesDataSource:(null==(c=e)?void 0:c.instances)||[],handleQueryButtonClick:A,handleAvailableObjectsSelectChange:N}))}})():window.location.href=O._J[M.iY.WinWmiCollections]}),[]);const B=!(0,s.isEmpty)(d)&&!(0,s.isEmpty)(f);return o().createElement(o().Fragment,null,!n&&o().createElement(T,{"data-test-name":g.CONTAINER},S.length>0&&o().createElement(l.Errors,{errorMessages:S,onRequestRemove:()=>I([])}),B&&o().createElement(l.SUIFormRendererCompound,null,o().createElement("div",{style:{width:"100%",position:"relative"}},v&&o().createElement(Z.Z,null),o().createElement("main",null,o().createElement(l.SUIFormRendererCompound.ErrorView,null),o().createElement(l.SUIFormRendererCompound.Form,{data:u,schema:d,uischema:f})),o().createElement("footer",null,o().createElement(R,null,o().createElement(l.SUIFormRendererCompound.ActionButtons,{onSubmit:async e=>{let{data:n,successCb:r,failureCb:a}=e;I([]),C(!0);try{await(async e=>{var t,n;let{entity:r,data:a}=e;const{app:o,owner:s}=G,l=(0,w.createRESTURL)(D+"/"+r,{app:o,owner:s}),i=(0,j.stringify)({lookup_host:a.lookupHost,classes:(null==(t=a.availableObjects)?void 0:t.value)||"",fields:a.counters.targetItemsList,index:(null==(n=a.index)?void 0:n.value)||"",instances:a.instances.targetItemsList,output_mode:"json",interval:a.pollingInterval,server:a.additionalHosts}),c=_(_({},P.pX),{},{method:"POST",body:i}),u=await fetch(l,_({},c)),p=await u.json();if(200!==u.status)throw new Error((0,m.IG)(p))})({entity:t,data:n}),r()}catch(e){a([e.message])}finally{C(!1)}}})))))),n&&o().createElement(h,{"data-test-name":g.WAITSPINNER},o().createElement(c(),{size:"medium"})))}))},72361:(e,t,n)=>{"use strict";n.d(t,{Bv:()=>b,Nj:()=>g,ZL:()=>L,ao:()=>O});var r,a=n(30168),o=n(12650),s=n.n(o),l=n(97026),i=n.n(l),c=n(95931),u=n(89217),p=n(68937),E=n(79674);const m=i().div(r||(r=(0,a.Z)(["\n    margin: 25px;\n"]))),d=e=>{let{msg:t="Error loading page"}=e;return s().createElement("h2",null,t)},b=function(e){return void 0===e&&(e=[]),t=>{const n=u.o.canReadPage(e);return e=>n?s().createElement(t,e):s().createElement(m,null,s().createElement(d,{msg:E.X.FILTER_HOC.ERRORS.RBAC_FILTER}))}},O=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(c.N.getSplunkInstanceType());return e=>n?s().createElement(t,e):s().createElement(m,null,s().createElement(d,{msg:E.X.FILTER_HOC.ERRORS.SPLUNK_ENV_FILTER}))}},L=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(c.N.getOS());return e=>n?s().createElement(t,e):s().createElement(m,null,s().createElement(d,{msg:E.X.FILTER_HOC.ERRORS.OS_FILTER}))}},g=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(p.D.getExperienceType());return e=>n?s().createElement(t,e):s().createElement(m,null,s().createElement(d,{msg:E.X.FILTER_HOC.ERRORS.SPLUNK_EXPERIENCE_FILTER}))}}},27626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(12650),a=n.n(r),o=n(95414),s=n.n(o),l=n(2249),i=n(66070);const c={LOADING_MSG:"LoadingMessage"};(0,l.normalizeDataTestIds)({remoteAppName:i.KH,compName:"LoadingMessage",testIds:c});const u=c;var p,E,m,d=n(79674),b=n(30168),O=n(97026),L=n.n(O),g=n(47934),f=n.n(g);const y=L().div(p||(p=(0,b.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    background-color: rgba(255, 255, 255, 0.5);\n    z-index: 500;\n"]))),S=L().div(E||(E=(0,b.Z)(["\n    margin: auto;\n    display: flex;\n"]))),I=L()(f())(m||(m=(0,b.Z)(["\n    margin: auto;\n    font-size: 16px;\n    margin-bottom: 4px;\n    margin-left: 2px;\n"]))),v=()=>a().createElement(y,{"data-test-name":u.LOADING_MSG},a().createElement(S,null,a().createElement(s(),{size:"medium"}),a().createElement(I,null,d.X.COMMON.LOADING_MSG)))},46115:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=251.251.ec451022f033c04ca5ef.js.map