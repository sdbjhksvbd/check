/*! For license information please see 821.821.836c04dbc8c14c55d04c.js.LICENSE.txt */
(self.webpackChunkremote_manage_config_page=self.webpackChunkremote_manage_config_page||[]).push([[821],{58270:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n(4942),o=n(12650),a=n.n(o),s=n(96486),c=n(95414),i=n.n(c),l=n(6472),p=n(17563),u=n(97212),m=n(956),E=n(39839);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g=(0,u.createRESTURL)("deployment/server/setup/data/inputs/remote_perfmon"),O=(0,u.createRESTURL)("admin/win-perfmon-find-collection"),y=(0,u.createRESTURL)("data/indexes"),f={app:"",owner:""},L=async e=>{const t=g+"/"+e+"?"+(0,p.stringify)({output_mode:"json"}),n=await fetch(t,b({},m.pX)),r=await n.json();if(200===n.status){const{object:e="",counters:t="",index:n="",instances:o="",interval:a=null}=(0,s.get)(r,"entry[0].content",{}),{app:c="",owner:i=""}=(0,s.get)(r,"entry[0].acl",{});return f.app=c,f.owner=i,{name:(0,s.get)(r,"entry[0].name",""),availableObjects:{label:e,value:e},counters:{targetItemsList:t.split(";").filter((e=>e))},instances:{targetItemsList:o.split(";").filter((e=>e))},pollingInterval:a,index:{label:n,value:n}}}throw new Error((0,E.IG)(r))},S=async()=>{const e=O+"?"+(0,p.stringify)({output_mode:"json"}),t=await fetch(e,b({},m.pX)),n=await t.json();if(200===t.status)return(0,s.get)(n,"entry[0].content.objects",[]).map((e=>({label:e,value:e})));throw new Error((0,E.IG)(n))},v=async e=>{const t={object:e,output_mode:"json"},n=O+"?"+(0,p.stringify)(t),r=await fetch(n,b({},m.pX)),o=await r.json();if(200===r.status)return{counters:(0,s.get)(o,"entry[0].content.counters",[]),instances:(0,s.get)(o,"entry[0].content.instances",[])};throw new Error((0,E.IG)(o))},I=async()=>{const e=y+"?"+(0,p.stringify)(E.$t),t=await fetch(e,b({},m.pX)),n=await t.json();if(200===t.status)return[E.Pt,...(n.entry||[]).map((e=>({label:e.name,value:e.name})))];throw new Error((0,E.IG)(n))};var j=n(2249),R=n(66070);const w={CONTAINER:"Container",WAITSPINNER:"WaitSpinner",ERROR_MSG:"ErrorMessage"};(0,j.normalizeDataTestIds)({remoteAppName:R.KH,compName:"WinFwdPerfmon",testIds:w});const C=w;var P=n(72361);const A={AVAILABLE_OBJECTS:{LABEL:"Available objects",DESCRIPTION:"Select an object to view and add available counters"},COUNTERS:{LABEL:"Counters",SOURCE_LABEL:"Available counters",TARGET_LABEL:"Selected counters"},INSTANCES:{LABEL:"Instances",SOURCE_LABEL:"Available instances",TARGET_LABEL:"Selected instances"},POLLING_INTERVAL:{LABEL:"Polling interval *",DESCRIPTION:"Seconds"},INDEX:{LABEL:"Index",SELECT_LABEL:"Set the destination index for this source"}};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,j.localizeMessages)(A);var N,_,x,B=n(30168),D=n(97026),G=n.n(D),U=n(25947);const F=G().div(N||(N=(0,B.Z)(["\n    max-width: 960px;\n    padding: 30px 20px 20px 20px;\n    background-color: ",";\n    box-shadow: ",";\n    margin: 0 auto 20px;\n    display: flex;\n    flex-direction: column;\n"])),(0,U.pick)({enterprise:U.variables.backgroundColor,prisma:U.variables.backgroundColorPopup}),U.variables.overlayShadow),X=G().div(_||(_=(0,B.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    border-top: 1px solid #ccc;\n    padding: 20px;\n"]))),Z=G().div(x||(x=(0,B.Z)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 40px;\n    margin-bottom: 40px;\n"])));var k=n(8513),M=n(27626);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const z=(0,s.flowRight)([(0,P.ZL)(["Windows"]),(0,P.ao)(["cmp"]),(0,P.Bv)(["list_deployment_server","edit_deployment_server"])])((e=>{let{entity:t}=e;const[n,c]=(0,o.useState)(!0),[u,d]=(0,o.useState)(void 0),[O,y]=(0,o.useState)({}),[j,w]=(0,o.useState)({}),[P,h]=(0,o.useState)([]),[N,_]=(0,o.useState)(!1),x=async(e,t)=>{let{refreshDataSources:n}=t;h([]),_(!0);let r=[["counters",[]],["instances",[]]];try{const{counters:t,instances:n}=await v(e);r=[["counters",t],["instances",n]]}catch(e){h([e.message])}finally{n(r),_(!1)}};(0,o.useEffect)((()=>{t?(async()=>{let e,n={},o=[],a=[];try{var s;[n,o,a]=await(async e=>Promise.all([L(e),S(),I()]))(t),e=await v(null==(s=n.availableObjects)?void 0:s.value)}catch(e){h([e.message])}finally{var i,l;d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t},n)),y((e=>{let{availableObjects:t=[],indexes:n=[]}=e;return{type:"object",properties:{name:{type:"string"},availableObjects:t.length?{type:"object",enum:t,description:A.AVAILABLE_OBJECTS.DESCRIPTION}:{},counters:{type:"object"},instances:{type:"object"},pollingInterval:{type:"number",description:A.POLLING_INTERVAL.DESCRIPTION},index:n.length?{type:"object",enum:n}:{}},required:["pollingInterval"]}})({availableObjects:o,indexes:a})),w((e=>{let{countersSource:t,instancesSource:n,handleSelectChange:r}=e;return{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/name",label:"Name",rule:T({},(0,E.LD)()),options:{suiControlGroupProps:T({},(0,E.bY)())}},{type:"Select",scope:"#/properties/availableObjects",label:A.AVAILABLE_OBJECTS.LABEL,options:{suiControlGroupProps:T({},(0,E.bY)()),customComponentProps:{onSelectValueChange:r},suiComponentProps:{filter:!1}}},{type:"TransferList",scope:"#/properties/counters",label:A.COUNTERS.LABEL,options:{suiControlGroupProps:T({},(0,E.bY)()),customComponentProps:{source:{label:A.COUNTERS.SOURCE_LABEL},target:{label:A.COUNTERS.TARGET_LABEL},dataSource:t}}},{type:"TransferList",scope:"#/properties/instances",label:A.INSTANCES.LABEL,options:{suiControlGroupProps:T({},(0,E.bY)()),customComponentProps:{source:{label:A.INSTANCES.SOURCE_LABEL},target:{label:A.INSTANCES.TARGET_LABEL},dataSource:n}}},{type:"Control",scope:"#/properties/pollingInterval",label:A.POLLING_INTERVAL.LABEL,options:{suiControlGroupProps:T({},(0,E.bY)())}},{type:"Label",text:A.INDEX.LABEL},{type:"Select",scope:"#/properties/index",label:A.INDEX.SELECT_LABEL,options:{suiControlGroupProps:T({},(0,E.bY)()),suiComponentProps:{filter:!1}}}]}})({countersSource:(null==(i=e)?void 0:i.counters)||[],instancesSource:(null==(l=e)?void 0:l.instances)||[],handleSelectChange:x})),c(!1)}})():window.location.href=R._J[k.iY.WinFwdPerfmon]}),[]);const B=!(0,s.isEmpty)(O)&&!(0,s.isEmpty)(j);return a().createElement(a().Fragment,null,!n&&a().createElement(F,{"data-test-name":C.CONTAINER},P.length>0&&a().createElement(l.Errors,{errorMessages:P,onRequestRemove:()=>h([])}),B&&a().createElement(l.SUIFormRendererCompound,null,a().createElement("div",{style:{width:"100%",position:"relative"}},N&&a().createElement(M.Z,null),a().createElement("main",null,a().createElement(l.SUIFormRendererCompound.ErrorView,null),a().createElement(l.SUIFormRendererCompound.Form,{data:u,schema:O,uischema:j})),a().createElement("footer",null,a().createElement(X,null,a().createElement(l.SUIFormRendererCompound.ActionButtons,{onSubmit:async e=>{let{data:n,successCb:r,failureCb:o}=e;h([]),_(!0);try{await(async(e,t)=>{var n,r;const o=g+"/"+e,a=(0,p.stringify)({app_name:f.app,counters:t.counters.targetItemsList.join(";"),index:(null==(n=t.index)?void 0:n.value)||"",instances:t.instances.targetItemsList.join(";"),object:(null==(r=t.availableObjects)?void 0:r.value)||"",output_mode:"json",interval:t.pollingInterval}),s=b(b({},m.pX),{},{method:"POST",body:a}),c=await fetch(o,b({},s)),i=await c.json();if(200!==c.status)throw new Error((0,E.IG)(i))})(t,n),r()}catch(e){o([e.message])}finally{_(!1)}}})))))),n&&a().createElement(Z,{"data-test-name":C.WAITSPINNER},a().createElement(i(),{size:"medium"})))})),Y=z},72361:(e,t,n)=>{"use strict";n.d(t,{Bv:()=>b,Nj:()=>y,ZL:()=>O,ao:()=>g});var r,o=n(30168),a=n(12650),s=n.n(a),c=n(97026),i=n.n(c),l=n(95931),p=n(89217),u=n(68937),m=n(79674);const E=i().div(r||(r=(0,o.Z)(["\n    margin: 25px;\n"]))),d=e=>{let{msg:t="Error loading page"}=e;return s().createElement("h2",null,t)},b=function(e){return void 0===e&&(e=[]),t=>{const n=p.o.canReadPage(e);return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(d,{msg:m.X.FILTER_HOC.ERRORS.RBAC_FILTER}))}},g=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(l.N.getSplunkInstanceType());return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(d,{msg:m.X.FILTER_HOC.ERRORS.SPLUNK_ENV_FILTER}))}},O=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(l.N.getOS());return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(d,{msg:m.X.FILTER_HOC.ERRORS.OS_FILTER}))}},y=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(u.D.getExperienceType());return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(d,{msg:m.X.FILTER_HOC.ERRORS.SPLUNK_EXPERIENCE_FILTER}))}}},27626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(12650),o=n.n(r),a=n(95414),s=n.n(a),c=n(2249),i=n(66070);const l={LOADING_MSG:"LoadingMessage"};(0,c.normalizeDataTestIds)({remoteAppName:i.KH,compName:"LoadingMessage",testIds:l});const p=l;var u,m,E,d=n(79674),b=n(30168),g=n(97026),O=n.n(g),y=n(47934),f=n.n(y);const L=O().div(u||(u=(0,b.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    background-color: rgba(255, 255, 255, 0.5);\n    z-index: 500;\n"]))),S=O().div(m||(m=(0,b.Z)(["\n    margin: auto;\n    display: flex;\n"]))),v=O()(f())(E||(E=(0,b.Z)(["\n    margin: auto;\n    font-size: 16px;\n    margin-bottom: 4px;\n    margin-left: 2px;\n"]))),I=()=>o().createElement(L,{"data-test-name":p.LOADING_MSG},o().createElement(S,null,o().createElement(s(),{size:"medium"}),o().createElement(v,null,d.X.COMMON.LOADING_MSG)))},46115:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=821.821.836c04dbc8c14c55d04c.js.map