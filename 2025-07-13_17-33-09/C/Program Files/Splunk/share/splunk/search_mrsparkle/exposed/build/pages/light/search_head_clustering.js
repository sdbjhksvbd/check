!function(e){function t(t){for(var r,l,s=t[0],o=t[1],u=t[2],d=0,h=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&h.push(a[l][0]),a[l]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);for(c&&c(t);h.length;)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var o=n[s];0!==a[o]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={68:0},i=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=function(e){return l.p+""+({}[e]||e)+".js"}(e);var o=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,n[1](o)}a[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=o;i.push([2583,0]),n()}({2583:function(e,t,n){var r,a;n.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,n,r="",a=0,i=arguments.length;a<i;a++)(n=(t=arguments[a].toString()).length)>1&&"/"==t.charAt(n-1)&&(t=t.substring(0,n-1)),"/"!=t.charAt(0)?r+="/"+t:r+=t;if("/"!=r){var l=r.split("/"),s=l[1];if("static"==s||"modules"==s){var o=r.substring(s.length+2,r.length);r="/"+s,window.$C.BUILD_NUMBER&&(r+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(r+="."+window.$C.BUILD_PUSH_NUMBER),"app"==l[2]&&(r+=":"+e("APP_BUILD",0)),r+="/"+o}}var u=e("MRSPARKLE_ROOT_PATH","/"),c=e("LOCALE","en-US"),d="/"+c+r;return""==u||"/"==u?d:u+d}("/static/build/pages/light")+"/"}(),r=[n("routers/SearchHeadClustering"),n("util/router_utils")],void 0===(a=function(e,t){new e;t.start_backbone_history()}.apply(t,r))||(e.exports=a)},2584:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".icon-alert{color:#f8be34}.icon-alert,.icon-error{font-size:22px;padding-right:10px}.icon-error{color:#dc4e41}.icon-check-circle{color:#53a051;font-size:22px;padding-right:10px}.alerts.shared-flashmessages{padding-left:0}.btn-primary{margin-left:5px}.captain-warning-container .learn-more-link{white-space:nowrap}",""])},"collections/services/cluster/searchhead/Members":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=d(n("shim/jquery")),a=d(n("require/backbone")),i=d(n("require/underscore")),l=d(n("models/services/cluster/searchhead/Member")),s=d(n("collections/SplunkDsBase")),o=d(n("models/SplunkDBase")),u=d(n("models/services/shcluster/SHClusterStatus")),c=d(n("util/splunkd_utils"));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return new Promise((function n(r,a){var i=e();i?r(i):setTimeout(n,t,r,a)}))}var f=o.default.extend({url:c.default.fullpath("shcluster/captain/control/control/restart"),service_ready_flag:!0,rolling_restart_flag:!1,sync:function(e,t,n){var i={};if("create"!==e&&"update"!==e)throw new Error("invalid method: "+e);return i.data={output_mode:n.output_mode},i.processData=!0,r.default.extend(!0,i,n),this.url+="?searchable="+t.get("searchable")+"&force="+t.get("force"),a.default.sync.call(null,e,t,i)},pollRollingRestartReady:function(){var e=this,t=new u.default;return this.service_ready_flag=!1,h((function(){return t.fetch().done((function(t){e.service_ready_flag=t.entry[0].content.captain.service_ready_flag,e.rolling_restart_flag=t.entry[0].content.captain.rolling_restart_flag})),e.service_ready_flag&&!e.rolling_restart_flag}),1e4)}}),p=o.default.extend({url:c.default.fullpath("shcluster/member/consensus/foo/transfer_captaincy"),service_ready_flag:!0,sync:function(e,t,n){var i={};if("create"!==e&&"update"!==e)throw new Error("invalid method: "+e);if(!n.mgmt_uri)throw new Error("mgmt_uri is required.");return i.data={mgmt_uri:n.mgmt_uri,output_mode:n.output_mode},i.processData=!0,r.default.extend(!0,i,n),a.default.sync.call(null,e,t,i)},pollServiceReady:function(){var e=this,t=new u.default;return this.service_ready_flag=!1,h((function(){return t.fetch().done((function(t){t.entry[0].content.captain.service_ready_flag&&(e.service_ready_flag=!0)})),e.service_ready_flag}),1e4)}});t.default=s.default.extend({url:"shcluster/member/members",model:l.default,initialize:function(){this.model=this.model||{},this.model.captainInstance=new p,this.model.rollingRestartInstance=new f;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.default.prototype.initialize.apply(this,t),this.listenTo(this.model.captainInstance,"serverValidated",this.handleValidationError),this.listenTo(this.model.rollingRestartInstance,"serverValidated",this.handleValidationError)},comparator:function(e){return!e.isCaptain()},getCurrentCaptain:function(){return this.find((function(e){return e.isCaptain()}))},transferCaptain:function(e){var t=this;if(!e)throw new Error("targetCaptain parameter required. Current targetCaptain: "+e);var n=e.getMgmtUri(),a=r.default.Deferred();return this.model.captainInstance.save({},{mgmt_uri:n,output_mode:"json",type:"POST"}).done(null,(function(){t.model.captainInstance.pollServiceReady().then((function(){a.resolve()}))})).fail(null,(function(){a.reject()})),a},beginRollingRestart:function(e){var t=this,n=r.default.Deferred();return this.model.rollingRestartInstance.save({searchable:e.get("searchable"),force:e.get("force")},{output_mode:"json",type:"POST"}).done(null,(function(e){var r=i.default.isUndefined(e.entry[0])?{}:e.entry[0].content;r.success?t.model.rollingRestartInstance.pollRollingRestartReady().then((function(){n.resolve()})):n.reject(r)})).fail(null,(function(){n.reject()})),n},handleValidationError:function(e,t,n){this.trigger("serverValidated",e,t,n)}}),e.exports=t.default},"models/services/cluster/searchhead/Member":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("models/SplunkDBase")),a=i(n("util/time"));function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.extend({urlRoot:"services/shcluster/member/members",isCaptain:function(){return this.entry.content.get("is_captain")||!1},getRoleLabel:function(){return this.entry.content.get("is_captain")?"Captain":"Member"},getLastHeartBeatAsLocalTime:function(){return a.default.convertToLocalTime(this.entry.content.get("last_heartbeat"))||""},getSHMemberStatus:function(){return this.entry.content.get("status")||""},getMgmtUri:function(){return this.entry.content.get("mgmt_uri")||""},getMemberName:function(){return this.entry.content.get("label")||""}}),e.exports=t.default},"models/services/shcluster/SHClusterStatus":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("shim/jquery")),a=s(n("require/backbone")),i=s(n("models/Base")),l=s(n("util/splunkd_utils"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.extend({url:l.default.fullpath("shcluster/status"),sync:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("read"!==e)throw new Error("invalid method: "+e);var i={data:{output_mode:"json"}};return r.default.extend(!0,i,n),a.default.sync.call(this,e,t,i)},pollStatus:function(){this.fetchStatus(),setInterval(this.fetchStatus.bind(this),1e4)},fetchStatus:function(){var e=this;this.fetch().done((function(t){var n=t.entry[0].content.captain.rolling_restart_flag,r=t.entry[0].content.captain.service_ready_flag;e.trigger("serviceReadyUpdate",{serviceReady:r,rollingRestart:n})})).fail((function(){e.trigger("serviceReadyUpdate")}))}}),e.exports=t.default},"models/services/shcluster/config/SetManualDetention":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("require/backbone")),a=s(n("shim/jquery")),i=s(n("models/SplunkDBase")),l=s(n("util/splunkd_utils"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.extend({url:l.default.fullpath("shcluster/config/config"),sync:function(e,t,n){var i={};if("create"!==e&&"update"!==e)throw new Error("invalid method: "+e);return i.data={output_mode:n.output_mode,manual_detention:t.entry.content.get("manual_detention"),target_uri:t.entry.content.get("mgmt_uri")},i.processData=!0,a.default.extend(!0,i,n),r.default.sync.call(null,e,t,i)}}),e.exports=t.default},"routers/SearchHeadClustering":function(e,t,n){var r,a;r=[n("shim/jquery"),n("require/underscore"),n("require/backbone"),n("routers/Base"),n("views/search_head_clustering/PageController")],void 0===(a=function(e,t,n,r,a){return r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.fetchAppLocals=!0,this.fetchServerInfo=!0,this.setPageTitle(t("Manage Search Head Cluster").t()),this.model.controller=new n.Model},page:function(n,i,l,s){r.prototype.page.apply(this,arguments),e.when(this.deferreds.pageViewRendered).done(t((function(){this.addPageViewEl(this.pageView.el),this.entityController&&this.entityController.detach(),this.entityController=new a({model:this.model,collection:this.collection,router:this}),this.pageView.$(".main-section-body").append(this.entityController.render().el)})).bind(this))}})}.apply(t,r))||(e.exports=a)},"views/search_head_clustering/GridRow":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("require/underscore")),a=s(n("shim/jquery")),i=s(n("views/shared/basemanager/GridRow")),l=s(n("views/search_head_clustering/components/GridRow/Master"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.extend({moduleId:e.i,tagName:"tr",className:"list-item",prepareTemplate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var l=i.default.prototype.prepareTemplate.apply(this,t),s=this.model.entity.isCaptain();return a.default.extend(!0,{},l,{model:this.model.entity,name:this.model.entity.entry.content.get("label"),role:(0,r.default)(this.model.entity.getRoleLabel()).t(),isCaptain:s,status:(0,r.default)(this.model.entity.getSHMemberStatus()).t(),last_heartbeat:this.model.entity.getLastHeartBeatAsLocalTime()})},render:function(){var e=this.compiledTemplate(this.prepareTemplate());return this.$el.html(e),this.children.actionMenu=new l.default({model:this.model}),this.children.actionMenu.render().appendTo(this.$(".cell-actions")),this},template:'\n    <td class="cell-name">\n        <%- name %>\n    </td>\n    <td class="cell-actions"></td>\n    <td class="cell-status"><%- status %></td>\n    <td class="cell-role"><%- role %></td>\n    <td class="cell-last_heartbeat"><%- last_heartbeat %></td>\n    '},{columns:[{id:"name",title:(0,r.default)("Name").t()},{id:"status",title:(0,r.default)("Status").t()},{id:"is_captain",title:(0,r.default)("Role").t()},{id:"last_heartbeat",title:(0,r.default)("Last heartbeat sent to captain").t()}]}),e.exports=t.default},"views/search_head_clustering/PageController":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=v(n("shim/jquery")),a=v(n("require/underscore")),i=v(n("require/backbone")),l=v(n("uri/route")),s=v(n("controllers/BaseManagerPageController")),o=v(n("collections/services/cluster/searchhead/Members")),u=v(n("models/services/cluster/searchhead/Member")),c=v(n("models/services/shcluster/SHClusterStatus")),d=v(n("models/services/shcluster/config/SetManualDetention")),h=v(n("views/search_head_clustering/GridRow")),f=v(n("views/search_head_clustering/RestartButton")),p=v(n("views/search_head_clustering/TransferCaptainConfirmationDialog")),m=v(n("views/search_head_clustering/components/ManualDetention/Master")),g=v(n("views/search_head_clustering/RollingRestartConfirmationDialog")),_=v(n("views/search_head_clustering/ServiceNotReadyDialog"));function v(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.extend({moduleId:e.i,canShowServiceReadyDialog:!0,initialize:function(e){this.collection=this.collection||{},this.model=this.model||{},this.deferreds=this.deferreds||{};var t=a.default.extend({},e);t.enableNavigationFromUrl=!1,t.model=this.model,t.collection=this.collection,t.entitiesCollectionClass=o.default,t.entityModelClass=u.default,t.fragments=["manager","system","search_head_clustering"],t.entitySingular=(0,a.default)("Member").t(),t.entitiesPlural=(0,a.default)("Members").t(),t.header={pageTitle:(0,a.default)("Search Head Clustering").t(),pageDesc:(0,a.default)("Monitor and take action on your search head cluster.").t(),learnMoreLink:"whatsnew.searchheadclustering"},t.grid={showOwnerFilter:!1,showAppColumn:!1,showOwnerColumn:!1,showDispatchAs:!1,showStatusColumn:!1,showSharingColumn:!1,showAppFilter:!1},t.customViews={GridRow:h.default,NewButtons:f.default},this.children.learnMoreLink={},this.children.learnMoreLink.captain=l.default.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.shc.captainxfer"),this.children.learnMoreLink.restart=l.default.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.shc.rollingrestart"),s.default.prototype.initialize.call(this,t),this.model.SHClusterStatusInstance=new c.default,this.model.setManualDetention=new d.default,this.listenTo(this.model.controller,"beginTransferCaptaincy",this.beginTransferCaptaincy),this.listenTo(this.model.controller,"openCaptainConfirmationDialog",this.openCaptainConfirmationDialog),this.listenTo(this.model.controller,"openManualDetentionDialog",this.openManualDetentionDialog),this.listenTo(this.model.controller,"openRollingRestartConfirmationDialog",this.openRollingRestartConfirmationDialog),this.listenTo(this.model.controller,"beginRollingRestart",this.beginRollingRestart),this.listenTo(this.model.SHClusterStatusInstance,"serviceReadyUpdate",this.serviceReadyHandleResponse),this.model.SHClusterStatusInstance.pollStatus()},beginTransferCaptaincy:function(){var e=this;this.collection.entities.transferCaptain(this.targetCaptain).done((function(){e.endTransferCaptaincySuccess()})).fail((function(){e.endTransferCaptaincyError()})),this.canShowServiceReadyDialog=!1},endTransferCaptaincySuccess:function(){this.model.controller.trigger("refreshEntities"),this.model.controller.trigger("showCaptainTransferSuccess"),this.canShowServiceReadyDialog=!0},endTransferCaptaincyError:function(){this.canShowServiceReadyDialog=!0},openCaptainConfirmationDialog:function(e){this.targetCaptain=e.targetMember;var t=e.targetMember.getMemberName();this.children.transferCaptainConfirmDialog=new p.default({learnMoreLink:this.children.learnMoreLink.captain,controller:this.model.controller,collection:{entities:this.collection.entities.clone()},onHiddenRemove:!0,backdrop:"static",keyboard:!1,targetCaptainName:t}),(0,r.default)("body").append(this.children.transferCaptainConfirmDialog.render().el),this.children.transferCaptainConfirmDialog.show()},openManualDetentionDialog:function(e){var t=e.targetMember.getMemberName(),n=e.targetMember.entry.content.get("mgmt_uri");this.model.setManualDetention.entry.content.set({manual_detention:"ManualDetention"===e.targetMember.entry.content.get("status")?"on":"off"}),this.children.manualDetentionDialog=new m.default({controller:this.model.controller,collection:{entities:this.collection.entities.clone()},model:this.model.setManualDetention,memberName:t,mgmt_uri:n,open:!0}),(0,r.default)("body").append(this.children.manualDetentionDialog.render())},openRollingRestartConfirmationDialog:function(){this.workingModel=new i.default.Model({searchable:!1,force:!1}),this.children.rollingRestartConfirmDialog=new g.default({learnMoreLink:this.children.learnMoreLink.restart,controller:this.model.controller,collection:{entities:this.collection.entities.clone()},backdrop:"static",keyboard:!1,onHiddenRemove:!0,workingModel:this.workingModel}),(0,r.default)("body").append(this.children.rollingRestartConfirmDialog.render().el),this.children.rollingRestartConfirmDialog.show()},beginRollingRestart:function(){var e=this;this.model.controller.trigger("rollingRestartInProgress"),this.collection.entities.beginRollingRestart(this.workingModel).done((function(){e.rollingRestartSuccess()})).fail((function(t){e.rollingRestartError(t)})),this.canShowServiceReadyDialog=!1},rollingRestartSuccess:function(){this.model.controller.trigger("rollingRestartSuccess"),this.canShowServiceReadyDialog=!0},rollingRestartError:function(e){this.model.controller.trigger("rollingRestartError",e),this.canShowServiceReadyDialog=!0},showServiceNotReadyDialog:function(e){this.children.serviceNotReadyDialog=new _.default({onHiddenRemove:!0,backdrop:"static",keyboard:!1,statusResponse:e}),(0,r.default)("body").append(this.children.serviceNotReadyDialog.render().el),this.children.serviceNotReadyDialog.show()},serviceReadyHandleResponse:function(e){var t=a.default.isObject(e)&&e.serviceReady&&!e.rollingRestart,n=!t&&this.canShowServiceReadyDialog,r=t&&this.children.serviceNotReadyDialog&&this.children.serviceNotReadyDialog.shown;n&&(this.showServiceNotReadyDialog(e),this.canShowServiceReadyDialog=!1),r&&(this.model.controller.trigger("refreshEntities"),this.children.serviceNotReadyDialog.hide(),this.canShowServiceReadyDialog=!0)}}),e.exports=t.default},"views/search_head_clustering/RestartButton":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("views/Base"),i=(r=a)&&r.__esModule?r:{default:r};t.default=i.default.extend({moduleId:e.i,render:function(){var e=this.compiledTemplate();return this.$el.html(e),this},events:{"click .rolling-restart-button":function(e){e.preventDefault(),this.model.controller.trigger("openRollingRestartConfirmationDialog")}},template:'<a href="#" class="btn rolling-restart-button"><%- _("Begin Rolling Restart").t() %></a>'}),e.exports=t.default},"views/search_head_clustering/RollingRestartConfirmationDialog":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=c(n("shim/jquery")),a=c(n("require/underscore")),i=c(n("views/shared/Modal")),l=c(n("views/shared/FlashMessages")),s=c(n("views/shared/waitspinner/Master")),o=c(n("shim/splunk.util")),u=c(n("views/search_head_clustering/components/RollingDialog/Master"));function c(e){return e&&e.__esModule?e:{default:e}}var d=o.default.sprintf('<a href="#" class="btn btn-primary modal-btn-primary pull-right restart-btn"> %s </a>',(0,a.default)("Restart").t());t.default=i.default.extend({moduleId:e.i,initialize:function(e){this.model=this.model||{},this.collection=this.collection||{},this.model.controller=e.controller,this.children.learnMoreLink=e.learnMoreLink,this.children.flashMessages=new l.default({model:[this.collection.entities]}),this.children.spinner=new s.default,this.children.spinner.$el.addClass("pull-right"),i.default.prototype.initialize.call(this,e),this.listenTo(this.model.controller,"rollingRestartInProgress",this.showRestartInProgress),this.listenTo(this.model.controller,"rollingRestartSuccess",this.showRestartSuccess),this.listenTo(this.model.controller,"rollingRestartError",this.showRestartError),this.listenTo(this.collection.entities,"serverValidated",this.checkServerValidated),this.children.searchableSwitchView=new u.default({model:e.workingModel})},events:r.default.extend({},i.default.prototype.events,{"click .restart-btn":function(e){e.preventDefault(),this.model.controller.trigger("beginRollingRestart")}}),checkServerValidated:function(e){e||((0,r.default)(".restart-warning-container").hide(),this.children.spinner.stop(),this.children.spinner.$el.hide(),this.showCancelButtons())},showCancelButtons:function(){this.$(i.default.FOOTER_SELECTOR+" .modal-btn-cancel").show(),this.$(i.default.HEADER_SELECTOR+" .close").show()},showRestartInProgress:function(){this.children.spinner.start(),this.children.spinner.$el.show(),this.$(".restart-progress-container").show(),this.$(".restart-warning-container").hide(),this.$(i.default.FOOTER_SELECTOR+" .btn").hide(),this.$(i.default.HEADER_SELECTOR+" .close").hide(),this.children.searchableSwitchView.$el.hide()},showRestartSuccess:function(){this.$(i.default.HEADER_SELECTOR+" .close").show(),this.$(".restart-success-container").show(),this.children.flashMessages.remove(),this.$(i.default.FOOTER_SELECTOR).append(i.default.BUTTON_CLOSE),this.children.spinner.stop(),this.children.spinner.$el.hide(),this.$(".restart-progress-container").hide()},showRestartError:function(e){this.$(i.default.HEADER_SELECTOR+" .close").show(),a.default.isUndefined(e)||a.default.isUndefined(e.msg)||(this.$(".restart-error-container").html(o.default.sprintf((0,a.default)('<i class="icon-error"></i> %s').t(),e.msg)),this.$(".restart-error-container").show(),this.children.flashMessages.remove(),this.$(i.default.FOOTER_SELECTOR).append(i.default.BUTTON_CLOSE)),this.children.spinner.stop(),this.children.spinner.$el.hide(),this.$(".restart-progress-container").hide()},render:function(){return this.$el.html(i.default.TEMPLATE),this.$(i.default.HEADER_TITLE_SELECTOR).html(a.default.escape((0,a.default)("Rolling Restart").t())),this.$(i.default.BODY_SELECTOR).append((0,a.default)(this.bodyTemplate).template({learnMoreLink:this.children.learnMoreLink})),this.children.flashMessages.render().appendTo(this.$(".flash-messages-view-placeholder")),this.$(i.default.BODY_SELECTOR).append(this.children.searchableSwitchView.activate({deep:!0}).render().$el),this.$(i.default.FOOTER_SELECTOR).append(d),this.$(i.default.FOOTER_SELECTOR).append(i.default.BUTTON_CANCEL_PULL_RIGHT),this.$(i.default.FOOTER_SELECTOR).append(this.children.spinner.render().el),this.children.spinner.$el.hide(),this},bodyTemplate:'\n        <div class="flash-messages-view-placeholder" data-test="rolling-restart-error"></div>\n        <div class="restart-warning-container">\n            <p><i class="icon-alert"></i>\n            <%= _(\'Are you sure you want to initiate a rolling restart?             Doing so will cause a phased restart of all cluster members,            with possible short-term inconvenience to current users.\').t() %></p>\n            <a class="external" href="<%- learnMoreLink %>" target="_blank" rel="noopener noreferrer">\n                <%= _("Learn More").t() %>\n            </a>\n        </div>\n        <div class="restart-progress-container hide">\n            <p><%= _(\'The rolling restart of your            search head cluster is currently in progress.\').t()  %></p>\n        </div>\n        <div class="restart-success-container hide">\n            <p>\n                <i class="icon-check-circle"></i>\n                <%= _(\'Your search head cluster has successfully been restarted.\').t() %>\n            </p>\n        </div>\n        <div class="restart-error-container hide">\n            <p>\n                <i class="icon-error"></i>\n                <%= _(\'Searchable rolling restart cannot proceed due to health check failure.                 For failure details, run <code>splunk show shcluster-status --verbose</code> on any member.                 Fix this issue or use the force option to override health checks.                 Use the force option with caution as it might impact searches during rolling restart.\').t() %>\n            </p>\n        </div>\n    '}),e.exports=t.default},"views/search_head_clustering/ServiceNotReadyDialog":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("require/underscore")),a=s(n("views/shared/waitspinner/Master")),i=s(n("views/shared/Modal")),l=s(n("shim/splunk.util"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.extend({moduleId:e.i,initialize:function(e){this.children.spinner=new a.default,this.children.spinner.$el.addClass("pull-right"),this.statusResponse=e.statusResponse,i.default.prototype.initialize.call(this,e)},render:function(){this.$el.html(i.default.TEMPLATE),this.$(i.default.HEADER_TITLE_SELECTOR).html((0,r.default)("Search Head Clustering Service Not Ready").t());var e=l.default.sprintf("<p> %s </p>",(0,r.default)("Please wait, the status of your search head cluster is not ready.").t());if(this.$(i.default.BODY_SELECTOR).append(e),this.$(i.default.BUTTON_CLOSE_SELECTOR).remove(),this.statusResponse){var t=l.default.sprintf((0,r.default)("Service ready flag: %s").t(),this.statusResponse.serviceReady),n=l.default.sprintf((0,r.default)("Rolling restart in progress: %s").t(),this.statusResponse.serviceReady);this.$(i.default.BODY_SELECTOR).append("<p>"+t+"</p>"),this.$(i.default.BODY_SELECTOR).append("<p>"+n+"</p>")}return this.$(i.default.FOOTER_SELECTOR).append(this.children.spinner.render().el),this.children.spinner.start(),this.children.spinner.$el.show(),this}}),e.exports=t.default},"views/search_head_clustering/TransferCaptain.pcss":function(e,t,n){var r=n(2584);"string"==typeof r&&(r=[[e.i,r,""]]);var a={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,a);r.locals&&(e.exports=r.locals)},"views/search_head_clustering/TransferCaptainConfirmationDialog":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("require/underscore")),a=u(n("shim/jquery")),i=u(n("shim/splunk.util")),l=u(n("views/shared/FlashMessages")),s=u(n("views/shared/Modal")),o=u(n("views/shared/waitspinner/Master"));function u(e){return e&&e.__esModule?e:{default:e}}n("views/search_head_clustering/TransferCaptain.pcss");var c=i.default.sprintf('<a href="#" class="btn btn-primary modal-btn-primary pull-right transfer-captain-btn"> %s </a>',(0,r.default)("Start Transfer").t());t.default=s.default.extend({moduleId:e.i,initialize:function(e){if(this.model=this.model||{},this.targetCaptainName=e.targetCaptainName||"",this.collection=e.collection,this.model.controller=e.controller,this.children.learnMoreLink=e.learnMoreLink,!this.collection)throw new Error("this.collection is required");this.children.spinner=new o.default,this.children.spinner.$el.addClass("pull-right"),this.children.flashMessages=new l.default({model:[this.collection.entities]}),s.default.prototype.initialize.call(this,e),this.listenTo(this.collection.entities,"serverValidated",this.checkServerValidated),this.listenTo(this.model.controller,"showCaptainTransferSuccess",this.showTransferSuccess)},events:a.default.extend({},s.default.prototype.events,{"click .transfer-captain-btn":function(e){this.model.controller.trigger("beginTransferCaptaincy"),e.preventDefault(),this.showInProgress()}}),checkServerValidated:function(e){e||((0,a.default)(".captain-warning-container").hide(),this.children.spinner.stop(),this.children.spinner.$el.hide(),this.showCancelButtons())},showInProgress:function(){this.$(s.default.FOOTER_SELECTOR+" .btn").hide(),this.$(s.default.HEADER_SELECTOR+" .close").hide(),this.children.spinner.start(),this.children.spinner.$el.show()},showTransferSuccess:function(){this.children.spinner.stop(),this.children.spinner.$el.hide(),this.$(".captain-warning-container").hide(),this.$(s.default.FOOTER_SELECTOR).append(s.default.BUTTON_CLOSE),this.$(".captain-success-container").show(),this.$(s.default.HEADER_SELECTOR+" .close").show()},showCancelButtons:function(){this.$(s.default.FOOTER_SELECTOR+" .modal-btn-cancel").show(),this.$(s.default.HEADER_SELECTOR+" .close").show()},render:function(){this.$el.html(s.default.TEMPLATE),this.$(s.default.HEADER_TITLE_SELECTOR).html((0,r.default)("Transfer Captain").t());var e=this.targetCaptainName;return this.$(s.default.BODY_SELECTOR).append(this.children.flashMessages.render().el),this.$(s.default.BODY_SELECTOR).append((0,r.default)(this.bodyTemplate).template({learnMoreLink:this.children.learnMoreLink,linkClass:"external learn-more-link",targetCaptainName:e})),this.$(s.default.FOOTER_SELECTOR).append(c),this.$(s.default.FOOTER_SELECTOR).append(s.default.BUTTON_CANCEL_PULL_RIGHT),this.$(s.default.FOOTER_SELECTOR).append(this.children.spinner.render().el),this.children.spinner.$el.hide(),this},bodyTemplate:'\n        <div class="flash-messages-view-placeholder"></div>\n        <div class="captain-warning-container">\n            <p>\n                <i class="icon-alert"></i>\n                <%= _("Here are some details about what will happen if you choose to continue.").t() %>\n                <a class="<%- linkClass %>" href="<%- learnMoreLink %>" target="_blank" rel="noopener noreferrer">\n                    <%= _("Learn More").t() %>\n                </a>\n            </p>\n            <p><%= _("Are you sure you want to transfer captain to").t() %> <b><%= targetCaptainName %>?</b></p>\n        </div>\n\n        <div class="captain-success-container hide">\n            <p><i class="icon-check-circle"></i> <%= _("Captain transferred successfully.").t() %> </p>\n        </div>\n    '}),e.exports=t.default},"views/search_head_clustering/components/GridRow/ActionMenu":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(15)),a=g(n(16)),i=g(n(17)),l=g(n(20)),s=g(n(21)),o=n(0),u=g(o),c=n(3),d=g(n(19)),h=g(n(4)),f=g(n(68)),p=g(n(69)),m=n("util/test_support");function g(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){(0,a.default)(this,t);var n=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["onCaptainSelect","onManualDetention"].forEach((function(e){n[e]=n[e].bind(n)})),n}return(0,s.default)(t,e),(0,i.default)(t,[{key:"onCaptainSelect",value:function(){this.props.model.controller.trigger("openCaptainConfirmationDialog",{targetMember:this.props.model.entity})}},{key:"onManualDetention",value:function(){this.props.model.controller.trigger("openManualDetentionDialog",{targetMember:this.props.model.entity})}},{key:"render",value:function(){var e=void 0;return!1===this.props.model.entity.entry.content.get("is_captain")&&(e=u.default.createElement(p.default.Item,(0,r.default)({},(0,m.createTestHook)(null,"transferCaptainButton"),{onClick:this.onCaptainSelect}),(0,c._)("Transfer Captain"))),u.default.createElement(f.default,{toggle:u.default.createElement(d.default,{label:"actions",appearance:"pill",isMenu:!0})},u.default.createElement(p.default,{style:{width:140}},u.default.createElement(p.default.Item,(0,r.default)({},(0,m.createTestHook)(null,"manualDetentionButton"),{onClick:this.onManualDetention}),(0,c._)("Manual Detention")),e))}}]),t}(o.Component);_.propTypes={model:h.default.object.isRequired},t.default=_,e.exports=t.default},"views/search_head_clustering/components/GridRow/ActionMenuContainer":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(16)),a=d(n(17)),i=d(n(20)),l=d(n(21)),s=n(0),o=d(s),u=d(n(4)),c=d(n("views/search_head_clustering/components/GridRow/ActionMenu"));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e,n){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.model=a.context.model,a}return(0,l.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return o.default.createElement(c.default,{model:this.model})}}]),t}(s.Component);h.contextTypes={model:u.default.object},t.default=h,e.exports=t.default},"views/search_head_clustering/components/GridRow/Master":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),a=s(n("views/ReactAdapterBase")),i=s(n("dashboard/components/shared/BackboneProvider")),l=s(n("views/search_head_clustering/components/GridRow/ActionMenuContainer"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend({moduleId:e.i,initialize:function(e){a.default.prototype.initialize.apply(this,e)},getComponent:function(){return r.default.createElement(i.default,{store:{},model:this.options.model},r.default.createElement(l.default,null))}}),e.exports=t.default},"views/search_head_clustering/components/ManualDetention/ManualDetentionDialog":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=w(n(16)),a=w(n(17)),i=w(n(20)),l=w(n(21)),s=n(0),o=w(s),u=w(n("shim/jquery")),c=n(3),d=n(11),h=w(n(19)),f=n(28),p=w(n(27)),m=w(n(34)),g=w(n(66)),_=w(n(26)),v=w(n(4)),y=w(n("views/search_head_clustering/components/ManualDetention/Switch"));function w(e){return e&&e.__esModule?e:{default:e}}var b=(0,f.createDocsURL)("learnmore.sh.detention"),R=o.default.createElement(p.default,{to:b,openInNewContext:!0},(0,c._)("Learn more")),C=function(e){function t(e){(0,r.default)(this,t);var n=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!!(0,d.has)(e,"open")&&e.open,memberName:(0,d.has)(e,"memberName")?e.memberName:"",mgmt_uri:(0,d.has)(e,"mgmt_uri")?e.mgmt_uri:"",initialSwitchValue:"on"===e.model.entry.content.get("manual_detention")?"off":"on",newSwitchValue:"on"===e.model.entry.content.get("manual_detention")?"off":"on",spinner:!1,submitBtn:!0,success:"",error:""},["onRequestClose","onSubmit","handleSwitchToggle"].forEach((function(e){n[e]=n[e].bind(n)})),n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"onRequestClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(){var e=this;this.setState({error:"",success:"",spinner:!0}),this.props.model.entry.content.set({mgmt_uri:this.state.mgmt_uri}),this.props.model.save().then(null,(function(t){200===t.status?e.props.collection.entities.model.captainInstance.pollServiceReady().then((function(){e.props.controller.trigger("refreshEntities"),e.setState({spinner:!1,success:(0,c._)("Manual detention request succeeded.")})})):e.setState({spinner:!1,error:(0,c._)("Error setting manual detention.")})}))}},{key:"handleSwitchToggle",value:function(e){this.state.initialSwitchValue!==e?this.setState({submitBtn:!1}):this.setState({submitBtn:!0})}},{key:"render",value:function(){var e=null;this.state.error&&(e=o.default.createElement(_.default,{fill:!0,type:"error"},this.state.error));var t=null,n=null,r=o.default.createElement(h.default,{disabled:this.state.submitBtn,appearance:"primary",onClick:this.onSubmit,label:(0,c._)("Submit"),id:"submitBtn"});return this.state.success&&((0,u.default)(".content").hide(),t=o.default.createElement(_.default,{fill:!0,type:"success"},this.state.success),r=null,n=o.default.createElement(h.default,{onClick:this.onRequestClose,label:(0,c._)("Close")})),o.default.createElement(m.default,{id:"ManualDetentionDialogModal",open:this.state.open,style:{width:"550px"}},o.default.createElement(m.default.Header,{title:(0,c._)("Manual Detention"),onRequestClose:this.onRequestClose}),o.default.createElement(m.default.Body,null,e,t,o.default.createElement("div",{className:"content"},o.default.createElement(y.default,{model:this.props.model,handleSwitchToggle:this.handleSwitchToggle}),o.default.createElement("p",null,(0,c._)("Are you sure you want to turn "+this.state.newSwitchValue+" manual detention for "),o.default.createElement("b",null,this.state.memberName)),o.default.createElement("p",null,o.default.createElement("i",{className:"icon-alert"}),(0,c._)("Here are some details about what will happen if you choose to continue. "),R))),o.default.createElement(m.default.Footer,null,this.state.spinner?o.default.createElement(g.default,{style:{margin:"0px 10px -3px 0px"}}):null,n,r))}}]),t}(s.Component);C.propTypes={mgmt_uri:v.default.string.isRequired,open:v.default.bool.isRequired,model:v.default.object.isRequired,controller:v.default.object.isRequired,collection:v.default.object.isRequired,memberName:v.default.string.isRequired},t.default=C,e.exports=t.default},"views/search_head_clustering/components/ManualDetention/Master":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),a=s(n("views/ReactAdapterBase")),i=s(n("dashboard/components/shared/BackboneProvider")),l=s(n("views/search_head_clustering/components/ManualDetention/ManualDetentionDialog"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend({moduleId:e.i,initialize:function(e){a.default.prototype.initialize.apply(this,e)},getComponent:function(){return r.default.createElement(i.default,{store:{}},r.default.createElement(l.default,{open:this.options.open,model:this.options.model,memberName:this.options.memberName,controller:this.options.controller,collection:this.options.collection,mgmt_uri:this.options.mgmt_uri}))}}),e.exports=t.default},"views/search_head_clustering/components/ManualDetention/Switch":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(73)),a=m(n(16)),i=m(n(17)),l=m(n(20)),s=m(n(21)),o=n(0),u=m(o),c=m(n(4)),d=n(3),h=n(11),f=m(n(23)),p=m(n(38));function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e,n){(0,a.default)(this,t);var i=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.handleClick=function(e,t){var n=t.value,a=(0,h.extend)({},i.state,(0,r.default)({},n,!i.state[n]));i.setState(a,(function(){i.props.model.entry.content.set({manual_detention:!0===i.state.manual_detention?"on":"off"})})),i.props.handleSwitchToggle(i.props.model.entry.content.get("manual_detention"))},i.state={manual_detention:"on"===e.model.entry.content.get("manual_detention")},i}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return u.default.createElement(f.default,{label:(0,d._)("Manual Detention")},u.default.createElement(p.default,{value:"manual_detention",onClick:this.handleClick,selected:this.state.manual_detention,appearance:"toggle"}))}}]),t}(o.Component);g.propTypes={handleSwitchToggle:c.default.func.isRequired,model:c.default.object.isRequired},t.default=g,e.exports=t.default},"views/search_head_clustering/components/RollingDialog/Master":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),a=s(n("views/ReactAdapterBase")),i=s(n("dashboard/components/shared/BackboneProvider")),l=s(n("views/search_head_clustering/components/RollingDialog/SearchableSwitchContainer"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend({moduleId:e.i,initialize:function(e){a.default.prototype.initialize.apply(this,e)},getComponent:function(){return r.default.createElement(i.default,{store:{},model:this.options.model},r.default.createElement(l.default,null))}}),e.exports=t.default},"views/search_head_clustering/components/RollingDialog/SearchableSwitch":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(15)),a=g(n(73)),i=g(n(16)),l=g(n(17)),s=g(n(20)),o=g(n(21)),u=n(0),c=g(u),d=g(n(4)),h=g(n("require/underscore")),f=g(n(23)),p=g(n(38)),m=n("util/test_support");function g(e){return e&&e.__esModule?e:{default:e}}var _=function(t){function n(e,t){(0,i.default)(this,n);var r=(0,s.default)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.handleClick=function(e,t){var n=t.value,i=h.default.extend({},r.state,(0,a.default)({},n,!r.state[n]));i.force=!0===i.searchable&&i.force,r.setState(i),r.props.onAttributeChange(i)},r.state={searchable:!!h.default.has(e.content,"searchable")&&e.content.searchable,force:!!h.default.has(e.content,"force")&&e.content.force},r}return(0,o.default)(n,t),(0,l.default)(n,[{key:"render",value:function(){return c.default.createElement("div",(0,m.createTestHook)(e.i),c.default.createElement(f.default,(0,r.default)({label:(0,h.default)("Searchable").t(),help:(0,h.default)("Restart search head cluster members with minimal search interruption.").t()},(0,m.createTestHook)(null,"searchable-control-group")),c.default.createElement(p.default,{value:"searchable","data-label":"searchable-switch",onClick:this.handleClick,selected:this.state.searchable,appearance:"toggle"})),!0===this.state.searchable?c.default.createElement(f.default,(0,r.default)({label:(0,h.default)("Force").t(),help:(0,h.default)("Restart search head cluster members despite unhealthy search head cluster.").t()},(0,m.createTestHook)(null,"force-control-group")),c.default.createElement(p.default,{value:"force","data-label":"force-switch",onClick:this.handleClick,selected:this.state.force,appearance:"checkbox"})):null)}}]),n}(u.Component);_.propTypes={content:d.default.object.isRequired,onAttributeChange:d.default.func.isRequired},t.default=_,e.exports=t.default},"views/search_head_clustering/components/RollingDialog/SearchableSwitchContainer":function(e,t,n){"use strict";n(2),Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(16)),a=d(n(17)),i=d(n(20)),l=d(n(21)),s=n(0),o=d(s),u=d(n(4)),c=d(n("views/search_head_clustering/components/RollingDialog/SearchableSwitch"));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e,n){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.model=a.context.model,a.handleAttributeChange=a.handleAttributeChange.bind(a),a}return(0,l.default)(t,e),(0,a.default)(t,[{key:"handleAttributeChange",value:function(e){var t=e.searchable,n=e.force;this.model.set("searchable",t),this.model.set("force",n)}},{key:"render",value:function(){var e=this.model.toJSON();return o.default.createElement(c.default,{content:e,onAttributeChange:this.handleAttributeChange})}}]),t}(s.Component);h.contextTypes={model:u.default.object},t.default=h,e.exports=t.default}});