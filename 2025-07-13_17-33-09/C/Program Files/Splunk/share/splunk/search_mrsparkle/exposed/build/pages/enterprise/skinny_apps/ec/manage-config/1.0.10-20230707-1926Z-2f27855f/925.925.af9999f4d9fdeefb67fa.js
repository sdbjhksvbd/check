/*! For license information please see 925.925.af9999f4d9fdeefb67fa.js.LICENSE.txt */
(self.webpackChunkremote_manage_config_page=self.webpackChunkremote_manage_config_page||[]).push([[925],{80091:(e,t,n)=>{(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{IForm:()=>r.IForm,IFormData:()=>r.IFormData,IProps:()=>r.IProps,IStanza:()=>r.IStanza,IStanzaField:()=>r.IStanzaField,default:()=>D});var r={};t.r(r);const s=n(12650);var o=t.n(s);const i=n(6472),c={integer:["minimum","maximum"],number:["minimum","maximum"],string:["minLength","maxLength"]},l=e=>{const t={type:"object",properties:{}};return e.stanzas&&0!==e.stanzas.length?(e.stanzas.forEach((({fields:e=[],keyName:n})=>{const a={type:"object",properties:{},required:[]};e.forEach((e=>{const t=e.keyName;a.properties[t]=(e=>{const t={type:e.dataType};return(c[e.dataType]||[]).forEach((n=>{(({sourceObj:e,targetObj:t,keyName:n})=>{n in e&&(t[n]=e[n])})({sourceObj:e,targetObj:t,keyName:n})})),t.description=(e=>{const t=[];return"defaultValue"in e&&t.push("Default: "+e.defaultValue),"integer"!==e.dataType&&"number"!==e.dataType||("minimum"in e&&t.push("Min: "+e.minimum),"maximum"in e&&t.push("Max: "+e.maximum)),e.shortDescription&&t.push(e.shortDescription),t.join("; ")})(e)+"\n\n"+(e=>e.longDescription?e.longDescription.map((e=>"* "+e)).join("\n"):"")(e),t})(e),e.isRequired&&a.required.push(t)})),t.properties[n]=a})),t):t},m="/properties",u=e=>{const t={type:"VerticalLayout",elements:[]};return e.stanzas&&0!==e.stanzas.length?(e.stanzas.forEach((e=>{const n={type:"VerticalLayout",elements:[(a=e.displayLabel,{text:a,type:"Label"})]};var a;const r=e.fields||[],s="#"+m+"/"+e.keyName;r.forEach((e=>{n.elements.push((({keyName:e,displayLabel:t="Field"},n)=>({type:"Control",label:t,scope:""+n+m+"/"+e,options:{suiControlGroupProps:{labelWidth:"170px",style:{maxWidth:"900px"}},suiComponentProps:{hideStepButtons:!0}}}))(e,s))})),t.elements.push(n)})),t):t},d=n(66206);var p=t.n(d);const E=n(47934);var h=t.n(E);const g=n(97212),T=n(2249),R={HEADER:"Header",LEARN_MORE_LINK:"LearnmoreLink"};(0,T.normalizeDataTestIds)({remoteAppName:"SUIFormRenderer",compName:"Header",testIds:R});const S=R,N=n(28655);var _=t.n(N);const f=n(97026);var A=t.n(f);const y=n(25947);var I;const O=A().div(I||(I=_()(["\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid ",";\n    padding: 0 20px 20px;\n    margin-bottom: 30px;\n"])),(0,y.pick)({enterprise:y.variables.borderColor,prisma:y.variables.neutral200})),L={COMMON:{WARNING:{WARNING:"Warning:",WARNING_TEXT:"Do not edit these settings unless you know what you are doing. A successful request message means that your edits have been submitted successfully, but setting changes can still take time to propagate."},LEARN_MORE:"Learn more"}};(0,T.localizeMessages)(L);const w=({docLocationString:e})=>o().createElement(O,{"data-test-name":S.HEADER},o().createElement(h(),null,o().createElement("b",null,L.COMMON.WARNING.WARNING)," ",L.COMMON.WARNING.WARNING_TEXT," ",o().createElement(p(),{to:(0,g.createDocsURL)(e),openInNewContext:!0,"data-test-name":S.LEARN_MORE_LINK},L.COMMON.LEARN_MORE)));var C,b;const k=A().div(C||(C=_()(["\n    display: flex;\n    justify-content: flex-end;\n    border-top: 1px solid ",";\n    padding: 20px;\n"])),(0,y.pick)({enterprise:y.variables.borderColor,prisma:y.variables.neutral200})),U=A().div(b||(b=_()(["\n    max-width: 960px;\n    padding: 30px 20px 20px 20px;\n    background-color: ",";\n    box-shadow: ",";\n    margin: 20px auto;\n    display: flex;\n    flex-direction: column;\n"])),(0,y.pick)({enterprise:y.variables.backgroundColor,prisma:y.variables.backgroundColorPopup}),y.variables.overlayShadow),D=function({formConfig:e,formData:t,onSubmit:n,docLocationString:a}){return o().createElement(i.SUIFormRendererCompound,null,o().createElement(w,{docLocationString:a}),o().createElement(U,null,o().createElement(i.SUIFormRendererCompound.ErrorView,null),o().createElement(i.SUIFormRendererCompound.Form,{data:t,schema:l(e),uischema:u(e)}),o().createElement(k,null,o().createElement(i.SUIFormRendererCompound.ActionButtons,{onSubmit:n,showSaveWarning:!0}))))};e.exports=a})()},31576:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var a=n(30168),r=n(12650),s=n.n(r),o=n(80091),i=n.n(o),c=n(6472),l=n(96486),m=n(95414),u=n.n(m),d=n(97026),p=n.n(d),E=n(72361),h=n(84711),g=(n(83361),n(85304)),T=n(39839),R=n(88100),S=n(16573),N=n(79674),_=n(25108);const f=[g.Z8.JOIN,g.Z8.KV,g.Z8.SUBSEARCH,g.Z8.SCHEDULER,g.Z8.SPATH,g.Z8.PDF,g.Z8.SEARCHRESULTS],A=[g.ne.SUBSEARCH_MAXOUT,g.ne.SUBSEARCH_MAXTIME],y=[g.pJ.LIMIT,g.pJ.MAXCHARS,g.pJ.MAXCOLS],I=[g.dg.MAXOUT,g.dg.MAXTIME],O=[g.IR.MAX_PER_RESULT_ALERTS,g.IR.MAX_PER_RESULT_ALERTS_TIME],L=[g.h6.EXTRACTION_CUTOFF],w=[g.NZ.MAX_ROWS_PER_TABLE],C=[g.cE.MAXRESULTROWS],b=new Map([[g.Z8.JOIN,A],[g.Z8.KV,y],[g.Z8.SUBSEARCH,I],[g.Z8.SCHEDULER,O],[g.Z8.SPATH,L],[g.Z8.PDF,w],[g.Z8.SEARCHRESULTS,C]]);async function k(e){if(200!==e.status&&202!==e.status){const t=await e.json();throw new Error(t.message)}try{return await e.json()}catch(e){throw new Error(e.message)}}const U=async e=>{const{stanza:t,settings:n}=e,a=JSON.stringify({settings:n});try{const e=await S.K.withJwtTokenRetry((()=>fetch((e=>S.K.getACSBaseURL()+"/limits/"+e)(t),{method:"post",headers:S.K.getACSHeaders(),body:a})));return await k(e)}catch(e){throw _.log(e),e}};let D=f.reduce(((e,t,n)=>(e[f[n]]={},e)),{});const v=async()=>{try{const e=await S.K.withJwtTokenRetry((()=>fetch(S.K.getACSBaseURL()+"/limits",{headers:S.K.getACSHeaders()}))),t=(e=>{const t={};return e.forEach((e=>{f.includes(e.Stanza)&&(t[e.Stanza]={},Object.keys(e.Values).forEach((n=>{b.get(e.Stanza).includes(n)&&(t[e.Stanza][n]=Number(e.Values[n]))})))})),t})(await k(e));return D=t,{records:D,error:[]}}catch(e){throw new Error(e.message)}};var Z=n(2249),M=n(66070);const x={CONTENT:"Content",WARNING:"Warning",CONTAINER:"Container",LEARN_MORE_LINK:"LearnmoreLink",WAITSPINNER:"Waitspinner",ERROR_MSG:"ErrorMessage"};(0,Z.normalizeDataTestIds)({remoteAppName:M.KH,compName:"LimitsConfig",testIds:x});const j=x;var H,P,K=n(82269);const B=p().div(H||(H=(0,a.Z)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 40px;\n    margin-bottom: 40px;\n"]))),F=p().div(P||(P=(0,a.Z)(["\n    margin-left: 25px;\n    margin-right: 25px;\n    margin-bottom: 25px;\n"]))),z=(0,l.flowRight)([(0,E.Nj)(["noah"]),(0,E.ao)(["cloud"]),(0,E.Bv)(["edit_limits_conf"])])((()=>{const[e,t]=(0,r.useState)(),[n,a]=(0,r.useState)({}),[o,m]=(0,r.useState)([]),[d,p]=(0,r.useState)(!0),[E,g]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=async()=>{t(await(async()=>{try{const e=await S.K.withJwtTokenRetry((()=>fetch(S.K.getACSBaseURL()+"/limits/defaults",{headers:S.K.getACSHeaders()})));return(e=>{const t={id:"limits-config",stanzas:[]};return e.forEach((e=>{if(f.includes(e.stanza)){const n={keyName:e.stanza,displayLabel:e.stanza,fields:[]};t.stanzas.push(n),e.settings.forEach((t=>{b.get(e.stanza).includes(t.setting)&&n.fields.push({keyName:t.setting,displayLabel:t.setting,dataType:"integer",defaultValue:t.defaultValue,minimum:t.minValue,maximum:t.maxValue,shortDescription:N.X.LIMITS_CONFIG.SHORT_DESCRIPTION[t.setting]||"",isRequired:!0})}))}})),t})(await k(e))}catch(e){throw new Error(e.message)}})())},n=async()=>{const{records:e,error:t}=await v();a(e),m(t)};(async()=>{try{await S.K.init("v2"),g(!0),await Promise.all([e(),n()])}catch(e){new Set([K.Z.STACK_ID_INVALID,K.Z.ACS_ENVIRONMENT_NOT_FOUND,K.Z.CANNOT_CREATE_JWT_TOKEN]).has(e.message)?(g(!0),m([N.X.USER_CONTEXT.ERRORS[e.message]])):e.message===K.Z.TOKEN_AUTH_DISABLED?g(!1):m([e.message])}finally{p(!1)}})()}),[]),s().createElement(s().Fragment,null,E&&!d&&s().createElement(s().Fragment,null,o.length>0&&s().createElement(F,null,s().createElement(c.Errors,{errorMessages:o})),!o.length&&s().createElement(i(),{formConfig:e,formData:n,onSubmit:async e=>{let{data:t,successCb:n,failureCb:r}=e;const{records:s,error:o=[]}=await(async e=>{const t=[],n={};let a=!1;for(let r=0;r<f.length;r+=1){const s=D[f[r]],o=e[f[r]],i=(0,l.omitBy)(o,((e,t)=>s[t]===e));(0,l.isEmpty)(i)?t.push(Promise.resolve({})):(a=!0,(0,l.set)(n,f[r]+".request.update",i.length),t.push(U({stanza:f[r],settings:i}).then((e=>((0,l.set)(n,f[r]+".response.updated",i.length),e))).catch((e=>((0,l.set)(n,f[r]+".response.updated",0),Promise.reject(e))))))}if(!a)return{};const r=await Promise.allSettled(t);R.TrackingService.trackEvent({type:"manageConfigPage.submitBtnClicked",data:n});const s=r.map((e=>"rejected"===e.status?""!==e.reason.message?e.reason.message:N.X.COMMON.DEFAULT_ERROR_MSG:""));if((0,T.Wl)(s).length){const e=[];s.forEach(((t,n)=>{""!==t&&e.push(f[n])})),R.TrackingService.trackEvent({type:"manageConfigPage.errorOnSubmit",data:{errorUseCases:e.join(", ")}});try{const{records:e}=await v();return D=e,{error:s}}catch(e){return{error:[e.message]}}}return D=e,{records:D}})(t);(s||o.length)&&(s&&a(s),o.length?r(function(e){void 0===e&&(e=[]);const t=[];return e.forEach(((e,n)=>{e&&t.push({key:f[n],value:(0,l.upperFirst)(e)})})),t}(o)):n())},docLocationString:"learnmore.limits_conf"})),!E&&!d&&s().createElement(h.Z,null),d&&s().createElement(B,{"data-test-name":j.WAITSPINNER},s().createElement(u(),{size:"medium"})))}))},72361:(e,t,n)=>{"use strict";n.d(t,{Bv:()=>h,Nj:()=>R,ZL:()=>T,ao:()=>g});var a,r=n(30168),s=n(12650),o=n.n(s),i=n(97026),c=n.n(i),l=n(95931),m=n(89217),u=n(68937),d=n(79674);const p=c().div(a||(a=(0,r.Z)(["\n    margin: 25px;\n"]))),E=e=>{let{msg:t="Error loading page"}=e;return o().createElement("h2",null,t)},h=function(e){return void 0===e&&(e=[]),t=>{const n=m.o.canReadPage(e);return e=>n?o().createElement(t,e):o().createElement(p,null,o().createElement(E,{msg:d.X.FILTER_HOC.ERRORS.RBAC_FILTER}))}},g=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(l.N.getSplunkInstanceType());return e=>n?o().createElement(t,e):o().createElement(p,null,o().createElement(E,{msg:d.X.FILTER_HOC.ERRORS.SPLUNK_ENV_FILTER}))}},T=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(l.N.getOS());return e=>n?o().createElement(t,e):o().createElement(p,null,o().createElement(E,{msg:d.X.FILTER_HOC.ERRORS.OS_FILTER}))}},R=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(u.D.getExperienceType());return e=>n?o().createElement(t,e):o().createElement(p,null,o().createElement(E,{msg:d.X.FILTER_HOC.ERRORS.SPLUNK_EXPERIENCE_FILTER}))}}},84711:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(30168),r=n(12650),s=n.n(r),o=n(76416),i=n.n(o),c=n(66206),l=n.n(c),m=n(47934),u=n.n(m),d=n(97212),p=n(97026),E=n.n(p),h=n(79674),g=n(2249),T=n(66070);const R={CONTAINER:"Container",LEARN_MORE_LINK:"LearnmoreLink",TOKEN_AUTH_BTN:"TokenAuthBtn"};(0,g.normalizeDataTestIds)({remoteAppName:T.KH,compName:"TokenAuthDisabled",testIds:R});const S=R;var N,_;const f=E().div(N||(N=(0,a.Z)(["\n    padding: 0px 20px 0;\n"]))),A=E()(l())(_||(_=(0,a.Z)(["\n    margin-left: 5px;\n"]))),y=()=>s().createElement(f,{"data-test-name":S.CONTAINER},s().createElement(u(),null,h.X.TOKEN_AUTH_DISABLED.PAGE_CONTENT,s().createElement(A,{to:(0,d.createDocsURL)(h.X.TOKEN_AUTH_DISABLED.TOKEN_AUTH_LEARN_MORE),openInNewContext:!0,"data-test-name":S.LEARN_MORE_LINK},h.X.COMMON.LEARN_MORE)),s().createElement(i(),{label:h.X.TOKEN_AUTH_DISABLED.TOKEN_AUTH_BTN_LABEL,appearance:"primary",to:(0,d.createURL)(h.X.TOKEN_AUTH_DISABLED.TOKEN_AUTH_URL),openInNewContext:!0,"data-test-name":S.TOKEN_AUTH_BTN}))},16573:(e,t,n)=>{"use strict";n.d(t,{K:()=>d});var a=n(4942),r=n(96486),s=n(17673),o=n(956),i=n(97212),c=n(89217),l=n(82269);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=new class{constructor(){(0,a.Z)(this,"isInitialized",!1),(0,a.Z)(this,"acsVersion","v1"),(0,a.Z)(this,"isTokenAuthDisabled",!1),(0,a.Z)(this,"jwtToken",""),(0,a.Z)(this,"stackID",""),(0,a.Z)(this,"acsBaseURL",""),(0,a.Z)(this,"checkIfTokenAuthIsEnabledURL",(0,i.createRESTURL)("admin/Token-auth/tokens_auth?output_mode=json")),(0,a.Z)(this,"createJWTTokenURL",(0,i.createRESTURL)("authorization/tokens?output_mode=json")),(0,a.Z)(this,"stackIDUrl",(0,i.createRESTURL)("properties/web/remoteUI?output_mode=json",{app:"100-whisper-searchhead"})),(0,a.Z)(this,"init",(async e=>{this.isInitialized||(this.acsVersion=e,await this.fetchIsTokenAuthDisabled(),await this.fetchStackID(),await this.createJwtToken(),await this.fetchACSEnv(),this.isInitialized=!0)})),(0,a.Z)(this,"getStackID",(()=>this.stackID)),(0,a.Z)(this,"getACSBaseURL",(()=>this.acsBaseURL)),(0,a.Z)(this,"getACSHeaders",(()=>new Headers({Authorization:"Bearer "+this.jwtToken,"Content-Type":"application/json","User-Agent":"Splunk-ACS-UI"}))),(0,a.Z)(this,"createJwtToken",(async()=>{const e={name:c.o.getCurrUsername(),expires_on:"+2m",audience:"IP_ALLOW_LIST_UI",type:"ephemeral"},t=u(u({},o.pX),{},{method:"POST",body:s.encode(e)});try{const e=await fetch(this.createJWTTokenURL,t),n=await(0,o._y)(201)(e);this.jwtToken=(0,r.get)(n,"entry[0].content.token","")}catch(e){throw new Error(l.Z.CANNOT_CREATE_JWT_TOKEN)}})),(0,a.Z)(this,"withJwtTokenRetry",(async e=>{const t=await e();return 401===t.status?(await this.createJwtToken(),e()):t})),(0,a.Z)(this,"fetchIsTokenAuthDisabled",(async()=>{try{const e=await fetch(this.checkIfTokenAuthIsEnabledURL,u({},o.pX)),t=await(0,o._y)(200)(e);if(this.isTokenAuthDisabled=(0,r.get)(t.entry[0],"content.disabled",!0),this.isTokenAuthDisabled)throw new Error(l.Z.TOKEN_AUTH_DISABLED)}catch(e){throw new Error(l.Z.TOKEN_AUTH_DISABLED)}})),(0,a.Z)(this,"fetchStackID",(async()=>{try{const e=await fetch(this.stackIDUrl,u({},o.pX)),t=(await(0,o._y)(200)(e)).entry.find((e=>"stack_id"===e.name));this.stackID=t.content}catch(e){throw new Error(l.Z.STACK_ID_INVALID)}})),(0,a.Z)(this,"fetchACSEnv",(async()=>{try{const e=this.formatACSBaseUrl("production"),t=this.formatACSBaseUrl("staging"),n="/status";if(200===(await fetch(e+n,{headers:this.getACSHeaders()})).status)return void(this.acsBaseURL=e);if(200===(await fetch(t+n,{headers:this.getACSHeaders()})).status)return void(this.acsBaseURL=t);throw new Error(l.Z.ACS_ENVIRONMENT_NOT_FOUND)}catch(e){throw new Error(l.Z.ACS_ENVIRONMENT_NOT_FOUND)}})),(0,a.Z)(this,"formatACSBaseUrl",(e=>"staging"===e?"https://staging.admin.splunk.com/"+this.stackID+"/adminconfig/"+this.acsVersion:"https://admin.splunk.com/"+this.stackID+"/adminconfig/"+this.acsVersion))}}},46115:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=925.925.af9999f4d9fdeefb67fa.js.map