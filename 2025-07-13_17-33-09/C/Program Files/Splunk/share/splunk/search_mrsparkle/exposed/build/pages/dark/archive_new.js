!function(e){function t(t){for(var r,s,l=t[0],a=t[1],d=t[2],h=0,u=[];h<l.length;h++)s=l[h],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&u.push(n[s][0]),n[s]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(c&&c(t);u.length;)u.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],r=!0,l=1;l<i.length;l++){var a=i[l];0!==n[a]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=i[0]))}return e}var r={},n={11:0},o=[];function s(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,r){i=n[e]=[t,r]}));t.push(i[2]=r);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=function(e){return s.p+""+({}[e]||e)+".js"}(e);var a=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(d);var i=n[e];if(0!==i){if(i){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}n[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=a;o.push([2e3,0]),i()}({2e3:function(e,t,i){var r,n;i.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,i,r="",n=0,o=arguments.length;n<o;n++)(i=(t=arguments[n].toString()).length)>1&&"/"==t.charAt(i-1)&&(t=t.substring(0,i-1)),"/"!=t.charAt(0)?r+="/"+t:r+=t;if("/"!=r){var s=r.split("/"),l=s[1];if("static"==l||"modules"==l){var a=r.substring(l.length+2,r.length);r="/"+l,window.$C.BUILD_NUMBER&&(r+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(r+="."+window.$C.BUILD_PUSH_NUMBER),"app"==s[2]&&(r+=":"+e("APP_BUILD",0)),r+="/"+a}}var d=e("MRSPARKLE_ROOT_PATH","/"),c=e("LOCALE","en-US"),h="/"+c+r;return""==d||"/"==d?h:d+h}("/static/build/pages/dark")+"/"}(),r=[i("routers/ArchiveNew"),i("util/router_utils")],void 0===(n=function(e,t){new e;t.start_backbone_history()}.apply(t,r))||(e.exports=n)},2002:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".shared-controls-syntheticcheckboxcontrol label.checkbox{padding:0}.index-acceptlist .checkbox,.index-acceptlist .control,.index-acceptlist .control-label,.index-acceptlist .controls,.index-recursive .checkbox,.index-recursive .control,.index-recursive .control-label,.index-recursive .controls{display:inline}.index-acceptlist .checkbox,.index-recursive .checkbox{margin-left:1em}.shared-dynamicfields .elements td{padding:5px}.key-text-control-placeholder .shared-controls-textcontrol{float:right}.shared-controls-keyvaluecontrol{margin-bottom:10px}.form-horizontal .control-label{width:300px}.form-horizontal .controls{margin-left:310px}.unified-search-cutoff-wrapper{display:inline-block}.unified-search-cutoff-wrapper .control-group .controls{margin-right:2px}.unified-search-cutoff-wrapper .control-group .controls label.checkbox{padding-left:22px}.unified-search-cutoff-wrapper .control-group .controls label.checkbox>.btn{left:0}",""])},"models/virtual_indexes/AddArchive":function(e,t,i){var r,n;r=[i("shim/jquery"),i("require/underscore"),i("models/Base"),i("shim/splunk.util")],void 0===(n=function(e,t,i,r){return i.extend({defaults:{originIndexes:void 0,suffix:"_archive",provider:void 0,outputDirectory:void 0,threshold:86400},validation:{originIndexes:{required:!0,msg:t("Splunk Indexes is a required field.").t()},suffix:{required:!0,msg:t("Archived Index Name Suffix is a required field.").t()},provider:{required:!0,msg:t("Destination Provider is a required field.").t()},outputDirectory:{required:!0,msg:t("Destination Path in HDFS is a required field.").t()},threshold:{min:1,msg:t("Older Than must be a number.").t()},cutoff:{min:1,msg:t("Cutoff Time must be a number.").t()}},initialize:function(e,t){i.prototype.initialize.call(this,e,t)},generateVixAttributes:function(){var e=this.get("originIndexes").split(","),i=[],r=this.get("suffix"),n=this.get("outputDirectory"),o=this.get("provider"),s=this.get("threshold"),l=this.get("cutoff");return"/"==n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),t(e).each((function(e){i.push({name:e+r,"vix.output.buckets.from.indexes":e,"vix.provider":o,"vix.output.buckets.path":n+"/"+e+r,"vix.output.buckets.older.than":s,"vix.validate.paths":1,"vix.unified.search.cutoff_sec":l})}),this),i}})}.apply(t,r))||(e.exports=n)},"routers/ArchiveNew":function(e,t,i){var r,n;r=[i("shim/jquery"),i("require/underscore"),i("routers/Base"),i("models/services/data/vix/Index"),i("models/services/configs/SearchLimit"),i("collections/services/data/vix/Archives"),i("collections/services/data/vix/Providers"),i("collections/services/data/Indexes"),i("views/virtual_indexes/config/ArchiveSetup")],void 0===(n=function(e,t,i,r,n,o,s,l,a){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.indexModel=new r,this.providersCollection=new s,this.splunkIndexes=new l,this.allArchives=new o,this.limits=new n},page:function(r,n,o){i.prototype.page.apply(this,arguments);var s=this.providersCollection.fetch();this.splunkIndexes.fetchData.set({count:-1,search:"isInternal=false AND isVirtual=false"},{silent:!0}),this.allArchives.fetchData.set({count:-1},{silent:!0});var l=this.splunkIndexes.fetch(),d=this.allArchives.fetch(),c=this.limits.fetch();this.setPageTitle(t("New Archive").t()),e.when(s,l,d,c,this.deferreds.pageViewRendered).done(t((function(){this.indexSetup=new a({model:{application:this.model.application,limits:this.limits},collection:{providers:this.providersCollection,allArchives:this.allArchives,splunkIndexes:this.splunkIndexes}}),this.addPageViewEl(this.pageView.el),this.pageView.$(".main-section-body").append(this.indexSetup.render().el)})).bind(this))}})}.apply(t,r))||(e.exports=n)},"views/virtual_indexes/config/ArchiveSetup":function(e,t,i){var r,n;r=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/Base"),i("models/virtual_indexes/AddArchive"),i("models/services/data/vix/Index"),i("views/Base"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/TextControl"),i("views/shared/controls/SyntheticCheckboxControl"),i("views/virtual_indexes/custom_controls/TimeSecondsControl"),i("views/virtual_indexes/custom_controls/OptionalTimeSecondsControl"),i("views/shared/FlashMessages"),i("views/shared/react/Multiselect"),i("uri/route"),i("util/string_utils"),i("util/splunkd_utils"),i("shim/splunk.util"),i("views/virtual_indexes/shared.pcss"),i("views/virtual_indexes/config/ArchiveSetup.pcss")],void 0===(n=function(e,t,i,r,n,o,s,l,a,d,c,h,u,p,f,v,m,x,g,b,w){return l.extend({moduleId:r.i,events:{"click .btn-primary":function(i){if(i.preventDefault(),this.model.addArchive.set({},{validate:!0})){var r=[],n=this.model.addArchive.generateVixAttributes(),o=n.length,l=0,a=e.Deferred(),d=e.Deferred();this.children.unifiedSearchCutoff.isEnabled()&&!this.model.limits.getUnifiedSearch()?(this.model.limits.entry.content.set({unified_search:1}),e.when(this.model.limits.save()).done(t((function(){d.resolve()})).bind(this))):d.resolve(),e.when(d).done(t((function(){t(n).each((function(t){var i=new s;this.children.flashMessages.register(i),i.entry.content.set(t),e.when(i.save()).done((function(){r.push(i.entry.content.get("vix.output.buckets.from.indexes")),0==--o&&a.resolve()})).fail((function(){l++,0==--o&&a.resolve()}))}),this)})).bind(this)),e.when(a).done(t((function(){if(l>0){var e=this.model.addArchive.get("originIndexes").split(",");e=t(e).difference(r),this.model.addArchive.set("originIndexes",e.join(",")),r.length>0&&this.children.flashMessages.flashMsgHelper.addGeneralMessage("__INDEXES_SAVED__",{type:x.INFO,html:t("Successfully saved archived indexes for these splunk indexes: "+r.join(", ")).t()})}else window.location.href=this._getVirtualIndexesRoute()})).bind(this))}},"click .cancel":function(e){e.preventDefault(),window.location.href=this._getVirtualIndexesRoute()}},initialize:function(){l.prototype.initialize.apply(this,arguments),this.model.addArchive=new o,this.createIndexesAutoComplete(),this.children.flashMessages=new p({model:this.model.addArchive}),this.originIndexControl=this.createMultiselectView(),this.children.originIndex=new a({className:"index-origin control-group",controls:[this.originIndexControl],label:t("Splunk Index(es)").t(),tooltip:t("You can add multiple Splunk Enterprise indexes, separated by commas").t()}),this.children.suffix=new a({className:"index-name control-group",controlType:"Text",controlOptions:{modelAttribute:"suffix",model:this.model.addArchive},label:t("Archived Index Name Suffix").t(),tooltip:t('The suffix that is appended to each index name, for example "_archive"').t()}),this.providerNames=this.collection.providers.map((function(e){return{label:e.entry.get("name"),value:e.entry.get("name")}})),this.children.provider=new a({className:"index-provider control-group",controlType:"SyntheticSelect",controlOptions:{modelAttribute:"provider",model:this.model.addArchive,items:this.providerNames,additionalClassNames:"view-count",menuWidth:"wide",maxLabelLength:80,toggleClassName:"btn",prompt:t("Select a Provider").t()},label:t("Destination Provider").t()}),this.children.archiveDirectory=new a({className:"index-path-hdfs control-group",controlType:"Text",controlOptions:{modelAttribute:"outputDirectory",model:this.model.addArchive},label:t("Destination Path in HDFS").t(),help:t("Examples: /home/data/archive/ or hdfs://namenode:8020/user/john/data/").t(),tooltip:t("Root Path where the archived buckets will be stored").t()}),this.timeThresholdControl=new h({modelAttribute:"threshold",model:this.model.addArchive}),this.children.timeThreshold=new a({className:"control-group",controls:[this.timeThresholdControl],label:t("Older Than").t(),tooltip:t("Age at which bucket data should be archived").t()});var e=t("Query against virtual index for events older than this value.").t(),i=v.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.unifiedsearch.about"),r=' <a href="'+i+'" class="doc" target="_blank" rel="noopener noreferrer">'+t("Learn More").t()+' <i class="icon-external"></i></a>';this.children.unifiedSearchCutoff=new u({enabled:!1,modelAttribute:"cutoff",model:this.model.addArchive,checkboxLabel:t("Enable Unified Search").t(),checkboxHelp:t("Unified Search may increase search runtime.").t(),timeLabel:t("Cutoff Time").t(),timeHelp:e+r})},handleChangedMultiselect:function(e,t){var i=t.values.join(",");this.model.addArchive.set("originIndexes",i)},createMultiselectView:function(){var e=this.indexesAutoComplete.map((function(e){return{value:e.text,label:e.text,key:e.id,disabled:e.disabled}})),t=this.model.addArchive.get("originIndexes")||"",i=""===t?void 0:t.split(",");return new f({children:e,props:{inline:!0,defaultValues:i,onChange:this.handleChangedMultiselect.bind(this),style:{width:"100%"}},stretchToFill:!0})},createIndexesAutoComplete:function(){var e=[];this.collection.allArchives.each((function(i){var r=i.entry.content.get("vix.output.buckets.from.indexes");(r=r.split(",")).length>1?e.push(r[0]):e=t.union(e,r)}),this);var i=this.collection.splunkIndexes.map((function(e){var t=e.entry.get("name");return{text:t,id:t,disabled:!1}}),this);t(e).each((function(e){var r=t(i).findWhere({id:e});if(t(r).isUndefined()){var n={text:e,id:e,disabled:!0},o=t(i).sortedIndex(n,"text");i.splice(o,0,n)}else r.disabled=!0}),this),this.indexesAutoComplete=i},managerRoute:function(e,t){return v.manager(this.model.application.get("root"),this.model.application.get("locale"),"system",e,t)},_getVirtualIndexesRoute:function(){return v.manager(this.model.application.get("root"),this.model.application.get("locale"),"system","virtual_indexes",{data:{t:"archives"}})},render:function(){return this.$el.html(this.compiledTemplate({managerRoute:this.managerRoute.bind(this)})),this.children.flashMessages.render().replaceAll(this.$(".flash-messages-placeholder")),this.children.originIndex.render().replaceAll(this.$(".select-indexes-placeholder")),this.children.suffix.render().replaceAll(this.$(".suffix-placeholder")),this.children.provider.render().replaceAll(this.$(".select-provider-placeholder")),this.children.archiveDirectory.render().replaceAll(this.$(".archive-directory-placeholder")),this.children.timeThreshold.render().replaceAll(this.$(".input-age-placeholder")),this.$(".unified-search-cutoff-wrapper").append(this.children.unifiedSearchCutoff.render().el),this},template:'                <div class="index-setup section-padded section-header">                    <div class="ManagerBar">                        <h2 class="ManagerPageTitle section-title">                                <%= _("Add Archived Indexes").t() %>                        </h2>                    <div class="breadcrumb section-description">                        <a href="<%- managerRoute("virtual_indexes", {data:{t: "archives"}}) %>"><%= _("Archives").t() %></a>Â»                            <%= _("Add new archived indexes").t() %>                    </div>                </div>                <div class="admin-content dashboard-panel clearfix">                    <div class="flash-messages-placeholder"></div>                    <div class="select-indexes-placeholder"></div>                    <div class="suffix-placeholder"></div>                    <div class="select-provider-placeholder"></div>                    <div class="archive-directory-placeholder"></div>                    <div class="input-age-placeholder"></div>                    <div class="unified-search-cutoff-wrapper"></div>                    <div class="button-wrapper">                        <a href="#" class="btn btn-primary pull-right"><%- _("Save").t() %></a>                        <a href="#" class="btn cancel btn-secondary pull-right"><%- _("Cancel").t() %></a>                    </div>                </div>            </div>'})}.apply(t,r))||(e.exports=n)},"views/virtual_indexes/config/ArchiveSetup.pcss":function(e,t,i){var r=i(2002);"string"==typeof r&&(r=[[e.i,r,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(r,n);r.locals&&(e.exports=r.locals)},"views/virtual_indexes/custom_controls/OptionalTimeSecondsControl":function(e,t,i){var r,n;r=[i("require/underscore"),i("models/Base"),i("views/Base"),i("views/shared/controls/Control"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/SyntheticCheckboxControl"),i("views/virtual_indexes/custom_controls/TimeSecondsControl"),e],void 0===(n=function(e,t,i,r,n,o,s,l){return r.extend({moduleId:l.i,initialize:function(){this.model.editCutoffSec=new t({enabled:this.options.enabled}),this.enableUnifiedCheckbox=new o({model:this.model.editCutoffSec,modelAttribute:"enabled",label:this.options.checkboxLabel}),this.children.enabledGroup=new n({controls:[this.enableUnifiedCheckbox],help:this.options.checkboxHelp}),this.listenTo(this.model.editCutoffSec,"change enabled",this.setTimeThresholdVisibility),this.unifiedSearchCutoffControl=new s({modelAttribute:this.options.modelAttribute,model:this.options.model}),this.children.timeCutoff=new n({className:"control-group",controls:[this.unifiedSearchCutoffControl],label:this.options.timeLabel,tooltip:this.options.timeTooltip,help:this.options.timeHelp})},setTimeThresholdVisibility:function(){this.model.editCutoffSec.get("enabled")?this.children.timeCutoff.enable():this.children.timeCutoff.disable()},isEnabled:function(){return this.model.editCutoffSec.get("enabled")},render:function(){return this.$el.append(this.children.enabledGroup.render().el),this.$el.append(this.children.timeCutoff.render().el),this.setTimeThresholdVisibility(),this}})}.apply(t,r))||(e.exports=n)}});