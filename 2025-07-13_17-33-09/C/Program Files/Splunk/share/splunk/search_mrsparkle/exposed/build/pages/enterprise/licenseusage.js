!function(e){function t(t){for(var n,r,o=t[0],l=t[1],d=t[2],h=0,u=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);u.length;)u.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},s={53:0},a=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[],i=s[e];if(0!==i)if(i)t.push(i[2]);else{var n=new Promise((function(t,n){i=s[e]=[t,n]}));t.push(i[2]=n);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.src=function(e){return r.p+""+({}[e]||e)+".js"}(e);var l=new Error;a=function(t){o.onerror=o.onload=null,clearTimeout(d);var i=s[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,i[1](l)}s[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;a.push([2539,0]),i()}({2539:function(e,t,i){var n,s;i.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,i,n="",s=0,a=arguments.length;s<a;s++)(i=(t=arguments[s].toString()).length)>1&&"/"==t.charAt(i-1)&&(t=t.substring(0,i-1)),"/"!=t.charAt(0)?n+="/"+t:n+=t;if("/"!=n){var r=n.split("/"),o=r[1];if("static"==o||"modules"==o){var l=n.substring(o.length+2,n.length);n="/"+o,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==r[2]&&(n+=":"+e("APP_BUILD",0)),n+="/"+l}}var d=e("MRSPARKLE_ROOT_PATH","/"),c=e("LOCALE","en-US"),h="/"+c+n;return""==d||"/"==d?h:d+h}("/static/build/pages/enterprise")+"/"}(),n=[i("licenseusage")],void 0===(s=function(){}.apply(t,n))||(e.exports=s)},326:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.repeat=function(e,t){return new Array(t+1).join(e)},s=t.pad=function(e,t){return n("0",t-e.toString().length)+e};t.formatTime=function(e){return s(e.getHours(),2)+":"+s(e.getMinutes(),2)+":"+s(e.getSeconds(),2)+"."+s(e.getMilliseconds(),3)},t.timer="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date},611:function(e,t,i){(t=e.exports=i(5)(!1)).push([e.i,".exportButtonContainer---pages-enterprise---dev---1hEZN{display:inline-block}.thirdGroup---pages-enterprise---dev---1Tc-V li>a,.thirdGroup---pages-enterprise---dev---1Tc-V li>a:hover{color:#dc4e41}.newLabel---pages-enterprise---dev---2JJJr{color:#006eaa;float:right;font-weight:500;letter-spacing:1px;padding-right:5px}",""]),t.locals={exportButtonContainer:"exportButtonContainer---pages-enterprise---dev---1hEZN",thirdGroup:"thirdGroup---pages-enterprise---dev---1Tc-V",newLabel:"newLabel---pages-enterprise---dev---2JJJr"}},612:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".fieldset{margin-bottom:15px}.fieldset:empty{margin-bottom:0}.fieldset:after,.fieldset:before{content:\"\";display:table;line-height:0}.fieldset:after{clear:both}.fieldset .form-submit{padding-top:25px}.fieldset .element,.fieldset .form-submit,.fieldset .input{display:inline-block;margin-right:10px;vertical-align:top}.fieldset .input{width:220px}.fieldset.hide-label>.input>label{display:none}.fieldset.hide-label .form-submit{padding-top:0}.edit-mode .fieldset.empty:not(.editable),.view-mode .fieldset:empty{display:none}.edit-mode .fieldset{padding-top:0}.edit-mode .fieldset .input{border-right:1px dotted #c3cbd4;min-height:83px;padding-bottom:0;padding-right:14px;padding-top:10px}.edit-mode .fieldset .input.ui-sortable-helper{background:#fff;border-radius:4px;border-right:1px solid transparent;-webkit-box-shadow:2px 2px 5px rgba(0,0,0,.2);box-shadow:2px 2px 5px rgba(0,0,0,.2);padding-left:14px}.edit-mode .fieldset .input.ui-sortable-placeholder{padding:10px 14px 5px 0}.edit-mode .fieldset .input.ui-sortable-placeholder .placeholder-inner{border:1px dashed #c3cbd4;border-radius:4px;height:60px}.edit-mode .fieldset .input:last-child{border-right:1px solid transparent}.edit-mode .fieldset .input .drag-handle{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' width='4' height='4'%3E%3Cpath fill='%23818D99' d='M0 0h2v2H0z'/%3E%3C/svg%3E\");cursor:move;height:8px;margin:0 0 5px;width:186px;z-index:3}.edit-mode .fieldset .edit-dropdown{float:right}.edit-mode .fieldset .edit-dropdown:after,.edit-mode .fieldset .edit-dropdown:before{content:\"\";display:table;line-height:0}.edit-mode .fieldset .edit-dropdown:after{clear:both}.edit-mode .fieldset .edit-dropdown{margin-top:-4px;z-index:2}.edit-mode .fieldset .edit-dropdown a{color:#5c6773;display:inline-block;font-size:17px;padding-left:6px}.edit-mode .fieldset .edit-dropdown a:hover{color:#5c6773}.edit-mode .fieldset .form-submit{padding-top:48px}.edit-mode .fieldset label.global-trp{color:#6b7785}.fieldset{min-height:50px}.fieldset.hide-label{min-height:27px}.dashboard-panel .fieldset{margin-bottom:0;min-height:20px;padding:10px 12px}",""])},613:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".run-search.disabled{color:#c3cbd4}.shared-searchbarinput{margin-bottom:8px}",""])},618:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".untitled .show-global-filters{font-style:normal;margin-left:0}.show-global-filters{font-size:12px;font-weight:500;margin-left:10px}",""])},619:function(e,t,i){(t=e.exports=i(5)(!1)).push([e.i,".fullWidth---pages-enterprise---dev---2F2Qh{width:100%}",""]),t.locals={fullWidth:"fullWidth---pages-enterprise---dev---2F2Qh"}},620:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".edit-mode .dashboard-messages{border-top:1px solid #c3cbd4}.dashboard-messages{margin:0 -20px}",""])},621:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".static-options-footer{margin-bottom:10px;padding-left:21px}.static-options-footer i.icon-plus{padding-right:5px}.input-editor-body .input-editor-format .splunk-timerange.splunk-view{width:200px}.input-editor-body .input-editor-format .splunkjs-mvc-simpleform-edit-dynamicoptionscontrol .inline-search-options .splunk-timerange.splunk-view{margin-left:135px}.input-editor-body .input-editor-format .shared-controls-syntheticradiocontrol{width:200px}.popdown-dialog.dashboard-form-input-editor-popdown{z-index:1050}",""])},622:function(e,t,i){"use strict";function n(e){return function(t){var i=t.dispatch,n=t.getState;return function(t){return function(s){return"function"==typeof s?s(i,n,e):t(s)}}}}i.r(t);var s=n();s.withExtraArgument=n,t.default=s},623:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.defaults=void 0;var n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a=i(624),r=i(326),o=i(627),l=(n=o)&&n.__esModule?n:{default:n};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s({},l.default,e),i=t.logger,n=t.transformer,o=t.stateTransformer,d=t.errorTransformer,c=t.predicate,h=t.logErrors,u=t.diffPredicate;if(void 0===i)return function(){return function(e){return function(t){return e(t)}}};if(n&&console.error("Option 'transformer' is deprecated, use 'stateTransformer' instead!"),e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n\n\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\n\nconst logger = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var p=[];return function(e){var i=e.getState;return function(e){return function(n){if("function"==typeof c&&!c(i,n))return e(n);var l={};p.push(l),l.started=r.timer.now(),l.startedTime=new Date,l.prevState=o(i()),l.action=n;var m=void 0;if(h)try{m=e(n)}catch(e){l.error=d(e)}else m=e(n);l.took=r.timer.now()-l.started,l.nextState=o(i());var g=t.diff&&"function"==typeof u?u(i,n):t.diff;if((0,a.printBuffer)(p,s({},t,{diff:g})),p.length=0,l.error)throw l.error;return m}}}}var c=d();t.defaults=l.default,t.logger=c,t.default=d,e.exports=t.default},624:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.printBuffer=function(e,t){var i=t.logger,n=t.actionTransformer,s=t.titleFormatter,r=void 0===s?function(e){var t=e.timestamp,i=e.duration;return function(e,n,s){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+n),i&&a.push("%c(in "+s.toFixed(2)+" ms)"),a.join(" ")}}(t):s,d=t.collapsed,c=t.colors,h=t.level,u=t.diff;e.forEach((function(s,p){var m=s.started,g=s.startedTime,f=s.action,v=s.prevState,b=s.error,y=s.took,_=s.nextState,w=e[p+1];w&&(_=w.prevState,y=w.started-m);var k=n(f),T="function"==typeof d?d((function(){return _}),f,s):d,S=(0,a.formatTime)(g),C=c.title?"color: "+c.title(k)+";":"",E=["color: gray; font-weight: lighter;"];E.push(C),t.timestamp&&E.push("color: gray; font-weight: lighter;"),t.duration&&E.push("color: gray; font-weight: lighter;");var R=r(k,S,y);try{T?c.title?i.groupCollapsed.apply(i,["%c "+R].concat(E)):i.groupCollapsed(R):c.title?i.group.apply(i,["%c "+R].concat(E)):i.group(R)}catch(e){i.log(R)}var x=l(h,k,[v],"prevState"),D=l(h,k,[k],"action"),M=l(h,k,[b,v],"error"),O=l(h,k,[_],"nextState");x&&(c.prevState?i[x]("%c prev state","color: "+c.prevState(v)+"; font-weight: bold",v):i[x]("prev state",v)),D&&(c.action?i[D]("%c action    ","color: "+c.action(k)+"; font-weight: bold",k):i[D]("action    ",k)),b&&M&&(c.error?i[M]("%c error     ","color: "+c.error(b,v)+"; font-weight: bold;",b):i[M]("error     ",b)),O&&(c.nextState?i[O]("%c next state","color: "+c.nextState(_)+"; font-weight: bold",_):i[O]("next state",_)),u&&(0,o.default)(v,_,i,T);try{i.groupEnd()}catch(e){i.log("â€”â€” log end â€”â€”")}}))};var s,a=i(326),r=i(625),o=(s=r)&&s.__esModule?s:{default:s};function l(e,t,i,s){switch(void 0===e?"undefined":n(e)){case"object":return"function"==typeof e[s]?e[s].apply(e,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(i)):e[s];case"function":return e(t);default:return e}}},625:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,n){var s=(0,a.default)(e,t);try{n?i.groupCollapsed("diff"):i.group("diff")}catch(e){i.log("diff")}s?s.forEach((function(e){var t=e.kind,n=function(e){var t=e.kind,i=e.path,n=e.lhs,s=e.rhs,a=e.index,r=e.item;switch(t){case"E":return[i.join("."),n,"â†’",s];case"N":return[i.join("."),s];case"D":return[i.join(".")];case"A":return[i.join(".")+"["+a+"]",r];default:return[]}}(e);i.log.apply(i,["%c "+r[t].text,o(t)].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(n)))})):i.log("â€”â€” no diff â€”â€”");try{i.groupEnd()}catch(e){i.log("â€”â€” diff end â€”â€” ")}};var n,s=i(626),a=(n=s)&&n.__esModule?n:{default:n};var r={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}};function o(e){return"color: "+r[e].color+"; font-weight: bold"}e.exports=t.default},626:function(e,t,i){(function(i){var n;
/*!
 * deep-diff.
 * Licensed under the MIT License.
 */!function(s,a){"use strict";void 0===(n=function(){return function(e){var t,n,s=[];t="object"==typeof i&&i?i:"undefined"!=typeof window?window:{};(n=t.DeepDiff)&&s.push((function(){void 0!==n&&t.DeepDiff===m&&(t.DeepDiff=n,n=e)}));function a(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,i){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:i,enumerable:!0})}function l(e,t){l.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function d(e,t){d.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function c(e,t,i){c.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:i,enumerable:!0})}function h(e,t,i){var n=e.slice((i||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":void 0!==e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function p(t,i,n,s,a,r,m){var g=(a=a||[]).slice(0);if(void 0!==r){if(s){if("function"==typeof s&&s(g,r))return;if("object"==typeof s){if(s.prefilter&&s.prefilter(g,r))return;if(s.normalize){var f=s.normalize(g,r,t,i);f&&(t=f[0],i=f[1])}}}g.push(r)}"regexp"===u(t)&&"regexp"===u(i)&&(t=t.toString(),i=i.toString());var v=typeof t,b=typeof i;if("undefined"===v)"undefined"!==b&&n(new l(g,i));else if("undefined"===b)n(new d(g,t));else if(u(t)!==u(i))n(new o(g,t,i));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(i)&&t-i!=0)n(new o(g,t,i));else if("object"===v&&null!==t&&null!==i){if((m=m||[]).indexOf(t)<0){if(m.push(t),Array.isArray(t)){var y;t.length;for(y=0;y<t.length;y++)y>=i.length?n(new c(g,y,new d(e,t[y]))):p(t[y],i[y],n,s,g,y,m);for(;y<i.length;)n(new c(g,y,new l(e,i[y++])))}else{var _=Object.keys(t),w=Object.keys(i);_.forEach((function(a,r){var o=w.indexOf(a);o>=0?(p(t[a],i[a],n,s,g,a,m),w=h(w,o)):p(t[a],e,n,s,g,a,m)})),w.forEach((function(t){p(e,i[t],n,s,g,t,m)}))}m.length=m.length-1}}else t!==i&&("number"===v&&isNaN(t)&&isNaN(i)||n(new o(g,t,i)))}function m(t,i,n,s){return s=s||[],p(t,i,(function(e){e&&s.push(e)}),n),s.length?s:e}function g(e,t,i){if(e&&t&&i&&i.kind){for(var n=e,s=-1,a=i.path?i.path.length-1:0;++s<a;)void 0===n[i.path[s]]&&(n[i.path[s]]="number"==typeof i.path[s]?[]:{}),n=n[i.path[s]];switch(i.kind){case"A":!function e(t,i,n){if(n.path&&n.path.length){var s,a=t[i],r=n.path.length-1;for(s=0;s<r;s++)a=a[n.path[s]];switch(n.kind){case"A":e(a[n.path[s]],n.index,n.item);break;case"D":delete a[n.path[s]];break;case"E":case"N":a[n.path[s]]=n.rhs}}else switch(n.kind){case"A":e(t[i],n.index,n.item);break;case"D":t=h(t,i);break;case"E":case"N":t[i]=n.rhs}return t}(i.path?n[i.path[s]]:n,i.index,i.item);break;case"D":delete n[i.path[s]];break;case"E":case"N":n[i.path[s]]=i.rhs}}}return a(o,r),a(l,r),a(d,r),a(c,r),Object.defineProperties(m,{diff:{value:m,enumerable:!0},observableDiff:{value:p,enumerable:!0},applyDiff:{value:function(e,t,i){if(e&&t){p(e,t,(function(n){i&&!i(e,t,n)||g(e,t,n)}))}},enumerable:!0},applyChange:{value:g,enumerable:!0},revertChange:{value:function(e,t,i){if(e&&t&&i&&i.kind){var n,s,a=e;for(s=i.path.length-1,n=0;n<s;n++)void 0===a[i.path[n]]&&(a[i.path[n]]={}),a=a[i.path[n]];switch(i.kind){case"A":!function e(t,i,n){if(n.path&&n.path.length){var s,a=t[i],r=n.path.length-1;for(s=0;s<r;s++)a=a[n.path[s]];switch(n.kind){case"A":e(a[n.path[s]],n.index,n.item);break;case"D":case"E":a[n.path[s]]=n.lhs;break;case"N":delete a[n.path[s]]}}else switch(n.kind){case"A":e(t[i],n.index,n.item);break;case"D":case"E":t[i]=n.lhs;break;case"N":t=h(t,i)}return t}(a[i.path[n]],i.index,i.item);break;case"D":case"E":a[i.path[n]]=i.lhs;break;case"N":delete a[i.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==n},enumerable:!0},noConflict:{value:function(){return s&&(s.forEach((function(e){e()})),s=null),m},enumerable:!0}}),m}()}.apply(t,[]))||(e.exports=n)}()}).call(this,i(67))},627:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},e.exports=t.default},628:function(e,t,i){(t=e.exports=i(5)(!1)).push([e.i,".linkLabel---pages-enterprise---dev---1m361{font-size:12px;word-wrap:break-word;word-break:break-all}.padTopBottom---pages-enterprise---dev---1WMuL{padding-bottom:5px;padding-top:5px}",""]),t.locals={linkLabel:"linkLabel---pages-enterprise---dev---1m361",padTopBottom:"padTopBottom---pages-enterprise---dev---1WMuL"}},629:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".time-range-scope-select .dropdown-toggle{overflow:hidden;text-overflow:ellipsis}.timerange-control .time-label{margin-right:5px}",""])},630:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".modal.edit-search-string .content-wrapper{width:800px}.modal.edit-search-string .slide-area{width:1440px}.modal.edit-search-string .control-group.hide-time-range-picker{margin-bottom:0}.modal.edit-search-string .edit-search-form-main .controls .btn.timerange-control,.modal.edit-search-string .edit-search-form-main .controls .dropdown-toggle,.modal.edit-search-string .edit-search-form-main .controls .shared-controls-textcontrol{width:50%}",""])},631:function(e,t,i){(t=e.exports=i(5)(!1)).push([e.i,".flexContainer---pages-enterprise---dev---2FiTe{display:-webkit-box;display:-ms-flexbox;display:flex;padding-top:10px}",""]),t.locals={flexContainer:"flexContainer---pages-enterprise---dev---2FiTe"}},632:function(e,t,i){(t=e.exports=i(5)(!1)).push([e.i,".container---pages-enterprise---dev---2YJwX{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.flexGrow---pages-enterprise---dev---2iqF7{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}",""]),t.locals={container:"container---pages-enterprise---dev---2YJwX",flexGrow:"flexGrow---pages-enterprise---dev---2iqF7"}},634:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,"/*  */\n\n.splunk-paginator {\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    margin-bottom: 5px;\n    padding-left: 15px;\n}\n.splunk-paginator .disabled, .splunk-paginator .selected {\n    color: #999;\n    cursor: default;\n}\n.splunk-paginator a {\n    border: 1px solid transparent;\n    border-radius: 3px;\n    padding-left: 5px;\n    padding-right: 5px;\n    text-decoration: none;\n    min-width: 20px;\n    line-height: 20px;\n    display: inline-block;\n    text-align: center;\n}\n.splunk-paginator a.selected, .splunk-paginator a:hover {\n    background: #eee;\n}\n.splunk-paginator span {\n    padding-left: 5px;\n    padding-right: 5px;\n}\n.splunk-paginator a.disabled:hover {\n    background: none;\n}",""])},635:function(e,t,i){(t=e.exports=i(5)(!1)).push([e.i,".dashboardPanel---pages-enterprise---dev---1UN1T{background-color:#fff}",""]),t.locals={dashboardPanel:"dashboardPanel---pages-enterprise---dev---1UN1T"}},636:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".hide-label .hide-global-filters{padding-top:6px}.hide-global-filters{display:inline-block;font-size:12px;line-height:32px;margin-left:10px;margin-top:25px}",""])},"collections/shared/Times":function(e,t,i){var n,s;n=[i("collections/services/data/ui/Times"),i("require/underscore")],void 0===(s=function(e,t){return e.extend({},{createFromPresets:function(i,n){var s=[];t.isEmpty(i)||t.each(i,(function(e){var i=t.uniqueId("time_");s.push({name:i,id:i,links:{},author:"nobody",acl:{},content:e})})),t.isEmpty(n)||s.push({name:"settings",links:{},author:"nobody",acl:{},content:n});var a=new e;return a.setFromSplunkD({links:{create:"/services/data/ui/times/_new",_reload:"/services/data/ui/times/_reload"},origin:"",updated:"",generator:{},entry:s}),a}})}.apply(t,n))||(e.exports=s)},"controllers/dashboard/helpers/DrilldownStateConverter":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.getReportName=t.applyState=t.generateLinkToDashboard=t.createInitialState=void 0;var n=m(i(73)),s=m(i("require/underscore")),a=m(i("shim/splunk.util")),r=m(i("dashboard/DashboardFactory")),o=m(i("dashboard/manager/FormManager")),l=m(i("splunkjs/mvc/tokenutils")),d=i("controllers/dashboard/helpers/ReportModelHelper"),c=m(i("models/dashboard/DashboardElementReport")),h=i("dashboard/containers/editor/drilldown/search/timeRangeOptionNames"),u=i("dashboard/containers/editor/drilldown/drilldownNames"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i("controllers/dashboard/helpers/DrilldownTokens"));function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){try{var t=e.settings.get("events").find((function(e){return"drilldown"===e.type})),i=t.settings.conditions||[],n=s.default.filter(t.settings.actions,(function(e){return"link"===e.type})),a=s.default.filter(t.settings.actions,(function(e){return"set"===e.type||"unset"===e.type||"eval"===e.type})),r=0===i.length,o=0===n.length&&0===a.length,l=1===n.length&&0===a.length,d=0===n.length&&a.length>=1;return r&&(o||l||d)}catch(e){return!0}},f=function(e){return e?e.settings.get("events").find((function(e){return"drilldown"===e.type})):null},v=function(e){var t=(0,d.getDisabledDrilldownAttribute)(e.entry.content.toJSON());return s.default.find(t,(function(t,i){return e.entry.content.get(i)!==t}))},b=function(e,t){var i=e.report,n=e.managerReportContent,r=e.searchModel,d=o.default.getInputs().filter((function(e){return"time"===e.settings.get("type")})).map((function(e){return{label:a.default.sprintf((0,s.default)("Shared Time Picker (%s)").t(),e.settings.get("token")),value:e.settings.get("token")}})),c=function(e,t){var i=t?t.get("earliest_time"):e.get("dispatch.earliest_time"),n=t?t.get("latest_time"):e.get("dispatch.latest_time"),a=h.EXPLICIT_OPTION;s.default.isUndefined(i)&&s.default.isUndefined(n)||"$earliest$"===i&&"$latest$"===n?a=h.GLOBAL_OPTION:l.default.isToken(i)&&l.default.isToken(n)&&(a=h.TOKEN_OPTION);var r={activeTimeRangeOption:a};return a===h.EXPLICIT_OPTION?Object.assign({},r,{activeTimeRange:{earliest:i,latest:n}}):Object.assign({},r,{activeTimeRangeToken:{earliest:l.default.getTokenName(i),latest:l.default.getTokenName(n)}})}(n,r),u=Object.assign({options:[{label:(0,s.default)("Auto").t(),value:"default"},{label:(0,s.default)("Custom").t(),value:"custom"}],activeOption:"default",search:i.entry.content.get("search"),searchError:"",target:"_blank",rel:"noopener,noreferrer",extraTimeRangeOptions:d,activeTimeRange:{},activeTimeRangeToken:{},earliestTokenError:"",latestTokenError:""},c);try{var p=f(t).settings.actions.find((function(e){return"link"===e.type})),m=p.value.match(/^search\?q=([\s\S]*)&earliest=([\s\S]*)&latest=([\s\S]*)/),g=p.value.match(/^search\?q=(.*)/),v=void 0;if(m){try{v=decodeURIComponent(m[1])}catch(e){v=m[1]}var b=m[2],y=m[3],_=void 0,w=void 0,k=void 0;if(l.default.isToken(b)&&l.default.isToken(y)){var T=l.default.getTokenName(b),S=l.default.getTokenName(y),C=T.replace(/\.?earliest$/g,""),E=S.replace(/\.?latest$/g,"");C===E&&d.find((function(e){return e.value===C}))?_=C:(_="earliest"===T&&"latest"===S?h.GLOBAL_OPTION:h.TOKEN_OPTION,w={earliest:T,latest:S})}else _=h.EXPLICIT_OPTION,k={earliest:b,latest:y};return s.default.defaults({},{activeOption:"custom",target:p.target||"_self",search:v,activeTimeRangeOption:_,activeTimeRangeToken:w,activeTimeRange:k},u)}if(g){try{v=decodeURIComponent(g[1])}catch(e){v=g[1]}return s.default.defaults({},{activeOption:"custom",target:p.target||"_self",search:v,activeTimeRangeOption:h.EXPLICIT_OPTION,activeTimeRange:{earliest:"",latest:""}},u)}}catch(e){return u}return u},y=function(e){return/^\/app\/[^/]+\/\w+/.test(e)},_=function(e){var t=e.match(/^\/app\/([^/]+)\/\w+/);if(t)return t[1]},w=function(e){return/^(\/app\/[^/]+\/)?report\?s=.*/.test(e)},k=function(e){return/^https?:\/\//.test(e)},T=function(e){var t=void 0;t=y(e)?e.match(/^\/app\/[^/]+\/report\?s=(.+)/)[1]:e.slice(9);var i=decodeURIComponent(t),n=i.match(/^\/servicesNS\/[^/]+\/[^/]+\/saved\/searches\/(.*)/),s=void 0;s=n?n[1]:i;try{s=decodeURIComponent(s)}catch(e){}return s},S=function(e){return y(e)?e.match(/^\/app\/[^/]+\/(.*)/)[1]:e},C=function(e){return S(e).replace(/\?.*/,"")},E=function(e,t){var i,n={activeApp:e.application.get("app"),activeDashboard:"",params:[{key:"",value:""}],target:"_blank",rel:"noopener,noreferrer"};try{var r=f(t).settings.actions.find((function(e){return"link"===e.type}));if(function(e){return/^search\?q=.*/.test(e)}(i=r.value)||w(i)||k(i))return n;var o=function(e){var t=S(e).split("?")[1];if(!t)return[];var i=a.default.queryStringToProp(t);return s.default.map(i,(function(e,t){return{key:t,value:e}}))}(r.value);return s.default.defaults({},{activeApp:_(r.value),target:r.target||"_self",activeDashboard:C(r.value),params:s.default.isEmpty(o)?void 0:o},n)}catch(e){return n}},R=function(e,t){var i={activeApp:e.application.get("app"),activeReport:"",target:"_blank",rel:"noopener,noreferrer"};try{var n=f(t).settings.actions.find((function(e){return"link"===e.type}));return w(n.value)?s.default.defaults({},{activeApp:_(n.value),target:n.target||"_self",activeReport:T(n.value)},i):i}catch(e){return i}},x=function(e){var t={target:"_blank",rel:"noopener,noreferrer"};try{var i=f(e).settings.actions.find((function(e){return"link"===e.type}));try{i.value=decodeURIComponent(i.value)}catch(e){}return s.default.defaults({},{url:i.value,target:i.target},t)}catch(e){return t}},D=function(e){var t=[{type:"set",token:"",value:""}];try{var i=f(e).settings.actions.filter((function(e){return"set"===e.type||"eval"===e.type||"unset"===e.type}));return{items:i.length>0?i:t}}catch(e){return{items:t}}},M=function(e,t){var i=(0,d.getDrilldownPropertyValue)(e.report.entry.content.toJSON());return l.default.isToken(i)?i:v(e.report)?R(e,t).activeReport?u.LINK_TO_REPORT:function(e){return!!e.activeDashboard}(E(e,t))?u.LINK_TO_DASHBOARD:function(e){return k(e.url)}(x(t))?u.LINK_TO_CUSTOM_URL:function(e){return e.items.filter((function(e){return e.type&&e.token})).length>0}(D(t))?u.EDIT_TOKENS:u.LINK_TO_SEARCH:u.NO_DRILLDOWN},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.absolute,n=e.forms[u.LINK_TO_DASHBOARD],s=n.activeApp,a=n.activeDashboard,r=n.params;if(!a)return"";var o=r.filter((function(e){return!!e.key})).map((function(e){return e.key+"="+e.value})).join("&"),l=o?a+"?"+o:a;return s===e.splunkEnv.application.app&&!1===i?l:"/app/"+s+"/"+l},I=function(e,t,i){e.unset("evtmanagerid"),t.report.entry.content.unset("dashboard.element.evtmanagerid"),i&&i.dispose(),t.controller.trigger("edit:delete-drilldown",{eventManagerId:i?i.id:null,elementId:e.get("id")})};t.createInitialState=function(e){var t,i,s=e.model,a=e.eventManager;return{isSupported:g(a),isCustomViz:(i=s.report,"viz"===c.default.getVizType(i)),activeAction:M(s,a),forms:(t={},(0,n.default)(t,u.LINK_TO_SEARCH,b(s,a)),(0,n.default)(t,u.LINK_TO_DASHBOARD,E(s,a)),(0,n.default)(t,u.LINK_TO_REPORT,R(s,a)),(0,n.default)(t,u.LINK_TO_CUSTOM_URL,x(a)),(0,n.default)(t,u.EDIT_TOKENS,D(a)),t),elementEnv:{drilldownTokens:p.getTokens(s.report)},splunkEnv:{application:s.application.toJSON()}}},t.generateLinkToDashboard=O,t.applyState=function(e){var t,i=e.state,n=e.settings,a=e.model,o=e.eventManager;if(i.activeAction===u.NO_DRILLDOWN)(t=a.report).entry.content.set((0,d.getDisabledDrilldownAttribute)(t.entry.content.toJSON())),I(n,a,o);else{if(v(a.report)||function(e){e.entry.content.set((0,d.getEnabledDrilldownAttribute)(e.entry.content.toJSON()))}(a.report),i.activeAction===u.LINK_TO_SEARCH&&"default"===i.forms[u.LINK_TO_SEARCH].activeOption)return void I(n,a,o);var c=function(e){var t={type:"drilldown"},i=void 0,n=void 0,a=void 0;switch(e.activeAction){case u.LINK_TO_SEARCH:switch((i=e.forms[u.LINK_TO_SEARCH]).activeTimeRangeOption){case h.TOKEN_OPTION:n="$"+i.activeTimeRangeToken.earliest+"$",a="$"+i.activeTimeRangeToken.latest+"$";break;case h.EXPLICIT_OPTION:n=i.activeTimeRange.earliest,a=i.activeTimeRange.latest;break;case h.GLOBAL_OPTION:n="$earliest$",a="$latest$";break;default:n="$"+i.activeTimeRangeOption+".earliest$",a="$"+i.activeTimeRangeOption+".latest$"}try{var r=i.search,o=l.default.hasToken(r);r=encodeURIComponent(r),o&&(r=(r=r.replace(/%24/g,"$")).replace(/%7C(?=s|u|h|n)/g,"|")),i.search=r}catch(e){}Object.assign(t,{settings:{actions:[{target:i.target,type:"link",value:"search?q="+i.search+"&earliest="+n+"&latest="+a}]}});break;case u.LINK_TO_DASHBOARD:i=e.forms[u.LINK_TO_DASHBOARD],Object.assign(t,{settings:{actions:[{target:i.target,type:"link",value:encodeURI(O(e))}]}});break;case u.LINK_TO_REPORT:i=e.forms[u.LINK_TO_REPORT],Object.assign(t,{settings:{actions:[{target:i.target,type:"link",value:encodeURI("/app/"+i.activeApp+"/report?s="+i.activeReport)}]}});break;case u.LINK_TO_CUSTOM_URL:i=e.forms[u.LINK_TO_CUSTOM_URL],Object.assign(t,{settings:{actions:[{target:i.target,type:"link",value:i.url}]}});break;case u.EDIT_TOKENS:i=e.forms[u.EDIT_TOKENS],Object.assign(t,{settings:{actions:s.default.filter(i.items,(function(e){return e.type&&e.token}))}})}return{type:"event-manager",settings:{events:[t]}}}(i),p=null;o?(p=o).applySetting(c.settings):(p=r.default.getDefault().instantiate(c,{}),n.set("evtmanagerid",p.id)),a.controller.trigger("edit:drilldown",{eventManagerId:p.id,eventManager:p,elementId:n.get("id")})}},t.getReportName=T},"controllers/dashboard/helpers/DrilldownTokens":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.getTokens=t.customVizTokens=t.tableTokens=t.singleValueTokens=t.mapTokens=t.eventTokens=t.chartTokens=void 0;var n=r(i("require/underscore")),s=r(i("models/dashboard/DashboardElementReport")),a=i("controllers/dashboard/helpers/vizTypeNames");function r(e){return e&&e.__esModule?e:{default:e}}var o=t.chartTokens=[{token:"$click.name$",description:(0,n.default)("X-axis field or category name for the clicked location. Not available if the user clicks the chart legend.").t()},{token:"$click.value$",description:(0,n.default)("X-axis field or category value for the clicked location. Not available if the user clicks the chart legend.").t()},{token:"$click.name2$",description:(0,n.default)("Y-axis field or series name for the clicked location. Not available if the user clicks the chart legend.").t()},{token:"$click.value2$",description:(0,n.default)("Y-axis field or series value for the clicked location. Not available if the user clicks the chart legend.").t()},{token:"$row.<fieldname>$",description:(0,n.default)("Access any y-axis field value corresponding to the clicked location x-axis. Not available if the user clicks the chart legend.").t()},{token:"$row.<x-axis-name>$",description:(0,n.default)("Access any x-axis field value corresponding to the clicked location. Not available if the user clicks the chart legend.").t()},{token:"$earliest$",description:(0,n.default)("Earliest time for the clicked chart segment. If not applicable, uses the earliest time for the search.").t()},{token:"$latest$",description:(0,n.default)("Latest time for the clicked chart segment. If not applicable, uses the latest time for the search.").t()},{token:"$trellis.name$",description:(0,n.default)("Trellis layout split field name.").t()},{token:"$trellis.value$",description:(0,n.default)("Trellis layout split field value for the clicked segment.").t()},{token:"$trellis.split.<fieldname>$",description:(0,n.default)("Trellis layout aggregation or field value for the clicked visualization segment.").t()}],l=t.eventTokens=[{token:"$click.name$",description:(0,n.default)("Field name for the clicked element in the event list.").t()},{token:"$click.value$",description:(0,n.default)("Field value for the clicked element in the event list.").t()},{token:"$click.name2$",description:(0,n.default)("Identical to click.name.").t()},{token:"$click.value2$",description:(0,n.default)("Identical to click.value.").t()},{token:"$row.<fieldname>$",description:(0,n.default)("Access any field value in the clicked event.").t()},{token:"$earliest$",description:(0,n.default)("Earliest time for the clicked event. Equivalent to _time field value.").t()},{token:"$latest$",description:(0,n.default)("Latest time for the clicked event. Equivalent to one second after the _time field value.").t()}],d=t.mapTokens=[{token:"$click.name$",description:(0,n.default)("Field name for the clicked location. If multiple fields are associated with the location, uses the first field.").t()},{token:"$click.value$",description:(0,n.default)("Field value for the clicked location. If multiple fields are associated with the location, uses the first field.").t()},{token:"$click.name2$",description:(0,n.default)("Same as click.name.").t()},{token:"$click.value2$",description:(0,n.default)("Same as click.value.").t()},{token:"$click.lat.name$",description:(0,n.default)("For cluster maps: latitude field name for the clicked location.").t()},{token:"$click.lat.value$",description:(0,n.default)("For cluster maps: latitude field value for the clicked location.").t()},{token:"$click.lon.name$",description:(0,n.default)("For cluster maps: longitude field name for the clicked location.").t()},{token:"$click.lon.value$",description:(0,n.default)("For cluster maps: longitude field value for the clicked location.").t()},{token:"$click.bounds.<orientation>$",description:(0,n.default)("For cluster maps: south, west, north, or east outer boundary for the clicked location. For example, use $click.bounds.east$ to get the eastern outer boundary.").t()},{token:"$row.<fieldname>$",description:(0,n.default)("Access field values related to the clicked location. Check the Statistics tab for available fields.").t()},{token:"$earliest$",description:(0,n.default)("Earliest time for the search generating the map.").t()},{token:"$latest$",description:(0,n.default)("Latest time for the search generating the map.").t()},{token:"$trellis.name$",description:(0,n.default)("For choropleth maps: trellis layout split field name.").t()},{token:"$trellis.value$",description:(0,n.default)("For choropleth maps: trellis layout split field value for the clicked segment.").t()},{token:"$trellis.split.<fieldname>$",description:(0,n.default)("For choropleth maps: trellis layout aggregation or field value for the clicked visualization segment.").t()}],c=t.singleValueTokens=[{token:"$click.name$",description:(0,n.default)("Name of the field that the single value represents.").t()},{token:"$click.value$",description:(0,n.default)("Field value that the single value represents.").t()},{token:"$click.name2$",description:(0,n.default)("Same as click.name.").t()},{token:"$click.value2$",description:(0,n.default)("Same as click.value.").t()},{token:"$row.<fieldname>$",description:(0,n.default)("Access any field value from the Statistics table row for the single value.").t()},{token:"$earliest$",description:(0,n.default)("Earliest time of the search driving the single value visualization.").t()},{token:"$latest$",description:(0,n.default)("Latest time of the search driving the single value visualization.").t()},{token:"$trellis.name$",description:(0,n.default)("Trellis layout split field name.").t()},{token:"$trellis.value$",description:(0,n.default)("Trellis layout split field value for the clicked segment.").t()},{token:"$trellis.split.<fieldname>$",description:(0,n.default)("Trellis layout aggregation or field value for the clicked visualization segment.").t()}],h=t.tableTokens=[{token:"$click.name$",description:(0,n.default)("Leftmost field (column) name in the table.").t()},{token:"$click.value$",description:(0,n.default)("Leftmost field (column) value in the clicked table row.").t()},{token:"$click.name2$",description:(0,n.default)("Clicked field (column) name.").t()},{token:"$click.value2$",description:(0,n.default)("Clicked field (column) value. Captures the specific table cell value that users click.").t()},{token:"$row.<fieldname>$",description:(0,n.default)("Access any field (column) value from the clicked table row.").t()},{token:"$earliest$",description:(0,n.default)("Earliest time of the clicked table row, or if not applicable, the earliest time of the search.").t()},{token:"$latest$",description:(0,n.default)("Latest time of the clicked table row, or if not applicable, the latest time of the search.").t()}],u=t.customVizTokens=[];t.getTokens=function(e){switch(s.default.getVizType(e)){case a.CHART:return o;case a.SINGLE_VALUE:return c;case a.MAP:return d;case a.CUSTOM_VIZ:return u;case a.EVENT:return l;case a.TABLE:return h;default:return[]}}},"controllers/dashboard/helpers/EditingHelper":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("splunkjs/mvc"),i("models/search/Report"),i("models/dashboard/DashboardElementReport"),i("dashboard/DashboardParser"),i("dashboard/DashboardFactory"),i("views/dashboard/layout/row_column/Row"),i("util/xml"),i("dashboard/serializer/PanelSerializer")],void 0===(s=function(e,t,n,s,a,r,o,l,d,c){return{saveAsReport:function(i,n,s,a){var r=e.Deferred();a=a||{};var l=t.extend({},t.omit(s.entry.content.toJSON({omitNonSavedSearchesDefaults:!0}),"name","description"),{search:i.settings.resolve({tokens:!1}),"dispatch.earliest_time":i.get("earliest_time",{tokens:!1}),"dispatch.latest_time":i.get("latest_time",{tokens:!1})}),d=i.get("sample_ratio");null!=d&&(l["dispatch.sample_ratio"]=String(d)),n.entry.content.set(l);var c=n.entry.content.get("name");return n.entry.set({name:c}),n.save({},{data:{app:a.app,owner:a.owner}}).then((function(){o.getDefault().instantiate({type:"saved-search",id:i.id,settings:{searchname:c,app:a.app,auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0,refresh:i.get("refresh"),refreshType:i.get("refreshType"),type:i.get("type")},settingsOptions:{replace:!0}},{replaceDuplicateIDs:!1}),r.resolve()})).fail(r.reject),r},saveAsInlineSearch:function(t,i,n,s){s=s||{};var a=n,r=n.entry.content.toJSON({omitNonSavedSearchesDefaults:!0,onlyDisplayProperties:!0}),l={latest_time:a.entry.content.get("dispatch.latest_time"),earliest_time:a.entry.content.get("dispatch.earliest_time"),search:a.entry.content.get("search",{tokens:!0}),app:s.app,auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0,refresh:t.get("refresh"),refreshType:t.get("refreshType"),type:t.get("type")};return a.entry.content.has("displayview")&&(r.displayview=a.entry.content.get("displayview")),a.entry.content.has("dispatch.sample_ratio")&&(l.sample_ratio=a.entry.content.get("dispatch.sample_ratio")),i.set(r,{tokens:!0}),o.getDefault().instantiate({type:"inline-search",id:t.id,settings:l,settingsOptions:{replace:!0}},{replaceDuplicateIDs:!1}),e.Deferred().resolve(a)},updateReportId:function(i,n,s,r,l,d){var c=e.Deferred(),h=this.getComponent(n);if(r&&s.get("id")!=r){s.set({id:r},{silent:!0}),s.entry.set({id:r},{silent:!0}),s.id=r;var u=h.settings.get("managerid")||h.settings.get("manager"),p=this.getElementPanel(h);s.fetch({}).then((function(){l&&p&&p.settings.set("title",l);var e=t.pick(i.settings.toJSON(),"auto_cancel","status_buckets","preview","refresh","refreshType");o.getDefault().instantiate({type:"saved-search",id:u,settings:t.extend({searchname:s.entry.get("name"),app:d.app,auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0,refresh:i.get("refresh"),refreshType:i.get("refreshType"),type:i.get("type")},e),settingsOptions:{replace:!0}},{replaceDuplicateIDs:!1}),h.model.elementReport.set(t.pick(s.entry.content.toJSON(),a.getVizTypeReportProperties())),c.resolve()})).fail(c.reject)}else c.resolve();return c},useReportSettingsForElement:function(e,i){var n=t.extend({displayview:!0},a.getDisplayProperties(e.toJSON()),a.NON_SAVEDSEARCHES_DEFAULTS.toJSON());for(var s in n)n[s]=void 0;e.set(t.pick(i.entry.content.toJSON(),a.getVizTypeReportProperties())),e.set(n,{unset:!0})},convertToPrebuiltPanel:function(n,s,a,r){var o=n.captureStructure(),l=r.state,h=l.panels.get(n.id),u=t(o.children).chain().where({type:"input"}).pluck("id").value(),p=t(o.children).chain().where({type:"element"}).pluck("id").value(),m=c.createPanelNode(h,u,p,l);t(["id","depends","rejects"]).each((function(e){m.removeAttr(e)}));var g=e.Deferred();s.entry.content.set("eai:data",d.serializeDashboardXML(m,!0)),s.entry.content.set("name",a.get("panelName"));var f=n.model.application.getPermissions(a.get("panelPerm"));return s.save({},{data:f}).done((function(){Promise.resolve().then((function(){var a=[i("views/dashboard/layout/PanelRef")];(function(i){var a=e('<div class="dashboard-cell"></div>').insertBefore(n.$el),o=n.id;n.remove();var d=new i({id:o,ref:s.entry.content.get("name"),model:t.extend({panel:s},r.model),collection:r.collection,deferreds:r.deferreds,el:a});d.render(),t(u).each((function(e){l.removeInput(e)})),t(p).each((function(e){l.removeElement(e)})),l.updatePanel(n.id,d),n.$el.trigger("resetDragAndDrop"),s.trigger("createSuccess"),g.resolve()}).apply(null,a)})).catch(i.oe)})).fail(g.reject),g},convertToInlinePanel:function(t,i){var n=e.Deferred(),s=t.model.panel.entry.content.get("eai:data"),a=r.getDefault().parse(s,{retainRawXML:!0});a.id=t.id;var l=e("<div></div>").insertBefore(t.$el);return t.remove(),o.getDefault().materialize(a,null,{model:i.model,deferreds:i.deferreds,renderRoot:!0,loadPanels:!0,createStateObjects:!0}).then((function(e,t,i,s,a){e.$el.insertAfter(l),l.remove(),e.$el.trigger("resetDragAndDrop"),n.resolve(e,t,i,s,a)})),n},highlight:function(i){var n=i.$el;e("html,body").animate({scrollTop:n.offset().top}),t.defer((function(){n.addClass("panel-highlight"),t.delay((function(){n.removeClass("panel-highlight")}),2e3)}))},getElementPanel:function(i){return t(i.$el.parents(".dashboard-cell")).chain().map((function(t){return e(t).attr("id")})).map(t.bind(n.Components.get,n.Components)).filter(t.identity).first().value()},getComponent:function(e){return n.Components.get(e)}}}.apply(t,n))||(e.exports=s)},"controllers/dashboard/helpers/ModelHelper":function(e,t,i){(function(n){var s,a;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/shared/Dashboards"),i("collections/services/authorization/Roles"),i("collections/services/data/ui/Panels"),i("collections/search/Reports"),i("collections/services/data/ui/Times"),i("collections/services/configs/SearchBNFs")],void 0===(a=function(e,t,i,n,s,a,r,o,l){var d=function(e,t){t=t||{};var i=new e;return i.dfd=i.fetch(t),i.fetchData.set(t.data,{silent:!0}),i.original_count=i.fetchData.get("count"),i},c=function(e){try{return JSON.stringify(e)}catch(e){return t.uniqueId("cache")}},h={dashboards:{get:t.memoize((function(e){return d(n,{data:e})}),c)},panels:{get:t.memoize((function(e){return d(a,{data:e})}),c)},roles:{get:t.memoize((function(e){return d(s,{data:e})}),c)},reports:{get:t.memoize((function(e){return d(r,{data:e})}),c)},times:{get:t.memoize((function(e){return d(o,{data:e})}),c)},parsedSearchBNFs:{get:t.memoize((function(e){return d(l,{data:e,parseSyntax:!0})}),c)}};return{getCachedModel:function(e,i){if(t.has(h,e))return h[e].get(i);throw new Error("There is no cached model '"+e+"'")},getModel:function(e,t){return d(e,{data:t})},getViewOnlyModel:function(e){var n=e.state.toJSON();n.mode="view",n.editable=!1;var s=new i.Model(n);return t.extend({},e,{state:s})}}}.apply(t,s))||(e.exports=a)}).call(this,i(37))},"dashboard/DashboardFactory":function(e,t,i){var n,s;n=[i("require/underscore"),i("shim/jquery"),i("splunkjs/mvc"),i("splunkjs/mvc/utils"),i("dashboard/factory_config"),i("dashboard/factory_config_legacy"),i("util/console")],void 0===(s=function(e,t,i,n,s,a,r){var o,l={viz:!0,input:!0},d={replaceDuplicateIDs:!0},c=function(){this.initialize.apply(this,arguments)};return e.extend(c.prototype,{initialize:function(t,n){n=e.defaults(n||{},d),e.bindAll(this,"_calculateSettings","_normalizeConfig","_updateComponentSettings","getComponentList","_getComponentList","getComponentTypeConfig","getModuleForType","groupComponents","initialize","instantiateComponent","isComponentOfClass","isDomComponent","materialize","materializeComponent"),this.config=this._normalizeConfig(t),this.registry=n.registry||i.Components,this.idSeq={},this.replaceDuplicateIDs=n.replaceDuplicateIDs,this._app=n.app,this._legacy=n.legacy},materialize:function(e,i,n){n||(n={});var s=t.extend(!0,{},e),a=this.getComponentList(s,n);return this.materializeComponents(a,i,n).promise()},materializeComponents:function(i,n,s){s||(s={});var a=this,r=t.Deferred(),o=a.instantiateComponent,l=a.materializeComponent,d=null;s.createStateObjects&&(d=[],o=function(e){var t=a.instantiateComponent.apply(a,arguments);return e.state&&d.push(a.createStateObject(e,t)),t},l=function(e){var t=a.materializeComponent.apply(a,arguments);return e.state&&d.push(a.createStateObject(e,t)),t});var h=a.groupComponents(i),u=e(h.managers||[]).map(o),p=e(h.others||[]).map(e.partial(l,e,n,s)),m=e(h.events||[]).map(o);return!1!==s.waitForReady?t.when.apply(t,e.map(p,c.whenComponentReady)).then((function(){r.resolve(p[0],u,p,m,d)}),(function(){r.reject()})):r.resolve(p[0],u,p,m,d),r.promise()},createStateObject:function(e,t){return new(e.state.getModule())(t,e.rawXML,{id:e.id,autoId:e.autoId})},materializeExisting:function(i,n,s){s||(s={}),(n=t.extend(!0,{},n)).id=i.id,n.omit=!0;var a=this.getComponentList(n,s),r=a[0],o=e.result(i,"getChildContainer"),l=t.Deferred();return this.materializeComponents(a,o,s).done((function(t,n,s,a){e.isFunction(i.applySettings)?i.applySettings(r.settings):i.settings&&i.settings.set(r.settings),l.resolve(i,n,s,a)})).fail(l.reject),l.promise()},instantiate:function(e,t){return this._normalizeComponentConfig(e,null,null,t),this.instantiateComponent(e)},instantiateComponent:function(t){var i=this.getModuleForType(t.type),n=e.defaults({id:t.id,parentElement:t.parent},t.settings),s=e.extend({},t.settingsOptions);return t.reportContent&&(n.reportContent=t.reportContent),r.debug("Instantiating component",t.type,"with settings",n,s),new i(n,s)},materializeComponent:function(e,t,i){var n,s;return i||(i={}),e.omit||(s=this.instantiateComponent(e),this.isDomComponent(e)&&(e.parent?(n=this.registry.get(e.parent),r.debug("Attaching component to parent",e.parent,n),n&&c.addChildToContainer(s,n)):t?s.render().$el.appendTo(t):i.renderRoot&&s.render(),!0===i.loadPanels&&"panelref"===e.type&&s.load(e.settings.ref,e.settings.app||this._app))),s},isDomComponent:function(e){return!0===this.getComponentTypeConfig(e).dom},isSearchManagerConsumer:function(e){return!!l[this.getComponentTypeConfig(e).class]},isComponentOfClass:function(e,t){return this.getComponentTypeConfig(e).class==t},getComponentTypeConfig:function(e){var t=this.config.typeMap[e.type];if(!t)throw new Error("No factory settings for component type "+JSON.stringify(e.type));return t},getTypeConfigByClass:function(t){return e(this.config.typeMap).chain().values().filter((function(e){return e.class===t})).value()},getComponentList:function(t,i){i||(i={});var n=[],s=null,a=this;return this._walk((function(e){e.id&&n.push(e.id),a.isComponentOfClass(e,"manager")&&"global"==e.id&&(s=e.id),a._generateEmptyManager(e,s)}),t),this._getComponentList(t,null,e.extend({},i,{predefinedIDs:e.extend(n,i.predefinedIDs),globalSearchId:s}))},_generateEmptyManager:function(t,i){var n=this;e(t.children).chain().find((function(e){return n.isComponentOfClass(e,"manager")&&e.settings&&("primary"===e.settings.type||!e.settings.type)}),this).value()||!n.isComponentOfClass(t,"viz")||i||t.children.push({type:"inline-search",settings:{query:""}})},_getComponentList:function(t,i,n){var s=[];if(null==t)return s;var a=e.omit(t,"children","leaf");if(this._normalizeComponentConfig(a,t.children,i,n),n.createStateObjects&&this._updateStateObjectProps(a,n),t.type&&s.push(a),t.children&&t.children.length)if(t.leaf)a.children=[].concat(t.children);else{var r=e(t.children).chain().each((function(e){e.parent=a.id})).map(e.partial(this._getComponentList,e,a,n)).flatten().value();r.length&&(s=s.concat.apply(s,r),a.children=e(t.children).pluck("id"))}return s},_normalizeComponentConfig:function(e,t,i,n){this._normalizeIdentifier(e,n),this._updateComponentSettings(e,t,i,n),this._updateComponentSettingsOptions(e,t,i)},groupComponents:function(t){var i=this;return e(t).groupBy((function(e){return i.isComponentOfClass(e,"manager")||i.isComponentOfClass(e,"eventmanager")?"managers":i.isComponentOfClass(e,"event")?"events":"others"}))},_updateStateObjectProps:function(e,t){var i=this.getComponentTypeConfig(e);i.state&&(e.state=i.state)},_updateComponentSettings:function(t,i,n,s){var a=this.getComponentTypeConfig(t),r=a.settingsToCreate||{},o=a.defaultSettings||{},l=this._calculateSettings(t,i,n,s);if(t.settings=e.extend({},o,t.settings||{},r,l),a.reportContent&&(t.reportContent=e.extend(t.reportContent||{},a.reportContent)),a.renameSettings&&e(a.renameSettings).each((function(e,i){t.settings.hasOwnProperty(i)&&!t.settings.hasOwnProperty(e)&&(t.settings[e]=t.settings[i],delete t.settings[i])})),t.settingsOptions=e.extend({},a.settingsOptions,t.settingsOptions),this._legacy&&t.reportContent){var d=t.reportContent["display.general.type"],c={},h="display."+d;e(t.reportContent).each((function(e,t){var i=t.slice(h.length+1);i&&(c[i]=e)})),t.settings=e.extend({},t.settings,c)}return t},_calculateSettings:function(t,i,n,s){var a={};if((s=s||{}).model&&(a.model=s.model),s.collection&&(a.collection=s.collection),s.deferreds&&(a.deferreds=s.deferreds),this.isSearchManagerConsumer(t)){var r=e(i).chain().filter((function(e){return this.isComponentOfClass(e,"manager")}),this).value();if(r.length){var o=e.map(r,(function(e){return this._normalizeIdentifier(e,s)}),this);a.managerid=1===o.length?o[0]:o}else s.globalSearchId&&this.isComponentOfClass(t,"viz")&&(a.managerid=s.globalSearchId)}return this.isComponentOfClass(t,"manager")&&(a.app=this._app,s&&s.idPrefix&&t.settings.base&&(a.base=s.idPrefix+t.settings.base)),this.isComponentOfClass(t,"eventmanager")&&n&&(n.settings.evtmanagerid=t.id),this.isComponentOfClass(t,"event")&&n&&(this.isComponentOfClass(n,"manager")?a.managerid=n.id:a.viewid=n.id),this.isComponentOfClass(t,"input")&&("time-input"===t.type?(a.earliest_time=t.settings.token?"$form."+t.settings.token+".earliest$":"$earliest$",a.latest_time=t.settings.token?"$form."+t.settings.token+".latest$":"$latest$"):t.settings.token&&(a.value="$form."+t.settings.token+"$")),a},_updateComponentSettingsOptions:function(e,t,i){return this.isComponentOfClass(e,"manager")&&(i&&this.isComponentOfClass(i,"input")?e.settingsOptions.tokenNamespace="default":e.settingsOptions.tokenNamespace="submitted"),e},_walk:function(e,t){var i=[];t&&i.push(t);for(var n=i.shift();n;)e(n),Array.prototype.push.apply(i,n.children),n=i.shift()},_normalizeIdentifier:function(t,i){if(!t.omit){var n=this.registry.toJSON(),s=e.extend({},n);i&&i.predefinedIDs&&e(i.predefinedIDs).each((function(e){s[e]=!0}));var a=i&&i.idPrefix||"";if(!t.id){var r=this.getComponentTypeConfig(t);if(r.autoId){var o,l=r.autoId,d=this.idSeq[l];null==d&&(d=1);do{o=a+l+d++}while(s[o]);this.idSeq[l]=d,t.id=o,t.autoId=!0}}return 0!==t.id.indexOf(a)&&(t.id=a+t.id),("replaceDuplicateIDs"in i?i.replaceDuplicateIDs:this.replaceDuplicateIDs)&&n[t.id]?(delete t.id,this._normalizeIdentifier(t,i)):t.id}},getModuleForType:function(e){var t=this.config.typeMap[e];if(!t)throw new Error("Unknown component type "+JSON.stringify(e));return t.getModule()},_normalizeConfig:function(i){var n={typeMap:{}};return e(i.typeMap).each((function(e,s,a){var r={};e.class&&(r=i.classes[e.class]),n.typeMap[s]=t.extend(!0,{},r,e)})),n}}),e.extend(c,{getDefault:function(){return o||(o=c.createDefault())},createDefault:function(){return new c(c.getDefaultConfig(),{app:n.getCurrentApp()})},createLegacy:function(){return new c(c.getLegacyConfig(),{app:n.getCurrentApp(),legacy:!0})},resetDefault:function(){o=null},getDefaultConfig:e.once((function(){return s})),getLegacyConfig:function(){return a},getDashboardPanels:function(e){if("dashboard"!==e.type)throw new Error("Expected root type to be a dashboard");var t=[];return c.prototype._walk((function(e){"panel"!==e.type&&"panelref"!==e.type||t.push(e)}),e),t},addChildToContainer:function(e,t){if("function"==typeof t.getChildContainer){var i=t.getChildContainer();e.render().$el.appendTo(i)}else"function"==typeof t.addChild?t.addChild(e):r.warn("Can't add child to container - no addChild or getChildContainer method found",e,t)},whenComponentReady:function(i){return e.result(i,"componentReady")||t.Deferred().resolve()}}),c}.apply(t,n))||(e.exports=s)},"dashboard/components/editor/drilldown/DrilldownEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=_(i(15)),a=_(i(73)),r=_(i(4)),o=_(i(0)),l=_(i("require/underscore")),d=_(i(26)),c=_(i("components/SimpleDialog")),h=_(i("dashboard/components/shared/ItemSelector")),u=_(i("dashboard/containers/editor/drilldown/search/SearchContainer")),p=_(i("dashboard/containers/editor/drilldown/dashboard/DashboardContainer")),m=_(i("dashboard/containers/editor/drilldown/report/ReportContainer")),g=_(i("dashboard/containers/editor/drilldown/tokens/TokensContainer")),f=_(i("dashboard/containers/editor/drilldown/url/UrlContainer")),v=i("dashboard/containers/editor/drilldown/drilldownNames"),b=i("splunkjs/mvc/tokenutils"),y=i("util/test_support");function _(e){return e&&e.__esModule?e:{default:e}}var w=(n={},(0,a.default)(n,v.LINK_TO_SEARCH,o.default.createElement(u.default,null)),(0,a.default)(n,v.LINK_TO_DASHBOARD,o.default.createElement(p.default,null)),(0,a.default)(n,v.LINK_TO_REPORT,o.default.createElement(m.default,null)),(0,a.default)(n,v.LINK_TO_CUSTOM_URL,o.default.createElement(f.default,null)),(0,a.default)(n,v.EDIT_TOKENS,o.default.createElement(g.default,null)),n),k=[{label:(0,l.default)("No action").t(),value:v.NO_DRILLDOWN},{label:(0,l.default)("Link to search").t(),value:v.LINK_TO_SEARCH},{label:(0,l.default)("Link to dashboard").t(),value:v.LINK_TO_DASHBOARD},{label:(0,l.default)("Link to report").t(),value:v.LINK_TO_REPORT},{label:(0,l.default)("Link to custom URL").t(),value:v.LINK_TO_CUSTOM_URL},{label:(0,l.default)("Manage tokens on this dashboard").t(),value:v.EDIT_TOKENS,description:(0,l.default)("Enable in-page drilldown actions").t()}],T=(0,l.default)('The drilldown editor is not available for dashboard elements with advanced drilldown configurations. Click "Source" to edit drilldown for this element.').t(),S=(0,l.default)("This custom visualization might not support drilldown behavior.").t(),C=function(t){var i=t.isSupported,n=t.isCustomViz,a=t.activeAction,r=t.onActionChange,u=t.onClose,p=t.onApply;return o.default.createElement(c.default,(0,s.default)({title:(0,l.default)("Drilldown Editor").t(),okLabel:(0,l.default)("Apply").t(),onClose:u,onApply:p,width:550,disablePrimaryButton:!i},(0,y.createTestHook)(e.i)),i?o.default.createElement("div",{style:{minHeight:200}},n?o.default.createElement(d.default,(0,s.default)({type:"warning"},(0,y.createTestHook)(null,"customVizMessage")),S," "):null,o.default.createElement(h.default,(0,s.default)({label:(0,l.default)("On Click").t(),activeItem:a,items:k,isLoading:!1,onChange:r,warning:(0,b.isToken)(a)?(0,l.default)("is set to a token, changes here will override the token.").t():"",hideNoMatchError:(0,b.isToken)(a)},(0,y.createTestHook)(null,"drilldownActionSelector"))),w[a]):o.default.createElement(d.default,(0,s.default)({type:"error"},(0,y.createTestHook)(null,"notSupportedMessage")),T))};C.propTypes={isSupported:r.default.bool.isRequired,isCustomViz:r.default.bool.isRequired,activeAction:r.default.string.isRequired,onActionChange:r.default.func.isRequired,onClose:r.default.func.isRequired,onApply:r.default.func.isRequired},t.default=C,e.exports=t.default},"dashboard/components/editor/drilldown/ReportActionEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(15)),s=c(i("require/underscore")),a=c(i(4)),r=c(i(0)),o=c(i("dashboard/components/shared/ItemSelector")),l=c(i("dashboard/components/shared/OpenInNewTab")),d=i("util/test_support");function c(e){return e&&e.__esModule?e:{default:e}}var h=function(t){var i=t.activeApp,a=t.activeAppError,c=t.apps,h=t.isFetchingApps,u=t.onAppChange,p=t.activeReport,m=t.activeReportError,g=t.target,f=t.onTargetChange,v=t.reports,b=t.isFetchingReports,y=t.onReportChange;return r.default.createElement("div",(0,d.createTestHook)(e.i),r.default.createElement(o.default,(0,n.default)({label:(0,s.default)("App").t(),items:c,isLoading:h,onChange:u,activeItem:i,filter:!0,error:a},(0,d.createTestHook)(null,"reportAppSelector"))),r.default.createElement(o.default,(0,n.default)({label:(0,s.default)("Report").t(),items:v,isLoading:b,onChange:y,activeItem:p,filter:!0,error:m},(0,d.createTestHook)(null,"reportReportSelector"))),r.default.createElement(l.default,{value:g,onClick:f}))};h.propTypes={activeApp:a.default.string.isRequired,activeAppError:a.default.string,apps:a.default.arrayOf(a.default.object).isRequired,isFetchingApps:a.default.bool.isRequired,onAppChange:a.default.func.isRequired,activeReport:a.default.string,activeReportError:a.default.string,target:a.default.string.isRequired,onTargetChange:a.default.func.isRequired,reports:a.default.arrayOf(a.default.object).isRequired,isFetchingReports:a.default.bool.isRequired,onReportChange:a.default.func.isRequired},h.defaultProps={activeAppError:"",activeReport:"",activeReportError:""},t.default=h,e.exports=t.default},"dashboard/components/editor/drilldown/UrlActionEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=h(i("require/underscore")),s=h(i(4)),a=h(i(0)),r=h(i(23)),o=h(i(32)),l=h(i("dashboard/components/shared/OpenInNewTab")),d=h(i("dashboard/components/shared/FormMessage")),c=i("util/test_support");function h(e){return e&&e.__esModule?e:{default:e}}var u=function(t){var i=t.url,s=t.urlError,h=t.onUrlChange,u=t.target,p=t.onTargetChange,m=(0,n.default)("URL").t(),g=!!s,f=g?m+" "+s:"";return a.default.createElement("div",(0,c.createTestHook)(e.i),a.default.createElement(d.default,{active:g,type:"error",message:f}),a.default.createElement(r.default,{label:m,error:g,help:(0,n.default)("Use a relative URL or absolute URL, for example, /app/search/datasets, or https://www.splunk.com").t()},a.default.createElement(o.default,{value:i,onChange:h,multiline:!0,placeholder:"",error:g})),a.default.createElement(l.default,{value:u,onClick:p}))};u.propTypes={url:s.default.string,urlError:s.default.string,onUrlChange:s.default.func.isRequired,target:s.default.string.isRequired,onTargetChange:s.default.func.isRequired},u.defaultProps={urlError:"",url:""},t.default=u,e.exports=t.default},"dashboard/components/editor/drilldown/dashboard/AdvancedSection":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=f(i(15)),s=f(i(16)),a=f(i(17)),r=f(i(20)),o=f(i(21)),l=f(i("require/underscore")),d=f(i(4)),c=f(i(0)),h=f(i(262)),u=f(i(19)),p=f(i(304)),m=f(i(149)),g=i("util/test_support");function f(e){return e&&e.__esModule?e:{default:e}}var v={paddingLeft:"0",paddingRight:"0"},b=function(t){function i(e){(0,s.default)(this,i);var t=(0,r.default)(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={active:e.active},t.onClick=t.onClick.bind(t),t}return(0,o.default)(i,t),(0,a.default)(i,[{key:"onClick",value:function(){this.setState({active:!this.state.active})}},{key:"render",value:function(){return c.default.createElement("div",(0,n.default)({},(0,g.createTestHook)(e.i),{"data-test":"advanced","data-test-expand":this.state.active}),c.default.createElement(u.default,(0,n.default)({icon:this.state.active?c.default.createElement(p.default,null):c.default.createElement(m.default,null),appearance:"pill",label:(0,l.default)("Advanced").t(),style:v,onClick:this.onClick},(0,g.createTestHook)(null,"advancedToggle"))),c.default.createElement(h.default,{animation:"slideFromTop",open:this.state.active},this.props.children))}}]),i}(c.default.Component);b.propTypes={active:d.default.bool.isRequired,children:d.default.arrayOf(d.default.element).isRequired},t.default=b,e.exports=t.default},"dashboard/components/editor/drilldown/dashboard/DashboardActionEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=m(i(15)),s=m(i("require/underscore")),a=m(i(4)),r=m(i(0)),o=m(i("dashboard/components/shared/ItemSelector")),l=m(i("dashboard/components/editor/drilldown/dashboard/Parameters")),d=m(i("dashboard/components/editor/drilldown/dashboard/AdvancedSection")),c=m(i("dashboard/components/editor/drilldown/dashboard/PreviewURL")),h=m(i("dashboard/components/shared/OpenInNewTab")),u=m(i(27)),p=i("util/test_support");function m(e){return e&&e.__esModule?e:{default:e}}var g=function(t){var i=t.activeApp,a=t.activeAppError,m=t.apps,g=t.isFetchingApps,f=t.onAppChange,v=t.activeDashboard,b=t.activeDashboardError,y=t.dashboards,_=t.isFetchingDashboards,w=t.onDashboardChange,k=t.onTargetChange,T=t.target,S=t.params,C=t.onParamsChange,E=t.previewLink,R=t.candidateTokens,x=t.learnMoreLinkForTokens;return r.default.createElement("div",(0,p.createTestHook)(e.i),r.default.createElement(o.default,(0,n.default)({label:(0,s.default)("App").t(),activeItem:i,items:m,isLoading:g,onChange:f,filter:!0,error:a},(0,p.createTestHook)(null,"dashboardAppSelector"))),r.default.createElement(o.default,(0,n.default)({label:(0,s.default)("Dashboard").t(),activeItem:v,items:y,isLoading:_,onChange:w,filter:!0,error:b},(0,p.createTestHook)(null,"dashboardSelector"))),r.default.createElement(h.default,{value:T,onClick:k}),r.default.createElement(d.default,{active:S.filter((function(e){return e.key})).length>0},r.default.createElement(l.default,{label:(0,s.default)("Parameters").t(),items:S,onChange:C,keyPlaceholder:"",valuePlaceholder:"",candidateTokens:R,help:r.default.createElement("div",null,(0,s.default)("Use parameters to set token values in the target dashboard. For example, form.host = $click.value2$ or host = $row.host$").t()," ",r.default.createElement(u.default,{to:x,openInNewContext:!0},(0,s.default)("Learn more").t()))}),r.default.createElement(c.default,{url:E})))};g.propTypes={activeApp:a.default.string.isRequired,activeAppError:a.default.string,apps:a.default.arrayOf(a.default.object).isRequired,isFetchingApps:a.default.bool.isRequired,onAppChange:a.default.func.isRequired,activeDashboard:a.default.string,activeDashboardError:a.default.string,dashboards:a.default.arrayOf(a.default.object).isRequired,isFetchingDashboards:a.default.bool.isRequired,onDashboardChange:a.default.func.isRequired,target:a.default.string.isRequired,onTargetChange:a.default.func.isRequired,params:a.default.arrayOf(a.default.shape({key:a.default.string,value:a.default.string})).isRequired,onParamsChange:a.default.func.isRequired,previewLink:a.default.shape({label:a.default.string.isRequired,value:a.default.string.isRequired}).isRequired,candidateTokens:a.default.arrayOf(a.default.shape({token:a.default.string.isRequired,description:a.default.string})).isRequired,learnMoreLinkForTokens:a.default.string.isRequired},g.defaultProps={activeAppError:"",activeDashboard:"",activeDashboardError:""},t.default=g,e.exports=t.default},"dashboard/components/editor/drilldown/dashboard/Parameters":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=m(i(83)),s=m(i(15)),a=m(i("require/underscore")),r=m(i(4)),o=m(i(0)),l=m(i(23)),d=m(i(32)),c=m(i(195)),h=m(i("dashboard/components/shared/AddNewButton")),u=m(i("dashboard/components/shared/DeleteButton")),p=i("util/test_support");function m(e){return e&&e.__esModule?e:{default:e}}var g={marginBottom:"10px",display:"flex"},f={flexShrink:"1",flexGrow:"0",maxWidth:"140px"},v={lineHeight:"26px",paddingLeft:"5px",paddingRight:"5px"},b=function(e){var t=e.item,i=e.placeholder,n=e.onChange,s=e.onClickDelete;return o.default.createElement("div",{style:g},o.default.createElement(d.default,{value:t,onChange:function(e,t){return n(t.value)},style:f,placeholder:i}),o.default.createElement(u.default,{onClick:s}))};b.propTypes={item:r.default.string.isRequired,placeholder:r.default.string,onChange:r.default.func.isRequired,onClickDelete:r.default.func.isRequired},b.defaultProps={placeholder:(0,a.default)("name").t()};var y=function(e){var t=e.item,i=e.candidateTokens,n=e.keyPlaceholder,r=e.valuePlaceholder,l=e.onChange,h=e.delimiter,m=e.onClickDelete,b=o.default.createElement("div",null,(0,a.default)("Enter value").t());return o.default.createElement("div",{style:g,"data-test":"parameter"},o.default.createElement(d.default,(0,s.default)({value:t.key,onChange:function(e,i){return l({key:i.value,value:t.value})},placeholder:n,style:f},(0,p.createTestHook)(null,"parameterKey"))),o.default.createElement("div",{style:v},h),o.default.createElement(c.default,(0,s.default)({value:t.value,onChange:function(e,i){return l({key:t.key,value:i.value})},placeholder:r,noOptionsMessage:b,style:f},(0,p.createTestHook)(null,"parameterValue")),a.default.map(i,(function(e){var t=e.token,i=e.description;return o.default.createElement(c.default.Option,{key:t,value:t,description:i})}))),o.default.createElement(u.default,{onClick:m}))};y.propTypes={item:r.default.shape({key:r.default.string.isRequired,value:r.default.string}).isRequired,candidateTokens:r.default.arrayOf(r.default.shape({token:r.default.string.isRequired,description:r.default.string})).isRequired,keyPlaceholder:r.default.string,valuePlaceholder:r.default.string,delimiter:r.default.string,onChange:r.default.func.isRequired,onClickDelete:r.default.func.isRequired},y.defaultProps={delimiter:(0,a.default)("=").t(),keyPlaceholder:(0,a.default)("name").t(),valuePlaceholder:(0,a.default)("value").t()};var _=function(t){var i=t.label,a=t.items,r=t.candidateTokens,d=t.keyPlaceholder,c=t.valuePlaceholder,u=t.delimiter,m=t.onChange,g=t.onlyKey,f=t.error,v=t.help,_=t.tooltip;return o.default.createElement(l.default,(0,s.default)({error:!!f,help:v,label:i,controlsLayout:"none",tooltip:_},(0,p.createTestHook)(e.i,"parameters")),a.map((function(e,t){var i=function(e){return m([].concat((0,n.default)(a.slice(0,t)),[e],(0,n.default)(a.slice(t+1))))},s=function(){return m([].concat((0,n.default)(a.slice(0,t)),(0,n.default)(a.slice(t+1))))};return g?o.default.createElement(b,{key:t,item:e,placeholder:d,onChange:i,onClickDelete:s}):o.default.createElement(y,{key:t,item:e,candidateTokens:r,keyPlaceholder:d,valuePlaceholder:c,onChange:i,delimiter:u,onClickDelete:s})})),o.default.createElement(h.default,{onClick:function(){return m([].concat((0,n.default)(a),[g?"":{key:"",value:""}]))}}))};_.propTypes={label:r.default.string.isRequired,items:r.default.oneOfType([r.default.arrayOf(r.default.shape({key:r.default.string.isRequired,value:r.default.string})),r.default.arrayOf(r.default.string)]).isRequired,candidateTokens:r.default.arrayOf(r.default.shape({token:r.default.string.isRequired,description:r.default.string})).isRequired,keyPlaceholder:r.default.string,valuePlaceholder:r.default.string,delimiter:r.default.string,onChange:r.default.func.isRequired,onlyKey:r.default.bool,error:r.default.string,help:r.default.oneOfType([r.default.object,r.default.string]),tooltip:r.default.string},_.defaultProps={onlyKey:!1,keyPlaceholder:"",valuePlaceholder:"",delimiter:"=",error:"",help:"",tooltip:""},t.default=_,e.exports=t.default},"dashboard/components/editor/drilldown/dashboard/PreviewURL":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(15)),s=c(i("require/underscore")),a=c(i(4)),r=c(i(0)),o=c(i(23)),l=i("util/test_support"),d=c(i("dashboard/components/editor/drilldown/dashboard/PreviewURL.pcssm"));function c(e){return e&&e.__esModule?e:{default:e}}var h=function(t){var i=t.url,a=s.default.isString(i)?i:i.label;return(s.default.isString(i)?i:i.value)?r.default.createElement(o.default,(0,n.default)({label:(0,s.default)("Preview URL").t(),controlsLayout:"none"},(0,l.createTestHook)(e.i,"PreviewURL")),r.default.createElement("div",{className:d.default.padTopBottom,"data-test":"preview-url"},r.default.createElement("span",{className:d.default.linkLabel},a))):null};h.propTypes={url:a.default.oneOfType([a.default.shape({label:a.default.string.isRequired,value:a.default.string.isRequired}),a.default.string]).isRequired},t.default=h,e.exports=t.default},"dashboard/components/editor/drilldown/dashboard/PreviewURL.pcssm":function(e,t,i){var n=i(628);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"dashboard/components/editor/drilldown/search/SearchActionEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=f(i(15)),s=f(i("require/underscore")),a=f(i(4)),r=f(i(0)),o=f(i(23)),l=f(i(120)),d=f(i("dashboard/components/shared/OpenInNewTab")),c=f(i("dashboard/components/shared/SearchEditor")),h=f(i(27)),u=f(i("dashboard/components/shared/FormMessage")),p=f(i(115)),m=i("util/test_support"),g=f(i("dashboard/components/editor/drilldown/search/SearchTimeEditor"));function f(e){return e&&e.__esModule?e:{default:e}}var v=function(t){var i=t.options,a=t.activeOption,f=t.onOptionChange,v=t.search,b=t.searchError,y=t.onSearchChange,_=t.isFetchingPresets,w=t.presets,k=t.locale,T=t.parseEarliest,S=t.parseLatest,C=t.onRequestParseEarliest,E=t.onRequestParseLatest,R=t.extraTimeRangeOptions,x=t.activeTimeRangeOption,D=t.onTimeRangeOptionChange,M=t.activeTimeRange,O=t.onTimeRangeChange,I=t.activeTimeRangeToken,A=t.onTimeRangeTokenChange,P=t.earliestTokenError,L=t.latestTokenError,$=t.target,N=t.onTargetChange,z=t.learnMoreLinkForTokens,j=t.timeRangePickerDocsURL,F=i.map((function(e){return r.default.createElement(l.default.Option,{key:e.value,label:e.label,value:e.value})})),q=!!b,B=(0,s.default)("Search String").t(),V=q?B+" "+b:"",U="custom"===a?r.default.createElement("div",null,r.default.createElement(o.default,(0,n.default)({label:"",controlsLayout:"none"},(0,m.createTestHook)(null,"LearnMoreLink")),r.default.createElement(p.default,{inline:!0},(0,s.default)("You can include predefined drilldown tokens in a custom search.").t()," ",r.default.createElement(h.default,{to:z,openInNewContext:!0},(0,s.default)("Learn more").t()))),r.default.createElement(u.default,{active:q,type:"error",message:V}),r.default.createElement(o.default,(0,n.default)({label:B,error:q},(0,m.createTestHook)(null,"SearchIdeWrapper")),r.default.createElement(c.default,{value:v,onChange:y})),r.default.createElement(g.default,{isFetchingPresets:_,presets:w,locale:k,parseEarliest:T,parseLatest:S,onRequestParseEarliest:C,onRequestParseLatest:E,extraOptions:R,activeOption:x,onOptionChange:D,activeTimeRange:M,onTimeRangeChange:O,activeTimeRangeToken:I,onTimeRangeTokenChange:A,earliestTokenError:P,latestTokenError:L,timeRangePickerDocsURL:j}),r.default.createElement(d.default,{value:$,onClick:N})):r.default.createElement(o.default,(0,n.default)({label:""},(0,m.createTestHook)(null,"DefaultSearchDescription")),(0,s.default)("A search generates automatically using values from the clicked element.").t());return r.default.createElement("div",(0,m.createTestHook)(e.i),r.default.createElement(o.default,(0,n.default)({label:""},(0,m.createTestHook)(null,"LinkToSearchSelector")),r.default.createElement(l.default,{value:a,onChange:f},F)),U)};v.propTypes={options:a.default.arrayOf(a.default.object).isRequired,activeOption:a.default.string.isRequired,onOptionChange:a.default.func.isRequired,search:a.default.string.isRequired,searchError:a.default.string.isRequired,onSearchChange:a.default.func.isRequired,isFetchingPresets:a.default.bool.isRequired,presets:a.default.arrayOf(a.default.object).isRequired,locale:a.default.string.isRequired,parseEarliest:a.default.shape({error:a.default.string,iso:a.default.string,time:a.default.string}),parseLatest:a.default.shape({error:a.default.string,iso:a.default.string,time:a.default.string}),onRequestParseEarliest:a.default.func.isRequired,onRequestParseLatest:a.default.func.isRequired,extraTimeRangeOptions:a.default.arrayOf(a.default.object).isRequired,activeTimeRangeOption:a.default.string.isRequired,onTimeRangeOptionChange:a.default.func.isRequired,activeTimeRange:a.default.shape({earliest:a.default.oneOfType([a.default.string,a.default.number]),latest:a.default.oneOfType([a.default.string,a.default.number])}).isRequired,onTimeRangeChange:a.default.func.isRequired,activeTimeRangeToken:a.default.shape({earliest:a.default.string,latest:a.default.string}).isRequired,onTimeRangeTokenChange:a.default.func.isRequired,earliestTokenError:a.default.string,latestTokenError:a.default.string,target:a.default.string.isRequired,onTargetChange:a.default.func.isRequired,learnMoreLinkForTokens:a.default.string.isRequired,timeRangePickerDocsURL:a.default.string},v.defaultProps={activeTimeRangeToken:"",earliestTokenError:"",latestTokenError:"",parseEarliest:null,parseLatest:null,timeRangePickerDocsURL:null},t.default=v,e.exports=t.default},"dashboard/components/editor/drilldown/search/SearchTimeEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=p(i(15)),s=p(i(73)),a=p(i("require/underscore")),r=p(i(4)),o=p(i(0)),l=p(i("dashboard/components/shared/TimeRangeTokenEditor")),d=p(i("dashboard/components/shared/TimeRangeSelector")),c=p(i("dashboard/components/shared/ItemSelector")),h=i("dashboard/containers/editor/drilldown/search/timeRangeOptionNames"),u=i("util/test_support");function p(e){return e&&e.__esModule?e:{default:e}}var m=function(t){var i,r=t.isFetchingPresets,p=t.presets,m=t.locale,g=t.parseEarliest,f=t.parseLatest,v=t.onRequestParseEarliest,b=t.onRequestParseLatest,y=t.extraOptions,_=t.activeOption,w=t.onOptionChange,k=t.activeTimeRange,T=t.onTimeRangeChange,S=t.activeTimeRangeToken,C=t.onTimeRangeTokenChange,E=t.earliestTokenError,R=t.latestTokenError,x=t.timeRangePickerDocsURL,D=(y||[]).concat([{value:h.EXPLICIT_OPTION,label:(0,a.default)("Use time picker").t()},{value:h.TOKEN_OPTION,label:(0,a.default)("Tokens").t()},{value:h.GLOBAL_OPTION,label:(0,a.default)("Global").t()}]),M=(i={},(0,s.default)(i,h.GLOBAL_OPTION,null),(0,s.default)(i,h.TOKEN_OPTION,o.default.createElement(l.default,{activeTimeRangeToken:S,onTimeRangeTokenChange:C,earliestTokenError:E,latestTokenError:R})),(0,s.default)(i,h.EXPLICIT_OPTION,o.default.createElement(d.default,{isFetchingPresets:r,presets:p,locale:m,parseEarliest:g,parseLatest:f,onRequestParseEarliest:v,onRequestParseLatest:b,activeTimeRange:k,onTimeRangeChange:T,documentationURL:x})),i);return o.default.createElement("div",(0,u.createTestHook)(e.i),o.default.createElement(c.default,(0,n.default)({activeItem:_,label:(0,a.default)("Time Range").t(),items:D,onChange:w},(0,u.createTestHook)(null,"timeRangeType"))),M[_])};m.propTypes={isFetchingPresets:r.default.bool.isRequired,presets:r.default.arrayOf(r.default.object).isRequired,locale:r.default.string.isRequired,parseEarliest:r.default.shape({error:r.default.string,iso:r.default.string,time:r.default.string}),parseLatest:r.default.shape({error:r.default.string,iso:r.default.string,time:r.default.string}),onRequestParseEarliest:r.default.func.isRequired,onRequestParseLatest:r.default.func.isRequired,extraOptions:r.default.arrayOf(r.default.object),activeOption:r.default.string.isRequired,onOptionChange:r.default.func.isRequired,activeTimeRange:r.default.shape({earliest:r.default.oneOfType([r.default.string,r.default.number]),latest:r.default.oneOfType([r.default.string,r.default.number])}).isRequired,onTimeRangeChange:r.default.func.isRequired,activeTimeRangeToken:r.default.shape({earliest:r.default.string,latest:r.default.string}).isRequired,onTimeRangeTokenChange:r.default.func.isRequired,earliestTokenError:r.default.string,latestTokenError:r.default.string,timeRangePickerDocsURL:r.default.string},m.defaultProps={extraOptions:[],earliestTokenError:"",latestTokenError:"",parseEarliest:null,parseLatest:null,timeRangePickerDocsURL:null},t.default=m,e.exports=t.default},"dashboard/components/editor/drilldown/tokens/TokenExpression":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=p(i(15)),s=p(i("require/underscore")),a=p(i(4)),r=p(i(0)),o=p(i(42)),l=p(i(32)),d=p(i("dashboard/components/shared/DeleteButton")),c=p(i(52)),h=p(i(195)),u=i("util/test_support");function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t=e.value,i=e.onChange;return r.default.createElement(o.default,(0,n.default)({value:t,onChange:i,style:{marginRight:"5px",minWidth:"70px"}},(0,u.createTestHook)(null,"SetEvalUnsetDropdown")),r.default.createElement(o.default.Option,{label:(0,s.default)("Set").t(),value:"set"}),r.default.createElement(o.default.Option,{label:(0,s.default)("Eval").t(),value:"eval"}),r.default.createElement(o.default.Option,{label:(0,s.default)("Unset").t(),value:"unset"}))};m.propTypes={value:a.default.string.isRequired,onChange:a.default.func.isRequired};var g={lineHeight:"32px",paddingLeft:"5px",paddingRight:"5px"},f={flexShrink:"1",flexGrow:"0",maxWidth:"100px"},v={marginBottom:"10px"},b=function(e){switch(e){case"set":return(0,s.default)("Token value").t();case"eval":return(0,s.default)("Eval expression").t();default:return""}},y=function(t){var i=t.type,a=t.token,o=t.value,p=t.candidateTokens,y=t.onTypeChange,_=t.onTokenChange,w=t.onValueChange,k=t.onRemove;return r.default.createElement(c.default,(0,n.default)({flex:!0,style:v},(0,u.createTestHook)(e.i)),r.default.createElement(m,{value:i,onChange:function(e,t){return y(t.value)}}),r.default.createElement(l.default,(0,n.default)({value:a,onChange:function(e,t){return _(t.value)},placeholder:(0,s.default)("Token name").t(),style:f},(0,u.createTestHook)(null,"tokenName"))),"set"===i||"eval"===i?r.default.createElement("div",{style:g},"="):null,"set"===i||"eval"===i?r.default.createElement(h.default,(0,n.default)({value:o,onChange:function(e,t){return w(t.value)},placeholder:b(i),style:f},(0,u.createTestHook)(null,"tokenValue")),p.map((function(e){return r.default.createElement(h.default.Option,{key:e.token,value:e.token,description:e.description})}))):null,r.default.createElement(d.default,{onClick:k}))};y.propTypes={type:a.default.string.isRequired,token:a.default.string.isRequired,value:a.default.string,candidateTokens:a.default.arrayOf(a.default.shape({token:a.default.string.isRequired,description:a.default.string})).isRequired,onTypeChange:a.default.func.isRequired,onTokenChange:a.default.func.isRequired,onValueChange:a.default.func,onRemove:a.default.func.isRequired},y.defaultProps={onValueChange:function(){},value:""},t.default=y,e.exports=t.default},"dashboard/components/editor/drilldown/tokens/TokensActionEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=m(i(15)),s=m(i(83)),a=m(i("require/underscore")),r=m(i(4)),o=m(i(0)),l=m(i("dashboard/components/shared/AddNewButton")),d=m(i("dashboard/components/editor/drilldown/tokens/TokenExpression")),c=m(i(27)),h=m(i(23)),u=m(i("dashboard/components/shared/FormMessage")),p=i("util/test_support");function m(e){return e&&e.__esModule?e:{default:e}}var g=function(t){var i=t.items,r=t.error,m=t.candidateTokens,g=t.onUpdateTokens,f=t.learnMoreLinkForTokenUsage,v=function(e,t){return g([].concat((0,s.default)(i.slice(0,t)),[e],(0,s.default)(i.slice(t+1))))},b=i.map((function(e,t){return o.default.createElement(d.default,{key:t,type:e.type,token:e.token,value:e.value,candidateTokens:m,onTypeChange:function(i){return v({type:i,token:e.token,value:e.value},t)},onTokenChange:function(i){return v({type:e.type,token:i,value:e.value},t)},onValueChange:function(i){return v({type:e.type,token:e.token,value:i},t)},onRemove:function(){return function(e){return g([].concat((0,s.default)(i.slice(0,e)),(0,s.default)(i.slice(e+1))))}(t)}})}));return o.default.createElement("div",(0,p.createTestHook)(e.i),o.default.createElement(h.default,(0,n.default)({label:"",controlsLayout:"none"},(0,p.createTestHook)(null,"learnMoreAboutTokens")),(0,a.default)("Use <set>, <eval>, and <unset> to update token values. This can help you create responsive content or display changes in dashboards and forms.").t()," ",o.default.createElement(c.default,{to:f,openInNewContext:!0},(0,a.default)("Learn more").t())),o.default.createElement(u.default,{active:!!r,type:"error",message:r||""}),o.default.createElement(h.default,(0,n.default)({label:"",controlsLayout:"none",help:(0,a.default)("Example: form.host = $click.value2$ or host = $row.host$").t()},(0,p.createTestHook)(null,"editTokenValues")),b,o.default.createElement(l.default,{onClick:function(){return e={type:i.length>0?i[i.length-1].type:"set",token:"",value:""},g([].concat((0,s.default)(i),[e]));var e},error:!!r})))};g.propTypes={items:r.default.arrayOf(r.default.shape({type:r.default.string.isRequired,token:r.default.string.isRequired,value:r.default.string})).isRequired,error:r.default.string,candidateTokens:r.default.arrayOf(r.default.shape({token:r.default.string.isRequired,description:r.default.string})).isRequired,onUpdateTokens:r.default.func.isRequired,learnMoreLinkForTokenUsage:r.default.string.isRequired},g.defaultProps={error:""},t.default=g,e.exports=t.default},"dashboard/components/editor/element/MiscControls":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(4)),s=c(i(0)),a=c(i("require/underscore")),r=c(i(19)),o=c(i(68)),l=c(i(69)),d=c(i(49));function c(e){return e&&e.__esModule?e:{default:e}}var h=s.default.createElement("svg",{width:"16",height:"16",fill:"currentColor"},s.default.createElement("circle",{cx:"8",cy:"2",r:"2"}),s.default.createElement("circle",{cx:"8",cy:"8",r:"2"}),s.default.createElement("circle",{cx:"8",cy:"14",r:"2"})),u=function(e){var t=e.onClickDrilldown,i=e.onClickTrellis,n=e.disableDrilldown,c=e.disableTrellis,u=(0,a.default)("More actions").t(),p=s.default.createElement(r.default,{appearance:"pill",style:{paddingTop:6,paddingBottom:6,paddingLeft:0,paddingRight:0},"aria-label":u},h),m=s.default.createElement("span",null,u);return s.default.createElement(d.default,{content:m,style:{whiteSpace:"normal"}},s.default.createElement(o.default,{style:{width:32},toggle:p,focusToggleReasons:["escapeKey","toggleClick"]},s.default.createElement(l.default,{style:{minWidth:100}},s.default.createElement(l.default.Item,{onClick:t,disabled:n},s.default.createElement("span",{style:{margin:1}},(0,a.default)("Edit Drilldown").t())),s.default.createElement(l.default.Item,{icon:s.default.createElement("i",{className:"icon-trellis-layout",style:{marginRight:5}}),onClick:i,disabled:c},(0,a.default)("Trellis").t()))))};u.propTypes={onClickDrilldown:n.default.func.isRequired,onClickTrellis:n.default.func.isRequired,disableDrilldown:n.default.bool.isRequired,disableTrellis:n.default.bool.isRequired},t.default=u,e.exports=t.default},"dashboard/components/shared/AddNewButton":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(15)),s=c(i("require/underscore")),a=c(i(4)),r=c(i(0)),o=c(i(19)),l=c(i(327)),d=i("util/test_support");function c(e){return e&&e.__esModule?e:{default:e}}var h=function(t){var i=t.onClick,a=t.error;return r.default.createElement(o.default,(0,n.default)({icon:r.default.createElement(l.default,null),appearance:"pill",label:(0,s.default)("Add New").t(),onClick:i,error:a},(0,d.createTestHook)(e.i)))};h.propTypes={onClick:a.default.func.isRequired,error:a.default.bool},h.defaultProps={error:!1},t.default=h,e.exports=t.default},"dashboard/components/shared/DeleteButton":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(15)),s=c(i(4)),a=c(i(0)),r=c(i("require/underscore")),o=c(i(19)),l=c(i(112)),d=i("util/test_support");function c(e){return e&&e.__esModule?e:{default:e}}var h=function(t){var i=t.onClick;return a.default.createElement(o.default,(0,n.default)({"aria-label":(0,r.default)("Delete").t(),size:"small",icon:a.default.createElement(l.default,null),appearance:"pill",onClick:i,style:{flexGrow:"0",marginLeft:"5px"}},(0,d.createTestHook)(e.i)))};h.propTypes={onClick:s.default.func.isRequired},t.default=h,e.exports=t.default},"dashboard/components/shared/FormMessage":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=d(i(15)),s=d(i(4)),a=d(i(0)),r=d(i(23)),o=d(i(26)),l=i("util/test_support");function d(e){return e&&e.__esModule?e:{default:e}}var c=function(t){var i=t.active,s=t.type,d=t.message;return i?a.default.createElement(r.default,(0,n.default)({label:"",controlsLayout:"none"},(0,l.createTestHook)(e.i)),a.default.createElement(o.default,{type:s},d)):null};c.propTypes={active:s.default.bool.isRequired,type:s.default.string.isRequired,message:s.default.string.isRequired},t.default=c,e.exports=t.default},"dashboard/components/shared/ItemSelector":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=p(i(15)),s=p(i(167)),a=p(i("require/underscore")),r=p(i(4)),o=p(i(0)),l=p(i(23)),d=p(i(42)),c=p(i("shim/splunk.util")),h=p(i("dashboard/components/shared/FormMessage")),u=i("util/test_support");function p(e){return e&&e.__esModule?e:{default:e}}var m=c.default.sprintf,g=function(t){var i=t.label,r=t.items,c=t.activeItem,p=t.isLoading,g=t.filter,f=t.onChange,v=t.error,b=t.warning,y=t.hideNoMatchError,_=(0,s.default)(t,["label","items","activeItem","isLoading","filter","onChange","error","warning","hideNoMatchError"]),w=c&&r.length>0&&!r.find((function(e){return e.value===c})),k=m((0,a.default)("Selected %s %s, it does not match any %s in the list.").t(),i.toLowerCase(),c,i.toLowerCase()),T=!!(v||!y&&w),S=void 0;S=v?i+" "+v:w?k:"";var C=!!b,E=b?i+" "+b:"";return o.default.createElement("div",(0,n.default)({},(0,u.createTestHook)(e.i),_),o.default.createElement(h.default,{active:T,type:"error",message:S}),o.default.createElement(h.default,{active:C,type:"warning",message:E}),o.default.createElement(l.default,{label:i,error:T},o.default.createElement(d.default,{error:T,value:c,onChange:f,inline:!0,animateLoading:!0,isLoadingOptions:p,placeholder:p?(0,a.default)("Loading...").t():(0,a.default)("Select...").t(),filter:g},r.map((function(e){return o.default.createElement(d.default.Option,{key:e.value,label:e.label,value:e.value,description:e.description})})))))};g.propTypes={label:r.default.string.isRequired,items:r.default.arrayOf(r.default.shape({label:r.default.string.isRequired,value:r.default.string.isRequired}).isRequired).isRequired,activeItem:r.default.string.isRequired,isLoading:r.default.bool,filter:r.default.bool,onChange:r.default.func.isRequired,error:r.default.string,warning:r.default.string,hideNoMatchError:r.default.bool},g.defaultProps={isLoading:!1,filter:!1,error:"",warning:"",hideNoMatchError:!1},t.default=g,e.exports=t.default},"dashboard/components/shared/OpenInNewTab":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(15)),s=c(i(4)),a=c(i(0)),r=c(i("require/underscore")),o=c(i(23)),l=c(i(38)),d=i("util/test_support");function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e){return r.default.isString(e)?"_self"!==e:!!r.default.isBoolean(e)&&e},u=function(e){return"_self"===e?"_blank":"_blank"===e?"_self":!0!==e},p=function(t){var i=t.value,s=t.onClick;return a.default.createElement(o.default,(0,n.default)({label:""},(0,d.createTestHook)(e.i)),a.default.createElement(l.default,{value:i,selected:h(i),onClick:function(e){return s(e,{value:u(i)})}},(0,r.default)("Open in new tab").t()))};p.propTypes={value:s.default.oneOfType([s.default.string,s.default.bool]).isRequired,onClick:s.default.func.isRequired},t.default=p,e.exports=t.default},"dashboard/components/shared/SearchEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=f(i(16)),s=f(i(17)),a=f(i(20)),r=f(i(493)),o=f(i(21)),l=f(i(4)),d=f(i("components/BackboneAdapterBase")),c=f(i("views/shared/controls/SearchTextareaControl")),h=f(i("require/backbone")),u=f(i("controllers/dashboard/helpers/ModelHelper")),p=f(i("models/services/authentication/User")),m=i("util/theme_utils"),g=i("util/test_support");function f(e){return e&&e.__esModule?e:{default:e}}var v=function(t){function i(e,t){(0,n.default)(this,i);var s=(0,a.default)(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return s.model=Object.assign({},s.context.model,{content:new h.default.Model(s.context.model.report.entry.content.toJSON())}),s.model.content.set("search",e.value),s.collection=Object.assign({},s.context.collection,{searchBNFs:u.default.getCachedModel("parsedSearchBNFs",{app:s.model.application.get("app"),owner:s.model.application.get("owner"),count:0})}),s.model.content.on("change:search",s.handleSearchChange,s),s}return(0,o.default)(i,t),(0,s.default)(i,[{key:"componentDidMount",value:function(){(0,r.default)(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"componentDidMount",this).call(this),"pending"===this.collection.searchBNFs.dfd.state()&&this.collection.searchBNFs.dfd.done(this.backboneView.render)}},{key:"handleSearchChange",value:function(e,t){this.props.onChange(null,{value:t})}},{key:"getContainerProps",value:function(){return Object.assign((0,g.createTestHook)(e.i),this.props)}},{key:"getView",value:function(){var e=this.model.user.getSearchAssistant(),t=e===p.default.SEARCH_ASSISTANT.FULL?p.default.SEARCH_ASSISTANT.COMPACT:e;return new c.default({showLabel:!1,showRunSearch:!1,searchAssistant:t,model:{content:this.model.content,user:this.model.user,application:this.model.application},collection:{searchBNFs:this.collection.searchBNFs},syntaxHighlighting:(0,m.getSearchEditorTheme)()})}}]),i}(d.default);v.propTypes={value:l.default.string,onChange:l.default.func.isRequired},v.contextTypes={model:l.default.object.isRequired,collection:l.default.object.isRequired},t.default=v,e.exports=t.default},"dashboard/components/shared/TimeRangeSelector":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(15)),s=c(i(4)),a=c(i(0)),r=i("util/test_support"),o=c(i(23)),l=c(i(66)),d=c(i(324));function c(e){return e&&e.__esModule?e:{default:e}}var h={label:s.default.string,activeTimeRange:s.default.shape({earliest:s.default.oneOfType([s.default.string,s.default.number]),latest:s.default.oneOfType([s.default.string,s.default.number])}).isRequired,onTimeRangeChange:s.default.func.isRequired,isFetchingPresets:s.default.bool.isRequired,presets:s.default.arrayOf(s.default.object).isRequired,locale:s.default.string.isRequired,parseEarliest:s.default.shape({error:s.default.string,iso:s.default.string,time:s.default.string}),parseLatest:s.default.shape({error:s.default.string,iso:s.default.string,time:s.default.string}),onRequestParseEarliest:s.default.func.isRequired,onRequestParseLatest:s.default.func.isRequired,documentationURL:s.default.string},u=function(t){var i=t.label,s=t.activeTimeRange,c=t.onTimeRangeChange,h=t.isFetchingPresets,u=t.presets,p=t.locale,m=t.parseEarliest,g=t.parseLatest,f=t.onRequestParseEarliest,v=t.onRequestParseLatest,b=t.documentationURL;return a.default.createElement(o.default,(0,n.default)({label:i},(0,r.createTestHook)(e.i),{controlsLayout:"none"}),h?a.default.createElement(l.default,{size:"medium"}):a.default.createElement(d.default,{onChange:c,earliest:s.earliest||"",latest:s.latest||"",inline:!1,presets:u,locale:p,parseEarliest:m,parseLatest:g,onRequestParseEarliest:f,onRequestParseLatest:v,documentationURL:b}))};u.propTypes=h,u.defaultProps={label:"",parseEarliest:null,parseLatest:null,documentationURL:null},t.default=u,e.exports=t.default},"dashboard/components/shared/TimeRangeTokenEditor":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=g(i(15)),s=g(i(16)),a=g(i(17)),r=g(i(20)),o=g(i(21)),l=g(i("require/underscore")),d=g(i(4)),c=g(i(0)),h=g(i(23)),u=g(i(32)),p=g(i("dashboard/components/shared/FormMessage")),m=i("util/test_support");function g(e){return e&&e.__esModule?e:{default:e}}var f={activeTimeRangeToken:d.default.object.isRequired,onTimeRangeTokenChange:d.default.func.isRequired,earliestTokenError:d.default.string,latestTokenError:d.default.string},v=function(t){function i(e){(0,s.default)(this,i);var t=(0,r.default)(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={earliest:e.activeTimeRangeToken.earliest,latest:e.activeTimeRangeToken.latest},t.onTokenChange=t.onTokenChange.bind(t),t}return(0,o.default)(i,t),(0,a.default)(i,[{key:"componentWillReceiveProps",value:function(e){e.activeTimeRangeToken.earliest&&this.setState({earliest:e.activeTimeRangeToken.earliest}),e.activeTimeRangeToken.latest&&this.setState({latest:e.activeTimeRangeToken.latest})}},{key:"onTokenChange",value:function(e){var t=Object.assign({},this.state,e);this.props.onTimeRangeTokenChange(null,{value:t}),this.setState(t)}},{key:"render",value:function(){var t=this,i=(0,l.default)("Earliest Token").t(),s=(0,l.default)("Latest Token").t(),a=this.props,r=a.earliestTokenError,o=a.latestTokenError,d=!!r,g=!!o,v=d?i+" "+r:"",b=g?s+" "+o:"";return c.default.createElement("div",(0,n.default)({},l.default.omit(this.props,l.default.keys(f)),(0,m.createTestHook)(e.i)),c.default.createElement(p.default,(0,n.default)({active:d,type:"error",message:v},(0,m.createTestHook)(null,"earliestTimeTokenError"))),c.default.createElement(h.default,(0,n.default)({label:i,error:d},(0,m.createTestHook)(null,"earliestTimeToken")),c.default.createElement(u.default,{value:this.state.earliest,onChange:function(e,i){var n=i.value;t.onTokenChange({earliest:n})},error:d})),c.default.createElement(p.default,(0,n.default)({active:g,type:"error",message:b},(0,m.createTestHook)(null,"latestTimeTokenError"))),c.default.createElement(h.default,(0,n.default)({label:s,error:g},(0,m.createTestHook)(null,"latestTimeToken")),c.default.createElement(u.default,{value:this.state.latest,onChange:function(e,i){var n=i.value;t.onTokenChange({latest:n})},error:d})))}}]),i}(c.default.Component);v.propTypes=f,v.defaultProps={earliestTokenError:"",latestTokenError:""},t.default=v,e.exports=t.default},"dashboard/containers/editor/drilldown/DrilldownContainer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(119),a=i("dashboard/components/editor/drilldown/DrilldownEditor"),r=(n=a)&&n.__esModule?n:{default:n},o=i("dashboard/containers/editor/drilldown/drilldownActions");t.default=(0,s.connect)((function(e){return{isSupported:e.isSupported,isCustomViz:e.isCustomViz,activeAction:e.activeAction}}),(function(e){return{onActionChange:function(t,i){var n=i.value;e((0,o.updateActiveAction)(n))}}}))(r.default),e.exports=t.default},"dashboard/containers/editor/drilldown/actionTypes":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});t.UPDATE_LINK_TO_DASHBOARD_SETTING=Symbol("UPDATE_LINK_TO_DASHBOARD_SETTING"),t.UPDATE_LINK_TO_REPORT_SETTING=Symbol("UPDATE_LINK_TO_REPORT_SETTING"),t.UPDATE_LINK_TO_SEARCH_SETTING=Symbol("UPDATE_LINK_TO_SEARCH_SETTING"),t.UPDATE_TOKENS_SETTING=Symbol("UPDATE_TOKENS_SETTING"),t.UPDATE_LINK_TO_URL_SETTING=Symbol("UPDATE_LINK_TO_URL_SETTING"),t.UPDATE_ACTIVE_ACTION=Symbol("UPDATE_ACTIVE_ACTION"),t.FETCH_APPS_REQUEST=Symbol("FETCH_APPS_REQUEST"),t.FETCH_APPS_SUCCESS=Symbol("FETCH_APPS_SUCCESS"),t.FETCH_APPS_FAILURE=Symbol("FETCH_APPS_FAILURE"),t.FETCH_DASHBOARDS_REQUEST=Symbol("FETCH_DASHBOARDS_REQUEST"),t.FETCH_DASHBOARDS_SUCCESS=Symbol("FETCH_DASHBOARDS_SUCCESS"),t.FETCH_DASHBOARDS_FAILURE=Symbol("FETCH_DASHBOARDS_FAILURE"),t.FETCH_REPORTS_REQUEST=Symbol("FETCH_REPORTS_REQUEST"),t.FETCH_REPORTS_SUCCESS=Symbol("FETCH_REPORTS_SUCCESS"),t.FETCH_REPORTS_FAILURE=Symbol("FETCH_REPORTS_FAILURE"),t.FETCH_TIME_RANGE_PRESETS_REQUEST=Symbol("FETCH_TIME_RANGE_PRESETS_REQUEST"),t.FETCH_TIME_RANGE_PRESETS_SUCCESS=Symbol("FETCH_TIME_RANGE_PRESETS_SUCCESS"),t.FETCH_TIME_RANGE_PRESETS_FAILURE=Symbol("FETCH_TIME_RANGE_PRESETS_FAILURE"),t.PARSE_EARLIEST_REQUEST=Symbol("PARSE_EARLIEST_REQUEST"),t.PARSE_EARLIEST_SUCCESS=Symbol("PARSE_EARLIEST_SUCCESS"),t.PARSE_EARLIEST_FAILURE=Symbol("PARSE_EARLIEST_FAILURE"),t.PARSE_LATEST_REQUEST=Symbol("PARSE_LATEST_REQUEST"),t.PARSE_LATEST_SUCCESS=Symbol("PARSE_LATEST_SUCCESS"),t.PARSE_LATEST_FAILURE=Symbol("PARSE_LATEST_FAILURE")},"dashboard/containers/editor/drilldown/dashboard/DashboardContainer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i(119),s=c(i("dashboard/components/editor/drilldown/dashboard/DashboardActionEditor")),a=i("controllers/dashboard/helpers/DrilldownStateConverter"),r=i("dashboard/containers/editor/drilldown/drilldownNames"),o=c(i("uri/route")),l=i("dashboard/containers/editor/drilldown/dashboard/dashboardActions"),d=i("dashboard/containers/editor/drilldown/drilldownActions");function c(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.connect)((function(e){return Object.assign({},{apps:e.apps.items,isFetchingApps:e.apps.isFetching,dashboards:e.dashboards.items,isFetchingDashboards:e.dashboards.isFetching,activeApp:e.forms[r.LINK_TO_DASHBOARD].activeApp,activeAppError:e.forms[r.LINK_TO_DASHBOARD].activeAppError,activeDashboard:e.forms[r.LINK_TO_DASHBOARD].activeDashboard,activeDashboardError:e.forms[r.LINK_TO_DASHBOARD].activeDashboardError,target:e.forms[r.LINK_TO_DASHBOARD].target,params:e.forms[r.LINK_TO_DASHBOARD].params,previewLink:{label:(0,a.generateLinkToDashboard)(e),value:(0,a.generateLinkToDashboard)(e)},learnMoreLinkForTokens:o.default.docHelp(e.splunkEnv.application.root,e.splunkEnv.application.locale,"learnmore.dashboard.drilldown.tokens"),candidateTokens:e.elementEnv.drilldownTokens})}),(function(e){return{onAppChange:function(t,i){var n=i.value;e((0,l.updateLinkToDashboardSetting)({activeApp:n,activeDashboard:""})),e((0,d.fetchDashboards)({app:n}))},onDashboardChange:function(t,i){var n=i.value;e((0,l.updateLinkToDashboardSetting)({activeDashboard:n}))},onTargetChange:function(t,i){var n=i.value;e((0,l.updateLinkToDashboardSetting)({target:n}))},onParamsChange:function(t){e((0,l.updateLinkToDashboardSetting)({params:t}))}}}))(s.default),e.exports=t.default},"dashboard/containers/editor/drilldown/dashboard/dashboardActions":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.updateLinkToDashboardSetting=void 0;var n=i("dashboard/containers/editor/drilldown/actionTypes");t.updateLinkToDashboardSetting=function(e){return{type:n.UPDATE_LINK_TO_DASHBOARD_SETTING,value:e}}},"dashboard/containers/editor/drilldown/dashboard/dashboardReducer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i("dashboard/containers/editor/drilldown/actionTypes"),s={activeApp:"",activeAppError:"",activeDashboard:"",activeDashboardError:"",params:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case n.UPDATE_LINK_TO_DASHBOARD_SETTING:return Object.assign({},e,t.value);default:return e}},e.exports=t.default},"dashboard/containers/editor/drilldown/drilldownActions":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.validateLinkToDashboard=t.fetchReports=t.fetchDashboards=t.fetchApps=t.fetchTimeRangePresets=t.updateActiveAction=void 0;var n=c(i("require/underscore")),s=c(i("controllers/dashboard/helpers/ModelHelper")),a=c(i("collections/services/AppLocals")),r=c(i("shim/jquery")),o=i("dashboard/containers/editor/drilldown/drilldownNames"),l=i("dashboard/containers/editor/drilldown/actionTypes"),d=i("dashboard/containers/editor/drilldown/dashboard/dashboardActions");function c(e){return e&&e.__esModule?e:{default:e}}var h=t.updateActiveAction=function(e){return{type:l.UPDATE_ACTIVE_ACTION,value:e}},u=function(e){return{type:l.FETCH_TIME_RANGE_PRESETS_REQUEST,fetchOptions:e}},p=function(e,t){return{type:l.FETCH_TIME_RANGE_PRESETS_SUCCESS,timeRangePresets:e,fetchOptions:t}},m=function(e,t){return{type:l.FETCH_TIME_RANGE_PRESETS_FAILURE,error:e,fetchOptions:t}};t.fetchTimeRangePresets=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,i){var a=n.default.defaults({},e,{count:-1});if(i().timeRangePresets.isFetching)return(new r.default.Deferred).resolve();t(u(a));var o=s.default.getCachedModel("times",a);return o.dfd.done((function(){var e=o.filter((function(e){return e.entry.content.get("earliest_time")||e.entry.content.get("latest_time")})).map((function(e){var t=e.entry.content.toJSON();return{label:t.label,earliest:t.earliest_time||"",latest:t.latest_time||""}}));return t(p(e,a))})).fail((function(){return t(m("fetch time range presets failed!",a))}))}},t.fetchApps=function(e){return function(t,i){var s=n.default.defaults({},e);if(s.data=n.default.defaults({},s.data,{count:-1,sort_key:"label"}),i().apps.isFetching)return(new r.default.Deferred).resolve();t(function(e){return{type:l.FETCH_APPS_REQUEST,fetchOptions:e}}(s));var o=new a.default;return o.fetch(s).then((function(){return t(function(e,t){return{type:l.FETCH_APPS_SUCCESS,value:e,fetchOptions:t}}(o.listWithoutInternals().filter((function(e){return e.entry.content.get("visible")&&e.entry.content.get("show_in_nav")&&!e.entry.content.get("disabled")&&"launcher"!==e.entry.get("name")})).map((function(e){return{label:e.entry.content.get("label"),value:e.entry.get("name")}})),s))}),(function(){return t(function(e,t){return{type:l.FETCH_APPS_FAILURE,value:e,fetchOptions:t}}("fetch apps failed",s))}))}},t.fetchDashboards=function(e){return function(t,i){var a=n.default.defaults({},e,{count:-1,sort_key:"label",digest:"1",search:'(eai:type="views" OR eai:type="html")'});if(i().dashboards.isFetching)return(new r.default.Deferred).resolve();t(function(e){return{type:l.FETCH_DASHBOARDS_REQUEST,fetchOptions:e}}(a));var o=s.default.getCachedModel("dashboards",a);return o.dfd.then((function(){return t(function(e,t){return{type:l.FETCH_DASHBOARDS_SUCCESS,value:e,fetchOptions:t}}(o.map((function(e){return{label:e.entry.content.get("label"),value:e.entry.get("name")}})),a))}),(function(){return t(function(e,t){return{type:l.FETCH_DASHBOARDS_FAILURE,value:e,fetchOptions:t}}("fetch dashboards failed",a))}))}},t.fetchReports=function(e){return function(t,i){var a=n.default.defaults({},e,{count:-1,sort_key:"name",search:"is_visible=1"});if(i().reports.isFetching)return(new r.default.Deferred).resolve();t(function(e){return{type:l.FETCH_REPORTS_REQUEST,fetchOptions:e}}(a));var o=s.default.getCachedModel("reports",Object.assign({},a));return o.dfd.then((function(){return t(function(e,t){return{type:l.FETCH_REPORTS_SUCCESS,value:e,fetchOptions:t}}(o.map((function(e){return{label:e.entry.get("name"),value:e.entry.get("name")}})),a))}),(function(){return t(function(e,t){return{type:l.FETCH_REPORTS_FAILURE,value:e,fetchOptions:t}}("fetch reports failed",a))}))}},t.validateLinkToDashboard=function(){return function(e,t){var i=t();if(i.activeAction===o.LINK_TO_DASHBOARD){var n=i.forms[o.LINK_TO_DASHBOARD].activeDashboard;if(n)i.dashboards.items.find((function(e){return e.value===n}))||(e(h(o.LINK_TO_CUSTOM_URL)),e((0,d.updateLinkToDashboardSetting)({activeDashboard:""})))}}}},"dashboard/containers/editor/drilldown/drilldownNames":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});t.NO_DRILLDOWN="none",t.LINK_TO_SEARCH="linkToSearch",t.LINK_TO_DASHBOARD="linkToDashboard",t.LINK_TO_REPORT="linkToReport",t.LINK_TO_CUSTOM_URL="linkToCustomURL",t.EDIT_TOKENS="tokens"},"dashboard/containers/editor/drilldown/drilldownReducer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=p(i(73)),a=i(330),r=i("dashboard/containers/editor/drilldown/drilldownNames"),o=i("dashboard/containers/editor/drilldown/actionTypes"),l=p(i("dashboard/containers/editor/drilldown/dashboard/dashboardReducer")),d=p(i("dashboard/containers/editor/drilldown/search/searchReducer")),c=p(i("dashboard/containers/editor/drilldown/report/reportReducer")),h=p(i("dashboard/containers/editor/drilldown/url/urlReducer")),u=p(i("dashboard/containers/editor/drilldown/tokens/tokensReducer"));function p(e){return e&&e.__esModule?e:{default:e}}var m=(0,a.combineReducers)({isSupported:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},isCustomViz:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},activeAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.NO_DRILLDOWN,t=arguments[1];switch(t.type){case o.UPDATE_ACTIVE_ACTION:return t.value;default:return e}},apps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,fetchOptions:{},items:[],error:""},t=arguments[1];switch(t.type){case o.FETCH_APPS_REQUEST:return{isFetching:!0,fetchOptions:t.fetchOptions,items:[],error:""};case o.FETCH_APPS_SUCCESS:return{isFetching:!1,fetchOptions:t.fetchOptions,items:t.value,error:""};case o.FETCH_APPS_FAILURE:return{isFetching:!1,fetchOptions:t.fetchOptions,items:[],error:t.value};default:return e}},dashboards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,fetchOptions:{},items:[],error:""},t=arguments[1];switch(t.type){case o.FETCH_DASHBOARDS_REQUEST:return{isFetching:!0,fetchOptions:t.fetchOptions,items:[],error:""};case o.FETCH_DASHBOARDS_SUCCESS:return{isFetching:!1,fetchOptions:t.fetchOptions,items:t.value,error:""};case o.FETCH_DASHBOARDS_FAILURE:return{isFetching:!1,fetchOptions:t.fetchOptions,items:[],error:t.value};default:return e}},reports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,fetchOptions:{},items:[],error:""},t=arguments[1];switch(t.type){case o.FETCH_REPORTS_REQUEST:return{isFetching:!0,fetchOptions:t.fetchOptions,items:[],error:""};case o.FETCH_REPORTS_SUCCESS:return{isFetching:!1,fetchOptions:t.fetchOptions,items:t.value,error:""};case o.FETCH_REPORTS_FAILURE:return{isFetching:!1,fetchOptions:t.fetchOptions,items:[],error:t.value};default:return e}},forms:(0,a.combineReducers)((n={},(0,s.default)(n,r.LINK_TO_SEARCH,d.default),(0,s.default)(n,r.LINK_TO_DASHBOARD,l.default),(0,s.default)(n,r.LINK_TO_REPORT,c.default),(0,s.default)(n,r.LINK_TO_CUSTOM_URL,h.default),(0,s.default)(n,r.EDIT_TOKENS,u.default),n)),timeRangePresets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,fetchOptions:{},items:[],error:""},t=arguments[1];switch(t.type){case o.FETCH_TIME_RANGE_PRESETS_REQUEST:return{isFetching:!0,fetchOptions:t.fetchOptions,items:[],error:""};case o.FETCH_TIME_RANGE_PRESETS_SUCCESS:return{isFetching:!1,fetchOptions:t.fetchOptions,items:t.timeRangePresets,error:""};case o.FETCH_TIME_RANGE_PRESETS_FAILURE:return{isFetching:!1,fetchOptions:t.fetchOptions,items:[],error:t.error};default:return e}},elementEnv:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},splunkEnv:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}});t.default=m,e.exports=t.default},"dashboard/containers/editor/drilldown/report/ReportContainer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(119),a=i("dashboard/components/editor/drilldown/ReportActionEditor"),r=(n=a)&&n.__esModule?n:{default:n},o=i("dashboard/containers/editor/drilldown/drilldownNames"),l=i("dashboard/containers/editor/drilldown/report/reportActions"),d=i("dashboard/containers/editor/drilldown/drilldownActions");var c=(0,s.connect)((function(e){return{activeApp:e.forms[o.LINK_TO_REPORT].activeApp,activeAppError:e.forms[o.LINK_TO_REPORT].activeAppError,apps:e.apps.items,isFetchingApps:e.apps.isFetching,activeReport:e.forms[o.LINK_TO_REPORT].activeReport,activeReportError:e.forms[o.LINK_TO_REPORT].activeReportError,target:e.forms[o.LINK_TO_REPORT].target,reports:e.reports.items,isFetchingReports:e.reports.isFetching}}),(function(e){return{onAppChange:function(t,i){var n=i.value;e((0,l.updateLinkToReportSetting)({activeApp:n,activeReport:""})),e((0,d.fetchReports)({app:n}))},onReportChange:function(t,i){var n=i.value;e((0,l.updateLinkToReportSetting)({activeReport:n}))},onTargetChange:function(t,i){var n=i.value;e((0,l.updateLinkToReportSetting)({target:n}))}}}))(r.default);t.default=c,e.exports=t.default},"dashboard/containers/editor/drilldown/report/reportActions":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.updateLinkToReportSetting=void 0;var n=i("dashboard/containers/editor/drilldown/actionTypes");t.updateLinkToReportSetting=function(e){return{type:n.UPDATE_LINK_TO_REPORT_SETTING,value:e}}},"dashboard/containers/editor/drilldown/report/reportReducer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i("dashboard/containers/editor/drilldown/actionTypes"),s={activeApp:"",activeAppError:"",activeReport:"",activeReportError:""};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case n.UPDATE_LINK_TO_REPORT_SETTING:return Object.assign({},e,t.value);default:return e}},e.exports=t.default},"dashboard/containers/editor/drilldown/search/SearchContainer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i(119),s=l(i("dashboard/components/editor/drilldown/search/SearchActionEditor")),a=i("dashboard/containers/editor/drilldown/drilldownNames"),r=l(i("uri/route")),o=i("dashboard/containers/editor/drilldown/search/searchActions");function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.connect)((function(e){return{options:e.forms[a.LINK_TO_SEARCH].options,activeOption:e.forms[a.LINK_TO_SEARCH].activeOption,search:e.forms[a.LINK_TO_SEARCH].search,searchError:e.forms[a.LINK_TO_SEARCH].searchError,isFetchingPresets:e.timeRangePresets.isFetching,presets:e.timeRangePresets.items,locale:e.splunkEnv.application.locale,parseEarliest:e.forms[a.LINK_TO_SEARCH].parseEarliest,parseLatest:e.forms[a.LINK_TO_SEARCH].parseLatest,extraTimeRangeOptions:e.forms[a.LINK_TO_SEARCH].extraTimeRangeOptions,activeTimeRangeOption:e.forms[a.LINK_TO_SEARCH].activeTimeRangeOption,activeTimeRange:e.forms[a.LINK_TO_SEARCH].activeTimeRange,activeTimeRangeToken:e.forms[a.LINK_TO_SEARCH].activeTimeRangeToken,earliestTokenError:e.forms[a.LINK_TO_SEARCH].earliestTokenError,latestTokenError:e.forms[a.LINK_TO_SEARCH].latestTokenError,target:e.forms[a.LINK_TO_SEARCH].target,learnMoreLinkForTokens:r.default.docHelp(e.splunkEnv.application.root,e.splunkEnv.application.locale,"learnmore.dashboard.drilldown.tokens"),timeRangePickerDocsURL:r.default.docHelp(e.splunkEnv.application.root,e.splunkEnv.application.locale,"learnmore.timerange.picker")}}),(function(e){return{onOptionChange:function(t,i){var n=i.value;e((0,o.updateLinkToSearchSetting)({activeOption:n}))},onSearchChange:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.value;e((0,o.updateLinkToSearchSetting)({search:n}))},onTargetChange:function(t,i){var n=i.value;e((0,o.updateLinkToSearchSetting)({target:n}))},onTimeRangeOptionChange:function(t,i){var n=i.value;e((0,o.updateLinkToSearchSetting)({activeTimeRangeOption:n}))},onTimeRangeChange:function(t,i){var n=i.earliest,s=i.latest;e((0,o.updateLinkToSearchSetting)({activeTimeRange:{earliest:n,latest:s}}))},onTimeRangeTokenChange:function(t,i){var n=i.value;e((0,o.updateLinkToSearchSetting)({activeTimeRangeToken:n}))},onRequestParseEarliest:function(t){e((0,o.parseEarliest)(t))},onRequestParseLatest:function(t){e((0,o.parseLatest)(t))}}}))(s.default),e.exports=t.default},"dashboard/containers/editor/drilldown/search/searchActions":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.parseLatest=t.parseEarliest=t.updateLinkToSearchSetting=void 0;var n=i("dashboard/containers/editor/drilldown/actionTypes"),s=i("dashboard/containers/editor/drilldown/drilldownNames"),a=i(617);t.updateLinkToSearchSetting=function(e){return{type:n.UPDATE_LINK_TO_SEARCH_SETTING,value:e}},t.parseEarliest=function(e){return function(t,i){return i().forms[s.LINK_TO_SEARCH].isParsingEarliest?Promise.resolve():(t(function(e){return{type:n.PARSE_EARLIEST_REQUEST,parseEarliest:{time:e}}}(e)),(0,a.getISO)(e).then((function(e){return t(function(e){return{type:n.PARSE_EARLIEST_SUCCESS,parseEarliest:e}}(e))})).catch((function(e){return t(function(e){return{type:n.PARSE_EARLIEST_FAILURE,parseEarliest:e}}(e))})))}},t.parseLatest=function(e){return function(t,i){return i().forms[s.LINK_TO_SEARCH].isParsingLatest?Promise.resolve():(t(function(e){return{type:n.PARSE_LATEST_REQUEST,parseLatest:{time:e}}}(e)),(0,a.getISO)(e).then((function(e){return t(function(e){return{type:n.PARSE_LATEST_SUCCESS,parseLatest:e}}(e))})).catch((function(e){return t(function(e){return{type:n.PARSE_LATEST_FAILURE,parseLatest:e}}(e))})))}}},"dashboard/containers/editor/drilldown/search/searchReducer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=i("require/underscore"),a=(n=s)&&n.__esModule?n:{default:n},r=i("dashboard/containers/editor/drilldown/actionTypes"),o=i("dashboard/containers/editor/drilldown/search/timeRangeOptionNames");var l={options:[{label:(0,a.default)("Auto").t(),value:"default"},{label:(0,a.default)("Custom").t(),value:"custom"}],activeOption:"default",search:"",searchError:"",target:"",isParsingEarliest:!1,parseEarliest:{},isParsingLatest:!1,parseLatest:{},extraTimeRangeOptions:[],activeTimeRangeOption:o.EXPLICIT_OPTION,activeTimeRange:{earliest:0,latest:""},activeTimeRangeToken:{earliest:"",latest:""},earliestTokenError:"",latestTokenError:""};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case r.UPDATE_LINK_TO_SEARCH_SETTING:return Object.assign({},e,t.value);case r.PARSE_EARLIEST_REQUEST:return Object.assign({},e,{isParsingEarliest:!0,parseEarliest:t.parseEarliest});case r.PARSE_EARLIEST_SUCCESS:case r.PARSE_EARLIEST_FAILURE:return Object.assign({},e,{isParsingEarliest:!1,parseEarliest:t.parseEarliest});case r.PARSE_LATEST_REQUEST:return Object.assign({},e,{isParsingLatest:!0,parseLatest:t.parseLatest});case r.PARSE_LATEST_SUCCESS:case r.PARSE_LATEST_FAILURE:return Object.assign({},e,{isParsingLatest:!1,parseLatest:t.parseLatest});default:return e}},e.exports=t.default},"dashboard/containers/editor/drilldown/search/timeRangeOptionNames":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});t.EXPLICIT_OPTION="__splunk__EXPLICIT_TIME_OPTION",t.TOKEN_OPTION="__splunk__TOKEN_TIME_OPTION",t.GLOBAL_OPTION="__splunk__GLOBAL_OPTION"},"dashboard/containers/editor/drilldown/tokens/TokensContainer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i(119),s=d(i("require/underscore")),a=d(i("dashboard/components/editor/drilldown/tokens/TokensActionEditor")),r=i("dashboard/containers/editor/drilldown/drilldownNames"),o=d(i("uri/route")),l=i("dashboard/containers/editor/drilldown/tokens/tokensActions");function d(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.connect)((function(e){return{items:e.forms[r.EDIT_TOKENS].items,error:e.forms[r.EDIT_TOKENS].error,candidateTokens:e.elementEnv.drilldownTokens,learnMoreLinkForTokenUsage:o.default.docHelp(e.splunkEnv.application.root,e.splunkEnv.application.locale,"learnmore.dashboard.drilldown.example_token_usage")}}),(function(e){return{onUpdateTokens:function(t){e((0,l.updateTokensSetting)({items:t.map((function(e){return"unset"===e.type?s.default.omit(e,"value"):s.default.defaults({},e,{value:""})}))}))}}}))(a.default),e.exports=t.default},"dashboard/containers/editor/drilldown/tokens/tokensActions":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.updateTokensSetting=void 0;var n=i("dashboard/containers/editor/drilldown/actionTypes");t.updateTokensSetting=function(e){return{type:n.UPDATE_TOKENS_SETTING,value:e}}},"dashboard/containers/editor/drilldown/tokens/tokensReducer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i("dashboard/containers/editor/drilldown/actionTypes");t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},t=arguments[1];switch(t.type){case n.UPDATE_TOKENS_SETTING:return Object.assign({},e,t.value);default:return e}},e.exports=t.default},"dashboard/containers/editor/drilldown/url/UrlContainer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(119),a=i("dashboard/components/editor/drilldown/UrlActionEditor"),r=(n=a)&&n.__esModule?n:{default:n},o=i("dashboard/containers/editor/drilldown/drilldownNames"),l=i("dashboard/containers/editor/drilldown/url/urlActions");t.default=(0,s.connect)((function(e){return{url:e.forms[o.LINK_TO_CUSTOM_URL].url,urlError:e.forms[o.LINK_TO_CUSTOM_URL].urlError,target:e.forms[o.LINK_TO_CUSTOM_URL].target}}),(function(e){return{onUrlChange:function(t,i){var n=i.value;e((0,l.updateLinkToURLSetting)({url:n}))},onTargetChange:function(t,i){var n=i.value;e((0,l.updateLinkToURLSetting)({target:n}))}}}))(r.default),e.exports=t.default},"dashboard/containers/editor/drilldown/url/urlActions":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.updateLinkToURLSetting=void 0;var n=i("dashboard/containers/editor/drilldown/actionTypes");t.updateLinkToURLSetting=function(e){return{type:n.UPDATE_LINK_TO_URL_SETTING,value:e}}},"dashboard/containers/editor/drilldown/url/urlReducer":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=i("dashboard/containers/editor/drilldown/actionTypes"),s={url:"http://",target:""};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case n.UPDATE_LINK_TO_URL_SETTING:return Object.assign({},e,t.value);default:return e}},e.exports=t.default},"dashboard/containers/utils/validators":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.urlHasProtocol=t.numberWithInRange=t.stringNotEmpty=void 0;var n=s(i("require/underscore"));function s(e){return e&&e.__esModule?e:{default:e}}var a=s(i("shim/splunk.util")).default.sprintf;t.stringNotEmpty=function(e){var t="";return e||(t=(0,n.default)("is required").t()),t},t.numberWithInRange=function(e,t){return function(i){var s="";return n.default.isNumber(i)?i<e&&i>t&&(s=a((0,n.default)("should within range (%s,%s)").t(),e,t)):s=(0,n.default)("expected a number").t(),s}},t.urlHasProtocol=function(e){var t="";return/^https?:\/\//.test(e)||(t=(0,n.default)("URL should start with http:// or https://").t()),t}},"dashboard/factory_config":function(e,t,i){var n,s;n=[i("splunkjs/mvc/utils"),i("stubs/splunk.config")],void 0===(s=function(e,t){return{typeMap:{dashboard:{getModule:function(){return i("views/dashboard/Master")},class:"container",autoId:"dashboard",state:{getModule:function(){return i("dashboard/state/DashboardMasterState")}}},"row-column":{getModule:function(){return i("views/dashboard/layout/row_column/RowColumnLayout")},class:"container",autoId:"layout",state:{getModule:function(){return i("dashboard/state/LayoutState")}}},row:{getModule:function(){return i("views/dashboard/layout/row_column/Row")},class:"container",autoId:"row",state:{getModule:function(){return i("dashboard/state/RowState")}}},panel:{getModule:function(){return i("views/dashboard/layout/Panel")},class:"container",settingsOptions:{tokens:!0},autoId:"panel",state:{getModule:function(){return i("dashboard/state/PanelState")}}},fieldset:{getModule:function(){return i("views/dashboard/form/GlobalFieldset")},class:"container",autoId:"fieldset",state:{getModule:function(){return i("dashboard/state/FieldsetState")}}},panelref:{getModule:function(){return i("views/dashboard/layout/PanelRef")},class:"container",settingsOptions:{tokens:!0},autoId:"panel",state:{getModule:function(){return i("dashboard/state/PanelState")}}},chart:{getModule:function(){return i("views/dashboard/element/DashboardElement")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"charting"}},table:{getModule:function(){return i("views/dashboard/element/DashboardElement")},class:"viz",reportContent:{"display.general.type":"statistics"}},single:{getModule:function(){return i("views/dashboard/element/DashboardElement")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"singlevalue"}},map:{getModule:function(){return i("views/dashboard/element/DashboardElement")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"mapping"}},event:{getModule:function(){return i("views/dashboard/element/DashboardElement")},class:"viz",reportContent:{"display.general.type":"events"}},viz:{getModule:function(){return i("views/dashboard/element/DashboardElement")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"custom"}},html:{getModule:function(){return i("views/dashboard/element/Html")},class:"content",renameSettings:{content:"html"}},"text-input":{getModule:function(){return i("views/dashboard/form/Input")},class:"input",settingsToCreate:{blankIsUndefined:!0,type:"text",getView:function(){return i("splunkjs/mvc/textinputview")}}},"dropdown-input":{getModule:function(){return i("views/dashboard/form/Input")},class:"input",settingsToCreate:{type:"dropdown",getView:function(){return i("splunkjs/mvc/dropdownview")}}},"radio-input":{getModule:function(){return i("views/dashboard/form/Input")},class:"input",settingsToCreate:{multiValue:!1,type:"radio",getView:function(){return i("splunkjs/mvc/radiogroupview")}}},"link-input":{getModule:function(){return i("views/dashboard/form/Input")},class:"input",settingsToCreate:{type:"link",getView:function(){return i("splunkjs/mvc/linklistview")}}},"multiselect-input":{getModule:function(){return i("views/dashboard/form/Input")},class:"input",settingsToCreate:{multiValue:!0,type:"multiselect",getView:function(){return i("splunkjs/mvc/multidropdownview")}}},"checkbox-input":{getModule:function(){return i("views/dashboard/form/Input")},class:"input",settingsToCreate:{multiValue:!0,type:"checkbox",getView:function(){return i("splunkjs/mvc/checkboxgroupview")}}},"time-input":{getModule:function(){return i("views/dashboard/form/Input")},settingsToCreate:{type:"time",getView:function(){return i("splunkjs/mvc/timerangeview")}},class:"input"},drilldown:{getModule:function(){return i("splunkjs/mvc/simplexml/eventhandler")},class:"event",settingsToCreate:{event:"drilldown"}},selection:{getModule:function(){return i("splunkjs/mvc/simplexml/eventhandler")},class:"event",settingsToCreate:{event:"selection"}},"input-change":{getModule:function(){return i("splunkjs/mvc/simplexml/eventhandler")},class:"event",settingsToCreate:{event:"valueChange"}},"init-event-handler":{class:"event",getModule:function(){return i("splunkjs/mvc/simplexml/dashboardeventhandler")}},"event-manager":{class:"eventmanager",getModule:function(){return i("dashboard/manager/EventManager")}},"inline-search":{getModule:function(){return i("splunkjs/mvc/searchmanager")},class:"manager",settingsToCreate:{status_buckets:0,cancelOnUnload:!0,auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1,defaultsToGlobalTimerange:!0,replaceTabsInSearch:!0,provenance:function(){return"UI:Dashboard:"+e.getPageInfo().page},check_risky_command:t.ENABLE_RISKY_COMMAND_CHECK_DASHBOARD},renameSettings:{query:"search",earliest:"earliest_time",latest:"latest_time",sampleRatio:"sample_ratio"}},"saved-search":{getModule:function(){return i("splunkjs/mvc/savedsearchmanager")},class:"manager",settingsToCreate:{status_buckets:0,cancelOnUnload:!0,auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1,provenance:function(){return"UI:Dashboard:"+e.getPageInfo().page},check_risky_command:t.ENABLE_RISKY_COMMAND_CHECK_DASHBOARD},renameSettings:{ref:"searchname",name:"searchname",earliest:"earliest_time",latest:"latest_time"}},"postprocess-search":{getModule:function(){return i("splunkjs/mvc/postprocessmanager")},settingsToCreate:{replaceTabsInSearch:!0,check_risky_command:t.ENABLE_RISKY_COMMAND_CHECK_DASHBOARD},renameSettings:{base:"managerid",query:"search",postprocess:"search"},class:"manager"},"search-eventhandler":{getModule:function(){return i("splunkjs/mvc/simplexml/searcheventhandler")},class:"event"}},classes:{container:{dom:!0},content:{settingsOptions:{tokens:!0},autoId:"content",dom:!0,state:{getModule:function(){return i("dashboard/state/ElementState")}}},viz:{settingsOptions:{tokens:!0},autoId:"element",dom:!0,state:{getModule:function(){return i("dashboard/state/ElementState")}}},input:{settingsToCreate:{handleValueChange:!0},settingsOptions:{tokens:!0},autoId:"input",dom:!0,state:{getModule:function(){return i("dashboard/state/InputState")}}},manager:{settingsToCreate:{auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1},settingsOptions:{tokens:!0,tokenNamespace:"submitted"},autoId:"search",state:{getModule:function(){return i("dashboard/state/SearchState")}}},eventmanager:{autoId:"evtmanager",state:{getModule:function(){return i("dashboard/state/EventManagerState")}}},event:{autoId:"evt"}}}}.apply(t,n))||(e.exports=s)},"dashboard/factory_config_legacy":function(e,t,i){var n,s;n=[i("splunkjs/mvc/utils")],void 0===(s=function(e){return{typeMap:{dashboard:{getModule:function(){return i("splunkjs/mvc/simplexml/dashboardview")},class:"container",autoId:"dashboard"},row:{getModule:function(){return i("splunkjs/mvc/simplexml/dashboard/row")},class:"container",autoId:"row"},panel:{getModule:function(){return i("splunkjs/mvc/simplexml/dashboard/panel")},class:"container",settingsOptions:{tokens:!0},autoId:"panel"},fieldset:{getModule:function(){return i("splunkjs/mvc/simpleform/fieldsetview")},class:"container",autoId:"fieldset"},panelref:{getModule:function(){return i("splunkjs/mvc/simplexml/dashboard/panelref")},class:"container",settingsOptions:{tokens:!0},autoId:"panel"},chart:{getModule:function(){return i("splunkjs/mvc/simplexml/element/chart")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"charting"}},table:{getModule:function(){return i("splunkjs/mvc/simplexml/element/table")},class:"viz",reportContent:{"display.general.type":"statistics"}},single:{getModule:function(){return i("splunkjs/mvc/simplexml/element/single")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"singlevalue"}},map:{getModule:function(){return i("splunkjs/mvc/simplexml/element/map")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"mapping"}},event:{getModule:function(){return i("splunkjs/mvc/simplexml/element/event")},class:"viz",reportContent:{"display.general.type":"events"}},viz:{getModule:function(){return i("splunkjs/mvc/simplexml/element/visualization")},class:"viz",reportContent:{"display.general.type":"visualizations","display.visualizations.type":"custom"}},html:{getModule:function(){return i("splunkjs/mvc/simplexml/element/html")},class:"content",renameSettings:{content:"html"}},"text-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/text")},class:"input",settingsToCreate:{blankIsUndefined:!0}},"dropdown-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/dropdown")},class:"input"},"radio-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/radiogroup")},class:"input",settingsToCreate:{multiValue:!1}},"link-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/linklist")},class:"input"},"multiselect-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/multiselect")},class:"input",settingsToCreate:{multiValue:!0}},"checkbox-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/checkboxgroup")},class:"input",settingsToCreate:{multiValue:!0}},"time-input":{getModule:function(){return i("splunkjs/mvc/simpleform/input/timerange")},class:"input"},drilldown:{getModule:function(){return i("splunkjs/mvc/simplexml/eventhandler")},class:"event",settingsToCreate:{event:"drilldown"}},selection:{getModule:function(){return i("splunkjs/mvc/simplexml/eventhandler")},class:"event",settingsToCreate:{event:"selection"}},"input-change":{getModule:function(){return i("splunkjs/mvc/simplexml/eventhandler")},class:"event",settingsToCreate:{event:"valueChange"}},"init-event-handler":{class:"event",getModule:function(){return i("splunkjs/mvc/simplexml/dashboardeventhandler")}},"event-manager":{class:"eventmanager",getModule:function(){return i("dashboard/manager/EventManager")}},"inline-search":{getModule:function(){return i("splunkjs/mvc/searchmanager")},class:"manager",settingsToCreate:{status_buckets:0,cancelOnUnload:!0,auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1,defaultsToGlobalTimerange:!0,replaceTabsInSearch:!0,provenance:function(){return"UI:Dashboard:"+e.getPageInfo().page}},renameSettings:{query:"search",earliest:"earliest_time",latest:"latest_time",sampleRatio:"sample_ratio"}},"saved-search":{getModule:function(){return i("splunkjs/mvc/savedsearchmanager")},class:"manager",settingsToCreate:{status_buckets:0,cancelOnUnload:!0,auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1,provenance:function(){return"UI:Dashboard:"+e.getPageInfo().page}},renameSettings:{ref:"searchname",name:"searchname",earliest:"earliest_time",latest:"latest_time"}},"postprocess-search":{getModule:function(){return i("splunkjs/mvc/postprocessmanager")},settingsToCreate:{replaceTabsInSearch:!0},renameSettings:{base:"managerid",query:"search",postprocess:"search"},class:"manager"},"search-eventhandler":{getModule:function(){return i("splunkjs/mvc/simplexml/searcheventhandler")},class:"event"}},classes:{container:{dom:!0},content:{settingsOptions:{tokens:!0},autoId:"content",dom:!0},viz:{settingsOptions:{tokens:!0},autoId:"element",dom:!0},input:{settingsToCreate:{handleValueChange:!0},settingsOptions:{tokens:!0},autoId:"input",dom:!0},manager:{settingsToCreate:{auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1},settingsOptions:{tokens:!0,tokenNamespace:"submitted"},autoId:"search"},eventmanager:{autoId:"evtmanager"},event:{autoId:"evt"}}}}.apply(t,n))||(e.exports=s)},"dashboard/manager/EventManager":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("splunkjs/mvc"),i("splunkjs/mvc/basemanager"),i("splunkjs/mvc/settings"),i("dashboard/DashboardFactory"),i("shim/splunk.util")],void 0===(s=function(e,t,i,n,s,a,r){return n.extend({initialize:function(e){n.prototype.initialize.apply(this,arguments),this.settings=new s(t.pick(e,"events")),this.listenTo(this.settings,"change:events",this.initEventHandlers),this.initEventHandlers()},applySetting:function(e){this.settings.set(e)},initEventHandlers:function(){this.disposeEventHandlers(),this._eventHandlers=t(this.settings.get("events")||[]).map((function(e){return a.getDefault().instantiate(t.extend({id:t.uniqueId(r.sprintf("%s-%s-",this.id,e.type))},e),{})}),this),this._bindEventHandlers()},getEventHandlers:function(){return this._eventHandlers},_bindEventHandlers:function(){this._component&&t(this._eventHandlers).each((function(e){e.settings.set(e.componentIdSetting,this._component.id)}),this)},_unbindEventHandlers:function(){this._component&&t(this._eventHandlers).each((function(e){e.settings.unset(e.componentIdSetting)}),this)},bindComponent:function(e){e&&(this._component=e,this._bindEventHandlers())},unbindComponent:function(){this._component&&(this._unbindEventHandlers(),this._component=null)},disposeEventHandlers:function(){this._unbindEventHandlers(),t(this._eventHandlers).each((function(e){e.dispose()}),this)},dispose:function(){this.disposeEventHandlers(),n.prototype.dispose.apply(this,arguments)}})}.apply(t,n))||(e.exports=s)},"dashboard/manager/FormManager":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("models/url"),i("splunkjs/mvc"),i("util/general_utils"),i("splunkjs/mvc/sharedmodels")],void 0===(s=function(e,t,i,n,s,a){var r=n.Components,o={default:r.getInstance("default",{create:!0}),submitted:r.getInstance("submitted",{create:!0}),url:i},l=!0;return{bootstrapTokenModels:t.once((function(){r.hasInstance("url")||r.registerInstance("url",o.url,{replace:!0}),o.default.has("earliest")||o.default.has("latest")||o.default.set({earliest:"0",latest:""}),this._updateFromUrl(o.default)})),handleValueChange:function(e){var i=e.vizSettings,n=i.get("type"),s=i.get("token");if("time"===n){if(l&&!s){l=!1;var r=i.get("default"),d=i.get("preset");if(r)e.val(r);else if(d){var c=a.get("times").find((function(e){return e.entry.content.get("label")==d}));c&&e.val({earliest_time:c.entry.content.get("earliest_time"),latest_time:c.entry.content.get("latest_time")})}}if(!i.get("value")){var h=i.get("default"),u=i.get("preset");return void(h?e.val(h):u?e.getInputView()&&e.getInputView()._onTimePresetUpdate():i.set("value",{earliest_time:"",latest_time:""}))}var p=e.val(),m={};s?(m[s+".earliest"]=p.earliest_time||"",m[s+".latest"]=p.latest_time||""):(m.earliest=p.earliest_time||"",m.latest=p.latest_time||""),o.default.set(m)}else{if(!e.hasValue())return e.defaultUpdate=!0,void e.val(i.get("default"));var g=e.val();if(void 0===g)return o.default.set(s,g),e.defaultUpdate=!1,void this._handleAutoSubmit(e);if(e.settings.get("multiValue")){if(null===g||0===g.length)return o.default.set(s,void 0),e.defaultUpdate=!1,void this._handleAutoSubmit(e);var f=i.has("valuePrefix")?i.get("valuePrefix"):"",v=i.has("valueSuffix")?i.get("valueSuffix"):"",b=i.has("delimiter")?i.get("delimiter"):" ";g=t(g).map((function(e){return f+e+v})).join(b)}var y="";if(g){var _=i.get("prefix");_&&(y+=_),y+=g;var w=i.get("suffix");w&&(y+=w)}o.default.set(s,y)}this._handleAutoSubmit(e)},_handleAutoSubmit:function(e){this._shouldAutoSubmit(e)&&(!this.isFormReady()&&e.defaultUpdate?e.defaultUpdate=!1:this.submitForm())},submitForm:t.debounce((function(e){this.isFormReady()||this.onFormReady().then(t.bind(this.submitForm,this,{replaceState:!0})),e||(e={}),o.submitted.set(o.default.toJSON()),this._updateToUrl(o.submitted,e)})),_updateToUrl:function(e,t){o.url&&(t.forwardHash=!0,o.url.save(this._filterFormTokens(e),t))},_updateFromUrl:function(e,i){if(o.url){var n=o.url.toJSON();void 0===n.earliest&&void 0===n.latest?t.extend(n,{earliest:"0",latest:""}):l=!1,e.set(n,i)}},_filterFormTokens:function(e){var t=s.filterObjectByRegexes(e.toJSON(),["^form.*","^earliest$","^latest$"],{allowEmpty:!0,allowObject:!0});return"0"===String(t.earliest)&&""===t.latest&&(t.earliest=void 0,t.latest=void 0),t},onFormReady:function(){var i=e.Deferred(),n=this.getInputs();if(n.length>0){var s=t(n).invoke("onInputReady");e.when.apply(e,s).always(i.resolve)}else i.resolve();return i.promise()},isFormReady:function(){return"resolved"==this.onFormReady().state()},hasSubmitButton:function(){return e(".form-submit").length>0},hasUrlTokens:function(){return!t.isEmpty(o.url.toJSON())},getInputs:function(){return t(e(".input")).chain().map((function(t){return e(t).attr("id")})).map(t.bind(r.get,r)).filter(t.identity).value()},_shouldAutoSubmit:function(e){var t=e.vizSettings;return!0===t.get("searchWhenChanged")||null==t.get("searchWhenChanged")&&!this.hasSubmitButton()}}}.apply(t,n))||(e.exports=s)},"dashboard/mixins/EventManagerMixin":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("splunkjs/mvc")],void 0===(s=function(e,t,i){return{setupEventManager:function(t){t||(t={}),this._eventManager=null,this._eventManagerDfd=this.settings.has("evtmanagerid")?e.Deferred():e.Deferred().resolve(),this.bindToComponentSetting(t.key||"evtmanagerid",this.onEventManagerChanged,this)},onEventManagerChanged:function(e,t){this._eventManager&&this._eventManager.unbindComponent(),this._eventManager=t,this._eventManager&&(this._eventManager.bindComponent(this),this._eventManagerDfd.resolve())},onEventManagerReady:function(){return this._eventManagerDfd},getEventManager:function(){return this._eventManager}}}.apply(t,n))||(e.exports=s)},"dashboard/mixins/SearchManagerMixin":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("splunkjs/mvc")],void 0===(s=function(e,t,i){return{setupSearchManager:function(e){e||(e={}),this.bindToComponentSetting(e.key||"managerid",this.onSearchManagerChanged,this)},onSearchManagerChanged:function(e,t){}}}.apply(t,n))||(e.exports=s)},"dashboard/state/DashboardMasterState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState")],void 0===(s=function(e,t){return t.extend({setState:function(e){t.prototype.setState.call(this,{theme:e.settings.get("theme")||"light",label:e.settings.get("label"),description:e.settings.get("description"),evtmanagerid:e.settings.get("evtmanagerid")})}})}.apply(t,n))||(e.exports=s)},"dashboard/state/ElementState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState"),i("views/dashboard/element/Html")],void 0===(s=function(e,t,i){return t.extend({setState:function(n){var s=e.extend({id:n.id},{"dashboard.element.title":""}),a=this._stateOptions||{};if(n instanceof i)(s=n.elementModel.toJSON(e.extend({tokens:!0},a))).type="html";else{var r=n.model.elementReport,o=e.omit(r.toJSON(e.extend({tokens:!0},a)));!1===a.tokens&&(o["dashboard.element.title"]=r.get("dashboard.element.title",{tokens:!1,retainUnmatchedTokens:!0})),e(o).each((function(e,t){0!==t.indexOf("dashboard.element.")&&0!==t.indexOf("display.")&&"displayview"!==t||(s[t]=e)}))}t.prototype.setState.call(this,s)}})}.apply(t,n))||(e.exports=s)},"dashboard/state/EventManagerState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState")],void 0===(s=function(e,t){return t.extend({idAttribute:"id",setState:function(e,i){t.prototype.setState.call(this,{events:e.settings.get("events"),id:e.id})}})}.apply(t,n))||(e.exports=s)},"dashboard/state/FieldsetState":function(e,t,i){var n,s;n=[i("dashboard/state/ItemState")],void 0===(s=function(e){return e.extend({stateIdPrefix:"fieldset_",initState:{submitButton:!1},setState:function(t){var i={submitButton:t.settings.get("submitButton"),autoRun:t.settings.get("autoRun")};e.prototype.setState.call(this,i)}})}.apply(t,n))||(e.exports=s)},"dashboard/state/InputState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState")],void 0===(s=function(e,t){return t.extend({idAttribute:"id",setState:function(i,n){n||(n={tokens:!0});var s=e.pick(i.settings.toJSON(n),"type","token","searchWhenChanged","label","choices","labelField","valueField","managerid","default","prefix","suffix","seed","initialValue","valuePrefix","valueSuffix","delimiter");t.prototype.setState.call(this,s)}})}.apply(t,n))||(e.exports=s)},"dashboard/state/ItemState":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone")],void 0===(s=function(e,t,i){function n(){this.initialize.apply(this,arguments)}return t.extend(n.prototype,i.Events,{stateIdPrefix:"state_",initState:{},initialize:function(i,n,s){s||(s={}),this._dirty=!1,this._state=e.extend(!0,{},t.result(this,"initState")),this._committedState=e.extend(!0,{},t.result(this,"initState")),this._originalXML=null,this._xml=null,this._stateOptions=s.stateOptions,i&&(this.setState(i,s),!1!==s.commitState&&this.commitState()),n&&(this.setXML(n),this.updateOriginalXML()),this.updateId(s)},updateId:function(e){e||(e={}),this._autoId=e.autoId,e.id?this.id=e.id:(this.idAttribute&&(this.id=this._state[this.idAttribute]),this.id||(this.id=t.uniqueId(this.stateIdPrefix)))},_cleanStateObject:function(t){for(var i in t=e.extend(!0,{},t)){if(t.hasOwnProperty(i))void 0===t[i]&&delete t[i]}return t},setState:function(e){this._state=this._cleanStateObject(e),this.triggerIfNecessary()},restoreState:function(){this._state=this.getCommittedState(),this.triggerIfNecessary()},clear:function(){n.prototype.setState.call(this,e.extend(!0,{},t.result(this,"initState")))},commitState:function(e){e||(e={}),this._committedState=this.getState(),!0===e.updateOriginalXML&&this.updateOriginalXML(),this.triggerIfNecessary()},triggerIfNecessary:function(){var e=this.isDirty();e!==this._dirty&&(this.trigger(e?"dirty":"clean",this.getState(),this.getCommittedState()),this._dirty=e),e&&this.trigger("changed",this)},getDiff:function(){var e={added:{},changed:{},removed:{}},i=this._state,n=this._committedState;return t.each(t.union(t.keys(i),t.keys(n)),(function(t){i[t]!==n[t]&&(null!=i[t]&&null!=n[t]?e.changed[t]=i[t]:i[t]?e.added[t]=i[t]:e.removed[t]=n[t])})),e},getState:function(){return e.extend(!0,{},this._state)},getCommittedState:function(){return e.extend(!0,{},this._committedState)},isDirty:function(){return!t.isEqual(this._state,this._committedState)},getXML:function(){return this._xml},setXML:function(e){this._xml=e},getOriginalXML:function(){return this._originalXML},updateOriginalXML:function(){this._originalXML=this.getXML()},isPredefinedID:function(){return!1===this._autoId}}),n.extend=i.Model.extend,n}.apply(t,n))||(e.exports=s)},"dashboard/state/LayoutState":function(e,t,i){var n,s;n=[i("dashboard/state/ItemState")],void 0===(s=function(e){return e.extend({initialize:function(){e.prototype.initialize.call(this,{})}})}.apply(t,n))||(e.exports=s)},"dashboard/state/PanelState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState"),i("views/dashboard/layout/Panel"),i("views/dashboard/layout/PanelRef")],void 0===(s=function(e,t,i,n){return t.extend({idAttribute:"id",setState:function(s){var a={title:""},r={id:s.id};s instanceof n?e.extend(r,a,{ref:s.settings.get("ref"),app:s.settings.get("app")}):s instanceof i&&e.extend(r,a,s.settings.toJSON(e.extend({tokens:!0},this._stateOptions||{}))),t.prototype.setState.call(this,r)}})}.apply(t,n))||(e.exports=s)},"dashboard/state/RowState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState")],void 0===(s=function(e,t){return t.extend({setState:function(){}})}.apply(t,n))||(e.exports=s)},"dashboard/state/SearchState":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/state/ItemState"),i("splunkjs/mvc/savedsearchmanager"),i("splunkjs/mvc/postprocessmanager")],void 0===(s=function(e,t,i,n){var s=t.extend({idAttribute:"id",setState:function(i){t.prototype.setState.call(this,e.extend({id:i.id},s.searchManagerToState(i,e.extend({tokens:!0},this._stateOptions))))}},{searchManagerToState:function(t,s){s||(s={tokens:!0});var a="inline";t instanceof i?a="saved":t instanceof n?a="postprocess":t.has("metadata")&&t.get("metadata").global&&(a="global");var r={searchType:a,search:"postprocess"===a?t.settings.postProcessResolve(e.extend({mergeParentsSearch:!1},s)):t.settings.resolve(s),earliest_time:t.settings.get("earliest_time",s),latest_time:t.settings.get("latest_time",s),base:t.settings.get("managerid"),name:t.settings.get("searchname")},o=t.get("sample_ratio");null!=o&&(r.sampleRatio=o);var l=t.get("refresh",s);null!=l&&(r.refresh=l,r.refreshType=t.get("refreshType",s));var d=t.settings.get("type");return null!=d&&(r.type=d),r}});return s}.apply(t,n))||(e.exports=s)},licenseusage:function(e,t,i){var n,s;n=[i("splunkjs/mvc"),i("splunkjs/mvc/utils"),i("require/underscore"),i("shim/jquery"),i("splunkjs/mvc/simplexml"),i("stubs/splunk.config"),i("shim/splunk.util"),i("util/splunkd_utils"),i("stubs/i18n"),i("uri/route")],void 0===(s=function(e,t,n,s,a,r,o,l,d,c){var h=0==r.MRSPARKLE_ROOT_PATH.indexOf("/")?r.MRSPARKLE_ROOT_PATH.substring(1):r.MRSPARKLE_ROOT_PATH,u='index=_internal [`set_local_host`] source=*license_usage.log* type="RolloverSummary" earliest=-30d@d $PoolClause$',p='index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$',m=o.sprintf(' | join type=outer _time [search index=_internal [`set_local_host`] source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | dedup _time stack | stats sum(stacksz) AS "%s" by _time] | fields - _timediff ',n("stack size").t()),g=o.sprintf(' | join type=outer _time [search index=_internal [`set_local_host`] source=*license_usage.log* type="RolloverSummary" earliest=-30d@d $PoolClause$ | eval _time=_time - 43200 | bin _time span=1d | stats latest(poolsz) AS  "%s" by _time] | fields - _timediff ',n("pool size").t()),f=o.sprintf('| rest splunk_server=local /services/licenser/pools | rename title AS pool $PoolClause$ | search [rest splunk_server=local /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | eval quota=if(isnull(effective_quota),quota,effective_quota) | eval "%s"=round(used_bytes/1024/1024/1024, 3) | eval "%s"=round(quota/1024/1024/1024, 3) | fields pool "%s" "%s"',n("Used").t(),n("Quota").t(),n("Used").t(),n("Quota").t()),v=o.sprintf('| rest splunk_server=local /services/licenser/pools | rename title AS pool $PoolClause$ | search [rest splunk_server=local /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | eval quota=if(isnull(effective_quota),quota,effective_quota) | eval "%s"=round(used_bytes/quota*100,2) | fields pool "%s"',n("% used").t(),n("% used").t()),b='| rest splunk_server=local /services/licenser/messages | where (category=="license_window" OR category=="pool_over_quota") AND create_time >= now() - (30 * 86400) | rename pool_id AS pool | eval warning_day=if(category=="pool_over_quota","(".strftime(create_time,"%B %e, %Y").")",strftime(create_time-43200,"%B %e, %Y")) | fields pool warning_day | join outer pool [rest splunk_server=local /services/licenser/slaves | mvexpand active_pool_ids | eval slave_name=label | eval pool=active_pool_ids | fields pool slave_name | stats values(slave_name) as "members" by pool] | join outer pool [rest splunk_server=local /services/licenser/pools | eval pool=title | eval quota=if(isnull(effective_quota),quota,effective_quota) | eval quotaGB=round(quota/1024/1024/1024,3) | fields pool stack_id, quotaGB] |'+o.sprintf('stats first(pool) as "%s" first(stack_id) as "%s" first(members) as "%s" first(quotaGB) as "%s" values(warning_day) AS "%s" by pool | fields - pool',n("Pool").t(),n("Stack ID").t(),n("Current Members").t(),n("Current Quota (GB)").t(),n("Warning Days - (Soft)/Hard").t()),y=o.sprintf('| rest splunk_server=local /services/licenser/slaves | mvexpand active_pool_ids | where warning_count>0 | eval pool=active_pool_ids | join type=outer pool [rest splunk_server=local /services/licenser/pools | eval pool=title | fields pool stack_id] | eval in_violation=if(warning_count>4 OR (warning_count>2 AND stack_id=="free"),"%s","%s") | fields label, title, pool, warning_count, in_violation | fields - _timediff | rename label as "%s" title as "%s" pool as "%s" warning_count as "%s" in_violation AS "%s"',n("yes").t(),n("no").t(),n("Peer").t(),n("GUID").t(),n("Pool").t(),n("Hard Warnings").t(),n("In Violation?").t()),_=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | timechart span=1d sum(b) AS "%s" fixedrange=false',n("volume").t())+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",w=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | timechart span=1d sum(b) AS "%s" fixedrange=false',n("volume").t())+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",k=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | timechart span=1d sum(b) AS "%s" by pool fixedrange=false',n("volume").t())+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",T=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | timechart span=1d sum(b) AS "%s" by pool fixedrange=false',n("volume").t())+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",S=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | eval slave_guid=slave | stats max(b) AS volume by slave_guid, _time | join type=outer slave_guid [rest splunk_server=local /services/licenser/slaves | rename label AS slave_name title AS slave_guid | table slave_guid slave_name] | eval slave_name = if(isnotnull(slave_name),slave_name,"GUID: ".slave_guid) | timechart span=1d max(volume) AS "%s" by slave_name fixedrange=false',n("volume").t())+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",C=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | eval slave_guid=slave | stats max(b) AS volume by slave_guid, _time | join type=outer slave_guid [rest splunk_server=local /services/licenser/slaves | rename label AS slave_name title AS slave_guid | table slave_guid slave_name] | eval slave_name = if(isnotnull(slave_name),slave_name,"GUID: ".slave_guid) | timechart span=1d max(volume) AS "%s" by slave_name fixedrange=false',n("volume").t())+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",E=p+" | timechart span=1d sum(b) AS volumeB by st fixedrange=false "+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",R=p+" | timechart span=1d sum(b) AS volumeB by st fixedrange=false "+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",x=p+" | timechart span=1d sum(b) AS volumeB by h fixedrange=false "+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",D=p+" | timechart span=1d sum(b) AS volumeB by h fixedrange=false "+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",M=p+" | timechart span=1d sum(b) AS volumeB by s fixedrange=false "+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",O=p+" | timechart span=1d sum(b) AS volumeB by s fixedrange=false "+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",I=p+" | timechart span=1d sum(b) AS volumeB by idx fixedrange=false "+m+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",A=p+" | timechart span=1d sum(b) AS volumeB by idx fixedrange=false "+g+" | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]",P=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b latest(stacksz) AS stacksz by slave, pool, _time | stats sum(b) AS volumeB max(stacksz) AS stacksz by _time | eval pctused=round(volumeB/stacksz*100,2) | timechart span=1d max(pctused) AS "%s" fixedrange=false',n("% used").t()),L=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b latest(poolsz) AS poolsz by slave, pool, _time | stats sum(b) AS volumeB max(poolsz) AS poolsz by _time | eval pctused=round(volumeB/poolsz*100,2) | timechart span=1d max(pctused) AS "%s" fixedrange=false',n("% used").t()),$=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b latest(stacksz) AS stacksz by slave, pool, _time | stats sum(b) AS volumeB max(stacksz) AS stacksz by pool, _time | eval pctused=round(volumeB/stacksz*100,2) | timechart span=1d max(pctused) AS "%s" by pool fixedrange=false',n("% used").t()),N=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b latest(poolsz) AS poolsz by slave, pool, _time | stats sum(b) AS volumeB max(poolsz) AS poolsz by pool, _time | eval pctused=round(volumeB/poolsz*100,2) | timechart span=1d max(pctused) AS "%s" by pool fixedrange=false',n("% used").t()),z=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b latest(stacksz) AS stacksz by slave, pool, _time | stats sum(b) AS volumeB max(stacksz) AS stacksz by slave, _time | eval pctused=round(volumeB/stacksz*100,2)| eval slave_guid=slave | join type=outer slave_guid [rest splunk_server=local /services/licenser/slaves | rename label AS slave_name title AS slave_guid | table slave_guid slave_name] | eval slave_name = if(isnotnull(slave_name),slave_name,"GUID: ".slave_guid) | timechart span=1d max(pctused) AS "%s" by slave_name fixedrange=false',n("% used").t()),j=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b latest(poolsz) AS poolsz by slave, pool, _time | stats sum(b) AS volumeB max(poolsz) AS poolsz by slave, _time | eval pctused=round(volumeB/poolsz*100,2) | eval slave_guid=slave | join type=outer slave_guid [rest splunk_server=local /services/licenser/slaves | rename label AS slave_name title AS slave_guid | table slave_guid slave_name] | eval slave_name = if(isnotnull(slave_name),slave_name,"GUID: ".slave_guid) | timechart span=1d max(pctused) AS "%s" by slave_name fixedrange=false',n("% used").t()),F=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | stats sum(b) AS volume by _time | stats avg(volume) AS avgVolume max(volume) AS maxVolume  | eval maxVolumeGB=round(maxVolume/1024/1024/1024,3) | eval avgVolumeGB=round(avgVolume/1024/1024/1024,3) | rename avgVolumeGB AS "%s" maxVolumeGB AS "%s" | eval "%s" = "" | fields "%s", "%s", "%s"',n("average").t(),n("peak").t(),n("All Pools").t(),n("All Pools").t(),n("average").t(),n("peak").t()),q=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | stats sum(b) AS volume by pool, _time  | stats avg(volume) AS avgVolume max(volume) AS maxVolume by pool | eval maxVolumeGB=round(maxVolume/1024/1024/1024,3) | eval avgVolumeGB=round(avgVolume/1024/1024/1024,3) | rename avgVolumeGB AS "%s" maxVolumeGB AS "%s" pool as "%s" | fields "%s", "%s", "%s" | sort 5 - "%s"',n("average").t(),n("peak").t(),n("Pool").t(),n("Pool").t(),n("average").t(),n("peak").t(),n("average").t()),B=u+o.sprintf(' | eval _time=_time - 43200 | bin _time span=1d | stats latest(b) AS b by slave, pool, _time | eval slave_guid=slave | stats sum(b) AS volume by slave_guid, _time | stats avg(volume) AS avgVolume max(volume) AS maxVolume by slave_guid | join type=outer slave_guid [rest splunk_server=local /services/licenser/slaves | rename label AS slave_name title AS slave_guid | table slave_guid slave_name] | eval slave_name = if(isnotnull(slave_name),slave_name,"GUID: ".slave_guid) | foreach *Volume [eval <<FIELD>>=round(\'<<FIELD>>\'/1024/1024/1024, 3)] |  rename slave_name as "%s" avgVolume AS "%s" maxVolume AS "%s" | sort 5 - "%s" | fields "%s", "%s", "%s" | fields - _timediff, slave_guid',n("Indexer").t(),n("average").t(),n("peak").t(),n("average").t(),n("Indexer").t(),n("average").t(),n("peak").t()),V=p+o.sprintf(' |  stats sum(b) AS volume by st, _time | stats avg(volume) AS avgVolume max(volume) AS maxVolume by st | eval avgVolumeGB=round(avgVolume/1024/1024/1024,3) | eval maxVolumeGB=round(maxVolume/1024/1024/1024,3) | fields st, avgVolumeGB, maxVolumeGB | rename avgVolumeGB AS "%s" maxVolumeGB AS "%s" st AS "%s" | sort 5 - "%s"',n("average").t(),n("peak").t(),n("Sourcetype").t(),n("average").t()),U=p+o.sprintf(' |  stats sum(b) AS volume by h, _time | stats avg(volume) AS avgVolume max(volume) AS maxVolume by h | eval avgVolumeGB=round(avgVolume/1024/1024/1024,3) | eval maxVolumeGB=round(maxVolume/1024/1024/1024,3) | fields h, avgVolumeGB, maxVolumeGB | rename avgVolumeGB AS "%s" maxVolumeGB AS "%s" h AS "%s" | sort 5 - "%s"',n("average").t(),n("peak").t(),n("Host").t(),n("average").t()),H=p+o.sprintf(' |  stats sum(b) AS volume by s, _time | stats avg(volume) AS avgVolume max(volume) AS maxVolume by s | eval avgVolumeGB=round(avgVolume/1024/1024/1024,3) | eval maxVolumeGB=round(maxVolume/1024/1024/1024,3) | fields s, avgVolumeGB, maxVolumeGB | rename avgVolumeGB AS "%s" maxVolumeGB AS "%s" s AS "%s" | sort 5 - "%s"',n("average").t(),n("peak").t(),n("Source").t(),n("average").t()),J=p+o.sprintf(' |  stats sum(b) AS volume by idx, _time | stats avg(volume) AS avgVolume max(volume) AS maxVolume by idx | eval avgVolumeGB=round(avgVolume/1024/1024/1024,3) | eval maxVolumeGB=round(maxVolume/1024/1024/1024,3) | fields idx, avgVolumeGB, maxVolumeGB | rename avgVolumeGB AS "%s" maxVolumeGB AS "%s" idx AS "%s" | sort 5 - "%s"',n("average").t(),n("peak").t(),n("Index").t(),n("average").t()),G=o.sprintf(' | fields - "%s"',n("stack size").t()),K=o.sprintf(' | fields - "%s"',n("pool size").t()),W=n("Average and Peak Daily Volume").t(),X=n("Top 5 by Average Daily Volume").t(),Y=o.sprintf(n('You have selected "%s" or "%s" from the "%s" menu. You might see usage reported for a "%s" series. This is expected behavior if you have many unique hosts or sources.  <a href="%s" target="_blank" title="%s">%s</a>').t(),n("host").t(),n("source").t(),n("Split by").t(),n("(SQUASHED)").t(),c.docHelp(h,r.LOCALE,"learnmore.license.usage_squashing"),n("Splunk help").t(),n("Learn more").t()),Q=o.sprintf(n('You have selected "%s" from the "%s" menu. If your license slaves are running a version of Splunk lower than 6.0, they will not report per index usage and you will see their usage labeled as "%s".').t(),n("index").t(),n("Split by").t(),n("(UNKNOWN)").t()),Z=c.report(h,r.LOCALE,"search",{data:{s:"License Usage Data Cube",dialog:"acceleration"}}),ee=o.sprintf(n('The report that powers these panels is not accelerated.  For faster performance, you might wish to <a href="%s" target="_blank" title="%s">%s</a>. <a href="%s" target="_blank" title="%s">%s</a>').t(),Z,n("Search Acceleration").t(),n("turn on acceleration for this report").t(),c.docHelp(h,r.LOCALE,"learnmore.license.usage_acceleration"),n("Splunk help").t(),n("Learn more").t()),te=!1,ie=null,ne=0,se=1,ae=2,re={license_usage_no_split:{pool:{overlay:{dailySearch:w},nooverlay:{dailySearch:w+K},pctSearch:L},nopool:{overlay:{dailySearch:_},nooverlay:{dailySearch:_+G},pctSearch:P},maxAvgSearch:F},license_usage_by_pool:{pool:{overlay:{dailySearch:T},nooverlay:{dailySearch:T+K},pctSearch:N},nopool:{overlay:{dailySearch:k},nooverlay:{dailySearch:k+G},pctSearch:$},maxAvgSearch:q},license_usage_by_indexer:{pool:{overlay:{dailySearch:C},nooverlay:{dailySearch:C+K},pctSearch:j},nopool:{overlay:{dailySearch:S},nooverlay:{dailySearch:S+G},pctSearch:z},maxAvgSearch:B},license_usage_by_sourcetype:{pool:{overlay:{dailySearch:R},nooverlay:{dailySearch:R+K},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(poolsz) AS poolsz by slave, pool, _time | stats max(poolsz) AS poolsz by pool, _time] | stats sum(b) AS bytes_used max(poolsz) AS poolsz by st, _time | timechart span=1d max(eval(round(bytes_used/poolsz*100,2))) by st fixedrange=false'},nopool:{overlay:{dailySearch:E},nooverlay:{dailySearch:E+G},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(stacksz) AS stacksz by slave, pool, _time | stats max(stacksz) AS stacksz by _time, pool] | stats sum(b) AS bytes_used max(stacksz) AS stacksz by st, _time | timechart span=1d max(eval(round(bytes_used/stacksz*100,2))) by st fixedrange=false'},maxAvgSearch:V},license_usage_by_host:{pool:{overlay:{dailySearch:D},nooverlay:{dailySearch:D+K},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(poolsz) AS poolsz by slave, pool, _time | stats max(poolsz) AS poolsz by pool, _time] | stats sum(b) AS bytes_used max(poolsz) AS poolsz by h, _time | timechart span=1d max(eval(round(bytes_used/poolsz*100,2))) by h fixedrange=false'},nopool:{overlay:{dailySearch:x},nooverlay:{dailySearch:x+G},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(stacksz) AS stacksz by slave, pool, _time | stats max(stacksz) AS stacksz by _time, pool] | stats sum(b) AS bytes_used max(stacksz) AS stacksz by h, _time | timechart span=1d max(eval(round(bytes_used/stacksz*100,2))) by h fixedrange=false'},maxAvgSearch:U},license_usage_by_source:{pool:{overlay:{dailySearch:O},nooverlay:{dailySearch:O+K},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(poolsz) AS poolsz by slave, pool, _time | stats max(poolsz) AS poolsz by pool, _time] | stats sum(b) AS bytes_used max(poolsz) AS poolsz by s, _time | timechart span=1d max(eval(round(bytes_used/poolsz*100,2))) by s fixedrange=false'},nopool:{overlay:{dailySearch:M},nooverlay:{dailySearch:M+G},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(stacksz) AS stacksz by slave, pool, _time | stats max(stacksz) AS stacksz by _time, pool] | stats sum(b) AS bytes_used max(stacksz) AS stacksz by s, _time | timechart span=1d max(eval(round(bytes_used/stacksz*100,2))) by s fixedrange=false'},maxAvgSearch:H},license_usage_by_index:{pool:{overlay:{dailySearch:A},nooverlay:{dailySearch:A+K},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(poolsz) AS poolsz by slave, pool, _time | stats max(poolsz) AS poolsz by pool, _time] | stats sum(b) AS bytes_used max(poolsz) AS poolsz by idx, _time | timechart span=1d max(eval(round(bytes_used/poolsz*100,2))) by idx fixedrange=false'},nopool:{overlay:{dailySearch:I},nooverlay:{dailySearch:I+G},pctSearch:'index=_internal [`set_local_host`] source=*license_usage.log* type="Usage" | eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) | bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx $PoolClause$ | join _time pool type=outer [search index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d | eval _time=_time - 43200 | bin _time span=1d | stats latest(stacksz) AS stacksz by slave, pool, _time | stats max(stacksz) AS stacksz by _time, pool] | stats sum(b) AS bytes_used max(stacksz) AS stacksz by idx, _time | timechart span=1d max(eval(round(bytes_used/stacksz*100,2))) by idx fixedrange=false'},maxAvgSearch:J}};function oe(e){var t=i("models/services/saved/Search");isBaseUsageSearchSummarized=!1;var n=new t;n.fetch({url:l.fullpath(n.url+"/License Usage Data Cube"),data:{app:"search",owner:"admin"},success:function(t,i){t&&t.entry.content.get("auto_summarize")&&(isBaseUsageSearchSummarized=!0),le(isBaseUsageSearchSummarized,e)},error:function(t,i){console.log("Error fetching saved search"),le(isBaseUsageSearchSummarized,e)}})}function le(e,t){var i="";"license_usage_by_source"!=t&&"license_usage_by_host"!=t&&"license_usage_by_sourcetype"!=t&&"license_usage_by_index"!=t||e||(i+='<div class="info-message alert alert-warning"><i class="icon-alert"></i>'+ee+"</div>"),"license_usage_by_source"==t||"license_usage_by_host"==t?i+='<div class="info-message alert alert-info"><i class="icon-alert"></i>'+Y+"</div>":"license_usage_by_index"==t&&(i+='<div class="info-message alert alert-info"><i class="icon-alert"></i>'+Q+"</div>"),s(".info-messages").html(i)}function de(e,t){" "==e?Ce.settings.set("choices",[{value:"license_usage_no_split",label:n("No split").t()},{value:"license_usage_by_pool",label:n("Pool").t()},{value:"license_usage_by_indexer",label:n("Indexer").t()},{value:"license_usage_by_sourcetype",label:n("Source type").t()},{value:"license_usage_by_host",label:n("Host").t()},{value:"license_usage_by_source",label:n("Source").t()},{value:"license_usage_by_index",label:n("Index").t()}]):(Ce.settings.set("choices",[{value:"license_usage_no_split",label:n("No Split").t()},{value:"license_usage_by_sourcetype",label:n("Source type").t()},{value:"license_usage_by_host",label:n("Host").t()},{value:"license_usage_by_source",label:n("Source").t()},{value:"license_usage_by_index",label:n("Index").t()}]),"license_usage_by_pool"==t&&Ce.val("license_usage_no_split"))}function ce(e){ie&&ie.getVisualization().done((function(t){e==ne?t.settings.set({"charting.chart.overlayFields":'""'}):e==ae?t.settings.set({"charting.chart.overlayFields":'"'+n("pool size").t()+'"',"charting.fieldColors":"{"+n("pool size").t()+": 0xff0000}"}):t.settings.set({"charting.chart.overlayFields":'"'+n("stack size").t()+'"',"charting.fieldColors":"{"+n("stack size").t()+": 0xff0000}"})}))}function he(){return"overlay"==Ee.val()[0]}function ue(e){ce(he()?e?ae:se:ne)}function pe(e,t){var i=e.length>1,n=he();ue(i);var s=i?"pool":"nopool",a=n?"overlay":"nooverlay",r=re[t][s][a].dailySearch,o=re[t][s].pctSearch,l=re[t].maxAvgSearch;!i||"license_usage_by_sourcetype"!=t&&"license_usage_by_host"!=t&&"license_usage_by_source"!=t&&"license_usage_by_index"!=t||(e=" | search "+e),Me.set("search",r.replace(/\$PoolClause\$/g,e)),Oe.set("search",o.replace(/\$PoolClause\$/g,e)),Ie.set("search",l.replace(/\$PoolClause\$/g,e))}function me(e){if(t=e,e.length>1)var t="| search "+e;var i="| rest splunk_server=local /services/licenser/pools | rename title AS pool $PoolClause$ | search [rest splunk_server=local /services/licenser/groups  | eval stack_id=stack_ids | fields stack_id] | join type=outer stack_id [rest splunk_server=local /services/licenser/stacks | eval stack_id=title | eval stack_quota=quota | fields stack_id stack_quota] | stats sum(used_bytes) as used max(stack_quota) as total | eval usedGB=round(used/1024/1024/1024,3) | eval totalGB=round(total/1024/1024/1024,3) | eval gauge_base=0 | eval gauge_danger=totalGB*0.8 | eval gauge_top=totalGB+0.001 | gauge usedGB gauge_base gauge_danger totalGB gauge_top".replace(/\$PoolClause\$/g,t),n=f.replace(/\$PoolClause\$/g,t),s=v.replace(/\$PoolClause\$/g,t);Re.set("search",i),xe.set("search",n),De.set("search",s)}i.e(0).then((function(){var e=[i("shim/bootstrap.tab")];(function(){s('#myTabs a[href="#todayTab"]').click((function(e){e.preventDefault(),s("#help_30days").hide(),s("#help_today").show(),s(this).tab("show")})),s('#myTabs a[href="#historyTab"]').click((function(e){te||(ie=new be({id:"element6","charting.axisTitleX.text":n("Date").t(),"charting.gaugeAutoRanges":"1","charting.legend.placement":"right","charting.gaugeColors":'["53A051","F8BE34","DC4E41"]',"charting.chart.stackMode":"stacked","charting.axisY.scale":"linear","charting.axisX.scale":"linear","charting.chart.style":"shiny","charting.chart.nullValueMode":"connect","charting.chart":"column","charting.legend.labelStyle.overflowMode":"ellipsisMiddle","charting.drilldown":"1","charting.axisTitleY.text":n("GB").t(),"charting.height":"300","charting.chart.rangeValues":'["0","30","70","100"]',"charting.chart.overlayFields":"","charting.lineDashStyle":"ShortDash",managerid:"search6",el:s("#element6")}).render(),splunkjs.mvc.Components.get("element6").on("drilldown",(function(e){e.defaultDrilldown()})),new be({id:"element7","charting.axisTitleX.text":n("Date").t(),"charting.gaugeAutoRanges":"1","charting.chart.rangeValues":'["0","30","70","100"]',"charting.gaugeColors":'["53A051","F8BE34","DC4E41"]',"charting.chart.stackMode":"stacked","charting.axisY.scale":"linear","charting.chart.style":"shiny","charting.axisX.scale":"linear","charting.chart.nullValueMode":"gaps","charting.chart":"column","charting.legend.labelStyle.overflowMode":"ellipsisMiddle","charting.drilldown":"1","charting.axisTitleY.text":"%","charting.height":"300","charting.legend.placement":"right",managerid:"search7",el:s("#element7")}).render(),splunkjs.mvc.Components.get("element7").on("drilldown",(function(e){e.defaultDrilldown()})),new be({id:"element8","charting.axisTitleX.text":" ","charting.gaugeAutoRanges":"1","charting.legend.placement":"right","charting.gaugeColors":'["53A051","F8BE34","DC4E41"]',"charting.chart.stackMode":"default","charting.axisY.scale":"linear","charting.axisX.scale":"linear","charting.chart.style":"shiny","charting.chart.nullValueMode":"gaps","charting.chart":"column","charting.legend.labelStyle.overflowMode":"ellipsisEnd","charting.drilldown":"1","charting.axisTitleY.text":n("GB").t(),"charting.height":"300","charting.chart.rangeValues":'["0","30","70","100"]',managerid:"search8",el:s("#element8")}).render(),splunkjs.mvc.Components.get("element8").on("drilldown",(function(e){e.defaultDrilldown()})),ue(Te.val().length>1),te=!0),e.preventDefault(),s("#help_today").hide(),s("#help_30days").show(),s(this).tab("show")}))}).apply(null,e)})).catch(i.oe);var ge=i("splunkjs/mvc/headerview"),fe=i("splunkjs/mvc/footerview"),ve=i("splunkjs/mvc/simplexml/dashboardview"),be=i("splunkjs/mvc/simplexml/element/chart"),ye=i("splunkjs/mvc/simplexml/element/table"),_e=i("splunkjs/mvc/simpleform/input/dropdown"),we=i("splunkjs/mvc/simpleform/input/checkboxgroup"),ke=(i("splunkjs/mvc/simpleform/input/text"),i("splunkjs/mvc/searchmanager"));i("splunkjs/mvc/savedsearchmanager");new ge({id:"header",section:"dashboards",el:s(".header"),appbar:!1,litebar:!1}).render(),new fe({id:"footer",el:s(".footer")}).render(),new ve({id:"dashboard",el:s(".dashboard-body")}).render(),new be({id:"element1","charting.gaugeAutoRanges":"1","charting.legend.placement":"right","charting.gaugeColors":'["53A051","F8BE34","DC4E41"]',"charting.chart.stackMode":"default","charting.axisY.scale":"linear","charting.axisX.scale":"linear","charting.chart.style":"shiny","charting.chart.nullValueMode":"gaps","charting.chart":"fillerGauge","charting.legend.labelStyle.overflowMode":"ellipsisMiddle","charting.drilldown":"1","charting.height":"300",managerid:"search1",el:s("#element1")}).render(),splunkjs.mvc.Components.get("element1").on("drilldown",(function(e){e.defaultDrilldown()})),new be({id:"element2","charting.drilldown":"1","charting.height":"300","charting.chart":"bar","charting.axisX.scale":"linear","charting.chart.style":"shiny","charting.axisTitleY.text":n("GB").t(),"charting.axisY.scale":"linear","charting.legend.labelStyle.overflowMode":"ellipsisMiddle","charting.legend.placement":"right","charting.gaugeColors":'["53A051","F8BE34","DC4E41"]',"charting.gaugeAutoRanges":"1","charting.chart.nullValueMode":"gaps","charting.chart.stackMode":"default","charting.chart.rangeValues":'["0","30","70","100"]',managerid:"search2",el:s("#element2")}).render(),splunkjs.mvc.Components.get("element2").on("drilldown",(function(e){e.defaultDrilldown()})),new be({id:"element3","charting.gaugeAutoRanges":"1","charting.legend.placement":"none","charting.gaugeColors":'["53A051","F8BE34","DC4E41"]',"charting.chart.stackMode":"default","charting.axisY.scale":"log","charting.axisX.scale":"linear","charting.chart.style":"shiny","charting.chart.nullValueMode":"gaps","charting.chart":"bar","charting.legend.labelStyle.overflowMode":"ellipsisMiddle","charting.drilldown":"1","charting.axisTitleY.text":"%","charting.height":"300","charting.chart.rangeValues":'["0","30","70","100"]',managerid:"search3",el:s("#element3")}).render(),splunkjs.mvc.Components.get("element3").on("drilldown",(function(e){e.defaultDrilldown()})),new ye({id:"element4",managerid:"search4",el:s("#element4")}).render(),splunkjs.mvc.Components.get("element4").on("drilldown",(function(e){e.defaultDrilldown()})),new ye({id:"element5",managerid:"search5",el:s("#element5")}).render(),splunkjs.mvc.Components.get("element5").on("drilldown",(function(e){e.defaultDrilldown()}));var Te=new _e({id:"field1",choices:[{value:" ",label:n("All Pools").t()}],labelField:"name",default:" ",submitOnChange:!1,valueField:"value",token:"PoolClause",managerid:"search9",el:s("#field1"),showClearButton:!1}).render(),Se=new _e({id:"field4",choices:[{value:" ",label:n("All Pools").t()}],labelField:"name",default:" ",submitOnChange:!1,valueField:"value",token:"PoolClause",managerid:"search9",el:s("#field4"),showClearButton:!1}).render();new ke({id:"search9",autostart:!0,search:'| rest splunk_server=local /services/licenser/pools | rename title AS pool | search [rest splunk_server=local /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | eval name=pool | eval value="pool=\\"". pool . "\\"" | table name value',app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0});var Ce=new _e({id:"field2",choices:[{value:"license_usage_no_split",label:n("No split").t()},{value:"license_usage_by_pool",label:n("By pool").t()},{value:"license_usage_by_indexer",label:n("By indexer").t()},{value:"license_usage_by_sourcetype",label:n("By source type").t()},{value:"license_usage_by_host",label:n("By host").t()},{value:"license_usage_by_source",label:n("By source").t()},{value:"license_usage_by_index",label:n("By index").t()}],submitOnChange:!1,default:"license_usage_no_split",token:"LicUsageSearch",el:s("#field2"),showClearButton:!1}).render(),Ee=new we({id:"field3",choices:[{label:n("Show/hide stack/pool size overlay").t(),value:"overlay"}],default:["overlay"],el:s("#field3")}).render(),Re=new ke({id:"search1",earliest_time:null,search:"",latest_time:null,app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0}),xe=new ke({id:"search2",latest_time:null,earliest_time:null,search:"",app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0}),De=new ke({id:"search3",earliest_time:null,search:"",latest_time:null,app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0});new ke({id:"search4",earliest_time:null,search:b,latest_time:null,app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0}),new ke({id:"search5",earliest_time:null,search:y,latest_time:null,app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0});var Me=new ke({id:"search6",earliest_time:"-30d@d",search:"",latest_time:"-0d@d",app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0}),Oe=new ke({id:"search7",earliest_time:"-30d@d",search:"",latest_time:"-0d@d",app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0}),Ie=new ke({id:"search8",earliest_time:"-30d@d",search:"",latest_time:"-0d@d",app:t.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0});Te.on("change",(function(e){var t=Ce.val();oe(t),pe(e,t),de(e,t)})),Se.on("change",(function(e){me(e)})),Ce.on("change",(function(e){var t=Te.val();"license_usage_no_split"==e?s("#avg-peak-chart-title").html(W):s("#avg-peak-chart-title").html(X),oe(e),pe(t,e),de(t,e)})),Ee.on("change",(function(e){pe(Te.val(),Ce.val())})),pe(Te.val(),Ce.val()),me(Te.val())}.apply(t,n))||(e.exports=s)},"models/dashboard/DashboardElementModel":function(e,t,i){var n,s;n=[i("require/underscore"),i("require/backbone"),i("splunkjs/mvc/tokenawaremodel"),i("splunkjs/mvc/tokenutils")],void 0===(s=function(e,t,i,n){var s={edit:{set:{tokens:!0},get:{tokens:!0},toJSON:{tokens:!0}},view:{set:{tokens:!0},get:{tokens:!1},toJSON:{tokens:!1}}};return i.extend({constructor:function(e,n){this._state=n.state||new t.Model,this._diff=new t.Model,i.prototype.constructor.apply(this,arguments),this.listenTo(this._state,"change:mode",this._onModeChange),this.listenTo(this._diff,"all",this.trigger)},set:function(t,n,s){var a=this._getDefaultOptions();return"object"==typeof t?n=e.extend({},a.set,n):s=e.extend({},a.set,s),i.prototype.set.call(this,t,n,s)},get:function(t,n){var s=this._getDefaultOptions();return i.prototype.get.call(this,t,e.extend({},s.get,n))},toJSON:function(t){var n=this._getDefaultOptions();return i.prototype.toJSON.call(this,e.extend({},n.toJSON,t))},_isEditMode:function(){return"edit"===this._state.get("mode")},_getDefaultOptions:function(){return this._isEditMode()?s.edit:s.view},_onModeChange:function(){var e=this._state.previous("mode"),t=this._state.get("mode");if(s[e]&&s[t]){var n=i.prototype.toJSON.call(this,s[e].toJSON),a=i.prototype.toJSON.call(this,s[t].toJSON);this._diff.clear({silent:!0}),this._diff.set(n,{silent:!0}),this._diff.set(a)}}})}.apply(t,n))||(e.exports=s)},"models/dashboards/DashboardReport":function(e,t,i){var n;void 0===(n=function(e){var t=i("models/search/Report"),n=i("splunkjs/mvc/simplexml/controller"),s=i("splunkjs/mvc/simplexml/mapper"),a=i("util/console"),r=i("splunkjs/mvc/tokenawaremodel");return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},saveXML:function(e){var t=this.entry.content.get("display.general.id");return a.log("[%o] Saving Panel Element XML...",t),n.model.view.updateElement(t,this.mapToXML(),e)},mapToXML:function(e){var t=this.entry.content.get("display.general.type"),i=["display",t,"type"].join(".");this.entry.content.has(i)&&(t=[t,this.entry.content.get(i)].join(":")),a.log("Looking up mapper for type ",t);var n=s.get(t);return a.log("Found mapper",n),n.toXML(this,e)},deleteXML:function(){return n.model.view.deleteElement(this.entry.content.get("display.general.id"))},fetch:function(e){var i=this;i.entry.content._applyTokensByDefault=!1,i._fetching=!0;var n=t.prototype.fetch.call(this,e);return n.always((function(){i.entry.content._applyTokensByDefault=!0,i._fetching=!1})),n},setFromSplunkD:function(e,i){return i||(i={}),this._fetching&&void 0===i.tokens&&(i.tokens=!1),t.prototype.setFromSplunkD.call(this,e,i)},parse:function(){this.entry.content._applyTokensByDefault=!1;var e=t.prototype.parse.apply(this,arguments);return this.entry.content._applyTokensByDefault=!0,e}},{Entry:t.Entry.extend({},{Content:r.extend({applyTokensByDefault:!0,clone:function(){return new t.Entry.Content(this.toJSON())}})})})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/css/paginator.css":function(e,t,i){var n=i(634);"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"splunkjs/mvc/basemultichoiceview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("splunkjs/mvc/basechoiceview"),r=i("util/general_utils");return a.extend({_isMultiChoiceView:!0,updateSelectedLabel:function(){var e=r.asArray(this.settings.get("selectedLabel")),t=s.map(this.val(),(function(e){var t=this._findDisplayedChoice(e);return t?t.label:void 0}),this);s.isEqual(e,t)||(t.length>0?this.settings.set("selectedLabel",t):this.settings.unset("selectedLabel"))},normalizeValue:function(e){return Array.isArray(e)?e:[e]},val:function(e){var t=this.settings.get("value"),i=r.asArray(t),n=r.asArray(e);if(0===arguments.length)return i;var a=s.clone(i).sort(),o=s.clone(n).sort();return s.isEqual(a,o)&&a.length>0&&Array.isArray(t)?t:(this.settings.set("value",n),n)},getState:function(){var e=a.prototype.getState.apply(this,arguments),t=this.settings.get("value");return s.extend({},e,{value:null==t||Array.isArray(t)?t:[t],onChange:function(e){this.val(e)}.bind(this)})},_getSelectedData:function(){var e=this.val();return s(e).map(s.bind((function(e){var t={value:e,label:(this._findDisplayedChoice(e)||{}).label};return s.extend(this._selectedDataForValue(e)||{},t)}),this))}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/chartview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("splunkjs/mvc/visualizationview"),r=i("splunkjs/mvc/drilldown"),o=i("splunkjs/mvc/utils"),l=(i("util/console"),i("shim/splunk.util")),d=i("util/general_utils"),c=i("views/shared/ReportVisualizer");return a.extend({moduleId:n.i,className:"splunk-chart",chartOptionPrefix:"charting.",options:s.extend({},a.prototype.options,{type:"column",height:"250px"}),normalizeSettings:function(e){a.prototype.normalizeSettings.apply(this,arguments),this._normalizeDrilldownType(e,e.get(e.has("charting.drilldown")?"charting.drilldown":"drilldown")),e.has("charting.layout.splitSeries")&&d.isBooleanEquivalent(e.get("charting.layout.splitSeries"))&&e.set("charting.layout.splitSeries",d.normalizeBoolean(e.get("charting.layout.splitSeries"))?"1":"0"),e.has("show")&&e.set("show",l.normalizeBoolean(e.get("show"))?"1":"0"),e.has("charting.axisY2.enabled")&&d.isBooleanEquivalent(e.get("charting.axisY2.enabled"))&&e.set("charting.axisY2.enabled",d.normalizeBoolean(e.get("charting.axisY2.enabled"))?"1":"0"),e.has("charting.legend.labelStyle.overflowMode")&&"default"===e.get("charting.legend.labelStyle.overflowMode")&&e.set("charting.legend.labelStyle.overflowMode","ellipsisMiddle")},_normalizeDrilldownType:function(e,t){var i=r.getNormalizedDrilldownType(t,{allowBoolean:!0});e.get("charting.drilldown")!==i&&e.set("charting.drilldown",i),e.get("drilldown")!==i&&e.set("drilldown",i)},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.$el.css({overflow:"hidden",position:"relative"}),this.$msg.css({overflow:"hidden",position:"absolute",width:"100%",height:"100%"}),this.listenTo(this.viz,"chartRangeSelect",this.emitSelectionEvent),this.listenTo(this.settings,"change:type",(function(){this.model.set("display.visualizations.charting.chart",this.settings.get("type"))})),this.listenTo(this.settings,"change:drilldown change:charting.drilldown",this._normalizeDrilldownType)},syncSettingsAndReportModel:function(e,t){this._settingsSync=o.syncModels(e,t,{auto:!0,prefix:"display.visualizations.",alias:{height:"display.visualizations.chartHeight"},exclude:["managerid","id","name","data","type","drilldownRedirect","pagerPosition","refreshDisplay"]}),!t.has("display.visualizations.charting.chart")&&e.get("type")&&t.set("display.visualizations.charting.chart",e.get("type"))},getVisualizationRendererOptions:function(){return{messageContainerClass:"splunk-message-container compact",generalTypeOverride:c.GENERAL_TYPES.VISUALIZATIONS,customConfigOverride:{"display.visualizations.type":"charting"},sizeConfigOverride:{defaultHeight:250}}},formatData:function(e){return e},onDrilldown:function(e,t){this.trigger("legendClick"===e.originalEvent.type?"clicked:legend click:legend":"clicked:chart click:chart",s.extend({},e.originalEvent,{preventDefault:t.preventDefault,drilldown:t.drilldown}),this)},emitSelectionEvent:function(e){var t={start:e.startXValue,end:e.endXValue};if(this.managerConnection&&this.managerConnection.isConnected()){var i=this.managerConnection.resultsModel.data();i&&s(i.fields).each((function(n,s){t["start."+n.name]=i.columns[s][e.startXIndex],t["end."+n.name]=i.columns[s][e.endXIndex]}));var n={data:t,preventDefault:function(){e.preventDefault()},results:i,selection:function(){for(var t=[],n=e.startXIndex;n<=e.endXIndex;n++)t.push(s(i.columns).pluck(n));var a=s(i.fields).pluck("name");return s(t).map((function(e){return s.object(a,e)}))},startIndex:e.startXIndex,endIndex:e.endXIndex,startValue:e.startXValue,endValue:e.endXValue,isReset:e.isReset,event:e};this.trigger("selection",n,this)}},remove:function(){return this._settingsSync&&this._settingsSync.destroy(),a.prototype.remove.call(this)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/checkboxgroupview":function(e,t,i){var n;void 0===(n=function(e,t,n){i("require/underscore");var s=i("splunkjs/mvc/basemultichoiceview"),a=i("splunkjs/mvc/components/CheckboxGroup");return s.extend({moduleId:n.i,className:"splunk-checkboxgroup splunk-choice-input",options:{valueField:"",labelField:"",default:void 0,choices:[],value:void 0,disabled:!1},getReactComponent:function(){return a}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/components/CheckboxGroup":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=u(i(83)),s=u(i(77)),a=u(i("require/underscore")),r=i(0),o=u(r),l=u(i(4)),d=u(i(38)),c=i("util/test_support"),h=u(i("services/WebFeatures"));function u(e){return e&&e.__esModule?e:{default:e}}function p(t){var i=t.choices,l=t.disabled,u=t.value,p=t.onChange,m=(0,r.useState)(!1),g=(0,s.default)(m,2),f=g[0],v=g[1];(0,r.useEffect)((function(){h.default.getFeatureSettings("dashboard_inputs_localization").then((function(e){e&&e.enable_dashboard_inputs_localization&&v(e.enable_dashboard_inputs_localization)})).catch((function(e){}))}),[]);var b=i.length>0?i:[{label:" ",value:""}];return o.default.createElement("div",(0,c.createTestHook)(e.i),b.map((function(e){return o.default.createElement(d.default,{key:e.value,value:e.value,selected:u.indexOf(e.value)>-1,disabled:l,onClick:function(){return t=e.value,s=u.indexOf(t),a=void 0,a=s>-1?[].concat((0,n.default)(u.slice(0,s)),(0,n.default)(u.slice(s+1))):i.map((function(e){return e.value})).filter((function(e){return u.indexOf(e)>-1||e===t})),void p(a);var t,s,a}},f?(0,a.default)(e.label||e.value).t():e.label||e.value)})))}p.propTypes={value:l.default.arrayOf(l.default.string),choices:l.default.arrayOf(l.default.shape({label:l.default.string,value:l.default.string})),disabled:l.default.bool,onChange:l.default.func.isRequired},p.defaultProps={value:[],choices:[],disabled:!1},t.default=p,e.exports=t.default},"splunkjs/mvc/components/LinkList":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=u(i(15)),s=u(i(77)),a=u(i("require/underscore")),r=i(0),o=u(r),l=u(i(4)),d=u(i(120)),c=i("util/test_support"),h=u(i("services/WebFeatures"));function u(e){return e&&e.__esModule?e:{default:e}}function p(t){var i=t.value,l=t.choices,u=t.disabled,p=t.onChange,m=(0,r.useState)(!1),g=(0,s.default)(m,2),f=g[0],v=g[1];(0,r.useEffect)((function(){h.default.getFeatureSettings("dashboard_inputs_localization").then((function(e){e&&e.enable_dashboard_inputs_localization&&v(e.enable_dashboard_inputs_localization)})).catch((function(e){}))}),[]);var b=l.length>0?l:[{label:"N/A",value:""}];return o.default.createElement(d.default,(0,n.default)({},(0,c.createTestHook)(e.i),{appearance:"pill",inline:!0,value:i,onChange:function(e,t){p(t.value)},style:{flexWrap:"wrap",width:"100%"}}),b.map((function(e){return o.default.createElement(d.default.Option,{key:e.value,value:e.value,label:f?(0,a.default)(e.label||e.value).t():e.label||e.value,disabled:u,style:{flexGrow:0}})})))}p.propTypes={value:l.default.string,choices:l.default.arrayOf(l.default.shape({label:l.default.string,value:l.default.string})),onChange:l.default.func.isRequired,disabled:l.default.bool},p.defaultProps={value:void 0,choices:[],disabled:!1},t.default=p,e.exports=t.default},"splunkjs/mvc/components/MultiDropdown":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=u(i(15)),s=u(i(77)),a=u(i("require/underscore")),r=i(0),o=u(r),l=u(i(4)),d=u(i(165)),c=i("util/test_support"),h=u(i("services/WebFeatures"));function u(e){return e&&e.__esModule?e:{default:e}}function p(t){var i=t.choices,l=t.disabled,u=t.allowCustomValues,p=t.width,m=t.value,g=t.onChange,f=t.label,v=(0,r.useState)(!1),b=(0,s.default)(v,2),y=b[0],_=b[1];return(0,r.useEffect)((function(){h.default.getFeatureSettings("dashboard_inputs_localization").then((function(e){e&&e.enable_dashboard_inputs_localization&&_(e.enable_dashboard_inputs_localization)})).catch((function(e){}))}),[]),o.default.createElement(d.default,(0,n.default)({disabled:l,allowNewValues:u,values:m,onChange:function(e,t){var i=t.values;return g(i)},style:{width:p},"aria-label":f,inline:!0},(0,c.createTestHook)(e.i)),i.map((function(e){if(!a.default.isEmpty(e)){var t=y?(0,a.default)(String(e.label||e.value)).t():String(e.label||e.value);return o.default.createElement(d.default.Option,{key:e.value,label:t,value:e.value})}})))}p.propTypes={choices:l.default.arrayOf(l.default.shape({label:l.default.string,value:l.default.string})),disabled:l.default.bool,allowCustomValues:l.default.bool,width:l.default.number,minimumResultsForSearch:l.default.number,value:l.default.arrayOf(l.default.string),onChange:l.default.func.isRequired,label:l.default.string},p.defaultProps={choices:[],disabled:!1,allowCustomValues:!1,width:200,minimumResultsForSearch:8,value:[],label:""},t.default=p,e.exports=t.default},"splunkjs/mvc/components/RadioGroup":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=u(i(15)),s=u(i(77)),a=u(i("require/underscore")),r=i(0),o=u(r),l=u(i(4)),d=u(i(127)),c=i("util/test_support"),h=u(i("services/WebFeatures"));function u(e){return e&&e.__esModule?e:{default:e}}function p(t){var i=t.value,l=void 0===i?null:i,u=t.choices,p=t.disabled,m=t.onChange,g=t.labelledBy,f=(0,r.useState)(!1),v=(0,s.default)(f,2),b=v[0],y=v[1];(0,r.useEffect)((function(){h.default.getFeatureSettings("dashboard_inputs_localization").then((function(e){e&&e.enable_dashboard_inputs_localization&&y(e.enable_dashboard_inputs_localization)})).catch((function(e){}))}),[]);var _=u.length>0?u:[{label:" ",value:""}];return o.default.createElement(d.default,(0,n.default)({value:l,labelledBy:g,disabled:p,onChange:function(e,t){m(t.value)}},(0,c.createTestHook)(e.i)),_.map((function(e){var t=a.default.isEmpty(e)?{label:" ",value:""}:e;return o.default.createElement(d.default.Option,{key:t.value,value:t.value},b?(0,a.default)(t.label||t.value).t():t.label||t.value)})))}p.propTypes={value:l.default.string,choices:l.default.arrayOf(l.default.shape({label:l.default.string,value:l.default.string})),onChange:l.default.func.isRequired,disabled:l.default.bool,labelledBy:l.default.string},p.defaultProps={choices:[],disabled:!1,labelledBy:""},t.default=p,e.exports=t.default},"splunkjs/mvc/components/TextInput":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=p(i(15)),s=p(i(16)),a=p(i(17)),r=p(i(20)),o=p(i(21)),l=i(0),d=p(l),c=p(i(4)),h=p(i(32)),u=i("util/test_support");function p(e){return e&&e.__esModule?e:{default:e}}var m=function(t){function i(e){(0,s.default)(this,i);var t=(0,r.default)(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={value:e.value},t.submitChange=t.submitChange.bind(t),t}return(0,o.default)(i,t),(0,a.default)(i,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;t!==this.state.value&&this.updateValue(t)}},{key:"updateValue",value:function(e){this.setState({value:e})}},{key:"submitChange",value:function(){this.props.onChange(this.state.value)}},{key:"render",value:function(){var t=this,i=this.props,s=i.type,a=i.disabled,r=i.label;return d.default.createElement(h.default,(0,n.default)({value:this.state.value,disabled:a,type:s,onChange:function(e,i){var n=i.value;t.updateValue(n)},onBlur:this.submitChange,onKeyPress:function(e){"Enter"===e.key&&t.submitChange()},"aria-label":r},(0,u.createTestHook)(e.i)))}}]),i}(l.Component);t.default=m,m.propTypes={onChange:c.default.func.isRequired,value:c.default.string,type:c.default.string,disabled:c.default.bool,label:c.default.string},m.defaultProps={value:"",type:"text",disabled:!1,label:""},e.exports=t.default},"splunkjs/mvc/components/TimeRangePickerDropdown":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0}),t.convertEpochToISO=t.convertISOtoEpoch=void 0;var n=g(i(15)),s=g(i(16)),a=g(i(17)),r=g(i(20)),o=g(i(21)),l=i(0),d=g(l),c=g(i(4)),h=g(i(324)),u=i("util/test_support"),p=g(i(71)),m=g(i(616));function g(e){return e&&e.__esModule?e:{default:e}}var f=t.convertISOtoEpoch=function(e){var t=p.default.newSplunkTime({time:e,format:p.default.ISO_8601});return t.isValid()?(t.valueOf()/1e3).toString():e},v=t.convertEpochToISO=function(e){if(!e||"0"===e)return e;var t=p.default.unix(e);return t.isValid()?p.default.newSplunkTime({time:t}).format("YYYY-MM-DDTHH:mm:ss.SSS"):e},b=function(t){function i(e){(0,s.default)(this,i);var t=(0,r.default)(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),n=t.props,a=n.earliest,o=n.latest;return t.state={earliest:a,latest:o},t}return(0,o.default)(i,t),(0,a.default)(i,[{key:"render",value:function(){var t=this,i=this.props,s=i.presets,a=i.onChange,r=i.documentationURL,o=i.menuSettings,l=i.labelMaxChars,c=this.state,p=c.earliest,g=c.latest,b=[],y=[];return o.showRelative&&(b.push("relative"),y.push("relative")),o.showRealtime&&(b.push("realTime"),y.push("realTime")),o.showDate&&(b.push("date"),y.push("allTime")),o.showDateTime&&(b.push("dateTime"),y.push("dateTime")),o.showAdvanced||(y=[]),d.default.createElement(m.default,{presetsTransform:o.showPresets?function(){return s}:function(){return[]},validateRTSearchCapability:!1},d.default.createElement(h.default,(0,n.default)({advancedInputTypes:y,formInputTypes:b,onChange:function(e,i){var n={earliest:f(i.earliest),latest:f(i.latest)};t.setState(n),a(e,n)},inline:!1,earliest:v(p),latest:v(g),documentationURL:r,labelMaxChars:l},(0,u.createTestHook)(e.i))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.earliest!==t.earliest||e.latest!==t.latest?{earliest:e.earliest,latest:e.latest}:null}}]),i}(l.Component);b.propTypes={presets:c.default.arrayOf(c.default.shape({label:c.default.string,earliest:c.default.string,latest:c.default.string})).isRequired,onChange:c.default.func.isRequired,earliest:c.default.string,latest:c.default.string,documentationURL:c.default.string,menuSettings:c.default.objectOf(c.default.bool),labelMaxChars:c.default.number},b.defaultProps={earliest:"",latest:"",documentationURL:null,menuSettings:{showPresets:!0,showAdvanced:!0,showDate:!0,showRealtime:!0,showDateTime:!0,showRelative:!0},labelMaxChars:40},t.default=b},"splunkjs/mvc/components/UrlWarningModal":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=v(i(15)),s=v(i(77)),a=v(i(167)),r=v(i(65)),o=(0,r.default)(["\n    float: left;\n"],["\n    float: left;\n"]),l=(0,r.default)(["\n    word-break: break-word;\n"],["\n    word-break: break-word;\n"]),d=i(0),c=v(d),h=v(i(4)),u=v(i(13)),p=v(i(34)),m=v(i(19)),g=v(i(38)),f=i(3);function v(e){return e&&e.__esModule?e:{default:e}}var b=(0,u.default)(g.default)(o),y=u.default.p(l),_={TITLE:(0,f._)("Redirecting away from Splunk"),REDIRECT:(0,f._)("You are being redirected away from Splunk to the following URL:"),CONTINUE:(0,f._)("Continue"),CANCEL:(0,f._)("Cancel"),ALLOW_AND_DONT_ASK:(0,f._)("Don't show this again"),NOTE:(0,f._)("Note that tokens embedded in a URL could contain sensitive information.")},w=function(e){var t=e.url,i=e.onConfirm,r=e.onRequestClose,o=e.onAddUrlToAllowList,l=(0,a.default)(e,["url","onConfirm","onRequestClose","onAddUrlToAllowList"]),h=(0,d.useState)(!1),u=(0,s.default)(h,2),g=u[0],f=u[1],v=(0,d.useCallback)((function(){"function"==typeof r&&r()}),[r]),w=(0,d.useCallback)((function(){t&&("function"==typeof o&&g&&o(t),i(t)),v()}),[t,g,v,o]),k=(0,d.useCallback)((function(e,t){var i=t.selected;f(!i)}),[]);return c.default.createElement(p.default,(0,n.default)({onRequestClose:v,open:!!t},l),c.default.createElement(p.default.Header,{title:_.TITLE,onRequestClose:v}),c.default.createElement(p.default.Body,null,c.default.createElement("p",null,_.REDIRECT),c.default.createElement(y,null,t),c.default.createElement("p",null,_.NOTE)),c.default.createElement(p.default.Footer,null,"function"==typeof o&&c.default.createElement(b,{selected:g,onClick:k,appearance:"checkbox",inline:!0},_.ALLOW_AND_DONT_ASK),c.default.createElement(m.default,{appearance:"secondary",onClick:v,label:_.CANCEL,"data-test-name":"cancel"}),c.default.createElement(m.default,{appearance:"primary",onClick:w,label:_.CONTINUE,"data-test-name":"continue"})))};w.propTypes={url:h.default.string.isRequired,onConfirm:h.default.func.isRequired,onRequestClose:h.default.func.isRequired,onAddUrlToAllowList:h.default.func},w.defaultProps={onAddUrlToAllowList:function(){}},t.default=w,e.exports=t.default},"splunkjs/mvc/eventsviewerview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/splunk.util"),r=i("collections/search/SelectedFields"),o=i("collections/services/data/ui/WorkflowActions"),l=i("models/search/Job"),d=i("models/services/search/jobs/Result"),c=i("stubs/splunk.config"),h=i("models/services/search/jobs/Summary"),u=(i("util/console"),i("views/shared/eventsviewer/LazyEventsViewer")),p=i("splunkjs/mvc/basesplunkview"),m=i("splunkjs/mvc/messages"),g=i("splunkjs/mvc/paginatorview"),f=i("splunkjs/mvc/utils"),v=i("splunkjs/mvc/sharedmodels"),b=i("util/general_utils"),y=i("splunkjs/mvc/tokenawaremodel"),_=i("models/search/Report"),w=i("splunkjs/mvc/drilldown"),k=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,T=/^["']|["|']$/g;return p.extend({className:"splunk-events-viewer",options:{managerid:null,data:"events",showPager:!0,pagerPosition:"bottom",drilldownRedirect:!0,maxCount:100},reportDefaults:{"display.events.fields":'["host", "source", "sourcetype"]',"display.events.type":"list","display.prefs.events.count":10,"display.events.rowNumbers":"1","display.events.maxLines":"5","display.events.histogram":"0","display.events.raw.drilldown":"full","display.events.list.wrap":"1","display.events.list.drilldown":"full","display.events.table.wrap":"1","display.events.table.drilldown":"1","display.events.table.sortDirection":"asc"},omitFromSettings:["el","id","name","manager","reportModel","displayRowNumbers","segmentation","softWrap"],normalizeOptions:function(e,t){if(t.hasOwnProperty("rowNumbers")?b.isBooleanEquivalent(t.rowNumbers)?e.set("rowNumbers",b.normalizeBoolean(t.rowNumbers)?"1":"0"):e.set("rowNumbers",t.rowNumbers):t.hasOwnProperty("displayRowNumbers")&&e.set("rowNumbers",a.normalizeBoolean(t.displayRowNumbers)?"1":"0"),t.hasOwnProperty("drilldown")&&this._applyDrilldownType(t.drilldown,e),t.hasOwnProperty("raw.drilldown")?e.set("raw.drilldown",t["raw.drilldown"]):t.hasOwnProperty("segmentation")&&!t.hasOwnProperty("drilldown")&&e.set("raw.drilldown",t.segmentation),t.hasOwnProperty("list.drilldown")?e.set("list.drilldown",t["list.drilldown"]):t.hasOwnProperty("segmentation")&&!t.hasOwnProperty("drilldown")&&e.set("list.drilldown",t.segmentation),t.hasOwnProperty("table.drilldown")){var i=t["table.drilldown"];"all"===i?i=!0:"none"===i&&(i=!1),b.isBooleanEquivalent(i)?e.set("table.drilldown",b.normalizeBoolean(i)?"1":"0"):e.set("table.drilldown",i)}else t.hasOwnProperty("segmentation")&&e.set("table.drilldown","none"!==t.segmentation?"1":"0");t.hasOwnProperty("list.wrap")?b.isBooleanEquivalent(t["list.wrap"])?e.set("list.wrap",b.normalizeBoolean(t["list.wrap"])?"1":"0"):e.set("list.wrap",t["list.wrap"]):t.hasOwnProperty("softWrap")&&e.set("list.wrap",a.normalizeBoolean(t.softWrap)?"1":"0"),t.hasOwnProperty("table.wrap")?b.isBooleanEquivalent(t["table.wrap"])?e.set("table.wrap",b.normalizeBoolean(t["table.wrap"])?"1":"0"):e.set("table.wrap",t["table.wrap"]):t.hasOwnProperty("softWrap")&&e.set("table.wrap",a.normalizeBoolean(t.softWrap)?"1":"0"),t.hasOwnProperty("count")||e.has("count")||e.set("count",this.reportDefaults["display.prefs.events.count"]),t.hasOwnProperty("maxLines")||e.has("maxLines")?e.set("maxLines",e.get("maxLines").toString()):e.set("maxLines",this.reportDefaults["display.events.count"].toString())},initialize:function(e){this.configure(),this.model=this.options.reportModel||y._createReportModel(this.reportDefaults,{_tokenRegistry:this.options.settingsOptions.registry}),this.settings._sync=f.syncModels({source:this.settings,dest:this.model,prefix:"display.events.",include:["fields","type","count","rowNumbers","maxLines","raw.drilldown","list.drilldown","showPager","list.wrap","table.drilldown","table.wrap","table.sortDirection","table.sortColumn"],exclude:["drilldownRedirect","managerid"],auto:!0,alias:{count:"display.prefs.events.count"}}),this.settings.on("change",this.onSettingsChange,this),this.model.on("change",this.onReportChange,this),!1!==this.options.normalizeSettings&&this.normalizeOptions(this.settings,e),this.resultModel=new d,this.summaryModel=new h,this.searchJobModel=new l,this.reportModel=new _,this.reportModel._syncPush=f.syncModels({source:this.model,dest:this.reportModel.entry.content,tokens:!1,auto:"push"}),this.reportModel._syncPull=f.syncModels({source:this.model,dest:this.reportModel.entry.content,tokens:!1,include:["display.events.table.sortColumn","display.events.table.sortDirection"],auto:"pull"}),this.listenTo(this.reportModel,"eventsviewer:drilldown",this.handleMiscDrilldown),this.applicationModel=v.get("app"),this.selectedFieldsCollection=new r,this.workflowActionsCollection=new o,this.workflowActionsCollection.fetch({data:{app:this.applicationModel.get("app"),owner:this.applicationModel.get("owner"),count:-1,sort_key:"name",search:"disabled=false"},success:s.bind((function(){this._isWorkflowActionsCollectionReady=!0,this.render()}),this)}),this._lastJobFetched=null,this.updateSelectedFields(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.eventsViewer=new u({model:{result:this.resultModel,summary:this.summaryModel,searchJob:this.searchJobModel,report:this.reportModel,application:this.applicationModel},collection:{selectedFields:this.selectedFieldsCollection,workflowActions:this.workflowActionsCollection},selectableFields:!1,headerMode:"none",allowRowExpand:!0,allowModalize:!0,defaultDrilldown:!1}),this.eventsViewer.load(),this.listenTo(this.eventsViewer,"drilldown",this.emitDrilldownEvent),this.manager||this.onManagerChange(this.registry,null)},configure:function(){return!1===this.options.normalizeSettings&&(this.omitFromSettings=(this.omitFromSettings||[]).concat(s(this.options).chain().omit("id","managerid","data","resizable","drilldownRedirect","pagerPosition").keys().value())),p.prototype.configure.apply(this,arguments)},onManagerChange:function(e,t){if(this.manager&&(this.manager.off(null,null,this),this.manager=null),this.eventData&&(this.eventData.off(),this.eventData.destroy(),this.eventData=null),this.summaryData&&(this.summaryData.off(),this.summaryData.destroy(),this.summaryData=null),this._searchStatus=null,this._eventCount=0,this._isSummaryModelReady=!1,this._isSearchJobModelReady=!1,this._lastJobFetched=null,this.resultModel.setFromSplunkD({}),this.summaryModel.setFromSplunkD({}),!t)return this._searchStatus={state:"nomanager"},void this.render();this._searchStatus={state:"start"},this.manager=t,this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:done",this.onSearchDone,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.on("search:refresh",this.onSearchRefreshed,this),this.manager.on("search:error",this.onSearchError,this),this.manager.on("search:fail",this.onSearchFailed,this),this.eventData=this.manager.data("events",{autofetch:!1,output_mode:"json",truncation_mode:"abstract"}),this.eventData.on("data",this.onEventData,this),this.eventData.on("error",this.onSearchError,this),this.summaryData=this.manager.data("summary",{autofetch:!1,output_mode:"json",top_count:10,output_time_format:"%d/%m/%y %l:%M:%S.%Q %p"}),this.summaryData.on("data",this.onSummaryData,this),this.summaryData.on("error",this._onSummaryError,this);var i=this.manager.get("data");i&&i.eventAvailableCount?(this.onSearchStart(i),this.onSearchProgress({content:i}),i.isDone&&this.onSearchDone({content:i})):this.render(),t.replayLastSearchEvent(this)},_fetchJob:function(e){this._isRealTimeSearch=e.isRealTimeSearch;var t=e.sid;if(this._lastJobFetched!==t||!this._isSearchJobModelReady){this._lastJobFetched=t,this.searchJobModel.set("id",t);var i=this.manager.getJobResponse();if(!i)return;this.searchJobModel.setFromSplunkD(i),this._isSearchJobModelReady||(this._isSearchJobModelReady=!0,this.render())}},onSearchStart:function(e){e=e||this.manager.get("data"),this._searchStatus={state:"running"},this._eventCount=0,this._statusBuckets=void 0,this._lastJobFetched=null,this._isSummaryModelReady=!1,this._isSearchJobModelReady=!1,this.resultModel.setFromSplunkD({}),this.summaryModel.setFromSplunkD({}),this._fetchJob(e),this.render()},onSearchProgress:function(e){this._searchStatus={state:"running"};var t=(e=e||{}).content||{},i=t.eventAvailableCount||0,n=this._statusBuckets=t.statusBuckets||0,s=e.name,r=t.isRealTimeSearch;this._fetchJob(t),s&&(s=a.stripLeadingSearchCommand(s),this.reportModel.entry.content.set("search",s,{silent:!0})),this._eventCount=i,i>0&&this.updateEventData(),(n>0||r)&&this.updateSummaryData(),this.render()},onSearchDone:function(e){this._searchStatus={state:"done"};var t=(e=e||{}).content||{},i=t.eventAvailableCount||0;this._fetchJob(t),this._eventCount=i,this.updateEventData(),this.updateSummaryData(),this.render()},onSearchCancelled:function(){this._searchStatus={state:"cancelled"},this.render()},onSearchRefreshed:function(){this._searchStatus={state:"refresh"},this.render()},onSearchError:function(e,t){var i=m.getSearchErrorMessage(t)||e;this._searchStatus={state:"error",message:i},this.render()},onSearchFailed:function(e){var t=m.getSearchFailureMessage(e);this._searchStatus={state:"error",message:t},this.render()},onEventData:function(e,t){this.resultModel.setFromSplunkD(t),this.render()},onSummaryData:function(e,t){this.summaryModel.setFromSplunkD(t),this._isSummaryModelReady||(this._isSummaryModelReady=!0,this.render())},_onSummaryError:function(e,t){this.onSearchError(e,t)},onSettingsChange:function(e){if(e.hasChanged("fields")&&this.updateSelectedFields(),(e.hasChanged("showPager")||e.hasChanged("pagerPosition")||e.hasChanged("count")||e.hasChanged("fields"))&&this.render(),(e.hasChanged("showPager")||e.hasChanged("type")||e.hasChanged("count")||e.hasChanged("maxLines")||e.hasChanged("raw.drilldown")||e.hasChanged("table.drilldown")||e.hasChanged("list.drilldown"))&&this.updateEventData(),e.hasChanged("drilldown"))this._applyDrilldownType(e.get("drilldown"),e);else if(e.hasChanged("table.drilldown")||e.hasChanged("raw.drilldown")||e.hasChanged("list.drilldown")){var t=this.options.segmentation,i=s.bind((function(e,t,i){return e.get(i+".drilldown")===t}),null,this.settings);s({table:"1",raw:t||"full",list:t||"full"}).all(i)?this.settings.set("drilldown","all"):s({table:"0",raw:"none",list:"none"}).all(i)?this.settings.set("drilldown","none"):this.settings.unset("drilldown")}},_applyDrilldownType:function(e,t){if("all"===e){var i=this.options.segmentation||"full";t.set({"raw.drilldown":i,"list.drilldown":i,"table.drilldown":"1"})}else"none"===e&&t.set({"raw.drilldown":"none","list.drilldown":"none","table.drilldown":"0"});e&&t.set("drilldown",e,{silent:!0})},onReportChange:function(e){(e.hasChanged("display.events.table.sortColumn")||e.hasChanged("display.events.table.sortDirection"))&&this.updateEventData()},emitDrilldownEvent:function(e,t){var i=this.model.get("display.events.type"),n=this.settings.get(i+".drilldown");if("none"!==n&&("table"!==i||!1!==a.normalizeBoolean(n))){var r=e.data.field,o=e.data.value;void 0===r&&"addterm"===e.data.action?r="_raw":void 0===r&&e._time&&(r="_time",o=a.getEpochTimeFromISO(e._time));var l={"click.name":r,"click.value":o,"click.name2":r,"click.value2":o},d=e.idx;if(void 0!==d&&d>=0){var c=this.resultModel.results.at(d).toJSON();if(c){s.each(c,(function(e,t){l["row."+t]=e.length>1?e.join(","):e[0]}));var h=a.getEpochTimeFromISO(c._time);l.earliest=h,l.latest=String(parseFloat(h)+1)}}var u=s.bind(this._onIntentionsApplied,this,e),p=this.model,m=w.createEventPayload({field:r,data:l,event:e},(function(){var e=s.pick(p.toJSON({tokens:!0}),"search","dispatch.earliest_time","dispatch.latest_time");t().done(u).always((function(){p.set(e,{tokens:!0,silent:!0})}))}));this.trigger("drilldown click",m,this),this.settings.get("drilldownRedirect")&&!m.defaultPrevented()&&m.drilldown()}},_onIntentionsApplied:function(e){var t=this.reportModel.entry.content,i=t.get("search"),n={earliest:t.get("dispatch.earliest_time"),latest:t.get("dispatch.latest_time")};n.earliest===this.manager.get("earliest_time")&&n.latest===this.manager.get("latest_time")&&(n=w.getNormalizedTimerange(this.manager));var a=s.extend({q:i},n),r=!1;(this.trigger("drilldown:redirect",{data:a,preventDefault:function(){r=!0}}),r)||(c.ON_DRILLDOWN||w.redirectToSearchPage)(a,e.event.ctrlKey||e.event.metaKey||e.newTab)},handleMiscDrilldown:function(){(c.ON_DRILLDOWN||w.redirectToSearchPage)({q:this.reportModel.entry.content.get("search"),earliest:this.reportModel.entry.content.get("dispatch.earliest_time")||"",latest:this.reportModel.entry.content.get("dispatch.latest_time")||""})},onPageChange:function(){this.updateEventData()},updateEventData:function(){if(this.eventData){var e=this.paginator?parseInt(this.paginator.settings.get("pageSize"),10):0,t=this.paginator?parseInt(this.paginator.settings.get("page"),10):0,i=this.settings.get("type"),n=e*t,a=parseInt(this.settings.get("count"),10)||this.reportDefaults["display.prefs.events.count"],r=s.isFunction(this.manager.query.postProcessResolve)?this.manager.query.postProcessResolve():"";this._isRealTimeSearch&&!r&&(n=0-a-n);var o=this.settings.get("maxLines").toString(),l=this.settings.get("raw.drilldown"),d=this.settings.get("list.drilldown"),c=this.model.get("display.events.table.sortColumn"),h=this.model.get("display.events.table.sortDirection"),u=null,p=null;switch(a=a>this.options.maxCount||a<1?this.reportDefaults["display.prefs.events.count"]:a,"raw"===i?u=l:"list"===i&&(u=d),u=u?u.toLowerCase():null){case"inner":case"outer":case"full":case"none":break;default:u="full"}"table"===i&&c&&(p="desc"===h?"| sort "+(n+a)+" - "+c:"| sort "+(n+a)+" "+c);var m=JSON.parse(this.settings.get("fields"));m=s.union(m,["_raw","_time","_audit","_decoration","eventtype","_eventtype_color","linecount","_fulllinecount"]),this._isRealTimeSearch&&(m=s.union(m,["_serial","splunk_server"])),!this._isRealTimeSearch&&c&&this.model.set("display.prefs.events.offset",n),this.eventData.set({offset:n,count:a,max_lines:o,segmentation:u,search:p,fields:m}),this.eventData.fetch()}},updateSummaryData:function(){this.summaryData&&this.summaryData.fetch()},updateSelectedFields:function(){var e=this.settings.get("fields");if(e){if(s.isString(e))if("["===(e=e.trim())[0]&&"]"===e.slice(-1))try{e=JSON.parse(e)}catch(e){}else e=s.map(e.match(k),(function(e){return e.replace(T,"")})),this.updateFieldSetting(e);else this.updateFieldSetting(e);0!==(e=s.map(e,(function(e){return{name:e}}))).length&&"*"!==e[0].name||(e=s.filter(this.resultModel.fields.toJSON(),(function(e){return"_"!==e.name.charAt(0)})))}this.selectedFieldsCollection.reset(e),this.updateEventData()},updateFieldSetting:function(e){var t=JSON.stringify(e);this.settings.set("fields",t,{silent:!0}),this.model.set("display.events.fields",t,{silent:!0})},render:function(){var e=this._searchStatus||null,t=this._eventCount||0,i=(void 0===this._statusBuckets||this._statusBuckets,!0===this._isSummaryModelReady),n=!0===this._isSearchJobModelReady,r=!0===this._isWorkflowActionsCollectionReady,o=i&&n&&r,l=a.normalizeBoolean(this.settings.get("showPager")),d=this.settings.get("pagerPosition"),c=parseInt(this.settings.get("count"),10)||this.reportDefaults["display.prefs.events.count"];c=c>this.options.maxCount||c<1?this.reportDefaults["display.prefs.events.count"]:c;var h=null;if(e)switch(e.state){case"nomanager":h="no-search";break;case"start":h="empty";break;case"running":0!==t&&o||(h="waiting");break;case"cancelled":h="cancelled";break;case"refresh":h="refresh";break;case"done":0===t&&(h="no-events");break;case"error":h={level:"error",icon:"warning-sign",message:e.message}}return h?(this.messageElement||(this.messageElement=document.createElement("div"),this.messageElement.classList.add("msg"),this.messageElement.style.height="306px"),m.render(h,this.messageElement),this.$el.append(this.messageElement)):this.messageElement&&(this.messageElement.parentNode&&this.messageElement.parentNode.removeChild(this.messageElement),this.messageElement=null),o&&e&&!h?this.eventsViewer&&(this._eventsViewerRendered||(this._eventsViewerRendered=!0,this.eventsViewer.render(),this.$el.append(this.eventsViewer.el)),this.eventsViewer.activate({deep:!0}).$el.show()):this.eventsViewer&&this.eventsViewer.deactivate({deep:!0}).$el.hide(),o&&e&&!h&&l?(this.paginator||(this.paginator=new g({id:s.uniqueId(this.id+"-paginator")}),this.paginator.settings.on("change:page",this.onPageChange,this)),this.paginator.settings.set({pageSize:c,itemCount:t}),"top"===d?this.$el.prepend(this.paginator.el):this.$el.append(this.paginator.el)):this.paginator&&(this.paginator.settings.off("change:page",this.onPageChange,this),this.paginator.remove(),this.paginator=null),this.trigger("rendered",this),this},remove:function(){this.eventsViewer&&(this.eventsViewer.deactivate({deep:!0}),this.eventsViewer.remove(),this.eventsViewer=null),this.paginator&&(this.paginator.settings.off("change:page",this.onPageChange,this),this.paginator.remove(),this.paginator=null),this.eventData&&(this.eventData.off(),this.eventData.destroy(),this.eventData=null),this.summaryData&&(this.summaryData.off(),this.summaryData.destroy(),this.summaryData=null),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy()),this.reportModel&&(this.reportModel.off(),this.reportModel._syncPush&&this.reportModel._syncPush.destroy(),this.reportModel._syncPull&&this.reportModel._syncPull.destroy()),this.model&&this.model.off("change",this.onReportChange,this),p.prototype.remove.call(this)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/footerview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("splunkjs/mvc/basesplunkview"),a=i("util/console");return s.extend({moduleId:n.i,initialize:function(){a.warn("footerview has been deprecated and may be removed in a future release.")},render:function(){return this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/headerview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=(i("splunkjs/mvc/mvc"),i("splunkjs/mvc/basesplunkview")),r=i("views/shared/splunkbar/Master"),o=i("views/shared/appbar/Master"),l=i("views/shared/global_banner/ReactAdapterMaster"),d=i("splunkjs/mvc/sharedmodels"),c=(i("shim/splunk.util"),i("models/config"));i("uri/route");return a.extend({moduleId:n.i,className:"splunk-header",options:{appbar:!0,splunkbar:!0,fromApp:!1,useSessionStorageCache:!1,acceleratedAppNav:!1},initialize:function(){this.configure(),this.model=this.model||{},this.model.application=d.get("app"),this.model.user=d.get("user"),this.model.appLocal=d.get("appLocal"),this.model.serverInfo=d.get("serverInfo"),this.model.userPref=d.get("userPref"),this.model.globalBanner=d.get("globalBanner"),this.collection=this.collection||{},this.collection.appLocals=d.get("appLocals"),this.collection.tours=d.get("tours"),this.deferreds=this.deferreds||{},this.deferreds.tours=new Promise((function(){})),this.sharedPromise=new Promise(function(e){s.when(this.model.serverInfo.dfd,this.model.globalBanner.dfd).done((function(){e()}))}.bind(this))},renderSplunkBar:function(){this.settings.get("splunkbar")?(this.globalNav||(this.globalNav=r.create({showAppsList:!1!==this.settings.get("showAppsList"),fromApp:this.settings.get("fromApp"),model:{application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo,config:c,userPref:this.model.userPref},collection:{apps:this.collection.appLocals}})),this.globalNav.render().appendTo(this.$el)):this.globalNav&&(this.globalNav.remove(),this.globalNav=null)},renderAppBar:function(){this.settings.get("appbar")?(this.appNav||(this.appNav=o.create({model:{application:this.model.application,app:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo,appNav:this.model.appNav},useSessionStorageCache:this.settings.get("useSessionStorageCache"),autoRender:!1})),this.appNav.render().appendTo(this.$el)):this.appNav&&(this.appNav.remove(),this.appNav=null)},renderGlobalBanner:function(){this.globalBanner||(this.globalBanner=new l({model:{globalBanner:this.model.globalBanner}})),this.globalBanner.render().appendTo(this.$el)},render:function(){return this.stopListening(this.settings,"change:splunkbar"),this.stopListening(this.settings,"change:appbar"),this.sharedPromise.then(function(){this.useSideNav?this.deferreds.tours.then(function(){this.$el.empty(),this.$el.append(this.sideNav.el)}.bind(this)):(this.$el.empty(),this.options.fromApp&&this.model.globalBanner.globalBannerVisible()&&this.renderGlobalBanner(),this.renderSplunkBar(),this.renderAppBar(),this.listenTo(this.settings,"change:appbar",(function(){this.renderAppBar()})),this.listenTo(this.settings,"change:splunkbar",(function(){this.renderSplunkBar()})))}.bind(this)),this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/linklistview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("splunkjs/mvc/basechoiceview"),a=i("splunkjs/mvc/components/LinkList");return s.extend({moduleId:n.i,className:"splunk-linklist splunk-choice-input",options:{valueField:"",labelField:"",default:void 0,choices:[],selectFirstChoice:!1,disabled:!1,value:void 0},getReactComponent:function(){return a}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/multidropdownview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("splunkjs/mvc/basemultichoiceview"),r=i("splunkjs/mvc/components/MultiDropdown");return a.extend({moduleId:n.i,className:"splunk-multidropdown splunk-choice-input",getReactComponent:function(){return r},getState:function(){var e=a.prototype.getState.apply(this,arguments);return s.extend({},e,{allowCustomValues:this.settings.get("allowCustomValues")})}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/multiselectview":function(e,t,i){var n;void 0===(n=function(e){return i("util/console").warn("%s is deprecated. Please require %s instead.","splunkjs/mvc/simpleform/multiselectview","splunkjs/mvc/simpleform/multidropdownview"),i("splunkjs/mvc/multidropdownview")}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/paginatorview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=i("require/underscore"),r=(i("splunkjs/mvc/mvc"),i("splunkjs/mvc/basesplunkview"));i("splunkjs/mvc/settings");return i("splunkjs/css/paginator.css"),r.extend({moduleId:n.i,tagName:"nav",attributes:{"aria-label":"Pagination"},className:"splunk-paginator",events:{"click a":"onPageClick"},options:{itemCount:-1,page:0,pageSize:10},initialize:function(){this.configure(),this.settings.on("change",this.render,this)},hide:function(){this.$el.css("display","none")},render:function(e){this.$el.empty();var t=this.settings.get("pageSize"),i=this.settings.get("itemCount");if(i<=t)return this.settings.set("page",0),this;var n,r,o=this.settings.get("page"),l=Math.ceil(i/t),d=Math.min(10,l);o>l&&(o=l-1,this.settings.set({page:o})),n=Math.max(0,o-d/2),r=Math.min(l,n+d)-1,n=Math.max(0,r-d+1);var c,h=function(e){return"<a href='#' role='button' data-page='"+e+"' aria-label='"+(Number.isInteger(e)?a("Go to page "+(e+1)).t():a("Go to "+e+" page").t())+"' />"},u="<a href='#' role='button' class='disabled' aria-disabled='true' tabindex='-1' />",p=function(e){return"<a href='#' role='button' class='selected' aria-selected='true' aria-current='page' aria-label='"+a("Selected page "+(e+1)).t()+"' />"},m=this.$el,g=s(0==o?u:h("prev"),m);for(g.html("&laquo; "+a("Prev").t()).appendTo(m),c=n;c<=r;++c)(g=s(c==o?p(c):h(c))).text(c+1).appendTo(m);return(g=s(o==r?u:h("next"),m)).html(a("Next").t()+" &raquo;").appendTo(m),this},show:function(){this.$el.css("display","")},onPageClick:function(e){if(e.stopPropagation(),e.preventDefault(),!s(e.currentTarget).is(".selected,.disabled")){var t=s(e.currentTarget).attr("data-page"),i=this.settings.get("page");switch(t){case"prev":e.shiftKey?i=0:i-=1;break;case"next":if(e.shiftKey){var n=this.settings.get("itemCount"),a=this.settings.get("pageSize");i=parseInt(n/a,10)-(n%a==0?1:0)}else i+=1;break;default:i=parseInt(t,10)}this.settings.set({page:i})}}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/progressbarview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=(i("splunkjs/mvc/mvc"),i("require/backbone")),r=i("splunkjs/mvc/basesplunkview"),o=i("require/underscore"),l=i("views/shared/delegates/Popdown"),d=(i("shim/splunk.util"),i("stubs/splunk.config"),i("models/search/Job")),c=i("views/shared/ProgressBar");return r.extend({moduleId:n.i,className:"splunk-progressbar",configure:function(){this.options.manager&&(this.options.managerid=this.options.manager),r.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.children||(this.children={}),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.model={jobState:new a.Model,messages:new a.Model};var e=o.debounce(this.render);this.model.jobState.on("change",e,this),this.model.messages.on("change",e,this),this.model.searchJob=new d,this.children.progressBar=new c({model:this.model.searchJob,animateRealTime:!1})},onManagerChange:function(e,t){this.manager&&this.manager.off(null,null,this),this.manager=t,t&&(this.model.jobState.clear(),this.model.messages.clear(),this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress search:done",this.onSearchProgress,this),this.manager.on("search:error",this.onSearchFail,this),this.manager.on("search:fail",this.onSearchFail,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.replayLastSearchEvent(this))},onSearchStart:function(){var e=this.manager.getSid();this.model.searchJob.set("id",e),this.model.messages.clear(),this.model.jobState.set({progress:!0})},onSearchProgress:function(e){this.model.searchJob.setFromSplunkD({entry:[e]});var t=e.content||{},i=t.dispatchState;if(t.messages){var n=o(t.messages).chain().where({type:"ERROR"}).pluck("text").value(),s=o(t.messages).chain().where({type:"WARN"}).pluck("text").value();this.model.messages.set("errors",n,{unset:o.isEmpty(n)}),this.model.messages.set("warnings",s,{unset:o.isEmpty(s)})}void 0===i||"FAILED"===i||"DONE"===t.dispatchState?this.model.jobState.clear():this.model.jobState.set({progress:!0})},onSearchFail:function(){this.model.jobState.clear()},onSearchCancelled:function(){this.model.jobState.clear()},render:function(){return this.model.jobState.has("progress")&&this.$el.is(":empty")&&this.children.progressBar.render().prependTo(this.$el),this.model.messages.has("errors")||this.model.messages.has("warnings")?(this.$error||(this.$error=s('<div class="error-details"><a href="#" class="dropdown-toggle error-indicator"><i class="icon-warning-sign"></i></a><div class="dropdown-menu"><div class="arrow"></div><ul class="first-group error-list"></ul></div></div>').appendTo(this.$el),this.$error.find("a.error-indicator").attr("aria-label",o("Click to see the error details.").t())),this.$error.find(".error-list").html(this.errorStatusTemplate(o.extend({_:o,errors:null,warnings:null},this.model.messages.toJSON()))),this.children.errorPopdown||(this.children.errorPopdown=new l({el:this.$error})),this.$error[this.model.messages.has("errors")?"addClass":"removeClass"]("severe")):(this.$error&&(this.$error.remove(),this.$error=null),this.children.errorPopdown&&(this.children.errorPopdown.remove(),this.children.errorPopdown=null)),this},remove:function(){return o(this.children).invoke("remove"),o(this.model).invoke("off"),this.manager&&this.manager.off(null,null,this),r.prototype.remove.call(this)},errorStatusTemplate:o.template('<% _(errors).each(function(error){ %><li class="error"><i class="icon-warning-sign"></i> <%- error %></li><% }); %><% _(warnings).each(function(warn){ %><li class="warning"><i class="icon-warning-sign"></i> <%- warn %></li><% }); %>')})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/radiogroupview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("splunkjs/mvc/basechoiceview"),a=i("splunkjs/mvc/components/RadioGroup");return s.extend({moduleId:n.i,className:"splunk-radiogroup splunk-choice-input",options:{valueField:"",labelField:"",default:void 0,choices:[],selectFirstChoice:!1,disabled:!1,value:void 0,labelledBy:""},getReactComponent:function(){return a}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/refreshtimeindicatorview":function(e,t,i){var n;void 0===(n=function(e,t,n){i("splunkjs/mvc/mvc");var s=i("require/backbone"),a=i("splunkjs/mvc/basesplunkview"),r=i("util/moment");i("util/moment/compactFromNow");var o,l=i("require/underscore"),d=i("shim/splunk.util"),c=i("util/general_utils"),h={};function u(){l(h).each((function(e){e()}))}function p(e){delete h[e],l.isEmpty(h)&&(clearInterval(o),o=null)}return a.extend({moduleId:n.i,className:"splunk-timeindicator",events:{"click a.refresh-btn":"refresh"},configure:function(){this.options.manager&&(this.options.managerid=this.options.manager),this.options["refresh.time.visible"]=c.normalizeBoolean(this.options["refresh.time.visible"],{default:!0}),d.isInt(this.options["refresh.auto.interval"])?this.options["refresh.auto.interval"]=parseInt(this.options["refresh.auto.interval"],10):this.options["refresh.auto.interval"]=0,a.prototype.configure.apply(this,arguments),this.refreshTimeModel=new s.Model,this.listenTo(this.refreshTimeModel,"change",this.renderRefreshTime,this)},initialize:function(){this.configure(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.timer=l.uniqueId("timer_"),this.listenTo(this.settings,"change",this.updateContent)},onManagerChange:function(e,t){this.manager&&this.manager.off(null,null,this),t&&(this.manager=t,this.manager.on("search:start",this.clear,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:done",this.onSearchProgress,this),this.manager.on("search:fail",this.clear,this),this.manager.on("search:cancelled",this.clear,this),t.replayLastSearchEvent(this))},clear:function(){p(this.timer),this.$el.html("&nbsp;")},updateRefreshTime:function(){this.refreshTime&&r().diff(this.refreshTime)>=1e4&&this.refreshTimeModel.set({text:this.refreshTime.compactFromNow(),title:l("Last refresh: ").t()+this.refreshTime.format("LLL")})},renderRefreshTime:function(){this.$(".time-freshness").text(this.refreshTimeModel.get("text")).show(),this.$(".time-freshness").attr("title",this.refreshTimeModel.get("title")),this.$el.show()},onSearchProgress:function(e){this.lastContent=(e||{}).content||{},this.updateContent()},updateContent:function(){var e,t,i,n=this.lastContent;this.autoRefresh&&(clearInterval(this.autoRefresh),this.autoRefresh=null),"FAILED"===n.dispatchState||"PARSING"===n.dispatchState||"QUEUED"===n.dispatchState?this.clear():"RUNNING"===n.dispatchState?n.isRealTimeSearch?(p(this.timer),this.$el.text(l("Real-time").t())):this.clear():"DONE"===n.dispatchState&&(this.refreshTime=r(this.manager.get("published")),this.clear(),this.refreshTime&&this.settings.get("refresh.time.visible")&&(this.$el.append('<span class="time-freshness"/>'),this.updateRefreshTime(),e=this.timer,t=this.updateRefreshTime,i=this,h[e]&&p(e),h[e]=l.bind(t,i),o||(o=setInterval(u,1e3))),this.settings.get("refresh.auto.interval")&&(this.autoRefresh=setTimeout(l.bind(this.refresh,this),1e3*this.settings.get("refresh.auto.interval"))))},refresh:function(e){e&&e.preventDefault(),this.manager.startSearch()},render:function(){return this.$el.html("&nbsp;"),this},remove:function(){return p(this.timer),this.autoRefresh&&(clearInterval(this.autoRefresh),this.autoRefresh=null),this.onManagerChange(null,null),a.prototype.remove.call(this)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/resultslinkview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=i("require/underscore"),r=i("shim/splunk.util"),o=i("shim/splunk.window"),l=i("models/search/Job"),d=i("uri/route"),c=i("views/shared/jobstatus/buttons/ExportResultsDialog"),h=i("splunkjs/mvc/basesplunkview"),u=(i("splunkjs/mvc/mvc"),i("models/search/Report")),p=i("splunkjs/mvc/savedsearchmanager"),m=i("splunkjs/mvc/utils"),g=i("splunkjs/mvc/sharedmodels"),f=i("shim/splunk.util"),v=i("splunkjs/mvc/postprocessmanager");return h.extend({moduleId:n.i,events:{"click a.refresh-button":"refresh","blur a":"hideResultsLink","focus a":"showResultsLink"},hideResultsLink:function(e){e.currentTarget.getAttribute("class");this.$el.removeClass("show")},showResultsLink:function(e){e.currentTarget.getAttribute("class");this.$el.addClass("show")},configure:function(){this.options.manager&&(this.options.managerid=this.options.manager),h.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.searchJobModel=new l,this.applicationModel=g.get("app"),this.userModel=g.get("user"),this.showExportResultsButton=this.userModel.canExportResults(),this.model=this.model||new u,this.listenTo(this.model.entry.content,"change:search",a.bind(this.render,this))},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),t&&(this.manager=t,this.listenTo(t,"search:start",this.onSearchStart),this.listenTo(t,"search:done",this.onSearchDone),this.manager.hasJob()&&this.onSearchStart(),this.manager.replayLastSearchEvent(this))},onSearchStart:function(){var e=this.manager.getSid();this.searchJobModel.set("id",e),this.$pivotButton&&this.$pivotButton.off("click").on("click",this.openPivot.bind(this)).show(),this.$searchButton&&this.$searchButton.off("click").on("click",this.openSearch.bind(this)).show(),this.$refreshButton&&this.$refreshButton.show(),this.$exportButton&&(this.manager instanceof v?(this.$exportButton.tooltip("destroy"),this.$exportButton.attr("title",a("Export - You cannot export results for post-process jobs.").t()),this.$exportButton.tooltip({animation:!1,container:"body"}),this.$exportButton.addClass("disabled"),this.$exportButton.off("click").on("click",(function(e){e.preventDefault()})).show()):(this.$exportButton.addClass("disabled"),this.$exportButton.off("click").on("click",(function(e){e.preventDefault()})).show())),this.$inspectButton&&this.$inspectButton.off("click").on("click",this.inspectSearch.bind(this)).show()},onSearchDone:function(e){var t=this.manager.getJobResponse();this.searchJobModel.setFromSplunkD(t),this.$exportButton&&(this.manager instanceof v?(this.$exportButton.tooltip("destroy"),this.$exportButton.attr("title",a("Export - You cannot export results for post-process jobs.").t()),this.$exportButton.tooltip({animation:!1,container:"body"}),this.$exportButton.addClass("disabled"),this.$exportButton.off("click").on("click",(function(e){e.preventDefault()})).show()):(this.$exportButton.tooltip("destroy"),this.$exportButton.attr("title",a("Export").t()),this.$exportButton.tooltip({animation:!1,container:"body"}),this.$exportButton.removeClass("disabled"),this.$exportButton.off("click").on("click",this.exportResults.bind(this)).show()))},openSearch:function(e){e&&(e.preventDefault(),s(e.currentTarget).blur());var t=this.options,i=this.manager,n={},a=i.get("data"),r=t["link.openSearch.searchEarliestTime"];null!=(r=!r&&a.earliestTime?f.getEpochTimeFromISO(a.earliestTime):i.settings.get("earliest_time"))&&(n.earliest=r);var o=t["link.openSearch.searchLatestTime"];null!=(o=!o&&a.latestTime?f.getEpochTimeFromISO(a.latestTime):i.settings.get("latest_time"))&&(n.latest=o),t["link.openSearch.search"]?n.q=t["link.openSearch.search"]:t["link.openSearch.viewTarget"]?n={sid:this.searchJobModel.get("id")}:(n.sid=this.searchJobModel.get("id"),n.q=i.settings.resolve(),i instanceof p&&(n.s=i.get("searchname")));var l=this.model.openInView(this.userModel),c=m.getPageInfo(),h=d.page(c.root,c.locale,c.app,t["link.openSearch.viewTarget"]||l,{data:n});m.redirect(h,!0)},exportResults:function(e){e&&e.preventDefault();var t=new c({model:{searchJob:this.searchJobModel,application:this.applicationModel,report:this.model},usePanelType:!0,onHiddenRemove:!0});t.render().appendTo(s("body")),t.show()},inspectSearch:function(e){e&&(e.preventDefault(),s(e.currentTarget).blur());var t=m.getPageInfo(),i=d.jobInspector(t.root,t.locale,t.app,this.searchJobModel.get("id"));o.open(i,"splunk_job_inspector",{width:870,height:560,menubar:!1})},openPivot:function(e){e&&(e.preventDefault(),s(e.currentTarget).blur());var t,i,n=m.getPageInfo();this.model.has("id")?(t={s:this.model.get("id")},this.model.entry.content.has("dispatch.earliest_time")&&(t.earliest=this.model.entry.content.get("dispatch.earliest_time"),t.latedst=this.model.entry.content.get("dispatch.latest_time")),i=d.pivot(n.root,n.locale,n.app,{data:t}),m.redirect(i,!0)):(t={q:this.model.entry.content.get("search")},this.model.entry.content.has("dispatch.earliest_time")&&(t.earliest=this.model.entry.content.get("dispatch.earliest_time"),t.latest=this.model.entry.content.get("dispatch.latest_time")),i=d.pivot(n.root,n.locale,n.app,{data:t}),m.redirect(i,!0))},render:function(){var e;e=this.model.isPivotReport()&&this.userModel.canPivot()?a.template(this.pivotTemplate):a.template(this.template);var t=this.model.openInView(this.userModel),i=d.getViewRouteData(t);return this.$el.html(e({options:this.options,showExportResultsButton:this.showExportResultsButton,openLabel:i.openLabel})),this.resolveBooleanOptions("link.openPivot.visible","link.visible",!0)?this.$pivotButton=this.$(".pivot-button").hide():this.$(".pivot-button").remove(),this.resolveBooleanOptions("link.openSearch.visible","link.visible",!0)?this.$searchButton=this.$(".search-button").hide():this.$(".search-button").remove(),this.resolveBooleanOptions("link.exportResults.visible","link.visible",!0)?this.$exportButton=this.$(".export-button").hide():this.$(".export-button").remove(),this.resolveBooleanOptions("link.inspectSearch.visible","link.visible",!0)?this.$inspectButton=this.$(".inspect-button").hide():this.$(".inspect-button").remove(),this.resolveBooleanOptions("refresh.link.visible","link.visible",!0)?this.$refreshButton=this.$(".refresh-button").hide():this.$(".refresh-button").remove(),this.$searchButton||this.$exportButton||this.$inspectButton||this.$refreshButton?this.$el.show():this.$el.hide(),this.$("> a").tooltip({animation:!1,container:"body"}),this},resolveBooleanOptions:function(){for(var e,t=this.options,i=0,n=arguments.length-1;i<n;i++)if(null!=(e=t[arguments[i]]))return r.normalizeBoolean(e);return r.normalizeBoolean(arguments[arguments.length-1])},refresh:function(e){e&&e.preventDefault(),this.manager.startSearch("refresh")},template:'            <a href="#" class="search-button btn-pill" title="<%- options[\'link.openSearch.text\'] || _(\'Open in Search\').t() %>">                <i class="icon-search"></i>                <span class="hide-text"><%- options[\'link.openSearch.text\'] || openLabel %></span>            </a>            <% if (showExportResultsButton) { %>                <a href="#" class="export-button btn-pill" title="<%- _(\'Export - You can only export results for completed jobs.\').t() %>">                    <i class="icon-export"></i>                    <span class="hide-text"><%- _("Export").t() %></span>                </a>            <% } %>            <a href="#" class="inspect-button btn-pill" title="<%- _(\'Inspect\').t() %>">                <i class="icon-info"></i>                <span class="hide-text"><%- _("Inspect").t() %></span>            </a><a href="#" class="refresh-button btn-pill" title="<%- _(\'Refresh\').t() %>">                <i class="icon-rotate-counter"></i>                <span class="hide-text"><%- _("Refresh").t() %></span>            </a>        ',pivotTemplate:'            <a href="#" class="pivot-button btn-pill" title="<%- _(\'Open in Pivot\').t() %>">                <i class="icon-pivot"></i>                <span class="hide-text"><%- _("Open in Pivot").t() %></span>            </a>            <% if (showExportResultsButton) { %>                <a href="#" class="export-button btn-pill" title="<%- _(\'Export\').t() %>">                    <i class="icon-export"></i>                    <span class="hide-text"><%- _("Export").t() %></span>                </a>            <% } %>            <a href="#" class="inspect-button btn-pill" title="<%- _(\'Inspect\').t() %>">                <i class="icon-info"></i>                <span class="hide-text"><%- _("Inspect").t() %></span>            </a><a href="#" class="refresh-button btn-pill" title="<%- _(\'Refresh\').t() %>">                <i class="icon-rotate-counter"></i>                <span class="hide-text"><%- _("Refresh").t() %></span>            </a>        '})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/savedsearchmanager":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("splunkjs/mvc/searchmanager"),a=i("require/underscore"),r=i("util/console"),o=i("splunkjs/mvc/messages"),l=i("util/general_utils"),d=i("models/search/Report"),c=i("models/search/Job"),h=i("models/search/DispatchJob"),u=i("splunkjs/mvc/utils"),p=i("util/splunkd_utils"),m=i("util/dashboard_utils"),g=i("stubs/splunk.config"),f=i("splunkjs/mvc/tokenutils"),v=h.DISPATCHABLE_PROPERTIES,b={trigger_actions:!0};return s.extend({moduleId:n.i,defaults:{autostart:!0,cache:!1,cancelOnUnload:!0,enablePreview:!0,runWhenTimeIsUndefined:!0},handleAutostart:function(){return this.get("autostart")?this.on("change:searchname",this._debouncedStartSearch,this):this.off("change:searchname",this._debouncedStartSearch,this),s.prototype.handleAutostart.apply(this,arguments)},createManager:function(e){var t=this.settings.get("tokenDependencies",{tokens:!0});f.tokenDependenciesMet(t,this.registry)?s.prototype.createManager.call(this,e):this.trigger("search:error",o.resolve("unresolved-tokens").message)},startSearch:function(e){if("boolean"==typeof e||"refresh"===e?e={refresh:!!e}:e||(e={}),this._refresh=e.refresh,this.get("searchname")){var t=this.get("cache")||!1;"scheduled"!==t&&(t=a.isBoolean(t)||l.isBooleanEquivalent(t)?l.normalizeBoolean(t)?-1:0:parseInt(t,10)),a.isNaN(t)&&(r.warn("Invalid value for cache setting: %o",this.get("cache")),t=0);var i=t<0?new Date(0).valueOf():(new Date).valueOf()-1e3*t,n=this.settings.get("tokenDependencies",{tokens:!0});if(f.tokenDependenciesMet(n,this.registry)){var s=new d;s.set("id",this.applyModelFullPathToName(s,this.get("searchname")));var h=this;return s.fetch({success:function(){h.settings.set("search",s.entry.content.get("search"),{silent:!0}),0===t||"scheduled"===t&&!s.entry.content.get("is_scheduled")?h._startSearchWithNewJob(s):"scheduled"===t?s.getLatestHistoricJobId().then((function(e){if(e){var t=new c;t.set(t.idAttribute,e),t.fetch({success:function(){h._startSearchWithExistingJob(t)},error:function(){h._startSearchWithNewJob(s)}})}else h._startSearchWithNewJob(s)})).fail((function(){h._startSearchWithNewJob(s)})):s.fetchJobs({success:function(e){var t=e.filter((function(e){var t=e.entry.content,n=new Date(e.entry.get("published")).valueOf(),s=t.get("isRealTimeSearch")&&!t.get("isDone");return n>i||s}));if(t.length){var n=a.max(t,(function(e){return new Date(e.entry.get("published"))}));h._startSearchWithExistingJob(n)}else h._startSearchWithNewJob(s)},error:function(){h._startSearchWithNewJob(s)}})},error:function(e,t){var i=p.convertToSDKResponse(t);if(404===i.status){var n=a("Warning: saved search not found: ").t()+'"'+h.get("searchname")+'"';r.log(n),h.trigger("search:error",n,i)}else r.log("Error fetching saved searches"),h.trigger("search:error",a("Error fetching saved searches").t(),i)}}),this}this.trigger("search:error",o.resolve("unresolved-tokens").message)}else this.trigger("search:error",a("No saved search provided.").t())},_startSearchWithExistingJob:function(e){this.createManager(e)},_startSearchWithNewJob:function(e){var t=this;if(!(void 0===this.settings.get("earliest_time",{tokens:!1})&&this.settings.get("earliest_time",{tokens:!0})||void 0===this.settings.get("latest_time",{tokens:!1})&&this.settings.get("latest_time",{tokens:!0}))||this.settings.get("runWhenTimeIsUndefined")){var i=new h,n=e.entry.links.get("dispatch"),s=p.fullpath(n);i.save({},{url:s,data:this._createOptionsForSearchJob(),success:function(){t.createManager(i)},error:function(e,n){var s=p.convertToSDKResponse(n);if(p.messagesContainsOneOfTypes(s.data.messages,[p.RISKY_COMMAND]))if(m.isHiddenSearch(t.get("parentElement")))i.error.set("messages",s.data.messages),t.showRiskyWarningDialog(i);else{var r=a("Action required: Click the icon in the top right corner to review the query before running.").t(),o=t.settings.get("risky_error_message")||r;t.trigger("search:error",o,s,i)}else t.trigger("search:error",a("Error dispatching saved search.").t(),s)}})}else this.trigger("search:error",o.resolve("unresolved-search").message)},_createOptionsForSearchJob:function(){return a.reduce(this.settings.toJSON(),(function(e,t,i){return(a.has(v,i)||a.has(b,i))&&(e[i]=t),e}),{})},applyModelFullPathToName:function(e,t){return/^\/services.*/i.test(t)||(t=p.fullpath(e.url+"/"+encodeURIComponent(t),{app:this.settings.get("app")||u.getCurrentApp(),owner:this.settings.get("owner")||g.USERNAME})),t}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/concertinasettingseditor":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=(i("util/console"),i("splunkjs/mvc"),i("views/Base")),o=i("views/shared/delegates/Concertina"),l=i("views/shared/controls/ControlGroup");return r.extend({moduleId:n.i,className:"concertina",render:function(){return this.children.concertina||(this.$el.html(this.template),this.children.concertina=new o({el:this.el}),s(this.options.panels||[]).each((function(e,t){this.renderPanel(e)}),this)),this},renderPanel:function(e){var t=a(s.template(this.templatePanel,e)),i=t.find(".concertina-group-body");s(e.controls||[]).each((function(e,t){e.controlOptions.model=this.model;var n=e.controlTypeClass||l,a=this.children[s.uniqueId("control_")]=new n(e);i.append(a.render().$el)}),this),this.$(".concertina-body").append(t)},activate:function(){this.children.concertina&&this.children.concertina.reset()},template:'            <div class="concertina-dock-top"></div>            <div class="concertina-body"></div>            <div class="concertina-dock-bottom"></div>        ',templatePanel:'            <div class="concertina-group">            <div class="concertina-heading <%- headingClassName || \'\' %>">                <a href="#" class="concertina-toggle">                    <%- title %>                </a>            </div>            <div class="concertina-group-body panel-body <%- headingClassName ? (headingClassName + \'-body\') : \'\' %>">            </div>            </div>        '})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/defaultcontrol":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=(i("util/console"),i("splunkjs/mvc"),i("splunkjs/mvc/simpleform/inputsettings")),o=i("views/shared/controls/ControlGroup");return o.extend({moduleId:n.i,initialize:function(){this._optionsModel=this.options.controlOptions&&this.options.controlOptions.model,this._optionsAttribute=this.options.controlOptions&&this.options.controlOptions.modelAttribute,this._optionsModelProxy=new r(a.extend(!0,{},this._optionsModel?this._optionsModel.omit("initialValue","default","value","selectFirstChoice"):{})),this.options.controlOptions&&this._optionsModelProxy.set(this.options.controlOptions),this._optionsModel&&this._optionsAttribute&&(this._optionsModelProxy.set("value",this._optionsModel.get(this._optionsAttribute)),this.listenTo(this._optionsModel,"change",this.onOptionsModelChange,this),this.listenTo(this._optionsModelProxy,"change:value",this.onProxyValueChange,this),this.listenTo(this._optionsModelProxy,"change:choices",this.onProxyChoicesChange,this));var e=this.options.inputTypeClass;e&&(this.options.controls=[new e({settings:this._optionsModelProxy})]),o.prototype.initialize.apply(this,arguments)},events:{"click a.default-clear-selection":function(e){e.preventDefault(),this._optionsModelProxy.set("value",null)}},render:function(){return o.prototype.render.apply(this,arguments),this.options.enableClearSelection&&(this._clearSelectionButton||(this._clearSelectionButton=a(s.template(this.clearSelectionTemplate,{_:s}))),this.$(".controls").append(this._clearSelectionButton)),this},onOptionsModelChange:function(){if(!this._isProxySyncing)try{this._isProxySyncing=!0;var e=a.extend(!0,{},this._optionsModel.changed);delete e.value,delete e.default,delete e.initialValue,delete e.selectFirstChoice,this._optionsModelProxy.set(e)}finally{this._isProxySyncing=!1}},onProxyValueChange:function(){if(!this._isProxySyncing)try{this._isProxySyncing=!0,this._optionsModel.set(this._optionsAttribute,this._optionsModelProxy.get("value"))}finally{this._isProxySyncing=!1}},onProxyChoicesChange:function(){var e=s.difference(s.pluck(this._optionsModel.previous("choices"),"value"),s.pluck(this._optionsModel.get("choices"),"value"));if(e.length){var t=this._optionsModel.get(this._optionsAttribute);a.isArray(t)?this._optionsModel.set(this._optionsAttribute,s.difference(t,e)):t===e[0]&&this._optionsModel.set(this._optionsAttribute,null)}},clearSelectionTemplate:'            <div><a class="default-clear-selection btn-link" href="#"><%- _("Clear Selection").t() %></a></div>        '})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/dynamicoptionscontrol":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("require/backbone"),r=(i("util/console"),i("splunkjs/mvc"),i("views/Base")),o=i("views/shared/controls/ControlGroup"),l=i("views/shared/controls/SearchTextareaControl"),d=i("splunkjs/mvc/simplexml/controller"),c=i("splunkjs/mvc/simplexml/dialog/addpanel/report"),h=i("splunkjs/mvc/timerangeview"),u=i("splunkjs/mvc/utils"),p=i("uri/route"),m=i("models/services/authentication/User"),g=i("controllers/dashboard/helpers/ModelHelper"),f=i("util/theme_utils");i("shim/bootstrap.tooltip");var v=r.extend({moduleId:n.i,initialize:function(){r.prototype.initialize.apply(this,arguments),this._optionsModel=this.options.controlOptions&&this.options.controlOptions.model||new a.Model,this._optionsModelProxy=new a.Model,this.collection=this.collection||{},this.collection.searchBNFs=this.collection.searchBNFs||g.getCachedModel("parsedSearchBNFs",{app:d.model.app.get("app"),owner:d.model.app.get("owner"),count:0}),this.listenTo(this._optionsModel,"change",this.onOptionsModelChange,this),this.listenTo(this._optionsModelProxy,"change",this.onProxyModelChange,this),this.onOptionsModelChange(),this.children.elementCreateType=new o({label:s("Content Type").t(),controlType:"SyntheticRadio",controlOptions:{additionalClassNames:"btn-group-3 add-panel-select",items:[{value:"inline",label:'<i class="icon-search-thin"></i>',tooltip:s("Inline Search").t()},{value:"saved",label:'<i class="icon-report"></i>',tooltip:s("Report").t()}],model:this._optionsModelProxy,modelAttribute:"elementCreateType"}}),this.children.inline=new b({model:this._optionsModelProxy,collection:{searchBNFs:this.collection.searchBNFs,timeRanges:d.collection.times}}),this.children.report=new c({model:{report:this._optionsModelProxy,user:d.model.user,application:d.model.app},collection:{searchBNFs:this.collection.searchBNFs,timeRanges:d.collection.times},controller:d,popdownOptions:{attachDialogTo:".popdown-dialog.open",scrollContainer:".popdown-dialog.open .concertina-body"}})},onOptionsModelChange:function(){if(!this._isProxySyncing)try{this._isProxySyncing=!0,this._optionsModelProxy.set({elementCreateType:this._optionsModel.get("searchType")||"inline",savedSearchName:this._optionsModel.get("searchName"),search:this._optionsModel.get("search"),earliest_time:this._optionsModel.get("populating_earliest_time"),latest_time:this._optionsModel.get("populating_latest_time")})}finally{this._isProxySyncing=!1}},onProxyModelChange:function(){if(!this._isProxySyncing)try{this._isProxySyncing=!0,this._optionsModel.set({searchType:this._optionsModelProxy.get("elementCreateType"),searchName:this._optionsModelProxy.get("savedSearchName"),search:this._optionsModelProxy.get("search"),populating_earliest_time:this._optionsModelProxy.get("earliest_time"),populating_latest_time:this._optionsModelProxy.get("latest_time")})}finally{this._isProxySyncing=!1}},render:function(){return this.$el.append(this.children.elementCreateType.render().el),this.$el.append(this.children.inline.render().el),this.$el.append(this.children.report.render().el),this}}),b=r.extend({className:"inline-search-options",initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.searchField=new l({model:{content:this.model,user:d.model.user,application:d.model.app},collection:{searchBNFs:this.collection.searchBNFs},searchAssistant:m.SEARCH_ASSISTANT.NONE,syntaxHighlighting:f.getSearchEditorTheme()}),this.children.timeRangeView=new h({popdownOptions:{attachDialogTo:".popdown-dialog.open",scrollContainer:".popdown-dialog.open .concertina-body"}}),this.children.timeRangeView.val({earliest_time:this.model.get("earliest_time"),latest_time:this.model.get("latest_time")}),this.listenTo(this.children.searchField,"runSearch",this.runSearch),this.listenTo(this.model,"change:elementCreateType",this.onModeChange,this),this.listenTo(this.children.timeRangeView,"change",this.onTimeRangeChange,this)},runSearch:function(){var e=this.model.get("search"),t={q:e},i=u.getPageInfo();e&&(this.model.has("dispatch.earliest_time")&&(t.earliest=this.model.get("dispatch.earliest_time"),t.latest=this.model.get("dispatch.latest_time")),u.redirect(p.search(i.root,i.locale,i.app,{data:t}),!0))},onModeChange:function(){switch(this.model.get("elementCreateType")){case"inline":this.children.timeRangeView.$el.show(),this.$el.show();break;case"postprocess":this.children.timeRangeView.$el.hide(),this.$el.show();break;default:this.$el.hide()}},onTimeRangeChange:function(e){this.model.set(this.children.timeRangeView.val())},render:function(){return this.children.searchField.render().appendTo(this.el),this.children.timeRangeView.render().$el.appendTo(this.el),this.onModeChange(),this}});return v}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/editinputmenu":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=(i("util/console"),i("splunkjs/mvc"),i("views/shared/PopTart")),o=i("splunkjs/mvc/simpleform/inputsettings"),l=i("splunkjs/mvc/simpleform/edit/concertinasettingseditor"),d=i("splunkjs/mvc/savedsearchmanager"),c=i("splunkjs/mvc/searchmanager"),h=i("splunkjs/mvc/utils"),u=i("splunkjs/mvc/simpleform/edit/staticoptionscontrol"),p=i("splunkjs/mvc/simpleform/edit/dynamicoptionscontrol"),m=i("splunkjs/mvc/simpleform/edit/defaultcontrol"),g=i("splunkjs/mvc/simpleform/edit/tokenpreviewcontrol"),f=i("splunkjs/mvc/radiogroupview"),v=i("splunkjs/mvc/linklistview"),b=i("splunkjs/mvc/dropdownview"),y=i("splunkjs/mvc/checkboxgroupview"),_=i("splunkjs/mvc/multidropdownview"),w=i("splunkjs/mvc/timerangeview"),k=i("views/shared/FlashMessages"),T=r.extend({moduleId:n.i,initialize:function(){this.options.ignoreClasses=["dropdown-menu","ui-datepicker"],r.prototype.initialize.apply(this,arguments),this.workingSettings=new o(this.model.toJSON({tokens:!0}),{applyTokensByDefault:!0,retrieveTokensByDefault:!0}),this.on("shown",this.onShown,this),this.children.flashMessage=new k({model:this.workingSettings})},events:{"click a.input-editor-toggle":function(e){e.preventDefault();var t=a(e.currentTarget).data("label");t&&this.toggleEditType(t)},"click .input-editor-apply":function(e){e.preventDefault(),this.applyChanges()},"click .input-editor-cancel":function(e){e.preventDefault(),this.hide()},"keypress .input-editor-apply":function(e){e.preventDefault(),this.applyChanges()},"keypress .input-editor-cancel":function(e){e.preventDefault(),this.hide()}},toggleEditType:function(e){this._currentToggle&&this._currentToggle.removeClass("selected"),this._currentEditor&&(this._currentEditor.remove(),this._currentEditor=null);var t=this.workingSettings.get("type");"time"===e?this.previousDefault&&(this.workingSettings.set("default",this.previousDefault),this.previousDefault=null):"time"===t&&this.workingSettings.get("default")&&(this.previousDefault=this.workingSettings.get("default"),this.workingSettings.unset("default")),this.workingSettings.set("type",e),this._currentToggle=this.$("[data-label='"+e+"']"),this._currentToggle.addClass("selected");var i=re[e];i&&(this._currentEditor=new l({model:this.workingSettings,panels:i}),this.$(".input-editor-format").append(this._currentEditor.render().$el),this._currentEditor.activate())},onShown:function(){s.defer(s.bind(this._currentToggle.focus,this._currentToggle)),this._currentEditor&&this._currentEditor.activate()},remove:function(){this._currentEditor&&(this._currentEditor.remove(),this._currentEditor=null),this.previousDefault=null,r.prototype.remove.apply(this,arguments)},applyChanges:function(){if(this.workingSettings.validate(),this.workingSettings.isValid()){var e=this.model.get("search"),t=this.model.get("populating_earliest_time"),i=this.model.get("populating_latest_time"),n=this.model.get("searchName");this.model.set(this.workingSettings.toJSON({tokens:!0}),{tokens:!0}),this.model.save().done(s.bind((function(){var a=this.model.get("searchType");this.model.set("managerid",this.model.get("managerid")||s.uniqueId()),a&&"inline"!==a||!this.model.get("search")?"saved"===a&&this.model.get("searchName")&&n!=this.model.get("searchName")&&new d({id:this.model.get("managerid"),searchname:this.model.get("searchName"),app:h.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0}):e==this.model.get("search")&&t==this.model.get("populating_earliest_time")&&i==this.model.get("populating_latest_time")||new c({id:this.model.get("managerid"),latest_time:this.model.get("populating_latest_time"),earliest_time:this.model.get("populating_earliest_time"),search:this.model.get("search"),app:h.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0}),this.hide()}),this))}},render:function(){var e={_:s};return this.$el.html(r.prototype.template),this.$(".popdown-dialog-body").append(a(this.compiledTemplate(e))),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),a(".flash-messages-placeholder",this.$el).append(this.children.flashMessage.render().el),this.toggleEditType(this.workingSettings.get("type")),this},template:'            <div class="input-editor-body-and-flash-message">                <div class="input-editor-body">                    <ul class="input-editor-type">                        <li><a class="edit-text input-editor-toggle" href="#" data-label="text"><i class="icon-text"></i> <%- _("Text").t() %></a></li>                        <li><a class="edit-radio input-editor-toggle" href="#" data-label="radio"><i class="icon-boolean"></i> <%- _("Radio").t() %></a></li>                        <li><a class="edit-dropdown input-editor-toggle" href="#" data-label="dropdown"><i class="icon-triangle-down-small"></i> <%- _("Dropdown").t() %></a></li>                        <li><a class="edit-checkbox input-editor-toggle" href="#" data-label="checkbox"><i class="icon-box-checked"></i> <%- _("Checkbox").t() %></a></li>                        <li><a class="edit-multiselect input-editor-toggle" href="#" data-label="multiselect"><i class="icon-triangle-down-small"></i> <%- _("Multiselect").t() %></a></li>                        <li><a class="edit-link input-editor-toggle" href="#" data-label="link"><i class="icon-link"></i> <%- _("Link List").t() %></a></li>                        <li><a class="edit-trp input-editor-toggle" href="#" data-label="time"><i class="icon-clock"></i> <%- _("Time").t() %></a></li>                    </ul>                    <div class="input-editor-format"></div>                </div>                <div class="flash-messages-placeholder"></div>            </div>            <a class="input-editor-cancel btn pull-left" tabindex="0">'+s("Cancel").t()+'</a>            <a class="input-editor-apply btn btn-primary pull-right" tabindex="0"> '+s("Apply").t()+"</a>        "}),S={label:s("Label").t(),controlType:"Text",controlOptions:{modelAttribute:"label"}},C={label:s("Search on Change").t(),controlType:"SyntheticCheckbox",controlOptions:{modelAttribute:"searchWhenChanged"}},E={label:s("Token").t(),controlType:"Text",controlOptions:{modelAttribute:"token"},tooltip:s("ID to reference the selected value in search (reference as $token$)").t()},R={label:s("Default").t(),controlType:"Text",controlClass:"default_control",controlOptions:{modelAttribute:"default"},tooltip:s("The default value of the input.").t()},x={label:s("Default").t(),controlTypeClass:m,inputTypeClass:f,controlClass:"default_control",enableClearSelection:!0,controlsLayout:"stack",controlOptions:{modelAttribute:"default"},tooltip:s("The default value of the input.").t()},D={label:s("Default").t(),controlTypeClass:m,inputTypeClass:v,controlClass:"default_control",enableClearSelection:!0,controlsLayout:"stack",controlOptions:{modelAttribute:"default"},tooltip:s("The default value of the input.").t()},M={label:s("Default").t(),controlTypeClass:m,inputTypeClass:b,controlClass:"default_control",enableClearSelection:!0,controlsLayout:"stack",controlOptions:{modelAttribute:"default"},tooltip:s("The default value of the input.").t()},O={label:s("Default").t(),controlTypeClass:m,inputTypeClass:y,controlClass:"default_control",controlOptions:{modelAttribute:"default"},tooltip:s("The default value of the input.").t()},I={label:s("Default").t(),controlTypeClass:m,inputTypeClass:_,controlClass:"default_control",controlOptions:{modelAttribute:"default"},tooltip:s("The default value of the input.").t()},A={label:s("Default").t(),controlTypeClass:m,inputTypeClass:w,controlClass:"default_control",controlOptions:{modelAttribute:"default",popdownOptions:{attachDialogTo:".popdown-dialog.open",scrollContainer:".popdown-dialog.open .concertina-body"}},controlsLayout:"stack",tooltip:s("The default value of the input.").t()},P={label:s("Initial Value").t(),controlType:"Text",controlClass:"seed_control",controlOptions:{modelAttribute:"initialValue"},tooltip:s("Initial value on page load. Ignored when Default is specified.").t()},L={label:s("Initial Value").t(),controlTypeClass:m,inputTypeClass:f,controlClass:"seed_control",enableClearSelection:!0,controlsLayout:"stack",controlOptions:{modelAttribute:"initialValue"},tooltip:s("Initial value on page load. Ignored when Default is specified.").t()},$={label:s("Initial Value").t(),controlTypeClass:m,inputTypeClass:v,controlClass:"seed_control",enableClearSelection:!0,controlsLayout:"stack",controlOptions:{modelAttribute:"initialValue"},tooltip:s("Initial value on page load. Ignored when Default is specified.").t()},N={label:s("Initial Value").t(),controlTypeClass:m,inputTypeClass:b,controlClass:"seed_control",enableClearSelection:!0,controlsLayout:"stack",controlOptions:{modelAttribute:"initialValue"},tooltip:s("Initial value on page load. Ignored when Default is specified.").t()},z={label:s("Initial Value").t(),controlTypeClass:m,inputTypeClass:y,controlClass:"seed_control",controlOptions:{modelAttribute:"initialValue"},tooltip:s("Initial value on page load. Ignored when Default is specified.").t()},j={label:s("Initial Value").t(),controlTypeClass:m,inputTypeClass:_,controlClass:"seed_control",controlOptions:{modelAttribute:"initialValue"},tooltip:s("Initial value on page load. Ignored when Default is specified.").t()},F={label:s("Token Prefix").t(),controlType:"Text",controlOptions:{modelAttribute:"prefix",trimLeadingSpace:!1,trimTrailingSpace:!1,updateOnKeyUp:!0},tooltip:s("String prefixed to the value retrieved by the token").t()},q={label:s("Token Suffix").t(),controlType:"Text",controlOptions:{modelAttribute:"suffix",trimLeadingSpace:!1,trimTrailingSpace:!1,updateOnKeyUp:!0},tooltip:s("String appended to the value retrieved by the token").t()},B={label:s("Token Value Prefix").t(),controlType:"Text",controlOptions:{modelAttribute:"valuePrefix",updateOnKeyUp:!0},tooltip:s("String prefixed to each specified value of a multiple selection input").t()},V={label:s("Token Value Suffix").t(),controlType:"Text",controlOptions:{modelAttribute:"valueSuffix",updateOnKeyUp:!0},tooltip:s("String appended to each specified value of a multiple selection input").t()},U={label:s("Delimiter").t(),controlType:"Text",controlOptions:{modelAttribute:"delimiter",trimLeadingSpace:!1,trimTrailingSpace:!1,updateOnKeyUp:!0},tooltip:s("String inserted between each value (typical values: AND,OR). Specify a leading and trailing space in the string.").t()},H={label:s("Preview").t(),controlTypeClass:g,controlOptions:{modelAttribute:"TEMP"}},J={controlTypeClass:u,controlOptions:{modelAttribute:"choices"}},G={controlTypeClass:p,controlOptions:{modelAttribute:"TEMP"}},K={label:s("Field For Label").t(),controlType:"Text",controlOptions:{modelAttribute:"labelField"},tooltip:s("Field returned from the search to use as the option label").t()},W={label:s("Field For Value").t(),controlType:"Text",controlOptions:{modelAttribute:"valueField"},tooltip:s("Field returned from the search to use as the option value").t()},X={headingClassName:"general-input-settings",title:s("General").t(),controls:[S,C]},Y={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,R,P,F,q]},Q={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,x,L,F,q]},Z={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,D,$,F,q]},ee={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,M,N,F,q]},te={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,O,z,F,q,B,V,U,H]},ie={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,I,j,F,q,B,V,U,H]},ne={headingClassName:"token-input-settings",title:s("Token Options").t(),controls:[E,A]},se={headingClassName:"static-input-settings",title:s("Static Options").t(),controls:[J]},ae={headingClassName:"dynamic-input-settings",title:s("Dynamic Options").t(),controls:[G,K,W]},re={text:[X,Y],radio:[X,Q,se,ae],dropdown:[X,ee,se,ae],checkbox:[X,te,se,ae],multiselect:[X,ie,se,ae],link:[X,Z,se,ae],time:[X,ne]};return T}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/formsettings":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=(i("shim/jquery"),i("require/backbone")),r=i("views/Base"),o=i("splunkjs/mvc/simplexml/controller");return r.extend({className:"form-settings",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new a.Model({value:!!o.model.view.isFormAutoRun()}),this.listenTo(this.model,"change",this.update),this.listenTo(this.model,"change:value",(function(e,t){o.model.view.updateFormSettings({autoRun:t}).fail((function(){e.set("value",!t)}))})),this.listenTo(o.model,"change:rootNodeName",this.render)},events:{"click label":function(e){e.preventDefault(),this.model.get("disabled")||this.model.set("value",!this.model.get("value"))},"click .btn":function(e){e.preventDefault()}},update:function(){this.$("i.icon-check")[this.model.get("value")?"show":"hide"](),this.$("label,.btn")[this.model.get("disabled")?"addClass":"removeClass"]("disabled")},render:function(){return"form"===o.model.get("rootNodeName")?this.$el.html(this.compiledTemplate({label:s("Autorun dashboard").t(),checked:this.model.get("value")})):this.$el.empty(),this},template:'            <label class="checkbox">                  <a href="#" class="btn"><i class="icon-check" <% if (!checked) {%>style="display:none"<% } %>></i></a>                  <%= label%>            </label>        '})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/menu":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("views/shared/dialogs/TextDialog"),o=i("views/Base"),l=i("splunkjs/mvc/simplexml/controller"),d=i("shim/splunk.util"),c=i("splunkjs/mvc/simpleform/edit/editinputmenu");return o.extend({events:{"click a.edit-input":function(e){e.preventDefault();var t=a(e.currentTarget);this.editInputMenu&&this.editInputMenu.shown?this.editInputMenu.hide():(t.addClass("active"),this.editInputMenu=new c({model:this.model,onHiddenRemove:!0}),a("body").append(this.editInputMenu.render().el),this.editInputMenu.show(t),this.editInputMenu.on("hide",(function(){t.removeClass("active")}),this))},"click a.delete-input":function(e){e.preventDefault();var t=new r({id:"modal_delete",flashModel:l.model.view}),i=this.model;t.on("click:primaryButton",(function(){t.preventDefault(),i.destroy().then((function(){t.closeDialog()}))})),t.settings.set("primaryButtonLabel",s("Delete").t()),t.settings.set("cancelButtonLabel",s("Cancel").t()),t.settings.set("titleLabel",s("Delete").t());var n=a.trim(this.model.get("label"))||d.sprintf(s("the %s input").t(),s(this.model.get("type")).t());t.setText(d.sprintf(s("Are you sure you want to delete %s?").t(),"<em>"+s.escape(n)+"</em>")),a("body").append(t.render().el),t.show()}},render:function(){return this.$el.html(this.template),this},template:'<div class="edit-dropdown"><a href="#" class="edit-input" title="'+s("Edit Input").t()+'"><i class="icon-pencil"></i></a><a href="#" class="delete-input" title="'+s("Delete Input").t()+'"><i class="icon-x"></i></a></div>'})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/staticoptionscontrol":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=(i("util/console"),i("splunkjs/mvc"),i("views/Base")),o=i("views/shared/controls/TextControl"),l=(i("shim/jquery.ui.sortable"),r.extend({moduleId:n.i,initialize:function(){r.prototype.initialize.apply(this,arguments),this._optionsModel=this.options.controlOptions&&this.options.controlOptions.model,this._optionsAttribute=this.options.controlOptions&&this.options.controlOptions.modelAttribute,this._optionPairMap={}},events:{"click a.static-options-add":function(e){e.preventDefault(),this._addOptionPair()}},render:function(){this.$el.html(this.compiledTemplate({_:s}));var e=this._optionsModel&&this._optionsAttribute?this._optionsModel.get(this._optionsAttribute):null;if(e&&e.length)for(var t=0,i=e.length;t<i;t++)this._addOptionPair(e[t]);else this._addOptionPair();this._updateValue();var n=this;this.$(".static-options-body").sortable({handle:".drag-handle",tolerance:"pointer"}).on("sortupdate",(function(e){n._updateValue()})).on("stop",(function(e){n._updateValue()}));return this},_addOptionPair:function(e){var t=new d(e||{});t.on("change",this._updateValue,this),t.on("click:remove",(function(){this._removeOptionPair(t)}),this),this.$(".static-options-body").append(t.render().$el),this._optionPairMap[t.cid]=t},_removeOptionPair:function(e){delete this._optionPairMap[e.cid],e.remove(),this._updateValue(),0===this.$(".static-option-pair").length&&this._addOptionPair()},_updateValue:function(){for(var e,t,i,n,r=[],o=this.$(".static-option-pair").removeClass("error"),l=this._optionPairMap,d={},c=0,h=o.length;c<h;c++)(e=a(o[c]).data("cid"))&&(t=l[e])&&(i=t.getLabel(),n=t.getValue(),(i||n)&&r.push({label:i,value:n}),n&&(i&&!s.has(d,n)||t.$el.addClass("error"),d[n]=!0));this._optionsModel&&this._optionsAttribute&&this._optionsModel.set(this._optionsAttribute,r)},template:'            <div class="static-options-heading">                <div class="static-options-heading-name"><%- _("Name").t() %></div>                <div class="static-options-heading-value"><%- _("Value").t() %></div>            </div>            <div class="static-options-body">            </div>            <div class="static-options-footer">                <a class="static-options-add" href="#"><i class="icon-plus" /><%- _("Add New").t() %></a>            </div>        '})),d=r.extend({className:"static-option-pair control-group",initialize:function(){r.prototype.initialize.apply(this,arguments),this._labelControl=new o({defaultValue:this.options.label||""}),this._labelControl.on("change",this._notifyChange,this),this._valueControl=new o({defaultValue:this.options.value||""}),this._valueControl.on("change",this._notifyChange,this)},events:{"click a.static-option-remove":function(e){e.preventDefault(),this.trigger("click:remove")}},getLabel:function(){return this._labelControl.getValue()},setLabel:function(e){this._labelControl.setValue(e)},getValue:function(){return this._valueControl.getValue()},setValue:function(e){this._valueControl.setValue(e)},render:function(){return this.$el.append(a(this.template)),this.$(".static-option-label").append(this._labelControl.render().$el),this.$(".static-option-value").append(this._valueControl.render().$el),this},_notifyChange:function(){this.trigger("change")},template:'            <div class="drag-handle"></div>            <div class="static-option-label"></div>            <div class="static-option-value"></div>            <a class="static-option-remove btn-pill btn-square" href="#"><i class="icon-x"></i></a>        '});return l}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/edit/tokenpreviewcontrol":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=(i("shim/jquery"),i("util/console"),i("splunkjs/mvc"),i("views/shared/controls/ControlGroup"));return a.extend({moduleId:n.i,initialize:function(){this.options=s.extend({controlType:"Label"},this.options),a.prototype.initialize.apply(this,arguments),this._optionsModel=this.options.controlOptions&&this.options.controlOptions.model,this._optionsModel&&(this.listenTo(this._optionsModel,"change",this.onOptionsModelChange,this),this.onOptionsModelChange())},onOptionsModelChange:function(){var e=this._optionsModel.get("prefix")||"",t=this._optionsModel.get("suffix")||"",i=this._optionsModel.get("valuePrefix")||"",n=this._optionsModel.get("valueSuffix")||"",s=this._optionsModel.get("delimiter")||"",a="";a+=e,a+=i+"value1"+n,a+=s,a+=i+"value2"+n,a+=s+"...",a+=t,this.getAllControls()[0].setValue(a)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/fieldsetview":function(e,t,i){var n;void 0===(n=function(e,t){var n=i("require/underscore"),s=i("shim/jquery"),a=i("splunkjs/mvc/mvc"),r=i("splunkjs/mvc/basesplunkview"),o=i("splunkjs/mvc/simplexml/controller");return i("views/dashboard/form/Fieldset.pcss"),r.extend({moduleId:t.id,className:"fieldset",options:{editable:!0},initialize:function(){this.configure(),this.listenTo(o,"formupdate",this.render),this.listenTo(o.model,"change:edit change:rootNodeName",this.render),this.listenTo(this.settings,"change:editable",this.render),r.prototype.initialize.apply(this,arguments)},isEmpty:function(){return 0===this.getChildElementIDs().length},childrenVisible:function(){return n.any(this.getChildElements(),(function(e){return!e.$el.is(".hidden")}))},addChild:function(e){e.render().$el.appendTo(this.show()),this.render()},show:function(){return this.$el.removeClass("hidden")},hide:function(){return this.$el.addClass("hidden")},updateEmptyState:function(){this.$el[this.isEmpty()?"addClass":"removeClass"]("empty")},render:function(){this.$el.attr("id",this.id);var e=this.settings.get("editable");this.$el[e?"addClass":"removeClass"]("editable");var t=o.isEditMode()&&e,i=!n.all(this.$el.find(".input>label"),(function(e){return!s.trim(s(e).text())}));t||i?this.$el.removeClass("hide-label"):this.$el.addClass("hide-label");var a=o.model.get("rootNodeName");return!t&&this.isEmpty()||null!=a&&"form"!==a?this.hide():this.show(),this.updateEmptyState(),this},getChildElementIDs:function(){return n(this.$el.children(":not(.form-submit)")).map((function(e){return s(e).attr("id")}))},getChildElements:function(){return n(this.getChildElementIDs()).chain().map(n.bind(a.Components.get,a.Components)).filter(n.identity).value()},removeChildren:function(){n(this.getChildElements()).invoke("remove")},serializeStructure:function(){return this.getChildElementIDs()},remove:function(){this.removeChildren(),r.prototype.remove.apply(this,arguments)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/formutils":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("splunkjs/mvc"),o=i("splunkjs/mvc/simplexml/controller"),l={},d={submitForm:s.debounce((function(e){if(d.isFormReady()){e||(e={});var t=r.Components.getInstance("default",{create:!0}),i=r.Components.getInstance("submitted");i&&i.set(t.toJSON());var n=r.Components.getInstance("url");n&&n.saveOnlyWithPrefix("form\\.",t.toJSON(),{replaceState:e.replaceState})}else d.onFormReady().then(s.bind(d.submitForm,d,{replaceState:!0}))})),handleValueChange:function(e){var t=e.vizSettings,i=t.get("type"),n=r.Components.getInstance("default",{create:!0}),a=d.getInputTypeSettings(i),o=t.get("token");if("time"===i){if(!t.get("value")){var l=t.get("default"),c=t.get("preset");return void(l?e.val(l):c?e.visualization._onTimePresetUpdate():t.set("value",{earliest_time:"",latest_time:""}))}if(o){var h=e.val(),u={};u[o+".earliest"]=h.earliest_time||"",u[o+".latest"]=h.latest_time||"",n.set(u)}}else{if(!e.hasValue())return e.defaultUpdate=!0,void e.val(t.get("default"));var p=e.val();if(void 0===p)return n.set(o,p),e.defaultUpdate=!1,void d._handleAutoSubmit(e);if(a.multiValue){if(null===p||0===p.length)return n.set(o,void 0),e.defaultUpdate=!1,void d._handleAutoSubmit(e);var m=t.has("valuePrefix")?t.get("valuePrefix"):"",g=t.has("valueSuffix")?t.get("valueSuffix"):"",f=t.has("delimiter")?t.get("delimiter"):" ";p=s(p).map((function(e){return m+e+g})).join(f)}var v="";if(p){var b=t.get("prefix");b&&(v+=b),v+=p;var y=t.get("suffix");y&&(v+=y)}n.set(o,v)}d._handleAutoSubmit(e)},_handleAutoSubmit:function(e,t){var i=e.vizSettings;(!0===i.get("searchWhenChanged")||null==i.get("searchWhenChanged")&&!r.Components.get("submit"))&&(!d.isFormReady()&&e.defaultUpdate?e.defaultUpdate=!1:d.submitForm())},getInputType:function(e){var t=l[e];if(!t)throw new Error("Unkonwn input type: "+e);return t.clazz},getInputTypeSettings:function(e){var t=l[e];if(!t)throw new Error("Unkonwn input type: "+e);return t.settings},registerInputType:function(e,t,i){l[e]={clazz:t,settings:i}},isInputTypeRegistered:function(e){return s.has(l,e)},onFormReady:s.once((function(){var e=a.Deferred();return o.onReady((function(){var t=d.getFormInputs();if(t.length>0){var i=s(t).invoke("_onReady");a.when.apply(a,i).always(e.resolve)}else e.resolve()})),e.promise()})),isFormReady:function(){return"resolved"===d.onFormReady().state()},isFormInput:function(e){return e&&e._isDashboardInput},getFormInputs:function(){return s(r.Components.toJSON()).filter(d.isFormInput)}};return d}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input":function(e,t,i){var n;void 0===(n=function(e){return{SubmitButton:i("splunkjs/mvc/simpleform/input/submit"),TextInput:i("splunkjs/mvc/simpleform/input/text"),DropdownInput:i("splunkjs/mvc/simpleform/input/dropdown"),RadioGroupInput:i("splunkjs/mvc/simpleform/input/radiogroup"),TimeRangeInput:i("splunkjs/mvc/simpleform/input/timerange"),Submit:i("splunkjs/mvc/simpleform/input/submit"),Text:i("splunkjs/mvc/simpleform/input/text"),Dropdown:i("splunkjs/mvc/simpleform/input/dropdown"),Radio:i("splunkjs/mvc/simpleform/input/radiogroup"),TimeRangePicker:i("splunkjs/mvc/simpleform/input/timerange")}}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/base":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("shim/jquery"),s=i("splunkjs/mvc/basesplunkview"),a=i("splunkjs/mvc/simpleform/inputsettings"),r=i("splunkjs/mvc/utils"),o=i("splunkjs/mvc/simplexml/controller"),l=i("splunkjs/mvc/simpleform/edit/menu"),d=(i("splunkjs/mvc"),i("util/console")),c=i("splunkjs/mvc/tokenutils"),h=i("splunkjs/mvc/savedsearchmanager"),u=i("splunkjs/mvc/postprocessmanager"),p=i("splunkjs/mvc/simpleform/formutils"),m=i("splunkjs/mvc/simplexml/dashboard/tokendeps");return s.extend(t.extend({},m,{className:"input",_isDashboardInput:!0,options:{submitOnChange:!1,editable:!0},omitted:["id","name","model","collection","el","attributes","className","tagName","events","settingsOptions"],initialize:function(e){this.configure(),this.initialVisualization&&this.settings.set("type",this.initialVisualization),e=e||{},this.inputId=e.inputId||t.uniqueId((this.id||"input")+"_"),this.settings.set("id",this.id),this._extractTokenName(),this.listenTo(this.settings,"change:label",this.renderLabel),this.listenTo(this.settings,"change:token change:type",this._applyTokenName),this.listenTo(this.settings,"change:type",this._updateType),this.listenToOnce(this.settings,"removeInput",this.remove),this.listenTo(o.getStateModel(),"change:edit",this.onEditModeChange),this.listenTo(this.settings,"change:editable",this.onEditModeChange),this.bindToComponent(this.settings.get("managerid"),this.onManagerChange,this),e.handleValueChange&&this.listenTo(this,"change",(function(){p.handleValueChange(this)})),this.setupTokenDependencies()},configure:function(){s.prototype.configure.apply(this,arguments);var e=this.settings.toJSON({tokens:!0});return this.settings=new a(e,this.options.settingsOptions),this},onManagerChange:function(e,t){t instanceof h?this.settings.set({searchName:t.get("searchname"),searchType:"saved"},{tokens:!0}):t instanceof u?this.settings.set({searchType:"postprocess",search:t.get("search",{tokens:!0}),basesearch:t.get("managerid")},{tokens:!0}):t&&this.settings.set({searchType:"inline",search:t.get("search",{tokens:!0}),populating_earliest_time:t.get("earliest_time",{tokens:!0}),populating_latest_time:t.get("latest_time",{tokens:!0})},{tokens:!0})},_updateType:function(){this._removeVisualization();var e=this.settings.get("type")||this.initialVisualization,i=p.getInputType(e);if(d.log("Creating input of type=%o class=%o",e,i),i){this._bindVizSettings();var n=this.vizSettings.toJSON({tokens:!0});n.settings=this.vizSettings,n.id=this.inputId;var s=this.visualization=new i(n,this.options.settingsOptions);s.render().$el.appendTo(this.$el),this.listenTo(s,"change datachange",this._triggerValueChangeEvent),this.listenTo(s,"all",this.trigger,this),this.trigger("create:visualization",s),t.defer(t.bind((function(){this.trigger("change",this.visualization.val(),this.visualization),this._triggerValueChangeEvent()}),this))}else this.trigger("typenotfound",e)},_triggerValueChangeEvent:function(){var e=this.visualization,t={value:e._getSelectedValue(),label:e._getSelectedLabel(),data:e._getSelectedData()};this.trigger("valueChange",t)},_onReady:function(){var e=n.Deferred(),t=function(t){t._onReady((function(){e.resolve()}))};return this.visualization?t(this.visualization):this.listenToOnce(this,"create:visualization",t),e.promise()},_bindVizSettings:function(){this.vizSettings=new a(t.omit(this.options,this.omitted),this.options.settingsOptions),this.vizSettings.id=this.inputId,this.settings._sync=r.syncModels(this.settings,this.vizSettings,{auto:!0,exclude:this.omitted.concat(["value","earliest_time","latest_time","populating_earliest_time","populating_latest_time"])})},_unbindVizSettings:function(){this.settings._sync&&(this.settings._sync.destroy(),this.settings._sync=null),this.vizSettings&&(this.vizSettings.dispose(),this.vizSettings=null)},_extractTokenName:function(){var e=function(e,t,i){return 0===e.indexOf(t)?i&&e.slice(-i.length)===i?e.substring(t.length,e.length-i.length):e.substring(t.length):null};if("time"!==this.settings.get("type")){var t=this.settings.get("value",{tokens:!0});if(c.isToken(t)){var i=e(c.getTokenName(t),"form.");i&&this.settings.set("token",i)}}else{var n=this.settings.get("earliest_time",{tokens:!0}),s=this.settings.get("latest_time",{tokens:!0});c.isToken(n)&&c.isToken(s)&&(n=e(c.getTokenName(n),"form.",".earliest"),s=e(c.getTokenName(s),"form.",".latest"),n&&s&&n===s&&this.settings.set("token",n))}},_applyTokenName:function(){var e=this.settings.get("type"),t=this.settings.get("token");if("time"===e){this.settings.unset("value",{tokens:!0});var i={};i.earliest_time=t?"$form."+t+".earliest$":"$earliest$",i.latest_time=t?"$form."+t+".latest$":"$latest$",this.settings.set(i,{tokens:!0}),this.vizSettings&&this.vizSettings.set(i,{tokens:!0})}else{this.settings.set({earliest_time:null,latest_time:null},{unset:!0,tokens:!0});var n="$form."+t+"$";this.settings.set("value",n,{tokens:!0}),this.vizSettings&&this.vizSettings.set("value",n,{tokens:!0})}},remove:function(){this._removeEditMenu(),this._removeVisualization(),this.stopListeningToTokenDependencyChange();var e=this.$el.parent();s.prototype.remove.call(this),e.trigger("itemRemoved")},_removeVisualization:function(){this._unbindVizSettings(),this.visualization&&(this.stopListening(this.visualization),this.visualization.off(),this.visualization.remove(),this.visualization=null)},_createEditMenu:function(){return new l({model:this.settings})},_removeEditMenu:function(){this.editMenu&&(this.editMenu.remove(),this.editMenu=null)},isEditMode:function(){return o.isEditMode()&&this.settings.get("editable")},onEditModeChange:function(){this.$(".drag-handle").remove(),this.isEditMode()?(n('<div class="drag-handle"></div>').prependTo(this.$el),this.editMenu||(this.editMenu=this._createEditMenu().render().prependTo(this.$el))):this._removeEditMenu()},renderLabel:function(){var e=this.$el.children("label");if(e.length||(e=n("<label></label>").appendTo(this.el)),e.attr("for",this.inputId),this.settings.has("label"))e.html(t.escape(this.settings.get("label"))||"&nbsp;");else{var i=e.text();i&&this.settings.set("label",i,{tokens:!0})}},hasValue:function(){return!!this.visualization&&this.visualization._hasValueForDashboards()},val:function(e){if(this.visualization)return this.visualization.val.apply(this.visualization,arguments)},render:function(){return this.renderLabel(),this._updateType(),this.onEditModeChange(),this}}))}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/checkboxgroup":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/checkboxgroupview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("checkbox",n,{choices:!0,multiValue:!0}),t.extend({initialVisualization:"checkbox"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/dropdown":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/dropdownview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("dropdown",n,{choices:!0,multiValue:!1}),t.extend({initialVisualization:"dropdown"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/linklist":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/linklistview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("link",n,{choices:!0,multiValue:!1}),t.extend({initialVisualization:"link"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/multiselect":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/multiselectview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("multiselect",n,{choices:!0,multiValue:!0}),t.extend({initialVisualization:"multiselect"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/radiogroup":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/radiogroupview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("radio",n,{choices:!0,multiValue:!1}),t.extend({initialVisualization:"radio"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/submit":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("splunkjs/mvc/basesplunkview"),s=i("splunkjs/mvc/simplexml/controller"),a=i("splunkjs/mvc/simpleform/formutils");return n.extend({className:"splunk-submit-button form-submit",options:{text:t("Submit").t(),useIcon:!1},events:{"click button":function(e){e.preventDefault(),this.$("button").is(".disabled")||this.trigger("submit",this)},"click .delete-input":function(e){e.preventDefault(),s.model.view.updateFormSettings({submitButton:!1}).done(t.bind(this.remove,this))}},initialize:function(){this.configure(),this.listenTo(this.settings,"change",this.render),this.listenTo(s.getStateModel(),"change:edit",this.onEditModeChange);var e=this.settings;e.set("formReady",a.isFormReady()),t.defer((function(){a.onFormReady().then((function(){e.set("formReady",!0)}))})),this.listenTo(e,"change",this.render)},onEditModeChange:function(){if(this.$(".edit-dropdown").remove(),s.isEditMode()){var e=document.createElement("div");e.classList.add("edit-dropdown"),e.innerHTML='<a href="#" class="delete-input" title="'+t("Delete submit button").t()+'"><i class="icon-x"/></a>';var i=document.querySelector(".btn-primary");i.parentNode.insertBefore(e,i)}},render:function(){var e=this.$("button");if(!e.length){var t=document.createElement("button");t.classList.add("btn","btn-primary"),this.el.appendChild(t)}return this.settings.get("useIcon")?e.html('<i class="icon-search"></i>'):this.settings.has("text")?e.text(this.settings.get("text")):this.settings.set("text",e.text()),e[this.settings.get("formReady")?"removeClass":"addClass"]("disabled"),this.onEditModeChange(),this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/text":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/textinputview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("text",n,{blankIsUndefined:!0}),t.extend({initialVisualization:"text"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/input/timerange":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simpleform/input/base"),n=i("splunkjs/mvc/timerangeview");return i("splunkjs/mvc/simpleform/formutils").registerInputType("time",n),t.extend({initialVisualization:"time"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simpleform/inputsettings":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("shim/jquery"),s=i("splunkjs/mvc/settings"),a=i("splunkjs/mvc/simplexml/controller");return s.extend({validation:{token:{fn:"validateToken"},labelField:{fn:"validateLabelAndValueFields"},valueField:{fn:"validateLabelAndValueFields"},choices:{fn:"validateChoices"}},validateToken:function(e,i){if(!e&&"time"!==this.get("type"))return t("Token is required").t()},validateLabelAndValueFields:function(e,i,n){var s,a="time"!==this.get("type")&&"text"!==this.get("type");if(s="inline"==n.searchType&&!n.search,a&&!e&&!s)return t("Field For Label and Value are required for search").t()},validateChoices:function(e,i,n){if("time"!==this.get("type")&&"text"!==this.get("type")&&n.choices&&n.choices.length>0){var s=!1,a=!1,r={};if(t.each(n.choices,(function(e){e.value&&(e.label||(s=!0),t.has(r,e.value)&&(a=!0),r[e.value]=!0)})),s)return t("Static option values must have a name attributed to them").t();if(a)return t("Static option values must be unique").t()}},save:function(e,i,n){var s;this.attributes;if(null==e||"object"==typeof e?(s=e,n=i):(s={})[e]=i,n=t.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;return a.model.view.updateInput(this)},destroy:function(){var e=n.Deferred(),t=this;return a.model.view.deleteInput(t.get("id")).done((function(){e.resolve(),t.trigger("removeInput")})).fail((function(t){e.reject(t)})),e.promise()}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/simplexml/controller");return i("splunkjs/mvc/simplexml/dashboardview"),i("splunkjs/mvc/simplexml/dashboard"),i("splunkjs/mvc/simplexml/dashboard/panelref"),i("splunkjs/mvc/simplexml/element/table"),i("splunkjs/mvc/simplexml/element/chart"),i("splunkjs/mvc/simplexml/element/event"),i("splunkjs/mvc/simplexml/element/single"),i("splunkjs/mvc/simplexml/element/map"),i("splunkjs/mvc/simplexml/element/list"),i("splunkjs/mvc/simplexml/element/html"),i("splunkjs/mvc/simplexml/element/visualization"),i("splunkjs/mvc/simplexml/urltokenmodel"),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/savedsearchmanager"),i("splunkjs/mvc/postprocessmanager"),i("splunkjs/mvc/drilldown"),i("splunkjs/mvc/headerview"),i("splunkjs/mvc/footerview"),i("splunkjs/mvc/simpleform/formutils"),i("splunkjs/mvc/simplexml/eventhandler"),i("splunkjs/mvc/simplexml/searcheventhandler"),i("splunkjs/mvc/simpleform/input"),i("splunkjs/mvc/simpleform/input/submit"),i("splunkjs/mvc/simpleform/input/text"),i("splunkjs/mvc/simpleform/input/dropdown"),i("splunkjs/mvc/simpleform/input/radiogroup"),i("splunkjs/mvc/simpleform/input/linklist"),i("splunkjs/mvc/simpleform/input/timerange"),i("splunkjs/mvc/simpleform/input/checkboxgroup"),i("splunkjs/mvc/simpleform/input/multiselect"),i("splunkjs/mvc/utils"),t}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/controller":function(e,t,i){var n;void 0===(n=function(e){var t=i("util/router_utils"),n=i("require/backbone"),s=i("shim/jquery"),a=i("require/underscore"),r=(i("splunkjs/mvc/utils"),i("util/pdf_utils")),o=i("util/console"),l=i("uri/route"),d=i("splunkjs/mvc/sharedmodels"),c=(i("util/splunkd_utils"),i("shim/splunk.util")),h=i("splunkjs/mvc/protections"),u=i("collections/search/Reports"),p=i("splunkjs/mvc/simplexml/dashboardmodel"),m=i("splunkjs/mvc/simplexml/router");i("util/ajax_no_cache"),h.enableCSRFProtection(s),h.enableUnauthorizationRedirection(s,c.make_url("account/login"),"/account/logout");var g=function(){if(!0!==window.__splunkjs_router_disabled__){this.readyDfd=s.Deferred(),this.readyDeps=[];var e=this.model=new n.Model;this.collection={};var i=this.model.app=d.get("app"),a=(this.model.appLocal=d.get("appLocal"),this.model.user=d.get("user"),this.model.userPref=d.get("userPref"),this.collection.times=d.get("times"),this.model.serverInfo=d.get("serverInfo"));this.collection.searchBNFs=d.get("searchBNFs");this._onViewModelLoadDfd=s.Deferred();var o=this.model.view=new p;this.model.view.fetch({url:l.splunkdNS(i.get("root"),i.get("locale"),i.get("owner"),i.get("app"),[o.url,i.get("page")].join("/"))}).done(this._onViewModelLoad.bind(this)),r.isPdfServiceAvailable().always((function(t){e.set("pdf_available",t)})),this.on("addInput",this.model.view.addInput,this.model.view),this.router=new m({model:this.model,app:i,serverInfo:a}),t.start_backbone_history(),this.onReady((function(){e.trigger("ready")}))}else this._onViewModelLoadDfd=s.Deferred().resolve(),this.readyDfd=s.Deferred(),this.readyDeps=[],this.model=new n.Model,this.collection={},this.model.view=new p,this.router={on:function(){}}};a.extend(g.prototype,n.Events,{_populateSharedModels:function(e){this.model.app=e.get("app"),this.model.appLocal=e.get("appLocal"),this.model.user=e.get("user"),this.model.userPref=e.get("userPref"),this.collection.times=e.get("times"),this.model.serverInfo=e.get("serverInfo")},_onViewModelLoad:function(){o.trace("controller _onViewModelLoad");var e=this.model;e.set("editable",e.view.isEditable()&&e.view.entry.acl.canWrite()),e.view.isXML()&&(e.set("label",this.model.view.getLabel()),e.set("description",this.model.view.getDescription()),e.on("change:label change:description",(function(){e.view.setLabelAndDescription(e.get("label"),e.get("description")),e.view.save(),this.updatePageTitle()}),this),e.set("rootNodeName",e.view.getRootNodeName()),e.view.on("change:rootNodeName",(function(t,i){e.set("rootNodeName",i)}))),this._onViewModelLoadDfd.resolve(this.model.view),this.updatePageTitle()},onViewModelLoad:function(e,t){o.trace("controller onViewModelLoad"),this._onViewModelLoadDfd.done(e.bind(t||null))},getStateModel:function(){return o.trace("controller getStateModel"),this.model},isEditMode:function(){return o.trace("controller isEditMode"),!0===this.model.get("edit")},addReadyDep:function(e){o.trace("controller addReadyDep");var t=s.Deferred();e.always(a.bind(t.resolve,t)),this.readyDeps.push(t)},onReady:function(e){o.trace("controller onReady");var t=s.when(this.readyDfd,this._onViewModelLoadDfd);return e&&t.then(e),t},ready:function(){o.trace("controller ready");var e=this.readyDfd;if(o.log("Waiting for %d dependencies before signaling dashboard readiness",this.readyDeps.length),s.when.apply(s,this.readyDeps).then((function(){o.log("Dashboard is ready"),e.resolve()})),window.location.hash){var t=document.getElementById(window.location.hash.substring(1));t&&t.scrollIntoView()}},isReady:function(){return o.trace("controller isReady"),"resolved"===this.readyDfd.state()},fetchCollection:function(){o.trace("controller fetchCollection"),this.reportsCollection=new u,this.reportsCollection.REPORTS_LIMIT=100;var e=this.model.app,t={data:{count:this.reportsCollection.REPORTS_LIMIT,app:e.get("app"),owner:e.get("owner"),search:"is_visible=1 AND disabled=0"}};this.reportsCollection.initialFetchDfd=this.reportsCollection.fetch(t)},updatePageTitle:function(){o.trace("controller updatePageTitle");var e=a("%s | Splunk").t();document.title=c.sprintf(e,a(this.model.view.getLabel()).t())},_signalReadyByMainController:function(e){this.model.view.setFromSplunkD(e.model.view.toSplunkD()),this.ready()}});var f=new g;return o.DEBUG_ENABLED&&(window.Dashboard=f),f}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard":function(e,t,i){var n;void 0===(n=function(e){return i("util/console").warn("%s is deprecated. Please require %s instead.","splunkjs/mvc/simplexml/dashboard","splunkjs/mvc/simplexml/dashboardview"),i("splunkjs/mvc/simplexml/dashboardview")}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/basepanel":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("splunkjs/mvc/mvc"),o=i("splunkjs/mvc/basesplunkview"),l=i("splunkjs/mvc/simpleform/fieldsetview"),d=i("splunkjs/mvc/simplexml/controller"),c=i("splunkjs/mvc/simplexml/element/base"),h=i("splunkjs/mvc/simpleform/input/base"),u=i("splunkjs/mvc/simplexml/dashboard/titleeditor"),p=i("views/shared/dialogs/TextDialog"),m=i("shim/splunk.util").sprintf,g=i("splunkjs/mvc/simplexml/factory"),f=i("splunkjs/mvc/simplexml/dashboard/tokendeps"),v=i("splunkjs/mvc/postprocessmanager");return o.extend(s.extend({},f,{className:"dashboard-cell",_uniqueIdPrefix:"panel",configure:function(){this.options.settingsOptions=s.extend({retainUnmatchedTokens:!0},this.options.settingsOptions||{}),o.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.model||(this.model={}),this.listenTo(d.getStateModel(),"change:edit ready",this.onEditStateChange),this.listenTo(this.settings,"change:title",this.updatePanelTitle),this.fieldset=this.createFieldset(),this.setupTokenDependencies()},isEditMode:function(){return!!d.isReady()&&(d.getStateModel().get("edit")&&!1!==this.settings.get("editable"))},childrenVisible:function(){return s.any(this.getChildElements(),(function(e){return!e.$el.is(".hidden")}))||this.fieldset.childrenVisible()},layoutElements:function(){this.getChildElementIDs().length>0&&!this.childrenVisible()?this.hide():this.tokenDependenciesMet()?this.show():this.hide();var e=this.$panel(),t=this.isEditMode();s(e.children(".panel-element-row.grouped")).each((function(e){var i=".dashboard-element"+(t?"":":not(.hidden)"),n=a(e).children(i);n.length>0&&n.css({width:String(100/n.length)+"%"})}))},resetGroupLayout:function(){s(this.$panel().children(".panel-element-row")).chain().map(a).invoke("removeClass","grouped").filter((function(e){return e.children(".dashboard-element").length>1})).invoke("addClass","grouped")},resetLayout:function(){this.onEditStateChange(),this.resetGroupLayout()},addChild:function(e){if(e instanceof c)this.addElement(e);else{if(!(e instanceof h))throw new Error("Cannot add unknown component as child of panel");this.addInput(e)}},addElement:function(e){var t,i=this.$panel();"visualizations:singlevalue"==e.getVisualizationType()&&(t=i.children(".panel-element-row:last")).length?0===t.children(".single")&&(t=a('<div class="panel-element-row" />').appendTo(i)):t=a('<div class="panel-element-row" />').appendTo(i),e.render().$el.addClass("dashboard-element").appendTo(t),this.$el.trigger("cellContentChange")},setEditable:function(e){this.fieldset.settings.set("editable",e),s(this.getChildElements()).each((function(t){t.settings.set("editable",e)}))},addInput:function(e){this.fieldset.addChild(e)},getChildElementIDs:function(){return s(this.$el.find(".dashboard-element")).map((function(e){return a(e).attr("id")}))},getChildElements:function(){return s(this.getChildElementIDs()).chain().map(s.bind(r.Components.get,r.Components)).filter(s.identity).value()},getAllChildren:function(){return Array.prototype.concat.call(this.fieldset.getChildElements(),this.getChildElements())},removeChildren:function(){s(this.getChildElements()).invoke("remove")},onEditStateChange:function(){this.isEditMode()?this.enterEditMode():this.leaveEditMode()},enterEditMode:function(){var e=this.createTitleEditor();e&&e.render().$el.prependTo(this.createPanelTitle());var t=this._panelEditor=this.createPanelEditor();t&&t.render().$el.prependTo(this.$panel()),this.createDragHandle()},leaveEditMode:function(){this.removeDragHandle(),this.removePanelEditor(),this.removeTitleEditor(),this.updatePanelTitle()},createFieldset:function(e){return e||(e={}),new l(e)},removeFieldset:function(){this.fieldset.remove(),this.fieldset=null},createTitleEditor:function(){return this.removeTitleEditor(),this._titleEditor=new u({model:this.settings,attribute:"title"}),this.listenTo(this.settings,"change:title",this.triggerStructureChange),this._titleEditor},removeTitleEditor:function(){this._titleEditor&&(this.stopListening(this.settings,"change:title",this.triggerStructureChange),this._titleEditor.remove(),this._titleEditor=null)},createPanelEditor:function(){},removePanelEditor:function(){this._panelEditor&&(this.stopListening(this._panelEditor),this._panelEditor.remove(),this._panelEditor=null)},createPanelTitle:function(e){var t=this.$panel(),i=t.children(".panel-title");return i.length||(i=a('<h2 class="panel-title" />').prependTo(t)),e?(i.text(s(e).t()).removeClass("empty"),t.addClass("with-title")):(i.empty().addClass("empty"),t.removeClass("with-title")),i},updatePanelTitle:function(){if(!this._titleEditor){var e=this.settings.get("title");null!=e&&(e=e.trim()),this.createPanelTitle(e)}},removePanelTitle:function(){this.removeTitleEditor(),this.$el.children(".dashboard-panel").children(".panel-title").remove()},createDragHandle:function(){this._dragHandle||(this._dragHandle=a('<div class="drag-handle"><a href="#" class="delete-panel" role="button" aria-label="'+s("Delete panel").t()+'"><i class="icon-x"></i></a><div class="handle-inner"></div></div>')),this._dragHandle.prependTo(this.$panel())},removeDragHandle:function(){this._dragHandle&&(this._dragHandle.remove(),this._dragHandle=null)},hide:function(){this.$el.is(".hidden")||this.$el.addClass("hidden").trigger("panelVisibilityChanged")},show:function(){this.$el.is(".hidden")&&this.$el.removeClass("hidden").trigger("panelVisibilityChanged")},events:{itemRemoved:"removeIfEmpty",elementVisibilityChanged:"layoutElements","click a.delete-panel:not(.disabled)":"showDeleteDialog","click a.rename-panel:not(.disabled)":"focusTitleEditor","click a.convert-panel:not(.disabled)":"convertPanel"},$panel:function(){return this.$el.children(".dashboard-panel")},render:function(){this.$el.attr("id",this.id);var e=this.$panel();e.length||(e=a('<div class="dashboard-panel"></div>').appendTo(this.$el)),this.fieldset.render().$el.appendTo(e);var t=this.settings.get("title").trim();return t&&this.createPanelTitle(t),this.resetLayout(),this},focusTitleEditor:function(){this._titleEditor&&this._titleEditor.focus()},convertPanel:function(){},onPanelConverted:function(){this.leaveEditMode(),this.onEditStateChange()},convertPanelTo:function(e){return new Promise((function(t){var i=this,n=this.getAllChildren(),a=this.settings.toJSON(),r={type:e,settings:a,children:[]};g.getDefault().materialize(r,null,{loadPanels:!1}).then((function(e){e.render().$el.insertBefore(i.$el),i.$el.detach(),s(n).each((function(t){g.addChildToContainer(t,e)})),i.remove(),e.onPanelConverted(),t(e)}))}))},showDeleteDialog:function(e){e.preventDefault();var t=new p({id:"modal_delete"});t.settings.set({primaryButtonLabel:s("Delete").t(),cancelButtonLabel:s("Cancel").t(),titleLabel:s("Delete").t()}),this.listenToOnce(t,"click:primaryButton",this.deletePanel);var i=a.trim(this.settings.get("title")),n=i?m("<em>%s</em>",s.escape(i)):s.escape(s("this panel").t());t.setText(m(s("Are you sure you want to delete %s?").t(),n)),t.render().$el.appendTo(document.body),t.show()},deletePanel:function(){var e=this.$el.parent();this.remove(),s.defer((function(){a(window).trigger("resize"),e.trigger("structureChange")}))},triggerStructureChange:function(){this.isEditMode()&&this.$el.trigger("structureChange")},serializeStructure:function(e){return e||(e={}),{inputs:this.fieldset?this.fieldset.serializeStructure(e):[],elements:this.getChildElementIDs(),title:this.settings.get("title",{tokens:!1!==e.tokens}),tokenDependencies:this.settings.get("tokenDependencies",{tokens:!0}),id:this.settings.get("originalId")}},hasChildWithBaseSearch:function(){var e=function(e){return r.Components.get(e.settings.get("managerid"))instanceof v};return s(this.getChildElements()).any(e)||this.fieldset&&s(this.getChildElements()).any(e)},isEmpty:function(){return 0===this.getChildElementIDs().length&&this.fieldset.isEmpty()},removeIfEmpty:function(){this.isEmpty()&&this.remove()},remove:function(){this.removeTitleEditor(),this.removeFieldset(),this.removeChildren(),this.stopListeningToTokenDependencyChange(),o.prototype.remove.apply(this,arguments)}}))}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/description":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore");return i("require/backbone").View.extend({initialize:function(){this.listenTo(this.model,"change:description",this.render,this),this.listenTo(this.model,"change:edit",this.render,this)},render:function(){if(this.model.has("description")){var e=t(this.model.get("description")||"").t(),i=this.model.get("edit");this.$el.text(e)[e&&!i?"show":"hide"]()}return this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/empty":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("require/backbone"),o=i("shim/splunk.util");i("uri/route");return r.View.extend({initialize:function(e){r.View.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:editable change:edit",this.render,this)},events:{"click a.start-edit":function(e){e.preventDefault(),this.model.state.set("edit",!0)}},render:function(){this.$el.empty().removeClass("empty-dashboard"),this.$el.addClass("empty-dashboard");var e=a('<div class="alert alert-error"><i class="icon-alert"></i></div>');if(this.model.state.get("editable")){var t;if(this.model.state.get("edit"))t=s("Click Add Panel to start.").t();else{t=s("This dashboard has no panels. %s to add panels.").t();var i=o.sprintf('<a class="start-edit" href="#edit">%s</a>',s("Start editing").t());t=o.sprintf(t,i)}a("<span></span>").html(t).appendTo(e)}else a("<span></span>").text(s("This dashboard has no panels.").t()).appendTo(e);return e.appendTo(this.$el),this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/panel":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("splunkjs/mvc/simplexml/dashboard/basepanel"),s=i("splunkjs/mvc/simplexml/dashboard/paneleditor"),a=i("splunkjs/mvc/simplexml/dialog/convertpanel"),r=s.extend({className:"inline-panel-editor",initialize:function(e){s.prototype.initialize.call(this,t.extend({popdownLabel:t("Inline Panel").t()},e))},getActions:function(){return[{className:"rename-panel",label:t("Rename").t()},{className:this.canConvert()?"convert-panel":"disabled",label:t("Convert to Prebuilt Panel").t(),tooltip:this.convertTooltip},{className:"delete-panel",label:t("Delete").t()}]}});return n.extend({renderFromDOM:function(){var e=this.$panel(),t=this.$el.data("original-id");t&&this.settings.set("originalId",t);var i=e.children(".panel-title");i.length&&this.settings.set("title",i.text().trim(),{tokens:!0});var n=e.children(".fieldset");return n.length&&this.fieldset.setElement(n),this.fieldset.render(),i.length?this.fieldset.$el.insertAfter(i):this.fieldset.$el.prependTo(e),this.resetLayout(),this},createPanelEditor:function(){this.removePanelEditor();var e=this.hasChildWithBaseSearch();return new r({canConvert:!e,convertTooltip:e?t("Unable to convert to prebuilt panel due to dependency on base search.").t():null})},convertPanel:function(e){e.preventDefault();var t=new a({id:"modal_convert_to_ref",panel:this});t.render().appendTo(document.body),t.show(),this.listenToOnce(t,"panelCreated",(function(e){this.convertPanelTo("panelref").then((function(t){t.model.panel.setFromSplunkD(e.toSplunkD()),t.$el.trigger("structureChange")}))}))},addChild:function(e){e&&e.settings&&e.settings.set("editable",!0),n.prototype.addChild.apply(this,arguments)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/paneleditor":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=i("require/underscore"),r=i("views/Base"),o=i("views/shared/delegates/Popdown");return i("shim/bootstrap.tooltip"),r.extend({initialize:function(e){e&&a.extend(this,a.pick(e,"actions","popdownLabel")),this._canConvert=e.canConvert,this.convertTooltip=e.convertTooltip},render:function(){this.$el.addClass("dashboard-panel-editor").html(this.compiledTemplate({actions:this.getActions(),popdownLabel:this.getLabel(),className:this.className}));var e=a(this.getActions()).map((function(e){var t=s('<a href="#"></a>').addClass(e.className).text(e.label);return e.tooltip&&t.tooltip({animation:!1,title:e.tooltip,container:"body"}),s("<li></li>").append(t)}));return this.$(".dashboard-panel-actions").append(e),this.children.popdown=new o({el:this.el,mode:"dialog"}),this},getActions:function(){return this.actions||[]},getLabel:function(){return this.popdownLabel||a("Panel").t()},canConvert:function(){return null==this._canConvert||this._canConvert},events:{"click li>a":function(e){e.preventDefault(),s(e.currentTarget).is(".disabled")||this.children.popdown.hide()}},template:'<a href="#" class="dropdown-toggle btn-pill"><% if(className === "inline-panel-editor") { %><span class="icon-gear"></span><% } else if (className === "ref-panel-editor") { %> <span class="icon-lock"></span><% } %><span class="caret" aria-hidden="true"></span></a><div class="dropdown-menu"><div class="arrow"></div><ul class="dashboard-panel-actions"><li class="panel-type-label"><%- popdownLabel %></li></ul></div>'})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/panelref":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("splunkjs/mvc"),o=i("require/backbone"),l=i("splunkjs/mvc/simplexml/parser"),d=i("splunkjs/mvc/simplexml/factory"),c=i("splunkjs/mvc/sharedmodels"),h=i("util/splunkd_utils"),u=i("models/services/data/ui/Panel"),p=i("splunkjs/mvc/simplexml/dashboard/basepanel"),m=i("splunkjs/mvc/messages"),g=i("shim/splunk.util").sprintf,f=(i("splunkjs/mvc/utils"),i("splunkjs/mvc/simplexml/dashboard/paneleditor")),v=i("views/shared/dialogs/TextDialog"),b=f.extend({className:"ref-panel-editor",initialize:function(e){f.prototype.initialize.call(this,s.extend({popdownLabel:s("Prebuilt Panel").t()},e)),this.listenTo(this.model.state,"change",this.render)},getActions:function(){return[{className:this.canConvert()?"convert-panel":"disabled",label:s("Convert to Inline Panel").t(),tooltip:this.convertTooltip},{className:"delete-panel",label:s("Delete").t()}]},canConvert:function(){var e=f.prototype.canConvert.apply(this,arguments);if(e){var t=this.model.state.toJSON();e=t.ready&&t.loaded&&!t.error}return e}});return p.extend({initialize:function(){p.prototype.initialize.apply(this,arguments),this.model.panel||(this.model.panel=new u),this.model.state=new o.Model({loaded:this.model.panel.isNew(),ready:!1,error:!1}),this.dashboardFactory=new d.createLegacy},load:function(e,t,i){this.model.state.set({loaded:!1,error:!1,ready:!1}),this.model.panel.entry.set("name",e),this.model.panel.entry.acl.set("app",t),this.renderMessage({icon:"info-circle",level:"info",message:s("Loading panel...").t()});var n=c.get("app");t||(t=n.get("app"));var r=a.Deferred(),o=this;return this.model.panel.fetch({url:h.fullpath(this.model.panel.url+"/"+encodeURIComponent(e),{app:t,owner:n.get("owner")}),success:function(){o.parsePanel(i).then(s.bind(o.removeMessage,o)).then(s.bind(r.resolve,r)).fail(s.bind(r.reject,r))},error:function(i,n){var a=404===n.status?g(s('Dashboard panel "%s" not found.').t(),s.escape(e)):g(s('Error loading dashboard panel "%s".').t(),s.escape(e));o.onLoadError(a,e,t),r.reject()}}),r.promise()},clearPanel:function(){this.fieldset.removeChildren(),this.removeChildren()},parsePanel:function(e){e||(e={});var t=this.model.state;t.set({loaded:!0,error:!1,ready:!1});var i=this.model.panel.entry.content.get("eai:data");try{var n=l.getDefault().parsePanel(i);return!1!==e.clear&&this.clearPanel(),e.idPrefix=this.id+"_",this.dashboardFactory.materializeExisting(this,n,e).done((function(){t.set("ready",!0)}))}catch(e){return this.onParserError(e),a.Deferred().reject(e)}},applySettings:function(e){this.settings.set(e),this.onEditStateChange()},onLoadError:function(e,t){this.model.state.set("error",!0),this.renderError(e)},onParserError:function(){this.model.state.set("error",!0),this.renderError(s("Error parsing prebuilt dashboard panel.").t())},renderError:function(e){this.renderMessage({icon:"warning-sign",level:"error",message:e})},renderMessage:function(e){this.removeMessage();var t=a('<div class="dashboard-element panel-message"></div>'),i=a('<div class="panel-body"></div>').appendTo(t);m.render(e,i),this.$panel().append(t)},removeMessage:function(){this.$panel().children(".panel-message").remove()},addChild:function(e){this.removeMessage(),e&&e.settings&&e.settings.set("editable",!1),p.prototype.addChild.apply(this,arguments)},createFieldset:function(e){return p.prototype.createFieldset.call(this,s.extend({editable:!1},e))},serializeStructure:function(e){return e||(e={}),e.flatten&&this.model.state.get("loaded")?p.prototype.serializeStructure.call(this,e):{ref:this.model.panel.entry.get("name"),app:this.model.panel.entry.acl.get("app"),tokenDependencies:this.settings.get("tokenDependencies",{tokens:!0}),id:this.settings.get("originalId"),inputs:[],elements:[]}},createPanelEditor:function(){this.removePanelEditor();var e=this.hasChildWithBaseSearch();return new b({model:{state:this.model.state},canConvert:!e,convertTooltip:e?s("Unable to convert to inline panel due to dependency on base search.").t():null})},createTitleEditor:function(){this.createPanelTitle(this.settings.get("title"))},onPanelConverted:function(){this.model.state.set({loaded:!0,ready:!0,error:!1}),p.prototype.onPanelConverted.apply(this,arguments)},convertPanel:function(e){e.preventDefault();var t=this;v.confirm(s("Conversion to an inline panel lets you edit and customize the panel on this dashboard.").t(),{id:"modal_convert_to_inline",title:s("Convert to Inline Panel").t(),primaryButtonLabel:s("Convert").t(),primaryAction:function(){var e=p.prototype.serializeStructure.call(t),i=t.model.panel.getElementNodes(),n=t.model.panel.getInputNodes();if(e.elements.length!==i.length||e.inputs.length!==n.length)throw new Error("Error converting to inline panel - unable to obtain correct structure information.");var a=s.object(e.elements,i),o=s.object(e.inputs,n);t.convertPanelTo("panel").then((function(e){r.Components.get("dashboard").updateDashboardStructure({itemMap:a,inputMap:o}),e.$el.trigger("resetDragAndDrop")}))}})}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/row":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("shim/jquery"),s=i("splunkjs/mvc/mvc"),a=i("splunkjs/mvc/basesplunkview"),r=i("splunkjs/mvc/simplexml/controller"),o=i("splunkjs/mvc/simplexml/dashboard/tokendeps");return a.extend(t.extend({},o,{className:"dashboard-row",_uniqueIdPrefix:"row",initialize:function(){this.configure(),this.listenTo(r.getStateModel(),"change:edit",this.onEditStateChange,this),this.setupTokenDependencies()},onEditStateChange:function(){this.onContentChange()},bindToDOMChanges:function(){this.unbindFromDOMChanges(),!this.isEditMode()&&this.$(".dashboard-panel").length>1&&(this.$el.on("DOMSubtreeModified",this.throttledAlignItemHeights.bind(this)),this.throttledAlignItemHeights())},unbindFromDOMChanges:function(){this.$el.off("DOMSubtreeModified")},isEditMode:function(){return r.getStateModel().get("edit")},onContentChange:function(){this.unbindFromDOMChanges();var e=this.$el.children(".dashboard-cell");if(0!==e.length){var t=this.isEditMode()?e:e.filter(":not(.hidden)");e.removeClass("last-visible"),t.last().addClass("last-visible");var i=t.length,s=String(100/i)+"%";e.css({width:s}).find(".panel-element-row").each((function(){var e=n(this).find(".dashboard-element");e.css({width:String(100/e.length)+"%"})})),this.isEditMode()?this.alignOff():(i>0&&this.throttledAlignItemHeights(),this.bindToDOMChanges())}else this.$el.addClass("empty")},onPanelVisibilityChange:function(){this.onContentChange(),n(window).trigger("resize")},throttledAlignItemHeights:function(){var e=this;if(!e._alignTimer){var t=null==e._lastAlign||+new Date-e._lastAlign>1e3;e._alignTimer=setTimeout((function(){e.alignItemHeights(),e._alignTimer=null}),t?50:1e3)}},alignItemHeights:function(){var e=this.$el.find(".dashboard-panel");e.css({"min-height":0}),e.length>1&&e.css({"min-height":t.max(t.map(e,(function(e){return n(e).height()})))}),this._lastAlign=+new Date},alignOff:function(){clearTimeout(this._alignTimer),this._alignTimer=null,this.$el.find(".dashboard-panel").css({"min-height":0})},getChildContainer:function(){return this.$el},events:{cellContentChange:"onContentChange",cellRemoved:"onContentChange",structureChange:"onContentChange",panelVisibilityChanged:"onPanelVisibilityChange"},render:function(){return this.isEmpty()&&this.$el.addClass("empty"),this.onContentChange(),this},hide:function(){this.$el.addClass("hidden")},show:function(){this.$el.removeClass("hidden")},renderFromDOM:function(){var e=this.$el.data("original-id");return e&&this.settings.set("originalId",e),this.render()},isEmpty:function(){return 0===this.$el.children(".dashboard-cell").length},removeIfEmpty:function(){this.isEmpty()&&this.remove()},remove:function(){return this.unbindFromDOMChanges(),this.stopListeningToTokenDependencyChange(),a.prototype.remove.apply(this,arguments)},serializeStructure:function(e){return e||(e={}),{panels:t(this.$el.children(".dashboard-cell")).chain().map((function(e){return n(e).attr("id")})).map(t.bind(s.Components.get,s.Components)).filter((function(t){return t&&!0!==e.omitHidden||!t.$el.is(".hidden")})).map((function(t){return t.serializeStructure(e)})).value(),tokenDependencies:this.settings.get("tokenDependencies",{tokens:!0}),id:this.settings.get("originalId")}}}))}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/title":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore");return i("require/backbone").View.extend({initialize:function(){this.model.on("change:edit change:label",this.render,this)},render:function(){if(this.model.has("label")||this.model.set({label:this.$el.text()},{silent:!0}),this.$(".edit-label").remove(),this.$el.text(t(this.model.get("label")).t()),this.model.get("edit")){var e=document.createElement("span");e.classList.add("edit-label"),e.innerHTML=t("Edit").t()+": ",this.el.insertBefore(e,this.el.firstChild)}return this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/titleeditor":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("require/backbone"),r=i("util/console");return a.View.extend({tagName:"input",className:"title-editor",initialize:function(e){a.View.prototype.initialize.apply(this,arguments),this.attribute=e.attribute||"title",this.placeholder=e.placeholder||s("Untitled").t(),this.listenTo(this.model,"change:"+this.attribute,(function(e){this.trigger("update",e)}))},updateFromModel:function(){var e=this.$el.val(),t=this.model.get(this.attribute);e!=t&&this.$el.val(t?s(t).t():"")},updateModel:function(){var e=this.$el.val().trim();r.log("Update title: ",e),this.model.set(this.attribute,e)},$input:function(){return this.$el},events:{change:"updateModel",keyup:function(e){27==e.keyCode?(this.updateFromModel(),this.$el.blur()):13==e.keyCode&&(this.updateModel(),this.$el.blur())}},focus:function(){this.$el.focus()},render:function(){return this.$el.attr("type","text").attr("placeholder",this.placeholder),this.updateFromModel(),this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboard/tokendeps":function(e,t,i){var n;void 0===(n=function(e,t,n){i("require/underscore");var s=i("splunkjs/mvc/mvc"),a=i("splunkjs/mvc/tokenutils"),r=s.Components;return{setupTokenDependencies:function(){var e=this.settings.get("tokenDependencies",{tokens:!0});e||(this._tokenDepsMet=!0),a.listenToTokenDependencyChange(e,r,this.handleTokenChange,this),this.listenTo(this.settings,"change:tokenDependencies",(function(e,t){var i=e.previous("tokenDependencies");a.stopListeningToTokenDependencyChange(i,r),a.listenToTokenDependencyChange(t,r,this._start,this)})),this.handleTokenChange()},handleTokenChange:function(){var e=this.settings.get("tokenDependencies",{tokens:!0});e&&(a.tokenDependenciesMet(e,r)?(this._tokenDepsMet=!0,this.show()):(this._tokenDepsMet=!1,this.hide()))},stopListeningToTokenDependencyChange:function(){var e=this.settings.get("tokenDependencies",{tokens:!0});a.stopListeningToTokenDependencyChange(e,r)},tokenDependenciesMet:function(){return this._tokenDepsMet},show:function(){this.$el.removeClass("hidden").trigger("elementVisibilityChanged")},hide:function(){this.$el.addClass("hidden").trigger("elementVisibilityChanged")}}}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboardeventhandler":function(e,t,i){var n,s;n=[i("require/underscore"),i("splunkjs/mvc/simplexml/eventhandler")],void 0===(s=function(e,t){return t.extend({startListenToDashboard:function(e,t){this._dashboard=e,this.listenTo(this._dashboard,"dashboard:"+t,this.handleEvent)},stopListenToDashboard:function(){this._dashboard&&this.stopListening(this._dashboard)},onComponentChange:function(e,t){this.stopListenToDashboard(),t&&this.startListenToDashboard(t,this.settings.get("event"))}})}.apply(t,n))||(e.exports=s)},"splunkjs/mvc/simplexml/dashboardmodel":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("shim/jquery"),s=i("models/search/Dashboard"),a=i("util/general_utils"),r=i("util/console"),o=i("splunkjs/mvc/simplexml/serializer"),l=i("models/services/data/ui/Panel");return s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments)},updateElement:function(e,t,i){var s=this.get$XML(),a=this.getXMLNode(e,s);if(!a)throw new Error("Unable to find dashboard element with ID "+e);var r=o.updateExistingElementNode(a,t,i);return t.search&&"global"===t.search.type&&o.applyGlobalSearch(s,t),n(a).replaceWith(r),this.set$XML(s),this.save()},deleteElement:function(e){var i={fieldset:this._structure.fieldset,rows:t(this._structure.rows).map((function(i){return t.defaults({panels:t(i.panels).map((function(i){return{inputs:i.inputs,elements:t(i.elements).without(e)}}))},i)}))};return this.updateStructure(i)},addElement:function(e,t){var i={inputs:[],elements:[e]},n=this.get$XML();return o.insertNewElement(n,t),this._structure.rows.push({panels:[i]}),this.set$XML(n),this.save()},_migrateViewType:function(e,t){var i=o.migrateViewType(e,t);return void 0!==i&&(e=i,this.trigger("change:rootNodeName",this,t)),e},captureDashboardStructure:function(e){var t=this.get$XML();this.validateItemOrder(this._getItemOrderMap(e.rows,t)),this.validateInputOrder(this._getInputOrderMap(e,t)),this._structure=e},getStructureMap:function(e,i){return t.extend({},this._getItemOrderMap(e.rows,i),this._getInputOrderMap(e,i))},getCurrentStructureMap:function(){return this.getStructureMap(this._structure,this.get$XML())},getXMLNode:function(e,t){e=String(e);var i=t.find(":eq(0)>fieldset>#"+e+",:eq(0)>row>#"+e+",:eq(0)>row>panel>#"+e);return i.length?i[0]:this.getStructureMap(this._structure,t)[e]},_getItemOrderMap:function(e,i){var s=t(i.find("row").children()).map((function(e){return n(e).is("panel")?l.getPanelElementNodes(e).toArray():e}));return function(e,i,n){if(e.length!==i.length)throw new Error("Item order did not match XML structure ("+e.length+" keys, "+i.length+" nodes)");return t.object(e,i)}(t(e).chain().pluck("panels").flatten().pluck("elements").flatten().value(),t.flatten(s))},validateItemOrder:function(e){t(e).each((function(e,t){var i=n(e).attr(t);if(void 0!==i&&i!==t)throw new Error("Invalid Item order. Expected node with ID "+t+". Instead saw "+i)}))},updateInputXML:function(e,t,i){var s=this.get$XML(),a=this.getXMLNode(e,s);if(!a)throw new Error("Unable to find input with ID=",e);a=n(a);var r=o.updateExistingInputNode(a,t.toJSON({tokens:!1!==i.tokens}),i);return n(a).replaceWith(r),this.set$XML(s),this.save()},isFormAutoRun:function(){var e=this.get$XML().find("fieldset");return a.normalizeBoolean(e.attr("autoRun"))},updateFormSettings:function(e){return this.set$XML(o.updateFormSettings(this.get$XML(),e)),this.save()},deleteInput:function(e){var i={fieldset:t(this._structure.fieldset).without(e),rows:t(this._structure.rows).map((function(i){return t.defaults({panels:t(i.panels).map((function(i){return{inputs:t(i.inputs).without(e),elements:i.elements}}))},i)}))};return this.updateStructure(i)},_getInputOrderMap:function(e,i){var n={},s=function(e,i,n){if(e.length!==i.length)throw new Error("Input ("+n+") order did not match XML structure ("+e.length+" keys, "+i.length+" nodes)");return t.object(e,i)};return t.extend(n,s(e.fieldset,i.find(":eq(0)>fieldset>input,:eq(0)>fieldset>html"),"fieldset")),t.extend(n,s(t(e.rows).chain().pluck("panels").flatten().pluck("inputs").flatten().value(),i.find(":eq(0)>row>panel>input"),"panels")),n},validateInputOrder:function(e){t(e).each((function(e,t){var i=n(e).attr(t);if(void 0!==i&&i!==t)throw new Error("Invalid Input order. Expected node with ID "+t+". Instead saw "+i)}))},updateInput:function(e){return this.updateInputXML(e.get("name"),e,{})},addInput:function(e){var t=o.createInputNode(e.toJSON({tokens:!0})),i=this._migrateViewType(this.get$XML(),"form");return o.createFieldset(i).append(t),this._structure.fieldset.push(e.get("id")),this.set$XML(i),this.save()},updateStructure:function(e,i){if(i||(i={}),this._structure||(r.warn("No captured dashboard structure"),this.captureDashboardStructure(e)),t.isEqual(e,this._structure))return r.log("no changes to input order"),n.Deferred().resolve();r.log("Saving new dashboard structure",e),e.rows=t(e.rows).filter((function(e){return e.panels.length>0}));var s=this.get$XML(),a=t.extend(this._getItemOrderMap(this._structure.rows,s),i.itemMap),l=t.extend(this._getInputOrderMap(this._structure,s),i.inputMap);return s=o.serializeDashboardStructure(s,e,t.extend({},i,{itemMap:a,inputMap:l})),r.log("Updated dashboard structure",JSON.stringify(e),s.find(":eq(0)")[0]),this._structure=e,s=this.hasInputs()?this._migrateViewType(s,"form"):this._migrateViewType(s,"dashboard"),this.set$XML(s),r.log("Saving XML changes"),this.save()},isEditable:function(){return this.isDashboard()||this.isForm()},getRootNodeName:function(){return(this.get$XML().find(":eq(0)").prop("nodeName")||"").toLowerCase()},hasInputs:function(){return this._structure.fieldset.length>0||t(this._structure.rows).any((function(e){return t(e.panels).any((function(e){return e.inputs&&e.inputs.length>0}))}))}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dashboardview":function(e,t,i){var n;void 0===(n=function(e){var t=i("splunkjs/mvc/basesplunkview"),n=i("splunkjs/mvc/mvc"),s=i("require/underscore"),a=i("shim/jquery"),r=i("splunkjs/mvc/simplexml/controller"),o=i("splunkjs/mvc/simplexml/editdashboard/master"),l=i("splunkjs/mvc/simplexml/dragndrop"),d=i("util/console"),c=i("splunkjs/mvc/simpleform/fieldsetview"),h=i("splunkjs/mvc/simplexml/dashboard/title"),u=i("splunkjs/mvc/simplexml/dashboard/description"),p=i("splunkjs/mvc/simplexml/dashboard/row"),m=i("splunkjs/mvc/simplexml/dashboard/panel"),g=i("models/services/ScheduledView"),f=i("splunkjs/mvc/simplexml/dashboard/empty"),v=i("splunkjs/mvc/simpleform/edit/formsettings"),b=i("views/dashboards/table/controls/SchedulePDF"),y=i("splunkjs/mvc/sharedmodels");return t.extend({options:{showTitle:!0,editable:!0},initialize:function(){this.configure(),this.collection=this.collection||{},this.collection.appLocalsUnfiltered=y.get("appLocalsUnfiltered"),this.model=r.getStateModel(),this.model.scheduledView=new g,this.scheduledViewDfd=a.Deferred(),r.onViewModelLoad((function(){var e=this.model.scheduledView.findByName(this.model.view.entry.get("name"),this.model.app.get("app"),this.model.app.get("owner"));e.done(s.bind(this.scheduledViewDfd.resolve,this.scheduledViewDfd)),e.fail(s.bind(this.scheduledViewDfd.reject,this.scheduledViewDfd))}),this),this.settings.get("editable")&&(this.editControls=new o({model:{state:this.model,dashboard:this.model.view,application:this.model.app,scheduledView:this.model.scheduledView,serverInfo:this.model.serverInfo,userPref:this.model.userPref},collection:{appLocalsUnfiltered:this.collection.appLocalsUnfiltered},controller:r}),this.model.on("change:edit",this.onEditStateChange,this)),this.listenTo(this.model,"change:dialog",this.handleDialog),this.model.has("dialog")&&this.handleDialog(this.model)},render:function(){var e=this.model;if(s.each(this.$(".dashboard-row"),(function(e){var t=a(e),i=t.attr("id");n.Components.has(i)||new p({id:i,tokenDependencies:{depends:t.data("depends"),rejects:t.data("rejects")},el:e}).renderFromDOM()})),this.settings.get("showTitle")){this.titleView=new h({model:this.model,el:this.$(".dashboard-header h2")}).render();var t=this.$("p.description");t.length||(t=a('<p class="description"></p>').appendTo(this.$(".dashboard-header")).hide()),this.descriptionView=new u({el:t,model:e}).render()}var i=this.$el.children(".fieldset");if(i.length||(i=a('<div class="fieldset"></div>').insertAfter(this.$(".dashboard-header"))),this.fieldsetView=new c({el:i}).render(),this.settings.get("editable")){var o=a('<div class="edit-dashboard-menu pull-right"></div>').prependTo(this.$(".dashboard-header"));a.when(this.scheduledViewDfd).then(function(){this.editControls.render().appendTo(o)}.bind(this))}return s(this.$(".dashboard-cell")).each((function(e){var t=a(e),i=t.attr("id");n.Components.has(i)||new m({id:i,tokenDependencies:{depends:t.data("depends"),rejects:t.data("rejects")},el:e}).renderFromDOM()})),this.onEditStateChange(),s.defer((function(){a("body").removeClass("preload")})),this.$el.addClass(this.model.get("edit")?"edit-mode":"view-mode"),r.onReady(s.bind((function(){this.model.view.isSimpleXML()&&this.resetDashboardStructure()}),this)),this.updateEmptyState(),this},getController:function(){return r},getStateModel:function(){return this.model},getDashboardStructure:function(e){e||(e={});var t={},i=s.bind(n.Components.get,n.Components)(this.$el.children(".fieldset").attr("id"));return t.fieldset=i?i.serializeStructure(e):[],t.rows=s(this.$el.children(".dashboard-row")).chain().map(a).invoke("attr","id").map(s.bind(n.Components.get,n.Components)).filter((function(t){return t&&!0!==e.omitHidden||!t.$el.is(".hidden")})).map((function(t){return t.serializeStructure(e)})).value(),t},isEmptyDashboard:function(){return!1},getElementIds:function(e){return s(this.getDashboardStructure(e).rows).chain().pluck("panels").flatten().pluck("elements").flatten().value()},updateEmptyState:function(e){this.isEmptyDashboard()&&!0!==e&&this.model.view.isSimpleXML()?(this.emptyStateView||(this.emptyStateView=new f({model:{app:this.model.app,state:this.model}})),this.emptyStateView.render().$el.appendTo(this.$el)):this.emptyStateView&&(this.emptyStateView.remove(),this.emptyStateView=null)},enterEditMode:function(){if(this.leaveEditMode(),this.model.get("editable")){if(d.log("Entering edit mode"),this.dragnDrop=new l({el:this.el}),!this.resetDashboardStructure())return;this.dragnDrop.on("sortupdate",s.debounce(this.updatePanelOrder,0),this),this.dragnDrop.render(),this.$el.is(".view-mode")&&this.$el.addClass("edit-mode").removeClass("view-mode"),this.formSettings=(new v).render().insertBefore(this.$el.children(".fieldset"))}else d.log("Aborting edit mode: Dashboard is not editable"),this.model.set("edit",!1)},resetDashboardStructure:function(){try{this.model.view.captureDashboardStructure(this.getDashboardStructure())}catch(e){return d.error("Error capturing dashboard structure - disabling edit mode!",e),this.model.set("editable",!1),this.model.set("edit",!1),!1}return!0},updatePanelOrder:function(){return this.updateDashboardStructure()},updateDashboardStructure:function(e){return this.model.get("editable")?this.model.view.updateStructure(this.getDashboardStructure(),e):a.Deferred().resolve()},leaveEditMode:function(){this.formSettings&&(this.formSettings.remove(),this.formSettings=null),this.dragnDrop&&(this.dragnDrop.off(),this.dragnDrop.destroy(),this.updatePanelOrder(),this.dragnDrop=null),this.$el.is(".edit-mode")&&this.$el.removeClass("edit-mode").addClass("view-mode"),this.updateEmptyState()},onEditStateChange:function(){this.model.get("edit")?r.onReady(s.bind(this.enterEditMode,this)):this.leaveEditMode()},events:{structureChange:function(e){this.model.get("edit")&&this.updatePanelOrder(),this.updateEmptyState()},structureReset:function(e){this.resetDashboardStructure()&&this.updateDashboardStructure()},panelRemoved:function(e){this.onPanelRemoved(a(e.target))}},getChildContainer:function(){return this.$el},onPanelRemoved:function(e){e.trigger("cellRemoved"),this.updateEmptyState()},createNewRow:function(){var e=new p({});return e.render().$el.appendTo(this.$el),e},createNewPanel:function(e){var t=this.createNewRow(),i=new m(e);return i.render().$el.appendTo(t.getChildContainer()),s.defer(s.bind(this.updateEmptyState,this)),i},handleDialog:function(e){e.get("dialog")&&r.onViewModelLoad((function(){"schedulePDF"===e.get("dialog")&&(e.unset("dialog"),e.view.isForm()||this.openSchedulePDFDialog())}),this)},openSchedulePDFDialog:function(){var e=this.model;this.scheduledViewDfd.done((function(){var t=new b({model:{scheduledView:e.scheduledView,dashboard:e.view,application:e.app,appLocal:e.appLocal},onHiddenRemove:!0});a("body").append(t.render().el),t.show()}))},rowTemplate:'  <div class="dashboard-row">                            <div class="dashboard-cell" style="width: 100%;">                                <div class="dashboard-panel clearfix">                                    <div class="panel-element-row">                                        <div class="dashboard-element" id="<%= id %>" style="width: 100%">                                            <div class="panel-head"><h3><%- title %></h3></div>                                            <div class="panel-body"></div>                                        </div>                                    </div>                                </div>                            </div>                        </div>'})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dialog/addpanel/report":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("views/Base"),r=i("views/shared/controls/ControlGroup"),o=i("views/shared/controls/SearchTextareaControl"),l=i("splunkjs/mvc/utils"),d=i("util/time"),c=i("models/shared/Cron"),h=i("shim/splunk.util"),u=i("uri/route"),p=i("views/shared/Modal"),m=i("util/theme_utils");return a.extend({moduleId:n.i,initialize:function(){a.prototype.initialize.apply(this,arguments),this.children.reportPlaceholder=new a,this.controller=this.options.controller,this.controller.reportsCollection||this.controller.fetchCollection(),this.controller.reportsCollection.initialFetchDfd.done(s.bind((function(){var e=this.controller.reportsCollection.map((function(e){return{label:e.entry.get("name"),value:e.entry.get("name")}})),t=l.getPageInfo(),i=u.reports(t.root,t.locale,t.app);this.controller.reportsCollection.length===this.controller.reportsCollection.REPORTS_LIMIT?this.children.report=new r({label:"",controlType:"SyntheticSelect",controlOptions:{additionalClassNames:"add-panel-report",toggleClassName:"btn",model:this.model.report,modelAttribute:"savedSearchName",items:e,popdownOptions:this.options.popdownOptions||{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},help:s("This does not contain all reports. Add a report that is not listed from ").t()+h.sprintf("<a href=%s>%s</a>.",i,s("Reports").t())}):this.children.report=new r({label:"",controlType:"SyntheticSelect",controlOptions:{additionalClassNames:"add-panel-report",toggleClassName:"btn",model:this.model.report,modelAttribute:"savedSearchName",items:e,popdownOptions:this.options.popdownOptions||{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}}),this.model.report.get("savedSearchName")||this.model.report.set("savedSearchName",e[0].value)}),this)),this.children.searchField=new o({model:{content:this.model.report,user:this.model.user,application:this.model.application},collection:{searchBNFs:this.collection.searchBNFs},searchAttribute:"savedSearchString",syntaxHighlighting:m.getSearchEditorTheme(),readOnly:!0}),this.children.timerangeField=new r({controlType:"Label",controlOptions:{modelAttribute:"savedSearchTimerange",model:this.model.report},label:s("Time Range").t()}),this.children.schedule=new r({controlType:"Label",controlOptions:{modelAttribute:"savedSearchSchedule",model:this.model.report},label:s("Schedule").t()}),this.children.permissions=new r({controlType:"Label",controlOptions:{modelAttribute:"savedSearchPermissions",model:this.model.report},label:s("Permissions").t()}),this.model.report.set("savedSearchString","..."),this.listenTo(this.children.searchField,"runSearch",this.runSearch),this.listenTo(this.model.report,"change:elementCreateType",this.onModeChange,this),this.listenTo(this.model.report,"change:savedSearchName",this.searchSelected,this)},runSearch:function(){var e=this.model.report.get("savedSearchName");if(e){var t=l.getPageInfo(),i=u.search(t.root,t.locale,t.app,{data:{s:e}});l.redirect(i,!0)}},searchSelected:function(){var e=this.model.report.get("savedSearchName"),t=this.controller.reportsCollection.find((function(t){return t.entry.get("name")===e}));if(t){this.model.report.set("savedSearch",t.get("id")),this.model.report.set("savedSearchString",t.entry.content.get("search"));var i,n=t.entry.content.get("dispatch.earliest_time"),a=t.entry.content.get("dispatch.latest_time"),r="statistics";t.entry.content.has("display.general.type")&&(i=["display",r=t.entry.content.get("display.general.type"),"type"].join("."),t.entry.content.has(i)&&(r=[r,t.entry.content.get(i)].join(":"))),this.model.report.set("savedSearchVisualization",r),this.model.report.set("savedSearchTimerange",d.generateLabel(this.collection.timeRanges,n,null,a,null));var o=s("Never").t();if(t.entry.content.get("is_scheduled"))o=c.createFromCronString(t.entry.content.get("cron_schedule")).getScheduleString();this.model.report.set("savedSearchSchedule",o),this.model.report.set("savedSearchPermissions",h.sprintf(s("%s. Owned by %s.").t(),t.entry.acl.get("perms")?s("Shared").t():s("Not Shared").t(),t.entry.acl.get("owner")))}},onModeChange:function(){this.$el["saved"===this.model.report.get("elementCreateType")?"show":"hide"](),"saved"===this.model.report.get("elementCreateType")&&4!==this.controller.reportsCollection.initialFetchDfd.readyState&&0===this.$(p.LOADING_SELECTOR).length&&(this.$el.append(p.LOADING_HORIZONTAL),this.$(p.LOADING_SELECTOR).html(s("Loading...").t()))},render:function(){return this.children.reportPlaceholder.render().appendTo(this.el),this.controller.reportsCollection.initialFetchDfd.done(s.bind((function(){this.$(p.LOADING_SELECTOR).length>0&&this.$(p.LOADING_SELECTOR).remove(),this.children.report.render().appendTo(this.children.reportPlaceholder.el),this.searchSelected(),this.children.searchField.render().appendTo(this.el),this.children.searchField.$("textarea").attr("readonly","readonly"),this.children.timerangeField.render().appendTo(this.el),this.children.schedule.render().appendTo(this.el),this.children.permissions.render().appendTo(this.el),this.onModeChange()}),this)),this}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dialog/convertpanel":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("require/backbone"),r=i("views/shared/Modal"),o=i("views/shared/MultiStepModal"),l=i("models/services/data/ui/Panel"),d=i("views/Base"),c=i("views/shared/controls/TextControl"),h=(i("views/shared/delegates/PairedTextControls"),i("views/shared/FlashMessages")),u=i("views/shared/controls/ControlGroup"),p=i("util/splunkd_utils"),m=i("splunkjs/mvc/sharedmodels"),g=i("splunkjs/mvc/simplexml/serializer"),f=i("util/xml"),v=i("shim/splunk.util").sprintf,b=i("uri/route"),y=i("splunkjs/mvc/simplexml/controller"),_=d.extend({className:"step step-create",initialize:function(){d.prototype.initialize.apply(this,arguments),this.children.flashMessage=new h({model:{panel:this.model.panel}}),this.children.panelNameTextControl=new c({model:this.model.inmem,modelAttribute:"panelName"}),this.children.panelName=new u({label:s("ID").t(),controls:this.children.panelNameTextControl,tooltip:s("The ID is used as the filename on disk. Cannot be changed later.").t(),help:s("The prebuilt panel ID can only contain letters, numbers, dashes, and underscores. Do not start the prebuilt panel ID with a period.").t()}),this.children.panelPerm=new u({label:s("Permissions").t(),controlType:"SyntheticRadio",controlOptions:{additionalClassNames:"btn-group-2",items:[{value:"private",label:s("Private").t()},{value:"shared",label:this.model.user.canUseApps()?s("Shared in App").t():s("Shared").t()}],model:this.model.inmem,modelAttribute:"panelPerm"}})},render:function(){this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(s("Convert to Prebuilt Panel").t()),this.children.flashMessage.render().prependTo(this.$(r.BODY_SELECTOR)),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL);var e=this.$(r.BODY_FORM_SELECTOR);return this.children.panelName.render().appendTo(e),this.children.panelPerm.render().appendTo(e),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this},setSelected:function(e){this.$el[e?"addClass":"removeClass"]("active-step")},submit:function(){var e=this.model.inmem;this.createReferencePanel().then((function(){e.trigger("createSuccess")}))},createReferencePanel:function(){return new Promise(function(e){var t=this.model.inmem.get("panelStructure"),i=y.model.view.getCurrentStructureMap(),n=g.serializePanelStructure(t,{tokens:!0,structureMap:i}),s=f.serializeDashboardXML(n,!0);this.model.panel.entry.content.set("eai:data",s),this.model.panel.entry.content.set("name",this.model.inmem.get("panelName"));var a=this.model.app.getPermissions(this.model.inmem.get("panelPerm"));this.model.panel.save({},{data:a,success:function(){e()}})}.bind(this))},events:{"click .modal-btn-primary":function(e){this.submit(),e.preventDefault()}}}),w=d.extend({className:"step step-success",initialize:function(){d.prototype.initialize.apply(this,arguments)},updateContent:function(){var e=this.model.panel,t=this.model.app,i=t.get("root"),n=t.get("locale"),a=t.get("app"),o=b.managerPermissions(i,n,a,["data","ui","panels"],e.entry.get("name"),{data:{uri:e.id,return_to:b.editDashboard(i,n,a,t.get("page"))}});this.$(r.BODY_SELECTOR).html(this.compiledTemplate({msgHTML:v(s('You may now add your reference panel to other dashboards or refine <a href="%s">permissions</a>.').t(),o)}))},render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(s("Your Panel Has Been Created").t()),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn cancel btn-primary modal-btn-primary pull-right" data-dismiss="modal">'+s("OK").t()+"</a>"),this},setSelected:function(e){this.$el[e?"addClass":"removeClass"]("active-step")},template:'<p class="convert-panel-success-message"><%= msgHTML %></p>'});return o.extend({moduleId:n.i,initialize:function(e){o.prototype.initialize.apply(this,e);var t=e.panel;this.model={},this.model.panel=new l,this.model.inmem=new a.Model({panelPerm:"private",panelTitle:t.settings.get("title"),panelName:p.nameFromString(t.settings.get("title")),panelStructure:t.serializeStructure()}),this.model.user=m.get("user"),this.model.app=m.get("app"),this.model.serverInfo=m.get("serverInfo"),this.children.create=new _({model:{panel:this.model.panel,inmem:this.model.inmem,user:this.model.user,app:this.model.app,serverInfo:this.model.serverInfo}}),this.children.success=new w({model:{panel:this.model.panel,app:this.model.app}}),this.listenTo(this.model.inmem,"createSuccess",(function(){this.trigger("panelCreated",this.model.panel),this.children.success.updateContent(),this.stepViewStack.setSelectedView(this.children.success)}),this)},events:{"hidden.bs.modal":function(e){e.target===this.el&&(this.stepViewStack.remove(),this.remove())}},getStepViews:function(){return[this.children.create,this.children.success]}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/dragndrop":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/backbone"),n=i("require/underscore"),s=i("shim/jquery"),a=i("splunkjs/mvc/mvc"),r=i("util/console"),o=i("splunkjs/mvc/simplexml/controller"),l=i("splunkjs/mvc/simplexml/dashboard/row"),d=s.Deferred();document.createElement("div");return r.log("loading jquery ui sortable"),Promise.resolve().then(function(){var e=[i("shim/jquery.ui.sortable")];d.resolve.apply(null,e)}.bind(this)).catch(i.oe),t.View.extend({initialize:function(){n.bindAll(this,"updateRow")},render:function(){return d.done(this.startDragAndDrop.bind(this)),this},events:{"mouseover .drag-handle":function(e){s(e.target).parents(".dashboard-panel").addClass("drag-hover")},"mouseout .drag-handle":function(e){s(e.target).parents(".dashboard-panel").removeClass("drag-hover")},resetDragAndDrop:"restart"},startDragAndDrop:function(){this.delegateEvents(),this.$el.addClass("dragndrop-enabled"),n.defer(n.bind((function(){this.enablePanelDragAndDrop(),this.enableInputDragAndDrop()}),this))},getDragItemSize:function(){return Math.max(100,Math.min(s(window).width()/3,600))},enablePanelDragAndDrop:function(){var e,t=this,i=n.debounce(t.updateDimensions.bind(this),0),a=n(this.enablePanelDragAndDrop).bind(this),o=n.once((function(){if(r.log("sort STOP"),e){try{e.sortable("destroy")}catch(e){}n.defer(a),t.cleanupEmptyRows(),t.trigger("sortupdate"),e=null,s(window).trigger("resize"),t.$(".dashboard-row").trigger("panelVisibilityChanged")}}));this.createNewDropRow(),e=this.$(".dashboard-row").sortable({handle:".drag-handle",connectWith:this.$(".dashboard-row"),placeholder:{element:function(){return s('<div class="sortable-placeholder"><div class="dashboard-panel"></div></div>')},update:function(e,i){t.updateRow(i.parents(".dashboard-row"))}},tolerance:"pointer",cursorAt:{left:t.getDragItemSize()/2}}).on("sort",(function(e){i()})).on("sortupdate",(function(e){o()})).on("stop",(function(e){o()})),i(),s(window).trigger("resize")},enableInputDragAndDrop:function(){var e,t=this,i=n.once((function(){if(e){try{e.sortable("destroy")}catch(e){}n.defer((function(){t.enableInputDragAndDrop()})),t.trigger("sortupdate"),e=null}}));e=this.$(".fieldset.editable").sortable({handle:".drag-handle",connectWith:this.$(".fieldset.editable"),items:">.input",tolerance:"pointer",placeholder:{element:function(e){var t=s('<div class="input ui-sortable-placeholder"><div class="placeholder-inner"></div></div>'),i=e.height();return t.height(i-5),t.children().height(i-15),t[0]},update:function(){}},start:function(){s(".dashboard-body").addClass("form-drag"),s("#search_btn").hide()},stop:function(){s(".dashboard-body").removeClass("form-drag");var e=s("#search_btn");e.length&&e.appendTo(e.parent()).show(),o.trigger("formupdate")}}).on("sortupdate",i).on("stop",i)},destroy:function(){this.undelegateEvents(),this.$el.removeClass("dragndrop-enabled"),this.cleanupEmptyRows();try{this.$(".dashboard-row").sortable("destroy"),this.$(".fieldset").sortable("destroy")}catch(e){}this.updateDimensions()},restart:function(){this.destroy(),this.render()},updateRow:function(e){var t=s(e),i=t.children().not(".ui-sortable-helper"),n=String(Math.floor(1e4/i.not(".sortable-dragging").length)/100)+"%";i.css({width:n}),t.children(".ui-sortable-helper").css({width:this.getDragItemSize()})},updateDimensions:function(){n(this.$(".dashboard-row")).each(this.updateRow)},createNewDropRow:function(){this.cleanupEmptyRows(),n(this.$(".dashboard-row")).each((function(e){(new l).render().$el.insertAfter(e)}));var e=this.$(".dashboard-row").first();e&&(new l).render().$el.insertBefore(e)},cleanupEmptyRows:function(){n(this.$(".dashboard-row")).chain().map((function(e){return s(e).attr("id")})).map(n.bind(a.Components.get,a.Components)).invoke("removeIfEmpty"),this.$(".dashboard-row.empty").removeClass("empty")},getItemOrder:function(){return n(this.$(".dashboard-row")).map((function(e){return n(s(e).find(".dashboard-panel")).map((function(e){return n(s(e).find(".dashboard-element")).map((function(e){return s(e).attr("id")}))}))}))}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/editdashboard/master":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("require/backbone"),r=i("views/Base"),o=i("models/search/Dashboard"),l=i("models/ACLReadOnly"),d=i("collections/services/authorization/Roles"),c=i("views/dashboard/header/EditMenu"),h=i("views/shared/documentcontrols/dialogs/permissions_dialog/Master"),u=i("views/dashboards/table/controls/CloneDashboard"),p=(i("views/dashboards/table/controls/SchedulePDF"),i("views/shared/dialogs/TextDialog")),m=(i("splunkjs/mvc/simplexml/serializer"),i("helpers/Printer")),g=i("shim/splunk.util"),f=i("splunkjs/mvc/utils"),v=i("uri/route"),b=(i("splunkjs/mvc"),i("util/pdf_utils"),i("util/jquery_polyfills"));return r.extend({className:"splunk-dashboard-controls",initialize:function(){r.prototype.initialize.apply(this,arguments),this.rolesCollection=new d,this.rolesCollection.fetch(),this._mockController=new a.Model,this.children.menuView=new c({model:{controller:this._mockController,view:this.model.dashboard,application:this.model.application,scheduledView:this.model.scheduledView,serverInfo:this.model.serverInfo,user:this.model.state.user,userPref:this.model.userPref},collection:{apps:this.collection.appLocalsUnfiltered}}),this._handleControllerEvent()},render:function(){return this.$el.append(this.children.menuView.render().el),this},_handleControllerEvent:function(){this.stopListening(this._mockController),this.listenTo(this._mockController,"all",(function(e){switch(e){case"action:export-pdf":case"action:schedule-pdf":case"action:make-home":this.model.userPref.entry.content.set({"display.page.home.dashboardId":this.model.dashboard.get("id")}),this.model.userPref.save({},{success:function(){window.location.href=v.home(this.model.application.get("root"),this.model.application.get("locale"))}.bind(this)});break;case"action:edit-permission":this.children.permissionsDialog=new h({model:{document:this.model.dashboard,nameModel:this.model.dashboard.entry.content,user:this.model.state.user,serverInfo:this.model.serverInfo},collection:this.rolesCollection,nameLabel:"Dashboard",nameKey:"label",onHiddenRemove:!0}),document.body.appendChild(this.children.permissionsDialog.render().el),this.children.permissionsDialog.show();break;case"action:clone":var t=new o;t.fetch({success:function(){"html"===this.model.dashboard.entry.content.get("eai:type")?t.setHTML(this.model.dashboard.entry.content.get("eai:data")):t.setXML(this.model.dashboard.entry.content.get("eai:data")),t.meta.set(this.model.dashboard.meta.toJSON());var e=this.children.cloneDialog=new u({model:{dashboard:t,acl:new l(b.deepExtend({},this.model.dashboard.entry.acl.toJSON())),application:this.model.application,appLocal:this.model.state.appLocal,state:this.model.state,user:this.model.state.user,serverInfo:this.model.serverInfo},collection:{roles:this.rolesCollection},onHiddenRemove:!0});document.body.appendChild(e.render().el),e.show()}.bind(this)});break;case"action:delete":var i=new p({id:"modal-delete-dashboard"});i.dialogShown=function(){this.trigger("show"),s.debounce(function(){this.$(".btn-primary:first").focus()}.bind(this),0)()},i.settings.set("primaryButtonLabel",s("Delete").t()),i.settings.set("cancelButtonLabel",s("Cancel").t()),i.settings.set("titleLabel",s("Delete Dashboard").t()),i.setText(g.sprintf(s("Are you sure you want to delete %s?").t(),"<em>"+s.escape(""!==this.model.state.get("label")?this.model.state.get("label"):this.model.dashboard.entry.get("name"))+"</em>")),i.render().appendTo(document.body),i.once("click:primaryButton",(function(){this.model.dashboard.destroy().done((function(){var e=f.getPageInfo();f.redirect(v.page(e.root,e.locale,e.app,"dashboards"))}))}),this),i.on("hidden",(function(){i.remove()}),this),i.show();break;case"action:print":m.printPage();break;case"mode:edit":var n=this.model.application.toJSON();f.redirect(v.manager(n.root,n.locale,n.app,["data","ui","views",n.page],{data:{action:"edit",ns:n.app,redirect_override:v.page(n.root,n.locale,n.app,n.page)}}))}}))}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/base":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("shim/jquery"),s=i("require/backbone"),a=i("splunkjs/mvc/basesplunkview"),r=i("splunkjs/mvc"),o=i("splunkjs/mvc/utils"),l=i("splunkjs/mvc/simplexml/controller"),d=i("models/dashboards/DashboardReport"),c=i("util/console"),h=i("splunkjs/mvc/progressbarview"),u=i("splunkjs/mvc/refreshtimeindicatorview"),p=i("splunkjs/mvc/resultslinkview"),m=i("splunkjs/mvc/simplexml/paneleditor"),g=i("splunkjs/mvc/savedsearchmanager"),f=i("splunkjs/mvc/postprocessmanager"),v=i("splunkjs/mvc/messages"),b=i("util/general_utils"),y=i("splunkjs/mvc/simplexml/dashboard/titleeditor"),_=i("splunkjs/mvc/simplexml/dashboard/tokendeps"),w=i("splunkjs/mvc/sharedmodels"),k={},T=(new d).fetch(),S=s.View.extend({className:"panel-head",initialize:function(e){s.View.prototype.initialize.apply(this,arguments),this.parent=e.parent},remove:function(){return this.parent=null,s.View.prototype.remove.apply(this,arguments)}}),C=S.extend({editMode:!1,initialize:function(e){S.prototype.initialize.apply(this,arguments),this.listenTo(this.parent.settings,"change:title",this.updateTitle)},updateTitle:function(){var e=this.$el.children("h3"),t=n.trim(this.parent.settings.get("title"));t?(e.length||(e=n("<h3 />").appendTo(this.$el)),e.text(t)):e.remove()},render:function(){return this.progressBar||(this.progressBar=new h({id:t.uniqueId(this.parent.id+"-progressbar"),manager:this.parent.settings.get("managerid"),el:n('<div class="progress-container pull-right"></div>')}).render().$el.appendTo(this.$el)),this.updateTitle(),this},remove:function(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null),S.prototype.remove.call(this)}}),E=S.extend({editMode:!0,initialize:function(){S.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"editTitle",this.focusTitleEditor)},render:function(){return this.progressBar||(this.progressBar=new h({id:t.uniqueId(this.parent.id+"-progressbar"),manager:this.parent.settings.get("managerid"),el:n('<div class="progress-container pull-right"></div>')}).render().$el.appendTo(this.$el)),this.createPanelElementEditor(),this.createTitleEditor(),this},createPanelElementEditor:function(){this.removePanelElementEditor(),this.panelEditor=new m({manager:this.parent.managerid,model:{report:this.model}}),this.$el.prepend(this.panelEditor.render().el)},removePanelElementEditor:function(){this.panelEditor&&(this.panelEditor.remove(),this.panelEditor=null)},createTitleEditor:function(){this.removeTitleEditor(),this._titleEditor=new y({model:this.model.entry.content,attribute:"display.general.title"}),this.listenTo(this._titleEditor,"update",this.saveTitle);var e=this.$("h3");e.length||(e=n("<h3 />").appendTo(this.$el)),this._titleEditor.render().$el.appendTo(e)},focusTitleEditor:function(){this._titleEditor.focus()},removeTitleEditor:function(){this._titleEditor&&(this.stopListening(this._titleEditor),this._titleEditor.remove(),this._titleEditor=null)},saveTitle:function(){this.model.saveXML()},remove:function(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null),this.removeTitleEditor(),this.removePanelElementEditor(),S.prototype.remove.call(this)}});return a.extend(t.extend({},_,{initialVisualization:"#abstract",configure:function(){this.options.settingsOptions=t.extend({retainUnmatchedTokens:!0},this.options.settingsOptions||{}),this.options=t.defaults(this.options,{id:this.id,manager:this.options.managerid,title:this.$el.children(".panel-head:first").children("h3").text().trim(),editable:!0}),a.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.visualization=null,this.model=new d,this.managerid=this.options.managerid,this.settings._sync=o.syncModels(this.settings,this.model.entry.content,{auto:!0,prefix:"display.general.",include:["id","title","manager","managerid","tokenDependencies"]}),this.bindToComponent(this.managerid,this.onManagerChange,this);var e=this.typeModel=new s.Model({type:this.initialVisualization});this.reportReady=n.Deferred(),this.listenTo(this.typeModel,"change",this.createVisualization,this),this.options.noEdit||(this.listenTo(l.getStateModel(),"change:edit",this.onEditModeChange,this),this.listenTo(this.settings,"change:editable",this.onEditModeChange,this)),this.reportReady.done(t.bind((function(){this.listenTo(this.model.entry.content,"change:display.general.type change:display.visualizations.type change:display.events.type",(function(t){var i=t.get("display.general.type"),n=["display",i,"type"].join("."),s=t.get(n),a=s?[i,s].join(":"):i;e.set("type",k.hasOwnProperty(a)?a:i)}),this),this.listenTo(this.model,"removedPanel",this.remove,this)}),this)),this.setupTokenDependencies()},remove:function(){this.removeRefreshTimeIndicator(),this._removeVisualization(),this.removePanelHead(),this.stopListeningToTokenDependencyChange(),this.settings&&this.settings._sync&&this.settings._sync.destroy();var e=this.$el.parent();a.prototype.remove.call(this),e.trigger("elementRemoved")},onManagerChange:function(e,i){var n=this;if(i instanceof g){var s=i.get("searchname"),a=l.getStateModel().app,r=!this.model.entry.content.has("display.general.type");this.model.id=["","servicesNS",encodeURIComponent(a.get("owner")),encodeURIComponent(a.get("app")),"saved","searches",encodeURIComponent(s)].join("/"),this.model.fetch({tokens:!1}).done((function(){r&&n.model.entry.content.set(n._initialVisualizationToAttributes()),n.reportReady.resolve(n.model)})).fail((function(e){c.error("Failed to load saved search",arguments),404===e.status&&n.showErrorMessage(t("Warning: saved search not found: ").t()+'"'+t.escape(s)+'"')}))}else i?T.done((function(e){n.model.entry.content.has("display.general.type")||(n.model.entry.content.set(e.entry[0].content,{tokens:!1}),"#abstract"!==n.initialVisualization&&n.model.entry.content.set(n._initialVisualizationToAttributes()));var t="inline";i instanceof f?(t="postprocess",n.model.entry.content.set("display.general.search.fullSearch",i.settings.resolve({tokens:!0}),{tokens:!0}),n.model.entry.content.set("display.general.search.base",i.settings.get("managerid")),n.model.entry.content.set("display.general.search.postProcessSearch",i.settings.postProcessResolve({tokens:!0}),{tokens:!0})):i.has("metadata")&&i.get("metadata").global&&(t="global"),n.model.entry.content.set("display.general.search.type",t),n.model.entry.content.set({search:i.get("search",{tokens:!0}),"dispatch.earliest_time":i.get("earliest_time",{tokens:!0}),"dispatch.latest_time":i.get("latest_time",{tokens:!0})},{tokens:!0});var s=i.get("sample_ratio",{tokens:!0});null!=s&&1!=s&&n.model.entry.content.set("dispatch.sample_ratio",s,{tokens:!0}),n.reportReady.resolve(n.model)})):T.done((function(e){n.model.entry.content.has("display.general.type")||(n.model.entry.content.set(e.entry[0].content,{tokens:!1}),"#abstract"!==n.initialVisualization&&n.model.entry.content.set(n._initialVisualizationToAttributes())),n.reportReady.resolve(n.model)}))},showErrorMessage:function(e){this._removeInitialPlaceholder();var t=this.$(".panel-body>.msg");t.length||(t=n('<div class="msg"></div>').appendTo(this.$(".panel-body"))),v.render({level:"error",icon:"warning-sign",message:e},t)},_initialVisualizationToAttributes:function(){var e=this.initialVisualization.split(":"),t={"display.general.type":e[0]};return e.length>1&&(t[["display",e[0],"type"].join(".")]=e[1]),t},onEditModeChange:function(e){var i=this._debouncedOnEditModeChange;i||(i=this._debouncedOnEditModeChange=t.debounce(t.bind(this._onEditModeChange,this),0)),this.reportReady.done((function(){i(e)}))},removePanelHead:function(){this.panelHead&&(this.panelHead.remove(),this.panelHead=null),this.$el.children(".panel-head").remove()},isEditMode:function(){return l.isEditMode()&&this.settings.get("editable")},_onEditModeChange:function(){this.updatePanelHead(),this.isEditMode()?this.$el.is(".hidden")&&this.$el.show().parents(".dashboard-panel").trigger("elementVisibilityChanged"):(this.$el.is(".hidden")&&this.$el.hide().parents(".dashboard-panel").trigger("elementVisibilityChanged"),this._resizeVisualization())},_resizeVisualization:function(){this.getVisualization((function(e){"function"==typeof e.resizeChart&&e.resizeChart()}))},updatePanelHead:function(){var e=this.isEditMode();if(!this.panelHead||this.panelHead.editMode!==e){this.removePanelHead();var t=e?E:C;this.panelHead=new t({parent:this,model:this.model,settings:this.settings}),this.panelHead.render().$el.prependTo(this.$el)}},hide:function(){this.$el.is(".hidden")||(this.isEditMode()||this.$el.hide(),this.$el.addClass("hidden").parents(".dashboard-panel").trigger("elementVisibilityChanged"))},show:function(){this.$el.is(".hidden")&&(this.$el.show().removeClass("hidden").parents(".dashboard-panel").trigger("elementVisibilityChanged"),this.visualization&&this.visualization.render())},createRefreshTimeIndicator:function(){this.removeRefreshTimeIndicator();var e=this.settings.get("refresh.time.visible"),i=void 0===e||b.normalizeBoolean(e,{default:!1}),s=this.settings.get("refresh.auto.interval");this.refreshTime||!i&&!s||(this.refreshTime=new u({id:t.uniqueId(this.id+"-refreshtime"),el:n('<div class="refresh-time-indicator pull-right"></div>'),manager:this.managerid,"refresh.auto.interval":this.settings.get("refresh.auto.interval"),"refresh.time.visible":this.settings.get("refresh.time.visible")}).render().$el.appendTo(this.$(".panel-footer")))},removeRefreshTimeIndicator:function(){this.refreshTime&&this.refreshTime.remove()},createVisualization:function(e){var i=this._debouncedCreateViz;i||(i=this._debouncedCreateViz=t.debounce(t.bind(this._createVisualization,this),0)),n.when(this.reportReady,w.load("visualizations")).then((function(){i(!0===e)}))},_removeVisualization:function(){this.visualization&&(this.visualization.panelClassName&&this.$el.removeClass(this.visualization.panelClassName),this.visualization.off(),this.visualization.remove(),this.visualization=null),this.resultsLink&&(this.resultsLink.off(),this.resultsLink.remove(),this.resultsLink=null)},_removeInitialPlaceholder:function(){this.$(".panel-body > .msg, .panel-body > .initial-placeholder").remove()},_createVisualization:function(e){var i=!this.visualization;this._removeInitialPlaceholder(),this._removeVisualization();var s=this.typeModel.get("type"),a=k[s];if(a){var o={el:n("<div></div>").appendTo(this.$(".panel-body")),reportModel:this.model.entry.content,managerid:this.settings.get("manager"),id:t.uniqueId(this.id+"-viz-"),forceNormalizeSettings:!0};if((i||e)&&(o=t.extend({},this.options,o)),o.settingsOptions&&(o.settingsOptions.retainUnmatchedTokens=!1),this.visualization=new a(o).render(),this.visualization.panelClassName&&this.$el.addClass(this.visualization.panelClassName),0===s.indexOf("events"))r.Components.getInstance(this.settings.get("manager")).settings.set("status_buckets",300);this.trigger("create:visualization",this.visualization),i&&this.model.entry.content.set(t.defaults(this.model.entry.content.toJSON({tokens:!0}),this.visualization.reportDefaults)),this.resultsLink=new p(t.extend({},this.options,{id:t.uniqueId(this.id+"-resultslink"),el:n('<div class="view-results pull-left"></div>').appendTo(this.$(".panel-footer")),manager:this.managerid,model:this.model})).render(),this.visualization.on("all",this.trigger,this)}else this.showErrorMessage(t("Unsupported visualization type: ").t()+JSON.stringify(s))},getVisualizationType:function(){return this.typeModel.get("type")},getVisualization:function(e){var t=n.Deferred();return e&&t.done(e),this.visualization?t.resolve(this.visualization):this.once("create:visualization",t.resolve,t),t.promise()},render:function(){return this.createPanelStructure(),this.createRefreshTimeIndicator(),this.createVisualization(),this.options.noEdit||this.onEditModeChange(l.getStateModel()),this},createPanelStructure:function(){var e=this.$el.children(".panel-body");e.length||(e=n('<div class="panel-body"></div>').appendTo(this.$el)),n('<div class="initial-placeholder"></div>').addClass("placeholder-"+this.initialVisualization.replace(/\W+/,"-")).appendTo(e),this.$el.children(".panel-footer").length||n('<div class="panel-footer"></div>').appendTo(this.$el)},getExportParams:function(e){var t=r.Components.get(this.managerid),i={};return!t||t instanceof f||!t.hasJob()||(i[e]=t.getSid()),i},componentReady:function(){var e=null==this.settings.get("managerid")?n.Deferred().resolve():this.reportReady,t=this.getVisualization();return n.when(e,t)}}),{registerVisualization:function(e,t){k[e]=t},getVisualization:function(e){var t=k[e];return t||(t=k[e.split(":")[0]]),t}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/chart":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=(i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc"),i("splunkjs/mvc/simplexml/element/base")),s=i("splunkjs/mvc/chartview"),a=i("splunkjs/mvc/simplexml/mapper"),r=(i("util/console"),i("splunkjs/mvc/drilldown"));a.register("visualizations:charting",a.extend({tagName:"chart",map:function(e,i,n){t(e.toJSON(n)).each((function(t,s){"display.visualizations.charting."===s.substring(0,"display.visualizations.charting.".length)&&(i.options[s.substring("display.visualizations.".length)]=e.get(s,n))})),n["charting.drilldown"]=r.getNormalizedDrilldownType(n["charting.drilldown"]||n.drilldown,{allowBoolean:!0}),delete n.drilldown,i.removeOptions=["drilldown"]}}));var o=s.extend({panelClassName:"chart",reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"charting","display.general.type":"visualizations"},options:t.defaults({resizable:!0},s.prototype.options)});return n.registerVisualization("visualizations:charting",o),n.registerVisualization("visualizations",o),n.extend({initialVisualization:"visualizations:charting"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/event":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=(i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc"),i("splunkjs/mvc/simplexml/element/base")),s=i("splunkjs/mvc/eventsviewerview"),a=i("splunkjs/mvc/simplexml/mapper"),r=(i("util/console"),i("shim/splunk.util")),o=a.extend({tagName:"event",map:function(e,i,n){i.options.count=e.get("display.prefs.events.count",n),t(e.toJSON(n)).each((function(s,a){if(0===a.indexOf("display.events.")){var r=e.get(a,n);t.isArray(r)&&(r=JSON.stringify(r)),i.options[a.substring("display.events.".length)]=null!=r?String(r):null}})),i.options["table.drilldown"]&&(i.options["table.drilldown"]=r.normalizeBoolean(i.options["table.drilldown"])?"all":"none"),i.removeOptions=["drilldown","segmentation"]}});a.register("events",o),a.register("events:raw",o),a.register("events:list",o),a.register("events:table",o);var l=s.extend({panelClassName:"event",reportDefaults:{"display.general.type":"events","display.prefs.events.count":10}});return n.registerVisualization("events",l),n.registerVisualization("events:raw",l),n.registerVisualization("events:list",l),n.registerVisualization("events:table",l),n.extend({initialVisualization:"events"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/html":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("shim/jquery"),s=(i("splunkjs/mvc"),i("splunkjs/mvc/utils")),a=i("splunkjs/mvc/simplexml/element/base"),r=i("splunkjs/mvc/simplexml/controller"),o=i("splunkjs/mvc/tokenutils"),l=i("shim/splunk.util"),d=i("splunkjs/mvc/sharedmodels"),c=i("uri/route"),h=i("splunkjs/mvc/simplexml/mapper"),u=i("splunkjs/mvc/tokenawaremodel"),p=i("splunkjs/mvc/messages"),m=i("util/console");h.register("html",h.extend({toXML:function(e,i){var n={type:"html",attributes:{tokens:e.get("useTokens")}},s=e.get("serverSideInclude");return s&&!0!==i.flatten?t.extend(n,{attributes:{src:s},content:null}):t.extend(n,{content:e.get("html",i)})}}));var g={a:"href",iframe:"src",img:"src"};return a.extend({options:{serverSideInclude:void 0,html:void 0,useTokens:!0},configure:function(){this.options.settingsOptions=t.extend({tokenEscaper:o.getEscaper("html"),allowNoEscape:!1},this.options.settingsOptions||{}),a.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.model=new u({},{retainUnmatchedTokens:!0,tokenEscaper:o.getEscaper("html")}),s.syncModels(this.settings,this.model,{include:["html","serverSideInclude","tokenDependencies","useTokens"],auto:"push"}),this.reportReady=n.Deferred().resolve(this.model),this.contentLoadedDfd=n.Deferred(),this.listenTo(this.settings,"change:serverSideInclude",this.getStaticFile),this.settings.has("serverSideInclude")?t.defer(t.bind(this.getStaticFile,this)):this._checkExistingMarkup=!0,this.listenTo(r.getStateModel(),"change:edit",this.onEditModeChange,this),this.listenTo(this.model,"change:html change:error",this.render),this.setupTokenDependencies()},updatePanelHead:function(){this.$(".panel-head").remove(),r.isEditMode()&&n('<div class="panel-head"><h3><span class="untitled">HTML Panel</span></h3></div>').prependTo(this.$el)},getVisualizationType:function(){return"html"},getStaticFile:function(){var e=this.settings.get("serverSideInclude");if(e){var i=d.get("app").toJSON(),s=c.appStaticFile(i.root,i.locale,this.settings.get("app")||i.app,e),a=this.model,r=this.settings.get("useTokens");a.unset({html:void 0,error:void 0});var o=this.contentLoadedDfd;/^https?:/.test(e)||/(^|\/)\.\.\//.test(e)||/^\//.test(e)?(a.set("error",t("Error loading HTML panel content: Invalid src attribute value specified.").t()),o.resolve()):(m.log("Loading static asset %s (url=%s) for HTML panel",e,s),n.ajax({dataType:"html",type:"GET",url:s,error:function(i){a.set("error",404===i.status?l.sprintf(t('Error loading HTML panel content: HTML file "%s" not found.').t(),e):l.sprintf(t("Error loading HTML panel content: Error loading HTML file (HTTP status %d).").t(),i.statusCode)),o.resolve()},success:function(e){""!==e&&a.set({error:void 0,html:e},{tokens:r}),o.resolve()}}))}},normalizeLinks:function(e){t(g).each((function(t,i){var s=l.sprintf("%s[%s]",i,t);e.find(s).each((function(){var e=n(this),i=e.attr(t);i&&"/"===i[0]&&"/"!==i[1]&&e.attr(t,l.make_url(i))}))}))},loadExistingMarkup:function(e){this.settings.set("html",n.trim(e.html()),{tokens:this.settings.get("useTokens")}),this.contentLoadedDfd.resolve()},render:function(){this.$el.is(":empty")&&this.$el.html('<div class="panel-body"></div>'),this.$el.addClass("html");var e=this.$el.children(".panel-body");return e.addClass("html"),this._checkExistingMarkup&&(this._checkExistingMarkup=!1,this.settings.has("html")||this.loadExistingMarkup(e)),this.model.has("error")?p.render({icon:"warning-sign",level:"error",message:this.model.get("error")},e):this.model.has("html")&&(e.html(this.model.get("html")),this.normalizeLinks(e)),this.onEditModeChange(r.getStateModel()),this},getExportParams:function(){return{}},contentLoaded:function(){return this.contentLoadedDfd.promise()},componentReady:function(){return n.Deferred().resolve()}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/list":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=(i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc"),i("splunkjs/mvc/simplexml/element/base")),s=i("util/console");return n.extend({initialVisualization:"statistics",constructor:function(e){return t.extend(e,{displayRowNumbers:!1,fields:[e.labelField||"",e.valueField||""],sortKey:e.initialSort||e.labelField,sortDirection:e.initialSortDir||"asc"}),s.log("[%o] Creating table with options: %o",e.id,e),n.prototype.constructor.call(this,e)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/map":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=(i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc"),i("splunkjs/mvc/simplexml/element/base")),s=i("splunkjs/mvc/splunkmapview"),a=i("splunkjs/mvc/simplexml/mapper"),r=(i("util/console"),i("splunkjs/mvc/drilldown"));a.register("visualizations:mapping",a.extend({tagName:"map",map:function(e,i,n){t(e.toJSON()).each((function(t,s){0===s.indexOf("display.visualizations.mapping.")&&(i.options[s.substring("display.visualizations.".length)]=e.get(s,n))})),(n||{}).pdf||delete i.options["mapping.data.bounds"],i.options["mapping.drilldown"]&&(i.options.drilldown=r.getNormalizedDrilldownType(i.options["mapping.drilldown"],{allowBoolean:!0}),delete i.options["mapping.drilldown"])}}));var o=s.extend({panelClassName:"map",options:t.defaults({resizable:!0},s.prototype.options),reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"mapping","display.general.type":"visualizations"}});return n.registerVisualization("visualizations:mapping",o),n.extend({initialVisualization:"visualizations:mapping"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/single":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("splunkjs/mvc/simplexml/element/base"),s=i("splunkjs/mvc/singleview"),a=i("splunkjs/mvc/simplexml/mapper"),r=i("util/console"),o=i("splunkjs/mvc/drilldown");a.register("visualizations:singlevalue",a.extend({tagName:"single",map:function(e,i,n){var s="display.visualizations.singlevalue.";r.log(e.toJSON(n)),t(e.toJSON(n)).each((function(e,t){t.substring(0,s.length)===s&&(i.options[t.substring(s.length)]=e)})),r.log("single export options: ",i.options),i.options.drilldown=o.getNormalizedDrilldownType(i.options.drilldown,{default:"none"})}}));var l=s.extend({panelClassName:"single",reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"singlevalue","display.general.type":"visualizations"},options:t.defaults({resizable:!0},s.prototype.options)});return n.registerVisualization("visualizations:singlevalue",l),n.extend({initialVisualization:"visualizations:singlevalue"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/table":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=(i("splunkjs/mvc"),i("splunkjs/mvc/simplexml/element/base")),s=i("splunkjs/mvc/tableview"),a=(i("util/console"),i("splunkjs/mvc/simplexml/mapper")),r=i("shim/splunk.util"),o=i("splunkjs/mvc/drilldown"),l=a.extend({tagName:"table",map:function(e,i,n){t(e.toJSON(n)).each((function(t,s){"display.statistics.format."===s.substring(0,"display.statistics.format.".length)&&(i.options[s.substring("display.statistics.".length)]=e.get(s,n))})),i.options.wrap=String(r.normalizeBoolean(e.get("display.statistics.wrap",n))),i.options.rowNumbers=String(r.normalizeBoolean(e.get("display.statistics.rowNumbers",n))),i.options.dataOverlayMode=e.get("display.statistics.overlay",n),i.options.totalsRow=String(r.normalizeBoolean(e.get("display.statistics.totalsRow",n))),i.options.percentagesRow=String(r.normalizeBoolean(e.get("display.statistics.percentagesRow",n))),i.options.drilldown=o.getNormalizedDrilldownType(e.get("display.statistics.drilldown",n),{validValues:["cell","row","none"],default:"row",aliasMap:{all:"cell",off:"none"}}),i.options.count=e.get("display.prefs.statistics.count",n),i.options.labelField=null,i.options.valueField=null;var s=e.get("display.statistics.fields",n);i.tags.fields=t.isArray(s)?t.isEmpty(s)?null:JSON.stringify(s):"[]"===s?null:s,i.sparkline=e.get("display.statistics.sparkline.format",n)}});a.register("statistics",l);var d=s.extend({panelClassName:"table",prefix:"display.statistics.",reportDefaults:{"display.general.type":"statistics","display.prefs.statistics.count":10,"display.statistics.drilldown":"cell"}});return n.registerVisualization("statistics",d),n.extend({initialVisualization:"statistics"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/element/visualization":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=(i("splunkjs/mvc"),i("splunkjs/mvc/simplexml/element/base")),s=i("splunkjs/mvc/visualizationview"),a=i("splunkjs/mvc/simplexml/mapper");a.register("visualizations:custom",a.extend({tagName:"viz",map:function(e,i,n){var s=e.get("display.visualizations.custom.type"),a="display.visualizations.custom.",r=a+s+".";t(e.toJSON(n)).each((function(t,s){s.substring(0,r.length)===r&&(i.options[s.substring(a.length)]=e.get(s,n))})),i.attributes=t.extend({type:s},i.attributes)}}));var r=s.extend({panelClassName:"viz",reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"custom","display.general.type":"visualizations"},options:t.defaults({resizable:!0},s.prototype.options)});return n.registerVisualization("visualizations:custom",r),n.extend({initialVisualization:"visualizations:custom"})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/eventhandler":function(e,t,i){var n,s;n=[i(0),i("shim/jquery"),i("require/underscore"),i("splunkjs/mvc"),i("splunkjs/mvc/basemanager"),i("splunkjs/mvc/basesplunkview"),i("splunkjs/mvc/components/UrlWarningModal"),i("splunkjs/mvc/settings"),i("splunkjs/mvc/tokenutils"),i("splunkjs/mvc/utils"),i("shim/splunk.util"),i("services/WebFeatures"),i("util/eval"),i("util/console"),i("util/react_render"),i("util/dashboard_utils")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g){var f=s.extend({componentIdSetting:"viewid",initialize:function(e){if(!e.event)throw new Error("No event name specified for event handler instance");if(e.actions&&!e.conditions)if(e.allowImplicitConditions){var t=e.allowImplicitConditions,n=[],s=[];i(e.actions).each((function(e){if(i(t.actions).contains(e.type)){var a=i(t.attributes).find((function(t){return null!=e[t]}));if(a)return void n.push({attr:t.attr,value:e[a],actions:[e]})}s.push(e)})),s.length>0&&n.push({value:"*",actions:s}),e.conditions=n}else e.conditions=[{value:"*",actions:e.actions}];this.settings=new o(i.pick(e,this.componentIdSetting,"event","conditions","target")),this.normalizeEventName(),this.listenTo(this.settings,"change:event",this.normalizeEventName),this.bindToComponentSetting()},normalizeEventName:function(){},bindToComponentSetting:function(){this.settings.has(this.componentIdSetting)&&this.bindToComponent(this.settings.get(this.componentIdSetting)),this.listenTo(this.settings,"change:"+this.componentIdSetting,this.bindToComponent)},bindToComponent:function(){var e=this.settings.get(this.componentIdSetting);this.listenTo(n.Components,"change:"+e,this.onComponentChange);var t=n.Components.get(e);t&&this.onComponentChange(null,t)},onComponentChange:function(e,t){this._component&&this.stopListening(this._component),t&&(this._component=t,this.listenTo(t,this.settings.get("event"),this.handleEvent))},handleEvent:function(e){var t=this.settings.get("conditions");if(e&&t&&t.length){var n=i(t).find(i.partial(i.bind(this.conditionMatches,this),i,e));if(n){var s=e.data,a=e.event&&e.event.originalEvent?e.event.originalEvent:null;i.isFunction(e.preventDefault)&&e.preventDefault(),i(n.actions).each(i.partial(i.bind(this.executeAction,this),i,s,a))}}},conditionMatches:function(e,t){return"match"===e.attr?f.evaluateCondition(e.value,t.data):"*"===e.value||(i.isArray(t[e.attr])?this.arrayMatch(t[e.attr],e.value):t[e.attr]===e.value)},arrayMatch:function(e,t){var n=i.map((t||"").split(","),(function(e){return e.trim()}));return i.isEqual(i.clone(e).sort(),n.sort())},executeAction:function(e,t,i){var n=this.settings.get("target");switch(e.type){case"set":return f.setToken(e.token,e.value,e,t,e.submit);case"unset":return f.unsetToken(e.token,e.submit);case"link":var s=i&&!(!i.metaKey&&!i.ctrlKey);return f.linkTo.call(this,e.value,e.target||n,t,s);case"eval":return f.evalToken(e.token,e.value,t,e.submit);default:throw new Error("Invalid drilldown action type "+JSON.stringify(e.type))}}},{setToken:function(e,t,n,s,a){var r;if(null!=n.delimiter&&i.isArray(s))r=i(s).map((function(e){var i=f.getTokenModel(e);return l.replaceTokenNames(t||"",i)})).join(n.delimiter);else{i.isArray(s)&&(s=i.first(s));var o=f.getTokenModel(s);r=l.replaceTokenNames(t||"",o)}null==n.prefix&&null==n.suffix||(r=(n.prefix||"")+r+(n.suffix||"")),f.applyTokenValue(e,r,a)},evalToken:function(e,t,i,n){try{f.applyTokenValue(e,f.evaluate(t,i),n)}catch(e){p.error("Error executing eval expression %s: %s",t,e)}},applyTokenValue:function(e,t,i){i=!1!==i;var s=n.Components.get("default"),a=n.Components.get("submitted");s.set(e,t),i&&a&&a.set(e,t)},unsetToken:function(e,t){t=!1!==t;var i=n.Components.get("default"),s=n.Components.get("submitted");i.unset(e),t&&s&&s.unset(e)},linkTo:function(i,n,s,a){var o=l.replaceTokenNames(i,f.getTokenModel(s),l.getEscaper("url"),f.getTokenFilters());f.isServerRelativeURL(o)?d.redirect(c.make_url(o),a,n):f.isAbsoluteURL(o)||f.isProtocolRelativeURL(o)||!f.isEditMode()?f.isAbsoluteURL(o)&&"true"!==sessionStorage.getItem(o)?h.default.getFeatureSettings("dashboards_csp").then(i=>{if(!1===i.enable_dashboards_redirection_restriction||f.isTrustedExternalURL(o,i))d.redirect(o,a,n);else{var s=document.activeElement,l=()=>{this.unmountUrlWarningModal&&this.unmountUrlWarningModal(),s.focus()},h=e.createElement(r,{url:o,onConfirm(){c.trackEvent({type:"dashboard.interact",data:{type:"urlWarningModal",action:"continue"}}),l(),d.redirect(o,a,n)},onRequestClose(){c.trackEvent({type:"dashboard.interact",data:{type:"urlWarningModal",action:"cancel"}}),l()},onAddUrlToAllowList(){sessionStorage.setItem(o,"true")}});this.unmountUrlWarningModal=m(h,t('<div class="url-warning-modal"/>')[0])}}):d.redirect(o,a,n):d.redirect("../"+o,a,n)},getTokenModel:function(e){var t=n.Components.get("submitted");return i.extend(t?t.toJSON():{},e)},getTokenFilters:function(){return l.getFilters(n.Components)},evaluate:function(e,t){return u.execute(e,f.getTokenModel(t),!0)},evaluateCondition:function(e,t){try{var n=f.evaluate(e,t);return i.isBoolean(n)||p.warn("Eval expression %s for condition did not return a boolean value",e),!0===n}catch(t){return p.error("Error executing eval expression %s for condition: %s",e,t),!1}},isEditMode:function(){return/\/edit$/.test(window.location)},isAbsoluteURL:function(e){return/^https?:\/\//.test(e)},isServerRelativeURL:function(e){return"/"===e[0]&&!f.isProtocolRelativeURL(e)},isProtocolRelativeURL:function(e){return/^\/\//.test(e)},isTrustedExternalURL:function(e,t={}){return 0===g.getExternalUrls([e],g.extractTrustedDomains(t)).length}});return f}.apply(t,n))||(e.exports=s)},"splunkjs/mvc/simplexml/factory":function(e,t,i){var n,s;n=[i("dashboard/DashboardFactory")],void 0===(s=function(e){return e}.apply(t,n))||(e.exports=s)},"splunkjs/mvc/simplexml/mapper":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("require/backbone"),s=i("util/console"),a=function(){};t.extend(a.prototype,{tagName:"#abstract",map:function(){},getSearch:function(e,t){var i;if(e.error.has("details")){var n=e.error.get("details");if(404==n.status&&"saved"==n.type)return i={type:"saved",name:n.searchname}}if(e.entry.get("name",t))i={type:"saved",name:e.entry.get("name",t)},s.log("Mapped Saved Search",i);else if(e.entry.content.get("search",t)){i={type:e.entry.content.get("display.general.search.type",t)||"inline",search:e.entry.content.get("search",t),earliest_time:e.entry.content.get("dispatch.earliest_time",t),latest_time:e.entry.content.get("dispatch.latest_time",t),base:e.entry.content.get("display.general.search.base",t)};var a=e.entry.content.get("dispatch.sample_ratio");null!=a&&"1"!=a&&(i.sample_ratio=a),t.flatten&&"postprocess"===i.type&&(i.type="inline",i.search=e.entry.content.get("display.general.search.fullSearch",t)),s.log("Mapped Inline Search",i)}return i},toXML:function(e,t){t=t||{tokens:!0};var i={type:this.tagName,title:e.entry.content.get("display.general.title",t),search:this.getSearch(e,t),tokenDependencies:e.entry.content.get("display.general.tokenDependencies"),options:{},tags:{}};return this.map(e.entry.content,i,t),i.options.fields&&(i.tags.fields||(i.tags.fields=i.options.fields),i.options.fields=null),i}});var r={};return a.register=function(e,t){r[e]=t},a.get=function(e){var t=r[e];if(!t)throw new Error("No mapper for type "+e);return new t},a.extend=n.Model.extend,a}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/paneleditor":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("splunkjs/mvc/mvc"),a=i("splunkjs/mvc/basesplunkview"),r=i("views/shared/vizcontrols/Master"),o=i("splunkjs/mvc/sharedmodels"),l=i("views/dashboards/panelcontrols/Master"),d=i("splunkjs/mvc/savedsearchmanager"),c=i("splunkjs/mvc/searchmanager"),h=i("splunkjs/mvc/utils"),u=i("require/underscore"),p=i("stubs/splunk.config"),m=(i("util/console"),i("splunkjs/mvc/simplexml/controller")),g=i("splunkjs/mvc/tokenawaremodel"),f=i("models/dashboards/DashboardReport"),v=f.extend({initialize:function(e,t){f.prototype.initialize.apply(this,arguments),this._report=t.report,this.entry.content=new g({},{applyTokensByDefault:!0,retrieveTokensByDefault:!0}),this.setFromSplunkD(this._report.toSplunkD()),this.contentSyncer=h.syncModels({source:this._report.entry.content,dest:this.entry.content,auto:"push"}),this.entrySyncer=h.syncModels({source:this._report.entry,dest:this.entry,auto:"push"})},save:function(e,t){return e&&this.set(e,t),this._report.entry.set(this.entry.toJSON()),this._report.entry.content.set(this.entry.content.toJSON({tokens:!0})),this._report.saveXML(t)},syncOff:function(){this.contentSyncer.destroy(),this.entrySyncer.destroy(),this.off()}});return a.extend({className:"panel-editor",initialize:function(){this.children=this.children||{},a.prototype.initialize.call(this),this.model=this.model||{},this.model.report=this.model.report||new f,this.model.working=new v({},{report:this.model.report}),this.model.application=m.model.app,this.manager=this.options.manager,this._instantiateChildren(),this.bindToComponent(this.manager,this.onManagerChange,this),this.listenTo(this.model.report,"makeInline",this._makePanelInline,this),this.listenTo(this.model.report,"useReportFormatting",this._useReportFormatting,this),this.listenTo(this.model.report,"updateReportID",this._updateReportID,this),this.listenTo(this.model.report,"saveAsReport",this._saveAsReport,this),this.listenTo(this.model.report,"updateSearchString",this._updateSearchManager,this),this.listenTo(this.model.report,"deleteReport",this._deleteReport,this),this.listenTo(this.model.working,"saveTitle",this._saveTitle,this),this.listenTo(this.model.working,"editTitle",this._editTitle,this),this.model.user=m.model.user,this.model.appLocal=m.model.appLocal},_instantiateChildren:function(){this.children.vizControl=new r({model:{report:this.model.working,application:this.model.application,user:this.model.user},vizTypes:["events","statistics","visualizations"],saveOnApply:!0,dashboard:!0}),this.children.panelControl=new l({model:{report:this.model.report,working:this.model.working,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,dashboard:m.model.view,state:m.getStateModel(),serverInfo:o.get("serverInfo")},controller:m})},remove:function(){this.model.working.syncOff(),this._removeChildren(),a.prototype.remove.apply(this,arguments)},_removeChildren:function(){this.children.vizControl.remove(),this.children.panelControl.remove()},_updateSearchManager:function(e){var t=this.model.report.toSplunkD();this.model.report.entry.content.set(e);var i=this.model.report.saveXML();i.done(u.bind((function(){this.model.report.trigger("successfulSave");var e=s.Components.get(this.manager);e.settings&&(e.settings.set("search",this.model.report.entry.content.get("search",{tokens:!0}),{tokens:!0,silent:!1}),e.settings.set({earliest_time:this.model.report.entry.content.get("dispatch.earliest_time",{tokens:!0}),latest_time:this.model.report.entry.content.get("dispatch.latest_time",{tokens:!0})},{tokens:!0}))}),this)),i.fail(u.bind((function(){this.model.report.setFromSplunkD(t,{silent:!1})}),this))},onManagerChange:function(){this._removeChildren(),this._instantiateChildren(),this.render()},render:function(){return this.$el.append(this.children.panelControl.render().el),this.$el.append(this.children.vizControl.render().el),this},_makePanelInline:function(){var e=this.model.report.toSplunkD(),t=this.model.report.entry.get("name"),i=this.model.report.get("id");delete this.model.report.id,this.model.report.unset("id",{silent:!0}),this.model.report.entry.unset("name",{silent:!0});var n=this.model.report.saveXML();n.fail(u.bind((function(){this.model.report.setFromSplunkD(e,{silent:!1})}),this)),n.done(u.bind((function(){this.model.report.trigger("successfulManagerChange"),new c({id:this.manager,latest_time:this.model.report.entry.content.get("dispatch.latest_time"),earliest_time:this.model.report.entry.content.get("dispatch.earliest_time"),search:this.model.report.entry.content.get("search"),sample_ratio:this.model.report.entry.content.get("dispatch.sample_ratio"),app:h.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0}),this.model.report.set({id:i},{silent:!0}),this.model.report.unset("id",{silent:!1}),this.model.report.entry.set({name:t},{silent:!0}),this.model.report.entry.unset("name",{silent:!1})}),this))},_useReportFormatting:function(){var e=this.model.report.toSplunkD();this.model.report.fetch({},{silent:!0}).done(u.bind((function(){var t=this.model.report.toSplunkD(),i=this.model.report.saveXML({clearOptions:!0});i.fail(u.bind((function(){this.model.report.setFromSplunkD(e,{silent:!1})}),this)),i.done(u.bind((function(){this.model.report.setFromSplunkD(e,{silent:!0}),this.model.report.setFromSplunkD(t,{silent:!1}),this.model.report.trigger("successfulReportFormatting")}),this))}),this))},_updateReportID:function(e,t){var i=this.model.report.toSplunkD();e&&(this.model.report.set({id:e},{silent:!0}),this.model.report.entry.set({id:e},{silent:!0}),this.model.report.id=e),t&&this.model.report.entry.content.set({"display.general.title":t}),this.model.report.fetch({},{silent:!0}).done(u.bind((function(){var e=this.model.report.saveXML();e.fail(u.bind((function(){this.model.report.setFromSplunkD(i,{silent:!1})}),this)),e.done(u.bind((function(){this.model.report.trigger("successfulManagerChange"),new d({id:this.manager,searchname:this.model.report.entry.get("name"),app:h.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0})}),this))}),this))},_saveAsReport:function(e,t){var i=this.model.report.toSplunkD();this.model.report.entry.content.set({name:e,description:t,"display.general.title":e}),this.model.report.entry.set({name:e},{silent:!0}),"postprocess"===this.model.report.entry.content.get("display.general.search.type")&&this.model.report.entry.content.set("search",this.model.report.entry.content.get("display.general.search.fullSearch")),this.model.report.save({},{data:{app:h.getCurrentApp(),owner:p.USERNAME}}).done(u.bind((function(){var t=this.model.report.saveXML();t.fail(u.bind((function(){this.model.report.destroy(),this.model.report.unset("id",{silent:!0}),this.model.report.setFromSplunkD(i,{silent:!1})}),this)),t.done(u.bind((function(){this.model.report.trigger("successfulReportSave"),new d({id:this.manager,searchname:e,app:h.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0})}),this))}),this))},_saveTitle:function(e){var t=this.model.report.toSplunkD();this.model.working.entry.content.set({"display.general.title":e});var i=this.model.working.save();i.fail(u.bind((function(){this.model.report.setFromSplunkD(t,{silent:!1})}),this)),i.done(u.bind((function(){this.model.working.trigger("successfulSave"),this.model.report.entry.content.set({"display.general.title":""},{silent:!1}),this.model.report.entry.content.set({"display.general.title":e},{silent:!1})}),this))},_editTitle:function(){this.model.report.trigger("editTitle")},_deleteReport:function(){this.model.report.deleteXML().done(u.bind((function(){this.model.report.trigger("successfulDelete"),this.model.report.trigger("removedPanel")}),this))}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/parser":function(e,t,i){var n,s;n=[i("require/underscore"),i("dashboard/DashboardParser"),i("util/console")],void 0===(s=function(e,t,i){function n(){i.warn("simplexml/parser is deprecated, use dashboard/DashboardParser instead"),t.apply(this,arguments)}var s;return e.extend(n.prototype,t.prototype),e.extend(n,t,{getDefault:function(){return s||(s=n.createDefault())},createDefault:function(){return new n(n.getDefaultConfig())}}),t}.apply(t,n))||(e.exports=s)},"splunkjs/mvc/simplexml/router":function(e,t,i){var n;void 0===(n=function(e){var t=i("require/underscore"),n=i("require/backbone"),s=i("models/url"),a=i("util/console");return n.Router.extend({initialize:function(e){a.warn("splunkjs dashboard router is DEPRECATED!"),this.model=e.model,this.app=e.app},routes:{":locale/app/:app/:page?*qs":"view",":locale/app/:app/:page":"view",":locale/app/:app/:page/?*qs":"view",":locale/app/:app/:page/":"view",":locale/app/:app/:page/edit?*qs":"edit",":locale/app/:app/:page/edit":"edit","*root/:locale/app/:app/:page?*qs":"rootedView","*root/:locale/app/:app/:page":"rootedView","*root/:locale/app/:app/:page/?*qs":"rootedView","*root/:locale/app/:app/:page/":"rootedView","*root/:locale/app/:app/:page/edit?*qs":"rootedEdit","*root/:locale/app/:app/:page/edit":"rootedEdit",":locale/manager/:app/:page?*qs":"view",":locale/manager/:app/:page":"view",":locale/manager/:app/:page/?*qs":"view",":locale/manager/:app/:page/":"view","*root/:locale/manager/:app/:page?*qs":"rootedView","*root/:locale/manager/:app/:page":"rootedView","*root/:locale/manager/:app/:page/?*qs":"rootedView","*root/:locale/manager/:app/:page/":"rootedView"},view:function(){a.log("ROUTE: view"),this.page.apply(this,arguments),this.model.set("edit",!1)},edit:function(){a.log("ROUTE: edit"),this.page.apply(this,arguments),this.model.set("edit",!0)},rootedView:function(e){this.app.set("root",e),this.view.apply(this,t.rest(arguments))},rootedEdit:function(e){this.app.set("root",e),this.edit.apply(this,t.rest(arguments))},page:function(e,t,i){a.log("ROUTE: page(locale=%o, app=%o, page=%o)",e,t,i),this.app.set({locale:e,app:t,page:i}),s.fetch(),"schedulePDF"===s.get("dialog")&&(this.model.set("dialog",s.get("dialog")),s.unset("dialog"),this.updateUrl({replace:!0}))},updateUrl:function(e){var i=[this.app.get("root")||"",this.app.get("locale"),"app",this.app.get("app"),this.app.get("page")];this.model.get("edit")&&i.push("edit");var n=[i.join("/")],a=s.encode();a.length&&n.push(a),this.navigate(n.join("?"),t.extend({replace:!1},e))}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/searcheventhandler":function(e,t,i){var n,s;n=[i("require/underscore"),i("splunkjs/mvc/simplexml/eventhandler"),i("util/eval"),i("splunkjs/mvc/tokenutils"),i("util/console"),i("splunkjs/mvc/messages")],void 0===(s=function(e,t,i,n,s,a){var r=t.extend({componentIdSetting:"managerid",normalizeEventName:function(){var e=this.settings.get("event"),t=r.events[e];!1===t.data&&t.withData&&this.needsResultsData()&&this.settings.set("event",t.withData)},startListeningToManager:function(e,t){this._component=e;var i=r.events[t];if(!1===i.data&&i.withData&&this.needsResultsData()&&(i=r.events[i.withData]),i.data){var n=this._data=e.data(i.data,i.fetchOptions);this.listenTo(n,"data nodata",this.handleDataLoaded)}else this.listenTo(e,"search:"+t,this.handleEvent)},needsResultsData:function(){var t=this.settings.get("conditions");function s(t){return e.any(t,(function(e){return 0===e.indexOf("result.")}))}function a(e){try{return s(i.compile(e).findVariables(!0))}catch(e){return!1}}return!(!t||!e.any(t,(function(t){return!("match"!==t.attr||!a(t.value))||e.any(t.actions,(function(e){switch(e.type){case"eval":return a(e.value);case"set":case"link":return t=e.value,s(n.getTokenNames(t));default:return!1}var t}))})))},stopListeningToManager:function(){this._data&&(this.stopListening(this._data),this._data.destroy(),this._data=null),this._component&&(this.stopListening(this._component),this._component=null)},onComponentChange:function(e,t){this.stopListeningToManager(),this.startListeningToManager(t,this.settings.get("event"))},createEventData:function(t,i){var n=r.events[t],s={data:{}};return n.data&&e.extend(s.data,r.getResultModel(this._data.data())),n.props&&e.extend(s.data,r.getJobPropertiesModel(i)),n.msg&&(s.data.message=a.getSearchFailureMessage(i)||i),s},handleDataLoaded:function(){this.handleEvent({content:this._component.get("data")})},handleEvent:function(e){var i=this.settings.get("event"),n=this.createEventData(i,e);null!=n&&t.prototype.handleEvent.call(this,n)}},{expandJobProperties:function(t,i,n){e.each(i,(function(i,s){e.isObject(i)?r.expandJobProperties(t,i,n+"."+s):t[n+"."+s]=i}))},getJobPropertiesModel:function(t){var i={};return e.each(t.content,(function(t,n){e.isObject(t)?r.expandJobProperties(i,t,"job."+n):i["job."+n]=t})),i},getResultModel:function(t){var i={};return t&&t.results&&t.results.length&&e.each(t.results[0],(function(e,t){i["result."+t]=e})),i},events:{progress:{data:!1,props:!0,withData:"preview"},preview:{data:"preview",fetchOptions:{output_mode:"json",count:1},props:!0},done:{data:!1,props:!0,withData:"finalized"},finalized:{data:"results",fetchOptions:{count:1,output_mode:"json",condition:function(e){var t=e.get("data");return t&&t.isDone}},props:!0},error:{msg:!0},fail:{msg:!0},cancelled:{msg:!1}}});return r}.apply(t,n))||(e.exports=s)},"splunkjs/mvc/simplexml/serializer":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("splunkjs/mvc"),o=i("util/general_utils"),l=i("splunkjs/mvc/simplexml/mapper"),d=i("util/console"),c=i("util/xml"),h=i("splunkjs/mvc/simplexml/parser");function u(e,t,i){return i&&i.clearOptions&&(e.find("option").remove(),delete t.options),t.tokenDependencies&&s(["depends","rejects"]).each((function(i){var n=t.tokenDependencies[i];n&&e.attr(i,n)})),function(e,t){var i=e.find("title");t.title?(i.length||(i=c.$node("<title/>").prependTo(e)),i.text(t.title)):i.remove()}(e,t),t.search&&"global"!==t.search.type&&function(e,t){if(t.search){t.search=s.extend({id:e.children("search").attr("id")},t.search),function(e){e.children("searchString,searchTemplate,searchName,searchPostProcess,pivotSearch,earliestTime,latestTime,search").remove()}(e);var i=k(t.search);if(i){var n=e.find("title");n.length?i.insertAfter(n):i.prependTo(e)}}}(e,t),function(e,t){t.options&&(d.log("Applying options",t.options),s.each(t.options,(function(t,i){var n=e.find('option[name="'+i+'"]');""===t||null==t?n.remove():n.length?n.text(t):c.$node("<option/>").attr("name",i).text(t).appendTo(e)})));t.removeOptions&&s(t.removeOptions).each((function(t){e.find('option[name="'+t+'"]').remove()}))}(e,t),function(e,t){t.tags&&s.each(t.tags,(function(t,i){e.find(i).remove(),(s.isArray(t)&&t.length||t)&&c.$node("<"+i+"/>").text(t).appendTo(e)}))}(e,t),function(e,t){t.attributes&&s.each(t.attributes,(function(t,i){e.attr(i,t)}))}(e,t),function(e,t){void 0!==t.content&&(e.empty(),t.content&&(t.cdata?e.append(c.cdata(t.content)).attr("encoded","true"):function(e,t){try{var i="<ct>"+t+"</ct>",n=c.$node(i);return c.serialize(n)===i&&(c.moveChildren(n,e),!0)}catch(e){return!1}}(e,t.content)||(i=e,n=t.content,i.append(c.cdata(n)).attr("encoded","true"))));var i,n}(e,t),function(e,t){t.sparkline&&s.each(t.sparkline,(function(i,n){var a=c.$node("<format/>").attr("field",n).attr("type","sparkline").appendTo(e);s.each(t.sparkline[n],(function(e,i){if(s.contains(["colorMap","valueSpots"],i)){var r=c.$node("<option/>").attr("name",i).appendTo(a),o=t.sparkline[n][i];s.isArray(o)?r.text(JSON.stringify(o)):s.each(o,(function(e,t){c.$node("<option/>").attr("name",t).text(e).appendTo(r)}))}else c.$node("<option/>").attr("name",i).text(e).appendTo(a)}))}))}(e,t),e}function p(e,t){var i=c.$tag(e.type);return u(i,e,t),i}function m(e,t,i){return e.attr("type",t.type),e.attr("token",t.token||null),e.attr("searchWhenChanged",null!=t.searchWhenChanged?String(o.normalizeBoolean(t.searchWhenChanged)):null),function(e,t,i){var n=a.trim(e.label);void 0!==n&&n!==e.token?c.replaceOrPrepend({node:c.$node("<label/>").text(n),selector:"label",container:t}):t.children("label").remove()}(t,e),function(e,t,i){if(e.choices&&e.choices.length){var n=s(e.choices).map((function(e){return c.$node("<choice/>").attr("value",e.value).text(e.label)}));c.replaceOrAppend({node:n,container:t,selector:"choice"})}else t.children("choice").remove()}(t,e),function(e,t,i){var n,a=e.children("search").attr("id");if("saved"===t.searchType){if(!t.searchName)return f(e);n=k({id:a,type:"saved",name:t.searchName})}else if("postprocess"===t.searchType){if(!t.search)return f(e);n=k(s.extend({id:a,type:"postprocess",base:t.basesearch},s.pick(t,"search")))}else{if(!t.search)return f(e);n=k({id:a,type:"inline",earliest_time:t.populating_earliest_time,latest_time:t.populating_latest_time,search:t.search})}c.replaceOrAppend({node:n,container:e,selector:"populatingSavedSearch,populatingSearch,search"}),t.labelField?c.replaceOrAppend({node:c.$tag("fieldForLabel").text(t.labelField),container:e,selector:"fieldForLabel"}):e.children("fieldForLabel").remove();t.valueField?c.replaceOrAppend({node:c.$tag("fieldForValue").text(t.valueField),container:e,selector:"fieldForValue"}):e.children("fieldForValue").remove()}(e,t),function(e,t,i){var n=t.default;if(!n||s.isArray(n)&&0===n.length)e.children("default").remove();else{var a=c.$node("<default/>");"time"==t.type?(c.$node("<earliest></earliest>").text(null==n.earliest_time?"":n.earliest_time).appendTo(a),c.$node("<latest></latest>").text(null==n.latest_time?"":n.latest_time).appendTo(a)):s.isArray(n)?a.text((r=n,s.map(r,(function(e){return/[,\r\n""]/.test(e)?'"'+e.replace(/"/g,'""')+'"':e})).join(","))):a.text(n),c.replaceOrAppend({node:a,selector:"default",container:e})}var r}(e,t),function(e,t,i){s(["prefix","suffix","seed","initialValue","valuePrefix","valueSuffix","delimiter"]).each((function(i){var n=t[i];if(!n||s.isArray(n)&&0===n.length)e.children(i).remove();else{var a=c.$tag(i).text(n);c.replaceOrAppend({node:a,container:e,selector:i})}}))}(e,t),e}function g(e,t){var i=r.Components.get(e);return m(c.$node("<input />"),i.settings.toJSON(t))}function f(e){e.children("populatingSavedSearch,populatingSearch,search,fieldForLabel,fieldForValue").remove()}function v(e,t){t||(t={});var i=s.extend({},t.structureMap,t.itemMap),n=s.extend({},t.structureMap,t.inputMap),o=c.$node("<panel/>");return e.ref?(o.attr("ref",e.ref),e.app&&o.attr("app",e.app)):(s(e.elements).each((function(e){var n=i[e];if(!n){if(!1===t.createMissingElements){var s="Element "+e+" not found in XML";if(t.failIfComponentNotFound)throw new Error(s);return void d.warn(s)}n=function(e,t){var i=r.Components.get(e);if(!i)throw new Error("Element "+e+" not found");return p(l.get(i.getVisualizationType()).toXML(i.model,t),t)}(e,t)}a(n).find("script").remove(),o.append(n)})),!1!==t.includeFormElements&&s(e.inputs).chain().clone().reverse().each((function(e){var i=n[e];if(i)a(i).find("script").remove();else{if(!1===t.createMissingInputs){var s="Input "+e+"not found in XML";if(t.failIfComponentNotFound)throw new Error(s);return void d.warn(s)}i=g(e,t)}a(o).prepend(i)}))),a.trim(e.title)&&c.$node("<title />").text(e.title).prependTo(o),e.id&&o.attr("id",e.id),e.tokenDependencies&&(e.tokenDependencies.depends&&o.attr("depends",e.tokenDependencies.depends),e.tokenDependencies.rejects&&o.attr("rejects",e.tokenDependencies.rejects)),o}function b(e,t,i){(i=s.extend({tokens:!0,createMissingElements:!0,createMissingInputs:!0,includeFormElements:!0,itemMap:{},inputMap:{},failIfComponentNotFound:!0,moveGlobalSearches:!0},i)).moveGlobalSearches&&function(e){var t=c.root(e);t.find("row>panel>search").appendTo(t)}(e);var n=c.root(e);if(n.children("row").detach(),s(t.rows).each((function(e){var t=c.$node("<row/>");s(e.panels).each((function(e){var n=v(e,i);t.append(n)})),e.id&&t.attr("id",e.id),e.tokenDependencies&&(e.tokenDependencies.depends&&t.attr("depends",e.tokenDependencies.depends),e.tokenDependencies.rejects&&t.attr("rejects",e.tokenDependencies.rejects)),n.append(t)})),i.includeFormElements){var r=n.children("fieldset");r.length||(r=w(e,i)),r.children().detach(),s(t.fieldset).each((function(e){var t=i.inputMap[e];if(t)a(t).find("script").remove();else{if(!1===i.createMissingInputs){var n="Input "+e+"not found in XML";if(i.failIfComponentNotFound)throw new Error(n);return void d.warn(n)}t=g(e)}r.append(t)})),0==r.children().length&&r.remove()}return e}function y(e,t){if(!_(e,t)){var i=c.root(e),n=c.parse("<"+t+"/>"),a=c.root(n),r=i[0];return s(r.attributes).each((function(e){a.attr(e.nodeName,e.nodeValue)})),c.moveChildren(i,a),n}}function _(e,t){return c.root(e).prop("tagName")===t}function w(e,t){var i=c.root(e),n=i.children("fieldset");return n.length||(n=c.$node('<fieldset submitButton="false"></fieldset>'),c.inject({node:n,where:"after",container:i,selectors:["description","label"],fallback:"prepend"})),n}function k(e){var t=c.$node("<search/>");switch("$earliest$"===e.earliest_time&&(e.earliest_time=void 0),"$latest$"===e.latest_time&&(e.latest_time=void 0),e.id&&t.attr("id",e.id),e.type){case"inline":c.$node("<query />").text(e.search).appendTo(t),null!=e.earliest_time&&c.$node("<earliest />").text(e.earliest_time).appendTo(t),null!=e.latest_time&&c.$node("<latest />").text(e.latest_time).appendTo(t),null!=e.sample_ratio&&c.$node("<sampleRatio />").text(e.sample_ratio).appendTo(t);break;case"postprocess":c.$node("<query />").text(e.search).appendTo(t),t.attr("base",e.base||"global");break;case"saved":t.attr("ref",e.name),null!=e.earliest_time&&c.$node("<earliest />").text(e.earliest_time).appendTo(t),null!=e.latest_time&&c.$node("<latest />").text(e.latest_time).appendTo(t);break;default:throw new Error("Invalid search type: "+e.type)}return e.eventHandlerNodes&&t.append(e.eventHandlerNodes),t}return{updateExistingElementNode:function(e,t,i){var n=c.$tag(t.type);if(t.search){var r=h.getDefault().findNodeDefinitions((function(e){return"search-eventhandler"===e.extends})),o=s(r).chain().pluck("tagName").unique().value().join(","),l=a(e).children("search").children(o).detach();l.length&&(t.search=s.extend({eventHandlerNodes:l},t.search))}return c.moveChildren(e,n),s(["id","depends","rejects"]).each((function(t){var i=a(e).attr(t);i&&n.attr(t,i)})),u(n,t,i)},updateElementNode:u,createElementNode:p,insertNewElement:function(e,t,i){var n=c.$node("<row />"),s=c.$node("<panel />").appendTo(n);return p(t,i).appendTo(s),c.root(e).append(n),e},updateExistingInputNode:function(e,t,i){return m(c.clone(e),t,i)},updateInputNode:m,createInputNode:function(e,t){return m(c.$node("<input />"),e)},serializeDashboardStructure:b,serializePanelStructure:v,createFlattenedDashboardXML:function(e,t){if(t=s.extend({serializeInputs:!1,tokens:!1,indent:!1},t),!e)throw new Error("Cannot create flattened XML without the item order being captured first");t=t||{};var i=c.parse("<dashboard/>"),n=c.root(i);return c.$node("<label/>").text(t.label).appendTo(n),a.trim(t.description)&&c.$node("<description/>").text(t.description).appendTo(n),i=b(i,e,s.extend({tokens:!1,flatten:!0,includeFormElements:!!t.serializeInputs},t)),c.serializeDashboardXML(i,t.indent)},migrateViewType:y,updateFormSettings:function(e,t){_(e,"form")||(e=y(e,"form"));var i=e.find("fieldset");return i.length||(i=w(e)),t.hasOwnProperty("submitButton")&&i.attr("submitButton",String(t.submitButton)),t.hasOwnProperty("autoRun")&&i.attr("autoRun",String(t.autoRun)),e},createFieldset:w,createSearchNode:k,applyGlobalSearch:function(e,t){var i=c.root(e);i.children("searchTemplate,earliestTime,latestTime,search[id=global]").remove();var n=k(s.extend({id:"global"},t.search));c.inject({node:n,container:i,where:"after",selectors:["label","description"],fallback:"prepend"})}}}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/simplexml/urltokenmodel":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("splunkjs/mvc/basetokenmodel"),a=i("models/url"),r=i("splunkjs/mvc/simplexml/controller"),o=i("util/general_utils");return s.extend({moduleId:n.i,initialize:function(){a.on("change",(function(e,t){this.setFromClassicUrl()}),this),this.setFromClassicUrl(),r.router.on("route",(function(){this.trigger("url:navigate")}),this)},save:function(e,t){this.set(e),this.saveClassicUrl(t)},saveOnlyWithPrefix:function(e,t,i){var n=["^"+e+".*","^earliest$","^latest$"];this.save(o.filterObjectByRegexes(t,n,{allowEmpty:!0,allowObject:!0}),i)},saveClassicUrl:function(e){a.save(this.toJSON(),e)},setFromClassicUrl:function(){this.set(a.toJSON())}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/singleview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("splunkjs/mvc/visualizationview"),r=i("views/shared/ReportVisualizer"),o=i("splunkjs/mvc/utils"),l=i("splunkjs/mvc/drilldown");return a.extend({moduleId:n.i,className:"splunk-single",options:s.extend({},a.prototype.options,{linkView:"search",height:"115px"}),normalizeSettings:function(e){a.prototype.normalizeSettings.apply(this,arguments),e.set("drilldown",l.getNormalizedDrilldownType(e.get("drilldown"),{default:"none"}))},syncSettingsAndReportModel:function(e,t){this._settingsSync=o.syncModels(e,t,{auto:!0,prefix:"display.visualizations.",alias:{additionalClass:"display.visualizations.singlevalue.additionalClass",linkView:"display.visualizations.singlevalue.linkView",field:"display.visualizations.singlevalue.field",linkFields:"display.visualizations.singlevalue.linkFields",classField:"display.visualizations.singlevalue.classField",beforeLabel:"display.visualizations.singlevalue.beforeLabel",afterLabel:"display.visualizations.singlevalue.afterLabel",underLabel:"display.visualizations.singlevalue.underLabel",unit:"display.visualizations.singlevalue.unit",unitPosition:"display.visualizations.singlevalue.unitPosition",linkSearch:"display.visualizations.singlevalue.linkSearch",drilldown:"display.visualizations.singlevalue.drilldown",colorMode:"display.visualizations.singlevalue.colorMode",trendColorInterpretation:"display.visualizations.singlevalue.trendColorInterpretation",trendInterval:"display.visualizations.singlevalue.trendInterval",rangeValues:"display.visualizations.singlevalue.rangeValues",rangeColors:"display.visualizations.singlevalue.rangeColors",showSparkline:"display.visualizations.singlevalue.showSparkline",showTrendIndicator:"display.visualizations.singlevalue.showTrendIndicator",trendDisplayMode:"display.visualizations.singlevalue.trendDisplayMode",colorBy:"display.visualizations.singlevalue.colorBy",useColors:"display.visualizations.singlevalue.useColors",numberPrecision:"display.visualizations.singlevalue.numberPrecision",useThousandSeparator:"display.visualizations.singlevalue.useThousandSeparator",height:"display.visualizations.singlevalueHeight"},exclude:["data","drilldownRedirect","id","managerid","name","pagerPosition","pageSize","refreshDisplay","resizeable","type"]})},getVisualizationRendererOptions:function(){return{generalTypeOverride:r.GENERAL_TYPES.VISUALIZATIONS,customConfigOverride:{"display.visualizations.type":"singlevalue"},sizeConfigOverride:{defaultHeight:115}}},waitingTemplate:'            <div class="msg waiting">                <div class="single-value">                    <span class="single-result">&hellip;</span>                </div>            </div>        ',noResultsTemplate:'            <div class="msg no-results">                <div class="single-value">                    <span class="single-result">N/A</span>                </div>            </div>        ',remove:function(){return this.reportModel&&(this.reportModel._sync&&this.reportModel._sync.destroy(),this.reportModel._sync2&&this.reportModel._sync2.destroy(),this.reportModel.off()),this._settingsSync&&this._settingsSync.destroy(),a.prototype.remove.call(this)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/splunkmapview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("splunkjs/mvc/visualizationview"),r=i("views/shared/ReportVisualizer"),o=i("splunkjs/mvc/utils"),l=i("util/console"),d=i("splunkjs/mvc/drilldown"),c=i("stubs/splunk.config"),h=i("util/general_utils"),u={openStreetMap:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:18}};return a.extend({moduleId:n.i,className:"splunk-map",options:s.extend({},a.prototype.options,{tileSource:void 0,height:"400px"}),normalizeSettings:function(e){a.prototype.normalizeSettings.apply(this,arguments),e.set("drilldown",d.getNormalizedDrilldownType(e.get("drilldown"),{allowBoolean:!0})),e.has("mapping.map.scrollZoom")&&h.isBooleanEquivalent(e.get("mapping.map.scrollZoom"))&&e.set("mapping.map.scrollZoom",h.normalizeBoolean(e.get("mapping.map.scrollZoom"))),e.has("mapping.map.panning")&&h.isBooleanEquivalent(e.get("mapping.map.panning"))&&e.set("mapping.map.panning",h.normalizeBoolean(e.get("mapping.map.panning")));var t=e.get("mapping.type");"marker"!==t&&"choropleth"!==t&&e.set("mapping.type","marker"),c.INDEPENDENT_MODE&&(e.has("tileSource")||e.set("tileSource","openStreetMap"))},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.$el.css({overflow:"hidden",position:"relative"}),this.$msg.css({overflow:"hidden",position:"absolute",width:"100%",height:"100%"}),this.listenTo(this.settings,"change:maxZoom",(function(e,t){this.settings.set({"mapping.tileLayer.maxZoom":t},{silent:!0})})),this.listenTo(this.settings,"change:tileUrl",(function(e,t){this.settings.set({"mapping.tileLayer.url":t},{silent:!0})})),this.listenTo(this.settings,"change:drilldown",(function(e,t){this.settings.set({"mapping.drilldown":t},{silent:!0})})),this.listenTo(this.settings,"change:tileSource",this._updateTileSource),this._updateTileSource()},syncSettingsAndReportModel:function(e,t){this._settingsSync=o.syncModels(e,t,{auto:!0,prefix:"display.visualizations.",alias:{tileUrl:"display.visualizations.mapping.tileLayer.url",maxZoom:"display.visualizations.mapping.tileLayer.maxZoom",drilldown:"display.visualizations.mapping.drilldown",height:"display.visualizations.mapHeight"},exclude:["managerid","data","tileSource","type","drilldownRedirect"]})},getVisualizationRendererOptions:function(){return{generalTypeOverride:r.GENERAL_TYPES.VISUALIZATIONS,customConfigOverride:{"display.visualizations.type":"mapping"}}},hideVisualization:function(){this.$viz.css("visibility","hidden")},showVisualization:function(){this.$viz.css("visibility","")},message:function(e){var t=h.normalizeBoolean(this.model.get("display.visualizations.trellis.enabled"),{default:!1})&&"choropleth"===this.model.get("display.visualizations.mapping.type");t||"waiting"!==e&&"no-results"!==e?a.prototype.message.apply(this,arguments):this.hideMessages()},_updateTileSource:function(){if(this.settings.has("tileSource")){var e=u[this.settings.get("tileSource")];e?this.settings.set({tileUrl:e.url,maxZoom:e.maxZoom}):l.warn("Invalid tileSource parameter value=%o",e)}},onDrilldown:function(e,t){this.trigger("click:marker",t,this)},remove:function(){return this._settingsSync&&this._settingsSync.destroy(),a.prototype.remove.call(this)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/tableview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=i("require/underscore"),r=i("splunkjs/mvc/utils"),o=i("require/backbone").Collection,l=i("splunkjs/mvc/visualizationview"),d=i("views/shared/ReportVisualizer"),c=i("splunkjs/mvc/drilldown"),h=i("views/shared/results_table/renderers/BaseCellRenderer"),u=i("views/shared/results_table/renderers/BaseRowExpansionRenderer"),p=i("util/console"),m=i("util/general_utils"),g=i("splunkjs/mvc/simplexml/parser"),f=function(e){return a.isString(e)?e:e.name},v=l.extend({moduleId:n.i,className:"splunk-table",options:a.extend({},l.prototype.options,{fields:[]}),drilldownWithJobTimeOnly:!0,normalizeSettings:function(e,t){if(l.prototype.normalizeSettings.apply(this,arguments),e.has("wrap")&&m.isBooleanEquivalent(e.get("wrap"))&&e.set("wrap",m.normalizeBoolean(e.get("wrap"))?"1":"0"),e.has("rowNumbers")?m.isBooleanEquivalent(e.get("rowNumbers"))?e.set("displayRowNumbers",m.normalizeBoolean(e.get("rowNumbers"))?"1":"0"):e.set("displayRowNumbers",e.get("rowNumbers")):e.has("displayRowNumbers")&&e.set("displayRowNumbers",m.normalizeBoolean(e.get("displayRowNumbers"))?"1":"0"),e.has("overlay")&&e.set("dataOverlayMode",e.get("display.statistics.overlay")),e.set("drilldown",c.getNormalizedDrilldownType(e.get("drilldown"),{validValues:["row","cell","none"],aliasMap:{all:"cell",off:"none"},default:"cell"})),e.get("format")){var i={};a.each(e.get("format"),(function(e,t){a.each(e,(function(e){"sparkline"===e.type&&(i[t]=e.options)}))})),a(i).isEmpty()||e.set({"sparkline.format":i})}},initialize:function(e){l.prototype.initialize.apply(this,arguments),this.table=this.viz,a(["addCellRenderer","removeCellRenderer","getCellRenderers"]).each((function(e){if(this.viz[e])throw new Error("Trying to hackily intercept the "+e+" method of the `table` child view but it already exists.  This should not happen.");this.viz[e]=a((function(){return p.warn("Calling "+e+" on the `table` child view directly is deprecated.  Use the panel element's method of the same name."),this[e].apply(this,arguments)})).bind(this)}),this),this._rendered=!1,this.listenTo(this.viz,"rendered",(function(){this._rendered=!0}),this),this.transformFieldsToArray(),this.listenTo(this.settings,"change:fields",this.onFieldsChanged)},updateMessageHeight:function(){this.$msg.height(306)},syncSettingsAndReportModel:function(e,t){this._settingsSync=r.syncModels(e,t,{auto:!0,alias:{displayRowNumbers:"display.statistics.rowNumbers",dataOverlayMode:"display.statistics.overlay",pageSize:"display.prefs.statistics.count",offset:"display.prefs.statistics.offset",sortKey:"display.statistics.sortColumn",sortDirection:"display.statistics.sortDirection",totalsRow:"display.statistics.totalsRow",percentagesRow:"display.statistics.percentagesRow"},prefix:"display.statistics.",exclude:["data","editable","height","id","manager","managerid","name","pagerPosition","resizable","title","drilldownRedirect"]})},getVisualizationRendererOptions:function(){return this.cellRendererCollection=new o,this.rowExpansionRendererCollection=new o,{enableTableDock:!1,generalTypeOverride:d.GENERAL_TYPES.STATISTICS,sortableFieldsExcluded:this.settings.get("sortableFieldsExcluded"),collection:{customCellRenderers:this.cellRendererCollection,customRowExpansionRenderers:this.rowExpansionRendererCollection}}},canEnablePagination:function(){return!0},canEnableResize:function(){return!1},formatData:function(e){var t,i;if(!e)return e;if(this.settings.has("fields")&&!a.isEmpty(this.settings.get("fields"))){var n=this.settings.get("fields");i=a(n).chain().map((function(t){return"*"===t?a(e.fields).select((function(e){return!a(n).contains(f(e))})):a(e.fields).find((function(e){return f(e)===t}))||function(e,t){return t&&t.length&&!a.isString(t[0])?{name:e}:e}(t,e.fields)})).flatten().unique(f).value();var s={};a(e.fields).each((function(e,t){s[f(e)]=t})),t=a(e.rows).map((function(e){return a(i).map((function(t){var i=f(t);return s.hasOwnProperty(i)?e[s[i]]:null}))})),e.rows=t,e.fields=i}return e},getDrilldownData:function(e){var t=l.prototype.getDrilldownData.apply(this,arguments);if(this.managerConnection&&this.managerConnection.isConnected()){var i=this.managerConnection.resultsModel,n=i?i.data().rows:null,s=e.rowIndex;if(n&&s<n.length){var r=n[s];a(i.data().fields).each((function(e,i){var n=a.isString(e)?e:e.name;t["row."+n]=r[i]}))}}return t},onDrilldown:function(e,t){if(this.managerConnection&&this.managerConnection.isConnected()){var i=this.managerConnection.resultsModel.collection().at(e.rowIndex);if(i){var n=e.hasOwnProperty("name2")?e.name2:e.name,s=e.hasOwnProperty("value2")?e.value2:e.value,r=e.originalEvent;this.trigger("clicked:row click:row",a.extend({model:i,index:e.rowIndex,originalEvent:r,component:this,event:r},t),this),this.trigger("clicked:cell click:cell",a.extend({model:i,index:e.rowIndex,column:e.cellIndex,key:n,value:s,originalEvent:r,event:r,component:this},t),this)}}},onFieldsChanged:function(){this.transformFieldsToArray(),this.managerConnection&&this.managerConnection.isConnected()&&this.managerConnection.onDataChange()},transformFieldsToArray:function(){var e=this.settings.get("fields");a.isString(e)&&(e=g.parseFieldsList(s.trim(e)),this.settings.set("fields",e,{silent:!0,forceKeepTemplates:!0}))},remove:function(){return this._settingsSync&&this._settingsSync.destroy(),l.prototype.remove.call(this)},addRowExpansionRenderer:function(e){this.rowExpansionRendererCollection.unshift({renderer:e}),this._rendered&&this.render()},removeRowExpansionRenderer:function(e){this.rowExpansionRendererCollection.remove(this.rowExpansionRendererCollection.findWhere({renderer:e})),this._rendered&&this.render()},getRowExpansionRenderers:function(){return this.rowExpansionRendererCollection.pluck("renderer")},expandRow:function(e){this.viz.expandRow(e)},collapseRow:function(){this.viz.collapseRow()},addCellRenderer:function(e){this.cellRendererCollection.unshift({renderer:e}),this._rendered&&this.render()},removeCellRenderer:function(e){this.cellRendererCollection.remove(this.cellRendererCollection.findWhere({renderer:e})),this._rendered&&this.render()},getCellRenderers:function(){return this.cellRendererCollection.pluck("renderer")}});return v.BaseCellRenderer=h,v.BaseRowExpansionRenderer=u,v}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/textinputview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("splunkjs/mvc/baseinputview"),r=i("splunkjs/mvc/components/TextInput");return a.extend({moduleId:n.i,className:"splunk-textinput",options:{default:void 0,type:"text",value:void 0,disabled:!1},getReactComponent:function(){return r},getState:function(){var e=a.prototype.getState.apply(this,arguments);return s.extend({},e,{type:this.settings.get("type")})},_hasValueForDashboards:function(){var e=this.settings.get("value"),t=this.settings.get("default");return null!=e&&""!==e||void 0===t||e===t}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/timerangeview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("shim/jquery"),r=i("splunkjs/mvc/basesplunkview"),o=i("util/console"),l=i("util/general_utils").normalizeBoolean,d=i("util/react_render"),c=i("collections/shared/Times"),h=i("splunkjs/mvc/tokenutils"),u=i("splunkjs/mvc/sharedmodels"),p=i(0),m=i(55),g=i("uri/route"),f=i(139),v=i("splunkjs/mvc/components/TimeRangePickerDropdown").default;return r.extend({moduleId:n.i,className:"splunk-timerange",options:{default:void 0,managerid:null,earliest_time:void 0,latest_time:void 0,preset:void 0,presets:void 0,value:void 0,dialogOptions:{},popdownOptions:{}},initialize:function(){this.configure(),this.settings.enablePush("value"),this.settings.enablePush("earliest_time"),this.settings.enablePush("latest_time"),this._initializeValue();var e=this.settings.get("presets"),t=this.settings.get("dialogOptions"),i=s.isEmpty(e)?u.get("times"):c.createFromPresets(e,t);this.canRealTimeSearch=!0,u.get("user").entry.content.get("capabilities")&&(this.canRealTimeSearch=s.contains(u.get("user").entry.content.get("capabilities"),"rtsearch")),this.canRealTimeSearch||(i.models=i.filter((function(e){return"rt"!==e.entry.content.get("latest_time")}))),s.isEmpty(t)||i.setSettings(t),this._timesCollection=i,this._pickerDfd=a.when(i.dfd),this._timesCollection.on("change reset",this._onTimePresetUpdate,this),this.settings.on("change:preset",this._onTimePresetUpdate,this),this.settings.on("change:default",this._onDefaultChange,this),this.settings.on("change:value",this._onTimeRangeChange,this),this.bindToComponentSetting("managerid",this._onManagerChange,this),void 0===this.settings.get("value")&&this._onTimePresetUpdate(),this._onReady(s.bind(this.trigger,this,"ready"))},_onReady:function(e){var t=a.Deferred().resolve();return this.settings.get("preset")&&!this.settings.get("value")&&(this._presetDfd=a.Deferred(),t=this._presetDfd.promise()),e&&t.always(e),t},_initializeValue:function(){var e=this,t=this.settings.get("value");if(null!=t?this.settings.set({earliest_time:t.earliest_time,latest_time:t.latest_time}):void 0!==this.settings.get("earliest_time")||void 0!==this.settings.get("latest_time")?this.settings.set("value",{earliest_time:this.settings.get("earliest_time"),latest_time:this.settings.get("latest_time")}):this.settings.set({value:void 0,earliest_time:void 0,latest_time:void 0}),this.settings.on("change:value",(function(t,i){i&&e.settings.set({earliest_time:i.earliest_time,latest_time:i.latest_time})})),this.settings.on("change:earliest_time change:latest_time",s.debounce((function(){var t=s.clone(e.settings.get("value"))||{};t.earliest_time=e.settings.get("earliest_time"),t.latest_time=e.settings.get("latest_time"),e.settings.set("value",t)})),this),h.isToken(this.settings.get("value",{tokens:!0}))){var i=h.getTokens(this.settings.get("value",{tokens:!0}))[0],n=function(t){return e.settings.get(t,{tokens:!0})===e.settings.get(t,{tokens:!1})};n("earliest_time")&&this.settings.set("earliest_time","$"+i.namespace+":"+i.name+".earliest_time$",{tokens:!0}),n("latest_time")&&this.settings.set("latest_time","$"+i.namespace+":"+i.name+".latest_time$",{tokens:!0})}void 0===this.settings.get("value")&&this.settings.set("value",this.settings.get("default"))},_onDefaultChange:function(){var e=this.settings.previous("default"),t=this.settings.get("default"),i=this.settings.get("value");void 0===t||!s.isEqual(i,e)&&void 0!==i||this.settings.set("value",t)},_onTimePresetUpdate:function(){var e=this.settings.get("preset");if(e){this._presetInFlightCancelled=!1;var t=this;a.when(this._pickerDfd).done((function(){var i=t._timesCollection.find((function(t){return t.entry.content.get("label")===e}));i?t._presetInFlightCancelled||t.val({earliest_time:i.entry.content.get("earliest_time"),latest_time:i.entry.content.get("latest_time")}):(o.warn('Could not find matching preset "'+e+'" for time range view.'),t.val({earliest_time:"0",latest_time:""})),t._presetDfd&&t._presetDfd.resolve()}))}},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.manager=t,t&&t.search&&(this.listenTo(t.search,"change:earliest_time change:latest_time",s.debounce(this._onManagerTimeRangeChange.bind(this))),this._onManagerTimeRangeChange())},_onManagerTimeRangeChange:function(){var e=this.val();e.earliest_time=this.manager.settings.get("earliest_time")||e.earliest_time,e.latest_time=this.manager.settings.get("latest_time")||e.latest_time,this.val(e)},_onTimeRangeChange:function(e,t,i){(!i||i&&!i._self)&&(this.trigger("change",this._getTimeRange(),this),this.render())},render:function(){return a.when(this._pickerDfd).done(function(){this.renderReactComponent()}.bind(this)),this},renderReactComponent:function(){d(p.createElement(this.getReactComponent(),this.getState()),this.getReactRoot())},getReactComponent:function(){return v},getReactRoot:function(){return this.el},getState:function(){var e=g.docHelp(u.get("app").get("root"),u.get("app").get("locale"),"learnmore.timerange.picker");return{presets:this.getPresets(),menuSettings:this.getMenuSettings(),onChange:function(e,t){this.val({earliest_time:t.earliest,latest_time:t.latest})}.bind(this),earliest:this._getTimeRange().earliest_time,latest:this._getTimeRange().latest_time,documentationURL:e}},getMenuSettings:function(){return this._timesCollection.filter((function(e){return"settings"===e.entry.get("name")})).map(function(e){return{showAdvanced:l(e.entry.content.get("show_advanced")),showDate:l(e.entry.content.get("show_date_range")),showDateTime:l(e.entry.content.get("show_datetime_range")),showPresets:l(e.entry.content.get("show_presets")),showRealtime:!!this.canRealTimeSearch&&l(e.entry.content.get("show_realtime")),showRelative:l(e.entry.content.get("show_relative"))}}.bind(this))[0]},getPresets:function(){return this._timesCollection.filter((function(e){return(e.entry.content.get("earliest_time")||e.entry.content.get("latest_time"))&&!e.entry.content.get("disabled")})).map((function(e){return{label:s(e.entry.content.get("label")).t(),earliest:e.entry.content.get("earliest_time")||"",latest:e.entry.content.get("latest_time")||""}}))},val:function(e){return 0===arguments.length||(e=e||{earliest_time:void 0,latest_time:void 0},this._setTimeRange(e),this._presetInFlightCancelled=!0),this._getTimeRange()},_getSelectedData:function(){var e=this._getTimeRange()||{};return{earliest:e.earliest_time,latest:e.latest_time,label:this._getSelectedLabel()}},_getSelectedLabel:function(){var e=this._getTimeRange();return f.createRangeLabel(e.earliest_time,e.latest_time,this.getPresets())},_getSelectedValue:function(){var e=this._getTimeRange()||{};return e=null!=e.earliest_time||null!=e.latest_time?[e.earliest_time||"",e.latest_time||""].join(":"):void 0},_hasValueForDashboards:function(){var e=this.settings.get("value"),t=this.settings.get("default");return null!=e||void 0===t||e===t},_setTimeRange:function(e){if(!Object.keys(e).find((function(e){return"earliest_time"===e||"latest_time"===e})))throw Error("invalid time range value: "+JSON.stringify(e));this.settings.set("value",e)},_getTimeRange:function(){var e=this.settings.get("value")||{};return{earliest_time:e.earliest_time||"",latest_time:e.latest_time||""}},remove:function(){m.unmountComponentAtNode(this.getReactRoot()),r.prototype.remove.apply(this,arguments)}})}.call(t,i,t,e))||(e.exports=n)},"splunkjs/mvc/visualizationview":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("shim/jquery"),a=i("require/underscore"),r=i("splunkjs/mvc/basesplunkview"),o=i("splunkjs/mvc/tokenawaremodel"),l=i("splunkjs/mvc/sharedmodels"),d=i("views/shared/ReportVisualizer"),c=i("splunkjs/mvc/paginatorview"),h=i("splunkjs/mvc/messages"),u=i("splunkjs/mvc/drilldown"),p=i("splunkjs/mvc/utils"),m=i("util/general_utils"),g=i("util/splunkd_utils"),f=i("util/datasource_utils"),v=i("shim/splunk.util");return r.extend({omitFromSettings:["el","reportModel"],options:{drilldownRedirect:!0,data:"preview",resizable:!1,refreshDisplay:"preview",pagerPosition:"bottom",pageSize:10},initialize:function(){r.prototype.initialize.apply(this,arguments),this.configure(),this.model=this.options.reportModel||o._createReportModel({},{_tokenRegistry:this.options.settingsOptions.registry}),this.syncSettingsAndReportModel(this.settings,this.model),this.syncGenericVizSettings(this.settings,this.model),this.options.reportModel&&!this.options.forceNormalizeSettings||this.normalizeSettings(this.settings,this.options),this.$el.css({overflow:"hidden",position:"relative"}),this.$msg=s('<div class="splunk-viz-msg" />'),this.$viz=s("<div/>").appendTo(this.el);var e=s.extend(!0,{},{el:this.$viz,allowResize:this.canEnableResize()&&this.settings.get("resizable"),saveOnResize:this.options.saveOnResize,autoHideResizeBar:!1,model:{config:this.model,application:l.get("app")},enableEditingReportProperty:this.options.enableEditingReportProperty,saveOnApply:this.options.saveOnApply},this.getVisualizationRendererOptions());this.viz=new d(e),this.listenTo(this.viz,"drilldown",this._emitDrilldownEvent),this.listenTo(this.viz,"dataSourcesChange",this._bindDataSources),this.listenTo(this.viz,"rendered",this.trigger.bind(this,"rendered",this)),this.listenTo(this.viz,"message",this.hideMessages),this.viz.load(),this.canEnableResize()&&this.listenTo(this.settings,"change:resizable",(function(e,t,i){this.viz.setAllowResize(t)})),this.canEnablePagination()&&(this._onShowPagerChanged(),this.listenTo(this.settings,"change:showPager",this._onShowPagerChanged),this.listenTo(this.settings,"change:pagerPosition",this._onPaginatorPositionChange)),this._bindDataSources(),this.bindToComponentSetting("managerid",this._onManagerChange,this)},syncGenericVizSettings:function(e,t){var i={};"refreshDisplayReportProperty"in this.options&&(i.refreshDisplay=this.options.refreshDisplayReportProperty),a.size(i)&&(this._genericSettingsSync=p.syncModels(e,t,{auto:!0,alias:i,include:a.keys(i)}))},configure:function(){return!1===this.options.normalizeSettings&&(this.omitFromSettings=(this.omitFromSettings||[]).concat(a(this.options).chain().omit("id","managerid","data","resizable","drilldownRedirect","pagerPosition").keys().value())),r.prototype.configure.apply(this,arguments)},render:function(){return this.viz.render(),this.paginator&&this.paginator.render(),this},show:function(){this.$el.css("display","")},hide:function(){this.$el.css("display","none")},remove:function(){return this.viz.remove(),this._genericSettingsSync&&this._genericSettingsSync.destroy(),this._customPropSync&&this._customPropSync.destroy(),this._settingsSync&&this._settingsSync.destroy(),this.paginator&&this.paginator.remove(),r.prototype.remove.call(this)},isJobDone:function(){return!!this._isJobDone},hideMessages:function(){this.$msg.detach(),this.showVisualization(),this.paginator&&this.paginator.$el.show()},syncSettingsAndReportModel:function(e,t){this._customPropSync=p.syncModels(e,t,{auto:!0,prefix:"display.visualizations.custom.",include:["type","height"]}),this._settingsSync=p.syncModels(e,t,{auto:!0,prefix:"display.visualizations.custom.",exclude:["managerid","id","name","data","type","drilldownRedirect","pagerPosition","refreshDisplay"]})},normalizeSettings:function(e,t){if(e.has("count")){var i=parseInt(t.count,10)||10;e.set("pageSize",i>100||i<1?10:i)}e.set({height:parseInt(e.get("height"),10)||0})},getVisualizationRendererOptions:function(){return{generalTypeOverride:d.GENERAL_TYPES.VISUALIZATIONS,customConfigOverride:{"display.visualizations.type":"custom"}}},formatData:function(e){return e},message:function(e){this.viz&&a.result(this.viz,"suppressExternalMessage",!1)||(this.$msg.detach(),h.render(e,this.$msg),this.updateMessageHeight(),this.$msg.prependTo(this.$el),this.hideVisualization(),this.paginator&&this.paginator.$el.hide())},updateMessageHeight:function(){this.$msg.height(this.settings.get("height"))},hideVisualization:function(){this.viz.hide()},showVisualization:function(){this.viz.show()},canEnableResize:function(){return!0},canEnablePagination:function(){return!1},getDrilldownData:function(e){return u.normalizeDrilldownEventData(e,{manager:this.primaryManager,contextProperty:"rowContext",jobTimeOnly:a.result(this,"drilldownWithJobTimeOnly",!1)})},onDrilldown:function(e,t){},_unbindDataSources:function(){a.each(this.dataSources||[],(function(e){e.disconnect(),this.stopListening(e)}),this),this.managerConnection=null},_bindDataSources:function(){if(this._unbindDataSources(),this.viz&&this.managers){var e=f.pairDataSourcesWithProviders(this.viz.getAllDataSources(),this.managers,(function(e){return e.getType()}));this.dataSources=[],a.each(e.match,(function(e,t){var i=e.dataSource,n=e.provider;this.dataSources.push(i),"primary"===i.name?(this.listenTo(i,"searchError",(function(e,t,i){this._onPrimarySearchError(t,i)})),this.listenTo(i,"searchResultsChange",this._onPriamryDataChanged),this.canEnablePagination()&&i.updateFetchParams({count:Math.min(this.settings.get("pageSize")||10,100)}),this.managerConnection=i.connectToSearchManager(n,{formatter:this.formatData.bind(this)})):(this.stopListening(n),this.listenTo(n,"search:done",a.partial(this._onSecondarySearchDone,n)),i.connectToSearchManager(n),n.replayLastSearchEvent(this))}),this)}},_onManagerChange:function(e){this.managers&&(a.each(this.managers,(function(e){this.stopListening(e)}),this),this.managers=null),null!=e&&0!==e.length?e&&(this.managers=e,this._bindDataSources(),a.each(this.managers,(function(e){"primary"===e.getType()&&(this.primaryManager=e,this._clearPrimaryResults(),this.message("empty"),this.listenTo(e,"search:fail",this._onPrimarySearchFail),this.listenTo(e,"search:error",this._onPrimarySearchError),this.listenTo(e,"search:start",this._onPrimarySearchStart),this.listenTo(e,"search:progress search:done",this._onPrimarySearchProgress),this.listenTo(e,"search:done",this._onPrimarySearchDone),this.listenTo(e,"search:cancelled",this._onPrimarySearchCancelled),this.listenTo(e,"search:refresh",this._onPrimarySearchRefresh),this.listenTo(e,"viz:onRefresh",this._onRefresh),e.replayLastSearchEvent(this))}),this)):this.message("no-search")},_onPriamryDataChanged:function(e){e.hasSearchResults()?this.hideMessages():this.isJobDone()&&this.message("no-results")},_clearPrimaryResults:function(){this.viz.getPrimaryDataSource()&&this.viz.getPrimaryDataSource().clearSearchResults(),this.paginator&&this.paginator.settings.set("itemCount",0)},_isSilentRefreshEnabled:function(){return"preview"!==this.settings.get("refreshDisplay")},_onPrimarySearchStart:function(){this._isSilentRefreshEnabled()&&this.primaryManager.isRefresh()?this._unbindDataSources():(this.paginator&&this.paginator.settings.set("page",0),this._isJobDone=!1,this._clearPrimaryResults(),this.message("waiting"))},_onPrimarySearchDone:function(e){this._isSilentRefreshEnabled()&&this.primaryManager.isRefresh()&&this._bindDataSources()},_onPrimarySearchProgress:function(e){var t=(e=e||{}).content||{},i=t.resultPreviewCount||0,n=this._isJobDone=t.isDone||!1;this._isSilentRefreshEnabled()&&this.primaryManager.isRefresh()&&!n||("QUEUED"===t.dispatchState?this.message("waiting-queued"):0===i&&this.message(n?"no-results":"waiting"),this.paginator&&i>0&&this.paginator.settings.set("itemCount",i))},_onPrimarySearchCancelled:function(){this._isJobDone=!1,this.message("cancelled")},_onRefresh:function(){this.viz&&this.viz.onRefresh&&this.viz.onRefresh()},_onPrimarySearchRefresh:function(){this._isJobDone=!1,this._isSilentRefreshEnabled()||this.message("refresh")},_onPrimarySearchError:function(e,t){this._isJobDone=!1;var i=h.getSearchErrorMessage(t)||e;g.getParentRiskyError(this.primaryManager.parent)?this.message({level:"error",icon:"warning-sign",message:a("Paused: Dependent on successful preceding search.").t()}):this.message({level:"error",icon:"warning-sign",message:i})},_onPrimarySearchFail:function(e){this._isJobDone=!1;var t=h.getSearchFailureMessage(e);this.message({level:"error",icon:"warning-sign",message:t})},_onSecondarySearchDone:function(e,t){if(this.viz){var i=this.viz.getDataSource(e.getType());if(i){var n=null==i.getFetchParams().count?100:i.getFetchParams().count,s=t.content,r=s.reportSearch?s.resultPreviewCount:s.eventAvailableCount;if(n<r){var o=v.sprintf(a("[%s] The results are truncated (%s of %s have been fetched).").t(),e.getType(),n,r);this.trigger("searchMessageUpdate",e,"warning",o)}}}},_emitDrilldownEvent:function(e){var t=this.getDrilldownData(e),i={field:e.name2||e.name||t["click.name"],data:t,event:e},n=u.createEventPayload(i,a.bind(u.autoDrilldown,null,e,this.primaryManager));this.trigger("drilldown click",n,this),this.onDrilldown(e,n),"none"!==this.settings.get("drilldown")&&this.settings.get("drilldownRedirect")&&!n.defaultPrevented()&&n.drilldown()},_onShowPagerChanged:function(){!1!==m.normalizeBoolean(this.settings.get("showPager"),{default:!0})?this.paginator||(this.paginator=new c({id:a.uniqueId(this.id+"-paginator"),el:s("<div></div>"),pageSize:this.settings.get("pageSize")}),this.listenTo(this.settings,"change:pageSize",this._onPageSizeChanged),this.listenTo(this.paginator.settings,"change:page",(function(){var e=this.settings.get("pageSize"),t=this.paginator.settings.get("page");this.settings.set("offset",e*t)}),this),this._onPaginatorPositionChange()):this.paginator&&(this.stopListening(this.settings,"change:pageSize",this._onPageSizeChanged),this.stopListening(this.paginator.settings,"change:page"),this.paginator.remove(),this.paginator=null)},_onPageSizeChanged:function(){this.paginator.settings.set("pageSize",this.settings.get("pageSize"))},_onPaginatorPositionChange:function(){var e="bottom"===this.settings.get("pagerPosition")?"appendTo":"prependTo";this.paginator&&(this.paginator.$el.detach(),this.paginator.$el[e](this.$el))}})}.call(t,i,t,e))||(e.exports=n)},"util/Profiler":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("util/moment"),i("shim/splunk.util"),i("shim/splunk.logger")],void 0===(s=function(e,t,i,n,s,a){var r=s.sprintf,o=function(){o.prototype.initialize.apply(this,arguments)};t.extend(o.prototype,{initialize:function(e){e||(e={}),!1!==e.autoStart&&this.start()},start:function(){this._start=Date.now()},fromNow:function(){if(!this._start)throw new Error("Please start the timer first");return Date.now()-this._start}});var l=function(){l.prototype.initialize.apply(this,arguments)};t.extend(l.prototype,{initialize:function(e,t,i){i||(i={}),this.profiler=e,this.name=t,this.options=i},newTimer:function(e){return e||(e={}),new o(t.extend({},this.options,e))},profiledFunction:function(e,i){var n=this;return t.wrap(i,(function(t){var i=n.newTimer(),s=Array.prototype.slice.call(arguments,1),a=t.apply(this,s);return n.log({function:e,duration:i.fromNow()}),a}))},profileFunctions:function(e){if("object"==typeof e){var i=Array.prototype.slice.call(arguments,1);t.each(i,(function(i){t.isFunction(e[i])&&(e[i]=this.profiledFunction(i,e[i]))}),this)}},log:function(e){var i=a.getLogger(this.name),n=[r("profiler=%s",this.profiler.name)];t.each(t.extend({},this.options,e),(function(e,t){n.push(r("%s=%s",t,e))}),this),i[this.options.level](n.join(", "))}});var d=function(){d.prototype.initialize.apply(this,arguments)};t.extend(d.prototype,i.Events,{initialize:function(e,i){this.options=t.defaults(i||{},{level:"debug"}),this.name=e||"Unnamed Profiler"},module:function(e,i){return i||(i={}),new l(this,e,t.extend({},this.options,i))}});var c={};return d.get=function(e,t){return c[e]||(c[e]=new d(e,t)),c[e]},d.clear=function(){c={}},d.isEnabled=function(){return"None"!=s.getConfigValue("JS_LOGGER_MODE","None")},d}.apply(t,n))||(e.exports=s)},"util/datasource_utils":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});t.pairDataSourcesWithProviders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.name},n={},s=[],a=t;return e.forEach((function(e){var t=a.find((function(t){return i(t)===e.name}));t?(a=a.filter((function(e){return e!==t})),n[e.name]={dataSource:e,provider:t}):s.push(e)})),{match:n,orphanedDataSources:s,orphanedProviders:a}}},"util/jquery_polyfills":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(379),a=(n=s)&&n.__esModule?n:{default:n};t.extend=function(e){for(var t=e||{},i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return n.forEach((function(e){e&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},t.deepExtend=function e(t){for(var i=t||{},n=arguments.length,s=Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.forEach((function(t){var n=t;n&&Object.keys(n).forEach((function(t){"object"===(0,a.default)(n[t])?n[t]instanceof Array?i[t]=n[t].slice(0):i[t]=e(i[t],n[t]):i[t]=n[t]}))})),i}},"util/moment/compactFromNow":function(e,t,i){var n,s;n=[i("util/moment")],void 0===(s=function(e){var t=Math.round;return e.duration.fn.humanizeCompact=function(e){var i,n,s,a,r,o,l,d,c,h,u,p,m,g=+this,f=(i=g,n=!e,s=this.localeData(),a=t(Math.abs(i)/1e3),r=t(a/60),o=t(r/60),l=t(o/24),d=t(l/365),c=a<45&&["s",a]||1===r&&["m"]||r<45&&["mm",r]||1===o&&["h"]||o<22&&["hh",o]||1===l&&["d"]||l<=25&&["dd",l]||l<=45&&["M"]||l<345&&["MM",t(l/30)]||1===d&&["y"]||["yy",d],h=c[0],u=c[1]||1,p=i>0,void 0===(m=(s._compactRelativeTime||{})[h])?s.relativeTime(u,!!n,h,p):"function"==typeof m?m(u,n,h,p):m.replace(/%d/i,u));return e&&(f=this.localeData().pastFuture(g,f)),this.localeData().postformat(f)},e.fn.compactFromNow=function(t){return e.duration(this.diff(e())).locale(this.localeData()._abbr).humanizeCompact(!t)},e}.apply(t,n))||(e.exports=s)},"views/dashboard/Base":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/Base"),i("splunkjs/mvc"),i("splunkjs/mvc/settings"),i("shim/splunk.util"),i("mixins/viewlogging"),i("dashboard/mixins/ComponentBindingMixin")],void 0===(s=function(e,t,i,n,s,a,r,o,l){var d={register:!0},c=r.sprintf;return n.extend(t.extend({},o,l,{viewOptions:{},omitFromSettings:[],_uniqueIdPrefix:"view_",constructor:function(e,i){i=i||{},(e=e||{}).settingsOptions=t.extend(e.settingsOptions||{},i),this._removed=!1,e.id?(this.id=e.id,this.autoId=e.autoId||!1):(this.id=t.uniqueId(this._uniqueIdPrefix||"view_"),this.autoId=!0),this.options=t.extend({},this.options,e),this.options.moduleId&&(this.moduleId=this.options.moduleId),this.viewOptions=t.defaults(this.viewOptions,d);var a=n.prototype.constructor.apply(this,arguments);return this.viewOptions.register&&s.Components.registerInstance(this.id,this,{replace:i.replace}),a},configure:function(){var e=this.options.settings;if(e&&e instanceof a)return this.settings=e,this.ownSettings=!1,this;var i=(this.omitFromSettings||[]).concat(["model","collection","el","attributes","className","tagName","events","settingsOptions","deferreds","autoId"]),n=t.omit(this.options,i),s=this.options.settingsOptions;return this.settings=new a(n,s),this.ownSettings=!0,this},remove:function(){return this._removed=!0,this.ownSettings?this.settings.dispose():this.settings.off(null,null,this),n.prototype.remove.apply(this,arguments),this.viewOptions.register&&s.Components.get(this.id)===this&&s.Components.revokeInstance(this.id),this},dispose:function(){this.remove()},initialize:function(){n.prototype.initialize.apply(this,arguments),this.configure()},createOrFind:function(i,n,s){i=i.split(" "),n=n||this.$el,s=s||"div";var a=t(i).map((function(e){return"."+e})).join(""),r=n.children(a);if(!r.length){var o=c('<%s class="%s"></%s>',s,i.join(" "),s);r=e(o).prependTo(n)}return r},addChild:function(e){e.render().$el.appendTo(this.$el)},getChildElements:function(i){return t(this.$el.find(i)).chain().map((function(t){return e(t).attr("id")})).map(t.bind(s.Components.get,s.Components)).filter(t.identity).value()},render:function(){return n.prototype.render.apply(this,arguments),this},isEditMode:function(){return"edit"==this.model.state.get("mode")},show:function(){this.$el.removeClass("hidden").trigger("elementVisibilityChanged")},hide:function(){this.$el.addClass("hidden").trigger("elementVisibilityChanged")}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/EmptyStatus":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util")],void 0===(s=function(e,t,i,n,s){return n.View.extend({moduleId:e.i,initialize:function(e){n.View.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:mode",this.render,this)},events:{"click a.start-edit":function(e){e.preventDefault(),this.model.controller.trigger("mode:edit")}},render:function(){var e=this.model.view.entry.acl.canWrite();this.$el.empty().addClass("empty-dashboard");var n=t('<div class="alert alert-error"><i class="icon-alert"></i></div>');if(e){var a;if("edit"==this.model.state.get("mode"))a=i("Click Add Panel to start.").t();else if(1==this.model.page.get("hideTitle")||1==this.model.page.get("hideEdit"))a=i("This dashboard has no panels.").t();else{a=i("This dashboard has no panels. %s to add panels.").t();var r=s.sprintf('<a class="start-edit" href="#edit">%s</a>',i("Start editing").t());a=s.sprintf(a,r)}t("<span></span>").html(a).appendTo(n)}else t("<span></span>").text(i("This dashboard has no panels.").t()).appendTo(n);return n.appendTo(this.$el),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/Master":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/header/DashboardHeader"),i("views/dashboard/header/DashboardMessages"),i("dashboard/mixins/EventManagerMixin"),i(307)],void 0===(s=function(e,t,i,n,s,a,r,o){return n.extend(i.extend({},r,{moduleId:e.i,className:"dashboard",initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.messages=new a({model:this.model,collection:this.collection,deferreds:this.options.deferreds}),this.children.headerView=new s({model:this.model,collection:this.collection,settings:this.settings,deferreds:this.options.deferreds,showDescription:!0,allowEdit:!0}),this.model.page.setFromDashboardXML(this.settings.toJSON()),this.listenTo(this.model.state,"change:mode",this._onModeChange),this.setupEventManager()},updateKvStore:function(){try{const e={id:this.model.view.entry.get("name"),name:this.model.view.entry.content.get("label"),app:this.model.view.entry.content.get("eai:appName")};o.default.dashboardViewed(e).catch(()=>{})}catch(e){}},render:function(){return this.children.messages.render().$el.appendTo(this.$el),this.children.headerView.render().$el.appendTo(this.$el),this._onModeChange(),this.updateKvStore(),this},remove:function(){this.model.page.removeFromDashboardXML(),n.prototype.remove.apply(this,arguments)},componentReady:function(){return this.onEventManagerReady()},_onModeChange:function(){const e=this.model.state.previous("mode"),t=this.model.state.get("mode");this.$el.removeClass(e+"-mode").addClass(t+"-mode")}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/DescriptionEditor":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/editor/TitleEditor")],void 0===(s=function(e,t,i,n){return n.extend({moduleId:e.i,attribute:"description",className:"title-editor description-editor",tagName:"textarea",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.placeholder=e.placeholder||i("No description").t()}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/ElementEditor":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("controllers/dashboard/helpers/ReportModelHelper"),i("models/dashboard/DashboardElementReport"),i("views/dashboard/Base"),i("views/dashboard/editor/element/InlineSearchControls"),i("views/dashboard/editor/element/SavedSearchControls"),i("views/dashboard/editor/element/MiscControlsAdapter"),i("splunkjs/mvc"),i("splunkjs/mvc/savedsearchmanager"),i("uri/route"),i("splunkjs/mvc/tokenutils"),i("views/shared/vizcontrols/Master"),i("util/dashboard_utils"),i("views/dashboard/editor/ElementEditor.pcssm")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g){return a.extend({moduleId:e.i,viewOptions:{register:!1},className:"dashboard-element-editor "+g.flexContainer,initialize:function(){a.prototype.initialize.apply(this,arguments),this.bindToComponentSetting("managerid",this.renderElementControl,this),this.bindToComponentSetting("evtmanagerid",this.renderElementControl,this),this.children.vizControls=new p({model:{report:this.model.report,application:this.model.application,user:this.model.user},vizTypes:["events","statistics","visualizations"],saveOnApply:!0,vizpicker:this.reportContainsTokenInVizType()?{warningMsg:i("Warning: Changes here can overwrite related token settings and behavior in your source code.").t()}:void 0,format:this.reportContainsTokenInFormat()?{warningMsg:i("Warning: Changes here can overwrite related token settings and behavior in your source code.").t()}:void 0,dashboard:!0}),this.listenTo(this.model.report.entry.content,s.getTypeChangeEvents().join(" "),this.updateDrilldown)},reportContainsTokenInVizType:function(){var e=this.model.elementReport.toJSON({tokens:!0});return null!=i.find(s.getVizTypeReportProperties(),(function(t){return e[t]&&u.hasToken(e[t])}))},reportContainsTokenInFormat:function(){var e=this.model.elementReport.toJSON({tokens:!0});return null!=i.chain(e).pairs().find((function(e){var t=0===e[0].indexOf("display"),n=i(s.getVizTypeReportProperties()).indexOf(e[0])<0,a=u.hasToken(e[1]);return t&&n&&a})).value()},renderElementControl:function(){this.children.elementControls&&this.children.elementControls.remove(),this.children.miscControls&&this.children.miscControls.remove();var e=m.getPrimarySearchManager(this.settings.get("managerid"),d.Components),t=d.Components.get(this.settings.get("evtmanagerid")),i=e instanceof c?o:r;this.children.elementControls=new i({model:this.model,collection:this.collection,searchManager:e,eventManager:t,settings:this.settings}),this.children.elementControls.render().$el.prependTo(this.$el),this.children.miscControls=new l({model:this.model,collection:this.collection,searchManager:e,eventManager:t,settings:this.settings}),this.children.miscControls.render().$el.appendTo(this.$el)},updateDrilldown:function(){this.model.report.entry.content.set(n.transferDrilldown(this.model.report.entry.content.previousAttributes(),this.model.report.entry.content.toJSON()))},render:function(){return this.renderElementControl(),this.children.vizControls.render().$el.appendTo(this.$el),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/ElementEditor.pcssm":function(e,t,i){var n=i(631);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/editor/FieldsetEditor":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/Base")],void 0===(s=function(e,t,i,n){return n.extend({moduleId:e.i,className:"form-settings",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.fieldset=e.parent,this.settings=e.parent.settings,this.listenTo(this.settings,"change:autoRun",this.render)},render:function(){return this.$el.html(this.compiledTemplate({label:i("Autorun dashboard").t(),checked:this.settings.get("autoRun")})),this},events:{"click label":"_updateState","click .btn":function(e){e.preventDefault()}},_updateState:function(e){e.preventDefault();var t=!this.settings.get("autoRun");this.settings.set("autoRun",t),this.model.controller.trigger("edit:fieldset",{fieldsetId:this.fieldset.id})},template:'            <label class="checkbox">                  <a href="#" class="btn"><i class="icon-check" <% if (!checked) {%>style="display:none"<% } %>></i></a>                  <%= label%>            </label>        '})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/PanelEditor":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/Base"),i("views/shared/delegates/Popdown"),i("shim/bootstrap.tooltip")],void 0===(s=function(e,t,i,n,s){return n.extend({moduleId:e.i,className:"dashboard-panel-editor",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.popdownLabel=e.label||i("Inline Panel").t(),this.icon=e.icon||"icon-gear",this.actions=e.actions},render:function(){this.$el.html(this.compiledTemplate({popdownLabel:this.popdownLabel,icon:this.icon}));var e=i(this.actions).map((function(e){var i=t('<a href="#"></a>').addClass(e.className).text(e.label).attr("name",e.name);return e.tooltip&&i.tooltip({animation:!1,title:e.tooltip,container:"body"}),t("<li></li>").append(i)}));return this.$(".dashboard-panel-actions").append(e),this.children.popdown=new s({el:this.el,mode:"dialog"}),this},events:{"click li>a":function(e){if(e.preventDefault(),!t(e.currentTarget).is(".disabled")){var i=t(e.currentTarget).attr("name");this.trigger(i),this.children.popdown.hide()}}},template:'                <a href="#" class="dropdown-toggle btn-pill">                    <span class="<%- icon %>"></span>                </a>                <div class="dropdown-menu">                    <div class="arrow"></div>                        <ul class="dashboard-panel-actions">                            <li class="panel-type-label"><%- popdownLabel %></li>                        </ul>                </div>            '})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/TitleEditor":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/dashboard/editor/TitleEditor.pcssm")],void 0===(s=function(e,t,i,n,s){return n.View.extend({moduleId:e.i,tagName:"input",className:"title-editor label-editor "+s.fullWidth,initialize:function(e){n.View.prototype.initialize.apply(this,arguments),this.tokenEnabled=!1!==e.tokens,this.attribute=e.attribute||"title",this.placeholder=e.placeholder||i("Untitled").t(),this.listenTo(this.model,"change:"+this.attribute,(function(){this._updateFromModel()})),this._updateModel=i.debounce(this._updateModel.bind(this),50)},_updateFromModel:function(){var e=this.$el.val(),t=this.model.get(this.attribute,{tokens:this.tokenEnabled});e!=t&&this.$el.val(t?i(t).t():"")},_updateModel:function(){var e=this.$el.val();this.model.get(this.attribute,{tokens:this.tokenEnabled})!=e&&(this.model.set(this.attribute,e,{tokens:this.tokenEnabled}),this.trigger("change:title",e))},events:{change:"_updateModel",keydown:function(e){27==e.keyCode||13==e.keyCode?(e.preventDefault(),this.blur()):this._updateModel()}},blur:function(){this._updateModel(),this.$el.blur()},focus:function(){this.$el.focus()},render:function(){return this.$el.attr("type","text").attr("placeholder",this.placeholder),this._updateFromModel(),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/TitleEditor.pcssm":function(e,t,i){var n=i(619);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/editor/dialogs/ConvertPanel":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("models/services/data/ui/Panel"),i("views/Base"),i("views/shared/Modal"),i("views/shared/MultiStepModal"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/TextControl"),i("views/shared/FlashMessages"),i("util/splunkd_utils"),i("shim/splunk.util"),i("uri/route")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p){u.sprintf;var m=a.extend({className:"step step-create",initialize:function(e){a.prototype.initialize.apply(this,arguments),this.panelComponent=e.panelComponent,this.children.flashMessage=new c({model:{panel:this.model.panelModel}}),this.children.panelNameTextControl=new d({model:this.model.panelProperties,modelAttribute:"panelName"}),this.children.panelName=new l({label:i("ID").t(),controls:this.children.panelNameTextControl,tooltip:i("The ID is used as the filename on disk. Cannot be changed later.").t(),help:i("The prebuilt panel ID can only contain letters, numbers, dashes, and underscores. Do not start the prebuilt panel ID with a period.").t()}),this.children.panelPerm=new l({label:i("Permissions").t(),controlType:"SyntheticRadio",controlOptions:{additionalClassNames:"btn-group-2",items:[{value:"private",label:i("Private").t()},{value:"shared",label:this.model.user.canUseApps()?i("Shared in App").t():i("Shared").t()}],model:this.model.panelProperties,modelAttribute:"panelPerm"}})},render:function(){this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(i("Convert to Prebuilt Panel").t()),this.children.flashMessage.render().prependTo(this.$(r.BODY_SELECTOR)),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL_JUSTIFIED);var e=this.$(r.BODY_FORM_SELECTOR);return this.children.panelName.render().appendTo(e),this.children.panelPerm.render().appendTo(e),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_APPLY),this},setSelected:function(e){this.$el[e?"addClass":"removeClass"]("active-step")},events:{"click .modal-btn-primary":function(e){e.preventDefault(),this.createPrebuiltPanel()}},createPrebuiltPanel:function(){this.model.controller.trigger("edit:make-prebuilt-panel",{panelId:this.panelComponent.id,panelComponent:this.panelComponent,panelModel:this.model.panelModel,panelProperties:this.model.panelProperties})}}),g=a.extend({className:"step step-success",initialize:function(e){a.prototype.initialize.apply(this,arguments)},updateContent:function(){this.$(r.BODY_SELECTOR).html(this.compiledTemplate({msgHTML:i("You may now add your reference panel to other dashboards.").t()}))},render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).text(i("Your Panel Has Been Created").t()),this.$(r.FOOTER_SELECTOR).append(t('<a href="#" class="btn cancel btn-primary modal-btn-primary pull-right" data-dismiss="modal"></a>').text(i("OK").t())),this},setSelected:function(e){this.$el[e?"addClass":"removeClass"]("active-step")},template:'<p class="convert-panel-success-message"><%= msgHTML %></p>'});return o.extend({moduleId:e.i,initialize:function(e){o.prototype.initialize.apply(this,arguments),this.panelComponent=e.panelComponent,this.model=i.extend({panelModel:new s,panelProperties:new n.Model({panelPerm:"private",panelTitle:this.panelComponent.settings.get("title"),panelName:h.nameFromString(this.panelComponent.settings.get("title"))})},this.model),this.children.createDialog=new m({model:this.model,panelComponent:this.panelComponent}),this.children.successDialog=new g({model:this.model,panelComponent:this.panelComponent}),this.listenTo(this.model.panelModel,"createSuccess",this._onPrebuiltPanelCreated)},_onPrebuiltPanelCreated:function(){this.children.successDialog.updateContent(),this.stepViewStack.setSelectedView(this.children.successDialog)},events:{"hidden.bs.modal":function(e){e.target===this.el&&(this.stepViewStack.remove(),this.remove())}},getStepViews:function(){return[this.children.createDialog,this.children.successDialog]}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/dialogs/CreateReport":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/search/Report"),i("views/shared/controls/ControlGroup"),i("views/shared/Modal"),i("views/shared/FlashMessages")],void 0===(s=function(e,t,i,n,s,a,r,o){return r.extend({moduleId:n.i,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.newReport=new s,this.model.newReport.entry.content.set("name",this.model.report.entry.content.get("dashboard.element.title")),this.children.flashMessagesReport=new o({model:this.model.newReport}),this.on("hide",this.model.newReport.error.clear,this.model.newReport.error),this.children.reportNameControlGroup=new a({label:t("Report Title").t(),controlType:"Text",controlOptions:{model:this.model.newReport.entry.content,modelAttribute:"name"}}),this.children.reportDescriptionControlGroup=new a({label:t("Description").t(),controlType:"Textarea",controlOptions:{model:this.model.newReport.entry.content,modelAttribute:"description",placeholder:t("optional").t()}})},events:e.extend({},r.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){e.preventDefault(),this.trigger("saveAsReport",this.model.newReport)},render:function(){this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(t("Convert to Report").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessagesReport.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL_JUSTIFIED),this.$(r.BODY_FORM_SELECTOR).append(this.children.reportNameControlGroup.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.reportDescriptionControlGroup.render().el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_APPLY)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/dialogs/EditDrilldown":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=T(i("require/underscore")),s=T(i(0)),a=i(330),r=T(i("dashboard/components/shared/BackboneProvider")),o=T(i(622)),l=T(i(623)),d=T(i("views/ReactAdapterBase")),c=T(i("dashboard/containers/editor/drilldown/drilldownReducer")),h=T(i("dashboard/containers/editor/drilldown/DrilldownContainer")),u=i("dashboard/containers/editor/drilldown/drilldownActions"),p=i("dashboard/containers/editor/drilldown/search/searchActions"),m=i("dashboard/containers/editor/drilldown/dashboard/dashboardActions"),g=i("dashboard/containers/editor/drilldown/report/reportActions"),f=i("dashboard/containers/editor/drilldown/url/urlActions"),v=i("dashboard/containers/editor/drilldown/tokens/tokensActions"),b=i("controllers/dashboard/helpers/DrilldownStateConverter"),y=i("dashboard/containers/editor/drilldown/drilldownNames"),_=i("dashboard/containers/utils/validators"),w=i("util/env"),k=i("dashboard/containers/editor/drilldown/search/timeRangeOptionNames");function T(e){return e&&e.__esModule?e:{default:e}}t.default=d.default.extend({moduleId:e.i,initialize:function(e){for(var t=e.settings,i=e.eventManager,n=e.model,s=e.collection,r=void 0===s?{}:s,h=arguments.length,u=Array(h>1?h-1:0),p=1;p<h;p++)u[p-1]=arguments[p];d.default.prototype.initialize.apply(this,u),this.eventManager=i,this.settings=t,this.model=n,this.collection=r;var m=[o.default];if(w.DEBUG){var g=(0,l.default)({actionTransformer:function(e){return Object.assign({},e,{type:String(e.type)})},collapsed:!0});m.push(g)}this.store=(0,a.createStore)(c.default,(0,b.createInitialState)({model:this.model,eventManager:this.eventManager}),a.applyMiddleware.apply(void 0,m)),this.updateSettingFromState=this.updateSettingFromState.bind(this),this.remove=this.remove.bind(this),this.bootstrap()},bootstrap:function(){var e=this;this.store.dispatch((0,u.fetchTimeRangePresets)({app:this.model.application.get("app"),owner:this.model.application.get("owner"),count:-1})),this.store.dispatch((0,u.fetchApps)()),this.store.dispatch((0,u.fetchDashboards)({app:this.store.getState().forms[y.LINK_TO_DASHBOARD].activeApp})).then((function(){return e.store.dispatch((0,u.validateLinkToDashboard)())})),this.store.dispatch((0,u.fetchReports)({app:this.store.getState().forms[y.LINK_TO_REPORT].activeApp}))},validate:function(){var e=function(e){return n.default.values(e).some((function(e){return""!==e}))},t=this.store.getState(),i=void 0,s=void 0;switch(t.activeAction){case y.NO_DRILLDOWN:return!0;case y.LINK_TO_SEARCH:return"custom"!==(s=t.forms[y.LINK_TO_SEARCH]).activeOption||(i={searchError:(0,_.stringNotEmpty)(s.search)},s.activeTimeRangeOption===k.TOKEN_OPTION&&Object.assign(i,{earliestTokenError:(0,_.stringNotEmpty)(s.activeTimeRangeToken.earliest),latestTokenError:(0,_.stringNotEmpty)(s.activeTimeRangeToken.latest)}),!e(i))||(this.store.dispatch((0,p.updateLinkToSearchSetting)(i)),!1);case y.LINK_TO_DASHBOARD:return s=t.forms[y.LINK_TO_DASHBOARD],!e(i={activeAppError:(0,_.stringNotEmpty)(s.activeApp),activeDashboardError:(0,_.stringNotEmpty)(s.activeDashboard)})||(this.store.dispatch((0,m.updateLinkToDashboardSetting)(i)),!1);case y.LINK_TO_REPORT:return s=t.forms[y.LINK_TO_REPORT],!e(i={activeAppError:(0,_.stringNotEmpty)(s.activeApp),activeReportError:(0,_.stringNotEmpty)(s.activeReport)})||(this.store.dispatch((0,g.updateLinkToReportSetting)(i)),!1);case y.LINK_TO_CUSTOM_URL:return s=t.forms[y.LINK_TO_CUSTOM_URL],!e(i={urlError:(0,_.stringNotEmpty)(s.url)})||(this.store.dispatch((0,f.updateLinkToURLSetting)(i)),!1);case y.EDIT_TOKENS:return s=t.forms[y.EDIT_TOKENS],0===n.default.filter(s.items,(function(e){return e.type&&e.token})).length&&(i={error:(0,n.default)("Should have at least one token.").t()}),!e(i)||(this.store.dispatch((0,v.updateTokensSetting)(i)),!1);default:return!0}},updateSettingFromState:function(e){var t=this.store.getState();if(t.isSupported){if(!this.validate(t))return;(0,b.applyState)({state:t,settings:this.settings,model:this.model,eventManager:this.eventManager})}e.close()},getComponent:function(){var e=this;return s.default.createElement(r.default,{store:this.store,model:this.model,collection:this.collection},s.default.createElement(h.default,{onApply:this.updateSettingFromState,onClose:function(){n.default.delay(e.remove,300)}}))}}),e.exports=t.default},"views/dashboard/editor/dialogs/EditSearch":function(e,t,i){var n,s;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),e,i("views/shared/controls/ControlGroup"),i("views/shared/delegates/ModalTimerangePicker"),i("views/shared/timerangepicker/dialog/Master"),i("views/shared/Modal"),i("models/shared/TimeRange"),i("collections/services/data/ui/Times"),i("shim/splunk.util"),i("splunkjs/mvc/utils"),i("views/Base"),i("uri/route"),i("util/time"),i("shim/bootstrap.tooltip"),i("util/console"),i("splunkjs/mvc"),i("splunkjs/mvc/postprocessmanager"),i("views/shared/FlashMessages"),i("views/shared/controls/SearchTextareaControl"),i("views/dashboard/editor/element/TimeRangePanel"),i("controllers/dashboard/helpers/EditingHelper"),i("controllers/dashboard/helpers/ModelHelper"),i("splunkjs/mvc/tokenawaremodel"),i("util/moment/relative"),i("util/theme_utils"),i("splunkjs/mvc/tokenutils"),i("views/dashboard/editor/dialogs/EditSearch.pcss")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g,f,v,b,y,_,w,k,T,S,C,E,R,x){var D=l.extend({validation:e.extend({earliest_token:function(e,t,i){if("tokens"===i.useTimeFrom&&!e)return"No value specified for earliest token."},latest_token:function(e,t,i){if("tokens"===i.useTimeFrom&&!e)return"No value specified for latest token."}},l.prototype.validation)}),M=S.extend({validation:{search:function(t,i,n){if(!this.get(i,{tokens:!0}))return e("Search string is required").t()},refresh:function(t,i){var n=this.get(i,{tokens:!0});if(n&&!R.hasTokenName(n)&&!C.isRelativeTimeExpression(n))return e("Invalid auto refresh delay").t()}}});return o.extend({moduleId:n.i,className:"modal edit-search-string "+o.CLASS_MODAL_WIDE,initialize:function(t){o.prototype.initialize.apply(this,arguments),this.searchManager=t.searchManager,this.model.searchModel=new M(e.pick(this.searchManager.settings.toJSON({tokens:!0}),["search","earliest_time","latest_time","refresh","refreshType"]),{applyTokensByDefault:!0,retrieveTokensByDefault:!0}),this.model.searchModel.set("refreshDisplay",this.model.report.entry.content.get("dashboard.element.refresh.display")),null!=this.searchManager.settings.get("global_earliest_time",{tokens:!0})&&null!=this.searchManager.settings.get("global_latest_time",{tokens:!0})&&this.model.searchModel.set({earliest_time:this.searchManager.settings.get("global_earliest_time",{tokens:!0}),latest_time:this.searchManager.settings.get("global_latest_time",{tokens:!0})}),this.deferreds=t.deferreds||{},this.children.title=new s({label:e("Title").t(),controlType:"Label",controlOptions:{model:this.model.report.entry.content,modelAttribute:"dashboard.element.title"}}),this.collection=this.collection||{},this.collection.searchBNFs=T.getCachedModel("parsedSearchBNFs",{app:this.model.application.get("app"),owner:this.model.application.get("owner"),count:0}),this.children.searchStringInput=new _({model:{content:this.model.searchModel,user:this.model.user,application:this.model.application},collection:{searchBNFs:this.collection.searchBNFs},syntaxHighlighting:E.getSearchEditorTheme()}),this.listenTo(this.children.searchStringInput,"runSearch",this.runSearch),this.collection.times=new d,this.deferreds.times=this.collection.times.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner"),count:-1}}),this.model.timeRange=new D,this.children.timeRangePickerView=new r({model:{state:this.model.searchModel,timeRange:this.model.timeRange,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal},collection:this.collection.times,appendSelectDropdownsTo:".modal:visible"}),this.model.timeRange.on("applied",(function(){this.timeRangeDelegate.closeTimeRangePicker()}),this),this.children.panelTimeRangePicker=new w({model:{timeRange:this.model.timeRange,searchModel:this.model.searchModel,state:this.model.state},collection:this.collection.times}),this.listenTo(this.model.timeRange,"change:useTimeFrom",this._updatePanelTimeRangePicker),this.model.refreshProxy=new i.Model;var n=[{label:e("No auto refresh").t(),value:""},{label:e("30 seconds").t(),value:"30s"},{label:e("1 minute").t(),value:"1m"},{label:e("2 minutes").t(),value:"2m"},{label:e("5 minutes").t(),value:"5m"},{label:e("10 minutes").t(),value:"10m"}];this.children.refreshTimeInput=new s({label:e("Auto Refresh Delay").t(),controlType:"SyntheticSelect",tooltip:e("Automatically refresh the search after a specified delay").t(),controlOptions:{model:this.model.refreshProxy,modelAttribute:"selection",items:n.concat({label:e("Custom").t(),value:"_custom"}),popdownOptions:{detachDialog:!0},toggleClassName:"btn"}}),this.children.refreshTimeCustom=new s({controlType:"Text",controlOptions:{model:this.model.searchModel,modelAttribute:"refresh",placeholder:e("eg. 5m").t()}});var a=this.model.searchModel.get("refresh")||"";e(n).chain().pluck("value").contains(a).value()?this.model.refreshProxy.set({selection:a}):this.model.refreshProxy.set({selection:"_custom",customValue:a}),this.listenTo(this.model.refreshProxy,"change",this.updateRefreshInput),this.children.refreshDisplay=new s({label:e("Refresh Indicator").t(),controlType:"SyntheticSelect",controlOptions:{model:this.model.searchModel,modelAttribute:"refreshDisplay",items:[{label:e("None").t(),description:e("Background Search with No Progress Bar").t(),value:"none"},{label:e("Progress bar").t(),description:e("Background Search with Progress Bar").t(),value:"progressbar"},{label:e("Preview and progress bar").t(),description:e("Preview Events with Progress Bar").t(),value:"preview"}],popdownOptions:{detachDialog:!0},toggleClassName:"btn"}}),this.children.flashMessages=new y({model:new i.Model}),this.children.searchFlashMessages=new y({model:this.model.searchModel}),this.openCreateReportDialog=t.openCreateReportDialog},events:t.extend({},o.prototype.events,{"click .modal-btn-primary":function(t){if(t.preventDefault(),this.children.flashMessages.flashMsgCollection.reset(),this.children.searchFlashMessages.flashMsgCollection.reset(),!this.model.searchModel.validate()){var i=this.model.timeRange.validate();if(i)e.each(i,(function(t){this.children.flashMessages.flashMsgCollection.add({key:"token-"+t,type:"error",html:e.escape(e(t).t())})}),this);else{var n=this.model.searchModel.toJSON({tokens:!0});this.trigger("searchUpdated",n),this.model.report.save()}}},"click .btn-convert-to-report":function(e){e.preventDefault(),this.hide();var t=this.openCreateReportDialog({model:this.model,searchManager:this.searchManager}).on("saveAsReport",function(e){this.model.savedReport.entry.set("name",e.entry.content.get("name")),k.saveAsReport(this.searchManager,e,this.model.report,{app:this.model.application.get("app"),owner:this.model.application.get("owner")}).then(function(){this.model.controller.trigger("edit:save-inline-as-report",{searchManagerId:this.searchManager.id}),t.hide()}.bind(this))}.bind(this))}}),runSearch:function(){var e=this.model.searchModel.get("search",{tokens:!1});if(this._mergeSearchIfNecessary(e),e){var t={q:e};this.model.searchModel.has("earliest_time")&&(t.earliest=this.model.searchModel.get("earliest_time",{tokens:!1}||"0"),t.latest=this.model.searchModel.get("latest_time",{tokens:!1})||""),this._redirectToSearchPage(t)}},_redirectToSearchPage:function(e){var t=this.model.application,i=p.search(t.get("root"),t.get("locale"),t.get("app"),{data:e});h.redirect(i,!0)},_isPostProcessSearch:function(){return this.searchManager instanceof b},_mergeSearchIfNecessary:function(e){if(this._isPostProcessSearch()&&this.searchManager&&this.searchManager.parent){var t=this.searchManager.parent.settings.resolve({tokens:!0});return i=t,(n=e)?[i.replace(/[\|\s]$/g,""),n.replace(/^[\|\s]/g,"")].join(" | "):i}var i,n},_updatePanelTimeRangePicker:function(e,t){var i="search"!==(t=t||e.get("useTimeFrom"));this.children.panelTimeRangePicker.$el.toggleClass("hide-time-range-picker",i)},handleSubmitButtonState:function(e){this.$(o.FOOTER_SELECTOR).find(".btn-primary")["pivot"===e.get("elementCreateType")?"addClass":"removeClass"]("disabled")},updateRefreshInput:function(e){var t=e.get("selection");"_custom"==t?this.children.refreshTimeCustom.$el.show():(this.children.refreshTimeCustom.$el.hide(),this.model.searchModel.set("refresh",t,{tokens:!0}))},render:function(){this.$el.html(o.TEMPLATE),this.$(o.HEADER_TITLE_SELECTOR).html(e("Edit Search").t()),this.$(o.BODY_SELECTOR).remove();var i=this.$(o.FOOTER_SELECTOR);i.before('<div class="vis-area"><div class="slide-area"><div class="content-wrapper query-dialog-wrapper"><div class="'+o.BODY_CLASS+'" ></div></div><div class="timerange-picker-wrapper"></div></div></div>'),this.$visArea=this.$(".vis-area").eq(0),this.$slideArea=this.$(".slide-area").eq(0),this.$editSearchContent=this.$(".query-dialog-wrapper").eq(0),this.$timeRangePickerWrapper=this.$(".timerange-picker-wrapper").eq(0),this.$modalParent=this.$el;var n=this.$(o.BODY_SELECTOR);n.prepend(this.children.flashMessages.render().el),n.prepend(this.children.searchFlashMessages.render().el),this.children.searchFlashMessages.$el.addClass("search"),n.append(o.FORM_HORIZONTAL_JUSTIFIED);var s=this.$(o.BODY_FORM_SELECTOR);s.addClass("edit-search-form-main"),this.children.title.render().appendTo(s),this.children.searchStringInput.render().appendTo(s);var r=this.model.timeRange.save({earliest:this.model.searchModel.get("earliest_time",{tokens:!1}||"0"),latest:this.model.searchModel.get("latest_time",{tokens:!1}||"now")});return this._isPostProcessSearch()||(this.children.panelTimeRangePicker.render().appendTo(s),this._updatePanelTimeRangePicker(this.model.timeRange),t.when(this.deferreds.times,r).done(function(){this.children.panelTimeRangePicker.updateTokens(),this.children.panelTimeRangePicker.updateTime()}.bind(this)),this.$timeRangePickerWrapper.append(this.children.timeRangePickerView.render().el),this.timeRangeDelegate=new a({el:this.el,$visArea:this.$visArea,$slideArea:this.$slideArea,$contentWrapper:this.$editSearchContent,$timeRangePickerWrapper:this.$timeRangePickerWrapper,$modalParent:this.$modalParent,$timeRangePicker:this.children.timeRangePickerView.$el,activateSelector:"a.timerange-control",backButtonSelector:"a.btn.back",hideSelectors:[".btn-convert-to-report"]}),this.children.refreshTimeInput.render().appendTo(s),this.children.refreshTimeCustom.render().appendTo(s),this.updateRefreshInput(this.model.refreshProxy)),this.children.refreshDisplay.render().appendTo(s),i.append(o.BUTTON_CANCEL),i.append('<a href="#" class="btn btn-convert-to-report">'+e("Convert to Report").t()+"</a>"),i.append('<a href="#" class="btn btn-primary modal-btn-primary pull-right">'+e("Apply").t()+"</a>"),i.append('<a href="#" class="btn back modal-btn-back pull-left">'+e("Back").t()+"</a>"),this.$(".btn.back").hide(),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/dialogs/EditSearch.pcss":function(e,t,i){var n=i(630);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/editor/dialogs/SelectReport":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/shared/controls/ControlGroup"),i("views/shared/Modal"),i("views/shared/FlashMessages"),i("shim/splunk.util"),i("uri/route"),i("collections/search/Reports"),i("splunkjs/mvc/utils"),i("stubs/splunk.config")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h){return a.extend({moduleId:n.i,initialize:function(e){a.prototype.initialize.apply(this,arguments),this.reportLimit=e.reportLimit,this.model.workingReport=new i.Model,this.model.workingReport.set({title:""}),this.model.workingReport.set("id",this.model.savedReport.get("id")),this.collection.reports.dfd.done(function(){var e=this.collection.reports.map((function(e){return{label:e.entry.get("name"),value:e.id}}));t.some(e,(function(e){return e.value==this.model.savedReport.get("id")}),this)||e.unshift({label:this.model.savedReport.entry.get("name"),value:this.model.savedReport.get("id")});var i=l.reports(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"));this.collection.reports.length===this.reportLimit?this.children.reportsControlGroup=new s({label:t("Select Report").t(),controlType:"SyntheticSelect",controlOptions:{model:this.model.workingReport,modelAttribute:"id",items:e,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},help:t("This does not contain all reports. Add a report that is not listed from ").t()+o.sprintf("<a href=%s>%s</a>.",i,t("Reports").t())}):this.children.reportsControlGroup=new s({label:t("Select Report").t(),controlType:"SyntheticSelect",controlOptions:{model:this.model.workingReport,modelAttribute:"id",items:e,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}})}.bind(this)),this.children.panelTitleControlGroup=new s({label:t("Panel Title").t(),controlType:"Text",controlOptions:{model:this.model.workingReport,modelAttribute:"title",placeholder:t("optional").t()}})},events:e.extend({},a.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){e.preventDefault(),this.trigger("updateReportID",this.model.workingReport.get("id"),this.model.workingReport.get("title"))},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(t("Select a New Report").t()),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL_JUSTIFIED),this.$(a.BODY_FORM_SELECTOR).append(a.LOADING_HORIZONTAL),this.$(a.LOADING_SELECTOR).html(t("Loading...").t()),this.collection.reports.dfd.done(t.bind((function(){this.$(a.LOADING_SELECTOR).remove(),this.$(a.BODY_FORM_SELECTOR).append(this.children.reportsControlGroup.render().el),this.$(a.BODY_FORM_SELECTOR).append(this.children.panelTitleControlGroup.render().el)}),this)),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_CANCEL),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_APPLY)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/element/DialogHelper":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("shim/splunk.util"),i("views/shared/dialogs/TextDialog"),i("views/dashboard/editor/dialogs/EditDrilldown"),i("views/shared/vizcontrols/trellis/Dialog"),i("views/dashboard/editor/dialogs/EditSearch"),i("views/dashboard/editor/dialogs/CreateReport"),i("views/dashboard/editor/dialogs/SelectReport")],void 0===(s=function(e,t,i,n,s,a,r,o,l){function d(t){var i=new o({model:t.model,searchManager:t.searchManager,onHiddenRemove:!0});return e("body").append(i.render().el),i.show(),i}return{openEditDrilldownDialog:function(t){var i=new s({settings:t.settings,model:t.model,collection:t.collection,eventManager:t.eventManager,onHiddenRemove:!0});return e("body").append(i.render().$el),i},openEditTrellisDialog:function(t){var i=new a({model:t.model,className:"popdown-dialog popdown-dialog-draggable popdown-dialog-trellis",formatterDescription:t.formatterDescription,onHiddenRemove:!0,saveOnApply:t.saveOnApply});return e("body").append(i.render().$el),i.show(t.$target),i},openEditSearchDialog:function(t){var i=new r({model:t.model,searchManager:t.searchManager,openCreateReportDialog:d,onHiddenRemove:!0});return e("body").append(i.render().el),i.show(),i},openCreateReportDialog:d,confirmConvertToInline:function(s){var a=s.isPivot?"Pivot Search":"Inline Search",r=e.Deferred(),o=new n({id:"modal_inline",onHiddenRemove:!0});return o.settings.set("primaryButtonLabel",i.sprintf(t("Clone to %s").t(),a)),o.settings.set("cancelButtonLabel",t("Cancel").t()),o.settings.set("titleLabel",i.sprintf(t("Clone to %s").t(),a)),o.setText("<div>                <p>"+i.sprintf(t("The report will be cloned to %s.").t(),a.toLowerCase())+"</p>                <p>"+i.sprintf(t("The %s:").t(),a.toLowerCase())+"                </p><ul>                <li>"+t("Cannot be scheduled.").t()+"</li>                <li>"+t("Will run every time the dashboard is loaded.").t()+"</li>                <li>"+t("Will use the permissions of the dashboard.").t()+"</li>                </ul>                </div>"),e("body").append(o.render().el),o.once("click:primaryButton",r.resolve),o.once("hide hidden",r.reject),o.show(),r.promise()},openSelectReportDialog:function(t){var i=new l({model:t.model,collection:t.collection,reportLimit:t.reportLimit,onHiddenRemove:!0});return e("body").append(i.render().el),i.show(),i},confirmUseReportSetting:function(i){var s=e.Deferred(),a=new n({id:"modal_use_report_formatting"});return a.settings.set("primaryButtonLabel",t("Use Report's Formatting").t()),a.settings.set("cancelButtonLabel",t("Cancel").t()),a.settings.set("titleLabel",t("Use Report's Formatting").t()),a.setText(t("This will change the content's formatting to the report's formatting. Are you sure you want use the report's formatting?").t()),e("body").append(a.render().el),a.once("click:primaryButton",s.resolve),a.once("hide hidden",s.reject),a.show(),s.promise()}}}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/element/ElementControls":function(e,t,i){var n,s;n=[i("require/underscore"),e,i("views/Base"),i("views/shared/delegates/Popdown"),i("views/dashboard/editor/element/DialogHelper")],void 0===(s=function(e,t,i,n,s){return i.extend({moduleId:t.i,className:"dashboard-element-controls",initialize:function(e){i.prototype.initialize.apply(this,arguments),this.searchManager=e.searchManager,this.eventManager=e.eventManager,this.settings=e.settings},events:{"click a.action-edit-drilldown":function(e){e.preventDefault();var t=s.openEditDrilldownDialog({settings:this.settings,model:this.model,collection:this.collection,eventManager:this.eventManager}).on("drilldownUpdated",function(){this.model.controller.trigger("edit:drilldown",{eventManagerId:this.eventManager.id}),t.hide()}.bind(this));this.children.popdown.hide()}},getTemplateArgs:function(){},render:function(){return this.$el.html(this.compiledTemplate(e.extend({iconClass:this.getIconClass()},this.getTemplateArgs()))),this.children.popdown=new n({el:this.el,mode:"dialog"}),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/element/InlineSearchControls":function(e,t,i){var n,s;n=[e,i("require/underscore"),i("views/dashboard/editor/element/ElementControls"),i("views/dashboard/editor/element/DialogHelper"),i("controllers/dashboard/helpers/EditingHelper"),i("util/general_utils"),i("shim/bootstrap.tooltip")],void 0===(s=function(e,t,i,n,s,a){return i.extend({moduleId:e.i,events:t.extend(i.prototype.events,{"keydown a.action-edit-search":function(e){13==e.keyCode&&this.onEditSearch(e)},"click a.action-edit-search":"onEditSearch"}),onEditSearch:function(e){e.preventDefault();var i=n.openEditSearchDialog({model:this.model,searchManager:this.searchManager}).on("searchUpdated",function(e){this.searchManager.settings.set(t.omit(e,"refreshDisplay"),{tokens:!0}),this.model.report.entry.content.set("dashboard.element.refresh.display",e.refreshDisplay),this.model.controller.trigger("edit:search",{searchManagerId:this.searchManager.id}),i.hide()}.bind(this));this.children.popdown.hide()},getIconClass:function(){return a.isValidPivotSearch(this.searchManager.settings.resolve())?"icon-pivot":"icon-search-thin"},tooltip:function(e){this.$("a.action-edit-search").tooltip(e)},render:function(){return i.prototype.render.apply(this,arguments),this.tooltip({title:t("Edit search").t()}),this},template:'            <a class="dropdown-toggle action-edit-search btn-pill" href="#">                    <span class="<%- iconClass %>"></span>            </a>        '})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/element/MiscControlsAdapter":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=u(i(0)),s=u(i("shim/jquery")),a=u(i("require/backbone")),r=u(i("views/ReactAdapterBase")),o=u(i("dashboard/components/editor/element/MiscControls")),l=u(i("views/dashboard/editor/element/DialogHelper")),d=u(i("helpers/VisualizationRegistry")),c=u(i("views/shared/viz/schemas/trellis")),h=i("controllers/dashboard/helpers/ReportModelHelper");function u(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.extend({moduleId:e.i,initialize:function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=r.default.prototype.initialize).apply.apply(e,[this].concat(i)),this.state=this.state||new a.default.Model,this.onReportModelChange(),this.listenTo(this.model.report.entry.content,"change",this.onReportModelChange),this.listenTo(this.state,"change",this.render),this.onClickDrilldown=this.onClickDrilldown.bind(this),this.onClickTrellis=this.onClickTrellis.bind(this)},onReportModelChange:function(){var e=d.default.findVisualizationForConfig(this.model.report.entry.content.toJSON());this.state.set("disableDrilldown",!(0,h.isDrilldownSupported)(this.model.report.entry.content.toJSON())||!e||!1===e.supports.drilldown),this.state.set("disableTrellis",!e||!1===e.isSplittable)},onClickDrilldown:function(){var e=this,t=l.default.openEditDrilldownDialog({settings:this.options.settings,model:this.model,collection:this.collection,eventManager:this.options.eventManager});this.listenTo(t,"drilldownUpdated",(function(){e.options.model.controller.trigger("edit:drilldown",{eventManagerId:e.options.eventManager.id}),t.hide()}))},onClickTrellis:function(e){l.default.openEditTrellisDialog({model:this.model,formatterDescription:c.default,saveOnApply:!0,$target:(0,s.default)(e.target)})},getComponent:function(){return n.default.createElement(o.default,{onClickDrilldown:this.onClickDrilldown,onClickTrellis:this.onClickTrellis,disableDrilldown:this.state.get("disableDrilldown"),disableTrellis:this.state.get("disableTrellis")})}}),e.exports=t.default},"views/dashboard/editor/element/SavedSearchControls":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/editor/element/ElementControls"),i("views/shared/reportcontrols/details/Master"),i("views/dashboard/editor/element/DialogHelper"),i("controllers/dashboard/helpers/EditingHelper"),i("controllers/dashboard/helpers/ModelHelper"),i("uri/route")],void 0===(s=function(e,t,i,n,s,a,r,o,l){return n.extend({moduleId:e.i,events:i.extend(n.prototype.events,{"click a.viewPanelReport":"onViewPanelReport","click a.edit-schedule, a.edit-acceleration, a.edit-permissions, a.edit-embed":function(e){e.preventDefault(),this.children.popdown.hide()},"click a.cloneSearchReport":function(e){e.preventDefault(),a.confirmConvertToInline({isPivot:this.model.savedReport.isPivotReport()}).then(function(){r.saveAsInlineSearch(this.searchManager,this.model.elementReport,this.model.report,{app:this.model.application.get("app")}),this.model.controller.trigger("edit:save-report-as-inline",{elementId:this.settings.get("id"),searchManagerId:this.searchManager.id})}.bind(this)),this.children.popdown.hide()},"click a.selectNewReport":function(e){e.preventDefault();var t=o.getCachedModel("reports",{app:this.model.application.get("app"),owner:this.model.application.get("owner"),search:"is_visible=1 AND disabled=0",count:100}),n=a.openSelectReportDialog({model:this.model,reportLimit:100,collection:i.extend({},this.collection,{reports:t})}).on("updateReportID",function(e,t){var i=this.settings.get("id");r.updateReportId(this.searchManager,i,this.model.savedReport,e,t,{app:this.model.application.get("app")}).then(function(){this.model.controller.trigger("edit:update-report-id",{searchManagerId:this.searchManager.id,elementId:i}),n.hide()}.bind(this))}.bind(this));this.children.popdown.hide()},"click a.useReportFormatting":function(e){e.preventDefault(),a.confirmUseReportSetting().then(function(){var e=this.settings.get("id");r.useReportSettingsForElement(this.model.elementReport,this.model.savedReport),this.model.controller.trigger("edit:use-report-formatting",{elementId:e})}.bind(this)),this.children.popdown.hide()}}),getIconClass:function(){return this.model.savedReport.isPivotReport()?"icon-report-pivot":"icon-report-search"},getTemplateArgs:function(){return{reportName:this.model.savedReport.entry.get("name")}},tooltip:function(e){this.$("a.viewPanelReport").tooltip(e)},render:function(){return n.prototype.render.apply(this,arguments),this.tooltip({title:i("View report").t()}),this},template:'            <a class="viewPanelReport dropdown-toggle btn-pill" href="#">                    <span class="<%- iconClass %>">            </a>            <div class="dropdown-menu"></div>        ',onViewPanelReport:function(e){e.preventDefault(),e.stopPropagation(),this.tooltip("hide");var n=this.reportDetailsTemplate,a=this.model.application.get("root"),r=this.model.application.get("locale"),o=this.model.application.get("app"),d=this.model.savedReport.openInView(this.model.user),c=l.getViewRouteData(d),h=l.report(a,r,o,{data:{s:this.model.savedReport.get("id")}}),u=c.route(a,r,o,{data:{s:this.model.savedReport.get("id")}});this.$(".dropdown-menu").html(i.template(n,{viewReportLink:h,editReportLink:u,editReportLabel:c.openLabel,_:i})),this.children.reportDetails&&this.children.reportDetails.remove(),this.children.reportDetails=new s({model:{report:this.model.savedReport,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{roles:this.collection.roles,alertActions:this.collection.alertActions}}),this.$(".reportDetails").prepend(t("<li/>").addClass("reportDetailsView").append(this.children.reportDetails.render().el));var p=this.model.savedReport.entry.content.get("description");p&&this.$(".reportDetails").prepend(t("<li/>").addClass("report-description").text(p)),this.$(".reportDetails").prepend(t("<li/>").addClass("report-name").text(this.model.savedReport.entry.get("name"))),this.$(".dropdown-menu").addClass("show-details"),t(window).trigger("resize")},reportDetailsTemplate:'            <div class="arrow"></div>            <ul class="reportDetails">                <li><a target="_blank" rel="noopener noreferrer" href="<%- viewReportLink %>" class="viewSearchReport"><%- _("View").t() %></a></li>                <li><a target="_blank" rel="noopener noreferrer" href="<%- editReportLink %>" class="openSearchReport"><%- editReportLabel %></a></li>                <li><a href="#" class="cloneSearchReport"><%- _("Clone to Inline").t() %></a></li>            </ul>            <ul class="reportActions">                <li><a class="selectNewReport"><%- _("Select New Report").t() %></a></li>                <li><a class="useReportFormatting"><%- _("Use Report\'s Formatting for this Content").t() %></a></li>            </ul>        '})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/element/TimeRangePanel":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("views/Base"),r=i("views/shared/controls/ControlGroup"),o=(i("util/console"),i("uri/route"),i("splunkjs/mvc")),l=i("splunkjs/mvc/simpleform/formutils"),d=i("splunkjs/mvc/tokenutils"),c=i("shim/splunk.util"),h=i("views/shared/timerangepicker/Master");return i("views/dashboard/editor/element/TimeRangePanel.pcss"),i("shim/bootstrap.tooltip"),a.extend({moduleId:n.i,className:"control-group",initialize:function(){a.prototype.initialize.apply(this,arguments),this.model.timeRange.on("applied",(function(){this.updateSearchModelTime(),this.updateTime()}),this),!0===this.options.popdownTimeRange&&(this.children.timerange=new h({model:{state:this.model.searchModel,timeRange:this.model.timeRange,appLocal:this.model.appLocal,user:this.model.user,application:this.model.application},collection:this.collection.timeRanges,timerangeClassName:"btn",popdownOptions:{attachDialogTo:".sidebar:not(.first)",scrollContainer:".preview-body"}})),this.initializeUseTimeFrom(),this.children.advancedEarliest=new r({label:s("Earliest Token").t(),controlType:"Text",controlOptions:{model:this.model.timeRange,modelAttribute:"earliest_token"}}),this.children.advancedLatest=new r({label:s("Latest Token").t(),controlType:"Text",controlOptions:{model:this.model.timeRange,modelAttribute:"latest_token"}}),this.listenTo(this.model.timeRange,"change:useTimeFrom change:latest_token change:earliest_token",this.updateTokens,this)},initializeUseTimeFrom:function(){var e=s(o.Components.toJSON()).chain().values().filter((function(e){return!(!l.isFormInput(e)||!e.settings)&&"time"==e.settings.get("type")})).map((function(e){var t=e.settings.get("token")||"global";return{value:t,label:c.sprintf(s("Shared Time Picker (%s)").t(),t)}})).value(),t="search",i=this.model.searchModel.get("earliest_time"),n=this.model.searchModel.get("latest_time");if(d.hasToken(i)&&d.hasToken(n)){var a=d.getTokenName(i),h=a.replace(/\.?earliest$/g,"");h=""===h?"global":h;var u=d.getTokenName(n),p=u.replace(/\.?latest$/g,"");p=""===p?"global":p,this.model.timeRange.set({earliest_token:a,latest_token:u}),t=h===p?s(e).find((function(e){return e.value===h}))?h:"global"===h?"global":"tokens":"tokens"}this.model.timeRange.set({useTimeFrom:t});var m=[[{label:s("Use time picker").t(),value:"search"}],[{label:s("Tokens").t(),value:"tokens"}],[{label:s("Global").t(),value:"global"}]];e.length>0&&m.unshift(e),this.children.timeScope=new r({label:s("Time Range").t(),controlType:"SyntheticSelect",className:"time-range-scope",controlOptions:{additionalClassNames:"time-range-scope-select",toggleClassName:"btn",items:m,model:this.model.timeRange,popdownOptions:{attachDialogTo:".sidebar:not(.first), .modal:visible",scrollContainer:".preview-body, .modal:visible, .modal-body:visible"},modelAttribute:"useTimeFrom",elastic:!0}})},updateSearchModelTime:function(){var e=this.model.timeRange.get("useTimeFrom");if("search"===e)this.model.searchModel.set({earliest_time:this.model.timeRange.get("earliest",{tokens:!0})||0,latest_time:this.model.timeRange.get("latest",{tokens:!0})||""},{tokens:!0});else if("tokens"===e){var t=this.model.timeRange.get("earliest_token"),i=this.model.timeRange.get("latest_token");this.model.searchModel.set({earliest_time:"$"+t+"$",latest_time:"$"+i+"$"},{tokens:!0})}else"global"===e?this.model.searchModel.set({earliest_time:"$earliest$",latest_time:"$latest$"},{tokens:!0}):this.model.searchModel.set({earliest_time:"$"+e+".earliest$",latest_time:"$"+e+".latest$"},{tokens:!0})},updateTokens:function(){this.updateSearchModelTime(),this.toggleTimeRangePicker(),this.toggleAdvancedTokens()},toggleAdvancedTokens:function(){"tokens"===this.model.timeRange.get("useTimeFrom")?(this.children.advancedEarliest.$el.show(),this.children.advancedLatest.$el.show()):(this.children.advancedEarliest.$el.hide(),this.children.advancedLatest.$el.hide())},toggleTimeRangePicker:function(){"search"===this.model.timeRange.get("useTimeFrom")?this.children.timerange?this.children.timerange.$el.show():this.$(".timerange").show():this.children.timerange?this.children.timerange.$el.hide():this.$(".timerange").hide()},updateTime:function(){var e=this.model.timeRange.generateLabel(this.collection);this.$el.find("span.time-label").text(s(e).t())},render:function(){return this.children.timeScope&&this.children.timeScope.render().appendTo(this.el),this.children.advancedEarliest.render().$el.appendTo(this.$el),this.children.advancedLatest.render().$el.appendTo(this.$el),this.children.timerange?this.$el.append(this.children.timerange.render().$el):this.$el.append('<div class="timerange" style="display: block;"><label class="control-label"></label></div>'),this.$("div.timerange").append('<div class="controls"><a href="#" class="btn timerange-control"><span class="time-label"></span><span class="icon-triangle-right-small"></span></a></div>'),this.toggleTimeRangePicker(),this.toggleAdvancedTokens(),this.updateTime(),this}})}.call(t,i,t,e))||(e.exports=n)},"views/dashboard/editor/element/TimeRangePanel.pcss":function(e,t,i){var n=i(629);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/editor/input/InputEditor":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/Base"),i("views/shared/dialogs/TextDialog"),i("views/dashboard/editor/input/InputMenu"),i("shim/splunk.util")],void 0===(s=function(e,t,i,n,s,a,r){return n.extend({moduleId:e.i,initialize:function(e){n.prototype.initialize.apply(this,arguments),this.controller=e.controller,this.inputId=e.inputId,this.inputSettings=e.inputSettings},render:function(){return this.$el.html(this.template),this},events:{"click a.edit-input":"_editInput","click a.delete-input":"_deleteInput"},_editInput:function(e){e.preventDefault();var i=t(e.currentTarget);this.editInputMenu&&this.editInputMenu.shown?this.editInputMenu.hide():(i.addClass("active"),this.editInputMenu=new a({model:this.model,inputSettings:this.inputSettings,onHiddenRemove:!0}),t("body").append(this.editInputMenu.render().el),this.editInputMenu.show(i),this.listenTo(this.editInputMenu,"hide",(function(){i.removeClass("active")})),this.listenTo(this.editInputMenu,"apply",(function(){this.controller.trigger("edit:input",{inputId:this.options.inputId})})))},_deleteInput:function(e){e.preventDefault();var n=new s({id:"modal_delete"});n.settings.set("primaryButtonLabel",i("Delete").t()),n.settings.set("cancelButtonLabel",i("Cancel").t()),n.settings.set("titleLabel",i("Delete").t());var a=t.trim(this.model.get("label"))||r.sprintf(i("the %s input").t(),i(this.model.get("type")).t());n.setText(r.sprintf(i("Are you sure you want to delete %s?").t(),"<em>"+i.escape(a)+"</em>")),n.on("click:primaryButton",function(){this.controller.trigger("edit:delete-input",{inputId:this.inputId}),this.trigger("deleteInput")}.bind(this)),t("body").append(n.render().el),n.show()},template:'<div class="edit-dropdown"><a href="#" class="edit-input" title="'+i("Edit Input").t()+'"><i class="icon-pencil"></i></a><a href="#" class="delete-input" title="'+i("Delete Input").t()+'"><i class="icon-x"></i></a></div>'})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/input/InputMenu":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("splunkjs/mvc"),i("splunkjs/mvc/simpleform/edit/editinputmenu"),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/savedsearchmanager"),i("splunkjs/mvc/utils"),i("stubs/splunk.config"),i("views/dashboard/editor/input/InputMenu.pcss")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d){return s.extend({moduleId:e.i,className:function(){return i.result(s.prototype,"className")+" dashboard-form-input-editor-popdown"},initialize:function(e){this.inputSettings=e.inputSettings,s.prototype.initialize.apply(this,arguments)},applyChanges:function(){if(this.workingSettings.validate(),this.workingSettings.isValid()){var e=this.model.toJSON({tokens:!0}),t=this.workingSettings.toJSON({tokens:!0});this.model.set(t,{tokens:!0}),this.inputSettings&&this.inputSettings.set(i.pick(t,"search"),{silent:!0,tokens:!0}),this.hide(),this.updateSearchManager(e),this.trigger("apply")}},updateSearchManager:function(e){var t=this.model.get("searchType");if(t&&"inline"!==t&&"postprocess"!==t||null==this.model.get("search",{tokens:!0}))"saved"===t&&this.model.get("searchName")&&(this.model.set("managerid",this.model.get("managerid")||i.uniqueId("populating_saved_search_")),e.searchName!=this.model.get("searchName")&&this.createSavedSearchManager());else{var s=e.managerid,a=n.Components.get(s);!a||a instanceof r?(this.model.set("managerid",this.model.get("managerid")||i.uniqueId("populating_search_")),e.search==this.model.get("search",{tokens:!0})&&e.populating_earliest_time==this.model.get("populating_earliest_time",{tokens:!0})&&e.populating_latest_time==this.model.get("populating_latest_time",{tokens:!0})||this.createInlineSearchManager()):this.updateInlineSearchManager(a)}},updateInlineSearchManager:function(e){e.settings.set({latest_time:this.model.get("populating_latest_time",{tokens:!0}),earliest_time:this.model.get("populating_earliest_time",{tokens:!0}),search:this.model.get("search",{tokens:!0})},{tokens:!0})},createInlineSearchManager:function(){new a({id:this.model.get("managerid"),latest_time:this.model.get("populating_latest_time",{tokens:!0}),earliest_time:this.model.get("populating_earliest_time",{tokens:!0}),search:this.model.get("search",{tokens:!0}),app:o.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0,check_risky_command:l.ENABLE_RISKY_COMMAND_CHECK_DASHBOARD},{replace:!0,tokens:!0})},createSavedSearchManager:function(){new r({id:this.model.get("managerid"),searchname:this.model.get("searchName"),app:o.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0,check_risky_command:l.ENABLE_RISKY_COMMAND_CHECK_DASHBOARD},{replace:!0,tokens:!0})}})}.apply(t,n))||(e.exports=s)},"views/dashboard/editor/input/InputMenu.pcss":function(e,t,i){var n=i(621);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/element/Body":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc"),i("splunkjs/mvc/tokenawaremodel"),i("views/dashboard/Base"),i("views/dashboard/element/Config"),i("util/dashboard_utils")],void 0===(s=function(e,t,i,n,s,a,r,o,l){return r.extend({moduleId:e.i,viewOptions:{register:!1},className:"panel-body",initialize:function(e){r.prototype.initialize.apply(this,arguments),this.model=i.extend({},e.model),this.deferreds=i.extend({},e.deferreds),this.createVisualization=i.debounce(this.createVisualization),this.listenTo(this.model.report.entry.content,"change:dashboard.element.viz.type",this.createVisualization)},createVisualization:function(){this.deferreds.reportReady.then(function(){this.removeViz();var e=this.model.report.entry.content.get("dashboard.element.viz.type"),n=this.deferreds.vizCreated,s=o[e],a=s.getView();this.applyManagerDefault(s);var r=new a(i.defaults({managerid:this.settings.get("managerid"),reportModel:this.model.report.entry.content,normalizeSettings:!1,el:t("<div />").appendTo(this.$el),resizable:!0,saveOnApply:!0,saveOnResize:!0,enableEditingReportProperty:"dashboard.element.edit",refreshDisplayReportProperty:"dashboard.element.refresh.display"},a.prototype.options));r.render(),this.viz=r,this.listenTo(this.viz,"all",this.trigger),this.trigger("create:visualization",this.viz),n.resolve(r)}.bind(this))},applyManagerDefault:function(e){if(e.managerDefaults){var t=l.getPrimarySearchManager(this.settings.get("managerid"),s.Components);t&&t.settings.set(e.managerDefaults)}},removeViz:function(){this.viz&&(this.stopListening(this.viz),this.viz.remove(),this.viz=null)},remove:function(){this.removeViz(),r.prototype.remove.apply(this,arguments)},render:function(){return this.createVisualization(),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/element/Config":function(e,t,i){var n;void 0===(n=function(){return{chart:{getView:function(){return i("splunkjs/mvc/chartview")},editable:!0},table:{getView:function(){return i("splunkjs/mvc/tableview")},editable:!0},single:{getView:function(){return i("splunkjs/mvc/singleview")},editable:!0},map:{getView:function(){return i("splunkjs/mvc/splunkmapview")},editable:!0},event:{managerDefaults:{status_buckets:300},getView:function(){return i("splunkjs/mvc/eventsviewerview")},editable:!0},viz:{getView:function(){return i("splunkjs/mvc/visualizationview")},editable:!0}}}.apply(t,[]))||(e.exports=n)},"views/dashboard/element/DashboardElement":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/dashboard/Base"),i("views/dashboard/element/Header"),i("views/dashboard/element/Body"),i("views/dashboard/element/Footer"),i("views/dashboard/element/ElementAutoRefresh"),i("models/search/Report"),i("models/dashboard/DashboardElementReport"),i("models/dashboard/DashboardElementModel"),i("dashboard/mixins/EventManagerMixin"),i("dashboard/mixins/SearchManagerMixin"),i("splunkjs/mvc"),i("splunkjs/mvc/savedsearchmanager"),i("splunkjs/mvc/postprocessmanager"),i("splunkjs/mvc/simplexml/dashboard/tokendeps"),i("splunkjs/mvc/utils"),i("util/dashboard_utils"),i("util/Profiler")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g,f,v,b,y,_){return s.extend(t.extend({},v,u,p,{moduleId:n.i,_isDashboardElement:!0,className:"dashboard-element",omitFromSettings:["reportContent"],constructor:function(e,i){return e=e||{},i=t.extend({tokens:!0,tokenNamespace:"submitted"},i),e.id=e.reportContent["dashboard.element.id"]||e.id,s.prototype.constructor.call(this,e,i)},initialize:function(n){s.prototype.initialize.apply(this,arguments),this.model=t.extend({primarySearchMessages:new i.Model,secondarySearchMessages:new i.Model},n.model),this.collection=t.extend({},n.collection),this.deferreds=t.extend({},n.deferreds),this.model.elementState=new i.Model,this.model.managerReportContent=new i.Model,this.deferreds.vizCreated=e.Deferred(),this._setupReportModel(),this.listenTo(this.model.report.entry.content,"change:dashboard.element.viz.type",this._updateVizTypeClass),this.listenTo(this.model.report.entry.content,"change:dashboard.element.viz.type",(function(){this.deferreds.vizCreated=e.Deferred()})),this.listenTo(this.model.report.entry.content,c.getTypeChangeEvents().join(" "),(function(){this.model.secondarySearchMessages.clear()})),this.children.header=new a({model:this.model,collection:this.collection,settings:this.settings,deferreds:this.deferreds,id:t.uniqueId(this.id+"-header-")}),this.children.body=new r({model:this.model,collection:this.collection,settings:this.settings,deferreds:this.deferreds,id:t.uniqueId(this.id+"-body-")}),this.children.footer=new o({model:this.model,collection:this.collection,settings:this.settings,deferreds:this.deferreds,id:t.uniqueId(this.id+"-footer-")}),this.listenTo(this.children.body,"all",this.trigger),this.listenTo(this.children.body,"searchMessageUpdate",this.onSearchMessagesUpdate),this.listenTo(this.model.state,"change:mode",this.onModeChange),this.setupTokenDependencies(),this.setupSearchManager(),this.setupEventManager(),this.setupProfiler()},onSearchMessagesUpdate:function(e,t,i){"primary"!=e.getType()&&y.updateSearchMessage(this.model.secondarySearchMessages,e.id,t,i)},setupProfiler:function(){if(_.isEnabled()){var e=_.get("Dashboard").module(n.i,{element_id:this.id});e.profileFunctions(this,"_setupReportModel","onSearchManagerChanged","render");var t=e.newTimer();this.componentReady().then(function(){e.log({type:this.getVisualizationType()||"unknown",function:"componentReady",duration:t.fromNow()})}.bind(this))}},_setupReportModel:function(){this.model.elementReport=new h({},{tokenNamespace:"submitted",state:this.model.state}),this.model.elementReport.set(this.options.reportContent,{tokens:!0}),this._settingsSync=b.syncModels(this.settings,this.model.elementReport,{auto:!0,prefix:"dashboard.element."}),this.model.report=new c({delegate:this.model.elementReport}),this.model.savedReport=new d,this.deferreds.reportReady=e.Deferred(),this.settings.has("managerid")||this._applyReportDefaults()},_setupAutoRefresh:function(e){this._autoRefresh&&this._autoRefresh.dispose(),e&&(this._autoRefresh=new l(this.settings,e))},onSearchManagerChanged:function(e){var i=t.find(e,(function(e){return"primary"===e.getType()}));this._setupAutoRefresh(i);var n,s,a,r=this.deferreds.reportReady;if(i){if(i instanceof g){var o=this.model.savedReport,l=i.get("searchname");o.id=["","servicesNS",encodeURIComponent(this.model.application.get("owner")),encodeURIComponent(this.model.application.get("app")),"saved","searches",encodeURIComponent(l)].join("/"),s=o,n=o.entry.content,a=o.fetch()}else s=this.model.reportDefaults,n=this.model.reportDefaults.entry.content,a=this.deferreds.reportDefaults;a.then(function(){this._applyManagerReportProperties(i),this.model.report.setReportDelegate(s);var e=this.model.report.entry.content;e.removeDelegate(this.model.reportDefaults.entry.content,{silent:!0}),e.removeDelegate(this.model.savedReport.entry.content,{silent:!0}),e.addDelegate(n),r.resolve()}.bind(this),this._applyReportDefaults.bind(this))}else this.model.report.clearReportDelegate()},_applyReportDefaults:function(){this.deferreds.reportDefaults.then(function(){this.model.report.setReportDelegate(this.model.reportDefaults),this.model.report.entry.content.addDelegate(this.model.reportDefaults.entry.content),this.deferreds.reportReady.resolve()}.bind(this))},_applyManagerReportProperties:function(e){this.model.report.entry.content.removeDelegate(this.model.managerReportContent,{silent:!0}),this.model.managerReportContent.clear();var i={};e instanceof g?(i["display.general.search.type"]="saved",t.extend(i,{search:e.settings.resolve({tokens:!0})})):(e instanceof f?(i["display.general.search.type"]="postprocess",i["display.general.search.postProcessSearch"]=e.settings.postProcessResolve({tokens:!0})):i["display.general.search.type"]=e.has("metadata")&&e.get("metadata").global?"global":"inline",t.extend(i,{search:e.settings.resolve({tokens:!0}),"dispatch.earliest_time":e.get("earliest_time",{tokens:!0}),"dispatch.latest_time":e.get("latest_time",{tokens:!0})})),this.model.managerReportContent.set(i),this.model.report.entry.content.addDelegate(this.model.managerReportContent,{silent:!0})},_updateVizTypeClass:function(){var e=this.className+" "+(this.getVisualizationType()||"unknown");this.$el.hasClass("hidden")&&(e+=" hidden"),this.$el.attr("class",e)},render:function(){return this.children.header.render().$el.appendTo(this.$el),this.children.body.render().$el.appendTo(this.$el),this.children.footer.render().$el.appendTo(this.$el),this._updateVizTypeClass(),this.onModeChange(),this.setupActiveStateHandler(),this},setupActiveStateHandler:function(){this.$el.attr("tabindex",0),this.$el.hover(this.activate.bind(this),this.deActivate.bind(this)),this.$el.focusin(this.activate.bind(this)),this.$el.focusout(function(t){var i=this.$el.find(".btn-pill:not(.hidden)").last()[0];(null==i&&this.$el[0]===e(t.target)[0]||i===e(t.target)[0])&&this.deActivate()}.bind(this))},activate:function(){this.$el.addClass("active")},deActivate:function(){this.$el.removeClass("active")},onModeChange:function(){this.$el.trigger("elementVisibilityChanged");var e=this.model.state.get("mode");switch(this.model.report.setEditable("edit"===e),e){case"edit":this.listenTo(this.model.report,"save",(function(){this.model.controller.trigger("edit:element",{elementId:this.model.elementReport.get("dashboard.element.id")})}));break;default:this.stopListening(this.model.report,"save")}},getVisualizationType:function(){return this.model.report.entry.content.get("dashboard.element.viz.type")},getVisualization:function(e){var t=this.deferreds.vizCreated;return e&&t.done(e),t},componentReady:function(){return e.when(this.deferreds.reportReady,this.deferreds.vizCreated,this.onEventManagerReady())},remove:function(){this._autoRefresh&&this._autoRefresh.dispose(),this._settingsSync&&this._settingsSync.destroy(),this.stopListeningToTokenDependencyChange(),s.prototype.remove.apply(this,arguments)},show:function(){s.prototype.show.apply(this,arguments),this.children.body.viz&&this.children.body.viz.render()}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/element/ElementAutoRefresh":function(e,t,i){var n,s;n=[i("require/underscore"),i("require/backbone")],void 0===(s=function(e,t){function i(){this.initialize.apply(this,arguments)}return e.extend(i.prototype,t.Events,{initialize:function(e,t){this.settings=e,this.manager=t,this.listenTo(e,"change:refresh.auto.interval",this.refreshAfterTimeout),this.listenTo(t,"search:done"),this.refreshAfterTimeout()},clearTimer:function(){clearTimeout(this.timer)},refreshAfterTimeout:function(){this.clearTimer();var t=parseInt(this.settings.get("refresh.auto.interval"),10);e.isNumber(t)&&!e.isNaN(t)&&t>0&&(this.timer=setTimeout(this.refresh.bind(this),1e3*t))},refresh:function(){this.manager.startSearch("refresh"),this.refreshAfterTimeout()},dispose:function(){this.stopListening(),this.clearTimer()}}),i}.apply(t,n))||(e.exports=s)},"views/dashboard/element/Footer":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/Base"),i("views/dashboard/Base"),i("views/dashboard/element/TimeIndicator"),i("views/shared/jobstatus/buttons/ExportResultsDialog"),i("models/search/Job"),i("splunkjs/mvc/postprocessmanager"),i("splunkjs/mvc/savedsearchmanager"),i("splunkjs/mvc/utils"),i("util/general_utils"),i("util/keyboard"),i("shim/splunk.util"),i("shim/splunk.window"),i("uri/route")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g,f){var v=s.extend({tagName:"a",className:"btn-pill",defaults:{enabled:!0,visible:!0},initialize:function(e){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.render)},render:function(){var e=i.defaults(this.model.toJSON(),this.defaults);return e.clazz=e.clazz||e.id,this.$el[e.enabled?"removeClass":"addClass"]("disabled"),this.$el[e.visible?"removeClass":"addClass"]("hidden"),this.$el[e.visible?"show":"hide"](),this.$el.addClass(e.clazz),this.$el.attr("title",e.text),this.$el.attr("tabindex",0),this.$el.attr("href","#"),this.$el.attr("aria-label",e.text),this.$el.html(this.compiledTemplate(e)),this.$el.tooltip("destroy"),e.visible&&this.$el.tooltip({animation:!1,container:"body"}),this},events:{click:"_onButtonClick",keyup:function(e){e.which===p.KEYS.ENTER&&this._onButtonClick(e)}},_onButtonClick:function(e){if(e.preventDefault(),!1!==this.model.get("enabled")){var t=this.model.get("action")||this.model.get("id");this.trigger(t)}},template:'                <i class="<%- icon %>"></i>                <span class="hide-text"><%- text %></span>                '}),b=s.extend({tagName:"span",className:"search-stopped-indicator",initialize:function(){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.toggle)},toggle:function(){var e=this.model.get("finalizedByUser");this.$el.toggle(e)},render:function(){return this.$el.text(this.model.get("text")),this.toggle(),this}});return a.extend({moduleId:e.i,className:"element-footer",viewOptions:{register:!1},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.model=i.extend({},this.model,{menus:{search:new n.Model({id:"search",icon:"icon-search",text:i("Open in Search").t()}),pivot:new n.Model({id:"pivot",icon:"icon-pivot",text:i("Open in Pivot").t()}),export:new n.Model({id:"export",icon:"icon-export",text:i("Export").t()}),inspect:new n.Model({id:"inspect",icon:"icon-info",text:i("Inspect").t()}),refresh:new n.Model({id:"refresh",icon:"icon-rotate-counter",text:i("Refresh").t()}),searchFinalized:new n.Model({id:"searchFinalized",text:i("Stopped").t(),finalizedByUser:!1}),stopSearch:new n.Model({id:"stopSearch",icon:"icon-stop",text:i("Stop").t(),visible:!1})}}),this.searchJobModel=new l,this.bindToComponentSetting("managerid",this.onManagerChange,this),this.listenTo(this.settings,"change",this.render),this.deferreds=i.extend({},e.deferreds),this.reportReady=this.deferreds.reportReady||t.Deferred().resolve(),"pending"===this.reportReady.state()&&this.reportReady.then(this.render.bind(this))},onManagerChange:function(e){this.manager&&this.stopListening(this.manager);var t=i.find(e,(function(e){return"primary"===e.getType()}));t&&(this.manager=t,this.listenTo(this.manager,"search:start",this._onSearchStart),this.listenTo(this.manager,"search:done",this._onSearchDone),this.manager.hasJob()&&this._onSearchStart(),this.manager.replayLastSearchEvent(this))},render:function(){return"resolved"===this.reportReady.state()&&(this.$el.html(this.compiledTemplate()),this.$menus=this.$el.children(".menus"),this.removeChildren(),this._renderMenus(),this._renderRefreshIndicator(),this.$el[i.isEmpty(this.children)?"addClass":"removeClass"]("hidden")),this},_renderMenus:function(){if(this.model.report.isPivotReport())this.resolveBooleanOptions("link.openPivot.visible","link.visible",!0)&&this.model.user.canPivot()&&(this.children.pivot=new v({model:this.model.menus.pivot}),this._renderMenu(this.children.pivot));else if(this.resolveBooleanOptions("link.openSearch.visible","link.visible",!0)){if(this.settings.get("link.openSearch.text"))this.model.menus.search.set("text",this.settings.get("link.openSearch.text"));else{var e=this.model.report.openInView(this.model.user),t=f.getViewRouteData(e,this.collection.appLocals);this.model.menus.search.set("text",t.openLabel)}this.children.search=new v({model:this.model.menus.search}),this._renderMenu(this.children.search)}this.resolveBooleanOptions("link.exportResults.visible","link.visible",!0)&&this.model.user.canExportResults()&&(this.children.export=new v({model:this.model.menus.export}),this._renderMenu(this.children.export)),this.resolveBooleanOptions("link.inspectSearch.visible","link.visible",!0)&&(this.children.inspect=new v({model:this.model.menus.inspect}),this._renderMenu(this.children.inspect)),this.resolveBooleanOptions("refresh.link.visible","link.visible",!0)&&(this.children.refresh=new v({model:this.model.menus.refresh}),this._renderMenu(this.children.refresh)),this.resolveBooleanOptions("link.stopSearch.visible","link.visible",!0)&&(this.children.searchStoppedIndicator=new b({model:this.model.menus.searchFinalized}),this._renderMenu(this.children.searchStoppedIndicator),this.children.stopSearch=new v({model:this.model.menus.stopSearch}),this._renderMenu(this.children.stopSearch),this.listenTo(this.searchJobModel.entry.content,"change",(function(){var e=!!this.searchJobModel.entry.content.get("isFinalized"),t=!e;this.model.menus.searchFinalized.set("finalizedByUser",e),this.children.refreshIndicator.$el.toggle(t)})))},_renderMenu:function(e){e.render().$el.appendTo(this.$menus),this.listenTo(e,"all",this._handleAction)},_renderRefreshIndicator:function(){this.settings.has("managerid")&&(this.children.refreshIndicator=new r({id:i.uniqueId(this.id+"-refreshtime"),el:t('<div class="refresh-time-indicator"></div>'),managerid:this.settings.get("managerid"),"refresh.time.visible":u.normalizeBoolean(this.settings.get("refresh.time.visible"),{default:!0})}),this.children.refreshIndicator.render().$el.appendTo(this.$menus))},_handleAction:function(e){switch(e){case"search":this._openSearch();break;case"pivot":this._openPivot();break;case"export":this._export();break;case"inspect":this._inspect();break;case"refresh":this._refresh();break;case"stopSearch":this._stopSearch()}},_onSearchStart:function(){var e=this.manager.getSid();this.searchJobModel.set("id",e),i.each(i.omit(this.model.menus,"export"),(function(e,t){e.set("visible",!0)}),this),this.children.export&&(this.manager instanceof d?this.model.menus.export.set({title:i("Export - You cannot export results for post-process jobs.").t(),enabled:!1,visible:!0}):this.model.menus.export.set({enabled:!1,visible:!0})),this.children.stopSearch&&(this.model.menus.searchFinalized.set("finalizedByUser",!1),this.model.menus.stopSearch.set("visible",!0),this.model.menus.refresh.set("visible",!1))},_onSearchDone:function(){var e=this.manager.getJobResponse();this.searchJobModel.setFromSplunkD(e),this.children.export&&(this.manager instanceof d||this.model.menus.export.set({title:i("Export").t(),enabled:!0})),this.children.stopSearch&&(this.model.menus.stopSearch.set("visible",!1),this.model.menus.refresh.set("visible",!0))},_getTimeRange:function(e,t){if(e instanceof d)return this._getTimeRange(e.parent,!0);var i={};if(null!=e.settings.get("global_earliest_time",{tokens:!0})&&null!=e.settings.get("global_latest_time",{tokens:!0})?(i.earliest=e.settings.get("global_earliest_time",{tokens:!1}),i.latest=e.settings.get("global_latest_time",{tokens:!1})):(i.earliest=e.settings.get("earliest_time",{tokens:!1}),i.latest=e.settings.get("latest_time",{tokens:!1})),!t){var n=e.get("data");null!=n.earliestTime&&(i.earliest=m.getEpochTimeFromISO(n.earliestTime)),null!=n.latestTime&&(i.latest=m.getEpochTimeFromISO(n.latestTime))}return i},_openSearch:function(){var e=this.manager,t={},n=this._getTimeRange(this.manager),s={earliest:this.settings.get("link.openSearch.searchEarliestTime"),latest:this.settings.get("link.openSearch.searchLatestTime")};i.defaults(s,n),null!=s.earliest&&(t.earliest=s.earliest),null!=s.latest&&(t.latest=s.latest),this.settings.has("link.openSearch.search")?t.q=this.settings.get("link.openSearch.search"):this.settings.get("link.openSearch.viewTarget")?t={sid:this.searchJobModel.get("id")}:(t.sid=this.searchJobModel.get("id"),t.q=e.settings.resolve(),e instanceof c&&(t.s=e.get("searchname")));var a=this.settings.get("link.openSearch.viewTarget"),r=this.model.report.openInView(this.model.user),o=f.getViewRouteData(r,this.collection.appLocals),l=a?f.page(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),a,{data:t}):o.route(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:t});h.redirect(l,!0,void 0,!0)},_openPivot:function(){var e,t,i=this.model.application;this.model.report.has("id")?e={s:this.model.report.get("id")}:e={q:this.model.report.entry.content.get("search")};this.model.report.entry.content.has("dispatch.earliest_time")&&(e.earliest=this.model.report.entry.content.get("dispatch.earliest_time"),e.latedst=this.model.report.entry.content.get("dispatch.latest_time")),t=f.pivot(i.get("root"),i.get("locale"),i.get("app"),{data:e}),h.redirect(t,!0,void 0,!0)},_export:function(){var e=new o({model:{searchJob:this.searchJobModel,application:this.model.application,report:this.model.report},usePanelType:!0,onHiddenRemove:!0});e.render().appendTo(t("body")),e.show()},_inspect:function(){var e=this.model.application,t=f.jobInspector(e.get("root"),e.get("locale"),e.get("app"),this.searchJobModel.get("id"));g.open(t,"splunk_job_inspector",{width:870,height:560,menubar:!1})},_refresh:function(){for(var e=this.manager;e instanceof d;)e=e.parent;e.trigger("viz:onRefresh"),e.startSearch({refresh:!0})},_stopSearch:function(){for(var e=this.manager;e instanceof d;)e=e.parent;this.model.menus.searchFinalized.set("finalizedByUser",!0),this.model.menus.stopSearch.set("visible",!1),this.model.menus.refresh.set("visible",!0),e.finalize()},resolveBooleanOptions:function(){for(var e,t=this.settings,i=0,n=arguments.length-1;i<n;i++)if(null!=(e=t.get(arguments[i])))return u.normalizeBoolean(e);return u.normalizeBoolean(arguments[arguments.length-1])},template:'<div class="menus"></div>'})}.apply(t,n))||(e.exports=s)},"views/dashboard/element/Header":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/element/Title"),i("views/dashboard/editor/TitleEditor"),i("views/dashboard/editor/ElementEditor"),i("views/dashboard/element/ProgressBar"),i("views/dashboard/element/SearchMessages"),i("views/dashboard/element/Header.pcssm")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d){return n.extend({moduleId:e.i,viewOptions:{register:!1},className:"panel-head",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.deferreds=e.deferreds,this.reportReady=this.deferreds.reportReady||t.Deferred().resolve(),this.searchBNFsReady=this.deferreds.searchBNFs||t.Deferred().resolve(),this.listenTo(this.model.state,"change:mode",this.onModeChange),this.listenTo(this.model.elementState,"edit:title",(function(){this.children.titleEditor&&this.children.titleEditor.focus()}))},render:function(){this.$el.html(this.compiledTemplate()),this._renderProgressBar(),this._renderSearchMessages(),this.onModeChange()},onModeChange:function(){switch(this._resetComponents(),this.model.state.get("mode")){case"view":this._renderTitle();break;case"edit":t.when(this.reportReady,this.searchBNFsReady).done(function(){this._renderTitleEditor(),this._renderElementEditor()}.bind(this))}},_resetComponents:function(){this.$("h3.title-editor-container").length&&this.$("h3.title-editor-container").remove(),this.children.title&&(this.children.title.remove(),this.children.title=null),this.children.titleEditor&&(this.stopListening(this.children.titleEditor),this.children.titleEditor.remove(),this.children.titleEditor=null),this.children.elementEditor&&(this.children.elementEditor.remove(),this.children.elementEditor=null),this.stopListening(this.model.report),this.stopListening(this.model.elementReport)},_renderProgressBar:function(){this.children.progressBar&&this.children.progressBar.remove(),this.children.progressBar=new o({id:i.uniqueId(this.id+"progressbar-"),managerid:this.settings.get("managerid"),model:{report:this.model.report},el:t('<div class="progress-container pull-right"></div>')}),this.children.progressBar.render().$el.appendTo(this.$el)},_renderSearchMessages:function(){this.children.searchMessages&&this.children.searchMessages.remove(),this.children.searchMessages=new l({managerid:this.settings.get("managerid"),model:{application:this.model.application,report:this.model.report,primarySearchMessages:this.model.primarySearchMessages,secondarySearchMessages:this.model.secondarySearchMessages}}),this.children.searchMessages.render().$el.appendTo(this.$el)},_renderTitle:function(){this.children.title=new s({model:this.model.elementReport,attribute:"dashboard.element.title"}),this.children.title.render().appendTo(this.$el)},_renderTitleEditor:function(){this.children.titleEditor=new a({model:this.model.elementReport,attribute:"dashboard.element.title",placeholder:i("No title").t()});var e=t('<h3 class="title-editor-container" />').addClass(d.flexGrow).appendTo(this.$("."+d.container));this.children.titleEditor.render().$el.appendTo(e),this.listenTo(this.children.titleEditor,"change:title",(function(){this.model.controller.trigger("edit:element",{elementId:this.model.elementReport.get("dashboard.element.id")})}))},_renderElementEditor:function(){this.children.elementEditor=new r({model:this.model,collection:this.collection,settings:this.settings}),this.children.elementEditor.render().$el.appendTo(this.$("."+d.container))},template:'<div class="'+d.container+'"></div>'})}.apply(t,n))||(e.exports=s)},"views/dashboard/element/Header.pcssm":function(e,t,i){var n=i(632);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/element/Html":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("splunkjs/mvc/tokenawaremodel"),i("splunkjs/mvc/tokenutils"),i("splunkjs/mvc/messages"),i("shim/splunk.util"),i("splunkjs/mvc/utils"),i("splunkjs/mvc/simplexml/dashboard/tokendeps"),i("splunkjs/mvc/simplexml/eventhandler"),i("util/dashboard_utils"),i("uri/route"),i("util/htmlcleaner"),i("util/xml"),i("services/WebFeatures")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g){var f={a:["href"],iframe:["src","srcdoc"],img:["src"],link:["href"]};return n.extend(i.extend({},d,{moduleId:e.i,viewOptions:{register:!0},className:"dashboard-element html",initialize:function(){n.prototype.initialize.apply(this,arguments),this.elementModel=new s({externalUrlCleanPending:null},{retainUnmatchedTokens:!0,tokenEscaper:a.getEscaper("html"),allowNoEscape:!1}),l.syncModels(this.settings,this.elementModel,{include:["html","serverSideInclude","tokenDependencies","useTokens"],auto:"push"}),this.listenTo(this.settings,"change:serverSideInclude",this.getStaticFile),this.settings.has("serverSideInclude")?(this.contentLoadedDfd=t.Deferred(),i.defer(i.bind(this.getStaticFile,this))):this.contentLoadedDfd=t.Deferred().resolve(),this.listenTo(this.elementModel,"change:html",this.clearErrorAndRender),this.listenTo(this.elementModel,"change:error",this.render),this.setupTokenDependencies()},$body:function(){let e=this.$el.children(".panel-body");return e.length||(e=t('<div class="panel-body html"></div>').appendTo(this.$el)),e},getVisualizationType:function(){return"html"},getStaticFile:function(){var e=this.settings.get("serverSideInclude");if(e){var n=h.getAppAndSource(e,this.model.view.entry.acl.get("app")),s=this.model.application.get("root"),a=this.model.application.get("locale"),r=u.appStaticFile(s,a,n.app,n.src),l=this.settings.get("useTokens"),d=this.elementModel,c=this.contentLoadedDfd;/^https?:/.test(e)||/(^|\/)\.\.\//.test(e)||/^\//.test(e)?(d.set("error",i("Error loading HTML panel content: Invalid src attribute value specified.").t()),c.resolve()):t.ajax({dataType:"html",type:"GET",url:r,error:function(t){d.set("error",404===t.status?o.sprintf(i('Error loading HTML panel content: HTML file "%s" not found.').t(),e):o.sprintf(i("Error loading HTML panel content: Error loading HTML file (HTTP status %d).").t(),t.statusCode)),c.resolve()},success:function(e){""!==e&&d.set({error:null,html:e},{tokens:l}),c.resolve()}})}},handleLinks:function(e){const t=e=>{e.preventDefault();var t=e.metaKey||e.ctrlKey;const i=e.target.closest("a");c.linkTo(i.getAttribute("href"),i.getAttribute("target"),{},t)};for(const[i,n]of Object.entries(f))for(const s of n)e.querySelectorAll(`${i}[${s}]`).forEach(e=>{"a"===i&&"href"===s&&e.addEventListener("click",t)})},updateHtmlContent:function(){let e=this.elementModel.get("html");try{var t=m.serialize(m.replaceCdataNodes(m.$node("<tmp>"+e+"</tmp>"),!0)).match(/^<tmp>([\s\S]*)<\/tmp>$/i);t&&(e=t[1])}catch(e){}var i;try{i=p.cleanWithRefs(e,{allowInlineStyles:h.allowInlineStyles(),allowIframes:h.allowIframes(),allowEmbeds:h.allowEmbeds(),wrapEmbedTags:h.allowWrapEmbed(),allowedDomains:h.allowedDomains(),returnDom:!0,dashboardTelemetry:!0})}catch(t){return console.error(`Html.js error for: "${e}": ${t}`),void this.elementModel.set("error",`Couldn't parse "${e}": ${t}`)}if(i&&i.cleanHtmlOrDom){var n=i.cleanHtmlOrDom,s=i.externalUrlDomRefs;0!==s.size?g.default.getFeatureSettings("dashboards_csp").then(e=>{if(!e||!e.enable_dashboards_external_content_restriction)return void this.writeToDom(n);if(!0===this.settings.get("allowedOnce"))return this.writeToDom(n),void this.settings.set("allowedOnce",void 0);if(!1===this.settings.get("allowedOnce")){const e=this.settings.get("urlsDenied");return this.settings.set("allowedOnce",void 0),s.forEach((t,i)=>{e.includes(i)&&t()}),void this.writeToDom(n)}const t=[],i=[],a=this.settings.get("urlsAllowed")||[],r=this.settings.get("urlsDenied")||[];for(var o of s.keys())a.includes(o)||(t.push(o),r.includes(o)||i.push(o));if(0!==t.length||0!==i.length){if(t.length>0&&0===i.length)return s.forEach((e,t)=>{r.includes(t)&&e()}),void this.writeToDom(n);var l=[...s.keys()];this.elementModel.set("externalUrlCleanPending",{urls:l,onAllowUrls:e=>{this.settings.set("urlsAllowed",e),this.settings.set("allowedOnce",!0),this.elementModel.unset("error"),this.writeToDom(n),this.elementModel.set("externalUrlCleanPending",null)},onDenyUrls:e=>{this.settings.set("urlsDenied",e),this.settings.set("allowedOnce",!1),s.forEach((e,t)=>{l.includes(t)&&e()}),this.elementModel.unset("error"),this.writeToDom(n),this.elementModel.set("externalUrlCleanPending",null)}})}else this.writeToDom(n)}):this.writeToDom(n)}else this.writeToDom(document.createDocumentFragment())},clearErrorAndRender:function(){this.elementModel.has("error")&&this.elementModel.unset("error"),this.render()},render:function(){return this.elementModel.has("error")?r.render({icon:"warning-sign",level:"error",message:this.elementModel.get("error")},this.$body()):this.elementModel.has("html")&&this.updateHtmlContent(),this},writeToDom:function(e){this.i18nLocalizeTagsAttrs(e),this.handleLinks(e),this.$body().html(e)},i18nLocalizeTagsAttrs:function(e){for(const t of e.querySelectorAll("[i18ntag]"))t.innerText=i(t.innerText).t();for(const t of e.querySelectorAll("[i18nattr]"))t.getAttribute("i18nattr").split(",").forEach(e=>{e=e.trim(),t[e]&&(t[e]=i(t[e]).t())})},getExportParams:function(){return{}},componentReady:function(){return this.contentLoadedDfd.promise()},remove:function(){this.stopListeningToTokenDependencyChange(),n.prototype.remove.apply(this,arguments)}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/element/ProgressBar":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/dashboard/Base"),i("shim/splunk.util"),i("stubs/splunk.config"),i("models/search/Job"),i("views/shared/ProgressBar")],void 0===(s=function(e,t,i,n,s,a,r,o,l){return s.extend({moduleId:e.i,className:"splunk-progressbar",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.model=i.extend({jobState:new n.Model},this.model);var t=i.debounce(this.render);this.model.jobState.on("change",t,this),this.model.searchJob=new o,this.children.progressBar=new l({model:this.model.searchJob,animateRealTime:!1})},onManagerChange:function(e){this.manager&&this.manager.off(null,null,this);var t=i.find(e,(function(e){return"primary"===e.getType()}));t&&(this.manager=t,this.model.jobState.clear(),this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress search:done",this.onSearchProgress,this),this.manager.on("search:error",this.onSearchFail,this),this.manager.on("search:fail",this.onSearchFail,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.replayLastSearchEvent(this))},onSearchStart:function(){var e=this.manager.getSid();this.model.searchJob.set("id",e),this.model.jobState.set({progress:!0})},onSearchProgress:function(e){var t=e.content||{};if(this._shouldShowProgress()||t.isDone){this.model.searchJob.setFromSplunkD({entry:[e]});var i=t.dispatchState;void 0===i||"FAILED"===i||"DONE"===t.dispatchState?this.model.jobState.clear():this.manager.isRefresh()||this.model.jobState.set({progress:!0})}},onSearchFail:function(){this.model.jobState.clear()},onSearchCancelled:function(){this.model.jobState.clear()},_shouldShowProgress:function(){return"none"!==this.model.report.entry.content.get("dashboard.element.refresh.display")||!this.manager.isRefresh()},render:function(){return this.model.jobState.has("progress")&&this.$el.is(":empty")&&this.children.progressBar.render().prependTo(this.$el),this},remove:function(){return i(this.children).invoke("remove"),i(this.model).invoke("off"),this.manager&&this.manager.off(null,null,this),s.prototype.remove.call(this)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/element/SearchMessages":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/dashboard/Base"),i("views/shared/delegates/Popdown"),i("views/shared/Modal"),i("views/shared/dialogs/RiskyCommand"),i("models/Base"),i("splunkjs/mvc/messages"),i("splunkjs/mvc/postprocessmanager"),i("util/dashboard_utils"),i("util/splunkd_utils"),i("shim/splunk.util")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p){return s.extend({moduleId:e.i,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.model=i.extend({primarySearchMessages:new n.Model,secondarySearchMessages:new n.Model},this.model);var t=i.debounce(this.render);this.model.primarySearchMessages.on("change",t,this),this.model.secondarySearchMessages.on("change",t,this)},onManagerChange:function(e){this.managers&&(i.each(this.managers,(function(e){this.stopListening(e)}),this),this.managers=null),e&&(this.managers=e,i.each(this.managers,(function(e){"primary"===e.getType()?(this.primaryManager=e,this._shouldShowProgress()&&this.model.primarySearchMessages.clear(),this.listenTo(e,"search:progress search:done",this.onPrimarySearchProgress),this.listenTo(e,"search:error",this.onPrimarySearchError.bind(this,e))):(this.listenTo(e,"search:start",i.partial(this.onSecondarySearchStart,e)),this.listenTo(e,"search:fail",i.partial(this.onSecondarySearchFail,e)),this.listenTo(e,"search:error",i.partial(this.onSecondarySearchError,e)),this.listenTo(e,"search:cancelled",i.partial(this.onSecondarySearchCancelled,e))),e.replayLastSearchEvent(this)}),this))},onSecondarySearchStart:function(e,t){this.model.secondarySearchMessages.unset(e.id)},onSecondarySearchCancelled:function(e,t){this.onSecondarySearchStart(e,t)},onSecondarySearchError:function(e,t,i){var n=d.getSearchErrorMessage(i)||t;n=p.sprintf("[%s] %s",e.getType(),n),h.updateSearchMessage(this.model.secondarySearchMessages,e.id,"error",n,{reset:!0})},onSecondarySearchFail:function(e,t){var i=d.getSearchFailureMessage(t);i=p.sprintf("[%s] %s",e.getType(),i),h.updateSearchMessage(this.model.secondarySearchMessages,e.id,"error",i,{reset:!0})},onPrimarySearchProgress:function(e){var t=e.content||{};if((this._shouldShowProgress()||t.isDone)&&t.messages){var n=i(t.messages).chain().where({type:"ERROR"}).pluck("text").value(),s=i(t.messages).chain().where({type:"WARN"}).pluck("text").value();this.model.primarySearchMessages.set("errors",n,{unset:i.isEmpty(n)}),this.model.primarySearchMessages.set("warnings",s,{unset:i.isEmpty(s)})}},onPrimarySearchError:function(e,t,i,n){if(i&&i.data&&i.data.messages&&u.messagesContainsOneOfTypes(i.data.messages,[u.RISKY_COMMAND])){if(u.getParentRiskyError(e.parent))return;this.model.primarySearchMessages.set("errors",i.data.messages),this._updateDashboardMessages(e),this.model.searchJob!==n&&(this.model.searchJob=n,this.riskyWarningDialog&&(this.riskyWarningDialog.remove(),this.riskyWarningDialog=null),!this.model.searchJob.error&&this.model.searchJob.setError&&this.model.searchJob.setError(i))}},getMessages:function(){var e={errors:this.model.primarySearchMessages.get("errors")||[],warnings:this.model.primarySearchMessages.get("warnings")||[]};return i.chain(this.model.secondarySearchMessages.toJSON()).values().each((function(t){e.errors=e.errors.concat(t.errors||[]),e.warnings=e.warnings.concat(t.warnings||[])})),e},render:function(){var e=this.getMessages();if(this._removeError(),0===e.errors.length&&0===e.warnings.length)return this;var t,n=u.messagesContainsOneOfTypes(e.errors,[u.RISKY_COMMAND]);t=n?e.errors.reduce((function(e,t){return t.type===u.RISKY_COMMAND&&(e+=t.text),e}),""):i("Click to see the error details.").t();var s=this.compiledTemplate({errors:e.errors,warnings:e.warnings,isRiskyCommand:n,title:t});this.$el.html(s),this.$errorTooltip=this.$el.find("a.error-indicator"),this.$errorTooltip.tooltip("destroy"),this.$errorTooltip.tooltip({animation:!1,container:"body"}),this.$error=this.$el.find(".error-details");var r={el:this.$error};return n&&(r.mode="dialog",r.detachDialog=!0,r.dialog="> .risky-command-dialog",r.attachDialogTo=!0),this.children.errorPopdown=new a(r),n&&(this.listenTo(this.children.errorPopdown,"show",function(){this.showRiskyWarningDialog()}.bind(this)),this.listenTo(this.children.errorPopdown,"hide",function(){this.hideRiskyWarningDialog()}.bind(this)),this.listenTo(this.children.errorPopdown,"shown",function(){this.riskyWarningDialog&&this.riskyWarningDialog.focus()}.bind(this))),this},_renderRiskyWarningDialog:function(){var e={model:{searchJob:this.model.searchJob,application:this.model.application},hideInvestigateBtn:!0,actionableText:i("Do you want to run the search string?").t(),backdrop:!1};this.primaryManager&&(e.search=this.primaryManager.search.get("search"),e.showSearchQuery=!0,this.primaryManager instanceof c&&(e.search=this.primaryManager.fullSearch)),this.children.errorPopdown&&(e.el=this.children.errorPopdown.delegate().$el);var t=new o(e);return this.listenTo(t,"runSearch",function(){if(this.primaryManager instanceof c){const e=this.primaryManager.parent.getJobResponse();let t=!0;if(e&&e.entry&&e.entry[0]){const i=new Date(e.entry[0].published),n=new Date(i.getTime()+1e3*e.entry[0].content.ttl);t=Date.now()>n}this.primaryManager.settings.set("check_risky_command",!1),t?this.primaryManager.parent.startSearch({refresh:!0}):this.primaryManager.startSearch({refresh:!0})}else this.primaryManager&&(this.primaryManager.settings.set("check_risky_command",!1),this._removeDashboardMessages(this.primaryManager));p.trackEvent({type:"dashboard.telemetry",data:{pageAction:"riskyWarningDialog.runSearch"}})}.bind(this)),this.listenTo(t,"cancel",function(){this.children.errorPopdown&&this.children.errorPopdown.hide(),p.trackEvent({type:"dashboard.telemetry",data:{pageAction:"riskyWarningDialog.cancel"}})}.bind(this)),t.render(),t.$(r.HEADER_TITLE_SELECTOR).children().last().html(i("This search has a potential security risk").t()),t},showRiskyWarningDialog:function(){this.riskyWarningDialog||(this.riskyWarningDialog=this._renderRiskyWarningDialog()),this.riskyWarningDialog.show(),p.trackEvent({type:"dashboard.telemetry",data:{pageAction:"riskyWarningDialog.open"}})},hideRiskyWarningDialog:function(){this.riskyWarningDialog&&this.riskyWarningDialog.hide()},_removeError:function(){this.$errorTooltip&&(this.$errorTooltip.tooltip("destroy"),this.$errorTooltip=null),this.$error&&(this.$error.remove(),this.$error=null),this.children.errorPopdown&&this.children.errorPopdown.remove()},_shouldShowProgress:function(){return"none"!==this.model.report.entry.content.get("dashboard.element.refresh.display")||!this.primaryManager.isRefresh()},remove:function(){return i(this.children).invoke("remove"),i(this.model).invoke("off"),s.prototype.remove.call(this)},_updateDashboardMessages:function(e){var t=e.has("collection")?e.get("collection").dashboardMessages:"";if(t){var n=t.get("warn-risky-commands");if(n){var s=n.get("searchName");-1===s.indexOf(e.name)&&s.push(e.name)}else t.add(new l({id:"warn-risky-commands",searchName:[e.name],level:"warning",text:i("Some visualizations have not loaded since we detected usage of risky commands in the query.").t(),linkText:i("Learn more").t(),docsLink:"learnmore.splsafeguards",dismissable:!0}))}},_removeDashboardMessages:function(e){var t=e.has("collection")?e.get("collection").dashboardMessages:"",i=t&&t.get("warn-risky-commands");if(i){var n=i.get("searchName");if(n){var s=n.indexOf(e.name);-1!==s&&(n.splice(s,1),0===n.length&&t.remove("warn-risky-commands"))}}},template:'                <div class="error-details <%- errors.length ? \'severe\' : \'\' %>">                    <a                         href="#"                         class="dropdown-toggle error-indicator"                         aria-label="<%- title %>"                        role="button"                         title="<%- title %>"                    >                        <i class="icon-warning-sign"></i>                    </a>                    <% if (isRiskyCommand) { %>                        <div class="modal risky-command-dialog"/>                    <% } else { %>                        <div class="dropdown-menu">                            <div class="arrow"></div>                            <ul class="first-group error-list">                                <% errors.forEach(function(error) { %>                                    <li class="error">                                        <i class="icon-warning-sign"></i>                                        <%- error %>                                    </li>                                <% }); %>                                <% warnings.forEach(function(warn) { %>                                    <li class="warning">                                        <i class="icon-warning-sign"></i>                                         <%- warn %>                                    </li>                                <% }); %>                            </ul>                        </div>                    <% } %>                </div>            '})}.apply(t,n))||(e.exports=s)},"views/dashboard/element/TimeIndicator":function(e,t,i){var n,s;n=[e,i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("views/dashboard/Base"),i("util/moment"),i("util/moment/compactFromNow")],void 0===(s=function(e,t,i,n,s,a){var r={callbacks:{},timer:null,registerCallback:function(e,i,n){this.callbacks[e]&&delete this.callbacks[e],this.callbacks[e]=t.bind(i,n),this._startTimer()},removeCallback:function(e){delete this.callbacks[e],t.isEmpty(this.callbacks)&&this._stopTimer()},_startTimer:function(){this.timer||(this.timer=setInterval(function(){t.each(this.callbacks,(function(e){e()}))}.bind(this),1e3))},_stopTimer:function(){this.timer&&(clearInterval(this.timer),delete this.timer)}};return s.extend({moduleId:e.i,className:"splunk-timeindicator",viewOptions:{register:!1},initialize:function(e){s.prototype.initialize.apply(this,arguments),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.listenTo(this.settings,"change",this._setupRefreshTimer),this._timerId=t.uniqueId("timer_"),this._initializeRefreshModel()},_initializeRefreshModel:function(){this.refreshTimeModel=new n.Model({text:""}),this.listenTo(this.refreshTimeModel,"change",this._renderText)},onManagerChange:function(e){this.manager&&this.stopListening(this.manager);var i=t.find(e,(function(e){return"primary"===e.getType()}));i&&(this.manager=i,this.listenTo(this.manager,"search:start",this._clear),this.listenTo(this.manager,"search:progress",this._updateSearchState),this.listenTo(this.manager,"search:done",this._updateSearchState),this.listenTo(this.manager,"search:fail",this._clear),this.listenTo(this.manager,"search:cancelled",this._clear),this.manager.replayLastSearchEvent(this))},_updateSearchState:function(e){var i=(e||{}).content||{};"FAILED"===i.dispatchState||"PARSING"===i.dispatchState||"QUEUED"===i.dispatchState?this._clear():"RUNNING"===i.dispatchState?i.isRealTimeSearch?this.refreshTimeModel.set("text",t("Real-time").t()):this._clear():"DONE"===i.dispatchState&&(this._clear(),this._refreshTime=a(this.manager.get("published")),this._setupRefreshTimer())},_setupRefreshTimer:function(){this._refreshTime&&!1!==this.settings.get("refresh.time.visible")&&r.registerCallback(this._timerId,this._updateRefreshTime,this)},_clearRefreshTimer:function(){r.removeCallback(this._timerId)},_updateRefreshTime:function(){this._refreshTime&&this.refreshTimeModel.set({text:this._refreshTime.compactFromNow()})},_clear:function(){this._clearRefreshTimer(),this.refreshTimeModel.set("text","")},render:function(){return i('<span class="time-freshness"></span>').appendTo(this.$el),this._renderText(),this},_renderText:function(){this.$el.children(".time-freshness").text(this.refreshTimeModel.get("text"))},remove:function(){this._clearRefreshTimer(),s.prototype.remove.apply(this,arguments)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/element/Title":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("splunkjs/mvc"),i("splunkjs/mvc/utils"),i("splunkjs/mvc/tokenutils")],void 0===(s=function(e,t,i,n,s,a,r){return n.extend({moduleId:e.i,viewOptions:{register:!1},tagName:"h3",constructor:function(e){n.prototype.constructor.call(this,e,{retainUnmatchedTokens:!0}),this.settings._sync=a.syncModels(this.settings,this.model,{auto:"pull",prefix:"dashboard.element.",include:["title"]}),this.listenTo(this.settings,"change:title",this.render)},render:function(){var e=this.settings.get("title",{tokens:!0});return e&&(e=r.replaceTokens(i(e).t(),s.Components,{tokenNamespace:this.settings._tokenNamespace,escaper:this.settings._tokenEscaper,allowNoEscape:this.settings._allowNoEscape})),e?this.$el.text(i(e).t()).show():this.$el.text("").hide(),this},remove:function(){this.settings&&this.settings._sync&&this.settings._sync.destroy(),n.prototype.remove.apply(this,arguments)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/form/Fieldset":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/editor/FieldsetEditor"),i("views/dashboard/form/Fieldset.pcss")],void 0===(s=function(e,t,i,n,s){return n.extend({moduleId:e.i,viewOptions:{register:!0},className:"fieldset",initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:mode",this._updateState)},addChild:function(e){e.render().$el.appendTo(this.$el),this._updateState(),this.$el.trigger("structureChanged")},render:function(){n.prototype.render.apply(this,arguments),this._updateState()},getInputs:function(){return this.getChildElements(".input")},getHTMLElements:function(){return this.getChildElements(".html")},isEmpty:function(){return 0===this.getInputs().length&&0===this.getHTMLElements().length},events:{updateState:"_updateState"},_updateState:function(){return i.find(this.getInputs(),(function(e){return e.settings.has("label")}),this)?this.$el.removeClass("hide-label"):this.$el.addClass("hide-label"),this.isEmpty()?this.$el.addClass("empty"):this.$el.removeClass("empty"),this.shouldHideFilters()?this.hide():this.show(),this.$el.removeClass("editable"),(!this.model.state.has("editable")||this.model.state.get("editable"))&&this.$el.addClass("editable"),this},shouldHideFilters:function(){return!this.isEditMode()&&this.isEmpty()},resetFieldsetEditor:function(){this.children.fieldsetEditor&&(this.children.fieldsetEditor.remove(),this.children.fieldsetEditor=null)},renderFieldsetEditor:function(){this.resetFieldsetEditor(),this.children.fieldsetEditor=new s({model:this.model,parent:this}),this.children.fieldsetEditor.render().$el.prependTo(this.$el)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/form/Fieldset.pcss":function(e,t,i){var n=i(612);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/form/GlobalFieldset":function(e,t,i){var n,s;n=[i("require/underscore"),i("shim/jquery"),e,i("views/dashboard/form/Fieldset"),i("views/dashboard/form/Submit"),i("views/dashboard/form/GlobalFieldset.pcss")],void 0===(s=function(e,t,i,n,s){return n.extend({moduleId:i.i,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.settings,"change:submitButton",this._updateSubmitButton),this.listenTo(this.model.state,"change:mode",this._recreateToggleLink),this.listenTo(this.model.page,"change:hideFilters",this._updateState)},events:{"click [data-action=hide-filters]":function(e){e.preventDefault(),this.model.controller.trigger("action:hideFilters")}},addChild:function(e){this.children.submit?e.render().$el.insertBefore(this.children.submit.$el):e.render().$el.appendTo(this.$el),this.$el.trigger("structureChanged"),this._recreateToggleLink(),this._updateState()},shouldHideFilters:function(){var e=!this.isEditMode(),t=this.model.page.get("hideFilters")||this.isEmpty();return e&&t},_updateState:function(){n.prototype._updateState.apply(this,arguments),this.model.controller.trigger("state:globalFieldsetChildren",{isEmpty:this.isEmpty()})},isEmpty:function(){return n.prototype.isEmpty.apply(this,arguments)&&!this.children.submit},_updateSubmitButton:function(){this.settings.get("submitButton")?this.children.submit||(this.children.submit=new s({id:"submit",model:e.extend({},this.model),parent:this}),this.children.submit.render().$el.appendTo(this.$el),this.$el.trigger("inputCreated"),this._recreateToggleLink(),this._updateState()):this.children.submit&&(this.children.submit.remove(),this.children.submit=null,this.$el.trigger("inputRemoved"),this._updateState())},show:function(){this.$el.show()},hide:function(){this.$el.hide()},_renderToggleLink:function(){if(!this.isEditMode()){var i=t('<a class="hide-global-filters" data-action="hide-filters" href="#">'+e("Hide Filters").t()+"</a>");this.$el.append(i)}},_recreateToggleLink:function(){var e=this.$el.find(".hide-global-filters");e.length>0&&e.remove(),this._renderToggleLink()},render:function(){return n.prototype.render.apply(this,arguments),this._renderToggleLink(),this._updateSubmitButton(),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/form/GlobalFieldset.pcss":function(e,t,i){var n=i(636);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/form/Input":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/editor/input/InputEditor"),i("splunkjs/mvc/simpleform/inputsettings"),i("splunkjs/mvc/savedsearchmanager"),i("splunkjs/mvc/postprocessmanager"),i("dashboard/manager/FormManager"),i("splunkjs/mvc/tokenutils"),i("dashboard/DashboardFactory"),i("dashboard/mixins/EventManagerMixin"),i("dashboard/mixins/SearchManagerMixin"),i("splunkjs/mvc/simplexml/dashboard/tokendeps"),i("splunkjs/mvc/utils")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m){var g=["name","model","collection","el","attributes","deferreds","className","tagName","events","settingsOptions"],f=c.getDefault().getTypeConfigByClass("input"),v={};return i.each(f,(function(e){v[e.settingsToCreate.type]=i.omit(e.settingsToCreate,"type")})),n.extend(i.extend({},p,u,h,{moduleId:e.i,_isDashboardInput:!0,viewOptions:{register:!0},initialize:function(e){n.prototype.initialize.apply(this,arguments),e=e||{},this.inputId=e.inputId||i.uniqueId((this.id||"input")+"_"),this._extractTokenName(),this._normalizeSettings(),this.listenTo(this.settings,"change:label",this._renderLabel),this.listenTo(this.settings,"change:token",this._normalizeLabel),this.listenTo(this.settings,"change:type",this._renderInput),this.listenTo(this.settings,"change:token change:type",this._applyTokenName),this.listenTo(this.settings,"change:choices",this._normalizeChoices),this.listenTo(this.settings,"change:managerid change:manager",this._bindSearchManager),this.listenTo(this.model.state,"change:mode",this._onModeChange),this.setupTokenDependencies(),this.setupSearchManager(),this.setupEventManager()},_normalizeSettings:function(){this._normalizeChoices(),this._normalizeDefaults(),this._normalizeLabel()},_normalizeChoices:function(){if(this.settings.has("choices")){var e=this.settings.get("choices");e=i(e).map((function(e){return i.isUndefined(e.value)?{label:e.label,value:e.label}:e}),this),this.settings.set("choices",e)}},_normalizeDefaults:function(){var e=this.settings.get("default"),t=this.settings.get("initialValue");this.settings.has("choices")&&(e&&(e=this._getChoiceValueFromLabel(e),this.settings.set("default",e,{silent:!0})),t&&(t=this._getChoiceValueFromLabel(t),this.settings.set("initialValue",t,{silent:!0})))},_normalizeLabel:function(){var e=this.settings.get("label",{tokens:!0}),t=this.settings.get("token");null==e&&"time"!=this.settings.get("type")&&this.settings.set("label",t),this.settings.set("labelledBy",this.inputId+"-label")},_getChoiceValueFromLabel:function(e){var t=i.pluck(this.settings.get("choices"),"label"),n=i.pluck(this.settings.get("choices"),"value");if(i.isString(e)){var s=i.indexOf(t,e);e=s<0?e:n[s]}else i.isArray(e)&&(e=i.map(e,(function(e){var s=i.indexOf(t,e);return s<0?e:n[s]})));return e},_bindInputSettings:function(e){this.settings._sync&&this.settings._sync.destroy(),this.vizSettings&&this.vizSettings.dispose(),this.vizSettings=new a(i.extend(e||{},i.omit(this.options,g)),this.options.settingsOptions),this.vizSettings.id=this.inputId,this.settings._sync=m.syncModels(this.settings,this.vizSettings,{auto:!0,exclude:g.concat(["value","earliest_time","latest_time","populating_earliest_time","populating_latest_time"])})},_extractTokenName:function(){var e=function(e,t,i){return 0===e.indexOf(t)?i&&e.slice(-i.length)===i?e.substring(t.length,e.length-i.length):e.substring(t.length):null};if("time"!==this.settings.get("type")){var t=this.settings.get("value",{tokens:!0});if(d.isToken(t)){var i=e(d.getTokenName(t),"form.");i&&this.settings.set("token",i)}}else{var n=this.settings.get("earliest_time",{tokens:!0}),s=this.settings.get("latest_time",{tokens:!0});d.isToken(n)&&d.isToken(s)&&(n=e(d.getTokenName(n),"form.",".earliest"),s=e(d.getTokenName(s),"form.",".latest"),n&&s&&n===s&&this.settings.set("token",n))}},_applyTokenName:function(){var e=this.settings.get("type"),t=this.settings.get("token");if("time"===e){this.settings.unset("value",{tokens:!0});var i={};i.earliest_time=t?"$form."+t+".earliest$":"$earliest$",i.latest_time=t?"$form."+t+".latest$":"$latest$",this.settings.set(i,{tokens:!0}),this.vizSettings&&this.vizSettings.set(i,{tokens:!0})}else{this.settings.set({earliest_time:null,latest_time:null},{unset:!0,tokens:!0});var n="$form."+t+"$";this.settings.set("value",n,{tokens:!0}),this.vizSettings&&this.vizSettings.set("value",n,{tokens:!0})}},onSearchManagerChanged:function(e,t){t instanceof r?this.settings.set({searchName:t.get("searchname"),searchType:"saved"},{tokens:!0}):t instanceof o?this.settings.set({searchType:"postprocess",search:t.get("search",{tokens:!0}),basesearch:t.get("managerid")},{tokens:!0}):t&&this.settings.set({searchType:"inline",search:t.get("search",{tokens:!0}),populating_earliest_time:t.get("earliest_time",{tokens:!0}),populating_latest_time:t.get("latest_time",{tokens:!0})},{tokens:!0})},render:function(){return this._renderLabel(),this._renderInput(),this._onModeChange(),this},_triggerValueChangeEvent:function(){var e=this.children.input,t={value:e._getSelectedValue(),label:e._getSelectedLabel(),data:e._getSelectedData()};this.trigger("valueChange",t)},_resetInput:function(){this.children.input&&(this.stopListening(this.children.input),this.children.input.off(null,null,this),this.children.input.remove(),this.children.input=null)},_renderLabel:function(){var e=this.settings.get("label");this.$label||(this.$label=t("<label></label>").appendTo(this.$el)),e?(this.$label.text(i(e).t()),this.$label.attr("id",this.inputId+"-label")):this.$label.html("&nbsp;")},_renderInput:function(){var e=this.settings.get("type"),n="input input-"+e;this.$el.hasClass("hidden")&&(n+=" hidden"),this.$el.attr("class",n);var s=v[e];if(s){var a=s.getView();this._bindInputSettings(i.omit(s,"view","module")),this._resetInput();var r={id:this.inputId,model:this.model,el:t("<div></div>").appendTo(this.$el),settings:this.vizSettings,label:this.settings.get("label")};this.children.input=new a(r,this.options.settingsOptions),this.children.input.render().$el.appendTo(this.$el),this.children.input.$el.find("[aria-labelledby*='"+this.inputId+"-label']").each((function(e){t(this).attr("id")&&t(this).attr("aria-labelledBy",t(this).attr("aria-labelledBy")+" "+t(this).attr("id"))})),this.listenTo(this.children.input,"all",this.trigger),this.listenTo(this.children.input,"change",(function(){l.handleValueChange(this)})),this.listenTo(this.children.input,"change datachange",(function(){i.defer(this._triggerValueChangeEvent.bind(this))})),this.trigger("create:visualization",this.children.input),i.defer(i.bind((function(){l.handleValueChange(this),this._triggerValueChangeEvent()}),this))}},_onModeChange:function(){switch(this._removeInputEditor(),this.model.state.get("mode")){case"edit":this._renderInputEditor()}},_removeInputEditor:function(){this.children.inputEditor&&(this.children.inputEditor.remove(),this.children.inputEditor=null),this.$(".drag-handle").remove()},_renderInputEditor:function(){t('<div class="drag-handle"></div>').prependTo(this.$el),this.children.inputEditor=new s({model:this.settings,inputSettings:this.vizSettings,controller:this.model.controller,inputId:this.id}),this.children.inputEditor.render().prependTo(this.$el)},hasValue:function(){return!!this.children.input&&this.children.input._hasValueForDashboards()},val:function(e){if(this.children.input)return this.children.input.val.apply(this.children.input,arguments)},onInputReady:function(){return this.children.input&&i.isFunction(this.children.input._onReady)?this.children.input._onReady():t.Deferred().resolve()},getInputView:function(){return this.children.input},remove:function(){this.stopListeningToTokenDependencyChange(),n.prototype.remove.apply(this,arguments)}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/form/Submit":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("dashboard/manager/FormManager")],void 0===(s=function(e,t,i,n,s){return n.extend({moduleId:e.i,viewOptions:{register:!0},className:"splunk-submit-button form-submit",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.fieldset=e.parent,this.listenTo(this.model.state,"change:mode",this._onModeChange)},render:function(){return n.prototype.render.apply(this,arguments),this.$button=t('<button class="btn btn-primary"></button>').appendTo(this.$el),this.$button.text(i("Submit").t()),this._onModeChange(),this},events:{"click button":function(e){e.preventDefault(),s.submitForm({replaceState:!1})},"click .delete-input":"_delete"},_submit:function(e){e.preventDefault(),this.model.controller.trigger("action:submit-tokens")},_delete:function(e){e.preventDefault(),this.fieldset.settings.set("submitButton",!1),this.model.controller.trigger("edit:fieldset",{fieldsetId:this.fieldset.id,fieldsetSettings:this.fieldset.settings})},_onModeChange:function(){switch(this.model.state.get("mode")){case"view":this._removeEditor();break;case"edit":this._renderEditor()}},_removeEditor:function(){this.$(".edit-dropdown").remove()},_renderEditor:function(){this._removeEditor();var e=t('<div class="edit-dropdown"><a href="#" class="delete-input"><i class="icon-x"></i></a></div>');e.find(".delete-input").attr("title",i("Delete submit button").t()),e.prependTo(this.$el)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/DashboardHeader":function(e,t,i){var n,s;n=[e,i(0),i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/header/Title"),i("views/dashboard/header/Description"),i("views/dashboard/header/EditMenu"),i("views/dashboard/header/DashboardModalMessage/DashboardModalMessage"),i("views/dashboard/editor/TitleEditor"),i("views/dashboard/editor/DescriptionEditor"),i("util/react_render")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h){return s.extend({moduleId:e.i,viewOptions:{register:!1},className:"dashboard-header",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.showMenu=!e.hideMenu,this.showDescription=!!e.showDescription,this.allowEdit=!0===e.allowEdit,this.deferreds=e.deferreds,this.listenTo(this.model.state,"change:mode",this.render),this.listenTo(this.settings,"change",this._handleSettingChange),this.listenTo(this.model.page,"change:theme",(function(e,t){this.settings.set("theme",t)}))},_handleSettingChange:function(){this.model.controller.trigger("edit:dashboard",{dashboardId:this.settings.get("id")})},render:function(){return this.removeTitleView(),this.removeDescriptionView(),this.removeHeaderControlsView(),this.allowEdit&&this.isEditMode()||!this.showMenu?this.allowEdit&&this.isEditMode()?(this.createDescriptionEditor(),this.createDashboardTitleEditor()):(this.createTitleView(),this.showDescription&&this.createDescriptionView()):this.model.page.get("hideTitle")||i.when(this.deferreds.scheduledView,this.deferreds.userPref).then(this.renderMenu.bind(this)),this},renderMenu:function(){this.createHeaderControlsView(),this.createTitleView(),this.showDescription&&this.createDescriptionView()},createHeaderControlsView:function(){if(this.headerControls=document.createElement("div"),this.headerControls.className="header-controls",this.model.page.get("allowTempVersionRevert")){var e=t.createElement(l);this.children.unmountDashboardModalMessageView=h(e,this.headerControls)}this.model.page.get("hideEdit")||(this.children.editMenuView=new o({model:this.model,collection:{apps:this.collection.appLocalsUnfilteredAll}}),this.headerControls.appendChild(this.children.editMenuView.render().$el[0])),this.$el[0].appendChild(this.headerControls)},removeHeaderControlsView:function(){this.children.editMenuView&&(this.children.editMenuView.remove(),this.children.editMenuView=null),this.children.unmountDashboardModalMessageView&&(this.children.unmountDashboardModalMessageView(),this.children.unmountDashboardModalMessageView=null),this.headerControls&&(this.headerControls.remove(),this.headerControls=null)},createTitleView:function(){this.children.titleView=new a({model:this.model}),this.children.titleView.render().$el.appendTo(this.$el)},removeTitleView:function(){this.children.titleView&&(this.children.titleView.remove(),this.children.titleView=null)},createDescriptionView:function(){this.children.descriptionView=new r({model:this.settings}),this.children.descriptionView.render().$el.appendTo(this.$el),this.$el&&this.settings&&this.settings.get("description")&&this.$el.addClass("has-description")},removeDescriptionView:function(){this.children.descriptionView&&(this.children.descriptionView.remove(),this.children.descriptionView=null),this.$el&&this.$el.removeClass("has-description")},createDashboardTitleEditor:function(){this.removeTitleView(),this.children.titleView=new d({model:this.settings,attribute:"label",placeholder:n("No label").t(),tokens:!1}),this.children.titleView.render().$el.prependTo(this.$el)},createDescriptionEditor:function(){this.removeDescriptionView(),this.children.descriptionView=new c({model:this.settings,attribute:"description",placeholder:n("No description").t(),tokens:!1}),this.children.descriptionView.render().$el.prependTo(this.$el)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/DashboardMessages":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),e,i("views/dashboard/Base"),i("uri/route"),i("views/dashboard/header/DashboardMessage"),i("views/dashboard/header/DashboardMessages.pcss")],void 0===(s=function(e,t,i,n,s,a){return n.extend({moduleId:i.i,className:"dashboard-messages",initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change",this.render),this.listenTo(this.collection.dashboardMessages,"add reset remove change",this.render)},buildMessage:function(e){return new a({model:{message:e,application:this.model.application}})},render:function(){this.$el.empty();var e=this.model.state.get("mode"),i=this.collection.dashboardMessages.filter((function(t){return(!t.has("mode")||t.get("mode")==e)&&!t.get("dismissed")})),n=t(i).chain().map(this.buildMessage,this).invoke("render").pluck("el").value();return this.$el.append(n)[i.length?"show":"hide"](),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/DashboardMessages.pcss":function(e,t,i){var n=i(620);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/header/DashboardModalMessage/DashboardModalMessage":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=(0,d(i(65)).default)(["\n    display: inline-block;\n    padding: 5px 14px;\n"],["\n    display: inline-block;\n    padding: 5px 14px;\n"]),s=d(i(0)),a=i(3),r=d(i(13)),o=d(i("views/dashboard/header/DashboardModalMessage/InfoButtonModal")),l=d(i("views/dashboard/header/DashboardModalMessage/DashboardUpdatedMessage"));function d(e){return e&&e.__esModule?e:{default:e}}var c=r.default.div(n);t.default=function(){return s.default.createElement(c,{"data-test":"dashboard-modal-message"},s.default.createElement(o.default,{dialogTitle:(0,a._)("Dashboard Updated")},s.default.createElement(l.default,null)))},e.exports=t.default},"views/dashboard/header/DashboardModalMessage/DashboardUpdatedMessage":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=(0,c(i(65)).default)(["\n    width: 400px;\n"],["\n    width: 400px;\n"]),s=c(i(0)),a=i(3),r=c(i(13)),o=c(i(35)),l=c(i(27)),d=i("util/url_parser");function c(e){return e&&e.__esModule?e:{default:e}}var h=r.default.div(n);t.default=function(){var e=(0,d.setURLFlag)(location.href,"xmlv","1.0",!1);return s.default.createElement(h,null,s.default.createElement(o.default,{style:{marginBottom:0}},(0,a._)("This dashboard has been updated. If you have any issues with this dashboard, contact the dashboard's owner. You can also temporarily")," ",s.default.createElement(l.default,{openInNewContext:!0,to:e},(0,a._)("open a previous view of this dashboard."))))},e.exports=t.default},"views/dashboard/header/DashboardModalMessage/InfoButtonModal":function(e,t,i){"use strict";i(2),Object.defineProperty(t,"__esModule",{value:!0});var n=m(i(77)),s=(0,m(i(65)).default)(["\n    font-size: 20px;\n    vertical-align: middle;\n    display: inline-block;\n    color: ",";\n    &:focus {\n        box-shadow: ",";\n        background-color: ",";\n    }\n"],["\n    font-size: 20px;\n    vertical-align: middle;\n    display: inline-block;\n    color: ",";\n    &:focus {\n        box-shadow: ",";\n        background-color: ",";\n    }\n"]),a=i(0),r=m(a),o=m(i(4)),l=m(i(13)),d=i(3),c=m(i(87)),h=m(i(34)),u=m(i(183)),p=m(i(72));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,l.default)(c.default)(s,p.default.linkColor,p.default.focusShadow,p.default.focusBackgroundColor),f=function(e){var t=e.dialogTitle,i=e.children,s=(0,a.useState)(!1),o=(0,n.default)(s,2),l=o[0],c=o[1],p=(0,a.useRef)(null),m=r.default.createElement(g,{ref:p,"aria-label":(0,d._)("Dashboard Messages"),onClick:function(){return c(!0)}},r.default.createElement(u.default,{screenReaderText:null})),f=function(){c(!1),p.current.focus()};return r.default.createElement(r.default.Fragment,null,m,r.default.createElement(h.default,{onRequestClose:f,open:l},r.default.createElement(h.default.Header,{title:t,onRequestClose:f}),r.default.createElement(h.default.Body,null,i)))};f.propTypes={dialogTitle:o.default.string.isRequired,children:o.default.node.isRequired},t.default=f,e.exports=t.default},"views/dashboard/header/Description":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base")],void 0===(s=function(e,t,i,n){return n.extend({moduleId:e.i,viewOptions:{register:!1},className:"description",tagName:"p",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:description",this.render)},render:function(){var e=this.model.get("description");return this.$el[e?"removeClass":"addClass"]("hidden"),this.$el.text(i(e||"").t()),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/EditMenu":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/shared/PopTart"),i("util/pdf_utils"),i("views/dashboard/header/ExportMenu"),i("views/dashboard/header/EditMenu.pcssm")],void 0===(s=function(e,t,i,n,s,a,r,o){var l={button:!0,showOpenActions:!0,deleteRedirect:!1},d=s.extend({className:"dropdown-menu other-menu",initialize:function(){s.prototype.initialize.apply(this,arguments),i.defaults(this.options,l),this._menuModel={allowEditPermission:this.model.view.entry.acl.get("can_change_perms")&&this.model.view.entry.acl.canWrite(),allowClone:!this.model.view.isHTML()||this.model.user.canEditViewHtml(),allowMakeHome:this.model.view.isSimpleXML()&&!(this.model.userPref.entry.content.get("display.page.home.dashboardId")===this.model.view.get("id")),allowDelete:this.model.view.entry.acl.canWrite()&&this.model.view.entry.acl.get("removable"),allowSnapshotDownload:this.model.page.get("enableSnapshotDownload"),convertToV2DisplayName:i("Clone in Dashboard Studio").t()}},events:{"click a.edit-perms":function(e){e.preventDefault(),this._triggerControllerEvent("action:edit-permission")},"click a.download-snapshot":function(e){e.preventDefault(),this._triggerControllerEvent("action:download-snapshot")},"click a.view-mobile":function(e){e.preventDefault(),this._triggerControllerEvent("action:view-mobile")},"click a.clone":function(e){e.preventDefault(),this._triggerControllerEvent("action:clone")},"click a.make-home":function(e){e.preventDefault(),this._triggerControllerEvent("action:make-home")},"click a.delete":function(e){e.preventDefault(),this._triggerControllerEvent("action:delete")},"click a.convert-to-v2":function(e){e.preventDefault(),this._triggerControllerEvent("action:open-in-v2")}},_triggerControllerEvent:function(){this.model.controller.trigger.apply(this.model.controller,arguments),this.hide()},render:function(){return this.$el.html(s.prototype.template_menu),this.$el.append(this.compiledTemplate(this._menuModel)),this},isEmpty:function(){return!i.some(i.values(this._menuModel))},template:'                    <ul class="first-group">                        <% if (allowClone) { %>                        <li><a href="#" class="clone"><%- _("Clone").t() %></a></li>                        <% } %>                        <li><a href="#" class="convert-to-v2"><%- convertToV2DisplayName %>                            <p class="new-label '+o.newLabel+'"><%- _("NEW").t() %></p>                        </a>                        </li>                    </ul>                    <ul class="second-group">                        <% if(allowSnapshotDownload) { %>                            <li><a href="#" class="download-snapshot"><%- _("Download Snapshot").t() %></a></li>                        <% } %>                        <li><a href="#" class="view-mobile"><%- _("View on Mobile").t() %></a></li>                        <% if(allowEditPermission) { %>                        <li><a href="#" class="edit-perms"><%- _("Edit Permissions").t() %></a></li>                        <% } %>                        <% if (allowMakeHome) { %>                        <li><a href="#" class="make-home"><%- _("Set as Home Dashboard").t() %></a></li>                        <% } %>                    </ul>                    <ul class="third-group '+o.thirdGroup+'">                        <% if(allowDelete) { %>                        <li><a href="#" class="delete"><%- _("Delete").t() %></a></li>                        <% } %>                    </ul>            '});return n.extend({moduleId:e.i,viewOptions:{register:!1},className:"dashboard-menu",initialize:function(){n.prototype.initialize.apply(this,arguments)},events:{"click a.edit-btn":function(e){e.preventDefault(),this.model.controller.trigger("mode:edit")},"click a.edit-other":function(e){e.preventDefault(),this.children.otherMenu=new d({model:this.model,collection:this.collection}),this.children.otherMenu.once("hide",this.children.otherMenu.remove),t("body").append(this.children.otherMenu.render().$el);var i=t(e.currentTarget);i.addClass("active"),this.children.otherMenu.show(i),this.children.otherMenu.once("hide",(function(){i.removeClass("active")}))}},render:function(){var e={canWrite:this.model.view.entry.acl.canWrite()};return this.$el.html(this.compiledTemplate(e)),null!=this.model.page&&this.model.page.get("hideExport")||(this.children.exportMenu&&(this.children.exportMenu.remove(),this.children.exportMenu=null),this.children.exportMenu=new r({model:this.model,collection:{apps:this.collection.appLocalsUnfilteredAll}}),this.children.exportMenu.render().$el.appendTo(this.$(".dashboard-export-container"))),this},template:'            <span class="dashboard-view-controls">                <% if(canWrite) { %>                    <a class="btn edit-btn" href="#"><%- _("Edit").t() %></a>                <% } %>                <div class="dashboard-export-container '+o.exportButtonContainer+'"></div>                <a aria-label="<%- _("more").t() %>" class="btn edit-other" href="#">...</a>            </span>        '})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/EditMenu.pcssm":function(e,t,i){var n=i(611);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/header/ExportMenu":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/shared/PopTart"),i("util/pdf_utils")],void 0===(s=function(e,t,i,n,s,a){var r={button:!0,showOpenActions:!0,deleteRedirect:!1},o=s.extend({className:"dropdown-menu export-menu",initialize:function(){s.prototype.initialize.apply(this,arguments),i.defaults(this.options,r)},events:{"click a.edit-export-pdf":function(e){e.preventDefault(),this._triggerControllerEvent("action:export-pdf")},"click a.edit-schedule-pdf":function(e){e.preventDefault(),t(e.currentTarget).is(".disabled")||this._triggerControllerEvent("action:schedule-pdf")},"click a.edit-print":function(e){e.preventDefault(),this._triggerControllerEvent("action:print")}},_triggerControllerEvent:function(){this.model.controller.trigger.apply(this.model.controller,arguments),this.hide()},render:function(){return this.$el.html(s.prototype.template_menu),this.$el.append(this._getTemplate()),this},_getTemplate:function(){var e={canWrite:this.model.view.entry.acl.canWrite(),isSimpleXML:this.model.view.isSimpleXML(),userCanSchedule:this.model.user.canSchedulePDF(),viewSchedulable:this.model.view.canSchedulePDF(),viewPdfSchedulable:a.isPDFGenAvailable()&&this.model.view.canSchedulePDF(),canExport:this.model.view.isSimpleXML()&&a.isPDFGenAvailable(),isForm:this.model.view.isForm()};return this.compiledTemplate(e)},isEmpty:function(){return!1},template:'                <ul class="first-group">                    <% if (canExport) { %>                        <li><a href="#" class="edit-export-pdf"><%- _("Export PDF").t() %></a></li>                    <% } else { %>                        <li><a href="#" class="edit-export-pdf disabled"><%- _("Export PDF").t() %></a></li>                    <% } %>                    <% if (userCanSchedule) { %>                        <% if (viewPdfSchedulable) { %>                            <li><a href="#" class="edit-schedule-pdf"><%- _("Schedule PDF Delivery").t() %></a></li>                        <% } else { %>                            <li><a href="#" class="edit-schedule-pdf disabled"><%- _("Schedule PDF Delivery").t() %></a></li>                        <% } %>                    <% } %>                    <li><a href="#" class="edit-print"><%- _("Print").t() %></a></li>                </ul>            '});return n.extend({moduleId:e.i,ViewOptions:{register:!1},initialize:function(){n.prototype.initialize.apply(this,arguments)},events:{"click a.edit-export":function(e){e.preventDefault(),this.children.exportMenuOptions=new o({model:this.model}),this.children.exportMenuOptions.once("hide",this.children.exportMenuOptions.remove),t("body").append(this.children.exportMenuOptions.render().$el);var i=t(e.currentTarget);i.addClass("active"),this.children.exportMenuOptions.show(i),this.children.exportMenuOptions.once("hide",(function(){i.removeClass("active")}))}},render:function(){return this.$el.html(this.compiledTemplate()),this},template:'                    <a class="btn edit-export" href="#"><%- _("Export").t() %> <span class="caret" aria-hidden="true"></span></a>            '})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/Title":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/header/Title.pcss")],void 0===(s=function(e,t,i,n){return n.extend({moduleId:e.i,viewOptions:{register:!1},className:"dashboard-title",tagName:"h1",initialize:function(e){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model.view.entry.content,"change:label",this.render),this.listenTo(this.model.page,"change:hideFilters change:globalFieldsetEmpty",this.render)},events:{"click [data-action=show-filters]":function(e){e.preventDefault(),this.model.controller.trigger("action:showFilters")}},_renderLink:function(){var e=!this.model.page.has("globalFieldsetEmpty")||this.model.page.get("globalFieldsetEmpty");if(this.model.page.get("hideFilters")&&!e){var n=t('<a class="show-global-filters" data-action="show-filters" href="#">'+i("Show Filters").t()+"</a>");this.$el.append(n)}},render:function(){this.$el.empty();var e=this.model.view.entry.content.has("label")?this.model.view.entry.content.get("label"):this.model.view.entry.get("name");return this.$el[e?"removeClass":"addClass"]("untitled"),e&&this.$el.text(i(e).t()),this._renderLink(),this}})}.apply(t,n))||(e.exports=s)},"views/dashboard/header/Title.pcss":function(e,t,i){var n=i(618);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/layout/BaseLayout":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("views/dashboard/EmptyStatus")],void 0===(s=function(e,t,i,n){return i.extend({initialize:function(e){i.prototype.initialize.apply(this,arguments),this.model=t.extend({},this.model),this.deferreds=t.extend({},e.deferreds)},render:function(){return i.prototype.render.apply(this,arguments),this._updateEmptyMessage(),this},captureStructure:function(){return{}},isEmpty:function(){},_updateEmptyMessage:function(){this.deferreds.componentReady.then(function(){this.isEmpty()?this.children.emptyMessage||(this.children.emptyMessage=new n({model:this.model}),this.children.emptyMessage.render().$el.appendTo(this.$el)):this.children.emptyMessage&&(this.children.emptyMessage.remove(),this.children.emptyMessage=null)}.bind(this))},_onElementCreated:function(){this._updateEmptyMessage()},_onElementRemoved:function(){this._updateEmptyMessage()},_onInputCreated:function(){},_onInputRemoved:function(){},events:{inputCreated:"_onInputCreated",inputRemoved:"_onInputRemoved",elementCreated:"_onElementCreated",elementRemoved:"_onElementRemoved"}})}.apply(t,n))||(e.exports=s)},"views/dashboard/layout/Panel":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("splunkjs/mvc"),i("views/dashboard/form/Fieldset"),i("views/dashboard/editor/TitleEditor"),i("views/dashboard/editor/PanelEditor"),i("views/dashboard/element/DashboardElement"),i("views/dashboard/element/Html"),i("views/dashboard/form/Input"),i("views/shared/dialogs/TextDialog"),i("views/dashboard/editor/dialogs/ConvertPanel"),i("splunkjs/mvc/postprocessmanager"),i("splunkjs/mvc/simplexml/dashboard/tokendeps"),i("splunkjs/mvc/tokenutils"),i("shim/splunk.util"),i("views/dashboard/layout/Panel.pcssm")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g,f,v){var b=f.sprintf;return n.extend(i.extend({},m,{moduleId:e.i,className:"dashboard-cell",_uniqueIdPrefix:"panel",initialize:function(){this.options.settingsOptions=i.extend({retainUnmatchedTokens:!0},this.options.settingsOptions),n.prototype.initialize.apply(this,arguments),this.setupTokenDependencies(),this.listenTo(this.settings,"change:title",this._onTitleChange),this.listenTo(this.model.state,"change:mode",this._onModeChange)},render:function(){this.$el.attr("id",this.id),this.$panel=this._createOrFindPanel(),this._renderFieldSet(),this._onModeChange()},remove:function(){this._resetComponents(),this.stopListeningToTokenDependencyChange(),n.prototype.remove.apply(this,arguments)},_createOrFindPanel:function(){var e=this.createOrFind("dashboard-panel");return e.addClass(v.dashboardPanel),e.attr("tabindex","0"),e},_onModeChange:function(){switch(this._unbindEventHandler(),this._resetComponents(),this.model.state.get("mode")){case"view":this._renderTitle();break;case"edit":this._renderPanelEditor(),this._renderTitleEditor(),this._renderDragHandle(),this._bindEventHandler()}return this},_onTitleChange:function(){!this.isEditMode()&&this._renderTitle()},_resetComponents:function(){this.$dragHandle&&(this.$dragHandle.remove(),this.$dragHandle=null),this.children.titleEditor&&(this.children.titleEditor.remove(),this.children.titleEditor=null),this.children.panelEditor&&(this.children.panelEditor.remove(),this.children.panelEditor=null)},_renderFieldSet:function(e){e=i.extend({model:i.extend({},this.model,e),id:this.id+"-fieldset"}),this.children.fieldset=new a(e),this.listenTo(this.children.fieldset,"all",this.trigger),this.children.fieldset.render().$el.prependTo(this.$panel)},_renderTitle:function(){var e=this.settings.get("title",{tokens:!0});e&&(e=g.replaceTokens(i(e).t(),s.Components,{tokenNamespace:this.settings._tokenNamespace,escaper:this.settings._tokenEscaper,allowNoEscape:this.settings._allowNoEscape}));var t=this.createOrFind("panel-title",this.$panel,"h2");e?(t.text(i(e).t()).removeClass("empty"),this.$panel.addClass("with-title")):(t.empty().addClass("empty"),this.$panel.removeClass("with-title"))},_renderDragHandle:function(){this.$dragHandle=t('<div class="drag-handle"><a href="#" class="delete-panel" role="button"aria-label="'+i("Delete panel").t()+'"><i class="icon-x"></i></a><div class="handle-inner"></div></div>'),this.$dragHandle.prependTo(this.$panel),this.$dragHandle.find("a.delete-panel:not(.disabled)").off("click").on("click",function(e){e.preventDefault(),this._handleEditEvent("delete")}.bind(this))},_renderPanelEditor:function(){var e=!this._hasChildWithBaseSearch(),t=e?null:i("Unable to convert to prebuilt panel due to dependency on base search.").t();this.children.panelEditor=new o({model:this.settings,icon:"icon-gear",label:i("Inline Panel").t(),actions:[{name:"convert",className:e?"convert-panel":"disabled",label:i("Convert to Prebuilt Panel").t(),tooltip:t}]}),this.children.panelEditor.render().$el.prependTo(this.$panel)},_bindEventHandler:function(){this.children.panelEditor&&this.listenTo(this.children.panelEditor,"all",this._handleEditEvent),this.children.titleEditor&&this.listenTo(this.children.titleEditor,"change:title",this._handleSettingChange),this.listenTo(this.settings,"change",this._handleSettingChange)},_unbindEventHandler:function(){this.children.panelEditor&&this.stopListening(this.children.panelEditor),this.children.titleEditor&&this.stopListening(this.children.titleEditor),this.settings&&this.stopListening(this.settings,"change")},_handleSettingChange:function(){this.model.controller.trigger("edit:panel",{panelId:this.id,panelSettings:this.settings})},_handleEditEvent:function(e){switch(e){case"rename":this.children.titleEditor&&this.children.titleEditor.focus();break;case"convert":this._convertToPrebuiltPanel();break;case"delete":this._deletePanel()}},_hasChildWithBaseSearch:function(){var e=function(e){return s.Components.get(e.settings.get("managerid"))instanceof p};return i(this.getElements()).any(e)||this.children.fieldset&&i(this.children.fieldset.getInputs()).any(e)},_renderTitleEditor:function(){this.children.titleEditor=new r({model:this.settings,attribute:"title",placeholder:i("No title").t()});var e=this.createOrFind("panel-title",this.$panel,"h2");e.empty(),this.children.titleEditor.render().$el.appendTo(e)},addChild:function(e){if(e instanceof l||e instanceof d)this._addElement(e);else{if(!(e instanceof c))throw new Error("Cannot add unknown component as child of panel");this._addInput(e)}},getElements:function(){return this.getChildElements(".dashboard-element")},isEmpty:function(){return 0===this.getElements().length},_addElement:function(e){var i;this.$panel=this.$panel||this._createOrFindPanel(),"single"==e.getVisualizationType()&&(i=this.$panel.children(".panel-element-row:last")).length?0===i.children(".single").length&&(i=t('<div class="panel-element-row" />').appendTo(this.$panel)):i=t('<div class="panel-element-row" />').appendTo(this.$panel),e.render().$el.appendTo(i),this.$el.trigger("structureChanged")},_addInput:function(e){this.children.fieldset.addChild(e)},_convertToPrebuiltPanel:function(){var e=new u({id:"modal_convert_to_ref",model:this.model,panelComponent:this});e.render().appendTo(document.body),e.show()},_deletePanel:function(){var e=new h({id:"modal_delete"});e.settings.set({primaryButtonLabel:i("Delete").t(),cancelButtonLabel:i("Cancel").t(),titleLabel:i("Delete").t()}),this.listenToOnce(e,"click:primaryButton",function(){this.model.controller.trigger("edit:delete-panel",{panelId:this.id,panel:this})}.bind(this));var n=t.trim(this.settings.get("title")),s=n?b("<em>%s</em>",i.escape(n)):i.escape(i("this panel").t());e.setText(b(i("Are you sure you want to delete %s?").t(),s)),e.render().$el.appendTo(document.body),e.show()},captureStructure:function(e){e||(e={});var n=e.omitHidden?function(e){return t(e).is(":visible")}:function(){return!0},s=[];!0!==e.omitFormInputs&&(s=i(this.$el.find(".input")).chain().filter(n).map((function(e){return{type:"input",id:t(e).attr("id")}})).value());var a=i(this.$el.find(".dashboard-element")).chain().filter(n).map((function(e){return{type:"element",id:t(e).attr("id")}})).value();return{id:this.id,type:"panel",children:i.union(s,a)}}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/layout/Panel.pcssm":function(e,t,i){var n=i(635);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)},"views/dashboard/layout/PanelRef":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/dashboard/layout/Panel"),i("views/dashboard/editor/PanelEditor"),i("views/shared/dialogs/TextDialog"),i("models/services/data/ui/Panel"),i("dashboard/DashboardParser"),i("dashboard/DashboardFactory"),i("splunkjs/mvc/messages"),i("controllers/dashboard/helpers/ModelHelper"),i("util/splunkd_utils"),i("shim/splunk.util")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p){var m=p.sprintf;return s.extend({moduleId:e.i,className:"dashboard-cell ref-panel",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.deferreds=i.extend({},{panelReady:new t.Deferred,panelRendered:new t.Deferred,panelEditorReady:new t.Deferred},e.deferreds),this.model=i.extend({},this.model),this.model.panel?this.deferreds.panelReady.resolve():this.model.panel=new o,this.components=[],this.managers=[],this.events=[]},applySettings:function(e){this.settings.set(e,{tokens:!0})},render:function(){return s.prototype.render.apply(this,arguments),this.deferreds.panelReady.then(function(){this.build(this.model.panel).then(function(e,t,n,s){this.components=i(n).filter(i.identity),this.managers=t,this.events=s,this.deferreds.panelRendered.resolve()}.bind(this),this.deferreds.panelRendered.reject)}.bind(this)),this},build:function(e,n){n||(n={}),n=i.extend({},{idPrefix:this.id+"_",model:h.getViewOnlyModel(this.model),deferreds:this.deferreds,collection:this.collection},n),this.model.panel=e;var s=this.model.panel.entry.content.get("eai:data");try{var a=l.getDefault().parsePanel(s);return this._removeMessage(),d.getDefault().materializeExisting(this,a,n)}catch(e){return this.onParserError(e),t.Deferred().reject(e)}},onParserError:function(e){this.renderError(i("Error parsing prebuilt dashboard panel.").t())},load:function(e,t,n){if(e){this.model.panel.entry.set("name",e),this.model.panel.entry.acl.set("app",t),this._renderMessage({icon:"info-circle",level:"info",message:i("Loading panel...").t()});var s=this;this.model.panel.fetch({url:u.fullpath(this.model.panel.url+"/"+encodeURIComponent(e),{app:t||this.model.application.get("app"),owner:this.model.application.get("owner")}),success:function(){s.deferreds.panelReady.resolve()},error:function(t,n){var a=404===n.status?m(i('Dashboard panel "%s" not found.').t(),i.escape(e)):m(i('Error loading dashboard panel "%s".').t(),i.escape(e));s.renderError(a),s.deferreds.panelReady.reject(),s.deferreds.panelRendered.reject()}})}else this.renderError(i("Empty panel reference specified.").t())},_renderFieldSet:function(e){return s.prototype._renderFieldSet.call(this,{state:new n.Model({editable:!1,mode:"view"})})},_removeMessage:function(){this.$panel.children(".panel-message").remove()},renderError:function(e){this._renderMessage({icon:"warning-sign",level:"error",message:e})},_renderMessage:function(e){this.$panel=this.$panel||this.createOrFind("dashboard-panel"),this._removeMessage();var i=t('<div class="dashboard-element panel-message"></div>'),n=t('<div class="panel-body"></div>').appendTo(i);c.render(e,n),this.$panel.append(i)},_renderTitleEditor:function(){this._renderTitle()},_onTitleChange:function(){this._renderTitle()},_renderPanelEditor:function(){t.when(this.deferreds.panelReady,this.deferreds.panelRendered).always(function(){var e=!this._hasChildWithBaseSearch()&&"resolved"==this.deferreds.panelReady.state()&&"resolved"==this.deferreds.panelRendered.state(),t=e?null:i("Unable to convert to prebuilt panel due to dependency on base search.").t();this.children.panelEditor=new a({model:this.settings,icon:"icon-lock",label:i("Prebuilt Panel").t(),actions:[{name:"convert",className:e?"convert-panel":"disabled",label:i("Convert to Inline Panel").t(),tooltip:t}]}),this.children.panelEditor.render().$el.prependTo(this.$panel),this.deferreds.panelEditorReady.resolve()}.bind(this))},_bindEventHandler:function(){this.deferreds.panelEditorReady.always(function(){this.children.panelEditor&&this.listenTo(this.children.panelEditor,"all",this._handleEditEvent),this.listenTo(this.settings,"change",this._handleSettingChange)}.bind(this))},_handleEditEvent:function(e){switch(e){case"convert":this._convertToInlinePanel();break;case"delete":this._deletePanel()}},_convertToInlinePanel:function(){var e=this;r.confirm(i("Conversion to an inline panel lets you edit and customize the panel on this dashboard.").t(),{id:"modal_convert_to_inline",title:i("Convert to Inline Panel").t(),primaryButtonLabel:i("Convert").t(),primaryAction:function(){e.model.controller.trigger("edit:make-inline-panel",{panelId:e.id,panelComponent:e})}})},captureStructure:function(){return{type:"panel",id:this.id}},remove:function(){i(this.events).invoke("dispose"),i(this.components).invoke("remove"),i(this.managers).invoke("dispose"),s.prototype.remove.apply(this,arguments)}})}.apply(t,n))||(e.exports=s)},"views/dashboard/layout/row_column/Dragndrop":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc"),i("views/dashboard/layout/row_column/Row"),i("shim/jquery.ui.sortable")],void 0===(s=function(e,t,i,n,s){return i.View.extend({initialize:function(){t.bindAll(this,"updateRow")},render:function(){return this.startDragAndDrop(),this},events:{"mouseover .drag-handle":function(t){e(t.target).parents(".dashboard-panel").addClass("drag-hover")},"mouseout .drag-handle":function(t){e(t.target).parents(".dashboard-panel").removeClass("drag-hover")},resetDragAndDrop:"restart"},startDragAndDrop:function(){this.delegateEvents(),this.$el.addClass("dragndrop-enabled"),t.defer(t.bind((function(){this.enablePanelDragAndDrop(),this.enableInputDragAndDrop()}),this))},getDragItemSize:function(){return Math.max(100,Math.min(e(window).width()/3,600))},enablePanelDragAndDrop:function(){var i,n=this,s=t.debounce(n.updateDimensions.bind(this),0),a=t(this.enablePanelDragAndDrop).bind(this),r=t.once((function(){if(i){try{i.sortable("destroy")}catch(e){}n.trigger("sortupdate"),t.defer(a),n.cleanupEmptyRows(),i=null,e(window).trigger("resize"),n.$(".dashboard-row").trigger("panelVisibilityChanged")}}));this.createNewDropRow(),i=this.$(".dashboard-row").sortable({handle:".drag-handle",connectWith:this.$(".dashboard-row"),placeholder:{element:function(){return e('<div class="sortable-placeholder"><div class="dashboard-panel"></div></div>')},update:function(e,t){n.updateRow(t.parents(".dashboard-row"))}},tolerance:"pointer",cursorAt:{left:n.getDragItemSize()/2}}).on("sort",(function(e){s()})).on("sortupdate",(function(e){r()})).on("stop",(function(e){r()})),s(),e(window).trigger("resize")},enableInputDragAndDrop:function(){var i,n=this,s=t.once((function(){if(i){try{i.sortable("destroy")}catch(e){}n.trigger("sortupdate"),t.defer((function(){n.enableInputDragAndDrop()})),i=null}}));i=this.$(".fieldset.editable").sortable({handle:".drag-handle",connectWith:this.$(".fieldset.editable"),items:">.input",tolerance:"pointer",placeholder:{element:function(t){var i=e('<div class="input ui-sortable-placeholder"><div class="placeholder-inner"></div></div>'),n=t.height();return i.height(n-5),i.children().height(n-15),i[0]},update:function(){}},start:function(){e(".dashboard-body").addClass("form-drag"),e("#search_btn").hide()},stop:function(){e(".dashboard-body").removeClass("form-drag");var t=e(".form-submit");t.length&&t.appendTo(t.parent()).show(),e(".fieldset.editable").trigger("updateState")}}).on("sortupdate",s).on("stop",s)},destroy:function(){this.undelegateEvents(),this.$el.removeClass("dragndrop-enabled"),this.cleanupEmptyRows();try{this.$(".dashboard-row").sortable("destroy"),this.$(".fieldset.editable").sortable("destroy")}catch(e){}this.updateDimensions()},restart:function(){this.destroy(),this.render()},updateRow:function(t){var i=e(t),n=i.children().not(".ui-sortable-helper"),s=String(Math.floor(1e4/n.not(".sortable-dragging").length)/100)+"%";n.css({width:s}),i.children(".ui-sortable-helper").css({width:this.getDragItemSize()})},updateDimensions:function(){t(this.$(".dashboard-row")).each(this.updateRow)},createNewDropRow:function(){this.cleanupEmptyRows(),t(this.$(".dashboard-row")).each((function(e){(new s).render().$el.insertAfter(e)}));var e=this.$(".dashboard-row").first();e&&(new s).render().$el.insertBefore(e)},cleanupEmptyRows:function(){t(this.$(".dashboard-row")).chain().map((function(t){return e(t).attr("id")})).map(t.bind(n.Components.get,n.Components)).invoke("removeIfDOMEmpty"),this.$(".dashboard-row.empty").removeClass("empty")},getItemOrder:function(){return t(this.$(".dashboard-row")).map((function(i){return t(e(i).find(".dashboard-panel")).map((function(i){return t(e(i).find(".dashboard-element")).map((function(t){return e(t).attr("id")}))}))}))}})}.apply(t,n))||(e.exports=s)},"views/dashboard/layout/row_column/Row":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("views/dashboard/Base"),i("splunkjs/mvc/simplexml/dashboard/tokendeps")],void 0===(s=function(e,t,i,n,s){return n.extend(i.extend({},s,{moduleId:e.i,className:"dashboard-row",_uniqueIdPrefix:"row",initialize:function(){n.prototype.initialize.apply(this,arguments),this.setupTokenDependencies()},addChild:function(e){n.prototype.addChild.apply(this,arguments),this._updateState(),this.$el.trigger("structureChanged")},render:function(){return n.prototype.render.apply(this,arguments),this._updateState(),this},_updateState:function(){this.$el[this.isEmpty()?"addClass":"removeClass"]("empty")},getPanels:function(){return this.getChildElements(".dashboard-cell")},isEmpty:function(){return 0==this.getPanels().length},remove:function(){this.stopListeningToTokenDependencyChange(),n.prototype.remove.apply(this,arguments)},removeIfDOMEmpty:function(){this.isEmpty()&&this.remove()}}))}.apply(t,n))||(e.exports=s)},"views/dashboard/layout/row_column/RowColumnLayout":function(e,t,i){var n,s;n=[e,i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc"),i("views/dashboard/form/Input"),i("views/dashboard/layout/BaseLayout"),i("views/dashboard/layout/Panel"),i("views/dashboard/layout/row_column/Row"),i("views/dashboard/form/GlobalFieldset"),i("views/dashboard/layout/row_column/Dragndrop"),i("controllers/dashboard/helpers/EditingHelper")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h){var u=n.View.extend({initialize:function(e){this.layout=e.layout,this._debouncedRowStructureChange=i.debounce(this._onRowStructureChange.bind(this),10)},enable:function(){this.delegateEvents(),this._listenToRowDOMChange(),this._onRowStructureChange()},disable:function(){this.undelegateEvents(),this._stopListenRowDOMChange()},_listenToRowDOMChange:function(){this._stopListenRowDOMChange(),this.$(".dashboard-panel").length>1&&(this.$el.on("DOMSubtreeModified",this._throttledAlignItemHeights.bind(this)),this._throttledAlignItemHeights())},_stopListenRowDOMChange:function(){this.$el.off("DOMSubtreeModified")},_onRowStructureChange:function(){var e=this.layout.isEditMode();this._stopListenRowDOMChange();var i=this.$el.children(".dashboard-cell");if(0!==i.length){this._updateCellVisibility(i);var n=e?i:i.filter(":not(.hidden)");i.removeClass("last-visible"),n.last().addClass("last-visible");var s=n.length,a=String(100/s)+"%";i.css({width:a}).find(".panel-element-row").each((function(){var i=t(this).find(e?".dashboard-element":".dashboard-element:not(.hidden)");i.css({width:String(100/i.length)+"%"})})),s>0&&this._throttledAlignItemHeights(),this._listenToRowDOMChange()}else this.$el.addClass("empty")},_updateCellVisibility:function(e){i.each(e,(function(e){var i=t(e);if(s.Components.get(i.attr("id")).tokenDependenciesMet()){var n=i.find(".dashboard-element"),a=i.find(".input"),r=n.filter(".hidden");0==a.length&&n.length>0&&r.length==n.length?i.addClass("hidden"):i.removeClass("hidden")}}),this)},_throttledAlignItemHeights:function(){var e=this;if(!e._alignTimer){var t=null==e._lastAlign||+new Date-e._lastAlign>1e3;e._alignTimer=setTimeout((function(){e._alignItemHeights(),e._alignTimer=null}),t?50:1e3)}},_alignItemHeights:function(){var e=this.$el.find(".dashboard-panel");e.css({"min-height":0}),e.length>1&&e.css({"min-height":i.max(i.map(e,(function(e){return t(e).height()})))}),this._lastAlign=+new Date},events:{structureChanged:"_debouncedRowStructureChange",elementVisibilityChanged:"_debouncedRowStructureChange"}});return r.extend({moduleId:e.i,className:"dashboard-layout-row-column",initialize:function(){r.prototype.initialize.apply(this,arguments),this.rowManagers={},this.children.fieldset=null,this.listenTo(this.model.state,"change:mode",this._onModeChange)},addChild:function(e){var t=this.isEditMode()&&"resolved"==this.deferreds.componentReady.state();if(e instanceof l)e.render().$el.appendTo(this.$el),this._bindRowManager(e),t&&(this.dragnDrop&&this.dragnDrop.restart(),h.highlight(e));else if(e instanceof o){var i=new l;i.addChild(e),this.addChild(i)}else if(e instanceof a)this.children.fieldset&&this.children.fieldset.addChild(e);else{if(!(e instanceof d))throw new Error("Cannot add unknown component as child of RowColumnLayout");this.children.fieldset=e,e.render().$el.prependTo(this.$el)}return e},isEmpty:function(){return 0===this.getRows().length},getRows:function(){return this.getChildElements(".dashboard-row")},getFieldset:function(){return this.children.fieldset},render:function(){return r.prototype.render.apply(this,arguments),this._onModeChange(),this},remove:function(){this.children.fieldset&&(this.children.fieldset.remove(),this.children.fieldset=null),r.prototype.remove.apply(this,arguments)},_bindRowManager:function(e){this.rowManagers[e.id]=new u({el:e.el,layout:this}),this.rowManagers[e.id].enable()},_bindRowManagers:function(){this._clearRowManagers(),i.each(this.getRows(),this._bindRowManager,this)},_clearRowManagers:function(){i.each(this.rowManagers,(function(e,t){e.disable(),e=null}),this),this.rowManagers={}},_onModeChange:function(){switch(this._disableDragAndDrop(),this._bindRowManagers(),this.model.state.get("mode")){case"edit":this.deferreds.componentReady.then(function(){this._createFieldset(),this._enableDragAndDrop(),this._updateFieldsetEditor()}.bind(this));break;case"view":this._updateFieldsetEditor()}return this},_disableDragAndDrop:function(){this.dragnDrop&&(this.dragnDrop.off(),this.dragnDrop.destroy(),this.dragnDrop=null)},_enableDragAndDrop:function(){this.dragnDrop=new c({el:this.el}),this.dragnDrop.on("sortupdate",i.debounce(this._updateLayout,0),this),this.dragnDrop.render()},_updateFieldsetEditor:function(){if(this.children.fieldset){var e=this.model.state.get("mode"),t=this.getChildElements(".input"),i=this.getChildElements(".form-submit"),n=t.length+i.length>0;"view"!=e&&n?"edit"==e&&this.children.fieldset.renderFieldsetEditor():this.children.fieldset.resetFieldsetEditor()}},_createFieldset:function(e){if(!this.children.fieldset){e=i.extend({model:this.model,submitButton:!1},e);var t=new d(e,{tokens:!0});this.addChild(t),this.model.controller.trigger("new:fieldset",{fieldsetId:t.id})}},_updateLayout:function(){this.model.controller.trigger("edit:layout")},captureStructure:function(e){e||(e={});var n=e.omitHidden?function(e){return t(e).is(":visible")}:function(){return!0},a=i(this.$el.children(".dashboard-row")).chain().filter((function(e){return t(e).find(".dashboard-cell").length>0})).filter(n).map((function(a){var r=t(a),o=i(r.find(".dashboard-cell")).chain().filter(n).map((function(i){return s.Components.get(t(i).attr("id")).captureStructure(e)})).value();return{type:"row",id:r.attr("id"),children:o}})).value(),r=[];if(!0!==e.omitFormInputs){var o=this.$el.children(".fieldset"),l=[];i(t(o).children()).chain().filter(n).each((function(e){t(e).is(".input")?l.push({type:"input",id:t(e).attr("id")}):t(e).is(".html")&&l.push({type:"element",id:t(e).attr("id")})})),(this.getChildElements(".fieldset > .input").length>0||this.getChildElements(".fieldset > .html").length>0)&&(r=[{type:"fieldset",id:o.attr("id"),children:l}])}return{type:"row-column-layout",children:i.union(r,a)}},_onInputCreated:function(){this._updateFieldsetEditor()},_onInputRemoved:function(){this._updateFieldsetEditor()}})}.apply(t,n))||(e.exports=s)},"views/dashboards/PanelTimeRangePicker":function(e,t,i){var n;void 0===(n=function(e,t,n){var s=i("require/underscore"),a=i("views/Base"),r=i("views/shared/controls/ControlGroup"),o=(i("util/console"),i("uri/route"),i("splunkjs/mvc")),l=i("splunkjs/mvc/simpleform/formutils"),d=i("splunkjs/mvc/tokenutils"),c=i("shim/splunk.util"),h=i("views/shared/timerangepicker/Master");return i("shim/bootstrap.tooltip"),a.extend({moduleId:n.i,initialize:function(){a.prototype.initialize.apply(this,arguments),this.model.timeRange.on("applied",(function(){this.updateReportTime(),this.updateTime()}),this);var e=s(o.Components.toJSON()).chain().values().filter((function(e){return!(!l.isFormInput(e)||!e.settings)&&"time"==e.settings.get("type")})).map((function(e){var t=e.settings.get("token")||"global";return{value:t,label:c.sprintf(s("Shared Time Picker (%s)").t(),t)}})).value(),t="search",i=d.hasToken(this.model.report.get("dispatch.earliest_time"))&&d.hasToken(this.model.report.get("dispatch.latest_time"));if(i){var n=d.getTokenName(this.model.report.get("dispatch.earliest_time")),u=n.replace(/\.?earliest$/g,"");u=""===u?"global":u;var p=d.getTokenName(this.model.report.get("dispatch.latest_time")),m=p.replace(/\.?latest$/g,"");m=""===m?"global":m,this.model.timeRange.set({earliest_token:n,latest_token:p}),u===m?s(e).find((function(e){return e.value===u}))?t=u:"global"!==u&&(t="tokens"):t="tokens"}if(!0===this.options.popdownTimeRange&&(this.children.timerange=new h({model:{state:this.model.report,timeRange:this.model.timeRange,appLocal:this.model.appLocal,user:this.model.user,application:this.model.application},collection:this.collection.timeRanges,timerangeClassName:"btn",popdownOptions:{attachDialogTo:".sidebar:not(.first)",scrollContainer:".preview-body"}})),this.model.timeRange.set({useTimeFrom:t}),e.length>0||i){var g=[[{label:s("Explicit Selection").t(),value:"search"}],[{label:s("Tokens").t(),value:"tokens"}]];e.length>0&&g.unshift(e),this.children.timeScope=new r({label:s("Time Range").t(),controlType:"SyntheticSelect",className:"time-range-scope",controlOptions:{additionalClassNames:"time-range-scope-select",toggleClassName:"btn",items:g,model:this.model.timeRange,popdownOptions:{attachDialogTo:".sidebar:not(.first), .modal:visible",scrollContainer:".preview-body, .modal:visible, .modal-body:visible"},modelAttribute:"useTimeFrom",elastic:!0}})}else this.model.timeRange.set("useTimeFrom","search");this.children.advancedEarliest=new r({label:s("Earliest Token").t(),controlType:"Text",controlOptions:{model:this.model.timeRange,modelAttribute:"earliest_token"}}),this.children.advancedLatest=new r({label:s("Latest Token").t(),controlType:"Text",controlOptions:{model:this.model.timeRange,modelAttribute:"latest_token"}}),this.listenTo(this.model.timeRange,"change:useTimeFrom",this.updateTokens,this)},updateReportTime:function(){var e=this.model.timeRange.get("useTimeFrom");"tokens"===e||"search"===e?this.model.report.set({"dispatch.earliest_time":this.model.timeRange.get("earliest",{tokens:!0}),"dispatch.latest_time":this.model.timeRange.get("latest",{tokens:!0})},{tokens:!0}):"global"===e?this.model.report.set({"dispatch.earliest_time":"$earliest$","dispatch.latest_time":"$latest$"},{tokens:!0}):this.model.report.set({"dispatch.earliest_time":"$"+e+".earliest$","dispatch.latest_time":"$"+e+".latest$"},{tokens:!0})},updateTokens:function(){this.updateReportTime(),this.toggleTimeRangePicker(),this.toggleAdvancedTokens()},toggleAdvancedTokens:function(){"tokens"===this.model.timeRange.get("useTimeFrom")?(this.children.advancedEarliest.$el.show(),this.children.advancedLatest.$el.show()):(this.children.advancedEarliest.$el.hide(),this.children.advancedLatest.$el.hide())},toggleTimeRangePicker:function(){"search"===this.model.timeRange.get("useTimeFrom")?this.children.timerange?this.children.timerange.$el.show():this.$(".timerange").show():this.children.timerange?this.children.timerange.$el.hide():this.$(".timerange").hide()},updateTime:function(){var e=this.model.timeRange.generateLabel(this.collection);this.$el.find("span.time-label").text(s(e).t())},render:function(){return this.children.timeScope&&this.children.timeScope.render().appendTo(this.el),this.children.advancedEarliest.render().$el.appendTo(this.$el),this.children.advancedLatest.render().$el.appendTo(this.$el),this.children.timerange?this.$el.append(this.children.timerange.render().$el):this.$el.append('<div class="timerange" style="display: block;"><label class="control-label">'+s("Time Range").t()+"</label></div>"),this.$("div.timerange").append('<div class="controls"><a href="#" class="btn timerange-control"><span class="time-label"></span><span class="icon-triangle-right-small"></span></a></div>'),this.toggleTimeRangePicker(),this.toggleAdvancedTokens(),this.updateTime(),this}})}.call(t,i,t,e))||(e.exports=n)},"views/dashboards/panelcontrols/CreateReportDialog":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/shared/controls/ControlGroup"),i("views/shared/Modal"),i("views/shared/FlashMessages")],void 0===(s=function(e,t,i,n,s,a,r){return a.extend({moduleId:n.i,initialize:function(){a.prototype.initialize.apply(this,arguments),this.model.workingReport=new i.Model({name:this.model.report.entry.content.get("display.general.title")}),this.children.flashMessagesReport=new r({model:this.model.report}),this.children.flashMessagesDashboard=new r({model:this.model.dashboard}),this.on("hide",this.model.report.error.clear,this.model.report.error),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.children.reportNameControlGroup=new s({label:t("Report Title").t(),controlType:"Text",controlOptions:{model:this.model.workingReport,modelAttribute:"name"}}),this.children.reportDescriptionControlGroup=new s({label:t("Description").t(),controlType:"Textarea",controlOptions:{model:this.model.workingReport,modelAttribute:"description",placeholder:t("optional").t()}}),this.listenTo(this.model.report,"successfulReportSave",this.hide,this)},events:e.extend({},a.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){e.preventDefault(),this.model.report.trigger("saveAsReport",this.model.workingReport.get("name"),this.model.workingReport.get("description"))},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(t("Convert to Report").t()),this.$(a.BODY_SELECTOR).prepend(this.children.flashMessagesDashboard.render().el),this.$(a.BODY_SELECTOR).prepend(this.children.flashMessagesReport.render().el),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL),this.$(a.BODY_FORM_SELECTOR).append(this.children.reportNameControlGroup.render().el),this.$(a.BODY_FORM_SELECTOR).append(this.children.reportDescriptionControlGroup.render().el),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_CANCEL),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_SAVE)}})}.apply(t,n))||(e.exports=s)},"views/dashboards/panelcontrols/Master":function(e,t,i){var n,s;n=[i("require/underscore"),i("views/Base"),i("models/Base"),i("shim/jquery"),e,i("views/shared/controls/SyntheticSelectControl"),i("views/shared/delegates/Popdown"),i("views/shared/reportcontrols/details/Master"),i("collections/services/authorization/Roles"),i("models/shared/Application"),i("views/dashboards/panelcontrols/titledialog/Modal"),i("views/dashboards/panelcontrols/querydialog/Modal"),i("views/dashboards/panelcontrols/ReportDialog"),i("views/dashboards/panelcontrols/CreateReportDialog"),i("uri/route"),i("util/console"),i("shim/splunk.util"),i("views/shared/dialogs/TextDialog"),i("shim/bootstrap.tooltip")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g,f,v,b){return t.extend({moduleId:s.i,initialize:function(e){t.prototype.initialize.apply(this,arguments),this.model.report.on("change:id",this.updateReportView,this),this.model.report.entry.content.on("change",this.updateReportView,this),this.collection=this.collection||{},this.collection.roles=new l({}),this.collection.roles.fetch()},onChangeElementTitle:function(e){e.preventDefault(),this.model.report.trigger("editTitle"),this.children.popdown.hide()},onChangeSearchString:function(e){e.preventDefault(),n(e.currentTarget).is(".disabled")||(this.children.queryDialogModal=new h({model:{report:this.model.report,appLocal:this.model.appLocal,application:this.model.application,user:this.model.user,dashboard:this.model.dashboard,state:this.model.state},onHiddenRemove:!0}),n("body").append(this.children.queryDialogModal.render().el),this.children.queryDialogModal.show(),this.children.popdown.hide())},updateReportView:function(){this.debouncedRender()},render:function(){var e,t={};return e=this.model.report.get("id")?this.model.report.isPivotReport()?"icon-report-pivot":"icon-report-search":this.model.report.isPivotReport()?"icon-pivot":"icon-search-thin",t.panelClass=e,this.$el.html(this.compiledTemplate(t)),this.children.popdown=new r({el:this.el,mode:"dialog"}),this._renderPanelControls(),this},_renderPanelControls:function(){var t;this.$(".dropdown-menu").html(e.template(this._panelControlsTemplate,{_:e})),t=this.model.report.get("id")?this.model.report.isPivotReport()?e("PIVOT REPORT").t():e("SEARCH REPORT").t():this.model.report.isPivotReport()?e("INLINE PIVOT").t():e("INLINE SEARCH").t();var i=e.template('<li class="panelType"><%- panelType %></li>',{panelType:t});if(this.model.report.get("id")){var s=e.template('<ul class="report_actions"><%= panelTypeLI %><li><a class="viewPanelReport" href="#"><%- reportName %><span class="icon-triangle-right-small"></span></a></li></ul>',{panelTypeLI:i,reportName:this.model.report.entry.get("name")});this.$(".panel_actions").before(s),this.$(".panel_actions").prepend('<li><a href="#" class="changeElementTitle">'+e("Edit Title").t()+"</a></li>")}else{var a=n('<li><a class="convertToReport" href="#">'+e("Convert to Report").t()+"</a></li>"),r=n('<li><a href="#" class="changeSearchString">'+e("Edit Search String").t()+"</a></li>");"global"===this.model.report.entry.content.get("display.general.search.type")&&(a.find("a").addClass("disabled").tooltip({animation:!1,title:e("Cannot convert global search to report.").t()}),r.find("a").addClass("disabled").tooltip({animation:!1,title:e("Cannot edit global search.").t()})),this.$(".panel_actions").prepend(a),this.$(".panel_actions").prepend(r),this.$(".panel_actions").prepend('<li><a href="#" class="changeElementTitle">'+e("Edit Title").t()+"</a></li>"),this.$(".panel_actions").prepend(i)}},_panelControlsTemplate:'                <div class="arrow"></div>                <ul class="panel_actions">                    <li><a class="deletePanel" href="#"><%- _("Delete").t() %></a></li>                </ul>        ',template:'            <a class="dropdown-toggle btn-pill" href="#">                    <span class="<%- panelClass %>"></span><span class="caret" aria-hidden="true"></span>            </a>            <div class="dropdown-menu">            </div>        ',onDelete:function(t){t.preventDefault(),this.children.dialog=new v({id:"modal_delete",flashModel:this.model.dashboard}),this.model.report.on("successfulDelete",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("primaryButtonLabel",e("Delete").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._dialogDeleteHandler,this),this.children.dialog.settings.set("titleLabel",e("Delete").t()),this.children.dialog.setText(f.sprintf(e("Are you sure you want to delete %s?").t(),"<em>"+e.escape(this.model.report.entry.content.get("display.general.title"))+"</em>")),n("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},_dialogDeleteHandler:function(e){e.preventDefault(),this.model.report.trigger("deleteReport"),g.log("deleteReport event triggered")},onViewPanelReport:function(t){t.preventDefault(),t.stopPropagation();var i,s,a=this.reportDetailsTemplate,r=this.model.application.get("root"),l=this.model.application.get("locale"),d=this.model.application.get("app");i=m.report(r,l,d,{data:{s:this.model.report.get("id")}});var c=this.model.savedAlert.openInView(this.model.user),h=m.getViewRouteData(c);s=h.route(r,l,d,{data:{s:this.model.report.get("id")}}),this.$(".dropdown-menu").html(e.template(a,{viewReportLink:i,editReportLink:s,editReportLabel:h.openLabel,_:e})),this.children.reportDetails&&this.children.reportDetails.remove(),this.children.reportDetails=new o({model:{report:this.model.report,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{roles:this.collection.roles}}),this.$(".reportDetails").prepend(n("<li/>").addClass("reportDetailsView").append(this.children.reportDetails.render().el));var u=this.model.report.entry.content.get("description");u&&this.$(".reportDetails").prepend(n("<li/>").addClass("report-description").text(u)),this.$(".reportDetails").prepend(n("<li/>").addClass("report-name").text(this.model.report.entry.get("name"))),this.$(".dropdown-menu").addClass("show-details"),n(window).trigger("resize")},reportDetailsTemplate:'            <div class="arrow"></div>            <a class="dialogBack btn" href="#"><span class="icon-chevron-left"></span> <%- _("Back").t() %></a>            <ul class="reportDetails">                <li><a href="<%- viewReportLink %>" class="viewSearchReport"><%- _("View").t() %></a></li>                <li><a href="<%- editReportLink %>" class="openSearchReport"><%- editReportLabel %></a></li>                <li><a href="#" class="cloneSearchReport"><%- _("Clone to Inline").t() %></a></li>            </ul>            <ul class="reportActions">                <li><a class="selectNewReport"><%- _("Select New Report").t() %></a></li>                <li><a class="useReportFormatting"><%- _("Use Report\'s Formatting for this Content").t() %></a></li>            </ul>        ',onDialogBack:function(e){e.preventDefault(),e.stopPropagation(),this._renderPanelControls(),this.$(".dropdown-menu").removeClass("show-details"),n(window).trigger("resize")},tbd:function(e){e.preventDefault(),alert("Coming soon to a Splunk near you!")},convertToInlineSearch:function(t){t.preventDefault(),this.children.dialog=new v({id:"modal_inline",flashModel:this.model.dashboard}),this.children.dialog.settings.set("primaryButtonLabel",e("Clone to Inline Search").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._convertToInlineSearch,this),this.model.report.on("successfulManagerChange",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("titleLabel",e("Clone to Inline Search").t()),this.children.dialog.setText("<div>                <p>"+e("The report will be cloned to an inline search.").t()+"</p>                <p>"+e("The inline search:").t()+"                </p><ul>                <li>"+e("Cannot be scheduled.").t()+"</li>                <li>"+e("Will run every time the dashboard is loaded.").t()+"</li>                <li>"+e("Will use the permissions of the dashboard.").t()+"</li>                </ul>                </div>"),n("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},convertToInlinePivot:function(t){t.preventDefault(),this.children.dialog=new v({id:"modal_inline",flashModel:this.model.dashboard}),this.children.dialog.settings.set("primaryButtonLabel",e("Clone to Inline Pivot").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._convertToInlineSearch,this),this.model.report.on("successfulManagerChange",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("titleLabel",e("Clone to Inline Pivot").t()),this.children.dialog.setText("<div>                <p>"+e("The report will be cloned to an inline pivot.").t()+"</p>                <p>"+e("The inline pivot:").t()+"                </p><ul>                <li>"+e("Cannot be scheduled.").t()+"</li>                <li>"+e("Will run every time the dashboard is loaded.").t()+"</li>                <li>"+e("Will use the permissions of the dashboard.").t()+"</li>                </ul>                </div>"),n("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},_convertToInlineSearch:function(e){e.preventDefault(),this.model.report.trigger("makeInline"),g.log("makeInline event triggered")},useReportFormatting:function(t){t.preventDefault(),this.children.dialog=new v({id:"modal_use_report_formatting",flashModel:this.model.dashboard}),this.children.dialog.settings.set("primaryButtonLabel",e("Use Report's Formatting").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._useReportFormatting,this),this.model.report.on("successfulReportFormatting",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("titleLabel",e("Use Report's Formatting").t()),this.children.dialog.setText(e("This will change the content's formatting to the report's formatting. Are you sure you want use the report's formatting?").t()),n("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},_useReportFormatting:function(e){e.preventDefault(),this.model.report.trigger("useReportFormatting"),g.log("useReportFormatting event triggered")},selectNewReport:function(e){e.preventDefault(),this.children.newReportDialog=new u({model:{report:this.model.report,dashboard:this.model.dashboard,application:this.model.application},controller:this.options.controller,onHiddenRemove:!0}),n("body").append(this.children.newReportDialog.render().el),this.children.newReportDialog.show(),this.children.popdown.hide()},convertToReport:function(e){e.preventDefault(),n(e.currentTarget).is(".disabled")||(this.children.createReportDialog=new p({model:{report:this.model.report,dashboard:this.model.dashboard},onHiddenRemove:!0}),n("body").append(this.children.createReportDialog.render().el),this.children.createReportDialog.show(),this.children.popdown.hide())},events:{"click a.deletePanel":"onDelete","click a.viewPanelReport":"onViewPanelReport","click a.changeElementTitle":"onChangeElementTitle","click a.changeSearchString":"onChangeSearchString","click a.dialogBack":"onDialogBack","click a.cloneSearchReport":"convertToInlineSearch","click a.clonePivotReport":"convertToInlinePivot","click a.selectNewReport":"selectNewReport","click a.convertToReport":"convertToReport","click a.useReportFormatting":"useReportFormatting","click a":function(e){var t=n(e.currentTarget).attr("href");t&&"#"!==t[t.length-1]&&(e.preventDefault(),window.open(t))},"click li.reportDetailsView a":function(e){this.children.popdown.hide()}}})}.apply(t,n))||(e.exports=s)},"views/dashboards/panelcontrols/ReportDialog":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/shared/controls/ControlGroup"),i("views/shared/Modal"),i("views/shared/FlashMessages"),i("shim/splunk.util"),i("uri/route"),i("collections/search/Reports"),i("splunkjs/mvc/utils"),i("stubs/splunk.config")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h){return a.extend({moduleId:n.i,initialize:function(){a.prototype.initialize.apply(this,arguments),this.model.workingReport=new i.Model,this.model.workingReport.set({title:""}),this.model.workingReport.set("id",this.model.report.get("id")),this.children.flashMessage=new r({model:this.model.dashboard}),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.listenTo(this.model.report,"successfulManagerChange",this.hide,this),this.controller=this.options.controller,this.controller.reportsCollection||this.controller.fetchCollection(),this.controller.reportsCollection.initialFetchDfd.done(t.bind((function(){this.ready=!0;var e=this.controller.reportsCollection.map((function(e){return{label:e.entry.get("name"),value:e.id}})),i=l.reports(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"));this.controller.reportsCollection.length===this.controller.reportsCollection.REPORTS_LIMIT?this.children.reportsControlGroup=new s({label:t("Select Report").t(),controlType:"SyntheticSelect",controlOptions:{model:this.model.workingReport,modelAttribute:"id",items:e,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},help:t("This does not contain all reports. Add a report that is not listed from ").t()+o.sprintf("<a href=%s>%s</a>.",i,t("Reports").t())}):this.children.reportsControlGroup=new s({label:t("Select Report").t(),controlType:"SyntheticSelect",controlOptions:{model:this.model.workingReport,modelAttribute:"id",items:e,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}})}),this)),this.children.panelTitleControlGroup=new s({label:t("Panel Title").t(),controlType:"Text",controlOptions:{model:this.model.workingReport,modelAttribute:"title",placeholder:t("optional").t()}})},events:e.extend({},a.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){e.preventDefault(),this.model.report.trigger("updateReportID",this.model.workingReport.get("id"),this.model.workingReport.get("title"))},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(t("Select a New Report").t()),this.$(a.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL),this.$(a.BODY_FORM_SELECTOR).append(a.LOADING_HORIZONTAL),this.$(a.LOADING_SELECTOR).html(t("Loading...").t()),this.controller.reportsCollection.initialFetchDfd.done(t.bind((function(){this.$(a.LOADING_SELECTOR).remove(),this.$(a.BODY_FORM_SELECTOR).append(this.children.reportsControlGroup.render().el),this.$(a.BODY_FORM_SELECTOR).append(this.children.panelTitleControlGroup.render().el)}),this)),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_CANCEL),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_SAVE)}})}.apply(t,n))||(e.exports=s)},"views/dashboards/panelcontrols/querydialog/Modal":function(e,t,i){var n,s;n=[i("require/underscore"),i("shim/jquery"),e,i("views/shared/controls/ControlGroup"),i("views/shared/delegates/ModalTimerangePicker"),i("views/shared/timerangepicker/dialog/Master"),i("views/shared/Modal"),i("models/shared/TimeRange"),i("collections/services/data/ui/Times"),i("shim/splunk.util"),i("splunkjs/mvc/utils"),i("views/Base"),i("uri/route"),i("util/time"),i("shim/bootstrap.tooltip"),i("util/console"),i("splunkjs/mvc"),i("views/shared/FlashMessages"),i("views/dashboards/PanelTimeRangePicker"),i("splunkjs/mvc/tokenawaremodel")],void 0===(s=function(e,t,i,n,s,a,r,o,l,d,c,h,u,p,m,g,f,v,b,y){var _=o.extend({validation:e.extend({earliest_token:function(e,t,i){if("tokens"===i.useTimeFrom&&!e)return"No value specified for earliest token."},latest_token:function(e,t,i){if("tokens"===i.useTimeFrom&&!e)return"No value specified for latest token."}},o.prototype.validation)}),w=y.extend({validation:{search:function(t,i,n){if(!this.get(i,{tokens:!0}))return e("Search string is required").t()}}});return r.extend({moduleId:i.i,className:"modal edit-search-string",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.workingReport=new w(e.pick(this.model.report.entry.content.toJSON({tokens:!0}),["search","dispatch.earliest_time","dispatch.latest_time"]),{applyTokensByDefault:!0,retrieveTokensByDefault:!0}),this.children.title=new n({label:e("Title").t(),controlType:"Label",controlOptions:{model:this.model.report.entry.content,modelAttribute:"display.general.title"}}),this.children.searchStringInput=new n({label:e("Search String").t(),controlType:"Textarea",controlOptions:{model:this.model.workingReport,modelAttribute:"search"}}),this.model.report.isPivotReport()?this.children.searchStringInput.options.help='<a href="#" class="run-pivot">'+e("Run Pivot").t()+' <i class="icon-external"></i></a>':this.children.searchStringInput.options.help='<a href="#" class="run-search">'+e("Run Search").t()+' <i class="icon-external"></i></a>',this.collection=this.collection||{},this.collection.times=new l,this.collection.times.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner"),count:-1}}),this.model.timeRange=new _,this.children.timeRangePickerView=new a({model:{state:this.model.workingReport,timeRange:this.model.timeRange,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal},collection:this.collection.times,appendSelectDropdownsTo:".modal:visible"}),this.model.timeRange.on("applied",(function(){this.timeRangeDelegate.closeTimeRangePicker()}),this),this.children.panelTimeRangePicker=new b({model:{timeRange:this.model.timeRange,report:this.model.workingReport,state:this.model.state},collection:this.collection.times}),this.children.flashMessages=new v({model:this.model.dashboard}),this.children.searchFlashMessages=new v({model:this.model.workingReport}),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.listenTo(this.model.report,"successfulSave",this.hide,this)},events:t.extend({},r.prototype.events,{"click .modal-btn-primary":function(t){t.preventDefault();var i=this.model.timeRange.get("useTimeFrom"),n="global"==i?"":i+".";if(this.children.flashMessages.flashMsgCollection.reset(),this.children.searchFlashMessages.flashMsgCollection.reset(),!this.model.workingReport.validate()){if("tokens"===i){var s=this.model.timeRange.validate();if(s)return void e.each(s,(function(t){this.children.flashMessages.flashMsgCollection.add({key:"token-"+t,type:"error",html:e.escape(e(t).t())})}),this);var a=this.model.timeRange.get("earliest_token"),r=this.model.timeRange.get("latest_token");this.model.workingReport.set({"dispatch.earliest_time":"$"+a+"$","dispatch.latest_time":"$"+r+"$"},{tokens:!0})}else"search"!==i?this.model.workingReport.set({"dispatch.earliest_time":"$"+n+"earliest$","dispatch.latest_time":"$"+n+"latest$"},{tokens:!0}):this.model.workingReport.set({"dispatch.earliest_time":this.model.timeRange.get("earliest")||"0","dispatch.latest_time":this.model.timeRange.get("latest")||""});var o=this.model.workingReport.toJSON();g.log("Applying attributes to report model: %o",o),this.model.report.trigger("updateSearchString",o)}},"click a.run-search":function(e){e.preventDefault();var t,i,n=this.model.workingReport.get("search",{tokens:!1}),s=this.model.report.entry.content;if("postprocess"===s.get("display.general.search.type")){var a=f.Components.get(s.get("display.general.managerid"));if(!a||!a.parent)return;var r=a.parent.settings.resolve();t=r,n=(i=n)?[t.replace(/[\|\s]$/g,""),i.replace(/^[\|\s]/g,"")].join(" | "):t}if(n){var o={q:n};this.model.workingReport.has("dispatch.earliest_time")&&(o.earliest=this.model.workingReport.get("dispatch.earliest_time",{tokens:!1}||"0"),o.latest=this.model.workingReport.get("dispatch.latest_time",{tokens:!1})||"");var l=c.getPageInfo(),d=u.search(l.root,l.locale,l.app,{data:o});c.redirect(d,!0)}},"click a.run-pivot":function(e){e.preventDefault();var t=this.model.workingReport.get("search",{tokens:!1}),i={q:t};if(t){this.model.workingReport.has("dispatch.earliest_time")&&(i.earliest=this.model.workingReport.get("dispatch.earliest_time",{tokens:!1}),i.latest=this.model.workingReport.get("dispatch.latest_time",{tokens:!1}));var n=c.getPageInfo(),s=u.pivot(n.root,n.locale,n.app,{data:i});c.redirect(s,!0)}}}),handleSubmitButtonState:function(e){this.$(r.FOOTER_SELECTOR).find(".btn-primary")["pivot"===e.get("elementCreateType")?"addClass":"removeClass"]("disabled")},render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Edit Search").t()),this.$(r.BODY_SELECTOR).remove(),this.$(r.FOOTER_SELECTOR).before('<div class="vis-area"><div class="slide-area"><div class="content-wrapper query-dialog-wrapper"><div class="'+r.BODY_CLASS+'" ></div></div><div class="timerange-picker-wrapper"></div></div></div>'),this.$visArea=this.$(".vis-area").eq(0),this.$slideArea=this.$(".slide-area").eq(0),this.$editSearchContent=this.$(".query-dialog-wrapper").eq(0),this.$timeRangePickerWrapper=this.$(".timerange-picker-wrapper").eq(0),this.$modalParent=this.$el,this.$(r.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(r.BODY_SELECTOR).prepend(this.children.searchFlashMessages.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL_JUSTIFIED),this.children.title.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.children.searchStringInput.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.model.timeRange.save({earliest:this.model.workingReport.get("dispatch.earliest_time",{tokens:!1}||"0"),latest:this.model.workingReport.get("dispatch.latest_time",{tokens:!1}||"now")}).done(e.bind((function(){this.$(r.BODY_FORM_SELECTOR).append(this.children.panelTimeRangePicker.render().el)}),this)),this.$timeRangePickerWrapper.append(this.children.timeRangePickerView.render().el),this.timeRangeDelegate=new s({el:this.el,$visArea:this.$visArea,$slideArea:this.$slideArea,$contentWrapper:this.$editSearchContent,$timeRangePickerWrapper:this.$timeRangePickerWrapper,$modalParent:this.$modalParent,$timeRangePicker:this.children.timeRangePickerView.$el,activateSelector:"a.timerange-control",backButtonSelector:"a.btn.back"}),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn back modal-btn-back pull-left">'+e("Back").t()+"</a>"),this.$(".btn.back").hide(),this}})}.apply(t,n))||(e.exports=s)},"views/dashboards/panelcontrols/titledialog/Modal":function(e,t,i){var n,s;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),e,i("views/shared/controls/ControlGroup"),i("views/shared/Modal"),i("views/shared/FlashMessages")],void 0===(s=function(e,t,i,n,s,a,r){return a.extend({moduleId:n.i,initialize:function(){a.prototype.initialize.apply(this,arguments);var t="display.general.title";this.model.workingReport=new i.Model,this.model.workingReport.set(t,this.model.report.entry.content.get(t,{tokens:!0})),this.children.flashMessages=new r({model:this.model.dashboard}),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.children.panelTitleControlGroup=new s({label:e("Title").t(),controlType:"Text",controlOptions:{model:this.model.workingReport,modelAttribute:t,placeholder:e("optional").t()}}),this.listenTo(this.model.report,"successfulSave",this.hide,this)},events:t.extend({},a.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){var t=this.model.workingReport.get("display.general.title");e.preventDefault(),this.model.report.trigger("saveTitle",t)},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(e("Edit Title").t()),this.$(a.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL),this.$(a.BODY_FORM_SELECTOR).append(this.children.panelTitleControlGroup.render().el),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_CANCEL),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_SAVE)}})}.apply(t,n))||(e.exports=s)},"views/shared/controls/SearchTextareaControl":function(e,t,i){var n,s;n=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/searchbarinput/Master"),i("models/services/authentication/User"),i("models/search/SearchBar"),i("views/shared/controls/SearchTextareaControl.pcss")],void 0===(s=function(e,t,i,n,s,a,r,o){return n.extend({moduleId:i.i,className:"control-group",initialize:function(){n.prototype.initialize.apply(this,arguments),t.defaults(this.options,{label:t("Search String").t(),submitOnBlur:!0,minSearchBarLines:3,maxSearchBarLines:12,enabled:!0,readOnly:!1,showRunSearch:!0,showLabel:!0,searchAssistant:this.model.user.getSearchAssistant()===a.SEARCH_ASSISTANT.FULL?a.SEARCH_ASSISTANT.NONE:void 0}),this.model.searchBar=new r,this.listenTo(this.model.searchBar,"change:search",this.updateRunSearchLink)},events:{"click a.run-search":function(e){e.preventDefault(),this.trigger("runSearch",this.model.content.get("search"))}},updateRunSearchLink:function(){this.children.searchField&&this.options.showRunSearch&&(this.children.searchField.getText().length?(this.ENABLED_RUN_SEARCH_LINK.show(),this.DISABLED_RUN_SEARCH_LINK.hide()):(this.ENABLED_RUN_SEARCH_LINK.hide(),this.DISABLED_RUN_SEARCH_LINK.show()))},render:function(){this.$el.html(this.compiledTemplate({label:this.options.label,showLabel:this.options.showLabel}));var i=this.$el.find(".controls");return this.children.searchField=new s({model:{user:this.model.user,content:this.model.content,application:this.model.application,searchBar:this.model.searchBar},collection:{searchBNFs:this.collection.searchBNFs},searchAttribute:this.options.searchAttribute,enabled:this.options.enabled,submitOnBlur:this.options.submitOnBlur,minSearchBarLines:this.options.minSearchBarLines,maxSearchBarLines:this.options.maxSearchBarLines,searchAssistant:this.options.searchAssistant,syntaxHighlighting:this.options.syntaxHighlighting,readOnly:this.options.readOnly}),this.children.searchField.render().appendTo(i),this.options.showRunSearch&&(this.ENABLED_RUN_SEARCH_LINK=e('<a href="#" class="run-search">'+t("Run Search").t()+' <i class="icon-external"></i></a>'),this.DISABLED_RUN_SEARCH_LINK=e('<span class="run-search disabled">'+t("Run Search").t()+' <i class="icon-external"></i></span>'),this.ENABLED_RUN_SEARCH_LINK.appendTo(i),this.DISABLED_RUN_SEARCH_LINK.appendTo(i)),this.updateRunSearchLink(),this},template:'        <% if (showLabel) { %>            <label class="control-label"><%- label %></label>        <% } %>        <div class="controls">        </div>        '})}.apply(t,n))||(e.exports=s)},"views/shared/controls/SearchTextareaControl.pcss":function(e,t,i){var n=i(613);"string"==typeof n&&(n=[[e.i,n,""]]);var s={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,s);n.locals&&(e.exports=n.locals)}});