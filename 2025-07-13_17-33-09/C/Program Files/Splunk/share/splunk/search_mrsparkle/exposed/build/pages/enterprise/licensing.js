!function(e){function t(t){for(var s,a,l=t[0],o=t[1],c=t[2],h=0,u=[];h<l.length;h++)a=l[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);for(d&&d(t);u.length;)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],s=!0,l=1;l<i.length;l++){var o=i[l];0!==n[o]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var s={},n={54:0,82:0},r=[];function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(t,s){i=n[e]=[t,s]}));t.push(i[2]=s);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=function(e){return a.p+""+({}[e]||e)+".js"}(e);var o=new Error;r=function(t){l.onerror=l.onload=null,clearTimeout(c);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,i[1](o)}n[e]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=o;r.push([2540,0]),i()}({2540:function(e,t,i){var s,n;i.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,i,s="",n=0,r=arguments.length;n<r;n++)(i=(t=arguments[n].toString()).length)>1&&"/"==t.charAt(i-1)&&(t=t.substring(0,i-1)),"/"!=t.charAt(0)?s+="/"+t:s+=t;if("/"!=s){var a=s.split("/"),l=a[1];if("static"==l||"modules"==l){var o=s.substring(l.length+2,s.length);s="/"+l,window.$C.BUILD_NUMBER&&(s+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(s+="."+window.$C.BUILD_PUSH_NUMBER),"app"==a[2]&&(s+=":"+e("APP_BUILD",0)),s+="/"+o}}var c=e("MRSPARKLE_ROOT_PATH","/"),d=e("LOCALE","en-US"),h="/"+d+s;return""==c||"/"==c?h:c+h}("/static/build/pages/enterprise")+"/"}(),s=[i("routers/Licensing"),i("util/router_utils")],void 0===(n=function(e,t){new e;t.start_backbone_history()}.apply(t,s))||(e.exports=n)},2541:function(e,t){e.exports=' <p class="license-validation-success"><i class="icon-check"></i>\n    <%= _(\'License validated!\').t() %>\n</p>\n\n<div class="license-name-and-description">\n    <% if (fileName) { %>\n\t   <h3><%= fileName %></h3><br/>\n    <% } %>\n    <p><%= descriptionText %>\n        <a href="<%- learnMoreLink %>" class="external enterprise-learn-more" target="_blank" rel="noopener noreferrer"><%= _(\'Learn more\').t() %></a>\n    </p>\n</div>\n\n<div class="license-upload-error">\n    <div class="alert alert-error">\n        <i class="icon-alert"></i><%= _(\'The supplied license is either expired or not applicable to this Splunk instance.\').t() %>\n    </div>\n</div>'},2542:function(e,t){e.exports='<div class="browser-warning">\n    <div class="alert alert-error">\n        <i class="icon-alert"></i><%= _(\'Your browser does not support file uploads. Please download and install the latest version or use another supported browser to access this feature.\').t() %> <a class="external" href="<%- helpLinkBrowser %>" target="_blank" rel="noopener noreferrer"> <%= _(\'Learn More\').t() %></a>\n    </div>\n</div>\n\n<p class="license-progress-control">\n    <%= _(\'Validating.. \').t() %>\n</p>\n\n<div class="progress">\n    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n</div>\n\n<div class="uploadControlWrapper">\n    <p><%= _(\'Upload a .lic file to add a license: \').t() %></p>\n\n    <div class="license-validation-error">\n        <div class="alert alert-error">\n            <i class="icon-alert"></i><%= _(\'Validation failed. Please double check your license file.\').t() %>\n        </div>\n    </div>\n\n    <div class="dropzone">\n        <div class="dropzone-box"></div>\n        <div class="dropzone-text"><h2><%= _(\'Drop your license file here\').t() %> </h2></div>\n    </div>\n\n    <div class="multiple-files-error">\n        <div class="alert alert-error">\n            <i class="icon-alert"></i><%= _(\'Multiple files selected. Try again, with only one file selected.\').t() %>\n        </div>\n    </div>\n\n    <p class="license-select-control"><%= _(\'Or\').t() %>\n        <a href="#" class="btn select-file-button"><%= _(\'Select a file\').t() %></a>\n        <input type="file" class="license-file-input" name="spl-file" />\n        <span class="license-file-name"></span>\n    </p>\n\n    <p class="license-paste-control"><%= _(\'Or\').t() %>\n        <a href="#" class="license-paste-xml-link"><%= _(\'copy & paste the license XML directly...\').t() %></a>\n    </p>\n    <div class="license-pastebin">\n        <textarea class="license-pastebin-textarea" rows="20" cols="90"></textarea>\n    </div>\n\n    <p class="get-new-license"><%= _(\'Don\\\'t have a license yet? \').t() %>\n        <a href="http://www.splunk.com/goto/estore" class="external"><%= _(\'Get a new license\').t() %></a>\n    </p>\n</div>\n'},2543:function(e,t){e.exports='<p>\n    <%= _(\'Add your new license. If you do not have a new license, get one from the Splunk e-store.\').t() %>\n</p>\n\n<p class="get-splunk-free-license"><%= _(\'You can also change to a 500MB/day Free license, which is restricted to the admin account: \').t() %>\n    <%= firstAdmin %>.\n</p>\n\n<div class="splunk-lite-free-error">\n    <div class="alert alert-error">\n        <i class="icon-alert"></i><%= _(\'Could not apply Free license.\').t() %>\n    </div>\n</div>\n'},2544:function(e,t){e.exports='<div class="section-header page-heading">\n    <h2 class="section-title">Licensing</h2>\n    <% if (isLicenseManager) { %>\n        <p class="license-header"><%= _(\'Explore Splunk License options and add capacity on\').t() %><a class="btn btn-primary btn-small" target="_blank" rel="noopener noreferrer" href="http://www.splunk.com/goto/estore"><%=_(\'e-Store\').t() %></a></p>\n    <% } %>\n\n    <% if (messages.length > 0) { %>\n        <div class="alerts-violations-outer">\n            <% if (messages.length <= 3) { messages.each(function(message) { %>\n                <div class="alert alert-error"><i class="icon-alert"></i>\n                    <span><%= _(message.entry.content.get(\'description\')).t() %></span><br/>\n                </div>\n            <% })} else { %>\n                    <% for (var i = 0; i < 3; i++) { %>\n                        <div class="alert alert-error"><i class="icon-alert"></i>\n                            <span><%= _(messages.models[i].entry.content.get(\'description\')).t() %></span><br/>\n                        </div>\n                    <% } %>\n                    <a class="show-all-alerts-violations" href="#"><%=_(\'Show all license violations and alerts\').t() %></a>\n            <% } %>\n        </div>\n    <% } %>\n</div>\n<div class="main-section">\n    <div class="manager-container">\n        <table class="manager-table">\n            <% if (isLicenseManager) { %>\n                <tr>\n                    <td class="license-table-left"><%= _(\'License group\').t() %></td>\n                    <td class="license-group">\n                        <%= _(\'Splunk\').t() %>\n                    </td>\n                </tr>\n            <% } %>\n            <tr>\n                <td class="license-table-left"><%= _(\'Daily volume licensed\').t() %></td>\n                <td class="license-daily-volume-licensed">\n                   <%= numberUtils.bytesToFileSize(stackQuota) %>\n                </td>\n            </tr>\n            <tr>\n                <td class="license-table-left"><%= _(\'Volume used today\').t() %></td>\n                <td class="license-table-volume-used-today">\n                </td>\n            </tr>\n            <tr>\n                <td class="license-table-left"></td>\n                <td class="license-progress-bar">\n                    <div class="license-progress-bar-outer">\n                        <div class="license-progress-bar-inner">\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class="license-table-left"><%= _(\'Daily usage in 30 days\').t() %></td>\n                <td class="license-usage-chart-split-picker">\n                </td>\n            </tr>\n            <tr>\n                <td class="license-table-left"></td>\n                <td class="license-usage-chart">\n                </td>\n            </tr>\n            <% if (isLicenseManager) { %>\n                <tr>\n                    <td class="license-table-left license-listing-table-label"><%= _(\'Licenses\').t() %></td>\n                    <td>\n                        <div class="license-listing-table"></div>\n                    </td>\n                </tr>\n                <tr>\n                    <td></td>\n                    <td>\n                        <a class="btn btn-secondary add-license-btn" data-role="add-license" href="#"><%= _(\'Add License\').t() %></a>\n                    </td>\n                </tr>\n            <% } %>\n        </table>\n    </div>\n</div>\n'},2545:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".manager-container{background-color:#fff;padding:20px}.manager-header{clear:both;padding:15px 20px}.manager-header h1{font-size:24px;font-weight:400;margin:0}.manager-header p{margin:10px 0 0}",""])},2546:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".manager-container{background-color:#fff;-webkit-box-shadow:0 1px 1px #e1e6eb;box-shadow:0 1px 1px #e1e6eb}.manager-table{table-layout:fixed;width:100%}.manager-table td{padding:10px;white-space:nowrap}.manager-table .license-table-left{text-align:right;width:140px}.manager-table .license-listing-table td{white-space:normal}.manager-table .license-listing-table-label{vertical-align:top}.license-header .btn{margin-left:10px}.alerts-violations-outer{padding:10px}.alert-error{margin-bottom:0}.show-all-alerts-violations{margin-left:28px}.splButton-tertiary.black{background:#3c444d;border:none;color:#fff}.license-listings td{padding:4px 8px}td.license-progress-bar{padding-top:0}td.license-progress-bar .license-progress-bar-outer{border:1px solid #c3cbd4;border-radius:3px;height:20px;overflow:hidden;position:relative;width:200px}td.license-progress-bar .license-progress-bar-inner{background-color:#171d21;height:inherit;position:absolute}.license-usage-chart{height:200px;width:100%}.license-usage-chart-split-picker a{width:auto}.license-paste-control,.license-select-control{text-align:center}.modal{margin-left:-325px;width:650px}.modal textarea{border:1px solid #ccc;height:150px;margin-top:4px;padding:5px 7px;width:580px}.modal .back-license-btn,.modal .get-license-btn{margin-right:5px}.modal .dropzone{margin-bottom:10px}.modal .license-select-control>.select-file-button{margin-left:5px}.modal .modal-footer>.btn-primary{margin-left:10px}.browser-warning,.multiple-files-error{padding-bottom:10px;padding-top:10px}.license-validation-success{margin-bottom:10px}.license-upload-success .icon-check,.license-validation-success .icon-check{color:#53a051;font-size:16px}.upgrade-enterprise-btn{background-color:#5cc05c}.get-new-license{margin-top:20px}.browser-warning,.enterprise-learn-more,.license-file-input,.license-pastebin,.license-progress-control,.license-upload-error,.license-validation-error,.multiple-files-error,.progress,.splunk-lite-free-error{display:none}.licensing-table-details .list-dotted dd{margin-left:145px}.licensing-table-details .list-dotted dt{width:140px}",""])},510:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".dropzone{height:190px;margin-top:20px}.dropzone.dropzone-small{height:140px}.dropzone-box{border:1px solid #e1e6eb;border-radius:3px;height:calc(100% - 26px);-webkit-transition:border .2s;transition:border .2s}.drop-zone-drag-over>.dropzone-box{border-color:#00a4fd}.dropzone-text{text-align:center}.dropzone-text h2{background-color:#fff;bottom:13px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#5c6773;display:inline-block;font-size:22px;font-weight:400;height:26px;margin:0;padding:5px 20px;position:relative;-webkit-transition:color .2s;transition:color .2s}.drop-zone-drag-over>.dropzone-text>h2{color:#007abd}",""])},"collections/services/licenser/Groups":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase")],void 0===(n=function(e,t,i,s){return s.extend({url:"licenser/groups",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Licenses":function(e,t,i){var s,n;s=[i("collections/SplunkDsBase"),i("models/services/licenser/License")],void 0===(n=function(e,t){return e.extend({url:"licenser/licenses",model:t})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Localslaves":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase")],void 0===(n=function(e,t,i,s){return s.extend({url:"licenser/localslave",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Messages":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase"),i("util/general_utils")],void 0===(n=function(e,t,i,s,n){return s.extend({url:"licenser/messages",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Pools":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase"),i("util/general_utils")],void 0===(n=function(e,t,i,s,n){return s.extend({url:"licenser/pools",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Slaves":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase"),i("util/general_utils")],void 0===(n=function(e,t,i,s,n){return s.extend({url:"licenser/slaves",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Stacks":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase"),i("util/general_utils")],void 0===(n=function(e,t,i,s,n){return s.extend({url:"licenser/stacks",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"collections/services/licenser/Usages":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("collections/SplunkDsBase")],void 0===(n=function(e,t,i,s){return s.extend({url:"licenser/usage",initialize:function(){s.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"models/services/licenser/License":function(e,t,i){var s,n;s=[i("models/SplunkDBase")],void 0===(n=function(e){return e.extend({url:"licenser/licenses",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"routers/Licensing":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("routers/Base"),i("shim/splunk.util"),i("models/search/Job"),i("models/services/search/jobs/ResultJsonCols"),i("collections/services/authentication/Users"),i("collections/services/licenser/Licenses"),i("collections/services/licenser/Stacks"),i("collections/services/licenser/Pools"),i("collections/services/licenser/Groups"),i("collections/services/licenser/Slaves"),i("collections/services/licenser/Messages"),i("collections/services/licenser/Localslaves"),i("collections/services/licenser/Usages"),i("views/licensing/Master")],void 0===(n=function(e,t,i,s,n,r,a,l,o,c,d,h,u,p,f,g){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.setPageTitle(t("Licensing").t()),this.collection.users=new a,this.collection.licenses=new l,this.collection.stacks=new o,this.collection.pools=new c,this.collection.groups=new d,this.collection.slaves=new h,this.collection.messages=new u,this.collection.localslaves=new p,this.collection.usages=new f,this.deferreds.users=e.Deferred(),this.deferreds.licenses=e.Deferred(),this.deferreds.stacks=e.Deferred(),this.deferreds.pools=e.Deferred(),this.deferreds.groups=e.Deferred(),this.deferreds.slaves=e.Deferred(),this.deferreds.messages=e.Deferred(),this.deferreds.localslaves=e.Deferred(),this.deferreds.localslave=e.Deferred(),this.deferreds.usages=e.Deferred(),this.bootstrapUsers(),this.bootstrapLicenses(),this.bootstrapStacks(),this.bootstrapPools(),this.bootstrapGroups(),this.bootstrapSlaves(),this.bootstrapMessages(),this.bootstrapLocalslaves(),this.bootstrapUsages(),this.searchJob=new n,this.searchResults=new r},page:function(t,s,n){i.prototype.page.apply(this,arguments),e.when(this.deferreds.pageViewRendered,this.deferreds.users,this.deferreds.licenses,this.deferreds.stacks,this.deferreds.pools,this.deferreds.groups,this.deferreds.slaves,this.deferreds.messages,this.deferreds.localslaves,this.deferreds.usages).then(function(){this.addPageViewEl(this.pageView.el),this.activeGroup=this.collection.groups.find((function(e){return e.entry.content.get("is_active")})),this.initializeUsageChartData(),this.initializeAndRenderSummary()}.bind(this))},initializeUsageChartData:function(){var e=s.sprintf('index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d |                     eval _time=_time - 43200 | append [ rest /services/licenser/usage | stats sum(quota) as stacksz | eval _time=relative_time(now(), "@d")] |                     bin _time span=1d | timechart span=1d sum(stacksz) AS "%s" fixedrange=false ',t("volume licensed").t())+s.sprintf('| join type=outer _time [search index=_internal source=*license_usage.log* type="Usage"                     earliest=-30d@d latest=@d | eval _time=_time - 43200 |                     eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) |                     bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx |                     append [ rest /services/licenser/usage/license_usage | stats sum(slaves_usage_bytes) as b | eval _time=relative_time(now(), "@d")] |                     timechart span=1d sum(b) AS "%s" fixedrange=false] ',t("volume indexed").t())+"| fields - _timediff | foreach * [eval <<FIELD>>=round('<<FIELD>>'/1024/1024/1024, 3)]";this.searchJob.save({},{data:{app:this.model.application.get("app"),owner:this.model.application.get("owner"),search:e}}).done(function(){this.searchJob.registerJobProgressLinksChild(n.RESULTS_PREVIEW,this.searchResults,(function(){this.searchResults.fetch()}),this),this.searchJob.startPolling()}.bind(this))},bootstrapUsers:function(){"resolved"!==this.deferreds.users.state()&&this.collection.users.fetch({success:function(e,t){this.deferreds.users.resolve()}.bind(this),error:function(e,t){this.deferreds.users.resolve()}.bind(this)})},bootstrapLicenses:function(){"resolved"!==this.deferreds.licenses.state()&&this.collection.licenses.fetch({success:function(e,t){this.deferreds.licenses.resolve()}.bind(this),error:function(e,t){this.deferreds.licenses.resolve()}.bind(this)})},bootstrapStacks:function(){"resolved"!==this.deferreds.stacks.state()&&this.collection.stacks.fetch({success:function(e,t){this.deferreds.stacks.resolve()}.bind(this),error:function(e,t){this.deferreds.stacks.resolve()}.bind(this)})},bootstrapPools:function(){"resolved"!==this.deferreds.pools.state()&&this.collection.pools.fetch({success:function(e,t){this.deferreds.pools.resolve()}.bind(this),error:function(e,t){this.deferreds.pools.resolve()}.bind(this)})},bootstrapGroups:function(){"resolved"!==this.deferreds.groups.state()&&this.collection.groups.fetch({success:function(e,t){this.deferreds.groups.resolve()}.bind(this),error:function(e,t){this.deferreds.groups.resolve()}.bind(this)})},bootstrapSlaves:function(){"resolved"!==this.deferreds.slaves.state()&&this.collection.slaves.fetch({success:function(e,t){this.deferreds.slaves.resolve()}.bind(this),error:function(e,t){this.deferreds.slaves.resolve()}.bind(this)})},bootstrapMessages:function(){"resolved"!==this.deferreds.messages.state()&&this.collection.messages.fetch({success:function(e,t){this.deferreds.messages.resolve()}.bind(this),error:function(e,t){this.deferreds.messages.resolve()}.bind(this)})},bootstrapLocalslaves:function(){"resolved"!==this.deferreds.localslaves.state()&&this.collection.localslaves.fetch({success:function(e,t){this.deferreds.localslaves.resolve()}.bind(this),error:function(e,t){this.deferreds.localslaves.resolve()}.bind(this)})},bootstrapUsages:function(){"resolved"!==this.deferreds.usages.state()&&this.collection.usages.fetch({success:function(e,t){this.deferreds.usages.resolve()}.bind(this),error:function(e,t){this.deferreds.usages.resolve()}.bind(this)})},initializeAndRenderSummary:function(){var e=new g({model:{application:this.model.application,user:this.model.user,serverInfo:this.model.serverInfo,searchResults:this.searchResults,searchJob:this.searchJob},collection:{users:this.collection.users,licenses:this.collection.licenses,stacks:this.collection.stacks,pools:this.collection.pools,groups:this.collection.groups,slaves:this.collection.slaves,messages:this.collection.messages,localslaves:this.collection.localslaves,usages:this.collection.usages}});this.pageView.$(".main-section-body").html(e.render().el)}})}.apply(t,s))||(e.exports=n)},"util/jscharting_utils":function(e,t,i){var s,n;s=[i("require/underscore"),i("helpers/user_agent"),i("models/config"),i("splunk/palettes/ColorCodes"),i("util/console"),i("util/theme_utils"),i("shim/splunk.util"),i("stubs/i18n")],void 0===(n=function(e,t,i,s,n,r,a,l){var o,c=function(e){return parseInt(e,10)||1/0},d=/^[^_]|^_time/,h=c(a.getConfigValue("JSCHART_SERIES_LIMIT",100)),u=null!==(o=a.getConfigValue("JSCHART_TRUNCATION_LIMIT",5e4))?c(o):t.isFirefox()?c(a.getConfigValue("JSCHART_TRUNCATION_LIMIT_FIREFOX",5e4)):t.isSafari()?c(a.getConfigValue("JSCHART_TRUNCATION_LIMIT_SAFARI",5e4)):t.isIE11()?c(a.getConfigValue("JSCHART_TRUNCATION_LIMIT_IE11",5e4)):c(a.getConfigValue("JSCHART_TRUNCATION_LIMIT_CHROME",5e4)),p=function(t){var i=e.isString(t)?t:t.name;return d.test(i)};return{getCustomDisplayProperties:function(e,t){var i={};return(t=t||{}).JSCHART_TEST_MODE&&(i.testMode=!0),e.hasField("_tc")&&(i.fieldHideList=["percent"]),i},preprocessChartData:function(t,i){if(0===t.columns.length||0===t.columns[0].length)return t;if((i.chart||"column")in{pie:!0,scatter:!0,radialGauge:!0,fillerGauge:!0,markerGauge:!0})return t;if(t.fields.length>=h){var s,n=e(t.fields).map((function(t){return e.isString(t)?t:t.name})),r=e(n).indexOf("_span");r>-1&&r>=h&&(s=t.columns[r]),t={columns:t.columns.slice(0,h),fields:t.fields.slice(0,h)},s&&(t.columns.push(s),t.fields.push("_span"))}var a=parseInt(i["chart.resultTruncationLimit"],10)||parseInt(i.resultTruncationLimit,10),l=a>0?a:u,o=e(t.fields).filter(p).length-1,c=t.columns[0].length,d=Math.floor(l/o);return c>d?function(t,i){var s={fields:t.fields,columns:[]};return e(t.columns).each((function(e,t){s.columns[t]=e.slice(0,i)})),s}(t,d):t},prepareChartingLibrary:function(e,t){t=t||{},e.setLoggingConsole(n),"dark"===r.getCurrentTheme().colorScheme&&e.setTheme("dark"),e.setColorPalette(s.CATEGORICAL),e.setTimezone(t.SERVER_ZONEINFO||i.get("SERVER_ZONEINFO")),e.useSplunkI18nLibrary(l)},getSeriesLimit:function(){return h},setSeriesLimit:function(e){h=e},getTruncationLimit:function(){return u},setTruncationLimit:function(e){u=e}}}.apply(t,s))||(e.exports=n)},"views/licensing/AlertsAndViolations":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base")],void 0===(n=function(e,t,i,s){return s.extend({moduleId:i.i,className:"alerts-violations-inner",render:function(){return this.$el.html(this.compiledTemplate({_:t,messages:this.collection.messages})),this},template:'                <% messages.each(function(message) { %>                    <div class="alert alert-error">                        <i class="icon-alert"></i><span><%= _(message.entry.content.get(\'description\')).t() %></span><br/>                    </div>                <% }) %>            '})}.apply(t,s))||(e.exports=n)},"views/licensing/Master":function(e,t,i){var s;void 0===(s=function(e,t,s){var n=i("shim/jquery"),r=i("require/underscore"),a=i("models/Base"),l=(i("stubs/i18n"),i("views/Base")),o=i("views/licensing/AlertsAndViolations"),c=i("views/licensing/table/Master"),d=(i("views/shared/controls/ControlGroup"),i("views/shared/controls/SyntheticSelectControl")),h=i("views/shared/jschart/Master"),u=i("views/licensing/dialogs/Master"),p=i("views/licensing/dialogs/ExpiredLicense"),f=i("views/shared/RestartRequired"),g=i("views/shared/Restart"),m=i(2544),v=i("shim/splunk.util"),b=i("util/format_numbers_utils"),y=i("models/search/Job"),x=i("models/services/search/jobs/ResultJsonCols"),w=i("helpers/search/DataSource"),_=(i("views/shared/pcss/manager.pcss"),i("views/licensing/Master.pcss"),v.sprintf('index=_internal source=*license_usage.log* type="RolloverSummary" earliest=-30d@d |         eval _time=_time - 43200 | append [ rest /services/licenser/usage | stats sum(quota) as stacksz | eval _time=relative_time(now(), "@d")] |         bin _time span=1d | timechart span=1d sum(stacksz) AS "%s" fixedrange=false ',r("volume licensed").t())+'| join type=outer _time [search index=_internal source=*license_usage.log* type="Usage"         earliest=-30d@d latest=%s | eval _time=_time - 43200 |         eval h=if(len(h)=0 OR isnull(h),"(SQUASHED)",h) | eval s=if(len(s)=0 OR isnull(s),"(SQUASHED)",s) | eval idx=if(len(idx)=0 OR isnull(idx),"(UNKNOWN)",idx) |         bin _time span=1d | stats sum(b) as b by _time, pool, s, st, h, idx | %s         timechart span=1d sum(b) AS %s fixedrange=false] | fields - _timediff | foreach * [eval <<FIELD>>=round(\'<<FIELD>>\'/1024/1024/1024, 3)]'),E=v.sprintf(_,"@d",'append [ rest /services/licenser/usage/license_usage | stats sum(slaves_usage_bytes) as b | eval _time=relative_time(now(), "@d")] | ','"volume indexed"'),L=v.sprintf(_,"now()","","volumeB by st"),T=v.sprintf(_,"now()","","volumeB by h"),S=v.sprintf(_,"now()","","volumeB by s"),O=v.sprintf(_,"now()","","volumeB by idx");return l.extend({moduleId:s.i,template:m,isLicenseManager:!1,initialize:function(){l.prototype.initialize.apply(this,arguments),this.model.user.canManageLicenses()&&(this.isLicenseManager=!0),this.activeGroup=this.collection.groups.find((function(e){return e.entry.content.get("is_active")})),this.localSlaveName="",this.localSlaveLabel="",this.collection.localslaves.length>0&&(this.localSlaveName=this.collection.localslaves.models[0].entry.content.get("slave_id"),this.localSlaveLabel=this.collection.localslaves.models[0].entry.content.get("slave_label")),!this.children.table&&this.isLicenseManager&&(this.children.table=new c({model:{user:this.model.user,serverInfo:this.model.serverInfo,activeGroup:this.activeGroup},collection:{licenses:this.collection.licenses}})),this.children.splitPicker||(this.children.splitPicker=new d({items:[{label:r("No Split").t(),value:"noSplit"},{label:r("Source Type").t(),value:"sourceType"},{label:r("Host").t(),value:"host"},{label:r("Source").t(),value:"source"},{label:r("Index").t(),value:"index"}],save:!1,toggleClassName:"btn"})),this.splitValue="noSplit",this.searchJob=this.model.searchJob,this.searchResults=this.model.searchResults;var e="{"+r("volume licensed").t()+": 0xDC4E41, "+r("volume indexed").t()+": 0xFBD886}";this.chartOptions={"display.visualizations.charting.chart":"column","display.visualizations.charting.axisTitleX.text":r("Date").t(),"display.visualizations.charting.axisTitleY.text":r("GB").t(),"display.visualizations.charting.legend.placement":"right","display.visualizations.charting.chart.stackMode":"stacked","display.visualizations.charting.chart.nullValueMode":"connect","display.visualizations.charting.legend.labelStyle.overflowMode":"ellipsisMiddle","display.visualizations.charting.drilldown":"1","display.visualizations.charting.height":"300","display.visualizations.charting.chart.overlayFields":'"volume licensed"',"display.visualizations.charting.lineDashStyle":"shortDash","display.visualizations.charting.fieldColors":e},this.localUsedBytes=-1,this.primaryDataSource=new w("primary"),this.listenTo(this.searchResults,"change",this.getLocalUsedBytesForTodayFromSearchResults),this.listenTo(this.searchResults,"change",(function(){this.primaryDataSource.setSearchResults(this.searchResults.toJSON())})),this.listenTo(this.children.splitPicker,"change",this.renderUsageChart),this.children.usageChart||(this.children.usageChart=new h({model:{application:this.model.application,config:new a(this.chartOptions)},dataSources:[this.primaryDataSource]}))},events:{"click .show-all-alerts-violations":"showAllAlertsAndViolations","click .add-license-btn":"showAddLicenseModal"},getLocalUsedBytesForTodayFromSearchResults:function(){if("noSplit"==this.splitValue&&this.searchJob.isDone()&&this.searchResults.toJSON()){var e=this.searchResults.get("columns");if(e&&e.length>0){var t=e[e.length-1];t&&t.length>0&&(this.localUsedBytes=parseFloat(1024*t[t.length-1]*1024*1024))}this.renderVolumeUsedToday()}},calculateLocalUsedBytes:function(){var e=0;return this.isLicenseManager?this.collection.pools.each(function(t){var i=t.entry.content.get("slaves_usage_bytes")||{};for(var s in i)if(s==this.localSlaveName){var n=parseFloat(i[s]);isNaN(n)||(e+=n)}}.bind(this)):this.collection.usages.length>0&&(e=parseFloat(this.collection.usages.models[0].entry.content.get("slaves_usage_bytes"))),e},getCurrentStackQuota:function(){var e=0;if(this.isLicenseManager)for(var t=this.getActiveStacks(),i=0;i<t.length;i++)e+=parseInt(t[i].entry.content.get("quota"),10);else this.collection.usages.length>0&&(e=parseInt(this.collection.usages.models[0].entry.content.get("quota"),10));return e},getActiveStacks:function(){var e=[];return this.collection.stacks.each(function(t){r.contains(this.activeGroup.entry.content.get("stack_ids"),t.entry.get("name"))&&e.push(t)}.bind(this)),e},destroyOldAndDispatchNewJob:function(e){this.searchJob&&(this.searchJob.unregisterJobProgressLinksChild(),this.searchJob.handleJobDestroy(),delete this.searchJob),this.searchJob=new y,this.searchResults&&this.primaryDataSource&&(this.primaryDataSource.clearSearchResults(),this.stopListening(this.searchResults),delete this.searchResults),this.searchResults=new x;var t=E;switch(e){case"noSplit":t=E;break;case"sourceType":t=L;break;case"host":t=T;break;case"source":t=S;break;case"index":t=O;break;default:t=E}this.searchJob.save({},{data:{app:this.model.application.get("app"),owner:this.model.application.get("owner"),search:t}}).done(function(){this.searchJob.registerJobProgressLinksChild(y.RESULTS_PREVIEW,this.searchResults,(function(){this.searchResults.fetch()}),this),this.searchJob.startPolling()}.bind(this)),this.listenTo(this.searchResults,"change",this.getLocalUsedBytesForTodayFromSearchResults),this.listenTo(this.searchResults,"change",(function(){this.primaryDataSource.setSearchResults(this.searchResults.toJSON())}))},renderUsageChart:function(e){e!=this.splitValue&&(this.splitValue=e,this.destroyOldAndDispatchNewJob(this.splitValue),this.children.usageChart&&this.children.usageChart.remove(),this.children.usageChart=new h({model:{application:this.model.application,config:new a(this.chartOptions)},dataSources:[this.primaryDataSource]}),this.children.usageChart.render().appendTo(this.$(".license-usage-chart")))},showAllAlertsAndViolations:function(e){e.preventDefault(),this.children.alertsAndViolations||(this.children.alertsAndViolations=new o({collection:{messages:this.collection.messages}}),this.$(".alerts-violations-outer").html(this.children.alertsAndViolations.render().$el))},showAddLicenseModal:function(e){e.preventDefault(),this.children.addLicenseModal&&(this.children.addLicenseModal.hide(),delete this.children.addLicenseModal),this.children.expiredLicenseModal&&(this.children.expiredLicenseModal.hide(),delete this.children.expiredLicenseModal),this.children.addLicenseModal=new u({backdrop:"static",keyboard:!1,model:{application:this.model.application,serverInfo:this.model.serverInfo,activeGroup:this.activeGroup},collection:{licenses:this.collection.licenses},activeStacks:this.getActiveStacks(),onHiddenRemove:!0}),n("body").append(this.children.addLicenseModal.render().el),this.children.addLicenseModal.show(),this.listenTo(this.children.addLicenseModal,"licenseExpired",this.showExpiredLicenseModal),this.listenTo(this.children.addLicenseModal,"successLicensing",this.showSuccessModal)},showExpiredLicenseModal:function(){this.children.expiredLicenseModal&&(this.children.expiredLicenseModal.hide(),delete this.children.expiredLicenseModal),this.children.addLicenseModal&&(this.children.addLicenseModal.hide(),delete this.children.addLicenseModal),this.children.expiredLicenseModal=new p({backdrop:"static",keyboard:!1,collection:{groups:this.collection.groups,users:this.collection.users},model:{serverInfo:this.model.serverInfo},onHiddenRemove:!0}),n("body").append(this.children.expiredLicenseModal.render().el),this.children.expiredLicenseModal.show(),this.listenTo(this.children.expiredLicenseModal,"addLicense",this.showAddLicenseModal),this.listenTo(this.children.expiredLicenseModal,"successLicensing",this.showSuccessModal)},showSuccessModal:function(){this.children.success&&(this.children.success.hide(),delete this.children.success),this.children.success=new f({model:{serverInfo:this.model.serverInfo},restartMandatory:this.model.serverInfo.isLicenseStateExpired(),message:v.sprintf(r("License was successfully added. Restart %s to activate your new license.").t(),this.model.serverInfo.getProductName()),restartCallback:function(){this.children.success.hide(),this.showRestartModal()}.bind(this)}),n("body").append(this.children.success.render().el),this.children.success.show()},showRestartModal:function(){this.children.restartDialog&&(this.children.restartDialog.hide(),delete this.children.restartDialog),this.children.restartDialog=new g({model:{serverInfo:this.model.serverInfo}}),n("body").append(this.children.restartDialog.render().el),this.children.restartDialog.show(),v.restart_server()},renderVolumeUsedToday:function(){var e=this.getCurrentStackQuota();-1==this.localUsedBytes&&(this.localUsedBytes=this.calculateLocalUsedBytes());var t=b.bytesToFileSize(this.localUsedBytes).toString();e>0&&(t+=v.sprintf("%s"+r(" of licensed volume)").t()," ("+(this.localUsedBytes/e*100).toFixed().toString()+"%")),this.$(".license-table-volume-used-today").html(t);var i=(this.localUsedBytes/e*100).toFixed();this.$(".license-progress-bar-inner").css("width",i.toString()+"%")},render:function(){var e=this.getCurrentStackQuota();return this.el.innerHTML||this.$el.html(this.compiledTemplate({_:r,isLicenseManager:this.isLicenseManager,serverInfo:this.model.serverInfo,messages:this.collection.messages,numberUtils:b,stackQuota:e,splunkUtil:v})),this.children.table&&this.children.table.render().appendTo(this.$(".license-listing-table")),this.renderVolumeUsedToday(),this.children.splitPicker.render().appendTo(this.$(".license-usage-chart-split-picker")),this.children.usageChart.render().appendTo(this.$(".license-usage-chart")),!this.activeGroup&&this.isLicenseManager&&this.showAddLicenseModal(),this.model.serverInfo.isLicenseStateExpired()&&this.isLicenseManager&&this.showExpiredLicenseModal(),this}})}.call(t,i,t,e))||(e.exports=s)},"views/licensing/Master.pcss":function(e,t,i){var s=i(2546);"string"==typeof s&&(s=[[e.i,s,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,n);s.locals&&(e.exports=s.locals)},"views/licensing/dialogs/ExpiredLicense":function(e,t,i){var s,n;s=[e,i("require/underscore"),i("shim/jquery"),i("views/shared/Modal"),i("shim/splunk.util"),i(2543)],void 0===(n=function(e,t,i,s,n,r){return s.extend({template:r,moduleId:e.i,initialize:function(){s.prototype.initialize.apply(this,arguments);var e=t.sortBy(this.collection.users.models,(function(e){return e.entry.get("name")}),this);this.firstAdmin=t.find(e,(function(e){return t.contains(e.entry.content.get("roles"),"admin")})).entry.get("name")},events:i.extend({},s.prototype.events,{"click .add-license-btn":"showAddLicenseModal"}),showAddLicenseModal:function(e){e.preventDefault(),this.trigger("addLicense",e)},render:function(){this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).html(t("License Expired").t()),this.$(s.BUTTON_CLOSE_SELECTOR).remove(),this.$(s.BODY_SELECTOR).html(this.compiledTemplate({firstAdmin:this.firstAdmin,serverInfo:this.model.serverInfo,_:t})),this.$(s.BODY_SELECTOR).find(".splunk-free-error").hide(),this.$(s.FOOTER_SELECTOR).html('<a href="#" class="btn btn-primary add-license-btn">'+t("Add License").t()+"</a>"),this.$(s.FOOTER_SELECTOR).prepend('<a target="_blank" rel="noopener noreferrer" href="http://www.splunk.com/goto/estore" class="btn get-license-btn">'+t("Get License").t()+"</a>");var e=t("Change to Splunk Light Free").t();return this.$(s.FOOTER_SELECTOR).prepend('<a href="#" class="change-spl-light-free pull-left">'+e+"</a>"),this}})}.apply(t,s))||(e.exports=n)},"views/licensing/dialogs/Master":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("uri/route"),i("stubs/i18n"),i("shim/splunk.util"),i("models/services/licenser/License"),i("views/shared/Modal"),i("views/licensing/dialogs/Results"),i(2542),i("views/shared/pcss/dropzone.pcss")],void 0===(n=function(e,t,i,s,n,r,a,l,o,c,d,h){return o.extend({moduleId:s.i,template:d,initialize:function(){o.prototype.initialize.apply(this,arguments),this.file=null,this.licenseText="",this.activeGroup=this.model.activeGroup},events:e.extend({},o.prototype.events,{"click .select-file-button":function(e){e.preventDefault(),this.$(o.BODY_SELECTOR).find(".license-file-input").click()},"click .license-paste-xml-link":function(e){e.preventDefault(),this.$(o.BODY_SELECTOR).find(".license-pastebin").show()},"click .add-license-btn":function(e){e.preventDefault(),this.renderValidation()},"click .back-license-btn":function(e){e.preventDefault(),this.file&&(this.file=null),this.licenseText="",this.$(o.HEADER_TITLE_SELECTOR).empty(),this.render()},"click .back-expired-license-btn":function(e){e.preventDefault(),this.trigger("licenseExpired")}}),render:function(){this.$el.html(o.TEMPLATE),this.$(o.HEADER_TITLE_SELECTOR).html(t("Adding license").t());var e=n.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.adddata.browser");return this.$(o.BODY_SELECTOR).html(this.compiledTemplate({_:t,helpLinkBrowser:e})),this.$(o.FOOTER_SELECTOR).html('<a href="#" class="btn btn-primary modal-btn-primary add-license-btn pull-right disabled">'+t("Add").t()+"</a>"),this.model.serverInfo.isLicenseStateExpired()?this.$(o.FOOTER_SELECTOR).append('<a href="#" class="btn modal-btn-primary back-expired-license-btn pull-left">'+t("Back").t()+"</a>"):this.$(o.FOOTER_SELECTOR).append(o.BUTTON_CANCEL),this.$(o.BUTTON_CLOSE_SELECTOR).remove(),window.File||window.FileReader||this.showBrowserWarning(),this.bindFileEvents(),this},bindFileEvents:function(){var t=this.$(o.BODY_SELECTOR).find(".dropzone"),i=this.$(o.BODY_SELECTOR).find(".license-file-input"),s=this.$(o.BODY_SELECTOR).find(".license-pastebin-textarea"),n=this;i.on("change",(function(t){e(this).removeClass("drop-zone-drag-over"),t.target.files&&(t.target.files.length>1?this.showMultipleFilesError():(n.file=t.target.files[0],n.licenseText="",n.showLicenseFileReady(),n.updateFileLabel(n.file.name)))})),t.on("drop",(function(t){t.stopPropagation(),t.preventDefault(),e(this).removeClass("drop-zone-drag-over");var i=t.originalEvent.dataTransfer.files;i.length>1?n.showMultipleFilesError():(n.file=i[0],n.renderValidation())})).on("dragover",(function(t){t.preventDefault(),e(this).addClass("drop-zone-drag-over")})).on("dragleave",(function(t){t.preventDefault(),e(this).removeClass("drop-zone-drag-over")})),s.on("input",function(e){e.preventDefault();var t=e.target.value.trim();t.length>0&&(this.licenseText=t,this.file=null,this.updateFileLabel(""),this.showLicenseTextReady())}.bind(this))},renderValidation:function(){if(this.file||this.licenseText.length>0){if(this.updateFileLabel(""),this.resetProgressBar(),this.showValidationProgress(),this.file){var e,t=new FileReader;return t.onprogress=function(e){var t=0;e.lengthComputable&&(t=Math.round(100*e.loaded/e.total),this.updateProgressBar(t))}.bind(this),t.onerror=function(e){this.showValidationError()}.bind(this),t.onloadend=function(i){e=t.result,this.updateProgressBar(100),this.renderResults(this.file.name,e)}.bind(this),void t.readAsText(this.file)}this.licenseText.length>0&&this.renderResults("",this.licenseText)}},updateProgressBar:function(e){this.$(o.BODY_SELECTOR).find(".progress-bar").css("width",e.toString()+"%")},resetProgressBar:function(){this.updateProgressBar(0)},getUpgradeDescription:function(e,i,s){if(s)return t("You are about to reset your license violations.").t();var n=[];return t.each(this.model.serverInfo.entry.content.get("licenseKeys"),(function(e){var t=0,i=this.collection.licenses.find((function(t){return t.entry.content.get("license_hash")==e}));i.entry.content.get("expiration_time")&&(t=1e3*parseInt(i.entry.content.get("expiration_time"),10),n.push(t)),i.entry.content.get("absolute_expiration_time")&&(t=1e3*parseInt(i.entry.content.get("absolute_expiration_time"),10),n.push(t))}),this),n.length>0&&(n.sort((function(e,t){return e-t})),new Date(n[n.length-1])),""},renderResults:function(i,s){if(this.children.results&&(this.children.results.remove(),delete this.children.results),s&&s.trim().length>0){try{var d=e(e.parseXML(s))}catch(e){return void this.showValidationError()}var h=d.find("group_id");if(1==h.length){var u=!1,p=d.find("features");if(p.length>0)for(var f=p.find("feature"),g=0;g<f.length;g++){var m=f[g];if(m.childNodes&&m.childNodes[0].data&&"ResetWarnings"==m.childNodes[0].data.trim()){u=!0;break}}if(u&&this.activeGroup.entry.get("name")!=h.text())this.showValidationError();else{var v=d.find("expiration_time");if(1==v.length){var b=parseInt(v.text(),10);if(isNaN(b))return void this.showValidationError();if(1e3*b<Date.now())return void this.showValidationError()}var y=d.find("absolute_expiration_time");if(1==y.length){var x=parseInt(y.text(),10);if(isNaN(x))return void this.showValidationError();if(1e3*x<Date.now())return void this.showValidationError()}if(0!=v.length||0!=y.length){var w,_=this.getUpgradeDescription(h.text(),1e3*parseInt(v.text(),10),u),E=n.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.license.features");this.children.results=new c({fileName:i,descriptionText:_,learnMoreLink:E}),this.$(o.BODY_SELECTOR).html(this.children.results.render().el),u&&this.$(o.HEADER_TITLE_SELECTOR).html(t("Reset Warnings").t()),"Enterprise"==h.text()?(w=t("Upgrade to ").t()+h.text(),this.$(o.BODY_SELECTOR).find(".enterprise-learn-more").show(),this.$(o.FOOTER_SELECTOR).html('<a href="#" class="btn btn-primary modal-btn-primary upload-license-btn upgrade-enterprise-btn pull-right">'+a.escapeHtml(w)+"</a>")):(w=u?t("Reset").t():t("Upgrade to ").t()+h.text(),this.$(o.FOOTER_SELECTOR).html('<a href="#" class="btn btn-primary modal-btn-primary upload-license-btn pull-right">'+a.escapeHtml(w)+"</a>")),this.$(o.FOOTER_SELECTOR).append('<a href="#" class="btn modal-btn-primary back-license-btn pull-right">'+t("Back").t()+"</a>"),this.model.serverInfo.isLicenseStateExpired()||this.$(o.FOOTER_SELECTOR).append(o.BUTTON_CANCEL),this.$(o.FOOTER_SELECTOR).find(".upload-license-btn").bind("click",function(e,t,i){i.preventDefault();var s=new l;if(!e||0==e.trim().length){var n=r.format_datetime((Date.now()/1e3).toFixed());e="web_"+(n=n.split(" ").join("_").replace(/,/g,"").replace(/:/g,"_"))}s.entry.content.set({name:e,payload:t}),s.save({},{success:function(e){this.collection.licenses.add(e),this.showSuccessModal()}.bind(this),error:function(e,t){this.$(o.BODY_SELECTOR).find(".license-upload-error").show()}.bind(this)})}.bind(this,i,s))}else this.showValidationError()}}else this.showValidationError()}},showSuccessModal:function(){this.hide(),this.trigger("successLicensing")},showBrowserWarning:function(){this.$(o.BODY_SELECTOR).find(".uploadControlWrapper").hide(),this.$(o.BODY_SELECTOR).find(".license-pastebin").hide(),this.$(o.BODY_SELECTOR).find(".license-progress-control").hide(),this.$(o.BODY_SELECTOR).find(".progress").hide(),this.$(o.BODY_SELECTOR).find(".license-validation-error").hide(),this.$(o.BODY_SELECTOR).find(".multiple-files-error").hide(),this.$(o.FOOTER_SELECTOR).find(".add-license-btn").addClass("disabled"),this.$(o.BODY_SELECTOR).find(".browser-warning").show()},showMultipleFilesError:function(){this.file&&(this.file=null),this.updateFileLabel(""),this.licenseText="",this.$(o.BODY_SELECTOR).find(".browser-warning").hide(),this.$(o.BODY_SELECTOR).find(".uploadControlWrapper").show(),this.$(o.BODY_SELECTOR).find(".license-pastebin-textarea")[0].value="",this.$(o.BODY_SELECTOR).find(".license-pastebin").hide(),this.$(o.BODY_SELECTOR).find(".license-progress-control").hide(),this.$(o.BODY_SELECTOR).find(".progress").hide(),this.$(o.BODY_SELECTOR).find(".license-validation-error").hide(),this.$(o.FOOTER_SELECTOR).find(".add-license-btn").addClass("disabled"),this.$(o.BODY_SELECTOR).find(".multiple-files-error").show(),this.updateFileLabel("")},showValidationProgress:function(){this.$(o.BODY_SELECTOR).find(".browser-warning").hide(),this.$(o.BODY_SELECTOR).find(".multiple-files-error").hide(),this.$(o.BODY_SELECTOR).find(".uploadControlWrapper").hide(),this.$(o.BODY_SELECTOR).find(".license-pastebin").hide(),this.$(o.BODY_SELECTOR).find(".license-validation-error").hide(),this.$(o.BODY_SELECTOR).find(".license-progress-control").show(),this.$(o.BODY_SELECTOR).find(".progress").show(),this.$(o.FOOTER_SELECTOR).find(".add-license-btn").addClass("disabled")},showValidationError:function(){this.file&&(this.file=null),this.updateFileLabel(""),this.licenseText="",this.$(o.BODY_SELECTOR).find(".browser-warning").hide(),this.$(o.BODY_SELECTOR).find(".multiple-files-error").hide(),this.$(o.BODY_SELECTOR).find(".uploadControlWrapper").show(),this.$(o.BODY_SELECTOR).find(".license-pastebin-textarea")[0].value="",this.$(o.BODY_SELECTOR).find(".license-pastebin").hide(),this.$(o.BODY_SELECTOR).find(".license-progress-control").hide(),this.$(o.BODY_SELECTOR).find(".progress").hide(),this.$(o.BODY_SELECTOR).find(".license-validation-error").show(),this.$(o.FOOTER_SELECTOR).find(".add-license-btn").addClass("disabled")},showLicenseFileReady:function(){this.$(o.BODY_SELECTOR).find(".browser-warning").hide(),this.$(o.BODY_SELECTOR).find(".license-validation-error").hide(),this.$(o.BODY_SELECTOR).find(".license-pastebin").hide(),this.$(o.BODY_SELECTOR).find(".license-progress-control").hide(),this.$(o.BODY_SELECTOR).find(".progress").hide(),this.$(o.BODY_SELECTOR).find(".multiple-files-error").hide(),this.$(o.FOOTER_SELECTOR).find(".add-license-btn").removeClass("disabled")},showLicenseTextReady:function(){this.$(o.BODY_SELECTOR).find(".browser-warning").hide(),this.$(o.BODY_SELECTOR).find(".license-validation-error").hide(),this.$(o.BODY_SELECTOR).find(".license-progress-control").hide(),this.$(o.BODY_SELECTOR).find(".progress").hide(),this.$(o.BODY_SELECTOR).find(".multiple-files-error").hide(),this.$(o.FOOTER_SELECTOR).find(".add-license-btn").removeClass("disabled"),this.$(o.BODY_SELECTOR).find(".license-pastebin").show()},updateFileLabel:function(e){this.$(o.BODY_SELECTOR).find(".license-file-name")[0].innerHTML=e}})}.apply(t,s))||(e.exports=n)},"views/licensing/dialogs/Results":function(e,t,i){var s,n;s=[e,i("require/underscore"),i("views/Base"),i(2541)],void 0===(n=function(e,t,i,s){return i.extend({template:s,moduleId:e.i,initialize:function(){i.prototype.initialize.apply(this,arguments),this.fileName=null,this.options.fileName&&this.options.fileName.trim().length>0&&(this.fileName=this.options.fileName.trim())},render:function(){var e=this.compiledTemplate({_:t,fileName:this.fileName,descriptionText:this.options.descriptionText,learnMoreLink:this.options.learnMoreLink});return this.$el.html(e),this}})}.apply(t,s))||(e.exports=n)},"views/licensing/table/Details":function(e,t,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),i("views/Base"),e,i("stubs/i18n")],void 0===(n=function(e,t,i,s,n){return i.extend({moduleId:s.i,render:function(){var t=n.format_datetime(this.model.license.entry.content.get("creation_time")),i=n.format_datetime(this.model.license.entry.content.get("expiration_time")),s=this.model.license.entry.content.get("features"),r=this.model.license.entry.content.get("license_hash"),a=this.model.license.entry.content.get("label"),l=this.model.license.entry.content.get("max_violations"),o=this.model.license.entry.content.get("quota"),c=this.model.license.entry.content.get("sourcetypes"),d=this.model.license.entry.content.get("stack_id"),h=this.model.license.entry.content.get("status"),u=this.model.license.entry.content.get("type"),p=this.model.license.entry.content.get("window_period");return this.el.innerHTML=this.compiledTemplate({_:e,creationTime:t,expirationTime:i,features:s,licenseHash:r,licenseName:a,maximumViolations:l,quota:o,sourceTypes:c,stackName:d,status:h,type:u,windowPeriod:p}),this},template:'            <dl class="list-dotted">                <dt class="creation-time-dt"><%- _("Creation Time").t() %></dt>                    <dd class="creation-time-dd"><%= creationTime %></dd>                <dt class="expiration-time-dt"><%- _("Expiration Time").t() %></dt>                    <dd class="expiration-time-dd"><%= expirationTime %></dd>                <% if (features.length != 0) { %>                    <dt class="features-dt"><%- _("Features").t() %></dt>                        <% for (var i = 0; i < features.length; i++) { %>                            <dd class="features-dd"><%=features[i]%></dd>                        <% } %>                <% } %>                <dt class="hash-dt"><%- _("Hash").t() %></dt>                    <dd class="hash-dd"><%= licenseHash %></dd>                <dt class="license-name-dt"><%- _("Label").t() %></dt>                    <dd class="license-name-dd"><%= licenseName %></dd>                <dt class="maximum-violations-dt"><%- _("Maximum Violations").t() %></dt>                    <dd class="maximum-violations-dd"><%= maximumViolations %></dd>                <dt class="quota-bytes-dt"><%- _("Quota in Bytes").t() %></dt>                    <dd class="quota-bytes-dd"><%= quota %></dd>                <% if (sourceTypes.length != 0) { %>                    <dt class="sourcetypes-dt"><%- _("Source Types").t() %></dt>                    <% for (var i = 0; i < sourcetypes.length; i++) { %>                        <dd class="sourcetypes-dd"><%=sourcetypes[i]%></dd>                    <% } %>                <% } %>                <dt class="stack-name-dt"><%- _("Stack Name").t() %></dt>                    <dd class="stack-name-dd"><%= stackName %></dd>                <dt class="status-dt"><%- _("Status").t() %></dt>                    <dd class="status-dd"><%= status %></dd>                <dt class="type-dt"><%- _("Type").t() %></dt>                    <dd class="type-dd"><%= type %></dd>                <dt class="window-period-dt"><%- _("Window Period").t() %></dt>                    <dd class="window-period-dd"><%= windowPeriod %></dd>            </dl>        '})}.apply(t,s))||(e.exports=n)},"views/licensing/table/Master":function(e,t,i){var s,n;s=[e,i("shim/jquery"),i("require/underscore"),i("views/Base"),i("views/shared/TableHead"),i("views/shared/delegates/TableRowToggle"),i("views/licensing/table/TableRow"),i("views/licensing/table/MoreInfo"),i("models/Base")],void 0===(n=function(e,t,i,s,n,r,a,l,o){return s.extend({moduleId:e.i,initialize:function(){s.prototype.initialize.apply(this,arguments),this.children.tableRowToggle=new r({el:this.el,collapseOthers:!0});var e=[];e.push({label:i("i").t(),className:"col-info",html:'<i class="icon-info"></i>'}),e.push({label:i("License name").t()}),e.push({label:i("Licensed daily volume").t()}),e.push({label:i("Expires on").t()}),this.children.head=new n({model:new o,columns:e}),this.children.rows=this.rowsFromCollection()},rowsFromCollection:function(){return i.flatten(this.collection.licenses.map((function(e,t){return e.entry.content.get("group_id")==this.model.activeGroup.entry.get("name")?[new a({model:{license:e},index:t}),new l({model:{serverInfo:this.model.serverInfo,license:e},index:t})]:[]}),this))},render:function(){return this.el.innerHTML||(this.$el.append(this.template),this.children.head.render().prependTo(this.$("> .table-chrome"))),i(this.children.rows).each((function(e){e.render().appendTo(this.$(".license-listings"))}),this),this},template:'                <table class="table table-chrome table-striped table-row-expanding table-listing">                <tbody class="license-listings"></tbody>                </table>            '})}.apply(t,s))||(e.exports=n)},"views/licensing/table/MoreInfo":function(e,t,i){var s,n;s=[e,i("views/Base"),i("views/licensing/table/Details")],void 0===(n=function(e,t,i){return t.extend({moduleId:e.i,tagName:"tr",className:"more-info",initialize:function(){t.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.index%2?"even":"odd").css("display","none"),this.children.details=new i({model:{serverInfo:this.model.serverInfo,license:this.model.license}})},render:function(){return this.$el.html(this.compiledTemplate({})),this.children.details.render().appendTo(this.$("td.details")),this},template:'                <td class="details" colspan="3">                </td>            '})}.apply(t,s))||(e.exports=n)},"views/licensing/table/TableRow":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("stubs/i18n"),i("util/format_numbers_utils")],void 0===(n=function(e,t,i,s,n,r){return s.extend({moduleId:i.i,tagName:"tr",className:"expand",initialize:function(){s.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.index%2?"even":"odd")},render:function(){var e=parseInt(this.model.license.entry.content.get("quota"),10),i=this.model.license.entry.content.get("expiration_time"),s=1/0;this.model.license.entry.content.get("relative_expiration_start")&&this.model.license.entry.content.get("relative_expiration_interval")&&(s=this.model.license.entry.content.get("relative_expiration_start")+this.model.license.entry.content.get("relative_expiration_interval"));var a=n.format_datetime(Math.min(i,s));return new Date(a).getFullYear()>=2030&&(a=t("Perpetual").t()),this.$el.html(this.compiledTemplate({licenseName:this.model.license.entry.content.get("label"),numbersUtils:r,licenseQuota:e,expirationTime:a})),this},template:'                <td class="expands">                    <a href="#"><i class="icon-triangle-right-small"></i></a>                </td>                <td class="license-name"><%=licenseName%></td>                <td class="daily-volume"><%= numbersUtils.bytesToFileSize(licenseQuota) %></td>                <td class="expires-on"><%=expirationTime%></td>                '})}.apply(t,s))||(e.exports=n)},"views/shared/jschart/Master":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("models/config"),i("views/shared/viz/Base"),i("util/jscharting_utils"),i("util/general_utils"),i("shim/splunk.util"),i("shim/splunk.legend"),i("uri/route"),i(663)],void 0===(n=function(e,t,i,s,n,r,a,l,o,c,d){return t("Invalid timestamp").t(),t("Reset").t(),t("Reset Zoom").t(),t("Pan Right").t(),t("Pan Left").t(),t("No Results").t(),t("Invalid Data").t(),t("Numeric Data Required").t(),t("Invalid data: second column must be numeric for a pie chart").t(),r.prepareChartingLibrary(d),n.extend({VIZ_PROPERTY_PREFIX_REGEX:/^display\.visualizations\.charting\./,className:"chart",moduleId:i.i,initialize:function(i){n.prototype.initialize.apply(this,arguments),this.options=i||{},this._selectedRange=null,this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%"),this.$chart=e("<div></div>"),this.$inlineMessage=e("<div></div>").css("text-align","center").addClass(this.options.messageContainerClass||""),this.computeDisplayProperties(),this.listenTo(this.getPrimaryDataSource(),"destroy",this.empty),this.onExternalPaletteChange=t(this.onExternalPaletteChange).bind(this),this.legendId=(this.options.parentCid||"")+this.cid,o.register(this.legendId),o.addEventListener("labelIndexMapChanged",this.onExternalPaletteChange)},empty:function(){return this.destroyChart(),this.$chart.empty(),this.$inlineMessage.empty(),this},remove:function(){return this.removed=!0,this.destroyChart(),o.unregister(this.legendId),o.removeEventListener("labelIndexMapChanged",this.onExternalPaletteChange),n.prototype.remove.apply(this,arguments)},render:function(){return this.$chart.appendTo(this.el),this.$inlineMessage.appendTo(this.el),n.prototype.render.apply(this,arguments)},onConfigChange:function(e){if(t(e).chain().keys().any((function(e){return 0===e.indexOf("display.visualizations.charting.")})).value()){this.computeDisplayProperties();var i=["display.visualizations.charting.chart","display.visualizations.charting.chart.resultTruncationLimit","display.visualizations.charting.resultTruncationLimit","display.visualizations.charting.axisY2.enabled","display.visualizations.charting.chart.overlayFields","display.visualizations.charting.chart.stackMode"];t(e).any((function(e,s){return t(i).contains(s)}))?this.invalidate("formatDataPass"):this.invalidate("updateViewPass")}},combineData:function(e){return t.extend({},e.primary,{annotation:e.annotation})},formatData:function(e){if(!e||!e.columns||0===e.columns.length)return d.extractChartReadyData({fields:[],columns:[]});var t=r.preprocessChartData(e,this.displayProperties);t.columns.length>0&&(t.columns.length<e.columns.length||t.columns[0].length<e.columns[0].length)&&(t.areTruncated=!0),e.annotation&&(t.annotations=this.formatAnnotationData(e.annotation));var i=d.extractChartReadyData(t);t.areTruncated&&(i.resultsAreTruncated=!0);try{window.__splunk__prepareChartCfgDownload&&window.__splunk__prepareChartCfgDownload(this.cid,JSON.stringify({data:e,props:this.displayProperties},null,2))}catch(e){}return i},formatAnnotationData:function(e){var i=[];if(e&&e.columns&&e.columns.length>0){var s=d.extractChartReadyData(e);if(s.hasField("_time")){var n=s.getSeriesAsTimestamps("_time"),r=s.getSeries("annotation_label"),a=s.getSeries("annotation_color"),l=s.getSeries("annotation_category");t.each(n,(function(e,t){i.push({time:e,label:r[t],color:a[t],category:l[t]})}),this)}}return i},provideScaleValues:function(e,i){if(e.seriesList&&e.seriesList.length>1){var s=e.getFieldData(),n=s.yFields;if(l.normalizeBoolean(i["display.visualizations.charting.axisY2.enabled"])){var r=l.stringToFieldList(i["display.visualizations.charting.chart.overlayFields"]),a=[];t.each(r,(function(i){var s=t.indexOf(e.fields,i);s>-1&&(a=a.concat(e.seriesList[s]))})),n=t.difference(s.yFields,r)}var o=[],c=[];if(t.each(n,(function(i){var s=t.indexOf(e.fields,i);s>-1&&(o=o.concat(e.seriesList[s]),c.push(t.max(e.getSeriesAsFloats(i))))})),"stacked"===i["display.visualizations.charting.chart.stackMode"]){var d=t.reduce(c,(function(e,t){return e+t}),0);o.push(d)}var h=[];return t.each(s.xFields,(function(i){var s=t.indexOf(e.fields,i);s>-1&&(h=h.concat(e.seriesList[s]))})),{xAxis:h,yAxis:o,overlayAxis:a}}},updateView:function(i,n,a){var l=a();if(!t.isUndefined(i.seriesList)){d.setTimezone(s.get("SERVER_ZONEINFO")),this.$inlineMessage.empty();var c=this.getPrimaryDataSource().getFetchParams().count;if(i.resultsAreTruncated?this.renderResultsTruncatedMessage():i.seriesList.length>0&&c>0&&i.seriesList[0].length>=c&&this.renderMaxResultCountMessage(c),!t.isUndefined(this.getScale("xAxis")))var h={xCategories:this.getScale("xAxis").get("actualCategories")};if(!t.isUndefined(this.getScale("yAxis"))){var u=this.getScale("yAxis").get("actualMinimum"),p=this.getScale("yAxis").get("actualMaximum");if(u<p)var f={yAxisMin:u,yAxisMax:p}}if(!t.isUndefined(this.getScale("overlayAxis"))){var g=this.getScale("overlayAxis").get("actualMinimum"),m=this.getScale("overlayAxis").get("actualMaximum");if(g<m)var v={overlayAxisMin:g,overlayAxisMax:m}}var b=e.extend({},this.displayProperties,r.getCustomDisplayProperties(i,s.toJSON()),h,f,v);this.chart&&t.isEqual(b,this.chart.getCurrentDisplayProperties())?this.chart.off():(this.destroyChart(),this.chart=d.createChart(this.$chart[0],b)),this.updateChartContainerHeight();var y=this;this.chart.prepare(i,{});var x=this.chart.getFieldList();this.chart.requiresExternalColorPalette()&&(o.setLabels(this.legendId,x),this.externalPalette=this.getExternalColorPalette(),this.chart.setExternalColorPalette(this.externalPalette.fieldIndexMap,this.externalPalette.numLabels)),this.chart.on("pointClick",(function(e){var t=y.normalizeDrilldownEvent(e,"cell");y.trigger("drilldown",t)})),this.chart.on("legendClick",(function(e){var t;t=e.hasOwnProperty("name")&&e.hasOwnProperty("value")?y.normalizeDrilldownEvent(e,"row"):y.normalizeDrilldownEvent(e,"column"),y.trigger("drilldown",t)})),this.chart.on("chartRangeSelect",(function(e){var i=t(e).pick("startXIndex","endXIndex","startXValue","endXValue");t.isEqual(i,y._selectedRange)||(y._selectedRange=i,y.trigger("chartRangeSelect",e))})),this.chart.draw((function(e){y.model.config.set({currentChartFields:x},{transient:!0}),l()}))}},normalizeDrilldownEvent:function(e,i){return t.extend({type:i,originalEvent:e},t(e).pick("name","value","name2","value2","_span","rowContext","modifierKey"))},getExternalColorPalette:function(){this.synchronizingExternalPalette=!0;var e={};return t(this.chart.getFieldList()).each((function(t){e[t]=o.getLabelIndex(t)})),this.synchronizingExternalPalette=!1,{fieldIndexMap:e,numLabels:o.numLabels()}},onExternalPaletteChange:function(){if(!this.synchronizingExternalPalette){var e=this.externalPalette;this.externalPalette=this.getExternalColorPalette(),this.chart&&this.chart.requiresExternalColorPalette()&&!t.isEqual(e,this.externalPalette)&&this.invalidate("updateViewPass")}},destroyChart:function(){this.chart&&(this.chart.off(),this.chart.destroy(),delete this.chart)},reflow:function(){this.chart&&this.$el.height()>0&&(this.updateChartContainerHeight(),this.chart.resize())},updateChartContainerHeight:function(){var e=this.$inlineMessage.is(":empty")?0:this.$inlineMessage.outerHeight();this.$chart.height(this.$el.height()-e)},renderResultsTruncatedMessage:function(){var e=t("These results may be truncated. Your search generated too much data for the current visualization configuration.").t();e=this.addTruncationDocsLink(e),this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:e,level:"warning"}))},renderMaxResultCountMessage:function(e){var i=l.sprintf(t("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),e);i=this.addTruncationDocsLink(i),this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:i,level:"warning"}))},computeDisplayProperties:function(){this.displayProperties={};var e=this.model.config.toJSON();t.each(e,(function(e,t){this.VIZ_PROPERTY_PREFIX_REGEX.test(t)&&(this.displayProperties[t.replace(this.VIZ_PROPERTY_PREFIX_REGEX,"")]=e)}),this)},addTruncationDocsLink:function(e){var i=c.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.charting.datatruncation");return e+t(' <a href="<%- href %>" target="_blank" rel="noopener noreferrer"><span><%- text %></span><i class="icon-external icon-no-underline"></i></a>').template({href:i,text:t("Learn More").t()})},inlineMessageTemplate:'            <div class="alert alert-inline alert-<%= level %> alert-inline">                 <i class="icon-alert"></i>                 <%= message %>             </div>         '})}.apply(t,s))||(e.exports=n)},"views/shared/pcss/dropzone.pcss":function(e,t,i){var s=i(510);"string"==typeof s&&(s=[[e.i,s,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,n);s.locals&&(e.exports=s.locals)},"views/shared/pcss/manager.pcss":function(e,t,i){var s=i(2545);"string"==typeof s&&(s=[[e.i,s,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,n);s.locals&&(e.exports=s.locals)}});