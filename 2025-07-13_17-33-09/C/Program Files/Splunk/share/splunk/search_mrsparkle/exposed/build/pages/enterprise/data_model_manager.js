!function(e){function t(t){for(var i,n,s=t[0],d=t[1],r=t[2],h=0,p=[];h<s.length;h++)n=s[h],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&p.push(o[n][0]),o[n]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);for(c&&c(t);p.length;)p.shift()();return l.push.apply(l,r||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,s=1;s<a.length;s++){var d=a[s];0!==o[d]&&(i=!1)}i&&(l.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},o={29:0},l=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(e){var t=[],a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,i){a=o[e]=[t,i]}));t.push(a[2]=i);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.src=function(e){return n.p+""+({}[e]||e)+".js"}(e);var d=new Error;l=function(t){s.onerror=s.onload=null,clearTimeout(r);var a=o[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+l+")",d.name="ChunkLoadError",d.type=i,d.request=l,a[1](d)}o[e]=void 0}};var r=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(t)},n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var r=0;r<s.length;r++)t(s[r]);var c=d;l.push([2435,0]),a()}({2435:function(e,t,a){var i,o;a.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,a,i="",o=0,l=arguments.length;o<l;o++)(a=(t=arguments[o].toString()).length)>1&&"/"==t.charAt(a-1)&&(t=t.substring(0,a-1)),"/"!=t.charAt(0)?i+="/"+t:i+=t;if("/"!=i){var n=i.split("/"),s=n[1];if("static"==s||"modules"==s){var d=i.substring(s.length+2,i.length);i="/"+s,window.$C.BUILD_NUMBER&&(i+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(i+="."+window.$C.BUILD_PUSH_NUMBER),"app"==n[2]&&(i+=":"+e("APP_BUILD",0)),i+="/"+d}}var r=e("MRSPARKLE_ROOT_PATH","/"),c=e("LOCALE","en-US"),h="/"+c+i;return""==r||"/"==r?h:r+h}("/static/build/pages/enterprise")+"/"}(),i=[a("require/backbone"),a("routers/DataModelManager"),a("util/router_utils")],void 0===(o=function(e,t,a){new t;a.start_backbone_history()}.apply(t,i))||(e.exports=o)},2436:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".detailed-info-toggle-container{margin:10px 0;white-space:pre-line}.detailed-info-toggle-container .detailed-info-toggle{color:#3c444d}.detailed-info-toggle-container .detailed-info-toggle .detailed-info-heading{font-weight:500;margin-left:5px}.detailed-info-toggle-container .detailed-info-toggle:hover{text-decoration:none}",""])},2437:function(e,t){e.exports='<div class="section-header section-padded page-heading">\n<% if (displayNewDataModel) { %>\n\t<div class="buttons-wrapper pull-right">\n\t\t<a href="#" class="btn upload-data-model-button"><%- _("Upload Data Model").t() %></a>\n\t\t<a href="#" class="btn btn-primary new-data-model-button"><%- _("New Data Model").t() %></a>\n\t</div>\n<% } %>\n\t<h1 class="section-title"><%- _("Data Models").t() %></h1>\n\t<%- _("Data models enable users to easily create reports in the Pivot tool.").t() %>\n\t<a href="<%- docUrl %>" target="_blank" rel="noopener noreferrer" class="help-link"><%- _("Learn More").t() %> <i class="icon-external"></i></a>\n</div>\n<div class="main-section">\n\t<div class="table-toolbar">\n\t\t<div class="filter-container">\n\t\t\t<div class="collection-count"></div>\n\t\t\t<span class="select-app-filter-placeholder"></span>\n\t\t\t<span class="select-visible-filter-placeholder"></span>\n\t\t\t<span class="select-owner-filter-placeholder"></span>\n\t\t\t<span class="text-name-filter-placeholder"></span>\n\t\t\t<div class="select-page-count"></div>\n\t\t</div>\n\t\t<div class="paginator-container">\n\n\t\t</div>\n\t</div>\n\n\t<div class="dm-list-placeholder"></div>\n</div>\n'},2438:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".datamodelmanager-datamodelmanager>.btn-toolbar{margin-left:10px}.main-section{background:#f2f4f5}.main-section .table-toolbar>*{min-height:28px;padding:0 0 4px}.main-section .table-toolbar>*>*{display:inline-block}.main-section .table-toolbar .collection-count{height:24px;vertical-align:middle}.main-section .table-toolbar .filter-container{border-top:1px solid #c3cbd4;padding-top:10px}.main-section .table-toolbar .filter-container .select-page-count{float:right}.main-section .table-toolbar .paginator-container{min-height:0}.data-model-table-body td{overflow:hidden}.rebuild-btn,.update-btn{padding-right:20px}.icon-lightning{color:#6b7785;cursor:default;display:block;font-size:18px;overflow:hidden}.icon-lightning-selected{color:#f8be34}.datamodelmanager-components-editmenu{padding-right:20px}.data-model-title{display:block;margin:-4px;min-height:20px;padding:4px}.col-title{word-break:break-all}.col-title h5{color:#6b7785;font-size:12px;font-weight:400;margin:20px 0 0;text-transform:uppercase}.col-title dl{margin-bottom:0}.col-title ul,.col-title>.expanded-info{word-break:break-word}.col-title>.expanded-info .guid-info{color:#6b7785;font-size:12px}.col-accelerate{width:8px}.col-actions{width:100px}.col-actions>.dropdown,.col-actions>a{display:inline-block}.col-actions>.dropdown:first-child,.col-actions>a:first-child{margin-right:15px;min-width:40px}.col-type{width:70px}.col-app,.col-owner{text-overflow:ellipsis;white-space:nowrap;width:140px}.col-sharing{width:70px}@media only screen and (max-width:980px),only screen and (max-width:980px) and (-webkit-min-device-pixel-ratio:1.5){.col-title{width:220px}.col-app,.col-owner{width:100px}}.text-name-filter-placeholder{display:inline-block}.text-name-filter-placeholder input{margin:0}.dm-list-placeholder{background-color:#fff;-webkit-box-shadow:0 1px 1px #e1e6eb;box-shadow:0 1px 1px #e1e6eb;clear:both}.collection-paginator-placeholder{margin-bottom:8px;margin-top:8px}.select-owner-filter-placeholder,.select-visible-filter-placeholder,.text-name-filter-placeholder{margin-left:5px}.control-upload{position:relative}.control-upload .btn-file{border-bottom-left-radius:0;border-top-left-radius:0;-webkit-box-sizing:border-box;box-sizing:border-box;width:80px}.control-upload .fileInputContainer{border-radius:4px}.control-upload .isFocused .btn-file{border-collapse:separate;-webkit-box-shadow:0 0 1px 3px #006eaa;box-shadow:0 0 1px 3px #006eaa;outline:0;text-decoration:none}.control-upload .isFocused .btn-file:active:not([disabled]){-webkit-box-shadow:none;box-shadow:none}.control-upload span.filename.uneditable-input{border-bottom-right-radius:0;border-right:none;border-top-right-radius:0;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:32px;margin-right:0;text-overflow:ellipsis;width:calc(100% - 80px)}.control-upload input{cursor:pointer;direction:ltr;left:-10000px;opacity:0;position:absolute;top:-10000px}.blocksize-control{display:inline-block;margin:3px 0 16px}.blocksize-control .shared-controls-textcontrol{vertical-align:middle}.blocksize-control .shared-controls-textcontrol input{padding-right:6px;width:8em}.blocksize-control .control{display:inline-block}.blocksize-control .control .uneditable-input{width:8em}.ask-confirmation{padding-top:15px}.config-info-toggle-container{margin:10px 0;white-space:pre-line}.config-info-toggle-container .config-info-toggle{color:#3c444d}.config-info-toggle-container .config-info-toggle .config-info-heading{font-weight:500;margin-left:5px}.config-info-toggle-container .config-info-toggle:hover{text-decoration:none}.info-text{color:#6b7785;font-size:12px}",""])},"models/datamodel/UploadDataModel":function(e,t,a){var i,o;i=[a("require/underscore"),a("models/Base")],void 0===(o=function(e,t){return t.extend({idAttribute:"fileContents",defaults:{fileContents:"",app:""},validation:{fileContents:{required:!0,msg:e("File is required.").t()},modelName:[{required:!0,msg:e("ID is required.").t()},{pattern:/^[\w\-]+$/,msg:e("ID can only contain alphanumeric characters, underscores or hyphens. Whitespace is not allowed.").t()}]}})}.apply(t,i))||(e.exports=o)},"models/services/summarization/TStatsSummarization":function(e,t,a){var i,o;i=[a("shim/jquery"),a("models/SplunkDBase")],void 0===(o=function(e,t){return t.extend({url:"admin/summarization",fetch:function(a){return a=e.extend(!0,{data:{time_format:"iso8601"}},a),t.prototype.fetch.call(this,a)}})}.apply(t,i))||(e.exports=o)},"routers/DataModelManager":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/backbone"),a("require/underscore"),a("models/classicurl"),a("models/Base"),a("models/services/AppLocal"),a("models/shared/User"),a("models/shared/EAIFilterFetchData"),a("collections/services/datamodel/DataModels"),a("collections/services/data/vix/Indexes"),a("collections/services/data/vix/Archives"),a("collections/services/AppLocals"),a("collections/services/authentication/Users"),a("collections/services/admin/workload_management/Status"),a("views/shared/FlashMessages"),a("views/data_model_manager/DataModelManager"),a("routers/Base"),a("shim/splunk.util"),a("util/splunkd_utils")],void 0===(o=function(e,t,a,i,o,l,n,s,d,r,c,h,p,m,u,g,f,v,D){return f.extend({initialize:function(){f.prototype.initialize.apply(this,arguments),this.setPageTitle(a("Data Models").t()),this.metadataModel=new s,this.metadataModel.set({sortKey:"displayName",sortDirection:"asc",count:"20",offset:0,ownerSearch:"*",visible:!0}),this.dataModelsCollection=new d,this.vixCollection=new r,this.archivesCollection=new c,this.classicUrl=i,this.appLocal=new l,this.appsCollection=new h,this.user=new n({},{serverInfoModel:this.model.serverInfo,appLocalsCollection:this.appsCollection}),this.usersCollection=new p,this.settingsModel=new t.Model,this.pageFirstTime=!0,this.enableAppBar=!1,this.workloadManagementStatus=new m,this.deferreds.workloadManagementStatus=e.Deferred()},page:function(t,o,l){"system"==o&&v.redirect_to("app/search/"+l),f.prototype.page.apply(this,arguments);var n={app:this.model.application.get("app"),owner:this.model.application.get("owner")},s=this.appsCollection.fetch({data:{sort_key:"name",sort_dir:"desc",app:this.model.application.get("app"),owner:this.model.application.get("owner"),search:"visible=true AND disabled=0",count:-1}}),d=this.usersCollection.fetch({data:{count:250,search:"roles=*"}}),r=this.appLocal.fetch({url:D.fullpath(this.appLocal.url+"/"+encodeURIComponent(this.model.application.get("app"))),data:n});this.vixCollection.fetchData.set({count:0},{silent:!0});var c=this.vixCollection.fetch();this.archivesCollection.fetchData.set({count:0},{silent:!0});var h=this.archivesCollection.fetch();this.workloadManagementStatus.bootstrapWorkloadManagementStatus(this.deferreds.workloadManagementStatus),e.when(s).done(a((function(){var t=this.user.fetch({url:D.fullpath(this.user.url+"/"+encodeURIComponent(this.model.application.get("owner"))),data:n});e.when(d,r,t,c,h,this.deferreds.pageViewRendered,this.deferreds.workloadManagementStatus).done(a((function(){this.classicUrl.fetch({silentClear:!0}).done(a((function(){this.metadataModel.off("change",this.updateClassicUrlFromParams,this),this.updateParamsFromClassicUrl(),this.classicUrl.save(this.metadataModel.attributes,{replaceState:this.pageFirstTime}),this.metadataModel.on("change",this.updateClassicUrlFromParams,this);var t=this.appsCollection.some((function(e){return e.entry.acl.get("can_write")}),this);this.settingsModel.set("canCreateDataModel",t);var o=new g({collection:{dataModels:this.dataModelsCollection,apps:this.appsCollection,users:this.usersCollection,vix:this.vixCollection,archives:this.archivesCollection,workloadManagementStatus:this.workloadManagementStatus},model:{application:this.model.application,appLocal:this.appLocal,metadata:this.metadataModel,settings:this.settingsModel,user:this.user}});o.on("action:fetchDataModels",a.debounce(this.fetchDataModels),this),this.flashMessagesView&&this.flashMessagesView.remove(),this.flashMessagesView=new u({collection:this.dataModelsCollection}),this.shouldRender&&(this.pageView.$(".main-section-body").append(this.flashMessagesView.render().el),this.pageView.$(".main-section-body").append(e('<div class="data-model-manager-placeholder"></div>')),this.flashMessagesView.$el.show()),this.dataModelManagerView&&this.dataModelManagerView.remove({detach:!0}),this.dataModelManagerView=o,this.addPageViewEl(this.pageView.el),this.pageFirstTime=!1,this.fetchDataModels(),t&&"create"===i.get("dialog")&&this.showCreateDataModelDialog()})).bind(this))})).bind(this))})).bind(this))},fetchDataModels:function(){this.dataModelsCollection.fetch({data:{app:this.metadataModel.get("appSearch"),owner:"-",sort_dir:this.metadataModel.get("sortDirection"),sort_key:this.metadataModel.get("sortKey").split(","),sort_mode:["auto","auto"],search:this.metadataModel.getCalculatedSearch(),count:this.metadataModel.get("count"),offset:this.metadataModel.get("offset"),concise:!0}}).then(a((function(){e(".data-model-manager-placeholder").append(this.dataModelManagerView.render().el),this.flashMessagesView.$el.hide()})).bind(this))},showCreateDataModelDialog:function(){this.dataModelManagerView.showCreateDataModelDialog(),i.save({dialog:void 0},{replaceState:!0})},updateParamsFromClassicUrl:function(){var e=this.classicUrl,t=a(e.attributes).defaults(this.metadataModel.attributes,{appSearch:this.model.application.get("app")});t.visible=v.normalizeBoolean(t.visible),this.metadataModel.set(t)},updateClassicUrlFromParams:function(){a.debounce(function(){this.classicUrl.save(this.metadataModel.attributes,{trigger:!0})}.bind(this),0)()}})}.apply(t,i))||(e.exports=o)},"views/data_model_manager/DataModelActionController":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/underscore"),a("controllers/Base"),a("views/data_models/CreateDataModelDialog"),a("views/data_models/UploadDataModelDialog"),a("views/data_model_manager/components/AccelerationDialog"),a("views/data_model_manager/components/CloneDialog"),a("views/data_model_manager/components/TitleDescriptionDialog"),a("views/data_model_manager/components/PermissionsDialog"),a("views/shared/dialogs/TextDialog"),a("models/services/datamodel/DataModel"),a("models/ACLReadOnly"),a("models/shared/fetchdata/EAIFetchData"),a("collections/services/authorization/Roles"),a("util/splunkd_utils"),a("shim/splunk.util"),a("util/hash_utils")],void 0===(o=function(e,t,a,i,o,l,n,s,d,r,c,h,p,m,u,g,f){return a.extend({initialize:function(e){a.prototype.initialize.apply(this,arguments),this.on("action:createDataModel",this.showCreateDataModelDialog,this),this.on("action:uploadDataModel",this.showUploadDataModelDialog,this),this.on("action:cloneDataModel",this.openCloneDialogHandler,this),this.on("action:deleteDataModel",this.deleteDataModelHandler,this),this.on("action:editDataModelTitle",this.editDataModelTitleHandler,this),this.on("action:editPermissions",this.openEditPermissionsDialogHandler,this),this.on("action:editAcceleration",this.openAccelerateDialogHandler,this),this.on("action:rebuildAcceleration",this.rebuildAccelerationHandler,this)},showCreateDataModelDialog:function(){this.children.createDataModelDialog=new i({model:{application:this.model.application},collection:{apps:this.collection.apps}}),this.children.createDataModelDialog.on("hidden",this.destroyCreateDataModelDialog,this),this.children.createDataModelDialog.on("action:createdDataModel",(function(e){this.trigger("action:createdDataModel",e)}),this),this.children.createDataModelDialog.show()},destroyCreateDataModelDialog:function(){this.children.createDataModelDialog.remove(),delete this.children.createDataModelDialog},showUploadDataModelDialog:function(){this.children.uploadDataModelDialog=new o({model:{application:this.model.application,user:this.model.user},collection:{apps:this.collection.apps}}),this.children.uploadDataModelDialog.on("hidden",this.destroyUploadDataModelDialog,this),this.children.uploadDataModelDialog.on("action:uploadedDataModel",(function(e){this.trigger("action:uploadedDataModel",e)}),this),this.children.uploadDataModelDialog.show()},destroyUploadDataModelDialog:function(){this.children.uploadDataModelDialog.remove(),delete this.children.uploadDataModelDialog},deleteDataModelHandler:function(a){this.children.deleteDialog=new r({id:"modal_delete"}),this.children.deleteDialog.settings.set("primaryButtonLabel",t("Delete").t()),this.children.deleteDialog.settings.set("cancelButtonLabel",t("Cancel").t()),this.children.deleteDialog.on("click:primaryButton",(function(){this.deleteDialogDeleteHandler(a)}),this),this.children.deleteDialog.on("hidden",this.destroyDeleteDialogHandler,this),this.children.deleteDialog.settings.set("titleLabel",t("Delete Data Model").t()),this.children.deleteDialog.setText(g.sprintf(t("Are you sure you want to delete %s?").t(),"<em>"+t(a.entry.content.get("displayName")).escape()+"</em>")),e("body").append(this.children.deleteDialog.render().el),this.children.deleteDialog.show()},deleteDialogDeleteHandler:function(e){var a=e.get("id"),i=e.destroy();i&&i.done(t((function(){this.children.deleteDialog.hide(),this.callTelemetry(a,"Delete Datamodel"),this.trigger("action:deletedDataModel",a)})).bind(this))},destroyDeleteDialogHandler:function(){this.children.deleteDialog.off("hidden",this.destroyDeleteDialogHandler),this.children.deleteDialog.remove()},callTelemetry:function(e,t){g.trackPageInteraction(this.model.application.get("app"),t,{name:f.hashSha256(e)})},setupEditDescriptionDialog:function(t){this.children.editTitleDescDialog=new s({model:this.dataModelToEdit}),this.children.editTitleDescDialog.on("hidden",(function(){this.callTelemetry(t,"Edit Title or Description - Cancel"),delete this.children.editTitleDescDialog,delete this.dataModelToEdit}),this),this.children.editTitleDescDialog.on("action:saveModel",this.saveDataModelHandler,this),e("body").append(this.children.editTitleDescDialog.render().el),this.children.editTitleDescDialog.show()},editDataModelTitleHandler:function(e){var a=e;this.fetchEditableDataModel(e).then(t.bind((function(){this.setupEditDescriptionDialog(a)}),this))},setupCloneDialog:function(){this.children.cloneDialog=new n({model:{source:this.dataModelToEdit,application:this.model.application},collection:{apps:this.collection.apps}}),this.children.cloneDialog.on("hidden",(function(){this.callTelemetry(this.dataModelToEdit.get("id"),"Cancel Clone Datamodel"),delete this.cloneDialog,delete this.dataModelToEdit}),this),this.children.cloneDialog.on("action:clonedDataModel",(function(e){this.callTelemetry(e,"Clone Datamodel"),this.trigger("action:clonedDataModel",e)}),this),this.appendToBody(this.children.cloneDialog),this.children.cloneDialog.show()},appendToBody:function(t){e("body").append(t.render().el)},openCloneDialogHandler:function(e){this.fetchEditableDataModel(e).then(t.bind((function(){this.setupCloneDialog()}),this))},openEditPermissionsDialogHandler:function(a){var i=new p({count:0}),o=new m(void 0,{fetchData:i});e.when(this.fetchEditableDataModel(a),o.fetch()).then(function(){this.dataModelToEdit.application=this.model.application,this.dataModelToEdit.on("updateCollection",this.dataModelPermissionsChange,this),this.children.permissionsDialog=new d({model:{document:this.dataModelToEdit,nameModel:this.dataModelToEdit.entry.content,user:this.model.user,application:this.model.application},collection:o,onHiddenRemove:!0,nameKey:"displayName",nameLabel:t("Data Model").t()}),e("body").append(this.children.permissionsDialog.render().el),this.children.permissionsDialog.show()}.bind(this))},dataModelPermissionsChange:function(){this.dataModelToEdit.off("updateCollection",this.dataModelPermissionsChange),new h(e.extend(!0,{},this.dataModelToEdit.entry.acl.toJSON())).get("sharing")===u.USER&&this.dataModelToEdit.entry.content.acceleration.set("enabled",0),this.saveDataModelHandler(null,!0),this.trigger("action:dataModelPermissionsChange",this.dataModelToEdit.get("id"),this.dataModelToEdit)},openAccelerateDialogHandler:function(a){this.fetchEditableDataModel(a).then(t.bind((function(){this.dataModelToEdit.getSourceGUID()?(this.children.warnSourceGUIDDialog=new r({id:"modal_sourceGUID"}),this.children.warnSourceGUIDDialog.settings.set("primaryButtonLabel",void 0),this.children.warnSourceGUIDDialog.settings.set("cancelButtonLabel",void 0),this.children.warnSourceGUIDDialog.on("hidden",this.destroyWarnSourceGUIDDialogHandler,this),this.children.warnSourceGUIDDialog.settings.set("titleLabel",t("Acceleration Warning").t()),this.children.warnSourceGUIDDialog.setText(t("Datamodels with a set source GUID cannot generate their own summaries. Remove the setting to alter acceleration.").t()),e("body").append(this.children.warnSourceGUIDDialog.render().el),this.children.warnSourceGUIDDialog.show()):this.dataModelToEdit.canAccelerate()?this.dataModelToEdit.isPrivate()?(this.children.warnPrivateDialog=new r({id:"modal_private"}),this.children.warnPrivateDialog.settings.set("primaryButtonLabel",t("Edit Permissions").t()),this.children.warnPrivateDialog.settings.set("cancelButtonLabel",t("Cancel").t()),this.children.warnPrivateDialog.on("click:primaryButton",(function(){this.warnPrivateSubmitHandler(a)}),this),this.children.warnPrivateDialog.on("hidden",this.destroyWarnPrivateDialogHandler,this),this.children.warnPrivateDialog.settings.set("titleLabel",t("Add Acceleration").t()),this.children.warnPrivateDialog.setText(t("Private models cannot be accelerated. Edit the permissions before enabling acceleration.").t()),e("body").append(this.children.warnPrivateDialog.render().el),this.children.warnPrivateDialog.show()):(this.children.accelerationDialog=new l({model:{dataModel:this.dataModelToEdit,application:this.model.application,user:this.model.user},collection:{vix:this.collection.vix,archives:this.collection.archives,workloadManagementStatus:this.collection.workloadManagementStatus}}),this.children.accelerationDialog.on("hidden",this.destroyAccelerationDialogHandler,this),this.children.accelerationDialog.on("action:saveModel",this.saveDataModelHandler,this),this.children.accelerationDialog.show()):(this.children.warnAccelerationDialog=new r({id:"modal_warn"}),this.children.warnAccelerationDialog.settings.set("primaryButtonLabel",void 0),this.children.warnAccelerationDialog.settings.set("cancelButtonLabel",void 0),this.children.warnAccelerationDialog.on("hidden",this.destroyWarnAccelerationDialogHandler,this),this.children.warnAccelerationDialog.settings.set("titleLabel",t("Acceleration Warning").t()),this.children.warnAccelerationDialog.setText(t("You can only accelerate data models that include at least one event-based dataset or one search-based dataset that does not use reporting commands.").t()),e("body").append(this.children.warnAccelerationDialog.render().el),this.children.warnAccelerationDialog.show())}),this))},destroyAccelerationDialogHandler:function(){if(this.children.accelerationDialog.remove(),delete this.children.accelerationDialog,this.dataModelToEdit){var e=this.dataModelToEdit.get("id");this.callTelemetry(e,"Edit Acceleration - Cancel"),this.fetchConciseDataModel(e),delete this.dataModelToEdit}},warnPrivateSubmitHandler:function(e){this.children.warnPrivateDialog.hide(),this.trigger("action:editPermissions",e)},destroyWarnPrivateDialogHandler:function(){this.children.warnPrivateDialog.remove(),delete this.children.warnPrivateDialog},destroyWarnAccelerationDialogHandler:function(){this.children.warnAccelerationDialog.remove(),delete this.children.warnAccelerationDialog},destroyWarnSourceGUIDDialogHandler:function(){this.children.warnsourceGUIDDialog.remove(),delete this.children.warnSourceGUIDDialog},rebuildAccelerationHandler:function(e){var a="";this.fetchEditableDataModel(e).then(t.bind((function(){this.dataModelToEdit.entry.content.set("accelerateModel",!1),a=this.dataModelToEdit.entry.content.get("accelerationWindow"),this.dataModelToEdit.save().done(t.bind((function(){var e={accelerationWindow:a,accelerateModel:!0};this.dataModelToEdit.entry.content.set(e),this.dataModelToEdit.save()}),this))}),this))},fetchEditableDataModel:function(e){return this.dataModelToEdit=new c({id:e}),this.dataModelToEdit.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner")}})},fetchConciseDataModel:function(e){this.trigger("action:fetchDataModel",e)},updateDataModel:function(e,t,a){this.trigger("action:updateDataModel",e,t,a)},getAction:function(e){return t.isUndefined(e)?"Title or Description":"Acceleration"},saveDataModelHandler:function(a,i){if(this.dataModelToEdit){var o=this.dataModelToEdit.get("id");this.updateDataModel(o,{enabled:this.dataModelToEdit.entry.content.acceleration.get("enabled")},{displayName:this.dataModelToEdit.entry.content.get("displayName"),description:this.dataModelToEdit.entry.content.get("description")}),i||e.when(this.dataModelToEdit.save({},{skipDescription:!t.isUndefined(a)})).then(t.bind((function(){this.callTelemetry(o,"Edit "+this.getAction(a)+" - Save"),this.fetchConciseDataModel(o),delete this.dataModelToEdit}),this))}}})}.apply(t,i))||(e.exports=o)},"views/data_model_manager/DataModelManager":function(e,t,a){var i,o;i=[a("require/underscore"),e,a("models/services/datamodel/DataModel"),a("views/Base"),a("views/data_model_manager/components/DataModelTable"),a("views/data_model_manager/DataModelActionController"),a("views/shared/CollectionPaginator"),a("views/shared/controls/SyntheticSelectControl"),a("views/shared/controls/TextControl"),a("views/shared/dataenrichment/preview/components/SelectPageCount"),a("views/shared/CollectionCount"),a("shim/splunk.util"),a("util/hash_utils"),a("util/splunkd_utils"),a("uri/route"),a(2437),a("views/data_model_manager/DataModelManager.pcss")],void 0===(o=function(e,t,a,i,o,l,n,s,d,r,c,h,p,m,u,g,f){return i.extend({moduleId:t.i,template:g,dataModelToEdit:void 0,events:{"click .new-data-model-button":function(e){e.preventDefault(),this.children.dataModelController.trigger("action:createDataModel")},"click .upload-data-model-button":function(e){e.preventDefault(),this.children.dataModelController.trigger("action:uploadDataModel")}},editDataModelHandler:function(e){var t,i,o=e.datamodel,l=o.entry.acl.get("sharing")==m.GLOBAL?this.model.application.get("app"):o.entry.acl.get("app");o.getType()===a.DOCUMENT_TYPES.DATAMODEL?(i=o.get("id"),t=u.data_model_editor(this.model.application.get("root"),this.model.application.get("locale"),l,{data:{model:i}})):o.getType()===a.DOCUMENT_TYPES.TABLE&&(i=o.id,t=u.table(this.model.application.get("root"),this.model.application.get("locale"),l,{data:{t:i}})),h.trackPageInteraction(this.model.application.get("app"),e.action,{name:p.hashSha256(i)}),this.goToUrl(t)},goToUrl:function(e){window.location=e},fetchDataModelHandler:function(e){var t=this.collection.dataModels.get(e);if(t)return t.fetch({data:{concise:!0}})},updateDataModelHandler:function(e,t,a){var i=this.collection.dataModels.get(e);i&&(t&&i.entry.content.acceleration.set(t),a&&i.entry.content.set(a))},appFilterChange:function(e,t){this.children.selectVisibleFilter.setItems(this.getVisibleItems(""!=e)),""==e&&this.model.metadata.set("visible",!0)},getVisibleItems:function(t){return[{label:e("Created in the App").t(),value:!1,enabled:t},{label:e("Visible in the App").t(),value:!0,enabled:!0}]},showCreateDataModelDialog:function(){this.children.dataModelController.trigger("action:createDataModel")},initialize:function(t){i.prototype.initialize.call(this,t),this.children.dataModelController=new l({model:{application:this.model.application,user:this.model.user},collection:{apps:this.collection.apps,vix:this.collection.vix,archives:this.collection.archives,workloadManagementStatus:this.collection.workloadManagementStatus}}),this.children.dataModelController.on("action:clonedDataModel action:dataModelPermissionsChange action:deletedDataModel",(function(){this.trigger("action:fetchDataModels")}),this),this.children.dataModelController.on("action:fetchDataModel",this.fetchDataModelHandler,this),this.children.dataModelController.on("action:updateDataModel",this.updateDataModelHandler,this),this.children.dataModelController.on("action:createdDataModel",(function(e){this.editDataModelHandler({datamodel:e,action:"Create"})}),this),this.children.dataModelController.on("action:uploadedDataModel",(function(e){this.editDataModelHandler({datamodel:e,action:"Upload"})}),this),this.children.dmList=new o({collection:this.collection.dataModels,model:{application:this.model.application,metadata:this.model.metadata,settings:this.model.settings,user:this.model.user}}),this.children.dmList.on("all",(function(){var e=arguments[0],t=arguments[1];if("action:editDataModel"==e)this.editDataModelHandler(t);else if("action:deleteDataModel"==e){var a=this.collection.dataModels.get(t);this.children.dataModelController.trigger("action:deleteDataModel",a)}else this.children.dataModelController.trigger.apply(this.children.dataModelController,arguments)}),this);var a=[[{label:e("All").t(),value:""}],this.collection.apps.map((function(t,a,i){return{label:h.sprintf(e("%s (%s)").t(),t.entry.content.get("label"),t.entry.get("name")),value:t.entry.get("name")}}))];this.children.selectAppFilter=new s({label:e("App").t()+": ",toggleClassName:"btn-pill",menuWidth:"wide",model:this.model.metadata,modelAttribute:"appSearch",items:a}),this.children.selectAppFilter.on("change",this.appFilterChange,this),this.children.selectVisibleFilter=new s({toggleClassName:"btn-pill",menuWidth:"narrow",model:this.model.metadata,modelAttribute:"visible",items:this.getVisibleItems(""!=this.model.metadata.get("appSearch"))});var p=[[{label:e("Any").t(),value:"*"},{label:e("None (nobody)").t(),value:"nobody"}],this.collection.users.map((function(t,a,i){return{label:h.sprintf(e("%s (%s)").t(),t.entry.content.get("realname"),t.entry.get("name")),value:t.entry.get("name")}}))];this.children.selectOwnerFilter=new s({label:e("Owner").t()+": ",toggleClassName:"btn-pill",menuWidth:"narrow",model:this.model.metadata,modelAttribute:"ownerSearch",items:p}),this.children.textNameFilter=new d({model:this.model.metadata,modelAttribute:"nameFilter",inputClassName:"search-query",placeholder:e("filter").t()}),this.children.collectionPaginator=new n({collection:this.collection.dataModels,model:this.model.metadata}),this.children.collectionCount=new c({collection:this.collection.dataModels,countLabel:e("Data Models").t()}),this.children.selectPageCount=new r({model:this.model.metadata})},render:function(){this.children.selectAppFilter.detach(),this.children.selectVisibleFilter.detach(),this.children.selectOwnerFilter.detach(),this.children.textNameFilter.detach(),this.children.collectionPaginator.detach();var e=u.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.datamodel.about"),t=this.compiledTemplate({docUrl:e,displayNewDataModel:this.model.settings.get("canCreateDataModel")});return this.$el.html(t),this.children.dmList.render().appendTo(this.$(".dm-list-placeholder")),this.children.selectAppFilter.render().appendTo(this.$(".select-app-filter-placeholder")),this.children.selectVisibleFilter.render().appendTo(this.$(".select-visible-filter-placeholder")),this.children.selectOwnerFilter.render().appendTo(this.$(".select-owner-filter-placeholder")),this.children.textNameFilter.render().appendTo(this.$(".text-name-filter-placeholder")),this.children.collectionPaginator.render().appendTo(this.$(".paginator-container")),this.children.collectionCount.render().appendTo(this.$(".collection-count")),this.children.selectPageCount.render().appendTo(this.$(".select-page-count")),this}})}.apply(t,i))||(e.exports=o)},"views/data_model_manager/DataModelManager.pcss":function(e,t,a){var i=a(2438);"string"==typeof i&&(i=[[e.i,i,""]]);var o={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};a(6)(i,o);i.locals&&(e.exports=i.locals)},"views/data_model_manager/components/AccelerationInfo":function(e,t,a){var i,o;i=[a("require/underscore"),e,a("views/Base"),a("views/shared/FlashMessages"),a("shim/splunk.util"),a("util/time"),a("stubs/i18n"),a("util/format_numbers_utils"),a("util/splunkd_utils"),a("views/data_model_manager/components/AccelerationInfo.pcss")],void 0===(o=function(e,t,a,i,o,l,n,s,d,r){return a.extend({tagName:"dl",className:"list-dotted",moduleId:t.i,detailedInfo:!1,initialize:function(e){a.prototype.initialize.call(this,e),this.model.on("change",this.debouncedRender,this),this.children.flashMessagesView=new i},formattedTimeString:function(e){return e?n.format_datetime_microseconds(l.jsDateToSplunkDateTimeWithMicroseconds(l.isoToDateObject(e))):""},events:{"click a.detailed-info-toggle":function(e){e.preventDefault(),this.detailedInfo=!this.detailedInfo,this.debouncedRender()},"click a.overall-tooltip":function(e){e.preventDefault()},"click a.p50-tooltip":function(e){e.preventDefault()},"click a.p90-tooltip":function(e){e.preventDefault()}},render:function(){var t=this.model.entry.content.get("summary.access_count"),a=this.model.entry.content.get("summary.access_time"),i=0===t||void 0===a?"-":this.formattedTimeString(a),l=this.model.entry.content.get("summary.mod_time"),n=void 0===l?"-":this.formattedTimeString(l),r=this.model.entry.content.get("summary.latest_dispatch_time"),c=void 0===r?"-":this.formattedTimeString(r),h=this.compiledTemplate({summary:this.model.entry.content,summarySizeString:s.bytesToFileSize(this.model.entry.content.get("summary.size")),lastAccessed:i,lastUpdated:n,lastStart:c,sourceGUID:this.model.get("source_guid"),sprintf:o.sprintf,detailedInfo:this.detailedInfo});return this.$el.html(h),this.model.get("source_guid")&&0===this.model.entry.content.get("summary.buckets")?this.children.flashMessagesView.flashMsgHelper.addGeneralMessage("no_summaries_for_source_guid_message",{type:d.WARNING,html:e("Summaries for the data model at the specified source GUID are not found. Verify that the data model at the source GUID is accelerated.").t()}):this.children.flashMessagesView.flashMsgHelper.removeGeneralMessage("no_summaries_for_source_guid_message"),this.$(".flash-messages-placeholder").append(this.children.flashMessagesView.render().el),this.$("a.overall-tooltip").tooltip({animation:!1,title:"Ideally, summarization searches should take a uniform amount of time to complete. If these values are significantly different, the environment may be unhealthy or the system might be overloaded.",container:"body"}),this.$("a.p50-tooltip").tooltip({animation:!1,title:"The 50th percentile of summarization searches. 50% of summarization searches have taken less time than this value.",container:"body"}),this.$("a.p90-tooltip").tooltip({animation:!1,title:"The 90th percentile of summarization searches. 90% of summarization searches have taken less time than this value.",container:"body"}),this},template:'                <% if (summary.get("summary.id")) { %>                    <div class="flash-messages-placeholder"></div>                    <% if (sourceGUID) { %>                        <dt><%- _("Source GUID").t() %></dt>                        <dd><%- sourceGUID %></dd>                    <% } %>                    <dt><%- _("Status").t() %></dt>                    <dd><% if (summary.get("summary.complete")) { %>                            <%- sprintf(_("%s%% Completed").t(), (summary.get("summary.complete")*100).toFixed(2)) %>                        <% } else { %>                            <%- _("Building").t() %>                        <% } %>                    </dd>                    <dt><%- _("Access Count").t() %></dt>                    <dd><%- sprintf(_("%s. Last Access: %s").t(),                     summary.get("summary.access_count"), lastAccessed) %></dd>                    <dt><%- _("Size on Disk").t() %></dt>                    <dd><%- summarySizeString %></dd>                    <dt><%- _("Summary Range").t() %></dt>                    <dd><%- sprintf(_("%s second(s)").t(), summary.get("summary.time_range")) %></dd>                    <dt><%- _("Buckets").t() %></dt>                    <dd><%- summary.get("summary.buckets") %></dd>                    <dt><%- _("Updated").t() %></dt>                    <dd><%- lastUpdated %></dd>                    <div class="detailed-info-toggle-container">                    <% if (detailedInfo) { %>                        <a href="#" class="detailed-info-toggle"><i class="toggle icon-chevron-down"></i><span class="detailed-info-heading"><%- _("Detailed Acceleration Information").t() %></span></a>                            <div>                                <h4><%- _("Runtime statistics - Last Run").t() %></h4>                                <dt><%- _("SID").t() %></dt>                                <dd><%- summary.get("summary.last_sid") ? summary.get("summary.last_sid") : "-"  %></dd>                                <dt><%- _("Start Time").t() %></dt>                                <dd><%- lastStart %></dd>                                <dt><%- _("Run Time").t() %></dt>                                <dd><%- sprintf(_("%s second(s)").t(), summary.get("summary.latest_run_duration")) %></dd>                                <% if (summary.get("summary.last_error")) { %>                                    <div><i class="alert-error icon-alert"></i><span class="info-text"><%- _("Some errors were detected in the latest run of the summarization search:").t() %></span></div>                                    <dt><%- _("Errors").t() %></dt>                                    <dd><%- summary.get("summary.last_error") %></dd>                                <% } %>                            </div>                            <div>                                <h4><%- _("Runtime statistics - Overall").t() %><a href="#" class="overall-tooltip tooltip-link"><%- _("?").t() %></a></h4>                                <div class=info-text>                                    <% if (summary.get("summary.run_stats")) {%>                                        <%- sprintf(_("Aggregate statistics are calculated on the runtime of the past %s summarization runs.").t(), Object.keys(summary.get("summary.run_stats")).length) %>                                    <% } else { %>                                        <%- _("No acceleration searches have run so far.").t() %>                                    <% } %>                                </div>                                <dt><%- _("Average").t() %></dt>                                <dd><%- sprintf(_("%s second(s)").t(), summary.get("summary.average_time")) %></dd>                                <dt><%- _("p50").t() %><a href="#" class="p50-tooltip tooltip-link"><%- _("?").t() %></a></dt>                                <dd><%- sprintf(_("%s second(s)").t(), summary.get("summary.p50")) %></dd>                                <dt><%- _("p90").t() %><a href="#" class="p90-tooltip tooltip-link"><%- _("?").t() %></a></dt>                                <dd><%- sprintf(_("%s second(s)").t(), summary.get("summary.p90")) %></dd>                            <% } else { %>                                <a href="#" class="detailed-info-toggle"><i class="toggle icon-chevron-right"></i><span class="detailed-info-heading"><%- _("Detailed Acceleration Information").t() %></span></a>                            <% } %>                        </div>                    </div>                 <% } %>            '})}.apply(t,i))||(e.exports=o)},"views/data_model_manager/components/AccelerationInfo.pcss":function(e,t,a){var i=a(2436);"string"==typeof i&&(i=[[e.i,i,""]]);var o={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};a(6)(i,o);i.locals&&(e.exports=i.locals)},"views/data_model_manager/components/CloneDialog":function(e,t,a){var i,o;i=[a("require/underscore"),e,a("models/datamodel/CreateDataModel"),a("views/shared/Modal"),a("views/shared/controls/ControlGroup"),a("views/shared/controls/TextControl"),a("views/shared/delegates/PairedTextControls"),a("views/shared/FlashMessages"),a("util/datamodel/form_utils")],void 0===(o=function(e,t,a,i,o,l,n,s,d){return i.extend({moduleId:t.i,events:Object.assign({},i.prototype.events,{"click .btn-primary":function(e){this.primaryButtonClicked(e)}}),initialize:function(t){i.prototype.initialize.apply(this,arguments),this.model.createDataModel=new a({displayName:this.model.source.entry.content.get("displayName"),modelName:this.model.source.entry.content.get("modelName"),description:this.model.source.entry.content.get("description"),app:this.model.source.entry.acl.get("app"),clonePermissions:!1}),this.children.flashMessages=new s({model:this.model.createDataModel}),this.children.nameLabel=new o({controlType:"Label",controlOptions:{modelAttribute:"displayName",model:this.model.source.entry.content},label:e("Data Model").t()}),this.textDisplayNameControl=new l({modelAttribute:"displayName",model:this.model.createDataModel}),this.textModelNameControl=new l({modelAttribute:"modelName",model:this.model.createDataModel}),this.children.titleField=new o({controls:this.textDisplayNameControl,label:e("New Title").t()}),this.children.idField=new o({controls:this.textModelNameControl,label:e("New ID").t(),tooltip:e("The ID is used as the filename on disk and used in the data model search command. Cannot be changed later.").t(),help:e("The data model ID can only contain letters, numbers, dashes, and underscores. Do not start the data model ID with a period.").t()}),this.pairedTextControls=new n({sourceDelegate:this.textDisplayNameControl,destDelegate:this.textModelNameControl,transformFunction:d.normalizeForID});var r=this.model.createDataModel.get("app"),c=!1,h=[];this.collection.apps.each((function(e){e.entry.acl.get("can_write")&&(h.push({label:e.entry.content.get("label"),value:e.entry.get("name")}),e.entry.get("name")==r&&(c=!0))}),this),c||(r=h.length>0?h[0].value:void 0),this.model.createDataModel.set("app",r),this.children.selectApp=new o({label:e("App").t(),controlType:"SyntheticSelect",controlOptions:{modelAttribute:"app",model:this.model.createDataModel,toggleClassName:"btn",items:h,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}}),this.children.descriptionField=new o({controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.model.createDataModel},label:e("New Description").t()}),this.children.clonePermissionsControl=new o({controlType:"SyntheticRadio",controlOptions:{modelAttribute:"clonePermissions",model:this.model.createDataModel,items:[{label:e("Private").t(),value:!1},{label:e("Clone").t(),value:!0}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0},label:e("Permissions").t()})},primaryButtonClicked:function(e){if(this.clonedDataModel&&this.children.flashMessages.unregister(this.clonedDataModel),this.model.createDataModel.set({},{validate:!0})){this.clonedDataModel=this.model.source.clone();var t=this.model.createDataModel.get("clonePermissions");this.clonedDataModel.id;this.clonedDataModel.unset("id"),this.clonedDataModel.entry.content.acceleration.set({enabled:!1}),this.clonedDataModel.entry.content.set({name:this.model.createDataModel.get("modelName"),displayName:this.model.createDataModel.get("displayName"),description:this.model.createDataModel.get("description")}),this.children.flashMessages.register(this.clonedDataModel),this.clonedDataModel.save({},{data:{app:this.model.createDataModel.get("app"),owner:this.model.application.get("owner")},success:function(e,a){if(t){var i=e;this.clonedDataModel.acl.save({},{data:this.model.source.entry.acl.toDataPayload(),success:function(e,t){this.saveSuccess(i)}.bind(this)})}else this.saveSuccess(e)}.bind(this)},this)}},saveSuccess:function(e){this.hide(),this.trigger("action:clonedDataModel",e.id)},render:function(){return this.$el.html(i.TEMPLATE),this.$(i.HEADER_TITLE_SELECTOR).html(e("Clone Data Model").t()),this.$(i.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(i.BODY_SELECTOR).append(i.FORM_HORIZONTAL_JUSTIFIED),this.$(i.BODY_FORM_SELECTOR).append(this.children.nameLabel.render().el),this.$(i.BODY_FORM_SELECTOR).append(this.children.titleField.render().el),this.$(i.BODY_FORM_SELECTOR).append(this.children.idField.render().el),this.$(i.BODY_FORM_SELECTOR).append(this.children.selectApp.render().el),this.$(i.BODY_FORM_SELECTOR).append(this.children.descriptionField.render().el),this.model.source.canChangePermissions()&&this.$(i.BODY_FORM_SELECTOR).append(this.children.clonePermissionsControl.render().el),this.$(i.FOOTER_SELECTOR).append(i.BUTTON_CANCEL),this.$(i.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+e("Clone").t()+"</a>"),this}})}.apply(t,i))||(e.exports=o)},"views/data_model_manager/components/DataModelRow":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/underscore"),e,a("util/splunkd_utils"),a("shim/splunk.util"),a("stubs/i18n"),a("uri/route"),a("views/Base"),a("views/shared/delegates/RowExpandCollapse"),a("views/shared/DropDownMenu"),a("views/data_model_manager/components/AccelerationInfo"),a("views/shared/datasetcontrols/accelerationinfo/dialogs/rebuild/Master"),a("models/Base"),a("models/services/datamodel/DataModel"),a("models/services/summarization/TStatsSummarization")],void 0===(o=function(e,t,a,i,o,l,n,s,d,r,c,h,p,m,u){return s.extend({tagName:"tr",moduleId:a.i,isExpanded:!1,confExpanded:!1,events:(g={},g["click td."+d.TOGGLE_CELL_CLASS+", td.col-accelerate"]="toggleCellClickHandler",g["click a.edit-permissions-btn"]=function(){this.trigger("action:editPermissions",this.model.dataModel.get("id"))},g["click a.rebuild-btn"]=function(){this.rebuildAcceleration()},g["click a.update-btn"]=function(){this.fetchAccelerationInfo()},g["click a.edit-acceleration-btn"]=function(){this.trigger("action:editAcceleration",this.model.dataModel.get("id"))},g["click a.clone-btn"]=function(){this.trigger("action:cloneDataModel",this.model.dataModel.get("id"))},g["click a.config-info-toggle"]=function(e){e.preventDefault(),this.confExpanded=!this.confExpanded,this.debouncedRender()},g),initialize:function(e){s.prototype.initialize.call(this,e),this.model.accelerationInfo=new p,this.model.accelerationInfo.on("change",this.debouncedRender,this),this.model.dataModel.entry.acl.on("change",(function(){this.debouncedRender()}),this),this.model.dataModel.entry.content.on("change",this.debouncedRender,this),this.model.dataModel.entry.content.acceleration.on("change",this.debouncedRender,this);var a,i=this.model.dataModel.getType()===m.DOCUMENT_TYPES.DATAMODEL,o=[],l=[],n=[];i?o.push({label:t("Edit Datasets").t(),value:"editDataModel"}):o.push({label:t("Edit Dataset").t(),value:"editDataModel"}),this.model.dataModel.isAccelerated()||!i||this.model.dataModel.getSourceGUID()&&0!==this.model.dataModel.getSourceGUID().length||l.push({label:t("Edit Title or Description").t(),value:"editDataModelTitle"}),this.model.dataModel.canChangePermissions()&&l.push({label:t("Edit Permissions").t(),value:"editPermissions"}),this.model.user.canAccelerateDataModel()&&l.push({label:t("Edit Acceleration").t(),value:"editAcceleration"}),this.model.settings.get("canCreateDataModel")&&i&&n.push({label:t("Clone").t(),value:"cloneDataModel"}),this.model.dataModel.canDelete()&&i&&n.push({label:t("Delete").t(),value:"deleteDataModel"}),a=[],o.length>0&&a.push(o),l.length>0&&a.push(l),n.length>0&&a.push(n),this.children.editDropDownMenu=new r({label:t("Edit").t(),items:a,dropdownClassName:"dropdown-menu-narrow",anchorClassName:"dropdown-toggle",className:"dropdown",popdownOptions:{attachDialogTo:"body"}}),this.children.editDropDownMenu.on("itemClicked",this.editDropDownMenuClickHandler,this)},editDropDownMenuClickHandler:function(e){"editDataModel"==e?this.trigger("action:"+e,{datamodel:this.model.dataModel,action:"Click on edit dataset"}):this.trigger("action:"+e,this.model.dataModel.get("id"))},toggleCellClickHandler:function(e){e.preventDefault(),this.isExpanded=!this.isExpanded,this.debouncedRender()},fetchAccelerationInfo:function(){this.model.tstatsSummarization&&this.model.tstatsSummarization.fetch()},rebuildAcceleration:function(){this.model.tstatsSummarization&&(this.children.rebuildDialog=new h({model:{tstatsSummarization:this.model.tstatsSummarization},onHiddenRemove:!0}),this.children.rebuildDialog.on("refreshRequested",this.fetchAccelerationInfo,this),this.children.rebuildDialog.render().appendTo(e("body")).show())},accelerateCheckboxClickHandler:function(){this.model.dataModel.entry.content.acceleration.get("enabled")?this.toggleCellClickHandler():this.trigger("action:openAccelerateDialog",this.model.dataModel.get("id"))},render:function(){var e,a,s,r=this.model.dataModel.entry.content,h=r.get("modelName"),p=r.acceleration.clone(),g=r.acceleration.get("enabled"),f=!g,v=this.model.dataModel.getDatasetDisplayType(),D=r.get("displayName"),b=r.objectSummary,M=this.model.dataModel.entry.acl.get("app"),w=this.model.dataModel.entry.acl.get("owner"),y=this.model.dataModel.entry.acl.get("sharing"),_=0,C=0,T=0,x="",E=i.getPermissionLabel(y,w);this.children.accelerationInfo&&this.children.accelerationInfo.detach(),this.model.dataModel.getType()===m.DOCUMENT_TYPES.DATAMODEL?(s=n.data_model_editor(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{model:this.model.dataModel.id}}),a=n.pivot(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{model:this.model.dataModel.id}}),e=r.get("description")):this.model.dataModel.getType()===m.DOCUMENT_TYPES.TABLE&&(s=n.table(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{t:this.model.dataModel.id}}),a=n.pivot(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{dataset:this.model.dataModel.entry.get("name"),type:"datamodel"}}),e=r.get("dataset.description")),b&&(_=b.get("Event-Based"),C=b.get("Transaction-Based"),T=b.get("Search-Based")),_>0&&(x+=o.sprintf(l.ungettext("1 Event","%s Events",_),_)),C>0&&(""!=x&&(x+=", "),x+=o.sprintf(l.ungettext("1 Transaction","%s Transactions",C),C)),T>0&&(""!=x&&(x+=", "),x+=o.sprintf(l.ungettext("1 Search Event","%s Search Events",T),T)),""==x&&(x="(None)");this.model.settings.get("canCreateDataModel");t.each(p.keys(),(function(e){var t=p.get(e);void 0!==t&&""!==t||p.set(e,"-")}));var S=this.compiledTemplate({modelName:h,displayName:D,description:e,displayType:v,editable:!0,canWrite:this.model.dataModel.canWrite(),canChangePerms:this.model.dataModel.canChangePermissions(),canCloneDataModel:this.model.settings.get("canCreateDataModel"),canAccelerate:this.model.dataModel.canAccelerate(),userCanAccelerate:this.model.user.canAccelerateDataModel()&&this.model.dataModel.canWrite(),app:M,owner:w,sharing:i.getSharingLabel(this.model.dataModel.entry.acl.get("sharing")),acceleration:p,accelerationEnabled:g,acceleratePending:f,accelerationInfo:this.model.accelerationInfo,pivotUrl:a,editUrl:s,isExpanded:this.isExpanded,confExpanded:this.confExpanded,objectsString:x,permissionString:E,sourceGUID:r.acceleration.get("source_guid"),toggleCellClass:d.TOGGLE_CELL_CLASS,expandedCellBody:d.EXPANDED_CELL_MARKUP,collapsedCellBody:d.COLLAPSED_CELL_MARKUP,rowIdAttribute:d.ROW_ID_ATTR,confLearnMoreLink:n.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.datamodels.conf"),sprintf:o.sprintf});if(this.$el.html(S),this.$el.attr(d.ROW_ID_ATTR,h),this.isExpanded){if(this.$el.addClass(d.EXPANDED_ROW_CLASS),!this.model.tstatsSummarization){var A="tstats:DM_"+M+"_"+this.model.dataModel.entry.content.get("modelName"),k=this.model.dataModel.id.replace("datamodel/model","admin/summarization"),O=k.substr(0,k.lastIndexOf("/")+1);k=O.concat(A),this.model.tstatsSummarization=new u({id:k}),r.acceleration.get("source_guid")&&this.model.tstatsSummarization.set("source_guid",r.acceleration.get("source_guid")),this.children.accelerationInfo=new c({model:this.model.tstatsSummarization})}this.model.tstatsSummarization.fetch(),this.$(".acceleration-info-placeholder").replaceWith(this.children.accelerationInfo.render().el)}else this.$el.removeClass(d.EXPANDED_ROW_CLASS);return this.$(".edit-dropdown-placeholder").replaceWith(this.children.editDropDownMenu.render().el),this},template:'                    <% if(isExpanded) { %>                        <td class="<%- toggleCellClass %>"><%= expandedCellBody %></td>                    <% } else { %>                        <td class="<%- toggleCellClass %>"><%= collapsedCellBody %></td>                    <% } %>                    <td class="col-title">                        <% if (canWrite && editable) { %>                            <a href="<%- editUrl %>" class="data-model-title"><%- displayName %></a>                        <% } else { %>                            <span class="data-model-title"><%- displayName %></span>                        <% } %>                        <% if(isExpanded) { %>                            <div class="expanded-info">                                <div><%- description %></div>                                <h5><%- _("MODEL").t() %></h5>                                <dl class="list-dotted">                                    <dt><%- _("Datasets").t() %></dt>                                    <dd><%- objectsString %>                                     <% if (canWrite && editable) { %>                                        <a class="edit-btn" href="<%- editUrl %>"><%- _("Edit").t() %></a>                                    <% } %>                                    </dd>                                    <dt><%- _("Permissions").t() %></dt>                                    <dd><%- permissionString %>                                    <% if (canChangePerms) { %>                                        <a class="edit-permissions-btn" href="#"><%- _("Edit").t() %></a>                                    <% } %>                                    </dd>                                 </dl>                                 <h5><%- _("ACCELERATION").t() %></h5>                                 <% if (canAccelerate) { %>                                     <% if (sourceGUID) { %>                                         <% if (userCanAccelerate) { %>                                            <a class="update-btn" href="#"><%- _("Update").t() %></a>                                         <% } %>                                         <div class="guid-info">                                             <%- _("Source GUID detected. The summary information displayed " +                                                   "will be that of the specified search head.").t() %>                                          </div>                                         <div class="acceleration-info-placeholder"></div>                                     <% } else if (accelerationEnabled) { %>                                         <% if (userCanAccelerate) { %>                                             <% if (!acceleratePending) { %>                                                <a class="rebuild-btn" href="#"><%- _("Rebuild").t() %></a>                                                <a class="update-btn" href="#"><%- _("Update").t() %></a>                                             <% } %>                                             <a class="edit-acceleration-btn" href="#"><%- _("Edit").t() %></a>                                         <% } %>                                         <% if (acceleratePending) { %>                                                <div>Status Not Implemented Yet</div>                                            <% } else { %>                                                <div class="acceleration-info-placeholder"></div>                                                <div class="config-info-toggle-container">                                                    <% if (confExpanded) { %>                                                        <a href="#" class="config-info-toggle"><i class="toggle icon-chevron-down"></i><span class="config-info-heading"><%- _("Configuration Settings").t() %></span></a>                                                        <div class=info-text><%- _("These settings can be changed by going to actions and selecting edit acceleration.").t() %>                                                            <a href="<%= confLearnMoreLink %>" target="_blank" rel="noopener noreferrer"><%- _("Learn More").t() %><i class="icon-external"></i></a>                                                        </div>                                                        <div class="config-info">                                                            <div><%- sprintf(_("allow_old_summaries = %s").t(), acceleration.get("allow_old_summaries")) %></div>                                                            <div><%- sprintf(_("allow_skew = %s").t(), acceleration.get("allow_skew")) %></div>                                                            <div><%- sprintf(_("backfill_time = %s").t(), acceleration.get("backfill_time")) %></div>                                                            <div><%- sprintf(_("cron_schedule = %s").t(), acceleration.get("cron_schedule")) %></div>                                                            <div><%- sprintf(_("earliest_time = %s").t(), acceleration.get("earliest_time")) %></div>                                                            <div><%- sprintf(_("hunk.compression_codec = %s").t(), acceleration.get("hunk.compression_codec")) %></div>                                                            <div><%- sprintf(_("hunk.dfs_block_size = %s").t(), acceleration.get("hunk.dfs_block_size")) %></div>                                                            <div><%- sprintf(_("hunk.file_format = %s").t(), acceleration.get("hunk.file_format")) %></div>                                                            <div><%- sprintf(_("manual_rebuilds = %s").t(), acceleration.get("manual_rebuilds")) %></div>                                                            <div><%- sprintf(_("max_concurrent = %s").t(), acceleration.get("max_concurrent")) %></div>                                                            <div><%- sprintf(_("max_time = %s").t(), acceleration.get("max_time")) %></div>                                                            <div><%- sprintf(_("poll_buckets_until_maxtime = %s").t(), acceleration.get("poll_buckets_until_maxtime")) %></div>                                                            <div><%- sprintf(_("schedule_priority = %s").t(), acceleration.get("schedule_priority")) %></div>                                                            <div><%- sprintf(_("workload_pool = %s").t(), acceleration.get("workload_pool")) %></div>                                                        </div>                                                    <% } else { %>                                                        <a href="#" class="config-info-toggle"><i class="toggle icon-chevron-right"></i><span class="config-info-heading"><%- _("Configuration Settings").t() %></span></a>                                                    <% }%>                                                </div>                                            <% } %>                                     <% } else { %>                                        <span><%- _("Model is not accelerated.").t() %></span>                                        <% if (userCanAccelerate) { %>                                            <a class="edit-acceleration-btn" href="#"><%- _("Add").t() %></a>                                        <% } %>                                     <% } %>                                 <% } else { %>                                    <%- _("You can only accelerate data models that:").t() %>                                    <ul>                                        <li><%- _("Are shared to other users.").t() %>                                        <li><%- _("Contain at least one event-based dataset or one search-based dataset that does not use reporting commands.").t() %>                                    </ul>                                 <% } %>                            </div>                        <% } %>                    </td>                    <td class="col-type">                        <%- displayType %>                    </td>                    <td class="col-accelerate">                        <i class="icon-lightning                                 <% if (accelerationEnabled || sourceGUID) { %>                                    icon-lightning-selected                                 <% } %>                            "></i>                    </td>                    <td class="col-actions">                        <% if (canWrite) { %>                            <span class="edit-dropdown-placeholder"></span>                        <% } else if (canCloneDataModel) { %>                            <a class="clone-btn" href="#"><%- _("Clone").t() %></a>                        <% } %>                        <a class="pivot-btn" href="<%- pivotUrl %>"><%- _("Pivot").t() %></a>                    </td>                    <td class="col-app">                        <span class="data-model-app"><%- app %></span>                    </td>                    <td class="col-owner">                        <span class="data-model-owner"><%- owner %></span>                    </td>                    <td class="col-sharing">                        <span class="data-model-sharing"><%- sharing %></span>                    </td>            '});var g}.apply(t,i))||(e.exports=o)},"views/data_model_manager/components/DataModelTable":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/underscore"),e,a("models/Base"),a("views/Base"),a("views/data_model_manager/components/DataModelRow"),a("views/shared/delegates/RowExpandCollapse"),a("views/shared/TableHead"),a("helpers/grid/RowIterator")],void 0===(o=function(e,t,a,i,o,l,n,s,d){return o.extend({moduleId:a.i,dataModelRows:[],initialize:function(e){o.prototype.initialize.call(this,e),this.collection.on("reset add remove",this.debouncedRender,this)},render:function(){var a=new d,i=this.compiledTemplate({}),o=e(i);return void 0!==this.children.head&&(e(this.children.head.el).remove(),this.children.head.remove()),this.children.head=new s({model:this.model.metadata,columns:[{label:t("i").t(),className:n.HEADER_CELL_CLASS,html:n.HEADER_CELL_MARKUP},{label:t("Title").t(),className:"col-title",sortKey:"displayName"},{label:t("Type").t(),className:"col-type",sortKey:"dataset.type"},{label:t("Accelerate").t(),className:"col-accelerate",html:'<i class="icon-lightning"></i>'},{label:t("Actions").t(),className:"col-actions"},{label:t("App").t(),className:"col-app",sortKey:"eai:acl.app,name"},{label:t("Owner").t(),className:"col-owner",sortKey:"eai:acl.owner,name"},{label:t("Sharing").t(),className:"col-sharing",sortKey:"eai:acl.sharing,name"}]}),t(this.dataModelRows).each((function(e){e.off(),e.detach()}),this),this.dataModelRows=[],a.eachRow(this.collection,(function(e,t,a,i){var n=new l({model:{dataModel:e,application:this.model.application,settings:this.model.settings,user:this.model.user},isExpanded:i,index:t,rowNumber:a});n.on("all",(function(){this.trigger.apply(this,arguments)}),this),this.dataModelRows.push(n),o.find(".data-model-table-body").append(n.render().el)}),this),o.find(".data-model-table-head-placeholder").replaceWith(this.children.head.render().el),this.$el.html(o),this},template:'            <table class="table table-chrome table-hover table-striped table-row-expanding">                <thead class="data-model-table-head-placeholder"></thead>                <tbody class="data-model-table-body"></tbody>            </table>        '})}.apply(t,i))||(e.exports=o)},"views/data_model_manager/components/TitleDescriptionDialog":function(e,t,a){var i,o;i=[a("require/underscore"),e,a("views/shared/Modal"),a("views/shared/controls/ControlGroup"),a("views/shared/FlashMessages")],void 0===(o=function(e,t,a,i,o){return a.extend({moduleId:t.i,events:Object.assign({},a.prototype.events,{"click .btn-primary":function(e){this.trigger("action:saveModel"),this.hide()}}),initialize:function(t){a.prototype.initialize.apply(this,arguments),this.children.flashMessage=new o({model:this.model.complete}),this.children.titleField=new i({controlType:"Text",controlOptions:{modelAttribute:"displayName",model:this.model.entry.content},label:e("Title").t()}),this.children.descriptionField=new i({controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.model.entry.content},label:e("Description").t()})},render:function(){return this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(e("Edit Title or Description").t()),this.$(a.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL),this.$(a.BODY_FORM_SELECTOR).append(this.children.titleField.render().el),this.$(a.BODY_FORM_SELECTOR).append(this.children.descriptionField.render().el),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_CANCEL),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_SAVE),this}})}.apply(t,i))||(e.exports=o)},"views/data_models/CreateDataModelDialog":function(e,t,a){var i,o;i=[a("require/underscore"),a("shim/splunk.util"),a("views/shared/dialogs/DialogBase"),a("views/shared/controls/ControlGroup"),a("views/shared/controls/TextControl"),a("models/datamodel/CreateDataModel"),a("models/services/datamodel/DataModel"),a("views/shared/FlashMessages"),a("views/shared/delegates/PairedTextControls"),a("util/datamodel/form_utils"),e],void 0===(o=function(e,t,a,i,o,l,n,s,d,r,c){return a.extend({moduleId:c.i,className:"modal fade modal-narrow create-data-model-dialog form form-horizontal",modelToControlGroupMap:{displayName:"textDisplayName"},initialize:function(t){a.prototype.initialize.call(this,t),this.settings.set("primaryButtonLabel",e("Create").t()),this.settings.set("cancelButtonLabel",e("Cancel").t()),this.settings.set("titleLabel",e("New Data Model").t());var c=this.model.application.get("app"),h=!1,p=[];this.collection.apps.each((function(e){e.entry.acl.get("can_write")&&(p.push({label:e.entry.content.get("label"),value:e.entry.get("name")}),e.entry.get("name")==c&&(h=!0))}),this),h||(c=p.length>0?p[0].value:void 0),this.model.createDataModel=new l({displayName:"",description:"",app:c}),this.textDisplayNameControl=new o({modelAttribute:"displayName",model:this.model.createDataModel}),this.textModelNameControl=new o({modelAttribute:"modelName",model:this.model.createDataModel}),this.children.textDisplayName=new i({label:e("Title").t(),controls:this.textDisplayNameControl}),this.children.textModelName=new i({label:e("ID").t(),tooltip:e("The ID is used as the filename on disk and used in the data model search command. Cannot be changed later.").t(),help:e("The data model ID can only contain letters, numbers, dashes, and underscores. Do not start the data model ID with a period.").t(),controls:this.textModelNameControl}),this.pairedTextControls=new d({sourceDelegate:this.textDisplayNameControl,destDelegate:this.textModelNameControl,transformFunction:r.normalizeForID}),this.children.selectApp=new i({label:e("App").t(),controlType:"SyntheticSelect",controlOptions:{modelAttribute:"app",model:this.model.createDataModel,toggleClassName:"btn",items:p,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}}),this.children.textAreaDescription=new i({label:e("Description").t(),controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.model.createDataModel,placeholder:e("optional").t()}}),this.model.newDataModel=new n,this.children.flashMessagesView=new s({model:[this.model.createDataModel,this.model.newDataModel]})},primaryButtonClicked:function(){if(a.prototype.primaryButtonClicked.apply(this,arguments),this.model.createDataModel.set({},{validate:!0})){this.model.newDataModel.entry.content.set({name:this.model.createDataModel.get("modelName"),displayName:this.model.createDataModel.get("displayName"),description:this.model.createDataModel.get("description")});var t=this.model.newDataModel.save({},{data:{app:this.model.createDataModel.get("app"),owner:this.model.application.get("owner")}});t&&t.done(e((function(){this.hide(),this.trigger("action:createdDataModel",this.model.newDataModel)})).bind(this))}},renderBody:function(t){var a=e(this.bodyTemplate).template({});t.html(a),t.find(".flash-messages-view-placeholder").append(this.children.flashMessagesView.render().el),t.find(".data-model-display-name-placeholder").append(this.children.textDisplayName.render().el),t.find(".data-model-model-name-placeholder").append(this.children.textModelName.render().el),t.find(".data-model-app-placeholder").append(this.children.selectApp.render().el),t.find(".data-model-description-placeholder").append(this.children.textAreaDescription.render().el)},bodyTemplate:'                    <div class="flash-messages-view-placeholder"></div>                    <div class="data-model-display-name-placeholder"></div>                    <div class="data-model-model-name-placeholder"></div>                    <div class="data-model-app-placeholder"></div>                    <div class="data-model-description-placeholder"></div>                '})}.apply(t,i))||(e.exports=o)},"views/data_models/FileUploadControl":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/underscore"),e,a("views/shared/controls/Control"),a("shim/splunk.util")],void 0===(o=function(e,t,a,i,o){return i.extend({moduleId:a.i,tagName:"form",className:"control control-upload",initialize:function(){var e={inputClassName:""};t.defaults(this.options,e),i.prototype.initialize.apply(this,arguments)},events:{"change input":function(e){this.$(".filename").text(e.currentTarget.value.split("\\").pop()),window.FileReader&&window.FileReader.prototype.readAsText?this.handleFileSelect(e):this.handleFileSelect_unsupportedBrowsers(e)},"focus .fileInput":function(e){this.$(".fileInputContainer").addClass("isFocused")},"focusout .fileInput":function(e){this.$(".fileInputContainer").removeClass("isFocused")}},disable:function(){this.$input.hide()},enable:function(){this.$input.show()},handleFileSelect_unsupportedBrowsers:function(t){var a=e("<iframe id='upload_iframe' name='upload_iframe' width='0' height='0' border='0' style='width:0; height:0; border:none; display:none'>"),i=e(t.target).closest("form");i.parent().append(a);var l=i[0],n=this;document.getElementById("upload_iframe").onload=function(){l.setAttribute("target","");var t=e("#upload_iframe").contents().find("body").html();n.setValue(t,!1)},l.setAttribute("target","upload_iframe");var s=o.make_url("manager/system/datamodel/upload");l.setAttribute("action",s),l.setAttribute("method","post"),l.setAttribute("enctype","multipart/form-data"),l.setAttribute("encoding","multipart/form-data"),l.submit()},handleFileSelect:function(e){var t=e.target.files;if(1==t.length){var a=t[0],i=new FileReader,o=this;i.onload=function(e){var t=i.result;o.setValue(t,!1)},i.readAsText(a)}},render:function(){if(!this.el.innerHTML){var e=t.template(this.template,{options:this.options,value:this._value||"",_:t,splunk_form_key:o.getFormKey()});this.$el.html(e),this.$input=this.$("input")}var a=this.options.additionalClassNames;return a&&this.$el.addClass(a),this},template:'          <label class="fileInputContainer">            <span class="filename uneditable-input"></span><span class="btn btn-file"><%-_("File...").t()%></span>            <input class="fileInput" type="file"                name="<%- options.modelAttribute || "" %>"                class="<%= options.inputClassName %>"                value="<%- value %>"                <% if(!options.enabled){ %>style="display:none"<%}%>>            <input type="hidden" name="splunk_form_key" value="<%=splunk_form_key%>">          </label>'})}.apply(t,i))||(e.exports=o)},"views/data_models/UploadDataModelDialog":function(e,t,a){var i,o;i=[a("require/underscore"),a("shim/splunk.util"),a("views/shared/dialogs/UploadDataModelDialogBase"),a("views/shared/controls/ControlGroup"),a("views/shared/controls/SyntheticCheckboxControl"),a("views/shared/controls/SyntheticSelectControl"),a("views/shared/controls/TextControl"),a("views/data_models/FileUploadControl"),a("views/shared/FlashMessages"),a("models/datamodel/UploadDataModel"),a("models/services/datamodel/DataModel"),a("util/datamodel/form_utils"),e],void 0===(o=function(e,t,a,i,o,l,n,s,d,r,c,h,p){return a.extend({moduleId:p.i,className:"modal fade modal-narrow create-data-model-dialog form form-horizontal",events:{"change #uploadedFile":function(e){this.handleFileSelect(e)}},modelToControlGroupMap:{displayName:"fileContents"},initialize:function(t){a.prototype.initialize.call(this,t),this.settings.set("primaryButtonLabel",e("Upload").t()),this.settings.set("cancelButtonLabel",e("Cancel").t()),this.settings.set("titleLabel",e("Upload New Data Model").t());var o=this.model.application.get("app"),l=!1,h=[];this.collection.apps.each((function(e){e.entry.acl.get("can_write")&&(h.push({label:e.entry.content.get("label"),value:e.entry.get("name")}),e.entry.get("name")==o&&(l=!0))}),this),l||(o=h.length>0?h[0].value:void 0),this.model.uploadDataModel=new r({fileContents:"",app:o}),this.fileNameControl=new s({modelAttribute:"fileContents",model:this.model.uploadDataModel}),this.textModelNameControl=new n({modelAttribute:"modelName",model:this.model.uploadDataModel}),this.children.fileName=new i({label:e("File").t(),controls:this.fileNameControl,controlOptions:{modelAttribute:"uploadedFile",model:this.model.uploadDataModel}}),this.model.uploadDataModel.on("change:fileContents",this.handleFileUploaded,this),this.children.textModelName=new i({label:e("ID").t(),tooltip:e("The ID is used as the filename on disk and used in the data model search command. Cannot be changed later.").t(),help:e("The data model ID can only contain letters, numbers, dashes, and underscores. Do not start the data model ID with a period.").t(),controls:this.textModelNameControl}),this.children.selectApp=new i({label:e("App").t(),controlType:"SyntheticSelect",controlOptions:{modelAttribute:"app",model:this.model.uploadDataModel,toggleClassName:"btn",items:h,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}}),this.model.newDataModel=new c,this.children.flashMessagesView=new d({model:[this.model.uploadDataModel,this.model.newDataModel]}),this.model.uploadDataModel.set("dashPerm","private")},handleFileUploaded:function(){this.model.uploadDataModel.clearErrors();var e,t=this.model.uploadDataModel.get("fileContents");try{(e=JSON.parse(t)).description=t;var a={entry:[]};a.entry.push({content:e}),this.model.newDataModel.parseFile(a);var i=h.normalizeForID(this.model.newDataModel.entry.content.get("displayName"));this.model.uploadDataModel.set("modelName",i)}catch(e){return void this.model.uploadDataModel.trigger("error",this.model.uploadDataModel,"File contains invalid json")}},primaryButtonClicked:function(){if(a.prototype.primaryButtonClicked.apply(this,arguments),this.model.uploadDataModel.set({},{validate:!0})){var t=this.model.uploadDataModel.get("dashPerm"),i=this.model.application.getPermissions(t);i.app=this.model.uploadDataModel.get("app"),this.model.newDataModel.entry.content.set("name",this.model.uploadDataModel.get("modelName")),this.model.newDataModel.entry.content.isCreating=!0;var o=this.model.newDataModel.save({},{data:i});o&&o.done(e((function(){this.hide(),this.model.newDataModel.entry.content.isCreating=!1,this.trigger("action:uploadedDataModel",this.model.newDataModel)})).bind(this))}},renderBody:function(t){var a=e(this.bodyTemplate).template({});t.html(a),t.find(".flash-messages-view-placeholder").append(this.children.flashMessagesView.render().el),t.find(".data-model-file-name-placeholder").append(this.children.fileName.render().el),t.find(".data-model-model-name-placeholder").append(this.children.textModelName.render().el),t.find(".data-model-app-placeholder").append(this.children.selectApp.render().el)},bodyTemplate:'                    <div class="flash-messages-view-placeholder"></div>                    <div class="data-model-file-name-placeholder"></div>                    <div class="data-model-model-name-placeholder"></div>                    <div class="data-model-app-placeholder"></div>                '})}.apply(t,i))||(e.exports=o)},"views/shared/datasetcontrols/accelerationinfo/dialogs/rebuild/Confirmation":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/underscore"),e,a("views/Base"),a("views/shared/Modal"),a("views/shared/FlashMessages"),a("util/format_numbers_utils"),a("shim/splunk.util")],void 0===(o=function(e,t,a,i,o,l,n,s){return i.extend({moduleId:a.i,initialize:function(){i.prototype.initialize.apply(this,arguments),this.children.flashMessage=new l({model:this.model.tstatsSummarization})},events:{"click .modal-btn-primary:not(.disabled)":function(e){this.submit(),e.preventDefault()}},submit:function(){this.$rebuildButton=this.$(".modal-btn-primary"),this.$rebuildButton.addClass("disabled");var t=this.model.tstatsSummarization.destroy();e.when(t).then(function(){this.trigger("closeModal")}.bind(this),function(){this.trigger("failedRebuild")}.bind(this))},render:function(){var a=this.model.tstatsSummarization.entry.content.get("summary.size"),i='<a href="#" class="btn btn-primary modal-btn-primary pull-right">'+t("Rebuild").t()+"</a>";return this.$el.html(o.TEMPLATE),this.$(o.HEADER_TITLE_SELECTOR).html(t("Rebuild Data Model Summary").t()),e(t.template(this.warningTemplate,{_:t,summarySizeString:n.bytesToFileSize(a),splunkUtils:s})).appendTo(this.$(o.BODY_SELECTOR)),this.$(o.FOOTER_SELECTOR).append(o.BUTTON_CANCEL),this.$(o.FOOTER_SELECTOR).append(i),this.children.flashMessage.render().prependTo(this.$(o.BODY_SELECTOR)),this},warningTemplate:'                <div class="alert alert-warning">                    <i class="icon-alert"></i>                    <%- splunkUtils.sprintf(_("If you carry out this rebuild operation,                     the Splunk software will delete the current acceleration summary (%s)                      for this data model and rebuild it.  If this data model has a large                      summary, this process can take a long time.").t(), summarySizeString) %>                     <div class="ask-confirmation"><%- _("Do you want to proceed and rebuild the summary for this datamodel anyway?").t() %></div>                </div>            '})}.apply(t,i))||(e.exports=o)},"views/shared/datasetcontrols/accelerationinfo/dialogs/rebuild/Failure":function(e,t,a){var i,o;i=[a("shim/jquery"),a("require/underscore"),e,a("views/Base"),a("views/shared/Modal")],void 0===(o=function(e,t,a,i,o){return i.extend({moduleId:a.i,initialize:function(){i.prototype.initialize.apply(this,arguments)},events:{"click .modal-btn-primary":function(){this.trigger("closeModal")}},focus:function(){this.$(".modal-btn-primary").focus()},render:function(){return this.$el.html(o.TEMPLATE),this.$(o.HEADER_TITLE_SELECTOR).html(t("Rebuild Failed").t()),this.$(o.BODY_SELECTOR).html(t("There was an error rebuilding the data model.  Please close this dialog and try again.").t()),this.$(o.FOOTER_SELECTOR).append(o.BUTTON_CLOSE),this}})}.apply(t,i))||(e.exports=o)},"views/shared/datasetcontrols/accelerationinfo/dialogs/rebuild/Master":function(e,t,a){var i,o;i=[a("require/underscore"),e,a("views/shared/MultiStepModal"),a("views/shared/datasetcontrols/accelerationinfo/dialogs/rebuild/Confirmation"),a("views/shared/datasetcontrols/accelerationinfo/dialogs/rebuild/Failure")],void 0===(o=function(e,t,a,i,o){return a.extend({moduleId:t.i,initialize:function(){a.prototype.initialize.apply(this,arguments),this.children.confirmation=new i({model:{tstatsSummarization:this.model.tstatsSummarization}}),this.children.failure=new o,this.children.confirmation.on("closeModal",(function(){this.trigger("refreshRequested"),this.remove()}),this),this.children.confirmation.on("failedRebuild",(function(){this.stepViewStack.setSelectedView(this.children.failure),this.children.failure.focus()}),this)},getStepViews:function(){return[this.children.confirmation,this.children.failure]}})}.apply(t,i))||(e.exports=o)},"views/shared/dialogs/UploadDataModelDialogBase":function(e,t,a){var i,o;i=[a("require/underscore"),a("views/shared/dialogs/DialogBase"),e],void 0===(o=function(e,t,a){return t.extend({moduleId:a.i,_text:"",initialize:function(e){t.prototype.initialize.call(this,e)},setFocus:function(){this.$("input:file:enabled:visible:first").focus()}})}.apply(t,i))||(e.exports=o)}});