!function(e){function t(t){for(var n,o,s=t[0],i=t[1],u=t[2],c=0,p=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(d&&d(t);p.length;)p.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={44:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=n);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+({}[e]||e)+".js"}(e);var i=new Error;l=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+l+")",i.name="ChunkLoadError",i.type=n,i.request=l,a[1](i)}r[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=i;l.push([2495,0]),a()}({2495:function(e,t,a){var n,r;a.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,a,n="",r=0,l=arguments.length;r<l;r++)(a=(t=arguments[r].toString()).length)>1&&"/"==t.charAt(a-1)&&(t=t.substring(0,a-1)),"/"!=t.charAt(0)?n+="/"+t:n+=t;if("/"!=n){var o=n.split("/"),s=o[1];if("static"==s||"modules"==s){var i=n.substring(s.length+2,n.length);n="/"+s,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(n+=":"+e("APP_BUILD",0)),n+="/"+i}}var u=e("MRSPARKLE_ROOT_PATH","/"),d=e("LOCALE","en-US"),c="/"+d+n;return""==u||"/"==u?c:u+c}("/static/build/pages/enterprise")+"/"}(),n=[a("routers/GlobalBanner"),a("util/router_utils")],void 0===(r=function(e,t){new e;t.start_backbone_history()}.apply(t,n))||(e.exports=r)},2496:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".global-banner .editFormWrapper{background-color:#fff;-webkit-box-shadow:0 1px 1px #e1e6eb;box-shadow:0 1px 1px #e1e6eb;margin:0 auto 20px;position:relative;width:960px}.global-banner .editFormWrapper .formWrapper{padding:20px}.global-banner .editFormWrapper .formWrapper .banner-control-group{max-width:100%!important}.global-banner .editFormWrapper .formWrapper .banner-control-group .banner-bg-color{-webkit-box-pack:justify;-ms-flex-pack:justify;color:#fff;font-weight:700;justify-content:space-between;line-height:34px;margin:-8px 0 0 5px;text-align:center;width:175px;width:150px}.global-banner .editFormWrapper .jmFormActions{border-top:1px solid #e1e6eb;height:32px;padding:20px;text-align:right}.global-banner .editFormWrapper .jmFormActions>*{min-width:100px}",""])},"routers/GlobalBanner":function(e,t,a){var n,r;n=[a("shim/jquery"),a("require/underscore"),a("shim/splunk.util"),a("routers/Base"),a("models/services/data/ui/GlobalBanner"),a("views/global_banner/ReactAdapterMaster"),a("util/url_parser")],void 0===(r=function(e,t,a,n,r,l,o){return n.extend({initialize:function(e){n.prototype.initialize.apply(this,arguments),this.options=e||{},this.enableAppBar=!1;var t=this.getLocationHref(this.options);this.hasChanges=o.getHasChangesFlag(t),o.removeURLFlag(t,"has_changes")},getLocationHref:function(e){return e.location||location.href},reloadLocation:function(){location.reload()},handleSettingsSaved:function(){o.setURLFlag(this.getLocationHref(this.options),"has_changes",1),this.reloadLocation()},page:function(a,r,o){n.prototype.page.apply(this,arguments);var s=t("Customize global banner").t();this.setPageTitle(s),e.when(this.deferreds.pageViewRendered,this.deferreds.globalBanner).then(function(){this.masterView=new l({model:{globalBanner:this.model.globalBanner},onSettingsSaved:this.handleSettingsSaved.bind(this),hasChanges:this.hasChanges,pageTitle:s}),this.addPageViewEl(this.pageView.el),this.pageView.$(".main-section-body").append(this.masterView.render().el)}.bind(this))}})}.apply(t,n))||(e.exports=r)},"views/global_banner/GlobalBannerSettings":function(e,t,a){"use strict";a(2),Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(15)),r=S(a(16)),l=S(a(17)),o=S(a(20)),s=S(a(21)),i=a(0),u=S(i),d=S(a(4)),c=S(a(261)),p=a(3),f=S(a(23)),g=S(a(32)),b=S(a(27)),m=S(a(38)),h=S(a(19)),v=S(a(34)),y=S(a(127)),_=S(a("util/global_banner/styles")),k=S(a("shim/splunk.util")),w=S(a(26)),x=a("util/hash_utils"),E=a("util/theme_utils"),B=a("util/test_support");function S(e){return e&&e.__esModule?e:{default:e}}a("views/global_banner/GlobalBannerSettings.pcss");var C=function(t){function a(e){(0,r.default)(this,a);var t=(0,o.default)(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));P.call(t);var n=e.options.hasChanges;return t.state={messages:[],isValidHyperlink:!0,successModalOpen:n},t}return(0,s.default)(a,t),(0,l.default)(a,[{key:"componentDidMount",value:function(){c.default.mark("Global banner view - First meaningful paint",{timeout:0})}},{key:"render",value:function(){var t=this,a=this.props.options.pageTitle,r=this.getBannerProp("global_banner.visible"),l=this.getBannerProp("global_banner.hyperlink"),o=this.getBannerProp("global_banner.hyperlink_text"),s=this.getBannerProp("global_banner.message"),i=this.getBannerProp("global_banner.background_color"),d=(0,p._)("Sample banner notification text. Please replace with your own message."),c=(0,p._)("The global banner allows admins to configure and communicate a single persistent banner message at the top of every Splunk Web page to all users."),k=(0,p._)("Links must start with http:// or https://. Links are appended to the end of the message."),S=this.state,C=S.messages,P=S.isValidHyperlink,O=C.map((function(e){return u.default.createElement(w.default,{key:(0,x.hashString)(e.msg),type:e.type},e.msg)}));return u.default.createElement(E.SplunkThemeProvider,(0,E.getCurrentTheme)(),u.default.createElement("div",(0,n.default)({className:"global-banner"},(0,B.createTestHook)(e.i)),u.default.createElement("div",{className:"section-padded section-header"},u.default.createElement("h1",{className:"section-title"},a),u.default.createElement("div",{className:"breadcrumb"},u.default.createElement(b.default,{to:"systemsettings"},(0,p._)("Server settings"))," Â» "+a)),u.default.createElement("div",{className:"editFormWrapper"},u.default.createElement("div",{className:"formWrapper"},u.default.createElement("div",{className:"page-header"},u.default.createElement("p",null,c)),O,u.default.createElement(f.default,{"data-test-name":"visibility-control-group",className:"banner-control-group",id:"visible-label",label:(0,p._)("Banner Visibility")},u.default.createElement(m.default,{key:"banner-visible",value:r,selected:r,onClick:function(e,a){var n=a.value;t.setBannerProp("global_banner.visible",!n)},appearance:"toggle",labelledBy:"visible-label"},r?(0,p._)("On"):(0,p._)("Off"))),u.default.createElement(f.default,{"data-test-name":"background-color-control-group",className:"banner-control-group",label:(0,p._)("Background Color")},u.default.createElement(y.default,{defaultValue:i,onChange:function(e,a){var n=a.value;t.setBannerProp("global_banner.background_color",n)}},u.default.createElement(y.default.Option,{value:"blue"},u.default.createElement("div",{className:"banner-bg-color",style:{backgroundColor:_.default.blue.bg,color:_.default.blue.text}},(0,p._)("Blue"))),u.default.createElement(y.default.Option,{value:"green"},u.default.createElement("div",{className:"banner-bg-color",style:{backgroundColor:_.default.green.bg,color:_.default.green.text}},(0,p._)("Green"))),u.default.createElement(y.default.Option,{value:"yellow"},u.default.createElement("div",{className:"banner-bg-color",style:{backgroundColor:_.default.yellow.bg,color:_.default.yellow.text}},(0,p._)("Yellow"))),u.default.createElement(y.default.Option,{value:"orange"},u.default.createElement("div",{className:"banner-bg-color",style:{backgroundColor:_.default.orange.bg,color:_.default.orange.text}},(0,p._)("Orange"))),u.default.createElement(y.default.Option,{value:"red"},u.default.createElement("div",{className:"banner-bg-color",style:{backgroundColor:_.default.red.bg,color:_.default.red.text}},(0,p._)("Red"))))),u.default.createElement(f.default,{"data-test-name":"message-control-group",className:"banner-control-group",label:(0,p._)("Message"),help:(0,p._)("Banner text is limited to one line, text is truncated afterward.")},u.default.createElement(g.default,{key:"banner-message","data-test-name":"message-input",placeholder:d,canClear:!0,defaultValue:s===d?void 0:s,onChange:function(e,a){var n=a.value;t.setBannerProp("global_banner.message",n)}})),u.default.createElement(f.default,{"data-test-name":"hyperlink-control-group",className:"banner-control-group",label:(0,p._)("Hyperlink"),help:k,error:!P},u.default.createElement(g.default,{key:"banner-hyperlink","data-test-name":"hyperlink-input",canClear:!0,defaultValue:l,onChange:function(e,a){var n=a.value;t.setState({isValidHyperlink:!0}),t.setBannerProp("global_banner.hyperlink",n)},error:!P,onBlur:this.updateHyperlinkErrorState})),u.default.createElement(f.default,{"data-test-name":"hyperlink-text-control-group",className:"banner-control-group",label:(0,p._)("Hyperlink Text")},u.default.createElement(g.default,{key:"banner-hyperlink-text","data-test-name":"hyperlink-text-input",canClear:!0,defaultValue:o,onChange:function(e,a){var n=a.value;t.setBannerProp("global_banner.hyperlink_text",n)}}))),u.default.createElement("div",{className:"jmFormActions"},u.default.createElement(h.default,{"data-test-name":"cancel-button",to:"systemsettings",label:(0,p._)("Cancel"),appearance:"secondary"}),u.default.createElement(h.default,{"data-test-name":"save-button",href:"",label:(0,p._)("Save"),appearance:"primary",onClick:this.handleSave}))),u.default.createElement(v.default,{"data-test-name":"success-modal",onRequestClose:function(){return t.setState({successModalOpen:!1})},open:this.state.successModalOpen},u.default.createElement(v.default.Header,{title:(0,p._)("Changes Saved"),onRequestClose:function(){return t.setState({successModalOpen:!1})}}),u.default.createElement(v.default.Body,null,(0,p._)("Successfully updated settings.")),u.default.createElement(v.default.Footer,null,u.default.createElement(h.default,{appearance:"primary",onClick:function(){return t.setState({successModalOpen:!1})},label:(0,p._)("Ok")})))))}}]),a}(i.Component),P=function(){var e=this;this.getBannerProp=function(t){return e.props.model.globalBanner.entry.content.get(t)},this.setBannerProp=function(t,a){e.props.model.globalBanner.entry.content.set(t,a),e.forceUpdate()},this.handleSave=function(){var t=e.props.options.onSettingsSaved,a=e.getBannerProp("global_banner.visible"),n=e.getBannerProp("global_banner.message"),r=e.getBannerProp("global_banner.background_color"),l=e.getBannerProp("global_banner.hyperlink"),o=e.getBannerProp("global_banner.hyperlink_text"),s={visible:!1,message:(0,p._)("Sample banner notification text. Please replace with your own message."),backgroundColor:"blue",hyperlink:"",hyperlinkText:""},i={"global_banner.visible":void 0!==a?a:s.visible,"global_banner.message":n||s.message,"global_banner.background_color":r||s.backgroundColor,"global_banner.hyperlink":l||s.hyperlink,"global_banner.hyperlink_text":o||s.hyperlinkText};e.props.model.globalBanner.validate()?e.props.model.globalBanner.save({},{patch:!0,data:i,success:function(){k.default.trackEvent({type:"globalBanner.interact",data:{action:"save",visible:i["global_banner.visible"],backgroundColor:i["global_banner.background_color"],messageLength:i["global_banner.message"].length,hyperlinkLength:i["global_banner.hyperlink"].length,hyperlinkTextLength:i["global_banner.hyperlink_text"].length}}),t()},error:function(t,a){if(a.responseJSON&&a.responseJSON.messages&&a.responseJSON.messages[0]){var n=a.responseJSON.messages[0].text;e.setState({messages:[{msg:(0,p._)(n),type:"error"}]})}k.default.trackEvent({type:"globalBanner.error",data:{status:a.status,responseText:a.responseText}})}}):e.setState({messages:[]})},this.updateHyperlinkErrorState=function(){var t=e.props.model.globalBanner.isValidHyperlink();e.setState({isValidHyperlink:t})}};C.propTypes={model:d.default.object.isRequired,options:d.default.object.isRequired},t.default=C,e.exports=t.default},"views/global_banner/GlobalBannerSettings.pcss":function(e,t,a){var n=a(2496);"string"==typeof n&&(n=[[e.i,n,""]]);var r={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};a(6)(n,r);n.locals&&(e.exports=n.locals)},"views/global_banner/ReactAdapterMaster":function(e,t,a){"use strict";a(2),Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(0)),r=s(a("views/ReactAdapterBase")),l=s(a("dashboard/components/shared/BackboneProvider")),o=s(a("views/global_banner/GlobalBannerSettings"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.extend({getComponent:function(){return n.default.createElement(l.default,{store:{}},n.default.createElement(o.default,this))}}),e.exports=t.default}});