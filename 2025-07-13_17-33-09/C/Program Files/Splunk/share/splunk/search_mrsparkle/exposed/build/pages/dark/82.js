(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{"util/jscharting_utils":function(e,t,i){var a,n;a=[i("require/underscore"),i("helpers/user_agent"),i("models/config"),i("splunk/palettes/ColorCodes"),i("util/console"),i("util/theme_utils"),i("shim/splunk.util"),i("stubs/i18n")],void 0===(n=function(e,t,i,a,n,s,r,l){var o,h=function(e){return parseInt(e,10)||1/0},c=/^[^_]|^_time/,u=h(r.getConfigValue("JSCHART_SERIES_LIMIT",100)),d=null!==(o=r.getConfigValue("JSCHART_TRUNCATION_LIMIT",5e4))?h(o):t.isFirefox()?h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_FIREFOX",5e4)):t.isSafari()?h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_SAFARI",5e4)):t.isIE11()?h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_IE11",5e4)):h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_CHROME",5e4)),g=function(t){var i=e.isString(t)?t:t.name;return c.test(i)};return{getCustomDisplayProperties:function(e,t){var i={};return(t=t||{}).JSCHART_TEST_MODE&&(i.testMode=!0),e.hasField("_tc")&&(i.fieldHideList=["percent"]),i},preprocessChartData:function(t,i){if(0===t.columns.length||0===t.columns[0].length)return t;if((i.chart||"column")in{pie:!0,scatter:!0,radialGauge:!0,fillerGauge:!0,markerGauge:!0})return t;if(t.fields.length>=u){var a,n=e(t.fields).map((function(t){return e.isString(t)?t:t.name})),s=e(n).indexOf("_span");s>-1&&s>=u&&(a=t.columns[s]),t={columns:t.columns.slice(0,u),fields:t.fields.slice(0,u)},a&&(t.columns.push(a),t.fields.push("_span"))}var r=parseInt(i["chart.resultTruncationLimit"],10)||parseInt(i.resultTruncationLimit,10),l=r>0?r:d,o=e(t.fields).filter(g).length-1,h=t.columns[0].length,c=Math.floor(l/o);return h>c?function(t,i){var a={fields:t.fields,columns:[]};return e(t.columns).each((function(e,t){a.columns[t]=e.slice(0,i)})),a}(t,c):t},prepareChartingLibrary:function(e,t){t=t||{},e.setLoggingConsole(n),"dark"===s.getCurrentTheme().colorScheme&&e.setTheme("dark"),e.setColorPalette(a.CATEGORICAL),e.setTimezone(t.SERVER_ZONEINFO||i.get("SERVER_ZONEINFO")),e.useSplunkI18nLibrary(l)},getSeriesLimit:function(){return u},setSeriesLimit:function(e){u=e},getTruncationLimit:function(){return d},setTruncationLimit:function(e){d=e}}}.apply(t,a))||(e.exports=n)},"views/shared/jschart/Master":function(e,t,i){var a,n;a=[i("shim/jquery"),i("require/underscore"),e,i("models/config"),i("views/shared/viz/Base"),i("util/jscharting_utils"),i("util/general_utils"),i("shim/splunk.util"),i("shim/splunk.legend"),i("uri/route"),i(663)],void 0===(n=function(e,t,i,a,n,s,r,l,o,h,c){return t("Invalid timestamp").t(),t("Reset").t(),t("Reset Zoom").t(),t("Pan Right").t(),t("Pan Left").t(),t("No Results").t(),t("Invalid Data").t(),t("Numeric Data Required").t(),t("Invalid data: second column must be numeric for a pie chart").t(),s.prepareChartingLibrary(c),n.extend({VIZ_PROPERTY_PREFIX_REGEX:/^display\.visualizations\.charting\./,className:"chart",moduleId:i.i,initialize:function(i){n.prototype.initialize.apply(this,arguments),this.options=i||{},this._selectedRange=null,this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%"),this.$chart=e("<div></div>"),this.$inlineMessage=e("<div></div>").css("text-align","center").addClass(this.options.messageContainerClass||""),this.computeDisplayProperties(),this.listenTo(this.getPrimaryDataSource(),"destroy",this.empty),this.onExternalPaletteChange=t(this.onExternalPaletteChange).bind(this),this.legendId=(this.options.parentCid||"")+this.cid,o.register(this.legendId),o.addEventListener("labelIndexMapChanged",this.onExternalPaletteChange)},empty:function(){return this.destroyChart(),this.$chart.empty(),this.$inlineMessage.empty(),this},remove:function(){return this.removed=!0,this.destroyChart(),o.unregister(this.legendId),o.removeEventListener("labelIndexMapChanged",this.onExternalPaletteChange),n.prototype.remove.apply(this,arguments)},render:function(){return this.$chart.appendTo(this.el),this.$inlineMessage.appendTo(this.el),n.prototype.render.apply(this,arguments)},onConfigChange:function(e){if(t(e).chain().keys().any((function(e){return 0===e.indexOf("display.visualizations.charting.")})).value()){this.computeDisplayProperties();var i=["display.visualizations.charting.chart","display.visualizations.charting.chart.resultTruncationLimit","display.visualizations.charting.resultTruncationLimit","display.visualizations.charting.axisY2.enabled","display.visualizations.charting.chart.overlayFields","display.visualizations.charting.chart.stackMode"];t(e).any((function(e,a){return t(i).contains(a)}))?this.invalidate("formatDataPass"):this.invalidate("updateViewPass")}},combineData:function(e){return t.extend({},e.primary,{annotation:e.annotation})},formatData:function(e){if(!e||!e.columns||0===e.columns.length)return c.extractChartReadyData({fields:[],columns:[]});var t=s.preprocessChartData(e,this.displayProperties);t.columns.length>0&&(t.columns.length<e.columns.length||t.columns[0].length<e.columns[0].length)&&(t.areTruncated=!0),e.annotation&&(t.annotations=this.formatAnnotationData(e.annotation));var i=c.extractChartReadyData(t);t.areTruncated&&(i.resultsAreTruncated=!0);try{window.__splunk__prepareChartCfgDownload&&window.__splunk__prepareChartCfgDownload(this.cid,JSON.stringify({data:e,props:this.displayProperties},null,2))}catch(e){}return i},formatAnnotationData:function(e){var i=[];if(e&&e.columns&&e.columns.length>0){var a=c.extractChartReadyData(e);if(a.hasField("_time")){var n=a.getSeriesAsTimestamps("_time"),s=a.getSeries("annotation_label"),r=a.getSeries("annotation_color"),l=a.getSeries("annotation_category");t.each(n,(function(e,t){i.push({time:e,label:s[t],color:r[t],category:l[t]})}),this)}}return i},provideScaleValues:function(e,i){if(e.seriesList&&e.seriesList.length>1){var a=e.getFieldData(),n=a.yFields;if(l.normalizeBoolean(i["display.visualizations.charting.axisY2.enabled"])){var s=l.stringToFieldList(i["display.visualizations.charting.chart.overlayFields"]),r=[];t.each(s,(function(i){var a=t.indexOf(e.fields,i);a>-1&&(r=r.concat(e.seriesList[a]))})),n=t.difference(a.yFields,s)}var o=[],h=[];if(t.each(n,(function(i){var a=t.indexOf(e.fields,i);a>-1&&(o=o.concat(e.seriesList[a]),h.push(t.max(e.getSeriesAsFloats(i))))})),"stacked"===i["display.visualizations.charting.chart.stackMode"]){var c=t.reduce(h,(function(e,t){return e+t}),0);o.push(c)}var u=[];return t.each(a.xFields,(function(i){var a=t.indexOf(e.fields,i);a>-1&&(u=u.concat(e.seriesList[a]))})),{xAxis:u,yAxis:o,overlayAxis:r}}},updateView:function(i,n,r){var l=r();if(!t.isUndefined(i.seriesList)){c.setTimezone(a.get("SERVER_ZONEINFO")),this.$inlineMessage.empty();var h=this.getPrimaryDataSource().getFetchParams().count;if(i.resultsAreTruncated?this.renderResultsTruncatedMessage():i.seriesList.length>0&&h>0&&i.seriesList[0].length>=h&&this.renderMaxResultCountMessage(h),!t.isUndefined(this.getScale("xAxis")))var u={xCategories:this.getScale("xAxis").get("actualCategories")};if(!t.isUndefined(this.getScale("yAxis"))){var d=this.getScale("yAxis").get("actualMinimum"),g=this.getScale("yAxis").get("actualMaximum");if(d<g)var p={yAxisMin:d,yAxisMax:g}}if(!t.isUndefined(this.getScale("overlayAxis"))){var f=this.getScale("overlayAxis").get("actualMinimum"),m=this.getScale("overlayAxis").get("actualMaximum");if(f<m)var v={overlayAxisMin:f,overlayAxisMax:m}}var y=e.extend({},this.displayProperties,s.getCustomDisplayProperties(i,a.toJSON()),u,p,v);this.chart&&t.isEqual(y,this.chart.getCurrentDisplayProperties())?this.chart.off():(this.destroyChart(),this.chart=c.createChart(this.$chart[0],y)),this.updateChartContainerHeight();var C=this;this.chart.prepare(i,{});var x=this.chart.getFieldList();this.chart.requiresExternalColorPalette()&&(o.setLabels(this.legendId,x),this.externalPalette=this.getExternalColorPalette(),this.chart.setExternalColorPalette(this.externalPalette.fieldIndexMap,this.externalPalette.numLabels)),this.chart.on("pointClick",(function(e){var t=C.normalizeDrilldownEvent(e,"cell");C.trigger("drilldown",t)})),this.chart.on("legendClick",(function(e){var t;t=e.hasOwnProperty("name")&&e.hasOwnProperty("value")?C.normalizeDrilldownEvent(e,"row"):C.normalizeDrilldownEvent(e,"column"),C.trigger("drilldown",t)})),this.chart.on("chartRangeSelect",(function(e){var i=t(e).pick("startXIndex","endXIndex","startXValue","endXValue");t.isEqual(i,C._selectedRange)||(C._selectedRange=i,C.trigger("chartRangeSelect",e))})),this.chart.draw((function(e){C.model.config.set({currentChartFields:x},{transient:!0}),l()}))}},normalizeDrilldownEvent:function(e,i){return t.extend({type:i,originalEvent:e},t(e).pick("name","value","name2","value2","_span","rowContext","modifierKey"))},getExternalColorPalette:function(){this.synchronizingExternalPalette=!0;var e={};return t(this.chart.getFieldList()).each((function(t){e[t]=o.getLabelIndex(t)})),this.synchronizingExternalPalette=!1,{fieldIndexMap:e,numLabels:o.numLabels()}},onExternalPaletteChange:function(){if(!this.synchronizingExternalPalette){var e=this.externalPalette;this.externalPalette=this.getExternalColorPalette(),this.chart&&this.chart.requiresExternalColorPalette()&&!t.isEqual(e,this.externalPalette)&&this.invalidate("updateViewPass")}},destroyChart:function(){this.chart&&(this.chart.off(),this.chart.destroy(),delete this.chart)},reflow:function(){this.chart&&this.$el.height()>0&&(this.updateChartContainerHeight(),this.chart.resize())},updateChartContainerHeight:function(){var e=this.$inlineMessage.is(":empty")?0:this.$inlineMessage.outerHeight();this.$chart.height(this.$el.height()-e)},renderResultsTruncatedMessage:function(){var e=t("These results may be truncated. Your search generated too much data for the current visualization configuration.").t();e=this.addTruncationDocsLink(e),this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:e,level:"warning"}))},renderMaxResultCountMessage:function(e){var i=l.sprintf(t("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),e);i=this.addTruncationDocsLink(i),this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:i,level:"warning"}))},computeDisplayProperties:function(){this.displayProperties={};var e=this.model.config.toJSON();t.each(e,(function(e,t){this.VIZ_PROPERTY_PREFIX_REGEX.test(t)&&(this.displayProperties[t.replace(this.VIZ_PROPERTY_PREFIX_REGEX,"")]=e)}),this)},addTruncationDocsLink:function(e){var i=h.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.charting.datatruncation");return e+t(' <a href="<%- href %>" target="_blank" rel="noopener noreferrer"><span><%- text %></span><i class="icon-external icon-no-underline"></i></a>').template({href:i,text:t("Learn More").t()})},inlineMessageTemplate:'            <div class="alert alert-inline alert-<%= level %> alert-inline">                 <i class="icon-alert"></i>                 <%= message %>             </div>         '})}.apply(t,a))||(e.exports=n)}}]);