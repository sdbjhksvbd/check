(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{legend:function(t,e){Splunk.Legend={_numLabels:0,_targetMap:{},_targetList:[],_labelMap:{},_labelList:[],_isLabelMapValid:!0,_timeoutID:0,_listeners:{},numLabels:function(){return this._validateLabelMap(),this._numLabels},register:function(t){if(null==t)throw new Error("Parameter id must be non-null.");var e=this._getOwn(this._targetMap,t);e||(e={id:t,labels:null,sortIndex:+t.match(/\d+/g).join("")},this._targetMap[t]=e,this._targetList.push(e),this._targetList.sort((function(t,e){return t.sortIndex-e.sortIndex})))},unregister:function(t){var e=this._getOwn(this._targetMap,t);if(e){for(var i=this._targetList.length-1;i>=0;i--)if(this._targetList[i]===e){this._targetList.splice(i,1);break}delete this._targetMap[t],this._invalidateLabelMap()}},setLabels:function(t,e){var i=this._getOwn(this._targetMap,t);i&&(i.labels=e?e.concat():null,this._invalidateLabelMap())},getLabelIndex:function(t){this._validateLabelMap();var e=this._getOwn(this._labelMap,t);return null!=e?e:-1},getLabelAt:function(t){return this._validateLabelMap(),(t=Math.floor(t))>=0&&t<this._labelList.length?this._labelList[t]:null},addEventListener:function(t,e){var i=this._getOwn(this._listeners,t);i||(i=this._listeners[t]=[]);for(var a=i.length,n=0;n<a;n++)if(i[n]===e)return;i.push(e)},removeEventListener:function(t,e){var i=this._getOwn(this._listeners,t);if(i)for(var a=i.length,n=0;n<a;n++)if(i[n]===e)return void i.splice(n,1)},dispatchEvent:function(t){var e=this._getOwn(this._listeners,t);if(e){var i;e=e.concat();var a=[],n=arguments.length;for(i=1;i<n;i++)a.push(arguments[i]);var s,r=e.length;for(i=0;i<r;i++){s=e[i];try{s.apply(null,a)}catch(t){}}}},_invalidateLabelMap:function(){if(this._isLabelMapValid){this._isLabelMapValid=!1;var t=this;this._timeoutID=setTimeout((function(){t._validateLabelMap()}),0)}},_validateLabelMap:function(){this._isLabelMapValid||(this._updateLabelMap(),this._isLabelMapValid=!0,clearTimeout(this._timeoutID))},_updateLabelMap:function(){var t,e,i,a,n,s,r=this._labelList,l=!1,o={},h=[],u=this._targetList,c=u.length;for(n=0;n<c;n++)if(t=u[n].labels)for(e=t.length,s=0;s<e;s++)i=t[s],null==this._getOwn(o,i)&&(o[i]=h.length,h.push(i));if((a=h.length)!==r.length)l=!0;else for(n=0;n<a;n++)if(h[n]!==r[n]){l=!0;break}l&&(this._labelMap=o,this._labelList=h,this._numLabels=a,this.dispatchEvent("labelIndexMapChanged"))},_getOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}}},"shim/splunk.legend":function(t,e,i){var a,n;a=[i("shim/splunk"),i("legend")],void 0===(n=function(t){return t.Legend}.apply(e,a))||(t.exports=n)},"util/jscharting_utils":function(t,e,i){var a,n;a=[i("require/underscore"),i("helpers/user_agent"),i("models/config"),i("splunk/palettes/ColorCodes"),i("util/console"),i("util/theme_utils"),i("shim/splunk.util"),i("stubs/i18n")],void 0===(n=function(t,e,i,a,n,s,r,l){var o,h=function(t){return parseInt(t,10)||1/0},u=/^[^_]|^_time/,c=h(r.getConfigValue("JSCHART_SERIES_LIMIT",100)),d=null!==(o=r.getConfigValue("JSCHART_TRUNCATION_LIMIT",5e4))?h(o):e.isFirefox()?h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_FIREFOX",5e4)):e.isSafari()?h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_SAFARI",5e4)):e.isIE11()?h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_IE11",5e4)):h(r.getConfigValue("JSCHART_TRUNCATION_LIMIT_CHROME",5e4)),g=function(e){var i=t.isString(e)?e:e.name;return u.test(i)};return{getCustomDisplayProperties:function(t,e){var i={};return(e=e||{}).JSCHART_TEST_MODE&&(i.testMode=!0),t.hasField("_tc")&&(i.fieldHideList=["percent"]),i},preprocessChartData:function(e,i){if(0===e.columns.length||0===e.columns[0].length)return e;if((i.chart||"column")in{pie:!0,scatter:!0,radialGauge:!0,fillerGauge:!0,markerGauge:!0})return e;if(e.fields.length>=c){var a,n=t(e.fields).map((function(e){return t.isString(e)?e:e.name})),s=t(n).indexOf("_span");s>-1&&s>=c&&(a=e.columns[s]),e={columns:e.columns.slice(0,c),fields:e.fields.slice(0,c)},a&&(e.columns.push(a),e.fields.push("_span"))}var r=parseInt(i["chart.resultTruncationLimit"],10)||parseInt(i.resultTruncationLimit,10),l=r>0?r:d,o=t(e.fields).filter(g).length-1,h=e.columns[0].length,u=Math.floor(l/o);return h>u?function(e,i){var a={fields:e.fields,columns:[]};return t(e.columns).each((function(t,e){a.columns[e]=t.slice(0,i)})),a}(e,u):e},prepareChartingLibrary:function(t,e){e=e||{},t.setLoggingConsole(n),"dark"===s.getCurrentTheme().colorScheme&&t.setTheme("dark"),t.setColorPalette(a.CATEGORICAL),t.setTimezone(e.SERVER_ZONEINFO||i.get("SERVER_ZONEINFO")),t.useSplunkI18nLibrary(l)},getSeriesLimit:function(){return c},setSeriesLimit:function(t){c=t},getTruncationLimit:function(){return d},setTruncationLimit:function(t){d=t}}}.apply(e,a))||(t.exports=n)},"views/shared/jschart/Master":function(t,e,i){var a,n;a=[i("shim/jquery"),i("require/underscore"),t,i("models/config"),i("views/shared/viz/Base"),i("util/jscharting_utils"),i("util/general_utils"),i("shim/splunk.util"),i("shim/splunk.legend"),i("uri/route"),i(765)],void 0===(n=function(t,e,i,a,n,s,r,l,o,h,u){return e("Invalid timestamp").t(),e("Reset").t(),e("Reset Zoom").t(),e("Pan Right").t(),e("Pan Left").t(),e("No Results").t(),e("Invalid Data").t(),e("Numeric Data Required").t(),e("Invalid data: second column must be numeric for a pie chart").t(),s.prepareChartingLibrary(u),n.extend({VIZ_PROPERTY_PREFIX_REGEX:/^display\.visualizations\.charting\./,className:"chart",moduleId:i.i,initialize:function(i){n.prototype.initialize.apply(this,arguments),this.options=i||{},this._selectedRange=null,this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%"),this.$chart=t("<div></div>"),this.$inlineMessage=t("<div></div>").css("text-align","center").addClass(this.options.messageContainerClass||""),this.computeDisplayProperties(),this.listenTo(this.getPrimaryDataSource(),"destroy",this.empty),this.onExternalPaletteChange=e(this.onExternalPaletteChange).bind(this),this.legendId=(this.options.parentCid||"")+this.cid,o.register(this.legendId),o.addEventListener("labelIndexMapChanged",this.onExternalPaletteChange)},empty:function(){return this.destroyChart(),this.$chart.empty(),this.$inlineMessage.empty(),this},remove:function(){return this.removed=!0,this.destroyChart(),o.unregister(this.legendId),o.removeEventListener("labelIndexMapChanged",this.onExternalPaletteChange),n.prototype.remove.apply(this,arguments)},render:function(){return this.$chart.appendTo(this.el),this.$inlineMessage.appendTo(this.el),n.prototype.render.apply(this,arguments)},onConfigChange:function(t){if(e(t).chain().keys().any((function(t){return 0===t.indexOf("display.visualizations.charting.")})).value()){this.computeDisplayProperties();var i=["display.visualizations.charting.chart","display.visualizations.charting.chart.resultTruncationLimit","display.visualizations.charting.resultTruncationLimit","display.visualizations.charting.axisY2.enabled","display.visualizations.charting.chart.overlayFields","display.visualizations.charting.chart.stackMode"];e(t).any((function(t,a){return e(i).contains(a)}))?this.invalidate("formatDataPass"):this.invalidate("updateViewPass")}},combineData:function(t){return e.extend({},t.primary,{annotation:t.annotation})},formatData:function(t){if(!t||!t.columns||0===t.columns.length)return u.extractChartReadyData({fields:[],columns:[]});var e=s.preprocessChartData(t,this.displayProperties);e.columns.length>0&&(e.columns.length<t.columns.length||e.columns[0].length<t.columns[0].length)&&(e.areTruncated=!0),t.annotation&&(e.annotations=this.formatAnnotationData(t.annotation));var i=u.extractChartReadyData(e);e.areTruncated&&(i.resultsAreTruncated=!0);try{window.__splunk__prepareChartCfgDownload&&window.__splunk__prepareChartCfgDownload(this.cid,JSON.stringify({data:t,props:this.displayProperties},null,2))}catch(t){}return i},formatAnnotationData:function(t){var i=[];if(t&&t.columns&&t.columns.length>0){var a=u.extractChartReadyData(t);if(a.hasField("_time")){var n=a.getSeriesAsTimestamps("_time"),s=a.getSeries("annotation_label"),r=a.getSeries("annotation_color"),l=a.getSeries("annotation_category");e.each(n,(function(t,e){i.push({time:t,label:s[e],color:r[e],category:l[e]})}),this)}}return i},provideScaleValues:function(t,i){if(t.seriesList&&t.seriesList.length>1){var a=t.getFieldData(),n=a.yFields;if(l.normalizeBoolean(i["display.visualizations.charting.axisY2.enabled"])){var s=l.stringToFieldList(i["display.visualizations.charting.chart.overlayFields"]),r=[];e.each(s,(function(i){var a=e.indexOf(t.fields,i);a>-1&&(r=r.concat(t.seriesList[a]))})),n=e.difference(a.yFields,s)}var o=[],h=[];if(e.each(n,(function(i){var a=e.indexOf(t.fields,i);a>-1&&(o=o.concat(t.seriesList[a]),h.push(e.max(t.getSeriesAsFloats(i))))})),"stacked"===i["display.visualizations.charting.chart.stackMode"]){var u=e.reduce(h,(function(t,e){return t+e}),0);o.push(u)}var c=[];return e.each(a.xFields,(function(i){var a=e.indexOf(t.fields,i);a>-1&&(c=c.concat(t.seriesList[a]))})),{xAxis:c,yAxis:o,overlayAxis:r}}},updateView:function(i,n,r){var l=r();if(!e.isUndefined(i.seriesList)){u.setTimezone(a.get("SERVER_ZONEINFO")),this.$inlineMessage.empty();var h=this.getPrimaryDataSource().getFetchParams().count;if(i.resultsAreTruncated?this.renderResultsTruncatedMessage():i.seriesList.length>0&&h>0&&i.seriesList[0].length>=h&&this.renderMaxResultCountMessage(h),!e.isUndefined(this.getScale("xAxis")))var c={xCategories:this.getScale("xAxis").get("actualCategories")};if(!e.isUndefined(this.getScale("yAxis"))){var d=this.getScale("yAxis").get("actualMinimum"),g=this.getScale("yAxis").get("actualMaximum");if(d<g)var p={yAxisMin:d,yAxisMax:g}}if(!e.isUndefined(this.getScale("overlayAxis"))){var f=this.getScale("overlayAxis").get("actualMinimum"),m=this.getScale("overlayAxis").get("actualMaximum");if(f<m)var v={overlayAxisMin:f,overlayAxisMax:m}}var _=t.extend({},this.displayProperties,s.getCustomDisplayProperties(i,a.toJSON()),c,p,v);this.chart&&e.isEqual(_,this.chart.getCurrentDisplayProperties())?this.chart.off():(this.destroyChart(),this.chart=u.createChart(this.$chart[0],_)),this.updateChartContainerHeight();var y=this;this.chart.prepare(i,{});var x=this.chart.getFieldList();this.chart.requiresExternalColorPalette()&&(o.setLabels(this.legendId,x),this.externalPalette=this.getExternalColorPalette(),this.chart.setExternalColorPalette(this.externalPalette.fieldIndexMap,this.externalPalette.numLabels)),this.chart.on("pointClick",(function(t){var e=y.normalizeDrilldownEvent(t,"cell");y.trigger("drilldown",e)})),this.chart.on("legendClick",(function(t){var e;e=t.hasOwnProperty("name")&&t.hasOwnProperty("value")?y.normalizeDrilldownEvent(t,"row"):y.normalizeDrilldownEvent(t,"column"),y.trigger("drilldown",e)})),this.chart.on("chartRangeSelect",(function(t){var i=e(t).pick("startXIndex","endXIndex","startXValue","endXValue");e.isEqual(i,y._selectedRange)||(y._selectedRange=i,y.trigger("chartRangeSelect",t))})),this.chart.draw((function(t){y.model.config.set({currentChartFields:x},{transient:!0}),l()}))}},normalizeDrilldownEvent:function(t,i){return e.extend({type:i,originalEvent:t},e(t).pick("name","value","name2","value2","_span","rowContext","modifierKey"))},getExternalColorPalette:function(){this.synchronizingExternalPalette=!0;var t={};return e(this.chart.getFieldList()).each((function(e){t[e]=o.getLabelIndex(e)})),this.synchronizingExternalPalette=!1,{fieldIndexMap:t,numLabels:o.numLabels()}},onExternalPaletteChange:function(){if(!this.synchronizingExternalPalette){var t=this.externalPalette;this.externalPalette=this.getExternalColorPalette(),this.chart&&this.chart.requiresExternalColorPalette()&&!e.isEqual(t,this.externalPalette)&&this.invalidate("updateViewPass")}},destroyChart:function(){this.chart&&(this.chart.off(),this.chart.destroy(),delete this.chart)},reflow:function(){this.chart&&this.$el.height()>0&&(this.updateChartContainerHeight(),this.chart.resize())},updateChartContainerHeight:function(){var t=this.$inlineMessage.is(":empty")?0:this.$inlineMessage.outerHeight();this.$chart.height(this.$el.height()-t)},renderResultsTruncatedMessage:function(){var t=e("These results may be truncated. Your search generated too much data for the current visualization configuration.").t();t=this.addTruncationDocsLink(t),this.$inlineMessage.html(e(this.inlineMessageTemplate).template({message:t,level:"warning"}))},renderMaxResultCountMessage:function(t){var i=l.sprintf(e("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),t);i=this.addTruncationDocsLink(i),this.$inlineMessage.html(e(this.inlineMessageTemplate).template({message:i,level:"warning"}))},computeDisplayProperties:function(){this.displayProperties={};var t=this.model.config.toJSON();e.each(t,(function(t,e){this.VIZ_PROPERTY_PREFIX_REGEX.test(e)&&(this.displayProperties[e.replace(this.VIZ_PROPERTY_PREFIX_REGEX,"")]=t)}),this)},addTruncationDocsLink:function(t){var i=h.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.charting.datatruncation");return t+e(' <a href="<%- href %>" target="_blank" rel="noopener noreferrer"><span><%- text %></span><i class="icon-external icon-no-underline"></i></a>').template({href:i,text:e("Learn More").t()})},inlineMessageTemplate:'            <div class="alert alert-inline alert-<%= level %> alert-inline">                 <i class="icon-alert"></i>                 <%= message %>             </div>         '})}.apply(e,a))||(t.exports=n)}}]);