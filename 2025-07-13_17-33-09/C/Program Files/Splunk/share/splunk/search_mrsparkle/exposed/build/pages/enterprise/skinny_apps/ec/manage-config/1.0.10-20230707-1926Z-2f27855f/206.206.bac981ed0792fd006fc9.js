/*! For license information please see 206.206.bac981ed0792fd006fc9.js.LICENSE.txt */
(self.webpackChunkremote_manage_config_page=self.webpackChunkremote_manage_config_page||[]).push([[206],{53477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H});var r=n(4942),a=n(12650),o=n.n(a),s=n(96486),c=n(6472),l=n(95414),i=n.n(l),p=n(72361),u=n(2249);const m={LOOKUP_HOST:{LABEL:"Select target host *",DESCRIPTION:'Enter a host name then click "Query" to find available classes.',BUTTON_LABEL:"Query..."},AVAILABLE_OBJECTS:{LABEL:"Available objects *",DESCRIPTION:"Select an object to view and add available counters."},COUNTERS:{LABEL:"Counters",SOURCE_LABEL:"Available counters",TARGET_LABEL:"Selected counters"},INSTANCES:{LABEL:"Instances",SOURCE_LABEL:"Available instances",TARGET_LABEL:"Selected instances"},ADDITIONAL_HOSTS:{LABEL:"Collect the same set of metrics from additional hosts",DESCRIPTION:"Comma separated list"},POLLING_INTERVAL:{LABEL:"Polling interval *",DESCRIPTION:"Seconds"},INDEX:{LABEL:"Index",SELECT_LABEL:"Set the destination index for this source."},ERRORS:{["FETCH_AVAILABLE_COUNTERS_NOT_FOUND"]:e=>"Failed to fetch data: Unable to get the available counters for class '"+e+"'. WMI error.",["FETCH_AVAILABLE_INSTANCES_NOT_FOUND"]:e=>"Failed to fetch data: Unable to get the available instances for class '"+e+"'. WMI error"}};(0,u.localizeMessages)(m);var E=n(39839);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(66070);const g={CONTAINER:"Container",WAITSPINNER:"WaitSpinner",ERROR_MSG:"ErrorMessage"};(0,u.normalizeDataTestIds)({remoteAppName:O.KH,compName:"WinPerfmon",testIds:g});const f=g;var L,y,S,v=n(30168),I=n(97026),R=n.n(I),j=n(25947);const A=R().div(L||(L=(0,v.Z)(["\n    max-width: 960px;\n    padding: 30px 20px 20px 20px;\n    background-color: ",";\n    box-shadow: ",";\n    margin: 0 auto 20px;\n    display: flex;\n    flex-direction: column;\n"])),(0,j.pick)({enterprise:j.variables.backgroundColor,prisma:j.variables.backgroundColorPopup}),j.variables.overlayShadow),C=R().div(y||(y=(0,v.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    border-top: 1px solid #ccc;\n    padding: 20px;\n"]))),T=R().div(S||(S=(0,v.Z)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 40px;\n    margin-bottom: 40px;\n"])));var w=n(17563),h=n(97212),N=n(956);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const x="data/inputs/win-perfmon",D=(0,h.createRESTURL)("admin/win-perfmon-find-collection"),B=(0,h.createRESTURL)("data/indexes"),G={app:"",owner:""},U=async e=>{const t=(0,h.createRESTURL)(x)+"/"+e+"?"+(0,w.stringify)({output_mode:"json"}),n=await fetch(t,_({},N.pX)),r=await n.json();if(200===n.status){const{object:e="",counters:t=[],index:n="",instances:a=[],interval:o=null}=(0,s.get)(r,"entry[0].content",{}),{app:c="",owner:l=""}=(0,s.get)(r,"entry[0].acl",{});return G.app=c,G.owner=l,{name:(0,s.get)(r,"entry[0].name",""),availableObjects:{label:e,value:e},counters:{targetItemsList:t},instances:{targetItemsList:a},pollingInterval:o,index:{label:n,value:n}}}throw new Error((0,E.IG)(r))},F=async()=>{const e=D+"?"+(0,w.stringify)({output_mode:"json"}),t=await fetch(e,_({},N.pX)),n=await t.json();if(200===t.status)return(0,s.get)(n,"entry[0].content.objects",[]).map((e=>({label:e,value:e})));throw new Error((0,E.IG)(n))},k=async e=>{const t={object:e.value,output_mode:"json"},n=D+"?"+(0,w.stringify)(t),r=await fetch(n,_({},N.pX)),a=await r.json();if(200===r.status)return{counters:(0,s.get)(a,"entry[0].content.counters",[]),instances:(0,s.get)(a,"entry[0].content.instances",[])};throw new Error((0,E.IG)(a))},X=async()=>{const e=B+"?"+(0,w.stringify)(E.$t),t=await fetch(e,_({},N.pX)),n=await t.json();if(200===t.status)return[E.Pt,...(n.entry||[]).map((e=>({label:e.name,value:e.name})))];throw new Error((0,E.IG)(n))};var Z=n(8513),M=n(27626);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const H=(0,s.flowRight)([(0,p.ZL)(["Windows"]),(0,p.ao)(["cmp"]),(0,p.Bv)(["edit_modinput_perfmon"])])((e=>{let{entity:t}=e;const[n,l]=(0,a.useState)(!0),[p,u]=(0,a.useState)(!1),[b,g]=(0,a.useState)(void 0),[L,y]=(0,a.useState)({}),[S,v]=(0,a.useState)({}),[I,R]=(0,a.useState)([]),j=async(e,t)=>{let{refreshDataSources:n}=t;const r={value:e,label:e};R([]),u(!0);let a=[["counters",[]],["instances",[]]];try{const{counters:e,instances:t}=await k(r);a=[["counters",e],["instances",t]]}catch(e){R([e.message])}finally{n(a),u(!1)}};(0,a.useEffect)((()=>{t?(async()=>{let e,n={},a=[],o=[];try{[n,a,o]=await(async e=>Promise.all([U(e),F(),X()]))(t),e=await k(n.availableObjects)}catch(e){R([e.message])}finally{var s,c;g(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t},n)),y((e=>{let{availableObjects:t=[],indexes:n=[]}=e;return{type:"object",properties:{name:{type:"string"},availableObjects:t.length?{type:"object",enum:t,description:m.AVAILABLE_OBJECTS.DESCRIPTION}:{},counters:{type:"object"},instances:{type:"object"},pollingInterval:{type:"number",description:m.POLLING_INTERVAL.DESCRIPTION},index:n.length?{type:"object",enum:n}:{}},required:["availableObjects","pollingInterval"]}})({availableObjects:a,indexes:o})),v((e=>{let{countersDataSource:t,instancesDataSource:n,handleAvailableObjectsSelectChange:r}=e;return{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/name",label:"Name",rule:d({},(0,E.LD)()),options:{suiControlGroupProps:d({},(0,E.bY)())}},{type:"Select",scope:"#/properties/availableObjects",label:m.AVAILABLE_OBJECTS.LABEL,options:{suiControlGroupProps:d({},(0,E.bY)()),suiComponentProps:{filter:!1},customComponentProps:{onSelectValueChange:r}}},{type:"TransferList",scope:"#/properties/counters",label:m.COUNTERS.LABEL,options:{suiControlGroupProps:d({},(0,E.bY)()),customComponentProps:{source:{label:m.COUNTERS.SOURCE_LABEL},target:{label:m.COUNTERS.TARGET_LABEL},dataSource:t}}},{type:"TransferList",scope:"#/properties/instances",label:m.INSTANCES.LABEL,options:{suiControlGroupProps:d({},(0,E.bY)()),customComponentProps:{source:{label:m.INSTANCES.SOURCE_LABEL},target:{label:m.INSTANCES.TARGET_LABEL},dataSource:n}}},{type:"Control",label:m.POLLING_INTERVAL.LABEL,scope:"#/properties/pollingInterval",options:{suiControlGroupProps:d({},(0,E.bY)())}},{type:"Label",text:m.INDEX.LABEL},{type:"Select",scope:"#/properties/index",label:m.INDEX.SELECT_LABEL,options:{suiControlGroupProps:d({},(0,E.bY)()),suiComponentProps:{filter:!1}}}]}})({countersDataSource:(null==(s=e)?void 0:s.counters)||[],instancesDataSource:(null==(c=e)?void 0:c.instances)||[],handleAvailableObjectsSelectChange:j})),l(!1)}})():window.location.href=O._J[Z.iY.WinPerfmon]}),[]);const P=!(0,s.isEmpty)(L)&&!(0,s.isEmpty)(S);return o().createElement(o().Fragment,null,!n&&o().createElement(A,{"data-test-name":f.CONTAINER},I.length>0&&o().createElement(c.Errors,{errorMessages:I,onRequestRemove:()=>R([])}),P&&o().createElement(c.SUIFormRendererCompound,null,o().createElement("div",{style:{width:"100%",position:"relative"}},p&&o().createElement(M.Z,null),o().createElement("main",null,o().createElement(c.SUIFormRendererCompound.ErrorView,null),o().createElement(c.SUIFormRendererCompound.Form,{data:b,schema:L,uischema:S})),o().createElement("footer",null,o().createElement(C,null,o().createElement(c.SUIFormRendererCompound.ActionButtons,{onSubmit:async e=>{let{data:n,successCb:r,failureCb:a}=e;R([]),u(!0);try{await(async(e,t)=>{var n,r;const{app:a,owner:o}=G,s=(0,h.createRESTURL)(x,{owner:o,app:a}),c=(0,w.stringify)({counters:t.counters.targetItemsList.join(";"),index:(null==(n=t.index)?void 0:n.value)||"",instances:t.instances.targetItemsList.join(";"),object:(null==(r=t.availableObjects)?void 0:r.value)||"",output_mode:"json",interval:t.pollingInterval}),l=_(_({},N.pX),{},{method:"POST",body:c}),i=await fetch(s+"/"+e,_({},l)),p=await i.json();if(200!==i.status)throw new Error((0,E.IG)(p))})(t,n),r()}catch(e){a([e.message])}finally{u(!1)}}})))))),n&&o().createElement(T,{"data-test-name":f.WAITSPINNER},o().createElement(i(),{size:"medium"})))}))},72361:(e,t,n)=>{"use strict";n.d(t,{Bv:()=>d,Nj:()=>f,ZL:()=>g,ao:()=>O});var r,a=n(30168),o=n(12650),s=n.n(o),c=n(97026),l=n.n(c),i=n(95931),p=n(89217),u=n(68937),m=n(79674);const E=l().div(r||(r=(0,a.Z)(["\n    margin: 25px;\n"]))),b=e=>{let{msg:t="Error loading page"}=e;return s().createElement("h2",null,t)},d=function(e){return void 0===e&&(e=[]),t=>{const n=p.o.canReadPage(e);return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(b,{msg:m.X.FILTER_HOC.ERRORS.RBAC_FILTER}))}},O=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(i.N.getSplunkInstanceType());return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(b,{msg:m.X.FILTER_HOC.ERRORS.SPLUNK_ENV_FILTER}))}},g=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(i.N.getOS());return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(b,{msg:m.X.FILTER_HOC.ERRORS.OS_FILTER}))}},f=function(e){return void 0===e&&(e=[]),t=>{const n=e.includes(u.D.getExperienceType());return e=>n?s().createElement(t,e):s().createElement(E,null,s().createElement(b,{msg:m.X.FILTER_HOC.ERRORS.SPLUNK_EXPERIENCE_FILTER}))}}},27626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(12650),a=n.n(r),o=n(95414),s=n.n(o),c=n(2249),l=n(66070);const i={LOADING_MSG:"LoadingMessage"};(0,c.normalizeDataTestIds)({remoteAppName:l.KH,compName:"LoadingMessage",testIds:i});const p=i;var u,m,E,b=n(79674),d=n(30168),O=n(97026),g=n.n(O),f=n(47934),L=n.n(f);const y=g().div(u||(u=(0,d.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    background-color: rgba(255, 255, 255, 0.5);\n    z-index: 500;\n"]))),S=g().div(m||(m=(0,d.Z)(["\n    margin: auto;\n    display: flex;\n"]))),v=g()(L())(E||(E=(0,d.Z)(["\n    margin: auto;\n    font-size: 16px;\n    margin-bottom: 4px;\n    margin-left: 2px;\n"]))),I=()=>a().createElement(y,{"data-test-name":p.LOADING_MSG},a().createElement(S,null,a().createElement(s(),{size:"medium"}),a().createElement(v,null,b.X.COMMON.LOADING_MSG)))},46115:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=206.206.bac981ed0792fd006fc9.js.map