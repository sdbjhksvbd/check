!function(e){function t(t){for(var n,c,o=t[0],u=t[1],i=t[2],d=0,h=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&h.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(l&&l(t);h.length;)h.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={69:0},s=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,c.nc&&o.setAttribute("nonce",c.nc),o.src=function(e){return c.p+""+({}[e]||e)+".js"}(e);var u=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(i);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",u.name="ChunkLoadError",u.type=n,u.request=s,r[1](u)}a[e]=void 0}};var i=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var l=u;s.push([2585,0]),r()}({2585:function(e,t,r){var n,a;r.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,r,n="",a=0,s=arguments.length;a<s;a++)(r=(t=arguments[a].toString()).length)>1&&"/"==t.charAt(r-1)&&(t=t.substring(0,r-1)),"/"!=t.charAt(0)?n+="/"+t:n+=t;if("/"!=n){var c=n.split("/"),o=c[1];if("static"==o||"modules"==o){var u=n.substring(o.length+2,n.length);n="/"+o,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==c[2]&&(n+=":"+e("APP_BUILD",0)),n+="/"+u}}var i=e("MRSPARKLE_ROOT_PATH","/"),l=e("LOCALE","en-US"),d="/"+l+n;return""==i||"/"==i?d:i+d}("/static/build/pages/light")+"/"}(),n=[r("routers/Searchprefs"),r("util/router_utils")],void 0===(a=function(e,t){new e;t.start_backbone_history()}.apply(t,n))||(e.exports=a)},"models/shared/ConcurrencySettings":function(e,t,r){"use strict";r(2),Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("shim/jquery")),a=o(r("models/SplunkDBase")),s=o(r("require/backbone")),c=o(r("util/splunkd_utils"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend({url:c.default.fullpath("search/concurrency-settings"),sync:function(e,t,r){var a={data:{output_mode:"json"},processData:!0};return n.default.extend(!0,a,r),s.default.sync.call(null,e,t,a)},getMaxSearchesPerc:function(){return this.entry.content.has("max_searches_perc")?this.entry.content.get("max_searches_perc"):"unknown"},getAutoSummaryPerc:function(){return this.entry.content.has("auto_summary_perc")?this.entry.content.get("auto_summary_perc"):"unknown"}}),e.exports=t.default},"models/shared/SearchConcurrency":function(e,t,r){"use strict";r(2),Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("shim/jquery")),a=o(r("models/SplunkDBase")),s=o(r("require/backbone")),c=o(r("util/splunkd_utils"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend({url:c.default.fullpath("server/status/limits/search-concurrency"),sync:function(e,t,r){var a={data:{output_mode:"json"},processData:!0};return n.default.extend(!0,a,r),s.default.sync.call(null,e,t,a)},getMaxHistScheduledSearches:function(){return this.entry.content.has("max_hist_scheduled_searches")?this.entry.content.get("max_hist_scheduled_searches"):"unknown"},getMaxAutoSummarySearches:function(){return this.entry.content.has("max_auto_summary_searches")?this.entry.content.get("max_auto_summary_searches"):"unknown"}}),e.exports=t.default},"routers/Searchprefs":function(e,t,r){"use strict";r(2),Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(15)),a=y(r(16)),s=y(r(17)),c=y(r(20)),o=y(r(21)),u=y(r(0)),i=y(r("shim/jquery")),l=y(r("util/react_render")),d=r(3),h=y(r("routers/Base")),f=y(r("views/SearchPrefs")),g=y(r("models/shared/ConcurrencySettings")),m=y(r("models/shared/SearchConcurrency")),p=y(r("services/newIntegratedExperienceService"));function y(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,s.default)(t,[{key:"initialize",value:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=h.default.prototype.initialize).call.apply(e,[this].concat(r)),this.enableAppBar=!1,this.setPageTitle((0,d._)("Search Preferences")),this.fetchConcurrencyInfo()}},{key:"fetchConcurrencyInfo",value:function(){this.model.concurrencySettings=new g.default,this.deferreds.concurrencySettings=this.model.concurrencySettings.fetch(),this.model.searchConcurrency=new m.default,this.deferreds.searchConcurrency=this.model.searchConcurrency.fetch()}},{key:"renderComponent",value:function(e){(0,l.default)(u.default.createElement(f.default,e),document.getElementsByClassName("main-section-body")[0])}},{key:"page",value:function(){for(var e,t=this,r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];(e=h.default.prototype.page).call.apply(e,[this].concat(a)),i.default.when(this.deferreds.pageViewRendered,this.deferreds.userPref,this.deferreds.concurrencySettings,this.deferreds.searchConcurrency,this.deferreds.serverInfo).done((function(){t.addPageViewEl(t.pageView.el);var e={userPrefs:t.model.userPref,application:t.model.application,concurrencySettings:t.model.concurrencySettings,searchConcurrency:t.model.searchConcurrency,serverInfo:t.model.serverInfo,newSearchSettings:{}};t.model.serverInfo.isCloud()&&t.model.serverInfo.isConverged()?p.default.getSearchFeatureSettings().then((function(r){t.renderComponent((0,n.default)({},e,{newSearchSettings:r}))})):t.renderComponent(e)}))}}]),t}(h.default);t.default=S,e.exports=t.default},"views/SearchPrefs":function(e,t,r){"use strict";(function(n){r(2),Object.defineProperty(t,"__esModule",{value:!0});var a,s=N(r(73)),c=N(r(15)),o=N(r(16)),u=N(r(17)),i=N(r(20)),l=N(r(21)),d=r(3),h=r(0),f=N(h),g=N(r(4)),m=N(r(46)),p=r(31),y=r(39),S=r(28),v=N(r(324)),_=N(r(616)),E=N(r(19)),C=N(r(23)),x=N(r(45)),w=N(r(27)),b=N(r(26)),R=N(r(150)),k=N(r(35)),M=N(r(38)),T=N(r("shim/splunk.util")),P=N(r("uri/route")),L=r("services/newIntegratedExperienceService"),A=N(L);function N(e){return e&&e.__esModule?e:{default:e}}var O=function(e){function t(e,r){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.getButtonLabel=function(e){return e?(0,d._)("Saving..."):(0,d._)("Save")},a.validateValue=function(e,t){var r=e;return(null==r||""===r||r<t)&&(r=t),r},a.handleTimeRangeChange=function(e,t){var r=t.earliest,n=t.latest;a.setState({earliest:r,latest:n,timeRangeChanged:!0})},a.handleRelativeConcurrencyScheduledChange=function(e,t){var r=t.value,n=a.validateValue(r,1);a.setState({maxSearchesPerc:n,concurrencyChanged:!0})},a.handleRelativeConcurrencySummarizationChange=function(e,t){var r=t.value,n=a.validateValue(r,0);a.setState({autoSummaryPerc:n,concurrencyChanged:!0})},a.handleNewSearchExperienceChange=function(){a.setState((function(e){return(0,c.default)({},e,{newSearchExperienceToggleChanged:!0,newSearchExperienceToggle:!e.newSearchExperienceToggle})}))},a.fetchPost=function(e,t,r){return n((0,S.createRESTURL)(e),(0,c.default)({},y.defaultFetchInit,{method:"POST",body:m.default.encode(t)})).then((0,y.handleResponse)(200)).catch((0,y.handleError)(r))},a.fetchGet=function(e,t,r){return n((0,S.createRESTURL)(""+e+m.default.encode(t)),(0,c.default)({},y.defaultFetchInit,{method:"GET"})).then((0,y.handleResponse)(200)).catch((0,y.handleError)(r))},a.saveTimeRange=function(){var e={default_earliest_time:a.state.earliest,default_latest_time:a.state.latest,output_mode:"json"},t=(0,d._)("Unable to save default search time range.");a.fetchPost("data/user-prefs/general",e,t).then((function(){a.setState({isWorkingTimeRange:!1,errorMessageTimeRange:"",timeRangeChanged:!1})})).catch((function(e){a.setState({isWorkingTimeRange:!1,errorMessageTimeRange:(0,p.sprintf)("%s %s",t,e.message),timeRangeChanged:!1})}))},a.fetchEffectiveSearchConcurrency=function(){var e=(0,d._)("Unable to fetch effective search concurrency.");a.fetchGet("server/status/limits/search-concurrency?",{output_mode:"json"},e).then((function(e){a.setState({isWorkingConcurrency:!1,errorMessageConcurrencySettings:"",errorMessageSearchConcurrency:"",concurrencyChanged:!1,maxHistScheduledSearches:e.entry[0].content.max_hist_scheduled_searches,maxAutoSummarySearches:e.entry[0].content.max_auto_summary_searches})})).catch((function(t){a.setState({isWorkingConcurrency:!1,errorMessageConcurrencySettings:"",errorMessageSearchConcurrency:(0,p.sprintf)("%s %s",e,t.message),concurrencyChanged:!1})}))},a.saveRelativeConcurrency=function(){var e={max_searches_perc:a.state.maxSearchesPerc,auto_summary_perc:a.state.autoSummaryPerc,output_mode:"json"},t=(0,d._)("Unable to save search concurrency changes.");a.fetchPost("search/concurrency-settings/scheduler",e,t).then((function(){a.fetchEffectiveSearchConcurrency()})).catch((function(e){a.setState({isWorkingConcurrency:!1,errorMessageConcurrencySettings:(0,p.sprintf)("%s %s",t,e.message),errorMessageSearchConcurrency:"",concurrencyChanged:!1})}))},a.saveNewSearchExperienceToggle=function(){T.default.trackEvent({type:"searchPrefs.newSearchExperienceToggle",data:{action:"newSearchExperienceToggle",toggleState:a.state.newSearchExperienceToggle}});var e=(0,d._)("Unable to save the new search experience setting."),t=(0,s.default)({},L.NEW_SEARCH_USER_TOGGLE,a.state.newSearchExperienceToggle);a.newIntegratedExperienceService.updateSearchFeatureSettings(t).then((function(){a.setState({newSearchExperienceToggleChanged:!1,isWorkingNewSearchExperience:!1,errorMessageNewSearchExperience:""})})).catch((function(t){a.setState({newSearchExperienceToggleChanged:!0,isWorkingNewSearchExperience:!1,errorMessageNewSearchExperience:(0,p.sprintf)("%s %s",e,t.message)})}))},a.handleSave=function(){a.setState((function(e){return(0,c.default)({},e,{isWorkingTimeRange:e.timeRangeChanged,isWorkingConcurrency:e.concurrencyChanged,isWorkingNewSearchExperience:e.newSearchExperienceToggleChanged})})),a.state.timeRangeChanged&&a.saveTimeRange(),a.state.concurrencyChanged&&a.saveRelativeConcurrency(),a.state.newSearchExperienceToggleChanged&&a.saveNewSearchExperienceToggle()},a.newIntegratedExperienceService=e.newIntegratedExperienceService||A.default,a.state={earliest:e.userPrefs.entry.content.attributes.default_earliest_time,latest:e.userPrefs.entry.content.attributes.default_latest_time,parseEarliest:void 0,parseLatest:void 0,timeRangeChanged:!1,isWorkingTimeRange:!1,errorMessageTimeRange:a.getErrorMessageTimeRange(),maxSearchesPerc:e.concurrencySettings.getMaxSearchesPerc(),autoSummaryPerc:e.concurrencySettings.getAutoSummaryPerc(),concurrencyChanged:!1,isWorkingConcurrency:!1,errorMessageConcurrencySettings:a.getErrorMessageConcurrencySettings(),maxHistScheduledSearches:e.searchConcurrency.getMaxHistScheduledSearches(),maxAutoSummarySearches:e.searchConcurrency.getMaxAutoSummarySearches(),errorMessageSearchConcurrency:a.getErrorMessageSearchConcurrency(),isCloud:e.serverInfo.isCloud(),isConverged:e.serverInfo.isConverged(),newSearchExperienceToggleChanged:!1,newSearchExperienceToggle:e.newSearchSettings[L.NEW_SEARCH_USER_TOGGLE],newSearchExperienceAdminToggle:e.newSearchSettings[L.NEW_SEARCH_ADMIN_TOGGLE],errorMessageNewSearchExperience:"",isWorkingNewSearchExperience:!1},a}return(0,l.default)(t,e),(0,u.default)(t,[{key:"getErrorMessageTimeRange",value:function(){return this.props.userPrefs.entry.content.attributes.default_earliest_time&&this.props.userPrefs.entry.content.attributes.default_latest_time?"":(0,d._)("Trouble fetching default search time range.")}},{key:"getErrorMessageConcurrencySettings",value:function(){return"unknown"===this.props.concurrencySettings.getMaxSearchesPerc()||"unknown"===this.props.concurrencySettings.getAutoSummaryPerc()?(0,d._)("Trouble fetching relative search concurrency limits."):""}},{key:"getErrorMessageSearchConcurrency",value:function(){return"unknown"===this.props.searchConcurrency.getMaxHistScheduledSearches()||"unknown"===this.props.searchConcurrency.getMaxAutoSummarySearches()?(0,d._)("Trouble fetching effective search concurrency values."):""}},{key:"makeDocLink",value:function(e){return P.default.docHelp(this.props.application.get("root"),this.props.application.get("locale"),e)}},{key:"render",value:function(){var e=P.default.manager(this.props.application.get("root"),this.props.application.get("locale"),"system","systemsettings"),t=f.default.createElement("span",null,(0,d._)("This time range is used as the default time range for searches. "),f.default.createElement(w.default,{to:this.makeDocLink("learnmore.search.time_range_picker.global.default"),openInNewContext:!0},(0,d._)("Learn More"))),r=f.default.createElement("span",null,(0,d._)("The maximum number of searches the scheduler can run, as a percentage of the\n                    maximum number of concurrent searches. Default value is 50%. "),f.default.createElement(w.default,{to:this.makeDocLink("learnmore.relative.concurrency.scheduled.searches"),openInNewContext:!0},(0,d._)("Learn More"))),n=f.default.createElement("span",null,(0,d._)("The maximum number of concurrent searches to be allocated for auto summarization,\n                    as a percentage of the concurrent searches that the scheduler can run.\n                    Auto summary searches include: searches which generate the data for the Report\n                    Acceleration feature or for Data Model acceleration. Note: user scheduled searches\n                    take precedence over auto summary searches. Default value is 50%. "),f.default.createElement(w.default,{to:this.makeDocLink("learnmore.relative.concurrency.summarization.searches"),openInNewContext:!0},(0,d._)("Learn More"))),a=f.default.createElement("span",null,(0,d._)("This global setting surfaces the new SPL2-based Search Experience to all users in your environment.\n                 There might be additional steps you would need to take to configure this feature. "),f.default.createElement(w.default,{to:this.makeDocLink("learnmore.searchexperience.admin.setup"),openInNewContext:!0},(0,d._)("Learn More")));return f.default.createElement("div",{"data-test-name":"searchprefs",style:{paddingLeft:"20px",paddingRight:"20px"}},f.default.createElement(x.default,{level:1,"data-test-name":"searchprefs-heading"},(0,d._)("Search preferences")),f.default.createElement(k.default,{"data-test-name":"breadcrumb"},f.default.createElement(w.default,{to:e,"data-test-name":"breadcrumb-link"},(0,d._)("Server settings")),(0,d._)(" Â» Search preferences")),f.default.createElement("div",{"data-test-name":"searchprefs-content",style:{background:"white",width:"960px",margin:"20px auto",padding:"20px"}},this.state.errorMessageTimeRange&&f.default.createElement(b.default,{type:"error","data-test-name":"time-range-error"},this.state.errorMessageTimeRange),this.state.errorMessageConcurrencySettings&&f.default.createElement(b.default,{type:"error","data-test-name":"concurrency-settings-error"},this.state.errorMessageConcurrencySettings),this.state.errorMessageSearchConcurrency&&f.default.createElement(b.default,{type:"error","data-test-name":"search-concurrency-error"},this.state.errorMessageSearchConcurrency),this.state.errorMessageNewSearchExperience&&f.default.createElement(b.default,{type:"error","data-test-name":"new-search-experience-error"},this.state.errorMessageNewSearchExperience),f.default.createElement(C.default,{label:(0,d._)("Default search time range"),labelPosition:"top",help:t,controlsLayout:"none","data-test-name":"searchprefs-time-range-picker"},f.default.createElement(_.default,null,f.default.createElement(v.default,{onChange:this.handleTimeRangeChange,earliest:this.state.earliest,latest:this.state.latest,labelMaxChars:1/0,documentationURL:this.makeDocLink("learnmore.search.time_range_picker.global.default")}))),f.default.createElement("hr",null),f.default.createElement(C.default,{label:(0,d._)("Relative concurrency limit for scheduled searches"),labelPosition:"top",help:r,controlsLayout:"none","data-test-name":"relative-concurrency-scheduled-searches"},f.default.createElement(R.default,{value:this.state.maxSearchesPerc,max:100,min:1,roundTo:0,step:1,onChange:this.handleRelativeConcurrencyScheduledChange,inline:!0})),f.default.createElement(k.default,{"data-test-name":"effective-scheduled-searches"},(0,p.sprintf)((0,d._)("This results in an effective concurrency limit for scheduled searches of %s."),this.state.maxHistScheduledSearches)),f.default.createElement(C.default,{label:(0,d._)("Relative concurrency limit for summarization searches"),labelPosition:"top",help:n,controlsLayout:"none","data-test-name":"relative-concurrency-summarization-searches"},f.default.createElement(R.default,{value:this.state.autoSummaryPerc,max:100,min:0,roundTo:0,step:1,onChange:this.handleRelativeConcurrencySummarizationChange,inline:!0})),f.default.createElement(k.default,{"data-test-name":"effective-summary-searches"},(0,p.sprintf)((0,d._)("This results in an effective concurrency limit for summarization searches of %s."),this.state.maxAutoSummarySearches)),this.state.isCloud&&this.state.isConverged&&this.state.newSearchExperienceAdminToggle&&f.default.createElement(f.default.Fragment,null,f.default.createElement("hr",null),f.default.createElement(C.default,{label:(0,d._)("New Search Experience"),labelPosition:"top",help:a,controlsLayout:"none","data-test-name":"new-search-experience"},f.default.createElement(M.default,{onClick:this.handleNewSearchExperienceChange,selected:this.state.newSearchExperienceToggle,appearance:"toggle"}))),f.default.createElement("hr",null)," ",f.default.createElement(k.default,{"data-test-name":"searchprefs-non-warning",style:{textAlign:"left"}},(0,d._)("Saving changes to the default time range or concurrency\n                            limits does not trigger a restart.")),f.default.createElement("div",{"data-test-name":"searchprefs-buttons",style:{textAlign:"right"}},f.default.createElement(E.default,{appearance:"primary","data-test-name":"save-btn",disabled:this.state.isWorkingTimeRange||this.state.isWorkingConcurrency||this.state.isWorkingNewSearchExperience,label:this.getButtonLabel(this.state.isWorkingTimeRange||this.state.isWorkingConcurrency||this.state.isWorkingNewSearchExperience),onClick:this.handleSave}))))}}]),t}(h.Component);O.propTypes={userPrefs:g.default.shape({entry:g.default.shape({content:g.default.shape({attributes:g.default.shape({default_earliest_time:g.default.string.isRequired,default_latest_time:g.default.string.isRequired})})})}).isRequired,application:g.default.shape({get:g.default.func.isRequired}).isRequired,concurrencySettings:g.default.shape({getMaxSearchesPerc:g.default.func.isRequired,getAutoSummaryPerc:g.default.func.isRequired}).isRequired,searchConcurrency:g.default.shape({getMaxHistScheduledSearches:g.default.func.isRequired,getMaxAutoSummarySearches:g.default.func.isRequired}).isRequired,serverInfo:g.default.shape({isConverged:g.default.func.isRequired,isCloud:g.default.func.isRequired}).isRequired,newSearchSettings:g.default.shape((a={},(0,s.default)(a,L.NEW_SEARCH_USER_TOGGLE,g.default.bool),(0,s.default)(a,L.NEW_SEARCH_ADMIN_TOGGLE,g.default.bool),a)).isRequired},O.defaultProps={},t.default=O,e.exports=t.default}).call(this,r(37))}});