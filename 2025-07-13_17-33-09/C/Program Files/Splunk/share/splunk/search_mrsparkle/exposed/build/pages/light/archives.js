!function(e){function i(i){for(var n,r,a=i[0],l=i[1],c=i[2],d=0,v=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&v.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(h&&h(i);v.length;)v.shift()();return s.push.apply(s,c||[]),t()}function t(){for(var e,i=0;i<s.length;i++){for(var t=s[i],n=!0,a=1;a<t.length;a++){var l=t[a];0!==o[l]&&(n=!1)}n&&(s.splice(i--,1),e=r(r.s=t[0]))}return e}var n={},o={12:0},s=[];function r(i){if(n[i])return n[i].exports;var t=n[i]={i:i,l:!1,exports:{}};return e[i].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.e=function(e){var i=[],t=o[e];if(0!==t)if(t)i.push(t[2]);else{var n=new Promise((function(i,n){t=o[e]=[i,n]}));i.push(t[2]=n);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(e){return r.p+""+({}[e]||e)+".js"}(e);var l=new Error;s=function(i){a.onerror=a.onload=null,clearTimeout(c);var t=o[e];if(0!==t){if(t){var n=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,t[1](l)}o[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(i)},r.m=e,r.c=n,r.d=function(e,i,t){r.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,i){if(1&i&&(e=r(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)r.d(t,n,function(i){return e[i]}.bind(null,n));return t},r.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(i,"a",i),i},r.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},r.p="",r.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=i,a=a.slice();for(var c=0;c<a.length;c++)i(a[c]);var h=l;s.push([2003,0]),t()}({2003:function(e,i,t){var n,o;t.p=function(){function e(e,i){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==i)return i;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var i,t,n="",o=0,s=arguments.length;o<s;o++)(t=(i=arguments[o].toString()).length)>1&&"/"==i.charAt(t-1)&&(i=i.substring(0,t-1)),"/"!=i.charAt(0)?n+="/"+i:n+=i;if("/"!=n){var r=n.split("/"),a=r[1];if("static"==a||"modules"==a){var l=n.substring(a.length+2,n.length);n="/"+a,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==r[2]&&(n+=":"+e("APP_BUILD",0)),n+="/"+l}}var c=e("MRSPARKLE_ROOT_PATH","/"),h=e("LOCALE","en-US"),d="/"+h+n;return""==c||"/"==c?d:c+d}("/static/build/pages/light")+"/"}(),n=[t("routers/Archives"),t("util/router_utils")],void 0===(o=function(e,i){new e;i.start_backbone_history()}.apply(i,n))||(e.exports=o)},2004:function(e,i){e.exports='<td class="index-name"><a href="#" class="editAction"><%- model.entry.get("name") %></a></td>\n<td class="s3-bucket-path"><%- model.entry.content.get("vix.fs.default.name") %></td>\n<td class="actions">\n    <a href="#" class="editAction"><%= _("Edit").t() %></a>\n    <a href="#" class="deleteAction"><%= _("Delete").t() %></a>\n</td>\n'},2005:function(e,i){e.exports='<table class="table table-chrome table-striped">\n    <colgroup>\n        \x3c!--<col class="col-flex col-info <%- headerCellClass %>">\n        <col class="col-slim col-selected">--\x3e\n        <col class="col-flex col-name">\n        <col class="col-slim col-s3-bucket">\n        <col class="col-slim col-actions">\n    </colgroup>\n    <thead>\n    <tr>\n        \x3c!--<th class="<%- headerCellClass %>"><i class="icon-info"></i></th>\n        <th class="select-all-checkbox"></th>--\x3e\n        <th class="<%- sortCellClass %>" <%- sortKeyAttribute %>="name">\n        <a href="#" class="name-sort-link"><%= _(\'Name\').t() %><i class="icon-sorts"></i></a>\n        </th>\n        <th class="<%- sortCellClass %>" <%- sortKeyAttribute %>="vix.fs.default.name">\n        <a href="#" class="s3-bucket-sort-link"><%= _(\'AWS S3 Path\').t() %><i class="icon-sorts"></i></a>\n        </th>\n        <th><%= _(\'Actions\').t() %></th>\n    </tr>\n    </thead>\n    <tbody class="archives-grid-table-body">\n\n    </tbody>\n\n</table>\n'},2006:function(e,i){e.exports='<div class="section-header section-padded">\n    <div class="create-button-container pull-right">\n        <a href="#" class="btn btn-primary new-archive-button"><%- _("New Archive").t() %></a>\n    </div>\n    <h1 class="section-title"><%- _("Archives").t() %></h1>\n    <div class="block-text"><%- _("Archives let you store data in AWS S3 buckets.").t() %>\n    <a href="<%- docUrl %>" target="_blank" rel="noopener noreferrer" class="help-link"><%- _("Learn More").t() %> <i class="icon-external"></i></a></div>\n    <div class="flash-messages"></div>\n</div>\n<div class="main-section">\n    <div class="table-toolbar">\n        <div class="filter-container">\n            <div class="collection-count"></div>\n            <div class="text-name-filter"></div>\n            <div class="select-page-count"></div>\n        </div>\n        <div class="paginator-container">\n        </div>\n    </div>\n    <div class="archives-grid"></div>\n</div>\n'},2007:function(e,i,t){(e.exports=t(5)(!1)).push([e.i,".archives-view .main-section .table-toolbar>*{min-height:28px;padding:0 8px 4px}.archives-view .main-section .table-toolbar>*>*{display:inline-block}.archives-view .main-section .table-toolbar .filter-container{border-top:1px solid #c3cbd4;padding-top:10px}.archives-view .main-section .table-toolbar .filter-container .collection-count{margin-left:13px}.archives-view .main-section .table-toolbar .filter-container .collection-count+.text-name-filter{margin-left:10px}.archives-view .main-section .table-toolbar .filter-container .collection-count h3{font-size:14px;font-weight:400;margin:0;min-width:140px;text-align:left}.archives-view .main-section .table-toolbar .filter-container .collection-count .shared-waitspinner{float:left;height:14px;margin-right:10px;width:14px}.archives-view .main-section .table-toolbar .filter-container .collection-count .disabled{color:#c3cbd4}.archives-view .main-section .table-toolbar .filter-container .select-page-count{float:right}.archives-view .main-section .table-toolbar .paginator-container{min-height:0}.archives-view .main-section .archives-grid{clear:both}.archives-view .main-section .archives-grid td.frozen-path,.archives-view .main-section .archives-grid td.home-path,.archives-view .main-section .archives-grid td.index-name{max-width:200px;min-width:100px;word-break:break-word}.archives-view .main-section .archives-grid td.actions,.archives-view .main-section .archives-grid td.index-status{white-space:nowrap}.archives-view .main-section .archives-grid td.actions a{padding-right:8px}.archives-view .main-section .archives-grid td.actions .disabled-action{color:#c3cbd4;padding-right:8px}.archives-view .main-section .archives-grid tr.list-item td{-webkit-transition:background,.2s;transition:background,.2s}.archives-view .main-section .archives-grid tr.list-item:hover td{background-color:#ecf8ff;-webkit-transition:background,.02s;transition:background,.02s}.archives-view .main-section .archives-grid tr.list-item i{display:inline-block;font-size:1.2em;width:14px}.archives-view .main-section .archives-grid tr.list-item i.enable-icon{color:#53a051}.archives-view .main-section .archives-grid tr.list-item i.disable-icon{color:#dc4e41}.archives-view .main-section .archives-grid .message-single{margin-left:10px}.archives-view.archives-disabled-view{min-height:500px;position:relative}.archives-view.archives-disabled-view>.section-header{background-color:#f2f4f5;z-index:10}.archives-view.archives-disabled-view .main-section .table{margin-bottom:0}.archives-view.archives-disabled-view .main-section .table-disabled-screen{background-color:#c3cbd4;bottom:0;left:0;opacity:.5;position:absolute;right:0;top:0}.archives-view.archives-disabled-view .main-section .archives-grid .section-header{text-align:center;width:100%}.archives-view.archives-disabled-view .main-section .archives-grid .section-header.disabled-message{margin-top:80px}.archives-view.archives-disabled-view .main-section .archives-grid .section-header .learn-more-link{margin:5px 0 0}.archives-view .expanded-info{padding-top:1em}.archives-view .col-info,.archives-view .col-selected{width:1em}.archives-view .checkbox{padding:0}.archives-view .bandwidth-header{white-space:nowrap}.delete-archive-dialog .big-warning,.delete-archive-error-dialog .big-warning{color:#f8be34;font-size:4em;padding-right:20px;vertical-align:super}.delete-archive-dialog .big-error,.delete-archive-error-dialog .big-error{color:#dc4e41;font-size:4em;padding-right:20px;vertical-align:super}.delete-archive-dialog .delete-text,.delete-archive-error-dialog .delete-text{display:inline-block;width:80%}.delete-archive-dialog .index-name,.delete-archive-error-dialog .index-name{font-style:italic;padding-left:1em}.archives-modal .path-placeholder .controls .shared-controls-textcontrol,.archives-modal .path-placeholder .controls>div{display:inline-block;vertical-align:top}.archives-modal .path-placeholder .controls .shared-controls-textcontrol.shared-controls-textcontrol,.archives-modal .path-placeholder .controls>div.shared-controls-textcontrol{z-index:1}.archives-modal .path-placeholder .controls .enable-button{border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px;width:141px}.archives-modal .create-new-message{border-bottom:1px solid #c3cbd4;margin:-5px -20px 20px;padding:0 20px 15px}.archives-modal.modal-wide .path-placeholder .controls>div.shared-controls-textcontrol input{border-bottom-right-radius:0;border-top-right-radius:0;width:460px}.archives-modal.modal-wide .path-placeholder .controls .enable-button{border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px;width:121px}.archives-modal.modal-wide span.uneditable-input{border-bottom-right-radius:0;border-top-right-radius:0;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:26px;width:460px}.archives-modal.modal-wide .control textarea{min-width:566px}.archives-modal.modal-wide .control-label span.required{margin-right:-8px}.archives-modal.modal-wide .role-json-placeholder button{margin-bottom:10px}.archives-modal.modal-wide .role-json-placeholder textarea{min-height:140px}.archives-modal.modal-wide .role-json-placeholder textarea[readonly]{background-color:#fff;cursor:text}",""])},2008:function(e,i){e.exports='<div class="section-header section-padded">\n    <div class="create-button-container pull-right">\n        <a class="btn btn-primary new-archive-button" disabled><%- _("New Archive").t() %></a>\n    </div>\n    <h1 class="section-title"><%- _("Archives").t() %></h1>\n    <div class="block-text"><%- _("Archives let you store data in AWS S3 buckets.").t() %>\n        <a href="<%- docUrl %>" target="_blank" rel="noopener noreferrer" class="help-link"><%- _("Learn More").t() %> <i class="icon-external"></i></a>\n    </div>\n</div>\x3c!-- .section-header --\x3e\n<div class="main-section">\n    <div class="table-toolbar">\n        <div class="filter-container">\n            <div class="collection-count">\n                <span class="disabled"><%= _(\'0 archives\').t() %></span>\n            </div>\x3c!-- .collection-count --\x3e\n            <div class="text-name-filter">\n                <div class="control shared-controls-textcontrol">\n                    <input type="text" class="search-query" placeholder="<%= _(\'filter\').t() %>" disabled>\n                </div>\n            </div>\x3c!-- .text-name-filter --\x3e\n            <div class="select-page-count">\n                <div class="control btn-group shared-dataenrichment-preview-components-selectpagecount">\n                    <a class="dropdown-toggle btn-pill disabled">\n                        <i class="icon-large"></i>\n                        <span class="link-label"><%= _(\'20 per page\').t() %></span>\n                        <span class="caret" aria-hidden="true"></span>\n                    </a>\n                </div>\n            </div>\x3c!-- .select-page-count--\x3e\n        </div>\x3c!-- .filter-container --\x3e\n        <div class="paginator-container"></div>\n    </div>\x3c!-- .table-toolbar --\x3e\n    <div class="archives-grid archives-shared-archivesgrid archives-grid-disabled">\n        <table class="table table-chrome table-striped">\n            <thead>\n                <tr>\n                    <th class="sorts">\n                        <%= _(\'Name\').t() %>\n                        <i class="icon-sorts"></i>\n                    </th>\n                    <th class="sorts">\n                        <%= _(\'AWS S3 Path\').t() %>\n                        <i class="icon-sorts"></i>\n                    </th>\n                    <th>\n                        <%= _(\'Actions\').t() %>\n                    </th>\n                </tr>\n            </thead>\n        </table>\n        <div class="table-disabled-screen"></div>\n        <div class="section-header disabled-message">\n            <h1 class="section-title"><%= _(\'Now you can archive data from Splunk Cloud to AWS S3!\').t() %></h1>\n            <h3 class="learn-more-link"><a href="<%- docUrl %>" target="_blank" rel="noopener noreferrer" class="help-link"><%- _("Learn More").t() %> <i class="icon-external"></i></a></h3>\n        </div>\n    </div>\x3c!-- .archives-grid --\x3e\n</div>\x3c!-- .main-section --\x3e\n'},"models/indexes/cloud/AddEditArchive":function(e,i,t){var n,o;n=[t("require/underscore"),t("models/Base")],void 0===(o=function(e,i){return i.extend({idAttribute:"name",defaults:{name:"","vix.fs.default.name":""},validation:{name:{fn:function(i,t,n){if(n.isNew&&""==i)return e("Archive Name is required.").t()}},"vix.fs.default.name":[{required:!0,msg:e("AWS S3 Path is required.").t()},{fn:function(i){var t=i.match(/^([a-z]([a-z0-9\+\.\-]*):\/\/)/i);if(!t)return e("No scheme found in AWS S3 Path.").t();var n=i.slice(t[0].length);return 0==n.length?e("AWS S3 Path is missing the bucket name.").t():n.match(/^([^/]+)\/?$/i)?void 0:e("AWS S3 Path must point to the root of the bucket.").t()}}]},getArchiveAttributes:function(){return{"vix.fs.default.name":this.get("vix.fs.default.name"),"vix.description":this.get("vix.description")}}})}.apply(i,n))||(e.exports=o)},"models/indexes/cloud/S3BucketPolicy":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),t("models/SplunkDBase"),t("util/splunkd_utils")],void 0===(o=function(e,i,t,n,o){return n.extend({url:"cluster_blaster_archives/s3_bucket_policy",initialize:function(){n.prototype.initialize.apply(this,arguments)},isNew:function(){return!1},_onerror:function(e,i,t){var o=this.parseSplunkDMessages(i.responseJSON);return 0==o.length?n.prototype._onerror.apply(this,arguments):this._onsync(e,i.responseJSON,t)},sync:function(n,s,r){if("read"!=n)throw new Error("S3BucketPolicy only supports read");e.Deferred();var a,l={data:{output_mode:"json"}};return a=i.isFunction(s.url)?s.url():s.url,e.extend(!0,l,r),e.extend(!0,l.data,s.toJSON()),l.url=o.fullpath(a,{}),l.type="GET",l.data=o.normalizeValuesForPOST(l.data),l.processData=!0,t.sync.call(null,"read",s,l)},parse:function(e,i){return e.policyJSON=JSON.stringify(e),e}})}.apply(i,n))||(e.exports=o)},"routers/Archives":function(e,i,t){var n,o;n=[t("require/underscore"),t("require/backbone"),t("shim/jquery"),t("routers/Base"),t("views/error/Master"),t("views/archives/shared/ArchivesController"),t("views/archives/shared/ArchivesDisabledView")],void 0===(o=function(e,i,t,n,o,s,r){return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.setPageTitle(e("Manage Archives").t()),this.enableAppBar=!1,this.fetchUser=!0},page:function(a,l,c){n.prototype.page.apply(this,arguments),t.when(this.deferreds.pageViewRendered).done(e((function(){this.addPageViewEl(this.pageView.el),this.model.user.canArchive()?this.model.user.canEditArchives()?this.archivesController=new s({model:this.model,collection:this.collection}):this.archivesController=new o({model:{application:this.model.application,error:new i.Model({status:e("Access Denied").t(),message:e("You do not have permission to view this page.").t()})}}):this.archivesController=new r({model:this.model,collection:this.collection}),this.pageView.$(".main-section-body").append(this.archivesController.render().el)})).bind(this))}})}.apply(i,n))||(e.exports=o)},"views/archives/shared/AddEditArchiveDialog":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),e,t("views/archives/shared/EnableButton"),t("models/indexes/cloud/Archive"),t("models/indexes/cloud/AddEditArchive"),t("models/indexes/cloud/S3BucketPolicy"),t("views/shared/FlashMessages"),t("views/shared/Modal"),t("views/shared/controls/ControlGroup"),t("uri/route"),t("views/shared/controls/TextControl"),t("views/shared/controls/TextareaControl"),t("shim/splunk.util")],void 0===(o=function(e,i,t,n,o,s,r,a,l,c,h,d,v,p,u){return c.extend({moduleId:n.i,className:c.CLASS_NAME+" "+c.CLASS_MODAL_WIDE+" archives-modal",events:e.extend({},c.prototype.events,{"click .btn-primary":function(t){if(this.addEditArchiveModel.set({},{validate:!0})){this.options.isNew&&this.model.archiveModel.entry.content.set("name",this.addEditArchiveModel.get("name")),this.model.archiveModel.entry.content.set(this.addEditArchiveModel.getArchiveAttributes());var n=this.model.archiveModel.save();e.when(n).done(i((function(){this.trigger("archiveSaved",this.addEditArchiveModel.get("name")),this.hide()})).bind(this))}},"click .role-json-placeholder .control.shared-controls-textareacontrol":function(e){e.target&&e.target.select&&e.target.select()},"dragstart .role-json-placeholder .control.shared-controls-textareacontrol":function(e){e.preventDefault()},"focus .role-json-placeholder .control.shared-controls-textareacontrol":function(i){i.target&&e(i.target).attr("readonly",!0)}}),initialize:function(n){c.prototype.initialize.call(this,arguments),i(n=n||{}).defaults({isNew:!0});var u=[];if(this.s3BucketPolicyModel=new a,this.stateModel=new t.Model({editable:!0}),n.isNew)this.addEditArchiveModel=new r({isNew:!0}),this.model.archiveModel=new s;else{this.model.archiveModel.entry.get("name");this.addEditArchiveModel=new r({isNew:!1,"vix.fs.default.name":this.model.archiveModel.entry.content.get("vix.fs.default.name"),"vix.description":this.model.archiveModel.entry.content.get("vix.description")})}var m=this.s3BucketPolicyModel.fetch({data:{bucketName:"__BUCKET_PLACEHOLDER__"}});this.options.isNew?(this.listenTo(this.addEditArchiveModel,"change:vix.fs.default.name",this.onPathChanged),this.listenTo(this.stateModel,"change:editable",this.onEditableChanged)):e.when(m).done(i(this.updateJSONPolicyWithBucketName).bind(this)),this.children.flashMessagesView=new l({model:[this.s3BucketPolicyModel,this.addEditArchiveModel,this.model.archiveModel]}),this.children.inputName=new h({controlType:"Text",controlOptions:{modelAttribute:"name",model:this.addEditArchiveModel},label:i("Archive Name").t(),help:""}),this.options.isNew?(this.children.inputPathText=new v({modelAttribute:"vix.fs.default.name",model:this.addEditArchiveModel,updateOnKeyUp:!0}),this.children.inputPathEditButton=new o({model:this.stateModel,label:i("Edit").t(),attributes:{"data-name":"edit-path-button"}}),this.listenTo(this.children.inputPathEditButton,"click",this.onPathEditButtonClicked),this.children.inputPath=new h({controls:[this.children.inputPathText,this.children.inputPathEditButton],label:i("AWS S3 Bucket Path").t(),help:i("An AWS S3 Bucket in the same AWS region as your Splunk Cloud environment. eg. s3a://mybackup").t()})):this.children.inputPath=new h({controlType:"Label",controlOptions:{modelAttribute:"vix.fs.default.name",model:this.addEditArchiveModel},label:i("AWS S3 Bucket Path").t(),help:i("An AWS S3 Bucket in the same AWS region as your Splunk Cloud environment. eg. s3a://mybackup").t()}),this.children.textareaDescription=new h({controlType:"Textarea",controlOptions:{modelAttribute:"vix.description",model:this.addEditArchiveModel,placeholder:"optional"},label:i("Description").t()}),this.options.isNew&&(this.children.generatePolicyButton=new o({model:this.stateModel,label:i("Generate").t(),attributes:{"data-name":"generate-policy-button"}}),this.listenTo(this.children.generatePolicyButton,"click",this.onGeneratePolicyButtonClicked),u.push(this.children.generatePolicyButton)),this.children.textAreaPolicy=new p({model:this.stateModel,modelAttribute:"policyJSON"}),u.push(this.children.textAreaPolicy);var g=i("AWS S3 Bucket Policy").t(),f=d.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.cloud.AWSrole"),b='<a href="'+f+'" target="_blank" rel="noopener noreferrer" class="help-link">'+i("Learn More").t()+' <i class="icon-external"></i></a>',w=i("Copy and paste into your AWS permissions console.").t()+" "+b,x=i("The AWS S3 Bucket permissions that will allow Splunk Cloud to copy data to the AWS S3 Bucket.").t();this.children.roleJSON=new h({controls:u,label:g,help:w,tooltip:x})},onEditableChanged:function(){this.stateModel.get("editable")?(this.children.inputPathText.enable(),this.children.inputPathEditButton.disable(),this.children.generatePolicyButton.enable()):(this.children.inputPathText.disable(),this.children.inputPathEditButton.enable(),this.children.generatePolicyButton.disable())},onPathEditButtonClicked:function(){this.stateModel.set("editable",!0),this.stateModel.set("policyJSON","")},onPathChanged:function(){var e=this.addEditArchiveModel.get("vix.fs.default.name");i(e).isEmpty()?this.children.generatePolicyButton.disable():this.children.generatePolicyButton.enable()},onGeneratePolicyButtonClicked:function(){this.addEditArchiveModel.set({},{validate:!0})&&(this.updateJSONPolicyWithBucketName(),this.stateModel.set("editable",!1))},updateJSONPolicyWithBucketName:function(){var e,i,t=this.addEditArchiveModel.get("vix.fs.default.name"),n=this.s3BucketPolicyModel.get("policyJSON"),o=new RegExp("__BUCKET_PLACEHOLDER__","g"),s=t.indexOf("://");-1!=s&&(e=t.substr(s+"://".length),i=n.replace(o,e),this.stateModel.set("policyJSON",JSON.stringify(JSON.parse(i),null,4)))},deactivate:function(e){c.prototype.initialize.call(this,arguments),this.stopListening(this.addEditArchiveModel,"change:vix.fs.default.name",this.onPathChanged)},render:function(){this.$el.html(c.TEMPLATE),this.$(c.HEADER_TITLE_SELECTOR).html(this.options.isNew?i("New Archive").t():u.sprintf(i("Edit Archive: %s").t(),this.model.archiveModel.entry.get("name"))),this.$(c.BODY_SELECTOR).show(),this.$(c.BODY_SELECTOR).append(c.FORM_HORIZONTAL);var e=d.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.cloud.newarchive");return this.$(c.BODY_FORM_SELECTOR).html(i(this.dialogFormBodyTemplate).template({docUrl:e})),this.children.flashMessagesView.render().appendTo(this.$(".flash-messages-view-placeholder")),this.options.isNew?this.children.inputName.render().appendTo(this.$(".name-placeholder")):this.$(".create-new-message").hide(),this.children.textareaDescription.render().appendTo(this.$(".description-placeholder")),this.children.inputPath.render().appendTo(this.$(".path-placeholder")),this.children.roleJSON.render().appendTo(this.$(".role-json-placeholder")),this.$(c.FOOTER_SELECTOR).append(c.BUTTON_CANCEL),this.$(c.FOOTER_SELECTOR).append(c.BUTTON_SAVE),this.options.isNew&&(this.onEditableChanged(),this.onPathChanged()),this},dialogFormBodyTemplate:'                <div class="flash-messages-view-placeholder"></div>                <div class="create-new-message">                    <p><%- _("Copy data from indexes you specify into an AWS S3 Bucket. The S3 Bucket must be dedicated to Splunk Cloud archive data only, and must be in the same AWS Region as your Splunk Cloud environment.").t() %></p>                    <a href="<%- docUrl %>" target="_blank" rel="noopener noreferrer" class="help-link"><%- _("Learn More").t() %> <i class="icon-external"></i></a>                </div>                <div class="name-placeholder"></div>                <div class="description-placeholder"></div>                <div class="path-placeholder"></div>                <span class="role-json-placeholder"></span>            '})}.apply(i,n))||(e.exports=o)},"views/archives/shared/ArchivesController":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),e,t("collections/services/AppLocals"),t("collections/indexes/cloud/Archives"),t("collections/services/data/vix/Indexes"),t("controllers/Base"),t("views/archives/shared/AddEditArchiveDialog"),t("views/archives/shared/DeleteArchiveDialog"),t("views/archives/shared/DeleteArchiveErrorDialog"),t("views/archives/shared/ArchivesView"),t("models/classicurl"),t("models/indexes/cloud/Archive"),t("models/shared/EAIFilterFetchData"),t("views/archives/shared/ArchivesController.pcss")],void 0===(o=function(e,i,t,n,o,s,r,a,l,c,h,d,v,p,u,m){return a.extend({moduleId:n.i,initialize:function(n){a.prototype.initialize.apply(this,arguments),this.model=this.model||{},this.model.controller=new t.Model({fetching:!1}),this.listenTo(this.model.controller,"fetchCollection",this.fetchArchivesCollection),this.listenTo(this.model.controller,"editArchive",this.onEditArchive),this.listenTo(this.model.controller,"deleteArchive",this.onDeleteArchive),this.listenTo(this.model.controller,"createArchive",this.onCreateArchive),this.archiveCollectionFetchData=new u({count:"20",offset:0}),this.listenTo(this.archiveCollectionFetchData,"change:nameFilter",this.onNameFilterChanged),this.collection=this.collection||{},this.collection.archives=new s(null,{fetchData:this.archiveCollectionFetchData}),this.collection.apps=new o,this.collection.virtualIndexes=new r,this.listenTo(this.collection.archives,"request",this.onArchivesCollectionRequest),this.listenTo(this.collection.archives,"sync",this.onArchivesCollectionSync),this.listenTo(this.collection.archives,"error",this.onArchivesCollectionSync);this.fetchArchivesCollection();var l=this.collection.apps.fetch({data:{sort_key:"name",sort_dir:"desc",app:this.model.application.get("app"),owner:this.model.application.get("owner"),search:"visible=true AND disabled=0",count:-1}});e.when(l).then(i((function(){this.children.archivesView=new d({model:this.model,collection:this.collection}),this.debouncedRender()})).bind(this))},onNameFilterChanged:function(e,i,t){e.set("offset",0)},onArchivesCollectionRequest:function(){this.model.controller.set("fetching",!0)},onArchivesCollectionSync:function(){this.model.controller.set("fetching",!1)},fetchArchivesCollection:function(){return this.collection.archives.fetch()},showAddEditDialog:function(i,t){var n={};n.isNew=i,n.model={application:this.model.application},i||(n.model.archiveModel=t),this.children.editArchiveDialog=new l(n),this.listenTo(this.children.editArchiveDialog,"archiveSaved",this.onArchiveSaved),this.listenTo(this.children.editArchiveDialog,"hidden",this.onSaveDialogHidden),this.children.editArchiveDialog.render().appendTo(e("body")),this.children.editArchiveDialog.show()},onEditArchive:function(e){this.showAddEditDialog(!1,e)},onDeleteArchive:function(t){var n=t.entry.get("name");e.when(this.collection.virtualIndexes.fetch({data:{count:0,search:"vix.output.buckets.from.indexes vix.provider="+n,sort_key:"vix.output.buckets.from.indexes"}})).done(i((function(){0==this.collection.virtualIndexes.length?this.children.DeleteArchiveDialog=new c({model:t}):this.children.DeleteArchiveDialog=new h({model:t,collection:this.collection.virtualIndexes}),this.listenTo(this.children.DeleteArchiveDialog,"deleteArchiveConfirmed",this.onDeleteArchiveConfirmed),this.listenTo(this.children.DeleteArchiveDialog,"hidden",this.onDeleteDialogHidden),this.children.DeleteArchiveDialog.render().appendTo(e("body")),this.children.DeleteArchiveDialog.show()})).bind(this))},onDeleteArchiveConfirmed:function(e){this.fetchArchivesCollection()},onDeleteDialogHidden:function(){this.stopListening(this.children.DeleteArchiveDialog,"deleteArchiveConfirmed",this.onDeleteArchiveConfirmed),this.stopListening(this.children.DeleteArchiveDialog,"hidden",this.onDeleteDialogHidden)},onCreateArchive:function(){this.showAddEditDialog(!0,null)},onArchiveSaved:function(e){this.fetchArchivesCollection()},onSaveDialogHidden:function(){this.stopListening(this.children.editArchiveDialog,"archiveSaved",this.onArchiveSaved),this.stopListening(this.children.editArchiveDialog,"hidden",this.onSaveDialogHidden)},remove:function(){a.prototype.remove.apply(this,arguments),this.children.archivesView.remove()},render:function(){return this.children.archivesView&&this.children.archivesView.detach(),this.children.archivesView&&this.children.archivesView.render().appendTo(this.$el),this}})}.apply(i,n))||(e.exports=o)},"views/archives/shared/ArchivesController.pcss":function(e,i,t){var n=t(2007);"string"==typeof n&&(n=[[e.i,n,""]]);var o={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};t(6)(n,o);n.locals&&(e.exports=n.locals)},"views/archives/shared/ArchivesDisabledView":function(e,i,t){var n,o;n=[t("require/underscore"),e,t("views/Base"),t("shim/splunk.util"),t("uri/route"),t(2008)],void 0===(o=function(e,i,t,n,o,s){return t.extend({moduleId:i.i,template:s,className:"archives-view archives-disabled-view",initialize:function(e){t.prototype.initialize.call(this,e)},render:function(){var i=o.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.cloud.archives"),t=this.compiledTemplate({_:e,docUrl:i,splunkUtil:n});return this.$el.html(t),this}})}.apply(i,n))||(e.exports=o)},"views/archives/shared/ArchivesGrid":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),e,t("views/Base"),t("helpers/grid/RowIterator"),t("views/archives/shared/ArchivesGridRow"),t("views/shared/FlashMessages"),t("views/shared/controls/SyntheticCheckboxControl"),t("views/shared/delegates/ColumnSort"),t("views/shared/delegates/RowExpandCollapse"),t(2005),t("uri/route"),t("util/splunkd_utils")],void 0===(o=function(e,i,t,n,o,s,r,a,l,c,h,d,v){return n.extend({moduleId:t.i,template:h,initialize:function(e){n.prototype.initialize.call(this,e),this.children.columnSort=new l({el:this.el,model:this.collection.archives.fetchData,autoUpdate:!1}),this.children.flashMessages=new r({className:"message-single"}),this.collection.archives.on("change reset",(function(){0==this.collection.archives.length?this.updateNoArchivesMessage():this.children.flashMessages.flashMsgHelper.removeGeneralMessage("vix_no_archive"),this.debouncedRender()}),this)},updateNoArchivesMessage:function(){if(0==this.collection.archives.length){var e=d.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.virtualindex.archive"),t=i("No archives are defined.").t()+'<a href="'+e+'" target="_blank" rel="noopener noreferrer">'+i("Learn more.").t()+' <i class="icon-external"></i></a>';this.children.flashMessages.flashMsgHelper.addGeneralMessage("vix_no_archive",{type:v.ERROR,html:t})}else this.children.flashMessages.flashMsgHelper.removeGeneralMessage("vix_no_archive")},onSelectAllCheckBoxChange:function(e,t){i(this.archivesRows).each((function(i){i.setCheckBoxValue(e)}),this)},onSelectedChange:function(e,i){this.trigger("selectedChange",e,i)},getIDFromTarget:function(i){return e(i.target).closest("tr").data("row-expand-collapse-id")},render:function(){var t=new o({});this.archivesRows=[];var n=this.compiledTemplate({_:i,collection:this.collection.archives,sortCellClass:l.SORTABLE_ROW,sortKeyAttribute:l.SORT_KEY_ATTR,headerCellClass:c.HEADER_CELL_CLASS}),r=e(n);return t.eachRow(this.collection.archives,(function(e,i,t,n){var o=new s({model:{archive:e,controller:this.model.controller},index:i,isExpanded:n,rowNumber:t});this.archivesRows.push(o),r.find(".archives-grid-table-body").append(o.render().el)}),this),this.children.columnSort.update(r),this.$el.html(r),this.children.flashMessages.render().appendTo(this.$el),this}})}.apply(i,n))||(e.exports=o)},"views/archives/shared/ArchivesGridRow":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),e,t("views/Base"),t("views/shared/controls/SyntheticCheckboxControl"),t("views/shared/delegates/RowExpandCollapse"),t("util/format_numbers_utils"),t("util/time"),t("shim/splunk.util"),t(2004)],void 0===(o=function(e,i,t,n,o,s,r,a,l,c,h){return o.extend({moduleId:n.i,tagName:"tr",className:"list-item",template:h,events:(d={},d["click td."+r.TOGGLE_CELL_CLASS]="toggleCellClickHandler",d["click a.edit-older-than-btn"]=function(){this.trigger("action:editOlderThan",this.model.archive.get("id"))},d["click .deleteAction"]=function(e){this.model.controller.trigger("deleteArchive",this.model.archive),e.preventDefault()},d["click .editAction"]=function(e){this.model.controller.trigger("editArchive",this.model.archive),e.preventDefault()},d),initialize:function(e){o.prototype.initialize.call(this,e),this.children.checkBoxSelected=new s,this.listenTo(this.children.checkBoxSelected,"change",this.onCheckBoxSelectedChange)},setCheckBoxValue:function(e){this.children.checkBoxSelected.setValue(e)},toggleCellClickHandler:function(e){e.preventDefault(),this.isExpanded=!this.isExpanded,this.debouncedRender()},onCheckBoxSelectedChange:function(){this.trigger("selectedChange",this.model.archive.get("id"),this.children.checkBoxSelected.getValue())},formatToRelativeTime:function(e){if(i.isUndefined(e)||""==e)return"";var t=c.getEpochTimeFromISO(e);return l.convertToRelativeTime(t)},render:function(){this.children.checkBoxSelected.detach();var e=this.compiledTemplate({model:this.model.archive,isExpanded:this.isExpanded,formatNumbersUtils:a,timeUtils:l,toggleCellClass:r.TOGGLE_CELL_CLASS,expandedCellBody:r.EXPANDED_CELL_MARKUP,collapsedCellBody:r.COLLAPSED_CELL_MARKUP,rowIdAttribute:r.ROW_ID_ATTR});return this.$el.html(e),this.$el.attr(r.ROW_ID_ATTR,this.model.archive.get("id")),this.isExpanded?this.$el.addClass(r.EXPANDED_ROW_CLASS):this.$el.removeClass(r.EXPANDED_ROW_CLASS),this.children.checkBoxSelected.render().appendTo(this.$(".selected-checkbox")),this}});var d}.apply(i,n))||(e.exports=o)},"views/archives/shared/ArchivesView":function(e,i,t){var n,o;n=[t("require/underscore"),e,t("views/Base"),t("views/shared/CollectionPaginator"),t("views/shared/FlashMessages"),t("views/shared/controls/TextControl"),t("views/shared/dataenrichment/preview/components/SelectPageCount"),t("views/shared/CollectionCount"),t("views/archives/shared/ArchivesGrid"),t("shim/splunk.util"),t("uri/route"),t(2006)],void 0===(o=function(e,i,t,n,o,s,r,a,l,c,h,d){return t.extend({moduleId:i.i,template:d,className:"archives-view",events:{"click .new-archive-button":function(e){e.preventDefault(),this.model.controller.trigger("createArchive")}},initialize:function(i){t.prototype.initialize.call(this,i),this.children.archivesGrid=new l({model:{application:this.model.application,controller:this.model.controller},collection:this.collection}),this.children.flashMessages=new o({model:{application:this.model.application,user:this.model.user},collection:{archives:this.collection.archives,apps:this.collection.apps}}),this.children.textNameFilter=new s({model:this.collection.archives.fetchData,modelAttribute:"nameFilter",inputClassName:"search-query",canClear:!0,placeholder:e("filter").t()}),this.children.collectionPaginator=new n({collection:this.collection.archives,model:this.collection.archives.fetchData}),this.children.selectPageCount=new r({model:this.collection.archives.fetchData}),this.children.collectionCount=new a({collection:this.collection.archives,model:this.model.controller,countLabel:e("archives").t(),tagName:"h3"})},render:function(){this.children.flashMessages&&this.children.flashMessages.detach(),this.children.archivesGrid&&this.children.archivesGrid.detach(),this.children.textNameFilter&&this.children.textNameFilter.detach(),this.children.collectionPaginator&&this.children.collectionPaginator.detach(),this.children.selectPageCount&&this.children.selectPageCount.detach(),this.children.collectionCount&&this.children.collectionCount.detach();var e=h.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.cloud.archives"),i=this.compiledTemplate({docUrl:e,splunkUtil:c});return this.$el.html(i),this.children.flashMessages.render().appendTo(this.$(".flash-messages")),this.children.archivesGrid.render().appendTo(this.$(".archives-grid")),this.children.textNameFilter.render().appendTo(this.$(".text-name-filter")),this.children.collectionPaginator.render().appendTo(this.$(".paginator-container")),this.children.selectPageCount.render().appendTo(this.$(".select-page-count")),this.children.collectionCount.render().appendTo(this.$(".collection-count")),this}})}.apply(i,n))||(e.exports=o)},"views/archives/shared/DeleteArchiveDialog":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),e,t("shim/splunk.util"),t("views/shared/FlashMessages"),t("views/shared/Modal")],void 0===(o=function(e,i,t,n,o,s,r){return r.extend({moduleId:n.i,className:r.CLASS_NAME+" delete-archive-dialog",initialize:function(e){r.prototype.initialize.call(this,arguments),this.children.flashMessagesView=new s({model:this.model})},events:e.extend({},r.prototype.events,{"click .modal-btn-delete":function(t){var n=this.model.entry.get("name"),o=this.model.destroy({wait:!0});e.when(o).done(i((function(){this.trigger("deleteArchiveConfirmed",n),this.hide()})).bind(this))}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(i("Delete Archive").t()),this.$(r.BODY_SELECTOR).show(),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).html(i(this.dialogFormBodyTemplate).template({confirmationMessage:o.sprintf(i("Are you sure you want to delete the archive named <i>%s</i>?").t(),this.model.entry.get("name")),noDeleteMessage:o.sprintf(i("The data in your S3 bucket <i>%s</i> will NOT be deleted.").t(),this.model.entry.content.get("vix.fs.default.name"))})),this.children.flashMessagesView.render().appendTo(this.$(".flash-messages-view-placeholder")),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL_PRIMARY),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_DELETE_SECONDARY),this},dialogFormBodyTemplate:'                <div class="flash-messages-view-placeholder"></div>                \x3c!--<div class="pull-left">--\x3e<i style="" class="big-warning icon-warning"></i>\x3c!--</div>--\x3e                <p class="delete-text"><%= confirmationMessage %>                <br/><br/><%= noDeleteMessage %>                 </p>            '})}.apply(i,n))||(e.exports=o)},"views/archives/shared/DeleteArchiveErrorDialog":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),e,t("shim/splunk.util"),t("views/shared/FlashMessages"),t("views/shared/Modal")],void 0===(o=function(e,i,t,n,o,s,r){return r.extend({moduleId:n.i,className:r.CLASS_NAME+" delete-archive-error-dialog",initialize:function(e){r.prototype.initialize.call(this,arguments),this.children.flashMessagesView=new s({model:this.model})},render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(i("Delete Archive").t()),this.$(r.BODY_SELECTOR).show(),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).html(i(this.dialogFormBodyTemplate).template({errorMessage:o.sprintf(i("You can not delete the archive <i>%s</i> until the following indexes are no longer archiving data to this archive:").t(),this.model.entry.get("name")),indexes:this.collection})),this.children.flashMessagesView.render().appendTo(this.$(".flash-messages-view-placeholder")),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_DONE),this},dialogFormBodyTemplate:'                <div class="flash-messages-view-placeholder"></div>                <i style="" class="big-error icon-error"></i>                <p class="delete-text">                  <%= errorMessage %>                  <br/>                  <% indexes.each(function(index) { %>                      <br/><span class="index-name"><%= index.entry.content.get("vix.output.buckets.from.indexes") %></span>                  <% }) %>                  <br/>                </p>            '})}.apply(i,n))||(e.exports=o)},"views/archives/shared/EnableButton":function(e,i,t){var n,o;n=[t("shim/jquery"),t("require/underscore"),t("require/backbone"),e,t("views/Base")],void 0===(o=function(e,i,t,n,o){return o.extend({moduleId:n.i,tagName:"button",className:"enable-button btn",initialize:function(e){o.prototype.initialize.call(this,e),this.listenTo(this.model,"change:enabled",this.updateButton)},events:{click:function(e){this.trigger("click")}},enable:function(){this.$el.prop("disabled",!1)},disable:function(){this.$el.prop("disabled",!0)},updateButton:function(){this.model.get("enabled");this.$el.text(this.options.label)},render:function(){return this.updateButton(),this},template:"            "})}.apply(i,n))||(e.exports=o)}});