!function(e){function t(t){for(var s,a,o=t[0],l=t[1],d=t[2],h=0,p=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,d||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],s=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var s={},n={43:0},r=[];function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(t,s){i=n[e]=[t,s]}));t.push(i[2]=s);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+""+({}[e]||e)+".js"}(e);var l=new Error;r=function(t){o.onerror=o.onload=null,clearTimeout(d);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,i[1](l)}n[e]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;r.push([2493,0]),i()}({2493:function(e,t,i){var s,n;i.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,i,s="",n=0,r=arguments.length;n<r;n++)(i=(t=arguments[n].toString()).length)>1&&"/"==t.charAt(i-1)&&(t=t.substring(0,i-1)),"/"!=t.charAt(0)?s+="/"+t:s+=t;if("/"!=s){var a=s.split("/"),o=a[1];if("static"==o||"modules"==o){var l=s.substring(o.length+2,s.length);s="/"+o,window.$C.BUILD_NUMBER&&(s+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(s+="."+window.$C.BUILD_PUSH_NUMBER),"app"==a[2]&&(s+=":"+e("APP_BUILD",0)),s+="/"+l}}var d=e("MRSPARKLE_ROOT_PATH","/"),c=e("LOCALE","en-US"),h="/"+c+s;return""==d||"/"==d?h:d+h}("/static/build/pages/enterprise")+"/"}(),s=[i("routers/FieldExtractorRouter"),i("util/router_utils")],void 0===(n=function(e,t){new e;t.start_backbone_history()}.apply(t,s))||(e.exports=n)},2494:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,'.main-section-body>.alerts{padding:25px 50px}.main-section-body{min-height:0}.field-extractor-master{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;bottom:0;-ms-flex-direction:column;flex-direction:column;left:0;right:0;top:34px}.page-header{height:80px;margin:0;-webkit-box-flex:0;background:#f2f4f5;border-bottom:1px solid #c3cbd4;-webkit-box-shadow:0 2px 4px #c3cbd4;box-shadow:0 2px 4px #c3cbd4;-ms-flex:0 0 auto;flex:0 0 auto;padding-bottom:0;text-align:center;z-index:2}.page-header[data-mode=manual]{text-align:left}.page-header[data-mode=manual] .extract-fields-page-title{line-height:48px}.instruction-title{font-size:24px;font-weight:500;margin:0 0 10px}.instructions-title{font-size:18px;font-weight:500;margin:10px 0}.page-content{min-height:calc(100vh - 164px);overflow-y:auto;padding:20px}.content-header{padding:20px 20px 0}.content-header:after,.content-header:before{content:"";display:table;line-height:0}.content-header:after{clear:both}.content-header{background-color:#fff;-webkit-box-shadow:0 1px 1px #e1e6eb;box-shadow:0 1px 1px #e1e6eb}.content-header .remove-button{clear:both;color:#6b7785;float:left;font-size:18px;line-height:28px;margin-top:-10px}.content-header-narrow{margin:0 auto;width:940px}.content-body{background-color:#fff;-webkit-box-shadow:0 1px 1px #e1e6eb;box-shadow:0 1px 1px #e1e6eb;min-height:400px;width:100%}.content-body .body-instructions{margin-bottom:10px;margin-left:20px;padding-top:20px}.regex-loading-message{padding:25px}.flash-messages-container{font-size:13px;font-weight:700}.preview-table-wrapper{margin-bottom:-1px}@media only screen and (max-width:1000px){.step-wizard .step-label{max-width:75px!important}}.highlighted-border-cat$i{-webkit-box-shadow:inset 0 0 0 3px #7fb6ce;box-shadow:inset 0 0 0 3px #7fb6ce;-webkit-box-shadow:inset 0 0 0 3px #a7d2c2;box-shadow:inset 0 0 0 3px #a7d2c2;-webkit-box-shadow:inset 0 0 0 3px #f6ccb0;box-shadow:inset 0 0 0 3px #f6ccb0}.extract-fields-page-title{display:inline-block;font-size:18px;font-weight:500;margin:10px 0;padding:0 20px;vertical-align:middle}.view-all-extractions-button-container{display:inline-block;float:right;line-height:63px;margin-right:20px;margin-top:8px}.view-all-extractions-button-container .icon-alert{color:#dc4e41;font-size:200%;margin-right:10px}.view-all-extractions-button-container .view-extractions-button{margin-top:-12px}.instruction{padding-bottom:20px}.step-buttons-container{display:inline-block;vertical-align:middle}.manual-save-button{margin-left:15px}.button-big{clear:both;float:left;font-size:29px;height:100px;line-height:100px;margin-bottom:20px;width:300px}.method-desc{float:left;line-height:26px;padding:20px}.desc-link{display:block}.method-switch{margin:0 auto 20px;position:relative;text-align:center;width:900px}.type-container{display:inline-block;margin-left:-55px;text-align:center;vertical-align:top;width:350px}.type-btn{border-radius:3px;cursor:pointer;display:block;margin:0 auto 10px;padding:10px 0 5px;-webkit-transition:background-color .2s;transition:background-color .2s;width:220px}.type-btn svg{fill:none}.type-btn .stroke{stroke:#5cc05c;stroke-width:1px}.type-btn .stroke-thick{stroke-width:2px}.type-btn .fill{fill:#5cc05c}.type-btn:hover{background-color:#f7f8fa}.type-btn:focus{border-collapse:separate;-webkit-box-shadow:0 0 1px 3px #006eaa;box-shadow:0 0 1px 3px #006eaa;outline:0;text-decoration:none}.type-btn:focus:active:not([disabled]){-webkit-box-shadow:none;box-shadow:none}.selected-method{background-color:#bfe9ff}.type-title-text{font-weight:700;line-height:24px}.type-desc-text{color:#6b7785;font-size:12px;line-height:20px;margin-left:65px;margin-right:65px;width:220px}.instructions-container{padding:20px 0 10px 20px}.sourcetype-label-container{padding:10px 0 10px 20px}.sourcetype-label,.timerange-label,.type-label{display:block;margin-left:0;margin-right:5px}.source-name,.sourcetype-name{font-weight:700}.select-sample-header .manual-mode-button-container{margin-top:5px}.sourcetype-dropdown-wrapper,.timerange-wrapper,.type-dropdown-wrapper,.type-wrapper{display:inline-block}.sourcetype-dropdown-wrapper>.btn-group,.timerange-wrapper>.btn-group,.type-dropdown-wrapper>.btn-group{font-size:inherit}.source-wrapper,.sourcetype-dropdown-wrapper,.timerange-wrapper,.type-dropdown-wrapper{margin-bottom:20px}.source-wrapper{display:block}.source-wrapper .help-block{margin-left:0}.source-wrapper .control-label{text-align:left}.source-wrapper .control.shared-controls-textcontrol{width:18.75em}.source-wrapper .controls-stack{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-left:0}.sourcetypeMenu{display:inline-block}.sourcetype-wrapper{margin-bottom:20px}.source-wrapper .preview-source-button{margin-left:10px;vertical-align:top}.dropdown-submenu .dropdown-menu li:first-child a{border-top:none}.dropdown-submenu>.dropdown-menu,.event-wrapper{border-radius:3px}.event-wrapper{background-color:#f2f4f5;border:1px solid rgba(82,168,236,.8);margin:20px 0;padding:5px}.event-wrapper.not-interactive{background-color:#bfe9ff;border-color:#006297;color:#3c444d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.remove-button+.event-wrapper{margin-top:-10px}.select-fields-header+.automatic-extraction-editor{margin-top:-20px}.automatic-extraction-editor .master-event-container .remove-button{margin-left:3px;position:relative}.automatic-extraction-editor .sample-event-wrapper{margin-left:20px}.automatic-extraction-editor .highlighted-existing-match,.automatic-extraction-editor .highlighted-match,.automatic-extraction-editor .required-text{cursor:pointer}.automatic-extraction-editor.disabled{opacity:.4}.automatic-extraction-editor.disabled .highlighted-existing-match,.automatic-extraction-editor.disabled .highlighted-match,.automatic-extraction-editor.disabled .required-text{cursor:default}.automatic-extraction-editor .highlighted-match{color:#fff}.interactive-extraction-cell .remove-button{margin-left:3px;position:relative}.interactive-extraction-cell{font-family:Splunk Platform Mono,Inconsolata,Consolas,Droid Sans Mono,Monaco,Courier New,Courier,monospace;white-space:pre-wrap!important}.shared-resultstable-resultstablerow>.interactive-extraction-cell:only-child{position:relative}.fieldextractor-mastereventdelimeditor{overflow:auto}.fieldextractor-mastereventdelimeditor .master-event-container{margin-bottom:20px;margin-top:35px;overflow-x:visible}.fieldextractor-mastereventdelimeditor .master-event-container table{border:0;margin-bottom:0}.fieldextractor-mastereventdelimeditor .master-event-container table .masterevt-hdr>span{cursor:pointer}.fieldextractor-mastereventdelimeditor .master-event-container table .masterevt-hdr>span .icon-pencil{color:#006297;padding-left:4px}.fieldextractor-mastereventdelimeditor .master-event-container table td{border:0}.counter-examples-container .remove-button{line-height:16px;margin-top:0}.counter-examples-container .counter-example-wrapper{border-color:#dc4e41;margin-left:20px}.counter-examples-container .counter-example-wrapper .removed-text{color:#dc4e41;text-decoration:line-through}.manual-extraction-editor{margin-top:5px}.manual-extraction-editor .input-title{display:inline-block;margin-right:10px}.manual-extraction-editor .preview-in-search-button,.manual-extraction-editor .regex-docs-link,.manual-extraction-editor a.btn,.manual-extraction-editor a.btn-pill{float:right;margin-left:10px}.manual-extraction-editor .regex-editor-wrapper textarea{width:100%}.manual-extraction-editor .preview-in-search-button,.manual-extraction-editor .regex-docs-link{margin-top:5px}.manual-extraction-editor .required-text-warning .icon-info-circle{color:blue;font-size:200%;left:0;position:absolute;top:8px}.delim-selector{padding-top:10px}.delim-selector .delimiter-radio,.delim-selector .delimiter-radio .shared-controls-syntheticradiocontrol{padding-top:5px}.delim-selector .delimiter-radio .delim-custom{margin:5px 10px 0;padding-right:0;width:45px}.save-extractions-container{margin-right:20px;padding-bottom:10px}.save-extractions-form{margin-bottom:20px}.save-extractions-form .shared-permissions-acl{margin:0 0 0 180px}.shared-documentcontrols-dialogs-permissionsdialog-acl{border:1px solid #c3cbd4;border-top:0;margin:15px 0 10px 180px;width:600px}.shared-controls-textcontrol{display:inline-block;margin-bottom:0}.review-extractions-form{border-top:1px solid #c3cbd4;display:inline-block;padding-top:15px;width:100%}.sample-event-container{margin-top:15px}.sample-event-label{padding-top:0!important}.events-wrapper{margin-left:180px}.event-text{font-family:Splunk Platform Mono,Inconsolata,Consolas,Droid Sans Mono,Monaco,Courier New,Courier,monospace;line-height:20px;margin-bottom:15px;margin-top:5px;padding-bottom:0;white-space:pre-wrap;word-wrap:break-word}.save-extractions-form .shared-controls-textcontrol{width:450px}.save-extractions-form .shared-controls-textcontrol input[type=text]{display:inline-block;width:250px}.extract-prelabel{font-weight:500;position:relative;top:2px}.confirmation-body{margin-bottom:25px;margin-top:25px}.confirmation-body .next-step-links{line-height:25px;margin-left:25px}.confirmation-body .next-step-links i{font-size:15px;margin-right:10px}.confirmation-body h4{font-size:16px;font-weight:400}.extraction-viewer{margin-bottom:10px}.extraction-viewer .regex-text-container{border:1px solid #c3cbd4;margin-bottom:5px;margin-top:10px;padding:10px}.extraction-viewer .regex-button-container a.btn,.extraction-viewer .search-button-container a.btn{float:right;margin-left:10px}.extraction-viewer .search-button-container{padding-bottom:10px}.results-control-bar-placeholder{display:inline}.results-control-bar-placeholder .match-results-control-bar{padding-left:20px;padding-right:10px}.results-control-bar-placeholder .match-results-control-bar .spinner-container>.spinner-small{margin-right:5px;margin-top:2px}.results-control-bar-placeholder .match-results-control-bar .search-filter-container .checkbox{padding-top:3px}.results-table table{margin-bottom:0}.results-table table .selected-master-event-cell,.results-table table .selected-master-event-cell:hover{background-color:#006297!important;color:#f2f4f5!important}.results-table table tbody tr{position:relative}.add-sample-event-button{background-color:#006297;border-radius:3px;color:#3c444d;cursor:pointer;font-family:Splunk Platform Sans,Proxima Nova,Roboto,Droid,Helvetica Neue,Helvetica,Arial,sans-serif;margin-top:-23px;padding:3px 10px;position:absolute;right:3px}.interactive-extraction-cell.field-extraction>.add-sample-event-button{margin-top:0;top:3px}.nav-tabs{background-color:#f2f4f5;background-image:-webkit-gradient(linear,left top,left bottom,from(#f2f4f5),to(#f2f4f5));background-image:linear-gradient(180deg,#f2f4f5,#f2f4f5);border-top:none;height:auto;overflow-x:auto;overflow-y:hidden;padding-top:15px;white-space:nowrap}.nav-tabs>li{display:inline-block;float:none}.shared-tabcontrols-tabbase{min-width:-webkit-min-content}.existing-extractions-list{padding:15px}.existing-extractions-list .source-name,.existing-extractions-list .sourcetype-name{font-weight:700}.existing-extractions-list .table{border:1px solid #c3cbd4;margin-top:20px;width:385px}.existing-extractions-list .extractions-sidebar-instructions{margin-top:10px}.sidebar{overflow:auto;width:415px}.edit-extraction-action,.remove-required-text{padding-left:20px!important}.dropdown-menu li.dropdown-title-field-name,li.dropdown-title-required-text{margin-left:10px;padding:7px 10px}.extraction-form-mode-toggle div.btn-group-radio{margin-left:85px;padding-bottom:10px}.extraction-form-mode-toggle div.btn-group-radio .btn{width:82px}.require-message{padding-bottom:20px;padding-top:10px}.field-extraction-form{background-color:#f2f4f5;padding:10px 0 0;width:269px}.field-extraction-form .extraction-form-container{padding:0 10px}.field-extraction-form .extraction-form-buttons{padding-bottom:10px}.field-extraction-form .extraction-form-buttons .submit-button{margin-right:10px}.field-extraction-form .alerts{margin:0 10px}.field-extraction-form .alerts .alert{margin:0;padding:8px 8px 8px 27px}.no-fields-message-container{margin:0 10px}.no-fields-message-container .no-fields-message{margin:0;padding:8px 8px 18px 42px;position:relative}.no-fields-message-container .no-fields-message .icon-alert{color:#dc4e41;font-size:200%;left:10px;position:absolute;top:13px}.extraction-form-content .no-fields-message{padding:5px 10px 10px}.extraction-form-content .selected-text-control{overflow:hidden}.extraction-form-content .selected-text-control .selected-text{width:165px;word-wrap:break-word;font-weight:700}.disabled a,a.disabled{color:#6b7785;cursor:default}.disabled a:hover,a.disabled:hover{text-decoration:none}',""])},638:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".side-bar-master .background-cover{height:100%;left:0;position:fixed;top:0;width:100%;z-index:1038}.side-bar-master .sidebar{background-color:#fff;border-left:1px solid #c3cbd4;height:100%;position:fixed;right:0;top:0;z-index:1038}.side-bar-master .sidebar .close{margin:3px;position:absolute;right:0}.side-bar-master .sidebar.first{-webkit-box-shadow:0 0 12px rgba(0,0,0,.3);box-shadow:0 0 12px rgba(0,0,0,.3)}",""])},641:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,'.required-text{background-color:#c3cbd4}.highlighted-cat1{background-color:#7fb6ce}.highlighted-cat2{background-color:#a7d2c2}.highlighted-cat3{background-color:#f6ccb0}.highlighted-cat4{background-color:#d7abad}.highlighted-cat5{background-color:#dbe3ad}.highlighted-cat6{background-color:#b1d9d9}.highlighted-cat7{background-color:#94a7b8}.highlighted-cat8{background-color:#b9c3ca}.highlighted-cat9{background-color:#f6e8a8}.highlighted-cat10{background-color:#deccb9}.highlighted-cat11{background-color:#b7acca}.highlighted-cat12{background-color:#b2cab0}.highlighted-cat13{background-color:#a5b2bf}.highlighted-cat14{background-color:#e9ddd4}.highlighted-cat15{background-color:#66c3d0}.highlighted-cat16{background-color:#aab396}.highlighted-cat17{background-color:#f3f0d7}.highlighted-cat18{background-color:#c1bcb3}.highlighted-cat19{background-color:#b6d7a3}.highlighted-cat20{background-color:#e1b2a1}.highlighted-cat21{background-color:#dec4ba}.highlighted-cat22{background-color:#abe6e8}.highlighted-cat23{background-color:#91b282}.highlighted-cat24{background-color:#f8b7ce}.highlighted-cat25{background-color:#cba3c2}.highlighted-cat26{background-color:#cccdce}.highlighted-cat27{background-color:#c3ab89}.highlighted-cat28{background-color:#c7e6a3}.highlighted-cat29{background-color:#ada9c8}.highlighted-cat30{background-color:#a4bbe0}.highlighted-match{color:#3c444d}.highlighted-existing-match,.highlighted-match,.highlighted-match-selected,.required-text{border-radius:4px;padding:2px 3px}.highlighted-existing-match{-webkit-box-shadow:inset 0 0 0 2px;box-shadow:inset 0 0 0 2px}.highlighted-match-selected{-webkit-box-shadow:inset 0 0 2px 2px rgba(0,164,253,.5);box-shadow:inset 0 0 2px 2px rgba(0,164,253,.5)}.preview-container{background-color:#f2f4f5;border-top:1px solid #c3cbd4;clear:both;min-height:300px}.preview-container .results-control-bar-placeholder{padding-left:20px;padding-right:10px}.preview-container .job-status-placeholder,.preview-container .job-status-row{padding-bottom:10px;padding-top:10px}.preview-container .count-container{display:inline-block}.preview-container .count-container .icon-check{color:#53a051}.preview-container .search-filter-container{padding-right:20px}.preview-container .search-filter-container .control-group{display:inline-block}.preview-container .search-filter-container .control-group .control-label{margin-top:5px}.preview-container .search-filter-container .control-group .controls{display:inline-block}.preview-container .pagination-container{display:inline}.preview-container .controls-row .filter-input-control{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-bottom:0;margin-right:10px;vertical-align:middle;width:300px}.preview-container .controls-row .filter-input-control .filter-input{margin-bottom:0}.preview-container .shared-flashmessages{padding-left:50px;padding-top:25px}.preview-container .controls-row{clear:both;padding-bottom:10px}.preview-container .controls-row>div{padding-bottom:20px}.preview-container .apply-filter-button{margin-right:40px}.preview-view-stack{margin-top:-1px}.preview-view-stack .nav-tabs{background-image:none}.preview-view-stack .nav-tabs .results-tab-last{margin-right:10px}.preview-view-stack .tab-content{overflow:visible}.rex-preview-view-stack li:not(:first-child)>.tab-label{padding-left:30px}.rex-preview-view-stack .tab-label:after{border-radius:12px;content:"";height:12px;left:14px;position:absolute;top:12px;width:12px}.rex-preview-view-stack li:nth-child(10n+2) .tab-label:after{background-color:#7fb6ce}.rex-preview-view-stack li:nth-child(10n+3) .tab-label:after{background-color:#a7d2c2}.rex-preview-view-stack li:nth-child(10n+4) .tab-label:after{background-color:#f6ccb0}.rex-preview-view-stack li:nth-child(10n+5) .tab-label:after{background-color:#d7abad}.rex-preview-view-stack li:nth-child(10n+6) .tab-label:after{background-color:#dbe3ad}.rex-preview-view-stack li:nth-child(10n+7) .tab-label:after{background-color:#b1d9d9}.rex-preview-view-stack li:nth-child(10n+8) .tab-label:after{background-color:#94a7b8}.rex-preview-view-stack li:nth-child(10n+9) .tab-label:after{background-color:#b9c3ca}.rex-preview-view-stack li:nth-child(10n+10) .tab-label:after{background-color:#f6e8a8}.field-extraction-form{padding:10px}.field-extraction-form:last-child{margin:0}.field-extraction-form .control-label{text-align:left;width:75px}.field-extraction-form .controls{margin-left:85px}.field-extraction-form .buttons-container{border-top:1px solid #c3cbd4;padding-top:5px;text-align:right}.results-table .graph-bar{background-color:#818d99;background-image:-webkit-gradient(linear,left top,left bottom,from(#c3cbd4),to(#818d99));background-image:linear-gradient(180deg,#c3cbd4,#818d99);height:20px;margin:0 20px 0 0;max-width:100%}',""])},"collections/services/data/props/Extractions":function(e,t,i){var s,n;s=[i("collections/SplunkDsBase"),i("models/services/data/props/Extraction")],void 0===(n=function(e,t){return e.extend({model:t,url:"data/props/extractions"})}.apply(t,s))||(e.exports=n)},"models/services/configs/Transforms":function(e,t,i){var s,n;s=[i("require/underscore"),i("models/SplunkDBase")],void 0===(n=function(e,t){return t.extend({url:"configs/conf-transforms",urlRoot:"configs/conf-transforms",initialize:function(){t.prototype.initialize.apply(this,arguments)},whiteListAttributes:function(t){return e.extend(this.entry.content.attributes,{},t)}})}.apply(t,s))||(e.exports=n)},"models/services/data/props/Extraction":function(e,t,i){var s,n;s=[i("models/SplunkDBase")],void 0===(n=function(e){var t=e.extend({url:"data/props/extractions"});return t.Entry=e.Entry.extend({}),t.Entry.Content=e.Entry.Content.extend({toJSON:function(){var t=e.Entry.Content.prototype.toJSON.apply(this,arguments);return t.name&&(t.name=t.name.replace(/^EXTRACT-/,"").replace(/^REPORT-/,"")),"Inline"===t.type?t.type="EXTRACT":"Uses transform"===t.type&&(t.type="REPORT"),t}}),t}.apply(t,s))||(e.exports=n)},"models/services/field_extractor/RegexGenerator":function(e,t,i){var s,n;s=[i("shim/jquery"),i("models/Base"),i("util/splunkd_utils")],void 0===(n=function(e,t,i){return t.extend({url:"field_extractor/generate_regex",sync:function(s,n,r){if("read"!==s)throw new Error("Sync operation not supported: "+s);r=e.extend(!0,{},r);var a=i.prepareSyncOptions(r,n.url);return t.prototype.sync.call(this,s,n,a)}})}.apply(t,s))||(e.exports=n)},"models/shared/dataenrichment/ExtractionEventsFetchData":function(e,t,i){var s,n;s=[i("models/shared/fetchdata/ResultsFetchData")],void 0===(n=function(e){return e.extend({generateSortSubquery:function(t,i){return"_raw"===t?"asc"===i?"| reverse":"":e.prototype.generateSortSubquery.apply(this,arguments)}})}.apply(t,s))||(e.exports=n)},"models/shared/dataenrichment/FieldExtraction":function(e,t,i){var s,n;s=[i("require/underscore"),i("models/Base"),i("util/field_extractor_utils")],void 0===(n=function(e,t,i){return t.extend({defaults:{regex:"",fieldName:""},validation:{fieldName:[{required:!0,pattern:/^[a-zA-Z]+[a-zA-Z0-9_]*$/,msg:e("Field names must start with a letter and contain only letters, numbers, and underscores.").t()},{fn:"validateFieldName"}]},validateFieldName:function(t){var s=this.get("regex");return s&&e(i.getCaptureGroupNames(s)).contains(t)?e("Field names must be unique.").t():t.length>32?e("Field names must be 32 characters or less.").t():void 0}})}.apply(t,s))||(e.exports=n)},"routers/FieldExtractorRouter":function(e,t,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),i("routers/Base"),i("collections/services/data/props/Extractions"),i("collections/knowledgeobjects/Sourcetypes"),i("collections/services/authorization/Roles"),i("collections/services/data/ui/Times"),i("models/services/data/props/Extraction"),i("models/search/Job"),i("models/services/search/jobs/Summary"),i("models/services/search/jobs/Result"),i("views/shared/FlashMessages"),i("views/field_extractor/FieldExtractorMaster"),i("util/splunkd_utils"),i("util/field_extractor_utils"),i("shim/splunk.util"),i("services/WebFeatures")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c,h,p,u,m,g,f){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.fetchUser=!0,this.enableAppBar=!1,this.setPageTitle(e("Field Extractor").t()),this.collection.extractions=new s,this.collection.sourcetypes=new n,this.collection.roles=new r,this.collection.times=new a,this.collection.sourcetypes.fetchData.set({count:1e3},{silent:!0}),this.model.extraction=new o,this.deferreds.times=t.Deferred()},page:function(s,n,r){i.prototype.page.apply(this,arguments),t.when(this.deferreds.webFeatures,this.model.classicurl.fetch()).done(e((function(){var i=t.when(this.bootstrapRoles(),this.deferreds.pageViewRendered,this.deferreds.serverInfo,this.deferreds.user);if(this.model.classicurl.has("sid"))this.sid=this.model.classicurl.get("sid"),i=t.when(i,this.model.classicurl.has("offset")||this.fetchAllowedSourcetypes().then(e((function(e){return 1===e.length?(this.sourcetype=e[0],t.Deferred().resolve()):this.bootstrapSourcetypes(e)})).bind(this))),this.model.classicurl.has("offset")&&(i=t.when(i,this.bootstrapEventByOffset()));else if(this.model.classicurl.has("extractionId")){var s=this.bootstrapExtractionById(this.model.classicurl.get("extractionId"));i=t.when(i,s.then(e((function(){this.sourcetype=this.model.extraction.entry.content.get("stanza")})).bind(this)))}else this.model.classicurl.has("sourcetype")?this.sourcetype=this.model.classicurl.get("sourcetype"):i=t.when(i,this.bootstrapSourcetypes());i.done(e((function(){this.bootstrapTimesCollection(),t.when(this.bootstrapExtractions(),this.deferreds.times).done(e((function(){this.shouldRender&&this.addPageViewEl(this.pageView.el),this.masterView&&(this.stopListening(this.masterView),this.masterView.remove()),this.masterView=new p({sourcetype:this.sourcetype,sid:this.sid,existingExtractions:this.existingExtractions,masterEvent:this.masterEvent,model:{application:this.model.application,user:this.model.user,extraction:this.model.extraction,serverInfo:this.model.serverInfo},collection:{extractions:this.collection.extractions,sourcetypes:this.collection.sourcetypes,roles:this.collection.roles,times:this.collection.times},deferreds:{times:this.deferreds.times}}),this.masterView.render().appendTo(this.pageView.$(".main-section-body")),this.onAfterPageRender()})).bind(this))})).bind(this)).fail(e(this.displayLoadError).bind(this))})).bind(this))},bootstrapSourcetypes:function(i){var s=this.model.application.pick("app","owner");return i&&(s.search=e(i).map((function(e){return"name="+g.searchEscape(e)})).join(" OR ")),this.collection.sourcetypes.fetch({data:s}).then(e((function(){if(0===this.collection.sourcetypes.length)return t.Deferred().reject("job-sourcetype-error")})).bind(this),(function(){return"job-sourcetype-error"}))},bootstrapExtractions:function(){if(this.sourcetype){var t="type=inline AND stanza="+this.sourcetype;return this.collection.extractions.fetchData.set({search:t,count:0},{silent:!0}),this.collection.extractions.fetch({data:this.model.application.pick("app","owner")}).done(e((function(){var e=this.collection.extractions.filter((function(e){return!/ in [a-zA-Z0-9_]+$/.test(e.entry.content.get("value"))}));this.collection.extractions.reset(e)})).bind(this))}},bootstrapTimesCollection:function(){this.collection.times.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner"),count:-1},success:function(e,t){this.deferreds.times.resolve()}.bind(this),error:function(e,t){this.deferreds.times.resolve()}.bind(this)})},bootstrapRoles:function(){return this.collection.roles.fetch({data:this.model.application.pick("app","owner")})},bootstrapExtractionById:function(e){return this.model.extraction.clear(),this.model.extraction.set(this.model.extraction.idAttribute,e),this.model.extraction.fetch().then(null,(function(){return"extraction-fetch-error"}))},fetchAllowedSourcetypes:function(){var i=new d;return i.set(i.idAttribute,u.fullpath(l.prototype.url()+"/"+this.sid+"/summary",this.model.application.pick("app","owner"))),i.fetch({data:{top_count:100,f:"sourcetype"}}).then(e((function(){var s=i.fields.get("sourcetype");return s?e(s.get("modes")).pluck("value"):t.Deferred().reject("job-sourcetype-error")})).bind(this),(function(){return"job-fetch-error"}))},bootstrapEventByOffset:function(){var i=new c;i.set(i.idAttribute,u.fullpath(l.prototype.url()+"/"+this.sid+"/events",this.model.application.pick("app","owner")));var n={offset:this.model.classicurl.get("offset"),count:1,field_list:"_raw,sourcetype",max_lines:m.MAX_EVENT_LINES};return i.fetch({data:n}).then(e((function(){var r=i.results.at(0);if(!r.has("sourcetype"))return t.Deferred().reject("job-sourcetype-error");this.masterEvent=r.get("_raw")[0],this.sourcetype=r.get("sourcetype")[0];var a="type=inline AND stanza="+this.sourcetype,o=new s;return o.fetchData.set({search:a,count:0},{silent:!0}),o.fetch({data:this.model.application.pick("app","owner")}).then(e((function(){var i=o.filter((function(e){return!/ in [a-zA-Z0-9_]+$/.test(e.entry.content.get("value"))}));o.reset(i);var s="search index=* sourcetype="+g.searchEscape(this.sourcetype),r=[];o.each(function(e,t){var i=g.sprintf(" | rex field=_raw %s offset_field=%s"+t,g.searchEscape(e.entry.content.get("value"),{forceQuotes:!0}),m.OFFSET_FIELD_NAME);r.push(m.OFFSET_FIELD_NAME+t),s+=i}.bind(this));var a=new c;return a.set(a.idAttribute,u.fullpath(l.prototype.url()+"/"+this.sid+"/events",this.model.application.pick("app","owner"))),n={offset:this.model.classicurl.get("offset"),count:1,field_list:r.join(),search:s,max_lines:m.MAX_EVENT_LINES},a.fetch({data:n}).then(e((function(){for(var i,s=a.results.at(0),n=[],o=0;o<r.length;o++)i=s.get(r[o])?s.get(r[o])[0]:null,n=n.concat(i?m.parseBoundingGroupString(i,!0):[]);return this.existingExtractions=e(n).sortBy("startIndex"),t.Deferred().resolve()})).bind(this),e((function(e,t,i){if("responseText"in e){var s=JSON.parse(e.responseText);"messages"in s&&s.messages.length>0&&"text"in s.messages[0]&&this.displayLoadError("bad-request",s.messages[0].text)}})).bind(this))})).bind(this))})).bind(this),(function(){return"job-fetch-error"}))},displayLoadError:function(i,s){var n=[],r=new h;"job-fetch-error"===i?n.push(g.sprintf(e("Unknown sid: %s").t(),e.escape(this.sid))):"extraction-fetch-error"===i?n.push(g.sprintf(e("Extraction not found: %s").t(),e.escape(this.model.extraction.id))):"job-sourcetype-error"===i?n.push(g.sprintf(e("The events associated with this job have no sourcetype information: %s").t(),e.escape(this.sid))):"bad-request"===i&&n.push(e(e.escape(s)).t()),e(n).each((function(t){r.flashMsgHelper.addGeneralMessage(e.uniqueId("field-extractor-error"),{type:u.ERROR,html:t})})),t.when(this.deferreds.pageViewRendered).done(e((function(){this.addPageViewEl(this.pageView.el),r.render().appendTo(this.pageView.$(".main-section-body"))})).bind(this))},onAfterPageRender:function(){if(this.sid){var t=new l({},{delay:l.DEFAULT_LONG_POLLING_INTERVAL,processKeepAlive:!0});t.set(t.idAttribute,this.sid),t.fetch({data:this.model.application.pick("app","owner")}).done(e((function(){t.isDone()||(t.startPolling(),t.stopKeepAlive())})).bind(this))}}})}.apply(t,s))||(e.exports=n)},"util/datamodel/search_utils":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore")],void 0===(n=function(e,t){return{generateFieldSubSearch:function(e,i){var s=" | fields "+e.join(","),n=[];return"_raw"==i||t(e).contains("_raw")||n.push("_raw"),"_time"==i||t(e).contains("_time")||n.push("_time"),n.length>0&&(s+=" | fields - "+n.join(",")),s}}}.apply(t,s))||(e.exports=n)},"util/field_extractor_utils":function(e,t,i){var s,n;s=[i("require/underscore")],void 0===(n=function(e){var t=function(e){var t=["cat1","cat2","cat3","cat4","cat5","cat6","cat7","cat8","cat9","cat10"];return t[e%t.length]},i=function(i,s){var n;return e(s).each((function(e,t){e===i&&(n=t)})),void 0===n?"":t(n)},s=function(t,i,s){var n=t.startIndex,r=t.endIndex;return!e.any(i,(function(e){return!(e.hidden&&!s||t.fieldName===e.fieldName)&&(n<=e.startIndex&&r>e.startIndex||n>=e.startIndex&&n<e.endIndex)}))},n="select-sample-mode",r="select-delim-mode",a="select-fields-mode",o="validate-fields-mode",l="save-fields-mode",d="confirmation-mode",c="manual-mode",h=function(e,t){return t===c&&e!==d&&e!==l};return{getCaptureGroupNames:function(t){var i,s=[];return i=t.match(/\(\?(P)?<([A-Za-z][A-Za-z0-9_]*)>/g),e(i).each((function(e){var t=e.replace("(?P<","");t===e&&(t=e.replace("(?<",""));var i=t.replace(">","");s.push(i)})),s},getMultiCharDelimRegex:function(e){for(var t="",i="",s=0;s<e.length;s++){if(e.charCodeAt(s)>127)throw new Error("Delimiters can only contain ASCII characters, use Regular Expressions for other character sets");if("\\"===e[s]){if(s==e.length-1)throw new Error("Delimiter contains a dangling backslash at the end");if("\\"==e[s+1])throw new Error("Backslash is not a valid delimiter");if("r"!=e[s+1]&&"n"!=e[s+1]&&"t"!=e[s+1])continue;t+=i+e[s]+e[s+1],++s}else t+=i+"\\x"+e.charCodeAt(s).toString(16);i="|"}return t},rectifyNewLineOffset:function(e,t){for(var i={},s=0,n=0;n<t.length;n++)"\r"!=t.charAt(n)||"\n"!=t.charAt(n+1)?i[n-s]=n:s++;return e.startIndex=i[e.startIndex],e.endIndex=i[e.endIndex],e},replaceBoundingGroupsWithTemplate:function(t,s,n,r,a,o){var l=(s||[]).concat([]),d="",c=0;if(n&&n.text){var h=n.text,p=[],u=0,m=-1;if(n.startIndex)m=n.startIndex;else{for(;-1!==(u=t.indexOf(h,u+1));)p.push(u);e(p).any((function(e){for(var t=e,i=e+h.length,s=0;s<l.length;s++){var n=l[s];if(t<n.endIndex&&i>n.startIndex)return!1}return m=t,!0}))}-1!==m&&l.push({requiredText:!0,startIndex:m,endIndex:m+h.length})}for(var g=e(l).sortBy("startIndex"),f=0;f<g.length;f++)g[f].hidden&&(g.splice(f,1),f--);for(f=0;f<g.length;f++){var v=g[f];if(v.endIndex<c)return"";a&&v.rawText&&(v.tempField=!0);var x=Math.max(v.startIndex,c);d+=e.escape(t.substring(c,x));var b=e.extend({selectedText:t.substring(x,v.endIndex)},v);if(v.requiredText)d+=e(this.requiredTextTemplate).template()(b);else if(v.tempField&&a){d+=e(a).template()(b)}else if(-1===r&&a===this.counterExampleTemplate)d+=e(a).template(b);else if(a===this.highlightedContentTemplate&&o){var w=e(o).sortBy("startIndex"),E=e(w).pluck("fieldName");b.color=i(v.fieldName,E),d+=e(this.highlightedContentTemplate).template()(b)}else{E=e.map(g,(function(e){return v.existing?e.existing?e.fieldName:"":e.existing?"":e.fieldName}));for(var _=0;_<E.length;_++)E[_]||(E.splice(_,1),_--);b.color=i(v.fieldName,E),d+=(v.existing?e(this.highlightedExistingContentTemplate).template():e(this.highlightedContentTemplate).template())(b)}c=v.endIndex}return d+=e.escape(t.substring(c))},parseBoundingGroupString:function(t,i){var s,n=[],r=t.split("&"),a=/(^[A-Za-z][A-Za-z0-9_]*)[\=](\d*)[\-](\d*)/;return e(r).each((function(e){if(""===(s=a.exec(e))[1])throw new Error("Invalid field extraction name");var t=parseInt(s[3],10)+1;i?n.push({fieldName:s[1],startIndex:parseInt(s[2],10),endIndex:t,existing:i,hidden:!0}):n.push({fieldName:s[1],startIndex:parseInt(s[2],10),endIndex:t})})),e(n).sortBy("startIndex")},canShowExtraction:s,containsNoOverlappingExtractions:function(t){return!e.any(t,(function(e){return!s(e,t,!0)}))},getSelectionObject:function(t,i,s){var n=t.getRangeAt(0).toString(),r=i.text(),a=t.anchorOffset,o=t.focusOffset,l=r.indexOf(n),d=l+n.length;if(a>o){var c=a;a=o,o=c}if(-1!==l&&""!==n){for(var h,p,u,m=0,g=[];(h=r.indexOf(n,m))>-1;)g.push(h),m=h+1;if(g.length>1){var f=e.pluck(s,"endIndex"),v=!1;for(p=0;p<g.length&&!v;p++)for(u=0;u<f.length;u++)parseInt(g[p],10)===parseInt(f[u],10)+a&&(a=parseInt(g[p],10),o=parseInt(g[p],10)+n.length,v=!0);a<l&&(a=l,o=d)}else a=l,o=d;return{rawText:r,selectedText:n,startIndex:a,endIndex:o}}},getFieldColor:i,getFieldColorWithIndex:t,isEditFieldsMode:function(e,t){return e===a||e===o||e===l||h(e,t)},isEventsTableMode:function(e,t){return e===n||e===a||e===r||e===o||h(e,t)},isManualEditorMode:h,highlightedContentTemplate:'<span class="highlighted-match highlighted-<%- color %>" data-field-name="<%- fieldName %>" data-start-index="<%- startIndex %>" data-end-index="<%- endIndex %>"><%- selectedText %></span>',highlightedExistingContentTemplate:'<span class="highlighted-existing-match highlighted-border-<%- color %>" title="<%- fieldName %>" data-field-name="<%- fieldName %>" data-start-index="<%- startIndex %>" data-end-index="<%- endIndex %>"><%- selectedText %></span>',tempHighlightedContentTemplate:'<div class="highlighted-match-selected" data-start-index="<%- startIndex %>" data-end-index="<%- endIndex %>" style="display:inline"><%- selectedText %></div>',requiredTextTemplate:'<div class="required-text" data-start-index="<%- startIndex %>" data-end-index="<%- endIndex %>" style="display:inline"><%- selectedText %></div>',counterExampleTemplate:'<span class="removed-text"><%- selectedText %></span>',MATCH_FIELD_NAME:"_is_match",INTERACTIVE_CELL_CLASS:"interactive-extraction-cell",HIGHLIGHTED_MATCH_CLASS:"highlighted-match",HIGHLIGHTED_MATCH_CLASS_SELECTED:"highlighted-match-selected",HIGHLIGHTED_EXISTING_MATCH_CLASS:"highlighted-existing-match",REQUIRED_TEXT_CLASS:"required-text",OFFSET_FIELD_NAME:"_extracted_fields_bounds",MAX_EVENT_LINES:20,SAMPLE_EVENT_LIMIT:4,SELECT_SAMPLE_MODE:n,SELECT_METHOD_MODE:"select-method-mode",SELECT_DELIM_MODE:r,SELECT_FIELDS_MODE:a,VALIDATE_FIELDS_MODE:o,SAVE_FIELDS_MODE:l,CONFIRMATION_MODE:d,NO_INTERACTION_MODE:"manual-mode",INTERACTION_MODE:"automatic-mode",CLUSTERING_NONE:"clustering_none",CLUSTERING_DIVERSE:"clustering_diverse",CLUSTERING_OUTLIERS:"clustering_outliers",VIEW_ALL_EVENTS:"view-all-events",VIEW_MATCHING_EVENTS:"view-matching-events",VIEW_NON_MATCHING_EVENTS:"view-non-matching-events",DELIM_MAP:{space:" ",comma:",",tab:"\\t",pipe:"|"},DELIM_CONF_MAP:{space:" ",comma:",",tab:"\\t",pipe:"|"}}}.apply(t,s))||(e.exports=n)},"views/field_extractor/ConfirmationView":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/Base"),i("shim/splunk.util"),i("uri/route")],void 0===(n=function(e,t,i,s,n,r,a){return n.extend({moduleId:s.i,render:function(){var e=a.getContextualPageRouter(this.model.application),t="",i="";return"sourcetype"===this.model.state.get("type")?(t=e.search({data:{q:r.sprintf("index=_* OR index=* sourcetype=%s",r.searchEscape(this.model.state.get("sourcetype")))}}),i=e.field_extractor({data:{sourcetype:this.model.state.get("sourcetype")}})):t=e.search({data:{q:r.sprintf('index=_* OR index=* source="%s"',r.searchEscape(this.model.state.get("source")))}}),this.$el.html(this.compiledTemplate({exploreFieldsHref:t,extractMoreFieldsHref:i})),this},template:'                <div class="confirmation-body">                    <h4><%- _("What would you like to do next?").t() %></h4>                    <div class="next-step-links">                        <div>                            <i class="icon-arrow-right"></i>                            <a href="<%- exploreFieldsHref %>" class="explore-fields-search"><%- _("Explore the fields I just created in Search").t()%></a>                        </div>                        <% if (extractMoreFieldsHref) { %>                            <div>                                <i class="icon-arrow-right"></i>                                <a href="<%- extractMoreFieldsHref %>" class="extract-more-fields"><%- _("Extract more fields").t()%></a>                            </div>                        <% } %>                    </div>                </div>            '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/CounterExampleEditor":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("util/field_extractor_utils")],void 0===(n=function(e,t,i,s,n){return s.extend({className:"counter-examples-container",moduleId:i.i,events:{"click .remove-button":function(t){t.preventDefault(),this.$el.hasClass("disabled")||this.trigger("action:removeCounterExample",parseInt(e(t.currentTarget).data("counter-example-index"),10))}},initialize:function(){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:counterExamples",this.render)},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")},render:function(){return this.$el.html(this.compiledTemplate({counterExamples:this.model.state.get("counterExamples")?this.model.state.get("counterExamples").map(this.highlightEventText,this):[]})),t(this.model.state.get("counterExamples")).each(function(t,i){var s=e(this.$el.find(".counter-example-wrapper")[i]).find(".event-text").height()/2;0===i?e(this.$el.find(".remove-button")[i]).css("margin-top",s+3):e(this.$el.find(".remove-button")[i]).css("margin-top",s-5)}.bind(this)),this},highlightEventText:function(e){return n.replaceBoundingGroupsWithTemplate(e.rawText,[t(e).pick("fieldName","startIndex","endIndex")],{text:""},-1,n.counterExampleTemplate)},template:'        <% _(counterExamples).each(function(counterExample, i) { %>            <a href="#" class="remove-button" data-counter-example-index="<%- i %>"><i class="icon-x"></i></a>            <div class="event-wrapper counter-example-wrapper">                <span class="event-text"><%= counterExample %></span>            </div>        <% }) %>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/EditDelimExtractionDropdown":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("shim/jquery"),i("models/shared/dataenrichment/FieldExtraction"),i("views/Base"),i("views/shared/FlashMessages")],void 0===(n=function(e,t,i,s,n,r){return n.extend({moduleId:t.i,tagName:"form",className:"form-horizontal field-extraction-form",initialize:function(){n.prototype.initialize.apply(this,arguments),this.startIndex=this.options.startIndex,this.delimFieldNames=this.model.state.get("delimFieldNames")||{},this.model.fieldName=new s({regex:this.model.state.get("regex")}),this.children.flashMessages=new r({model:this.model.fieldName})},events:{"click .submit-button":"onSubmit",keypress:function(e){13===e.which&&this.onSubmit(e)}},setModalBody:function(){var e=i(".popdown-dialog.open").width();i(".popdown-dialog.open").width(e),this.setButtonText("Rename Field"),this.children.flashMessages.$el.show()},setButtonText:function(t){this.getSubmitButton().text(e(t).t())},getSubmitButton:function(){return this.$(".extraction-form-buttons .buttons-container .submit-button")},focus:function(){this.$(".field-name-input").focus()},onSubmit:function(e){if(e.preventDefault(),!this.getSubmitButton().hasClass("disabled")){var t=this.$(".field-name-input").val();this.model.fieldName.set({fieldName:t}),this.model.fieldName.isValid(!0)&&this.trigger("action:renameField",t,this.startIndex)}},render:function(){this.fieldName=this.delimFieldNames[this.startIndex];var e=this.options.startIndex+1,t=this.fieldName==="field"+e;return this.$el.html(this.compiledTemplate({fieldName:this.fieldName,usePlaceholder:t})),t||this.$(".field-name-input").val(this.fieldName),this.setModalBody(),this.children.flashMessages.render().prependTo(this.el),this},template:'        <div class="extraction-form-container">            <div class="control-group">                <label class="control-label"><%- _("Field Name").t() %></label>                <div class="controls controls-join">                    <div class="control">                        <input type="text" class="input-medium field-name-input" <% if(usePlaceholder){ %>placeholder="<%- fieldName %>"<%}%> />                    </div>                </div>            </div>        </div>        <div class="extraction-form-buttons">            <div class="buttons-container">                <a href="#" class="btn btn-primary submit-button"></a>            </div>        </div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/EditExtractionDropdown":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("shim/jquery"),i("views/Base"),i("views/shared/PopTart"),i("views/field_extractor/RenameExtractionDialog"),i("views/shared/dialogs/TextDialog"),i("shim/splunk.util")],void 0===(n=function(e,t,i,s,n,r,a,o){return n.extend({moduleId:t.i,className:"dropdown-menu dropdown-menu-narrow",initialize:function(){n.prototype.initialize.apply(this,arguments),this.fieldValue=this.options.fieldValue,this.fieldName=this.options.fieldName},events:{"click a.remove-extraction":function(t){t.preventDefault(),this.children.removeDialog=new a({id:"modal_delete"}),this.children.removeDialog.settings.set("primaryButtonLabel",e("Remove").t()),this.children.removeDialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.removeDialog.settings.set("titleLabel",e("Remove Extraction").t()),this.children.removeDialog.setText(o.sprintf(e("Are you sure you want to remove %s?").t(),"<em>"+e.escape(this.fieldName)+"</em>")),this.children.removeDialog.on("click:primaryButton",(function(e){this.removeHandler()}),this),this.children.removeDialog.$el.on("keypress",e.bind((function(e){13===e.which&&this.removeHandler()}),this)),this.children.removeDialog.on("hide",(function(){this.children.removeDialog.remove()}),this),i("body").append(this.children.removeDialog.render().el),this.children.removeDialog.show()},"click a.rename-extraction":function(e){if(e.preventDefault(),this.$el.find(".rename-extraction").hasClass("disabled"))return!1;this.children.renameDialog=new r({fieldValue:this.fieldValue,fieldName:this.fieldName,onHiddenRemove:!0,model:{state:this.model.state}}),this.children.renameDialog.on("action:rename",(function(e){this.trigger("action:rename",e),this.children.renameDialog.hide()}),this),i("body").append(this.children.renameDialog.render().el),this.children.renameDialog.show()}},removeHandler:function(){this.trigger("action:remove",this.fieldName),this.children.removeDialog.hide()},render:function(){var e=!1;this.model.state.get("regex")&&(e=!0);var t=this.compiledTemplate({fieldName:this.fieldName,eventType:this.options.eventType,enabled:e});return this.el.innerHTML=n.prototype.template_menu,this.$el.append(t),this},template:'                <ul class="first-group">                    <li class="dropdown-title-field-name"><%- fieldName %></li>                </ul>                <ul class="second-group">                    <% if(eventType === "master") { %>                        <li><a class="edit-extraction-action rename-extraction <%- enabled === false ? "disabled" : ""%>" href="#"><%- _("Rename Field").t() %></a></li>                    <% } %>                    <li><a class="edit-extraction-action remove-extraction" href="#"><%- _("Remove Field").t() %></a></li>                </ul>            '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/ExistingExtractionsList":function(e,t,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),e,i("views/Base"),i("util/field_extractor_utils"),i("util/keyboard"),i("uri/route")],void 0===(n=function(e,t,i,s,n,r,a){return s.extend({moduleId:i.i,className:"existing-extractions-list",initialize:function(){s.prototype.initialize.apply(this,arguments),this.listenTo(this.collection.extractions,"request",this.renderLoading),this.listenTo(this.collection.extractions,"sync reset",this.render),this.options.hideHighlight?this.highlight=!1:this.highlight=!0},events:{"click .fields-settings-page-button":function(e){e.preventDefault(),this._handleViewFieldSettings()},"click label.checkbox.unchecked:not(.disabled)":function(e){e.preventDefault(),this._selectCheckbox(t(e.target))},"click label.checkbox.checked:not(.disabled)":function(e){e.preventDefault(),this._deselectCheckbox(t(e.target))},keydown:function(e){e.which===r.KEYS.TAB&&r.handleCircularTabbing(this.$el,e)}},renderLoading:function(){this.$el.html(e(this.loadingTemplate).template({}))},_handleViewFieldSettings:function(){var e=a.manager(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),["fields"]);window.open(e,"_blank","noopener,noreferrer")},_selectCheckbox:function(e){e.closest("td").find("label").removeClass("unchecked").addClass("checked"),e.closest("td").find("i.icon-check").show(),this._flipHighlight(e.closest("td").attr("data-extraction-name"))},_deselectCheckbox:function(e){e.closest("td").find("label").removeClass("checked").addClass("unchecked"),e.closest("td").find("i.icon-check").hide(),this._flipHighlight(e.closest("td").attr("data-extraction-name"))},_flipHighlight:function(e){for(var t=this.model.state.get("existingExtractions"),i=0;i<t.length;i++)if(t[i].fieldName===e){t[i].hidden=!t[i].hidden;break}var s=this.model.state.get("existingSampleExtractions"),n=0;for(i=0;i<s.length;i++)for(n=0;n<s[i].length;n++)if(s[i][n].fieldName===e){s[i][n].hidden=!s[i][n].hidden;break}this.trigger("action:updateHighlighting"),this.render()},render:function(){return this.$el.html(this.compiledTemplate({extractions:this.getExtractionData(),type:this.model.state.get("type"),highlight:this.highlight,sourcetype:this.model.state.get("sourcetype"),source:this.model.state.get("source"),generateEditHref:e((function(e){return a.field_extractor(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{extractionId:e.id}})})).bind(this)})),this.focus(),this},focus:function(){this.$(".fields-settings-page-button").focus()},getExtractionData:function(){return this.collection.extractions.chain().map((function(t){var i=t.entry.content,s=n.getCaptureGroupNames(i.get("value"));return e(s).map((function(e){return{id:t.id,field:e,attribute:i.get("attribute"),isHidden:this.isExtractionHidden(e),canShow:this.canShowExtraction(e)}}),this)}),this).flatten().value()},isExtractionHidden:function(e){for(var t=this.model.state.get("existingExtractions")||[],i=0;i<t.length;i++)if(t[i].fieldName===e)return t[i].hidden;return!0},canShowExtraction:function(e){var t=this.model.state.get("existingExtractions")||[];t=t.concat(this.model.state.get("examples")||[]);for(var i=null,s=0;s<t.length;s++)if(e===t[s].fieldName){i=t[s];break}return null!==i&&n.canShowExtraction(i,t)},loadingTemplate:'            <div class="alert alert-info">                <i class="icon-alert"></i>                <%- _("Loading Fields...").t() %>            </div>        ',template:'            <h3><%- _("Fields").t() %></h3>            <div>                <% if ( type === "sourcetype" && sourcetype) { %>                    <%- _("Source type:").t() %>                    <span class="sourcetype-name"><%- sourcetype %></span>                <% } else { %>                    <%- _("Source:").t() %>                    <span class="source-name"><%- source %></span>                <% } %>            </div>            <div class="extractions-sidebar-instructions">                <% if ( type === "sourcetype" && sourcetype) { %>                    <%- _("The field extractions below have been previously defined for this source type. For a complete list of field objects, please see the ").t() %>                <% } else { %>                    <%- _("The field extractions below have been previously defined for this source. For a complete list of field objects, please see the ").t() %>                <% } %>                <a href="#" class="fields-settings-page-button"> <%- _("Fields page").t() %> <i class="icon-external"></i></a>.            </div>            <table class="table table-striped">                <thead>                    <tr>                        <th><%- _("Field Name").t() %></th>                        <th><%- _("Pattern Name").t() %></th>                        <th><%- _("Action").t() %></th>                        <% if (highlight) { %>                            <th><%- _("Highlighted").t() %></th>                        <% } %>                    </tr>                </thead>                <tbody>                    <% _(extractions).each(function(extraction) { %>                        <tr data-extraction-id="<%- extraction.id %>">                            <td><%- extraction.field %></td>                            <td><%- extraction.attribute %></td>                            <td>                                <a href="<%- generateEditHref(extraction) %>" class="edit-button" target="_blank" rel="noopener noreferrer">                                    <%- _("open").t() %>                                    <i class="icon-external"></i>                                </a>                            </td>                            <% if (highlight) { %>                                <td class="checkbox" data-extraction-name="<%- extraction.field %>">                                    <label class="checkbox <%- extraction.isHidden ? "unchecked" : "checked" %><%- extraction.canShow ? "" : " disabled" %>">                                        <a href="#" class="btn <%- extraction.canShow ? "" : "disabled" %>">                                            <i class="icon-check" style="<%- extraction.isHidden ? "display:none" : "" %>">                                            </i>                                        </a>                                    </label>                                </td>                            <% } %>                        </tr>                    <% }) %>                </tbody>            </table>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/ExtractionViewer":function(e,t,i){var s,n;s=[e,i("views/Base")],void 0===(n=function(e,t){return t.extend({moduleId:e.i,className:"extraction-viewer",events:{"click .preview-in-search-button":function(e){e.preventDefault(),this.$el.hasClass("disabled")||this.trigger("action:previewInSearch")},"click .manual-mode-button":function(e){e.preventDefault(),this.$el.hasClass("disabled")||this.trigger("action:selectManualMode")},"click .expand-collapse-button":function(e){e.preventDefault(),this.$el.hasClass("disabled")||(this.expanded=!this.expanded,this.render())}},initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:regex",this.render),this.expanded=!1},render:function(){var e=this.model.state.get("regex");if(e){this.$el.html(this.compiledTemplate({regex:e,expanded:this.expanded,useSearchFilter:this.model.state.get("useSearchFilter")})),this.$el.show();var t=this.$(".regex-text-container, .regex-button-container");this.expanded?t.show():t.hide()}else this.$el.hide(),this.$el.empty();return this},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")},template:'            <div class="search-button-container">                <a href="#" class="expand-collapse-button">                    <%- expanded ? _("Hide Regular Expression").t() : _("Show Regular Expression").t() %>                    <% if(expanded) { %>                        <i class="icon-chevron-down"></i>                    <% } else { %>                        <i class="icon-chevron-right"></i>                    <% } %>                </a>                <a href="#" class="preview-in-search-button btn">                    <%- _("View in Search").t() %>                    <i class="icon-external"></i>                </a>            </div>            <div class="regex-text-container">                <span class="regex-text"><%- regex %></span>            </div>            <div class="regex-button-container">                <a href="#" class="manual-mode-button btn"><%- _("Edit the Regular Expression").t() %></a>            </div>            <div class="clearfix"></div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/FieldExtractionForm":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("models/shared/dataenrichment/FieldExtraction"),i("views/Base"),i("views/shared/FlashMessages"),i("views/shared/controls/ControlGroup"),i("util/field_extractor_utils")],void 0===(n=function(e,t,i,s,n,r,a,o){return n.extend({moduleId:i.i,tagName:"form",className:"form-horizontal field-extraction-form",EXTRACT_MODE:"extract",REQUIRE_MODE:"require",initialize:function(){n.prototype.initialize.apply(this,arguments),this.formMode=this.EXTRACT_MODE,this.model.fieldExtraction=new s({regex:this.model.state.get("regex")}),this.children.flashMessages=new r({model:this.model.fieldExtraction}),this.currentInput=""},events:{"click .submit-button":"onSubmit",keypress:function(e){13===e.which&&this.onSubmit(e)},"click .mode-extract":function(t){t.preventDefault(),this.formMode=this.EXTRACT_MODE,this.setModalBody(),e(".field-name-input").val(this.currentInput)},"click .mode-require":function(t){t.preventDefault(),this.formMode=this.REQUIRE_MODE,this.currentInput=e(".field-name-input").val(),this.setModalBody()}},getTemplate:function(){return"master"===this.options.eventType?this.formMode===this.EXTRACT_MODE?this.masterExtractTemplate:'<div class="require-message">'+(this.options.requiredText?t("You can only have 1 required text string. Selecting this new required text string will remove your old one.").t():t("Use required text to help Splunk Enterprise find the events with the fields you want.").t())+"</div>":this.sampleExtractTemplate},setModalBody:function(){var i=e(".popdown-dialog.open").width();if(this.$el.find(".extraction-form-content").html(t(this.getTemplate()).template({selection:this.options.selection})),e(".popdown-dialog.open").width(i),"master"===this.options.eventType)this.$el.find(".mode-toggle").each(t.bind((function(t,i){var s=e(i);this.formMode===s.data("value")?s.addClass("active"):s.removeClass("active")}),this)),this.formMode===this.EXTRACT_MODE?(this.setButtonText("Add Extraction"),this.children.flashMessages.$el.show()):(this.setButtonText("Add Required Text"),this.children.flashMessages.$el.hide());else{var s=this.getAvailableFields();0===this.model.state.get("examples").length?this.showErrorMessage("Additional examples cannot be added until at least one field has been chosen."):0===s.length?this.showErrorMessage("All existing fields have already been added to this sample event."):(1===s.length&&this.model.fieldExtraction.set("fieldName",s[0].value),this.children.fieldNameDropdown=new a({label:t("Field Name").t(),controlType:"SyntheticSelect",controlOptions:{modelAttribute:"fieldName",model:this.model.fieldExtraction,toggleClassName:"btn",menuWidth:"narrow",prompt:t("Select a Field").t(),items:s}}),this.setButtonText("Add Extraction"),1!==s.length&&this.getSubmitButton().addClass("disabled"),this.children.fieldNameDropdown.render().replaceAll(this.$(".extraction-dropdown-wrapper")),this.listenTo(this.model.fieldExtraction,"change:fieldName",(function(){this.model.fieldExtraction.get("fieldName")?this.getSubmitButton().removeClass("disabled"):this.getSubmitButton().addClass("disabled")})),this.listenTo(this.children.fieldNameDropdown.children.child0,"popdownHidden",(function(){this.getSubmitButton().focus()})))}},showErrorMessage:function(e){this.$(".extraction-form-container").hide(),this.$(".extraction-form-buttons").hide(),this.$el.append(t(this.noFieldsMessageTemplate).template({message:t(e).t()}))},noFieldsMessageTemplate:'            <div class="no-fields-message-container">                <div class="no-fields-message">                    <i class="icon-alert"></i>                    <%- message %>                </div>            </div>        ',getAvailableFields:function(){var e,i,s,n=o.getCaptureGroupNames(this.model.state.get("regex")),r=this.options.sampleEventIndex,a=this.model.state.get("sampleEvents");if(a&&(e=a[r]))return s=t.pluck(e.extractions,"fieldName"),i=t.difference(n,s),t.map(i,(function(e){return{label:e,value:e}}))},setButtonText:function(e){this.getSubmitButton().text(t(e).t())},getSubmitButton:function(){return this.$(".extraction-form-buttons .buttons-container .submit-button")},focus:function(){"master"===this.options.eventType?this.$(".field-name-input").focus():this.model.fieldExtraction.get("fieldName")?this.getSubmitButton().focus():this.$(".extraction-form-content").find(".dropdown-toggle").focus()},onSubmit:function(e){if(e.preventDefault(),!this.getSubmitButton().hasClass("disabled"))if("master"===this.options.eventType)if(this.formMode===this.EXTRACT_MODE){var i=this.$(".field-name-input").val();this.model.fieldExtraction.set({fieldName:i}),this.model.fieldExtraction.isValid(!0)&&this.trigger("action:addExtraction",t.extend({fieldName:i},this.options.selection))}else this.trigger("action:addRequiredText",this.options.selection);else this.trigger("action:addSampleExtraction",t.extend({fieldName:this.model.fieldExtraction.get("fieldName")},this.options.selection))},render:function(){return this.$el.html(this.compiledTemplate({selection:this.options.selection,eventType:this.options.eventType})),this.setModalBody(),this.children.flashMessages.render().prependTo(this.el),this},template:'            <div class="extraction-form-container">                <% if(eventType === "master") { %>                    <div class="extraction-form-mode-toggle">                        <div class="btn-group btn-group-radio">                            <button class="btn mode-toggle mode-extract" data-value="extract"><%- _("Extract").t() %></button>                            <button class="btn mode-toggle mode-require" data-value="require"><%- _("Require").t() %></button>                        </div>                    </div>                <% } %>                <div class="extraction-form-content"></div>            </div>            <div class="extraction-form-buttons">                <div class="buttons-container">                    <a href="#" class="btn btn-primary submit-button"></a>                </div>            </div>        ',masterExtractTemplate:'            <div class="control-group">                <label class="control-label"><%- _("Field Name").t() %></label>                <div class="controls controls-join">                    <div class="control">                        <input type="text" class="input-medium field-name-input" />                    </div>                </div>            </div>             <div class="control-group">                <label class="control-label"><%- _("Sample Value").t() %></label>                <div class="controls controls-join">                    <div class="control selected-text-control">                        <span class="input-label selected-text"><%- selection.selectedText %></span>                    </div>                </div>            </div>        ',sampleExtractTemplate:'             <div class="extraction-dropdown-wrapper"></div>             <div class="control-group sample-value-control">                <label class="control-label"><%- _("Sample Value").t() %></label>                <div class="controls controls-join">                    <div class="control selected-text-control">                        <span class="input-label selected-text"><%- selection.selectedText %></span>                    </div>                </div>            </div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/FieldExtractorMaster":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("models/Base"),i("models/services/data/props/Extraction"),i("models/services/configs/Transforms"),i("models/knowledgeobjects/Sourcetype"),i("models/search/Job"),i("models/shared/TimeRange"),i("collections/Base"),i("collections/services/authorization/Roles"),i("views/Base"),i("views/field_extractor/ManualExtractionEditor"),i("views/field_extractor/ExistingExtractionsList"),i("views/field_extractor/MasterEventViewer"),i("views/field_extractor/MasterEventEditor"),i("views/field_extractor/MasterEventDelimEditor"),i("views/field_extractor/ExtractionViewer"),i("views/field_extractor/SaveExtractionsView"),i("views/field_extractor/CounterExampleEditor"),i("views/field_extractor/ConfirmationView"),i("views/shared/knowledgeobjects/SourcetypeMenu"),i("views/shared/dataenrichment/preview/RexPreviewViewStack"),i("views/shared/dataenrichment/preview/PreviewJobController"),i("views/shared/dataenrichment/preview/RegexGeneratorController"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/SyntheticSelectControl"),i("views/shared/controls/SyntheticRadioControl"),i("views/shared/controls/TextControl"),i("views/shared/controls/StepWizardControl"),i("views/shared/Sidebar"),i("views/shared/FlashMessages"),i("views/shared/timerangepicker/Master"),i("shim/splunk.util"),i("util/field_extractor_utils"),i("util/splunkd_utils"),i("util/string_utils"),i("uri/route"),i("views/shared/pcss/data-enrichment.pcss"),i("views/field_extractor/FieldExtractorMaster.pcss"),i("shim/bootstrap.tooltip")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c,h,p,u,m,g,f,v,x,b,w,E,_,y,T,S,D,M,C,I,N,k,R,O,L,F,A,$,V,P){return h.extend({moduleId:i.i,className:"field-extractor-master",SIDEBAR_WIDTH:350,REGEX_MODE:"regex",DELIM_MODE:"delim",events:{"click .view-extractions-button:not(.disabled)":function(e){e.preventDefault(),this._createSidebar()},"click .content-header .manual-mode-button":function(e){e.preventDefault(),this.setManualMode()},"click .btn-regex":function(e){e.preventDefault(),this.setMethod(this.REGEX_MODE),this.children.masterEventViewer.render(),this._refreshExistingExtractionsButton(),this.$(".view-all-extractions-button-container").show()},"click .btn-delim":function(e){e.preventDefault(),this.setMethod(this.DELIM_MODE),this._hideExistingExtractions(),this.children.masterEventViewer.render(),this.$(".view-all-extractions-button-container").hide()},"click .return-automatic-mode":function(e){e.preventDefault(),this.cleanupManualMode()},"click .return-manual-page":function(e){e.preventDefault(),this.model.state.set({mode:this.lastAutomaticMode}),this._setupManualView(),this.$(".return-manual-page").hide(),this.$(".manual-save-button").hide()},"click .content-header .preview-in-search-link":function(t){t.preventDefault(),e(t.currentTarget).hasClass("disabled")||this._handlePreviewInSearch()},"click .manual-save-button":function(e){e.preventDefault(),this._validateAndSaveExtraction()},"click .preview-source-button":function(e){e.preventDefault(),this.setSourceInput()},keypress:function(e){13===e.which&&this.setSourceInput()}},initialize:function(){h.prototype.initialize.apply(this,arguments),this.environment="Enterprise",this.model.timeRange=new l({earliest:"-90d@d",latest:"now"}),this.model.state=new s({type:"sourcetype",source:"",sourcetype:this.options.sourcetype,sampleSize:{head:1e3,earliest:this.model.timeRange.get("earliest"),latest:this.model.timeRange.get("latest")},inputField:"_raw",regex:this.model.extraction.isNew()?"":this.model.extraction.entry.content.get("value"),interactiveMode:L.INTERACTION_MODE,filter:"",clustering:L.CLUSTERING_NONE,eventsView:L.VIEW_ALL_EVENTS,mode:L.SELECT_SAMPLE_MODE,masterEvent:this.options.masterEvent,examples:[],counterExamples:[],sampleEvents:[],errorState:!1,regexGenErrorState:!1,useSearchFilter:!0,hasSid:!1,existingExtractions:[],existingSampleExtractions:[]}),this.model.searchJob=new o({},{delay:1e3,processKeepAlive:!0}),this.options.sid&&(this.model.state.set({type:"sourcetype"}),this.model.state.set({hasSid:!0})),this.model.transform=new r,this.options.sourcetype&&this.model.state.set({type:"sourcetype"}),this.options.existingExtractions&&(this.model.state.set({type:"sourcetype"}),this.model.state.set({existingExtractions:this.options.existingExtractions}),this._tryToShowExistingExtractions()),this.collection.wizardSteps=new d([{value:L.SELECT_SAMPLE_MODE,label:t("Select Sample").t(),nextLabel:t("Next").t(),showPreviousButton:!1},{value:L.SELECT_METHOD_MODE,label:t("Select Method").t(),enabled:!!this.model.state.get("masterEvent"),nextLabel:t("Next").t()},{value:L.SELECT_DELIM_MODE,label:t("Rename Fields").t(),enabled:this.model.state.get("method")===this.DELIM_MODE,visible:!1,nextLabel:t("Next").t()},{value:L.SELECT_FIELDS_MODE,label:t("Select Fields").t(),enabled:this.model.state.get("method")===this.REGEX_MODE,nextLabel:t("Next").t()},{value:L.VALIDATE_FIELDS_MODE,label:t("Validate").t(),enabled:(this.model.state.get("examples")||[]).length>0,visible:!1,nextLabel:t("Next").t()},{value:L.SAVE_FIELDS_MODE,label:t("Save").t(),enabled:(this.model.state.get("examples")||[]).length>0||t(this.model.state.get("delimFieldNames")).keys().length>0,nextLabel:t("Finish").t()},{value:L.CONFIRMATION_MODE,label:"",showPreviousButton:!1,showNextButton:!1}]),this.model.state.has("sourcetype")&&this._refreshExtractions(),this.model.state.has("masterEvent")&&(this.collection.wizardSteps.remove(this.collection.wizardSteps.findWhere({value:L.SELECT_SAMPLE_MODE})),this.collection.wizardSteps.findWhere({value:L.SELECT_METHOD_MODE}).set({showPreviousButton:!1}),this.model.state.set({mode:L.SELECT_METHOD_MODE}),this._refreshExtractions()),this._createComponents(),this.listenTo(this.model.searchJob,"serverValidated",t.bind((function(e,t,i){e?this.model.state.set("errorState",!1):this.model.state.set("errorState",!0)}),this)),this.listenTo(this.model.state,"change:type",(function(){this.model.state.set("masterEvent",""),this._refreshExtractionViews()})),this.listenTo(this.model.state,"change:source",(function(){this._forceRefreshExtractions().done(t((function(){this.children.regexGenerationController.reset(),this._syncStateModelFromController(),this._refreshExtractionViews()})).bind(this))})),this.listenTo(this.model.state,"change:sourcetype",(function(){this._forceRefreshExtractions().done(t((function(){this.children.regexGenerationController.reset(),this._syncStateModelFromController(),this._refreshExtractionViews()})).bind(this))})),this.listenTo(this.model.state,"change:masterEvent",(function(){this.collection.wizardSteps.findWhere({value:L.SELECT_METHOD_MODE}).set({enabled:!!this.model.state.get("masterEvent")}),this.model.state.get("masterEvent")&&this._refreshPreview()})),this.listenTo(this.model.state,"change:examples",(function(){this.collection.wizardSteps.findWhere({value:L.VALIDATE_FIELDS_MODE}).set({enabled:(this.model.state.get("examples")||[]).length>0}),this.collection.wizardSteps.findWhere({value:L.SAVE_FIELDS_MODE}).set({enabled:(this.model.state.get("examples")||[]).length>0})})),this.listenTo(this.model.state,"change:method",(function(){var t=this.model.state.get("method");this.collection.wizardSteps.findWhere({value:L.SELECT_DELIM_MODE}).set({visible:t===this.DELIM_MODE,enabled:!0}),this.collection.wizardSteps.findWhere({value:L.SELECT_FIELDS_MODE}).set({visible:t===this.REGEX_MODE,enabled:!0}),this.collection.wizardSteps.findWhere({value:L.VALIDATE_FIELDS_MODE}).set({visible:t===this.REGEX_MODE,enabled:(this.model.state.get("examples")||[]).length>0}),this._updateMethodButtons(),e("html,body").animate({scrollTop:"0px"},300)})),this.listenTo(this.model.state,"change:delimType",(function(e,i){if(this.model.state.get("mode")===L.SELECT_DELIM_MODE){if("custom"===i)return this.model.state.get("delim")&&!t.isEmpty(this.model.state.get("delim"))&&this.applyDelim(this.model.state.get("delim")),void this.children.delimiterCustom.$el.show();this.children.delimiterCustom.$el.hide()}var s=L.DELIM_MAP[i];this.model.state.set("delim",s)})),this.listenTo(this.model.state,"change:delim",(function(e,i){this.model.state.get("mode")===L.SELECT_DELIM_MODE&&(this.applyDelim(i),this.$(".content-body").is(":hidden")&&(this.children.previewView.detach(),this.children.previewView.appendTo(this.$(".content-body")).$el.show(),this.$(".content-body").show()),this.children.masterEventDelimEditor.appendTo(this.$(".content-header")).$el.show(),this.collection.wizardSteps.findWhere({value:L.SAVE_FIELDS_MODE}).set({enabled:t(this.model.state.get("delimFieldNames")).keys().length>0}))})),this.listenTo(this.model.state,"delimFieldNamesUpdated",(function(){this.model.state.get("mode")===L.SELECT_DELIM_MODE&&(this.applyDelim(this.model.state.get("delim")),this.collection.wizardSteps.findWhere({value:L.SAVE_FIELDS_MODE}).set({enabled:t(this.model.state.get("delimFieldNames")).keys().length>0}))})),this.listenTo(this.model.state,"change:mode",(function(){var e=this.model.state.get("mode"),t=this.model.state.previous("mode");if(e===L.SELECT_SAMPLE_MODE&&t===L.SELECT_METHOD_MODE)this.tempClearState(),this.collection.wizardSteps.findWhere({value:L.SELECT_FIELDS_MODE}).set({visible:!0}),this.children.stepWizardControl.updateNavButtons();else if(e===L.SELECT_METHOD_MODE&&t===L.SELECT_SAMPLE_MODE){if(this.cachedStateModel){var i=this.cachedStateModel.type!==this.model.state.get("type"),s=this.cachedStateModel.sourcetype!==this.model.state.get("sourcetype"),n=this.cachedStateModel.source!==this.model.state.get("source"),r=this.cachedStateModel.masterEvent!==this.model.state.get("masterEvent");i||s||n||r?(this.cachedStateModel=null,this.cachedFieldsState=null):(this.restoreClearedState(),this.children.stepWizardControl.updateNavButtons())}}else e!==L.SELECT_METHOD_MODE||t!==L.SELECT_FIELDS_MODE&&t!==L.SELECT_DELIM_MODE?e!==L.SELECT_FIELDS_MODE&&e!==L.SELECT_DELIM_MODE||t!==L.SELECT_METHOD_MODE?e===L.VALIDATE_FIELDS_MODE&&this.model.state.set({eventsView:L.VIEW_ALL_EVENTS}):this.cachedFieldsState&&(this.cachedFieldsState.method!==this.model.state.get("method")?this.cachedStateModel=null:(this.restoreClearedFields(),this.children.stepWizardControl.updateNavButtons())):this.tempClearFields();this.cleanUpOldMode(this.model.state.previous("mode")),this._refreshExtractionViews()})),this.listenTo(this.model.state,"change:sampleEvents",(function(){!0!==this.model.state.get("errorState")&&this.children.previewView.setAddSamplesEnabled(this.model.state.get("sampleEvents").length<L.SAMPLE_EVENT_LIMIT)})),this.listenTo(this.model.state,"change:regex",(function(){this.model.state.get("regex")&&this.$(".content-body").is(":hidden")&&(this.children.previewView.detach(),this.children.previewView.appendTo(this.$(".content-body")).$el.show(),this.$(".content-body").show()),this.model.state.get("interactiveMode")===L.NO_INTERACTION_MODE&&(this.regexManuallyModified()||this.model.state.get("mode")===L.SELECT_SAMPLE_MODE)&&(this.$(".return-automatic-mode").hide(),this.children.manualExtractionEditor.$(".edit-regex-warning").hide())})),this.listenTo(this.model.state,"change",(function(){t(["filter","regex","clustering","eventsView","sampleSize","useSearchFilter"]).any((function(e){return this.model.state.hasChanged(e)}),this)&&this._refreshPreview()}))},setSourceInput:function(){var e=this.$(".source-wrapper .control input").val();this.children.source.error(!1),this.children.source.setHelpText(""),e&&(this.model.state.set({source:e}),e.match(/[^\\]\\[^\\]*\*/)?(this.children.source.error(!0),this.children.source.setHelpText(t("If the source name includes a wildcard character(*), replace single backslash characters (\\) with two backslash characters (\\\\).").t())):e.match(/\\\\(?!.*\*)/)&&(this.children.source.error(!0),this.children.source.setHelpText(t("If the source name does not include a wildcard character (*), only single backslashes (\\) are required in the source name.").t())))},setManualMode:function(){this.lastAutomaticMode=this.model.state.get("mode"),this.model.state.set({interactiveMode:L.NO_INTERACTION_MODE}),this.children.stepWizardControl.$el.hide(),this._setupManualView(),this.$(".page-header").attr("data-mode","manual")},_setupManualView:function(){this.cleanUpOldMode(this.model.state.get("mode")),this._refreshExtractionViews(),!this.model.extraction.isNew()||this.regexManuallyModified()&&this.model.state.get("regex")||(this.$(".return-automatic-mode").show(),this.children.manualExtractionEditor.$(".edit-regex-warning").show(),this.$(".regex-editor-wrapper").find("textarea").focus())},setMethod:function(e){e!==this.REGEX_MODE&&e!==this.DELIM_MODE||this.model.state.set("method",e)},cleanupManualMode:function(){this.model.state.set("interactiveMode",L.INTERACTION_MODE),this.children.stepWizardControl.$el.show(),this.children.manualExtractionEditor.cleanupState(),this._cleanupManualView(),this._refreshExtractionViews(),this.$(".page-header").attr("data-mode","auto")},_cleanupManualView:function(){this.$(".select-sourcetype-header").detach(),this.children.previewView.$el.detach().hide(),this.children.manualExtractionEditor.$el.detach().hide(),this.$(".return-automatic-mode").hide(),this.children.manualExtractionEditor.$(".edit-regex-warning").hide(),this.$(".view-all-extractions-button-container").hide()},cleanUpOldMode:function(e){e===L.SELECT_SAMPLE_MODE?(this.$(".select-sample-header").detach(),this.options.sid||this.options.sourcetype||(this.children.typeDropDown.$el.detach().hide(),this.children.source.$el.detach().hide()),this.children.sourcetypeDropDown.$el.detach().hide(),this.children.previewView.$el.detach().hide(),this.children.masterEventViewer.detach()):e===L.SELECT_METHOD_MODE?(this.$(".select-method-header").detach(),this.model.state.get("method")===this.DELIM_MODE&&this.$(".view-all-extractions-button-container").hide()):e===L.SELECT_FIELDS_MODE?(this.$(".select-fields-header").detach(),this.children.extractionViewer.detach(),this.children.masterEventEditor.$el.detach().hide(),this.children.previewView.$el.detach().hide(),this.$(".body-instructions").detach(),this.$(".content-body").is(":hidden")&&this.$(".content-body").css("display","block")):e===L.SELECT_DELIM_MODE?(this.$(".select-fields-header").detach(),this.children.extractionViewer.detach(),this.children.masterEventViewer.detach(),this.children.masterEventDelimEditor.$el.detach().hide(),this.children.previewView.$el.detach().hide(),this.$(".body-instructions").detach(),this.$(".content-body").is(":hidden")&&this.$(".content-body").css("display","block")):e===L.VALIDATE_FIELDS_MODE?(this.$(".validate-fields-header").detach(),this.children.previewView.$el.detach().hide(),this.children.extractionViewer.detach(),this.children.counterExampleEditor.$el.detach().hide(),this.$(".view-all-extractions-button-container").hide()):e===L.SAVE_FIELDS_MODE?(this.$(".save-extractions-header").detach(),this.children.saveView.remove(),this.$(".content-body").show(),this.model.extraction.trigger("serverValidated",!1,this.model.extraction),this.model.extraction.acl.trigger("serverValidated",!1,this.model.extraction.acl),this.model.transform.trigger("serverValidated",!1,this.model.transform)):e===L.CONFIRMATION_MODE&&(this.$(".confirmation-header").detach(),this.children.confirmationView.$el.detach().hide())},_tryToShowExistingExtractions:function(){var e=this.model.state.get("existingExtractions");L.containsNoOverlappingExtractions(e)?(t.each(e,(function(e){e.hidden=!1})),this.model.state.set({extractionWarningOn:!1})):this.model.state.set({extractionWarningOn:!0})},_hideExistingExtractions:function(){var e=this.model.state.get("existingExtractions")||[];t.each(e,(function(e){e.hidden=!0}))},_refreshExistingExtractionsButton:function(){var e=this.model.state.get("extractionWarningOn");if(this.$(".view-all-extractions-button-container").html(t(this.viewAllExtractionsTemplate).template({warningOn:e})),e){var i=this.$(".view-all-extractions-button-container .icon-alert"),s=t("There are existing extractions, however because they overlap, they can only be manually turned on.").t();i.tooltip({animation:!1,title:s,container:i})}},_createSidebar:function(){this.children.extractionsSidebar&&this.children.extractionsSidebar.remove(),this.children.extractionsSidebar=new N({modalize:!0}),this.children.extractionsSidebar.render().$el.appendTo(e("body")),this.children.extractionsSidebar.addSidebar(this.children.existingExtractions.render().$el.css({width:this.SIDEBAR_WIDTH+"px"})),this.children.existingExtractions.delegateEvents(),this._refreshExtractions()},_forceRefreshExtractions:function(){var e="";"sourcetype"===this.model.state.get("type")?e=this.model.state.get("sourcetype"):"source"===this.model.state.get("type")&&(e="source::"+this.model.state.get("source"));var i="type=inline AND stanza="+e;if(this.collection.extractions.fetchData.get("search")!==i)return this.collection.extractions.reset(),this.collection.extractions.fetchData.set({search:i,count:0},{silent:!0}),this.collection.extractions.fetch({data:this.model.application.pick("app","owner")}).then(t((function(){var e=this.collection.extractions.filter((function(e){return!/ in [a-zA-Z0-9_]+$/.test(e.entry.content.get("value"))}));this.collection.extractions.reset(e)})).bind(this))},_refreshExtractions:function(){this._forceRefreshExtractions()},tempClearState:function(){this.cachedStateModel=e.extend(!0,{},this.model.state.attributes),this.cachedStateModel.mode=L.SELECT_METHOD_MODE,this.model.state.set({sampleSize:{head:1e3,earliest:this.model.timeRange.get("earliest"),latest:this.model.timeRange.get("latest")},regex:"",filter:"",clustering:L.CLUSTERING_NONE,eventsView:L.VIEW_ALL_EVENTS,examples:[],counterExamples:[],sampleEvents:[],requiredText:"",delimType:"",delim:"",delimFieldNames:[],method:""})},restoreClearedState:function(){this.model.state.set(this.cachedStateModel),this.cachedFieldsState&&this.model.state.set({delimFieldNames:this.cachedFieldsState.delimFieldNames}),this.cachedStateModel=null},tempClearFields:function(){this.cachedFieldsState=e.extend(!0,{},this.model.state.attributes),this.cachedFieldsState.mode=this.model.state.previous("mode"),this.model.state.set({sampleSize:{head:1e3,earliest:this.model.timeRange.get("earliest"),latest:this.model.timeRange.get("latest")},regex:"",filter:"",clustering:L.CLUSTERING_NONE,eventsView:L.VIEW_ALL_EVENTS,examples:[],counterExamples:[],sampleEvents:[],requiredText:"",delimType:"",delim:"",delimFieldNames:[],delimItems:[]})},restoreClearedFields:function(){this.model.state.set(this.cachedFieldsState),this.model.state.set({delimFieldNames:this.cachedFieldsState.delimFieldNames}),this.cachedFieldsState=null},_createComponents:function(){this._setupControllers(),this._setupStepWizard(),this._setupFlashMessages(),this._setupSelectSourcetypeMode(),this._setupSelectMasterMode(),this._setupCounterExampleEditor(),this._setupMasterEventEditor(),this._setupMasterEventDelimEditor(),this._setupManualExtractionEditor(),this._setupExtractionViewer(),this._setupExistingExtractionsList(),this._setupResultsTable(),this._initializeHide(),this._setupConfirmationView()},_setupControllers:function(){this.children.previewJobController=new y({model:{application:this.model.application,state:this.model.state,searchJob:this.model.searchJob}}),this.children.regexGenerationController=new T({model:{application:this.model.application,state:this.model.state,searchJob:this.model.searchJob}}),this.model.state.has("masterEvent")?(this.children.regexGenerationController.setMasterEvent(this.model.state.get("masterEvent")),this.jobReadyDfd=this.children.previewJobController.preview(this._generatePreviewBasesearch(),{data:{provenance:"UI:FieldExtractor"}})):this.jobReadyDfd=e.Deferred().resolve()},_setupStepWizard:function(){this.children.stepWizardControl=new I({model:this.model.state,modelAttribute:"mode",collection:this.collection.wizardSteps,validateNext:t((function(){return this.model.state.get("mode")!==L.SAVE_FIELDS_MODE||(this._validateAndSaveExtraction(),!1)})).bind(this)})},_setupFlashMessages:function(){this.children.flashMessages=new k({model:{searchJob:this.model.searchJob,extraction:this.model.extraction,transform:this.model.transform,extractionAcl:this.model.extraction.acl},whitelist:[F.FATAL,F.ERROR,F.WARNING]}),this.regexErrorMessageId=t.uniqueId("regex-error-")},_setupSelectSourcetypeMode:function(){var e=new a;e.entry.set({name:this.model.state.get("sourcetype")});var i=t("-- Select Source Type --").t();if(this.options.sid)this.children.sourcetypeDropDown=new D({model:this.model.state,modelAttribute:"sourcetype",toggleClassName:"btn",prompt:i,items:this.collection.sourcetypes.map((function(e){return{description:e.entry.content.get("description")||"",value:e.entry.get("name")}}))});else{this.children.typeDropDown=new D({model:this.model.state,modelAttribute:"type",toggleClassName:"btn",items:[{description:"Source type",value:"sourcetype"},{description:"Source",value:"source"}]}),this.children.sourcetypeDropDown=new E({addLabel:!1,prompt:i,model:e.entry,modelAttribute:"name",collection:{sourcetypesCollection:this.collection.sourcetypes}}),this.children.source=new S({controlType:"Text",controlOptions:{modelAttribute:"source",model:this.model.state},controlsLayout:"stack",label:t("Source Name").t()})}this.children.timeRangePicker=new R({model:{state:this.model.state,timeRange:this.model.timeRange,user:this.model.user,application:this.model.application},collection:this.collection.times}),this.listenTo(this.model.timeRange,"change",(function(){this.model.state.set({sampleSize:{head:1e3,earliest:this.model.timeRange.get("earliest"),latest:this.model.timeRange.get("latest")}})})),this.listenTo(e.entry,"change:name",(function(){this.model.state.set({sourcetype:e.entry.get("name")})}))},_setupSelectMasterMode:function(){this.children.masterEventViewer=new m({model:{state:this.model.state}})},_setupCounterExampleEditor:function(){this.children.counterExampleEditor=new b({model:{state:this.model.state}}),this.listenTo(this.children.counterExampleEditor,"action:removeCounterExample",(function(e){var t=this.children.regexGenerationController.removeCounterExample(e);this._handleRegexGeneratorPromise(t)}))},_setupMasterEventEditor:function(){this.children.masterEventEditor=new g({model:{state:this.model.state}}),this.listenTo(this.children.masterEventEditor,"action:addExtraction",(function(i){this.showLoading(),e.when(this.jobReadyDfd).then(t((function(){var e=this.children.regexGenerationController.addExample(t(i).pick("fieldName","startIndex","endIndex"));this._handleRegexGeneratorPromise(e)})).bind(this))})),this.listenTo(this.children.masterEventEditor,"action:addSampleExtraction",(function(e,i){var s=this.children.regexGenerationController.addSampleExtraction(t(e).pick("fieldName","startIndex","endIndex"),i);this._handleRegexGeneratorPromise(s)})),this.listenTo(this.children.masterEventEditor,"action:addRequiredText",(function(e){var t=this.children.regexGenerationController.addRequiredText(e.selectedText);this._handleRegexGeneratorPromise(t)})),this.listenTo(this.children.masterEventEditor,"action:removeRequiredText",(function(){var e=this.children.regexGenerationController.removeRequiredText();this._handleRegexGeneratorPromise(e)})),this.listenTo(this.children.masterEventEditor,"action:selectManualMode",(function(){this.setManualMode()})),this.listenTo(this.children.masterEventEditor,"action:renameExistingExample",(function(e,t){var i=this.children.regexGenerationController.renameExample(e,t);this._handleRegexGeneratorPromise(i)})),this.listenTo(this.children.masterEventEditor,"action:removeExistingExample",(function(e){var t=this.children.regexGenerationController.removeExample(e);this._handleRegexGeneratorPromise(t)})),this.listenTo(this.children.masterEventEditor,"action:removeExistingSampleExtraction",(function(e,t){var i=this.children.regexGenerationController.removeSampleExtraction(e,t);this._handleRegexGeneratorPromise(i)})),this.listenTo(this.children.masterEventEditor,"action:removeExistingSampleEvent",(function(e){var t=this.model.state.get("existingSampleExtractions");t.splice(e,1),this.model.state.set("existingSampleExtractions",t);var i=this.children.regexGenerationController.removeSampleEvent(e);this._handleRegexGeneratorPromise(i)}))},_setupMasterEventDelimEditor:function(){this.children.masterEventDelimEditor=new f({model:{state:this.model.state}}),this.listenTo(this.children.masterEventDelimEditor,"action:hideMasterEventViewer",(function(){this.children.masterEventViewer.detach()}))},_setupManualExtractionEditor:function(){this.children.manualExtractionEditor=new p({model:{state:this.model.state,application:this.model.application}}),this.listenTo(this.children.manualExtractionEditor,"action:selectAutomaticMode",(function(){this.model.state.set("interactiveMode",L.INTERACTION_MODE)})),this.listenTo(this.children.manualExtractionEditor,"action:save",this._handleManualExtractionSave),this.listenTo(this.children.manualExtractionEditor,"action:previewInSearch",this._handlePreviewInSearch)},_setupSaveView:function(){var e="";if("sourcetype"===this.model.state.get("type")?e=this.model.state.get("sourcetype"):"source"===this.model.state.get("type")&&(e="source::"+this.model.state.get("source")),this.model.state.get("method")===this.DELIM_MODE){var i=L.DELIM_CONF_MAP[this.model.state.get("delimType")]?'"'+L.DELIM_CONF_MAP[this.model.state.get("delimType")]+'"':JSON.stringify(this.model.state.get("delim"));this.model.transform.entry.content.set({DELIMS:i,FIELDS:'"'+t(this.model.state.get("delimFieldNames")).values().join('","')+'"'}),this.model.extraction.isNew()?this.model.extraction.entry.content.set({stanza:e,type:"Uses transform"}):this.model.extraction.entry.content.set({value:this.model.state.get("transformName")})}else this.model.extraction.isNew()?this.model.extraction.entry.content.set({name:O.fieldListToString(L.getCaptureGroupNames(this.model.state.get("regex"))),value:this.model.state.get("regex"),stanza:e,type:"Inline"}):this.model.extraction.entry.content.set({value:this.model.state.get("regex")});this.children.saveView&&(this.children.saveView.detach(),this.children.saveView.remove()),this.children.saveView=new x({model:{extraction:this.model.extraction,user:this.model.user,application:this.model.application,state:this.model.state,serverInfo:this.model.serverInfo,transform:this.model.transform},collection:{roles:this.collection.roles}}),this.listenTo(this.children.saveView,"action:finish",(function(){this._validateAndSaveExtraction()}))},_setupExtractionViewer:function(){this.children.extractionViewer=new v({model:{state:this.model.state}}),this.listenTo(this.children.extractionViewer,"action:previewInSearch",this._handlePreviewInSearch),this.listenTo(this.children.extractionViewer,"action:selectManualMode",(function(){this.setManualMode()}))},_setupExistingExtractionsList:function(){this.children.existingExtractions=new u({collection:{extractions:this.collection.extractions},model:{state:this.model.state,application:this.model.application}}),this.listenTo(this.children.existingExtractions,"action:updateHighlighting",(function(){this._refreshPreview(),this.children.masterEventEditor.render(),this.children.masterEventViewer.render()}))},_setupResultsTable:function(){this.children.previewView=new _({model:{application:this.model.application,searchJob:this.model.searchJob,state:this.model.state},className:"preview-view-stack",autoDrilldownEnabled:!1}),this.listenTo(this.children.previewView,"action:selectEvent",(function(t,i){if(this.model.state.get("mode")===L.SELECT_SAMPLE_MODE)this.children.regexGenerationController.setMasterEvent(t),this.model.state.set({existingExtractions:i}),this._tryToShowExistingExtractions(),this._refreshExistingExtractionsButton(),e("html,body").animate({scrollTop:"0px"},300);else{this.children.regexGenerationController.addSampleEvent(t);var s=this.model.state.get("existingSampleExtractions");s.push(i),this.model.state.set("existingSampleExtractions",s)}this._syncStateModelFromController()})),this.listenTo(this.children.previewView,"action:removeExtraction",(function(i){var s=this.children.regexGenerationController.addCounterExample(t(i).pick("fieldName","rawText","startIndex","endIndex"));this._handleRegexGeneratorPromise(s),e("html,body").animate({scrollTop:"0px"},300)})),this.listenTo(this.children.previewView,"action:valueDrilldown",(function(e,t){this.model.state.set({filter:e+"="+t})})),this.listenTo(this.children.previewView,"action:nextStep",(function(){this.model.state.set({mode:this._getNextMode().get("value")})}))},regexManuallyModified:function(){return this.model.state.get("regex")!==this.children.regexGenerationController.getCurrentRegex()},applyDelim:function(e){var t,i,s,n,r,a,o=this.model.state.get("masterEvent"),l=this.model.state.get("delimFieldNames"),d=[],c=L.DELIM_CONF_MAP[this.model.state.get("delimType")]?L.DELIM_CONF_MAP[this.model.state.get("delimType")]:this.model.state.get("delim");this.model.state.set({errorState:!1}),this.children.flashMessages.flashMsgHelper.removeGeneralMessage(this.regexErrorMessageId),this.clearError();try{if(0===e.length)throw new Error("Delimiter field cannot be empty");t=L.getMultiCharDelimRegex(e)}catch(e){return this.model.state.set({errorState:!0}),this.showError(),void this.children.flashMessages.flashMsgHelper.addGeneralMessage(this.regexErrorMessageId,{type:F.ERROR,html:e.name+": "+e.message})}for(a="(?:(?:(?!(?:"+t+')|\\\\|").)|(?:\\\\.))',c.includes('"')?a+="*":a='(?:"(?:[^\\\\"]|\\\\.)*"|'+a+")*",i=new RegExp("^("+a+")("+t+"|$)");null!=(s=i.exec(o))&&""!==s[0];)d.push(s[1]),o=o.substr(s[0].length);0!==o.length&&d.push(o),n="",r="^";for(var h=0;h<d.length;h++)l.length<=h&&l.push("field"+(h+1)),n+=r+"(?P<"+l[h]+">"+a+")",r="(?:"+t+")"+(h>0?"?":"");this.model.state.set("delimItems",d),this.model.state.set("regex",n),this.model.state.set("delimFieldNames",l)},_initializeHide:function(){this.children.masterEventEditor.$el.hide(),this.children.masterEventDelimEditor.$el.hide(),this.children.manualExtractionEditor.$el.hide(),this.children.previewView.$el.hide()},_setupConfirmationView:function(){this.children.confirmationView=new w({model:{state:this.model.state,application:this.model.application}})},_syncStateModelFromController:function(){this.model.state.set({masterEvent:this.children.regexGenerationController.getCurrentMasterEvent(),examples:this.children.regexGenerationController.getCurrentExamples(),requiredText:this.children.regexGenerationController.getCurrentRequiredText(),counterExamples:this.children.regexGenerationController.getCurrentCounterExamples(),sampleEvents:this.children.regexGenerationController.getCurrentSampleEvents(),regex:this.children.regexGenerationController.getCurrentRegex()})},_handleRegexGeneratorPromise:function(e){this._syncStateModelFromController(),this.showLoading(),e.done(t((function(e){var t=e[0]||"";this.model.state.set({regex:t}),this.hideLoading(),t||0===this.model.state.get("examples").length?(this.model.state.set({errorState:!1}),this.model.state.set({regexGenErrorState:!1}),this.children.flashMessages.flashMsgHelper.removeGeneralMessage(this.regexErrorMessageId)):(this.model.state.set({errorState:!0}),this.showError())})).bind(this)),e.fail(t((function(){var e,i=this.model.state.get("mode");e=i===L.SELECT_FIELDS_MODE?t("The extraction failed. If you are extracting multiple fields, try removing one or more fields. Start with extractions that are embedded within longer text strings.").t():i===L.VALIDATE_FIELDS_MODE?t("This counterexample cannot update the extraction. Remove it and try another counterexample. If you are extracting multiple fields, you may need to step back and remove one or more of them.").t():O.sprintf(t("Splunk %s cannot generate a regular expression based on the current event and field selections.").t(),this.environment),this.children.flashMessages.flashMsgHelper.addGeneralMessage(this.regexErrorMessageId,{type:F.ERROR,html:e}),this.model.state.set({regex:""}),this.hideLoading(),this.model.state.set({regexGenErrorState:!0}),this.showError()})).bind(this))},_refreshPreview:function(){if(this.model.state.get("method")===this.DELIM_MODE){var e=O.sprintf(t("Preview (%s fields)").t(),this.model.state.get("delimFieldNames").length);this.$(".instructions-title").text(e)}this.children.previewJobController.preview(this._generatePreviewBasesearch(),{data:{provenance:"UI:FieldExtractor"}})},_generatePreviewBasesearch:function(){var e=this.model.state.get("mode"),t="";this.options.sid&&(e===L.SELECT_SAMPLE_MODE&&this.model.state.get("useSearchFilter")||e===L.SELECT_FIELDS_MODE&&this.model.state.get("useSearchFilter")||e===L.SELECT_DELIM_MODE&&this.model.state.get("useSearchFilter")||e===L.VALIDATE_FIELDS_MODE&&this.model.state.get("useSearchFilter")||e!==L.SELECT_FIELDS_MODE&&e!==L.VALIDATE_FIELDS_MODE&&e!==L.SELECT_SAMPLE_MODE)&&(t="| loadjob "+this.options.sid+" events=t ignore_running=f require_finished=f | search ");var i=t+"index=* OR index=_*";"sourcetype"===this.model.state.get("type")&&this.model.state.get("sourcetype")?i+=" sourcetype="+O.searchEscape(this.model.state.get("sourcetype")):"source"===this.model.state.get("type")&&this.model.state.get("source")&&(i+=' source="'+O.searchEscape(this.model.state.get("source"))+'"');var s="(?ms)"+this.model.state.get("regex");if(s&&L.getCaptureGroupNames(s).length>0){var n=O.sprintf(" | rex field=%s %s offset_field=%s",O.searchEscape(this.model.state.get("inputField")),O.searchEscape(s,{forceQuotes:!0}),L.OFFSET_FIELD_NAME);i+=n}return this.collection.extractions.each(function(e,t){var s=O.sprintf(" | rex field=%s %s offset_field=%s"+t,O.searchEscape(this.model.state.get("inputField")),O.searchEscape(e.entry.content.get("value"),{forceQuotes:!0}),L.OFFSET_FIELD_NAME);i+=s}.bind(this)),i},_refreshExtractionViews:function(){this.$(".content-header").removeClass("content-header-narrow"),this.$(".content-body").show();var i=this.model.state.get("mode"),s=this.model.state.get("interactiveMode"),n=s===L.NO_INTERACTION_MODE,r=(this.model.state.get("method"),this.model.state.get("type")),a=this.model.state.get("sourcetype"),o=this.model.state.get("source");if(n)L.isManualEditorMode(i,s)&&(this.children.manualExtractionEditor.appendTo(this.$(".content-header")).$el.show(),this.$(".regex-editor-wrapper").find("textarea").focus());else if(i===L.SELECT_SAMPLE_MODE)this.$(".select-sample-header").detach(),e(t(this.selectMasterEventTemplate).template({urlSourcetype:this.options.sourcetype,sourcetype:a,source:o,type:r,fieldsHelpHref:$.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"manager.fields")})).appendTo(this.$(".content-header")),this.children.sourcetypeDropDown.detach(),this.children.timeRangePicker.detach(),this.options.sid||this.options.sourcetype?this.children.sourcetypeDropDown.appendTo(this.$(".sourcetype-dropdown-wrapper")).$el.show():(this.children.typeDropDown.detach(),this.children.source.detach(),this.children.typeDropDown.appendTo(this.$(".type-dropdown-wrapper")).$el.show(),"sourcetype"===r?this.children.sourcetypeDropDown.appendTo(this.$(".sourcetype-dropdown-wrapper")).$el.show():"source"===r&&this.children.source.appendTo(this.$(".source-wrapper")).$el.show()),this.children.timeRangePicker.appendTo(this.$(".timerange-wrapper")).$el.show(),this.children.masterEventViewer.render().appendTo(this.$(".content-header")).$el.show();else if(i===L.SELECT_METHOD_MODE)e(t(this.selectMethodTemplate).template({type:r,sourcetype:a,source:o,ifxHelpHref:$.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.field.extraction.method"),regexTxt:O.sprintf(t("Splunk %s will extract fields using a Regular Expression.").t(),this.environment),delimTxt:O.sprintf(t("Splunk %s will extract fields using a delimiter (such as commas, spaces, or characters). Use this method for delimited data like comma separated values (CSV files).").t(),this.environment)})).appendTo(this.$(".content-header")),this.$(".content-body").hide(),this.children.masterEventViewer.render().insertBefore(this.$(".method-switch")),this._updateMethodButtons();else if(i===L.SELECT_DELIM_MODE){var l=[{label:t("Space").t(),value:"space"},{label:t("Comma").t(),value:"comma"},{label:t("Tab").t(),value:"tab"},{label:t("Pipe").t(),value:"pipe"},{label:t("Other").t(),value:"custom"}];this.children.delimiterRadio=new M({model:this.model.state,modelAttribute:"delimType",toggleClassName:"btn",prompt:t("Delimiter").t(),items:l}),this.children.delimiterCustom=new C({model:this.model.state,modelAttribute:"delim",inputClassName:"delim-custom",trimLeadingSpace:!1,trimTrailingSpace:!1}),e(t(this.selectDelimTemplate).template({delimRenameHelp:$.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.field.extraction.rename")})).appendTo(this.$(".content-header")),this.$(".delimiter-radio").append(this.children.delimiterRadio.render().$el),this.$(".delimiter-radio").append(this.children.delimiterCustom.render().$el),this._hideExistingExtractions(),"custom"!==this.model.state.get("delimType")&&this.children.delimiterCustom.$el.hide(),this.children.masterEventDelimEditor.detach(),this.model.state.get("delimItems")&&0!==this.model.state.get("delimItems").length?this.children.masterEventDelimEditor.appendTo(this.$(".content-header")).$el.show():this.children.masterEventViewer.render().appendTo(this.$(".delim-selector")),0===this.$(".content-body").find(".body-instructions").length&&this.$(".content-body").prepend(t(this.previewInstructionsTemplate).template({text:""}))}else i===L.SELECT_FIELDS_MODE?(this.$(".select-fields-header").detach(),e(t(this.selectFieldsTemplate).template({ifxHelpHref:$.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.field.extraction.automatic")})).appendTo(this.$(".content-header")),this.children.masterEventEditor.detach(),this.children.masterEventEditor.appendTo(this.$(".content-header")).$el.show(),this.children.extractionViewer.appendTo(this.$(".content-header")),0===this.$(".content-body").find(".body-instructions").length&&this.$(".content-body").prepend(t(this.previewInstructionsTemplate).template({text:t("If you see incorrect results below, click an additional event to add it to the set of sample events. Highlight its values to improve the extraction. You can remove incorrect values in the next step.").t()}))):i===L.VALIDATE_FIELDS_MODE&&(this.$(".validate-fields-header").detach(),e(t(this.validateFieldsTemplate).template({instructionsText:t("Validate your field extractions and remove values that are incorrectly highlighted in the Events tab. In the field tabs, inspect the extracted values for each field, and optionally click a value to apply it as a search filter to the Events tab event list.").t()})).appendTo(this.$(".content-header")),this.children.counterExampleEditor.detach(),this.children.counterExampleEditor.appendTo(this.$(".content-header")).$el.show(),this.children.extractionViewer.appendTo(this.$(".content-header")));if(i===L.SAVE_FIELDS_MODE&&(this.$(".save-extractions-header").detach(),e(t(this.saveExtractionsTemplate).template({extractionIsNew:this.model.extraction.isNew()})).appendTo(this.$(".content-header")),this._setupSaveView(),this.children.saveView.render().appendTo(this.$(".content-header").addClass("content-header-narrow")).$el.show(),this.$(".content-body").hide(),this.model.state.get("interactiveMode")===L.NO_INTERACTION_MODE&&(this.$(".return-manual-page").show(),this.$(".manual-save-button").show())),i===L.CONFIRMATION_MODE){this.$(".confirmation-header").detach(),this.$(".content-body").hide(),this.model.state.get("interactiveMode")===L.NO_INTERACTION_MODE&&(this.$(".return-manual-page").hide(),this.$(".manual-save-button").hide());var d=$.manager(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),["data","props","extractions"]),c=O.sprintf(t("You have extracted additional fields from your data (sourcetype=%s).").t(),this.model.state.get("sourcetype"));"source"===this.model.state.get("type")&&(c=O.sprintf(t("You have extracted additional fields from your data (source=%s).").t(),this.model.state.get("source"))),e(t(this.confirmationTemplate).template({successMessage:c,editExtractionsMessage:O.sprintf(t("Edit your field extractions at any time by going to %s.").t(),'<a href="'+d+'" class="edit-extractions-link">'+t("Field Extractions").t()+"</a>")})).appendTo(this.$(".content-header")),this.children.confirmationView.render().appendTo(this.$(".content-header").addClass("content-header-narrow")).$el.show()}i!==L.SELECT_SAMPLE_MODE&&i!==L.SELECT_METHOD_MODE&&i!==L.SELECT_FIELDS_MODE&&i!==L.VALIDATE_FIELDS_MODE||(this._refreshExistingExtractionsButton(),this.$(".view-all-extractions-button-container").show()),this.model.state.get("masterEvent")||this.$(".view-all-extractions-button-container").find(".view-extractions-button").addClass("disabled"),L.isEventsTableMode(i,s)&&(i===L.SELECT_FIELDS_MODE&&!this.model.state.get("regex")||i===L.SELECT_DELIM_MODE&&!this.model.state.get("delim")||i===L.SELECT_SAMPLE_MODE&&(""===r||!this.model.state.get(r)||""===this.model.state.get(r))?this.$(".content-body").hide():(i===L.SELECT_SAMPLE_MODE&&this.model.state.previous("interactiveMode")!==L.NO_INTERACTION_MODE&&this.model.state.get("interactiveMode")!==L.NO_INTERACTION_MODE&&("sourcetype"===r&&a||"source"===r&&o)&&this._refreshPreview(),this.children.previewView.detach(),this.$(".content-body").show(),this.children.previewView.appendTo(this.$(".content-body")).$el.show()))},_handlePreviewInSearch:function(){var e=$.search(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{q:this._generatePreviewBasesearch()}});window.open(e,"_blank","noopener,noreferrer")},_handleManualExtractionSave:function(){this.model.state.set({mode:L.SAVE_FIELDS_MODE}),this._cleanupManualView()},_validateAndSaveExtraction:function(){this.children.saveView.saveExtractions().done(t((function(){this.model.state.set({mode:L.CONFIRMATION_MODE})})).bind(this))},_getNextMode:function(){var e=this._getCurrentMode(),t=this.collection.wizardSteps.indexOf(e);return this.collection.wizardSteps.at(t+1)},_getCurrentMode:function(){return this.collection.wizardSteps.findWhere({value:this.model.state.get("mode")})},_updateMethodButtons:function(){var e=this.model.state.get("method");e===this.DELIM_MODE?(this.$(".btn-delim").addClass("selected-method"),this.$(".btn-regex").removeClass("selected-method")):e===this.REGEX_MODE&&(this.$(".btn-regex").addClass("selected-method"),this.$(".btn-delim").removeClass("selected-method"))},render:function(){return this.$el.html(this.compiledTemplate({sourcetype:this.model.state.get("sourcetype")})),this.children.stepWizardControl.render().appendTo(this.$(".step-buttons-container")),this.children.flashMessages.render().appendTo(this.$(".flash-messages-container")),this.options.sid||this.options.sourcetype||(this.children.typeDropDown.render(),this.children.source.render(),this.children.source.$el.append('<button type="button" class="preview-source-button btn btn-primary" aria-label="'+t("Preview").t()+'">'+t("Preview").t()+"</button>")),this.children.sourcetypeDropDown.render(),this.children.timeRangePicker.render(),this.children.extractionViewer.render(),this.children.previewView.render(),this.children.masterEventEditor.render(),this.children.manualExtractionEditor.render(),this._refreshExtractionViews(),this.model.extraction.isNew()||this.setManualMode(),this},showLoading:function(){this.children.stepWizardControl.disable(),this.$(".instruction a").addClass("disabled"),this.children.masterEventEditor.disable(),this.children.counterExampleEditor.disable(),this.children.previewView.$el.hide(),this.$(".regex-loading-message").show(),this.children.extractionViewer.disable()},hideLoading:function(){this.children.stepWizardControl.enable(),this.$(".instruction a").removeClass("disabled"),this.children.masterEventEditor.enable(),this.children.counterExampleEditor.enable(),this.children.previewView.$el.show(),this.$(".regex-loading-message").hide(),this.children.extractionViewer.enable()},showError:function(){this.children.stepWizardControl.disable(),this.$(".instruction a").addClass("disabled"),this.children.extractionViewer.disable()},clearError:function(){this.children.stepWizardControl.enable(),this.$(".instruction a").removeClass("disabled"),this.children.extractionViewer.enable()},viewAllExtractionsTemplate:'            <% if(warningOn) { %>                <i class="icon-alert" title="<%- _("There are existing extractions, however because they overlap, they can only be manually turned on.").t() %>"></i>            <% } %>            <button class="view-extractions-button btn"><%- _("Existing fields").t() %> <i class="icon-chevron-right"></i></button>        ',selectMasterEventTemplate:'            <div class="select-sample-header">                <div class="instruction">                    <h2 class="instruction-title"><%- _("Select Sample Event").t() %></h2>                    <span class="instruction-text">                        <%- _("Choose a source or source type, select a sample event, and click Next to go to the next step. The field extractor will use the event to extract fields. ").t() %>                        <a href="<%- fieldsHelpHref %>" class="external" target="_blank" rel="noopener noreferrer"><%- _("Learn more").t() %></a>                        <% if (urlSourcetype || sourcetype || source) { %>                            <div class="manual-mode-button-container"><a href="#" class="manual-mode-button"><%- _("I prefer to write the regular expression myself").t() %> <i class="icon-chevron-right"></i></a></div>                        <% } %>                    </span>                </div>                <% if (!urlSourcetype) { %>                    <div class="type-wrapper">                        <span class="type-label"><%- _("Data Type").t() %></span>                        <div class="type-dropdown-wrapper"></div>                        <% if (type === "sourcetype") { %>                            <div class="sourcetype-wrapper"><span class="sourcetype-label"><%- _("Source Type").t() %></span>                            <div class="sourcetype-dropdown-wrapper"></div></div>                        <% } else if (type === "source") { %>                            <div class="source-wrapper"></div>                        <% } %>                    </div>                <% } else { %>                    <div class="sourcetype-wrapper"><span class="sourcetype-label"><%- _("Source type ").t() %></span>                    <span class="sourcetype-name"><%- urlSourcetype %></span></div>                <% } %>                    <span class="timerange-label"><%- _("Time Range").t() %></span>                    <div class="timerange-wrapper"></div>            </div>        ',selectMethodTemplate:'            <div class="select-method-header">                <div class="instruction">                    <h2 class="instruction-title"><%- _("Select Method").t() %></h2>                    <span class="instruction-text">                        <%- _("Indicate the method you want to use to extract your field(s).").t() %>                        <a href="<%- ifxHelpHref %>" class="external" target="_blank" rel="noopener noreferrer"><%- _("Learn more").t() %></a>                    </span>                    <div class="manual-mode-button-container"><a href="#" class="manual-mode-button"><%- _("I prefer to write the regular expression myself").t() %> <i class="icon-chevron-right"></i></a></div>                </div>                <% if (type === "sourcetype") { %>                    <div class="sourcetype-wrapper"><span class="sourcetype-label"><%- _("Source type").t() %></span>                    <span class="sourcetype-name"><%- sourcetype %></span></div>                <% } else { %>                    <div class="source-wrapper"><span class="source-label"><%- _("Source").t() %></span>                    <span class="source-name"><%- source %></span></div>                <% } %>                <div class="method-switch">                    <div class="type-container">                        <div class="type-btn btn-regex" tabIndex="0">                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="72px" height="72px" viewBox="-3 -18 72 72">                                <circle class="fill" cx="44.9" cy="31" r="2"/>                                <circle class="fill"  cx="15.9" cy="31" r="2"/>                                <path class="fill"  d="M46.1,25h-2.4c0-5,2.5-7.1,4.6-8.8c1.6-1.4,2.5-2.2,2.5-3.9c0-4.8-3.8-5.2-5.4-5.2 c-0.2,0-5.9-0.1-5.9,6.9h-2.4c0-8,5.4-9.3,8.3-9.3c3.6,0,7.8,1.9,7.8,7.7c0,2.9-1.8,4.4-3.4,5.7C47.9,19.7,46.1,21.1,46.1,25z"/>                                <polygon class="fill"  points="32.3,9.6 31.6,7.7 26.9,9.5 26.9,5 24.9,5 24.9,9.5 20.3,7.7 19.5,9.6 24.3,11.5  21.2,15.6 22.8,16.8 25.9,12.7 29,16.8 30.6,15.6 27.5,11.5 "/>                                <path class="fill"  d="M60.5,36h2.1c2-6.2,3.2-11.7,3.2-18.4c0-6.4-1.1-12.8-2.8-17.6h-2.2c1.9,4.6,3,11.2,3,17.6 C63.8,24.2,62.6,29.7,60.5,36z"/>                                <path class="fill"  d="M5.4,36H3.2C1.2,30,0,24.3,0,17.6C0,11.2,1.1,5,2.8,0H5C3.2,5,2,11.2,2,17.6 C2,24.2,3.3,30,5.4,36z"/>                            </svg>                            <div class="type-title-text"><%=_("Regular Expression").t()%></div>                        </div>                        <div class="type-desc-text"><%= regexTxt %></div>                    </div>                    <div class="type-container">                        <div class="type-btn btn-delim" tabIndex="0">                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="72px" height="72px" viewBox="-2 -20 72 72">                            <rect x="19" class="fill" width="2" height="26"/>                            <rect x="47" class="fill" width="2" height="26"/>                            <polygon class="fill" points="0,21 2.5,21 7,15.1 11.5,21 14.1,21 8.3,13.5 14.1,6 11.5,6 7,11.9 2.5,6 0,6 5.8,13.5 "/>                            <path class="fill" d="M39.2,6c-1.2,2.9-3.4,8-5.3,12.5L28.9,6h-2.2l6,15.1c-1.2,2.8-2.1,5.1-2.4,5.8 c-0.7,1.8-1.7,2-3.4,2H27v2c0,0,0,0,0.1,0c1.7,0,3.8-0.3,5.1-3.3C33,25.7,39.3,10.9,41.3,6H39.2z"/>                            <polygon class="fill" points="68,21 54,21 64,8 54,8 54,6 68.1,6 58.1,19 68,19 "/>                            </svg>                            <div class="type-title-text"><%=_("Delimiters").t()%></div>                        </div>                        <div class="type-desc-text"><%= delimTxt %></div>                    </div>                </div>            </div>        ',selectDelimTemplate:'            <div class="select-fields-header">                <div class="instruction">                    <h2 class="instruction-title"><%- _("Rename Fields").t() %></h2>                    <span class="instruction-text">                        <%- _("Select a delimiter. In the table that appears, rename fields by clicking on field names or values. ").t() %>                        <a href="<%- delimRenameHelp %>" class="external" target="_blank" rel="noopener noreferrer"><%- _("Learn more").t() %></a>                    </span>                    <div class="delim-selector">                        <span><%= _("Delimiter").t() %></span>                        <div class="delimiter-radio"></div>                    </div>                 </div>            </div>        ',selectFieldsTemplate:'            <div class="select-fields-header">                <div class="instruction">                    <h2 class="instruction-title"><%- _("Select Fields").t() %></h2>                    <span class="instruction-text">                        <%- _("Highlight one or more values in the sample event to create fields. You can indicate one value is required, meaning it must exist in an event for the regular expression to match. Click on highlighted values in the sample event to modify them. To highlight text that is already part of an existing extraction, first turn off the existing extractions.").t() %>                        <a href="<%- ifxHelpHref %>" class="external" target="_blank" rel="noopener noreferrer"><%- _("Learn more").t() %></a>                    </span>                </div>            </div>        ',validateFieldsTemplate:'            <div class="validate-fields-header">                <div class="instruction">                    <h2 class="instruction-title"><%- _("Validate").t() %></h2>                    <span class="instruction-text"><%= instructionsText %></span>                </div>            </div>        ',saveExtractionsTemplate:'            <div class="save-extractions-header">                <div class="instruction">                     <h2 class="instruction-title"><%- _("Save").t() %></h2>                    <span class="instruction-text">                        <% if(extractionIsNew) { %>                            <%- _("Name the extraction and set permissions.").t() %>                         <% } else { %>                            <%- _("Verify permissions").t() %>                         <% } %>                    </span>                </div>            </div>        ',confirmationTemplate:'            <div class="confirmation-header">                <div class=" instructions">                    <h2 class="instruction-title"><%- _("Success!").t() %></h2>                </div>                <p class="success-message"><%- successMessage %></p>                <p class="edit-extractions-message">                    <%= editExtractionsMessage %>                </p>            </div>        ',previewInstructionsTemplate:'            <div class="body-instructions">                <h3 class="instructions-title"><%- _("Preview").t() %></h3>                <div class="instructions-text">                    <%= text %>                </div>            </div>        ',template:'            <div class="page-header">                <h1 class="extract-fields-page-title"><%- _("Extract Fields").t() %></h1>                <a href="#" class="btn previous-button return-automatic-mode" style="display:none"><i class="icon-chevron-left"></i> <%- _("Back").t() %></a>                <a href="#" class="btn previous-button return-manual-page" style="display:none"><i class="icon-chevron-left"></i> <%- _("Back").t() %></a>                <a href="#" class="btn btn-primary manual-save-button" style="display:none"><i class="icon-chevron-right"></i> <%- _("Finish").t() %></a>                <div class="step-buttons-container"></div>                <div class="view-all-extractions-button-container"></div>            </div>            <div class="page-content">                <div class="content-header">                    <div class="flash-messages-container"></div>                </div>                <div class="content-body preview-container">                    <div class="regex-loading-message" style="display: none;">                        <div class="alert alert-info">                            <i class="icon-alert"></i>                            <%- _("Generating a Regular Expression...").t() %>                        </div>                    </div>                </div>            </div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/FieldExtractorMaster.pcss":function(e,t,i){var s=i(2494);"string"==typeof s&&(s=[[e.i,s,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,n);s.locals&&(e.exports=s.locals)},"views/field_extractor/ManualExtractionEditor":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("models/Base"),i("views/Base"),i("views/shared/controls/ControlGroup"),i("util/keyboard"),i("uri/route"),i("util/field_extractor_utils")],void 0===(n=function(e,t,i,s,n,r,a,o,l){return n.extend({moduleId:i.i,className:"manual-extraction-editor",events:{"click .save-button":function(e){e.preventDefault(),this.isEnabled(".save-button")&&(this.preview(),this.trigger("action:save"))},"click .preview-button":function(e){e.preventDefault(),this.isEnabled(".preview-button")&&this.preview()},"keydown .regex-text-area":function(t){t.which===a.KEYS.ENTER&&(t.preventDefault(),e(t.target).trigger("change"),this.preview())},"click .preview-in-search-button":function(e){e.preventDefault(),this.isEnabled(".preview-in-search-button")&&(this.preview(),this.trigger("action:previewInSearch"))},"click .automatic-mode-button":function(e){e.preventDefault(),this.trigger("action:selectAutomaticMode")}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.regexMediator=new s(this.model.state.pick("regex")),this.children.regexEditor=new r({controls:{type:"Textarea",options:{model:this.model.regexMediator,modelAttribute:"regex",textareaClassName:"regex-text-area"}},controlsLayout:"block"}),this.listenTo(this.model.state,"change:interactiveMode",this.render),this.listenTo(this.model.state,"change:regex",(function(){this.model.regexMediator.set(this.model.state.pick("regex"))})),this.listenTo(this.model.state,"change:errorState",(function(){this.updateSaveAndSearch()}))},isValidRegex:function(){var e=this.children.regexEditor.$("textarea").val();return l.getCaptureGroupNames(e).length>0&&!this.model.state.get("errorState")},preview:function(){this.model.state.set(this.model.regexMediator.pick("regex")),this.disablePreview()},disableSaveAndSearch:function(){this.$(".save-button").addClass("disabled"),this.$(".preview-in-search-button").addClass("disabled")},enableSaveAndSearch:function(){this.$(".save-button").removeClass("disabled"),this.$(".preview-in-search-button").removeClass("disabled")},updateSaveAndSearch:function(){this.isValidRegex()?this.enableSaveAndSearch():this.disableSaveAndSearch()},disablePreview:function(){e(".preview-button").hasClass("disabled")||this.$(".preview-button").addClass("disabled")},enablePreview:function(){this.$(".preview-button").removeClass("disabled")},onInputChange:function(){this.enablePreview(),this.updateSaveAndSearch()},isEnabled:function(e){var t=this.$(e);return t&&!t.hasClass("disabled")},cleanupState:function(){this.model.regexMediator.set(this.model.state.pick("regex"))},render:function(){this.children.regexEditor.detach();var e="";return this.model.state.get("requiredText")&&(e=this.model.state.get("requiredText")),this.$el.html(this.compiledTemplate({requiredText:e,regexHelpHref:o.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.about.regex")})),this.children.regexEditor.render().appendTo(this.$(".regex-editor-wrapper")),this.model.state.get("regex")&&this.isValidRegex()||this.disableSaveAndSearch(),this.$(".regex-text-area").on("input",t.bind((function(){this.onInputChange()}),this)),this},template:'            <div class="manual-extraction-editor-header">                <div class="alert alert-warning edit-regex-warning" style="display:none"><i class="icon-alert"></i>                    <%- _("If you manually edit and then preview the regular expression below, you cannot return to the automatic field extraction workflow.").t() %>                </div>                <% if(requiredText) { %>                    <div class="alert alert-info required-text-warning"><i class="icon-alert"></i>                        <%- _("When editing the Regular Expression, required text is not highlighted in the Preview panel.").t() %>                    </div>                <% } %>                <div class="instruction">                    <%- _("Use the event listing below to validate the field extractions produced by your regular expression.").t() %>                </div>                <h4 class="input-title"><%- _("Regular Expression").t() %></h4>                <a href="#" class="preview-in-search-button">                    <%- _("View in Search").t() %>                    <i class="icon-external"></i>                </a>                <a href="<%- regexHelpHref %>" class="regex-docs-link" target="_blank" rel="noopener noreferrer">                    <%- _("Regular Expression Reference").t() %>                    <i class="icon-external"></i>                </a>            </div>            <div class="regex-editor-wrapper"></div>            <div class="manual-extraction-editor-footer">                \x3c!-- These buttons are floating right, so they are in reverse order --\x3e                <a href="#" class="btn btn-primary save-button"><%- _("Save").t() %></a>                <a href="#" class="btn preview-button disabled"><%- _("Preview").t() %></a>            </div>            <div class="clearfix"></div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/MasterEventDelimEditor":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/field_extractor/FieldExtractionForm"),i("views/shared/delegates/Popdown"),i("util/field_extractor_utils"),i("views/field_extractor/EditDelimExtractionDropdown"),i("shim/bootstrap.tooltip")],void 0===(n=function(e,t,i,s,n,r,a,o){return s.extend({moduleId:i.i,className:"automatic-extraction-editor",initialize:function(){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:masterEvent",this.debouncedRender),this.listenTo(this.model.state,"change:delimItems change:regex change:delimFieldNames",(function(){this.trigger("action:hideMasterEventViewer"),this.updateEventTable()})),this.debouncedRender()},events:{"mouseup td.masterevt-hdr > span":function(t){t.preventDefault();var i=e(t.target);i.hasClass("icon-pencil")&&(i=i.parent());var s=i.parent().data("fieldnum"),n=i.text();this._openExtractionDropdown(i,s,n)},"mouseup td.masterevt-col":function(t){t.preventDefault();var i=e(t.target),s=i.parent().data("fieldnum"),n=i.parent().data("fieldname");this._openExtractionDropdown(i,s,n)}},_openExtractionDropdown:function(t,i,s){this.children.delimExtractionDropdown&&(this.stopListening(this.children.delimExtractionDropdown),this.children.delimExtractionDropdown.remove()),this.children.delimExtractionDropdown=new o({startIndex:i,fieldName:s,model:{state:this.model.state}}),this.$delimPopdownDialog=e(this.delimPopdownTemplate).appendTo(this.el),this.children.delimExtractionPopdown=new r({el:this.el,dialog:".popdown-dialog",mode:"dialog",attachDialogTo:"body",adjustPosition:!1}),this.children.delimExtractionDropdown.render().appendTo(this.$delimPopdownDialog),this.listenTo(this.children.delimExtractionDropdown,"action:renameField",(function(e,t){var i=this.model.state.get("delimFieldNames")||{};i[t]=e,this.model.state.set("delimFieldNames",i),this.model.state.trigger("delimFieldNamesUpdated"),this.children.delimExtractionPopdown.hide()})),this.children.delimExtractionPopdown.pointTo(t),this.children.delimExtractionPopdown.show(),this.children.delimExtractionDropdown.focus()},updateEventTable:function(){var i=this.model.state.get("delimItems")||[],s=(this.model.state.get("masterEvent"),this.model.state.get("delimFieldNames"));if(t.isUndefined(s)||s.length<i.length){s=[];for(var n=1;n<=i.length;n++)s.push("field"+n);this.model.state.set({delimFieldNames:s},{silent:!0}),this.model.state.trigger("delimFieldNamesUpdated")}var r=e("<tr>"),o=e("<tr>");t(i).each(function(i,n){var l=t.isUndefined(s[n])?"field"+(n+1):s[n],d=a.getFieldColorWithIndex(n),c="<span>"+t.escape(l)+'<i class="icon-pencil"></i></span>',h='<span class="highlighted-match highlighted-'+d+'">'+t.escape(i)+"</span>",p=e("<td>").addClass("masterevt-hdr").data("fieldnum",n).append(c),u=e("<td>").addClass("masterevt-col").data("fieldnum",n).data("fieldname",l).append(h);r.append(p),o.append(u)}.bind(this)),this.$("table.masterevent").empty(),this.$("table.masterevent").append(e("<thead>").append(r)),this.$("table.masterevent").append(e("<tbody>").append(o)),this.$(".icon-pencil").each((function(i,s){e(s).tooltip({animation:!1,title:t("Edit").t(),container:s})}))},render:function(){return this.$el.html(this.compiledTemplate({})),this.updateEventTable(),this},template:'            <div class="master-event-container scrolling-table-wrapper">                    <table class="masterevent table table-chrome table-striped not-wrapped-results"></table>            </div>        ',delimPopdownTemplate:'            <div class="popdown-dialog">                <div class="arrow extraction-dialog-arrow"></div>            </div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/MasterEventEditor":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/field_extractor/FieldExtractionForm"),i("views/shared/delegates/Popdown"),i("util/field_extractor_utils"),i("views/field_extractor/EditExtractionDropdown"),i("views/field_extractor/RemoveRequiredTextDropdown"),i("helpers/user_agent"),i("shim/bootstrap.tooltip")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d){return s.extend({moduleId:i.i,className:"automatic-extraction-editor",initialize:function(){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:masterEvent change:examples change:requiredText change:sampleEvents",this.debouncedRender),this.selection=-1},events:{"click .manual-mode-button":function(e){e.preventDefault(),this.trigger("action:selectManualMode")},"mouseup .master-event-container":function(t){t.preventDefault();var i=e(t.target),s=window.getSelection();i.hasClass(a.HIGHLIGHTED_MATCH_CLASS)?(this.updateExtractionHandler(t,i),this.removeTemporaryHighlight("",i)):i.hasClass(a.REQUIRED_TEXT_CLASS)?(this.removeRequiredTextHandler(t,i),this.removeTemporaryHighlight("",i)):i.is(".remove-button")||i.hasClass(a.HIGHLIGHTED_EXISTING_MATCH_CLASS)?this.removeTemporaryHighlight("",i):this.newExtractionHandler(t,i,s)},"click .remove-button":function(t){t.preventDefault(),this.$el.hasClass("disabled")||this.trigger("action:removeExistingSampleEvent",parseInt(e(t.currentTarget).data("sample-index"),10))}},updateExtractionHandler:function(t,i){var s=i.data("fieldName"),n=i.text(),r=i.closest(".event-wrapper");this.$el.hasClass("disabled")||(this.children.editExtractionDropdown&&(this.stopListening(this.children.editExtractionDropdown),this.children.editExtractionDropdown.remove()),this.children.editExtractionDropdown=new o({fieldValue:n,fieldName:s,mode:"menu",model:{state:this.model.state},eventType:r.is(".master-event-wrapper")?"master":"sample"}),this.listenTo(this.children.editExtractionDropdown,"action:rename",(function(e){this.trigger("action:renameExistingExample",s,e)})),this.listenTo(this.children.editExtractionDropdown,"action:remove",(function(e){r.is(".master-event-wrapper")?this.trigger("action:removeExistingExample",e):this.trigger("action:removeExistingSampleExtraction",e,parseInt(r.data("sample-index"),10))})),e("body").append(this.children.editExtractionDropdown.render().el),this.children.editExtractionDropdown.show(i,{$onOpenFocus:this.$el}))},removeRequiredTextHandler:function(t,i){this.children.removeRequiredTextDropdown&&(this.stopListening(this.children.removeRequiredTextDropdown),this.children.removeRequiredTextDropdown.remove()),this.children.removeRequiredTextDropdown=new l({requiredText:i.text()}),this.listenTo(this.children.removeRequiredTextDropdown,"action:remove",(function(){this.trigger("action:removeRequiredText")})),e("body").append(this.children.removeRequiredTextDropdown.render().el),this.children.removeRequiredTextDropdown.show(i,{$onOpenFocus:this.$el})},newExtractionHandler:function(i,s,o){if(o.anchorOffset!==o.focusOffset){var l=(s=(s=s.is(".master-event-container")?e(o.anchorNode).closest(".event-text"):s).is(".highlighted-match-selected")?s.closest(".event-text"):s).closest(".event-wrapper");if(this.$el.hasClass("disabled"))return;if(l.is(".master-event-wrapper")){if(this.model.state.get("examples").length>0&&!this.model.state.get("regex"))return}else if(this.model.state.get("sampleEvents")[parseInt(l.data("sample-index"),10)]&&!this.model.state.get("regex")&&this.model.state.get("examples").length>0)return;var d=(this.model.state.get("examples")||[]).concat([]);if(this.model.state.get("requiredText")){var c=e(".master-event-wrapper .required-text");d.push({endIndex:e(c).data("end-index"),fieldName:e(c).text(),startIndex:e(c).data("start-index")})}var h=this.model.state.get("existingExtractions");t(h).each((function(e){e.hidden||d.push({endIndex:e.endIndex,fieldName:e.fieldName,startIndex:e.startIndex})}));var p=a.getSelectionObject(o,s,d);if(this.model.state.get("masterEvent").includes("\r\n")&&(p=a.rectifyNewLineOffset(p,this.model.state.get("masterEvent"))),!p)return;if(this.children.fieldExtractionForm&&(this.stopListening(this.children.fieldExtractionForm),this.children.fieldExtractionForm.remove()),this.children.fieldExtractionPopdown&&(this.stopListening(this.children.fieldExtractionPopdown),this.children.fieldExtractionPopdown.remove()),this.$extractFieldPopdownDialog&&this.$extractFieldPopdownDialog.remove(),this.temporaryHighlight(s,p)){this.$extractFieldPopdownDialog=e(this.extractFieldPopdownTemplate).appendTo(this.el);var u=l.is(".master-event-wrapper")?"master":"sample";this.children.fieldExtractionForm=new n({selection:p,requiredText:this.model.state.get("requiredText"),model:{state:this.model.state},eventType:u,sampleEventIndex:"sample"===u?l.data("sample-index"):null}),this.children.fieldExtractionPopdown=new r({el:this.el,dialog:".popdown-dialog",mode:"dialog",attachDialogTo:"body",adjustPosition:!1}),this.children.fieldExtractionForm.render().appendTo(this.$extractFieldPopdownDialog),this.listenTo(this.children.fieldExtractionForm,"action:addExtraction",(function(e){this.trigger("action:addExtraction",e),this.children.fieldExtractionPopdown.hide()})),this.listenTo(this.children.fieldExtractionForm,"action:addRequiredText",(function(e){this.trigger("action:addRequiredText",e),this.children.fieldExtractionPopdown.hide()})),this.listenTo(this.children.fieldExtractionForm,"action:addSampleExtraction",(function(e){this.trigger("action:addSampleExtraction",e,parseInt(l.data("sample-index"),10)),this.children.fieldExtractionPopdown.hide()})),this.children.fieldExtractionPopdown.pointTo(s.find(".highlighted-match-selected")),this.listenTo(this.children.fieldExtractionPopdown,"hidden",(function(t){t&&e(t.target).is(".highlighted-match-selected")||this.removeTemporaryHighlight(p,s)})),this.children.fieldExtractionPopdown.show(),this.children.fieldExtractionForm.focus()}}else this.removeTemporaryHighlight("",s)},verifyNoExistingOverlap:function(i,s,n){return!t.any(n,(function(t){return i>=e(t).data("start-index")&&i<e(t).data("end-index")||i<=e(t).data("start-index")&&s>e(t).data("start-index")}))},verifyNoFieldOverlap:function(i,s,n,r){var a=n.startIndex,o=n.endIndex;if(r.length>0){var l=e(r).data("start-index"),d=e(r).data("end-index");if(l<o&&d>a)return!1}return!!this.verifyNoExistingOverlap(a,o,s)&&!t.any(i,(function(t){return a>=e(t).data("start-index")&&a<e(t).data("end-index")||a<=e(t).data("start-index")&&o>e(t).data("start-index")}))},verifyNoSampleFieldOverlap:function(e,i,s){var n=s.startIndex,r=s.endIndex;return!!this.verifyNoExistingOverlap(n,r,i)&&!t.any(e,(function(e){return n>=e.startIndex&&n<e.endIndex||n<=e.startIndex&&r>e.startIndex}))},temporaryHighlight:function(i,s){var n=i.closest(".event-wrapper");if(s.startIndex>s.endIndex){var r=s.endIndex;s.endIndex=s.startIndex,s.startIndex=r}if(n.is(".master-event-wrapper")){var o=this.$(".master-event-wrapper .highlighted-match"),l=this.$(".master-event-wrapper .highlighted-existing-match"),d=this.$(".master-event-wrapper .required-text"),c=this.verifyNoFieldOverlap(o,l,s,d);if(c){var h=this._buildExtractions().concat([s]);i.find(".event-text").length>0&&(i=i.find(".event-text"));var p={text:this.model.state.get("requiredText"),startIndex:this.$el.find(".required-text").data("start-index")||""};return i.html(a.replaceBoundingGroupsWithTemplate(this.model.state.get("masterEvent"),h,p,s.startIndex,a.tempHighlightedContentTemplate)),this.$(".highlighted-existing-match").each((function(t,i){e(i).tooltip({animation:!1,title:i.getAttribute("data-field-name"),container:i})})),!0}return this.removeTemporaryHighlight("",i),!1}if(n.is(".sample-event-wrapper")){o=this.model.state.get("sampleEvents")[parseInt(n.data("sample-index"),10)].extractions;var u=[];if(t(o).each((function(e){u.push({startIndex:e.startIndex,endIndex:e.endIndex})})),l=this.$(".sample-event-wrapper .highlighted-existing-match"),c=this.verifyNoSampleFieldOverlap(u,l,s)){var m=parseInt(n.data("sample-index"),10),g=this.model.state.get("sampleEvents")[m],f=g.extractions||[];this.model.state.get("existingSampleExtractions")&&(f=f.concat(this.model.state.get("existingSampleExtractions")[m]));var v=f.concat([s]);return i.find(".event-text").length>0&&(i=i.find(".event-text")),i.html(a.replaceBoundingGroupsWithTemplate(g.rawText,v,{text:""},s.startIndex,a.tempHighlightedContentTemplate)),this.$(".highlighted-existing-match").each((function(t,i){e(i).tooltip({animation:!1,title:i.getAttribute("data-field-name"),container:i})})),!0}return this.removeTemporaryHighlight("",i),!1}},removeTemporaryHighlight:function(t,i){this.saveSelection(t);var s=i.closest(".event-wrapper");if(!d.isIE()&&s.length>0&&window.getSelection().collapse(s[0],0),0!==s.find(".highlighted-match-selected").length){if(s.is(".master-event-wrapper")){var n={text:this.model.state.get("requiredText")};s.find(".event-text").html(a.replaceBoundingGroupsWithTemplate(this.model.state.get("masterEvent"),this._buildExtractions(),n,-1,a.highlightedContentTemplate))}else{var r=parseInt(s.data("sample-index"),10),o=this.model.state.get("sampleEvents")[r],l=o.extractions||[];this.model.state.get("existingSampleExtractions")&&(l=l.concat(this.model.state.get("existingSampleExtractions")[r])),s.find(".event-text").html(a.replaceBoundingGroupsWithTemplate(o.rawText,l,{text:""},-1,a.highlightedContentTemplate))}this.$(".highlighted-existing-match").each((function(t,i){e(i).tooltip({animation:!1,title:i.getAttribute("data-field-name"),container:i})})),d.isIE()&&s.length>0&&window.getSelection().collapse(s[0],0)}},saveSelection:function(e){this.selection=e.startIndex},_buildExtractions:function(){var e=[];return this.model.state.get("examples")&&(e=e.concat(this.model.state.get("examples"))),this.model.state.get("existingExtractions")&&(e=e.concat(this.model.state.get("existingExtractions"))),e},render:function(){if(this.$el.html(this.compiledTemplate({sampleEvents:this.model.state.get("sampleEvents")})),this.model.state.get("masterEvent")){var i={text:this.model.state.get("requiredText"),startIndex:this.$el.find(".required-text").data("start-index")||""};this.$(".master-event-wrapper .event-text").html(a.replaceBoundingGroupsWithTemplate(this.model.state.get("masterEvent"),this._buildExtractions(),i,this.selection,a.highlightedContentTemplate))}var s=this.$(".sample-event-wrapper"),n={text:""};return t(this.model.state.get("sampleEvents")).each(function(t,i){var r=e(this.$el.find(".sample-event-wrapper")[i]).find(".event-text").height()/2;e(this.$el.find(".remove-button")[i]).css("top",r-3);var o=t.extractions;this.model.state.get("existingSampleExtractions")&&(o=o.concat(this.model.state.get("existingSampleExtractions")[i])),s.eq(i).find(".event-text").html(a.replaceBoundingGroupsWithTemplate(t.rawText,o,n,-1,a.highlightedContentTemplate))}.bind(this)),this.$(".highlighted-existing-match").each((function(t,i){e(i).tooltip({animation:!1,title:i.getAttribute("data-field-name"),container:i})})),this},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")},template:'            <div class="master-event-container">                <div class="event-wrapper master-event-wrapper"><span class="event-text"></span></div>                <% _(sampleEvents || []).each(function(sampleEvent, i) { %>                    <a href="#" class="remove-button" data-sample-index="<%- i %>"><i class="icon-x"></i></a>                    <div class="event-wrapper sample-event-wrapper" data-sample-index="<%- i %>"><span class="event-text"><%- sampleEvent.rawText %></span></div>                <% }) %>            </div>        ',extractFieldPopdownTemplate:'            <div class="popdown-dialog">                <div class="arrow extraction-dialog-arrow"></div>            </div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/MasterEventViewer":function(e,t,i){var s,n;s=[i("shim/jquery"),e,i("util/field_extractor_utils"),i("views/Base"),i("shim/bootstrap.tooltip")],void 0===(n=function(e,t,i,s){return s.extend({moduleId:t.i,initialize:function(){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model.state,"change:masterEvent",this.render)},render:function(){if(this.$el.html(this.compiledTemplate(this.model.state.pick("masterEvent"))),this.model.state.get("masterEvent")){var t={text:this.model.state.get("requiredText"),startIndex:this.$el.find(".required-text").data("start-index")||""};this.$(".event-wrapper .event-text").html(i.replaceBoundingGroupsWithTemplate(this.model.state.get("masterEvent"),this.model.state.get("existingExtractions")||[],t,-1,i.highlightedContentTemplate)),this.$(".highlighted-existing-match").each((function(t,i){e(i).tooltip({animation:!1,title:i.getAttribute("data-field-name"),container:i})}))}return this},template:'            <% if(masterEvent) { %>                <div class="event-wrapper sample-event-wrapper not-interactive">                    <span class="event-text"></span>                </div>            <% } %>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/RemoveRequiredTextDropdown":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("shim/jquery"),i("views/Base"),i("views/shared/PopTart"),i("views/field_extractor/RenameExtractionDialog"),i("views/shared/dialogs/TextDialog"),i("shim/splunk.util")],void 0===(n=function(e,t,i,s,n,r,a,o){return n.extend({moduleId:t.i,className:"dropdown-menu dropdown-menu-narrow",initialize:function(){n.prototype.initialize.apply(this,arguments)},events:{"click a.remove-required-text":function(t){t.preventDefault(),this.hide(),this.children.removeDialog=new a({id:"modal_delete"}),this.children.removeDialog.settings.set("primaryButtonLabel",e("Remove").t()),this.children.removeDialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.removeDialog.settings.set("titleLabel",e("Remove Required Text").t()),this.children.removeDialog.setText(o.sprintf(e("Are you sure you want to remove %s?").t(),"<em>"+e.escape(this.options.requiredText)+"</em>")),this.children.removeDialog.on("click:primaryButton",(function(e){this.removeHandler()}),this),this.children.removeDialog.$el.on("keypress",e.bind((function(e){13===e.which&&this.removeHandler()}),this)),this.children.removeDialog.on("hide",(function(){this.children.removeDialog.remove()}),this),i("body").append(this.children.removeDialog.render().el),this.children.removeDialog.show()}},removeHandler:function(){this.trigger("action:remove"),this.children.removeDialog.hide()},render:function(){var e=this.compiledTemplate({});return this.el.innerHTML=n.prototype.template_menu,this.$el.append(e),this},template:'                <ul class="first-group">                    <li class="dropdown-title-required-text"><%- _("Required Text").t() %></li>                </ul>                <ul class="second-group">                    <li><a class="remove-required-text" href="#"><%- _("Remove Required Text").t() %></a></li>                </ul>            '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/RenameExtractionDialog":function(e,t,i){var s,n;s=[i("require/underscore"),i("require/backbone"),e,i("models/shared/dataenrichment/FieldExtraction"),i("views/shared/Modal"),i("views/shared/FlashMessages")],void 0===(n=function(e,t,i,s,n,r){return n.extend({moduleId:i.i,events:{"click .btn-primary":function(e){e.preventDefault(),this.onSubmit()},keypress:function(e){13===e.which&&(e.preventDefault(),this.onSubmit())},show:function(e){e.target===e.currentTarget&&this.$(".field-name-input").focus()},hide:function(e){this.remove()}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.fieldExtraction=new s({regex:this.model.state.get("regex")}),this.children.flashMessages=new r({model:this.model.fieldExtraction})},render:function(){this.$el.html(n.TEMPLATE),this.$(n.HEADER_TITLE_SELECTOR).html(e("Rename Extraction").t()),this.children.flashMessages.render().appendTo(this.$(n.BODY_SELECTOR)),this.$(n.BODY_SELECTOR).append(n.FORM_HORIZONTAL),this.$(n.BODY_FORM_SELECTOR).append(this.compiledTemplate({fieldName:this.options.fieldName,fieldValue:this.options.fieldValue}));var t='<a href="#" class="btn btn-primary modal-btn-primary pull-right">'+e("Rename").t()+"</a>";return this.$(n.FOOTER_SELECTOR).append(n.BUTTON_CANCEL),this.$(n.FOOTER_SELECTOR).append(t),this},onSubmit:function(){var e=this.$(".field-name-input").val();this.model.fieldExtraction.set({fieldName:e}),this.model.fieldExtraction.isValid(!0)&&this.trigger("action:rename",e)},template:'            <div class="control-group">                <label class="control-label"><%- _("Field Name").t() %></label>                <div class="controls">                    <div class="control">                        <input type="text" class="input-medium field-name-input" id="input-field-name" value="<%- fieldName %>" />                    </div>                </div>            </div>            <div class="control-group">                <label class="control-label"><%- _("Field Value").t() %></label>                <div class="controls">                    <div class="control">                        <span class="input-label field-value"><%- fieldValue %></span>                    </div>                </div>            </div>        '})}.apply(t,s))||(e.exports=n)},"views/field_extractor/SaveExtractionsView":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/Base"),i("models/ACLReadOnly"),i("views/Base"),i("views/shared/controls/ControlGroup"),i("views/shared/permissions/Master"),i("util/splunkd_utils"),i("util/field_extractor_utils")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c){return a.extend({moduleId:s.i,initialize:function(i){var s,d,h={app:this.model.application.get("app"),can_change_perms:this.model.user.canScheduleSearch()||this.model.user.isAdminLike(),can_list:!0,can_share_app:this.model.user.canScheduleSearch()||this.model.user.isAdminLike(),can_share_global:this.model.user.isAdminLike(),can_share_user:!0,can_write:!0,modifiable:!0,owner:this.model.application.get("owner"),perms:{read:["*"],write:["admin"]},removable:!0,sharing:"user"};t.defaults(this.options,{nameKey:"name"}),a.prototype.initialize.call(this,this.options),this.model.extraction.isNew()&&this.model.extraction.entry.acl.set(h),this.model.inmem=new r(e.extend(!0,{},this.model.extraction.entry.acl.toJSON())),s={collection:this.collection.roles,displayForControlClass:"",displayForLabel:t("Permissions").t(),model:{inmem:this.model.inmem,user:this.model.user,serverInfo:this.model.serverInfo}},this.children.permissionsView=new l(s),this.isManualMode=this.model.state.get("interactiveMode")===c.NO_INTERACTION_MODE,"regex"===this.model.state.get("method")||this.isManualMode?this.model.extraction.isNew()?this.children.name=new o({controlType:"Text",controlOptions:{modelAttribute:this.options.nameKey,model:this.model.extraction.entry.content},label:t("Extractions Name").t()}):this.children.name=new o({controlType:"Label",controlOptions:{modelAttribute:this.options.nameKey,model:this.model.extraction.entry},label:t("Extractions Name").t()}):"delim"===this.model.state.get("method")&&(this.children.name=new o({controlType:"Text",controlOptions:{modelAttribute:"reportName",model:this.model.state},label:t("Extractions Name").t()}));var p=t("Source type").t();"source"===this.model.state.get("type")&&(p=t("Source").t()),this.children.sourcetype=new o({controlType:"Label",controlOptions:{modelAttribute:"stanza",model:this.model.extraction.entry.content},label:p}),d=new n({fieldNames:c.getCaptureGroupNames(this.model.state.get("regex"))}),this.children.fieldNames=new o({controlType:"Label",controlOptions:{modelAttribute:"fieldNames",model:d},label:t("Fields").t()}),!this.isManualMode&&this.model.extraction.isNew()&&this.model.state.get("requiredText")&&(this.children.requiredText=new o({controlType:"Label",controlOptions:{modelAttribute:"requiredText",model:this.model.state},label:t("RequiredText").t()})),"regex"===this.model.state.get("method")||this.isManualMode?this.children.regex=new o({controlType:"Label",controlOptions:{modelAttribute:"value",model:this.model.extraction.entry.content},label:t("Regular Expression").t()}):"delim"===this.model.state.get("method")&&(this.children.regex=new o({controlType:"Label",controlOptions:{modelAttribute:"delimType",model:this.model.state},label:t("Delimiter").t()}))},saveExtractions:function(){var i={app:this.model.inmem.get("app")};i.owner=this.model.application.get("owner");var s=e.Deferred(),n=e.Deferred();if("delim"===this.model.state.get("method")){i.owner=this.model.inmem.get("sharing")!==d.USER?d.NOBODY:this.model.application.get("owner");var r=this.model.state.get("reportName")?"REPORT-"+this.model.state.get("reportName"):"";r=r.replace(/\s/g,""),this.model.transform.entry.content.set({name:r}),this.model.extraction.entry.content.set({value:r,name:r}),s=this.model.transform.save({},{data:i})}else s.resolve();return s.done(function(){e.Deferred();(this.model.extraction.isNew()?this.model.extraction.save({},{data:i}).then(t(this.updateACL).bind(this)):this.model.extraction.save().then(t(this.updateACL).bind(this))).done((function(){n.resolve()}))}.bind(this)),n},updateACL:function(){if(this.model.extraction.entry.acl.get("sharing")===d.USER&&this.model.inmem.get("sharing")===d.USER)return e.Deferred().resolve();var t=this.model.inmem.toDataPayload();return t.owner=this.model.application.get("owner"),this.model.extraction.acl.save({},{data:t})},renderEvents:function(){var i={text:""};if(this.model.state.get("masterEvent")&&this.model.state.get("masterEvent").length>0){e(t(this.sampleEventTemplate).template({})).appendTo(this.$(".review-extractions-form"));var s={text:this.model.state.get("requiredText")};this.$(".master-event-wrapper").html(e('<div class="event-text"></div>').html(c.replaceBoundingGroupsWithTemplate(this.model.state.get("masterEvent"),this.model.state.get("examples"),s,-1,c.highlightedContentTemplate)))}t(this.model.state.get("sampleEvents")).each(function(t,s){this.$(".sample-events-wrapper").append(e('<div class="event-text"></div>').html(c.replaceBoundingGroupsWithTemplate(t.rawText,t.extractions,i,-1,c.highlightedContentTemplate,this.model.state.get("examples"))))}.bind(this))},render:function(){return this.$el.html(this.compiledTemplate({extractionIsNew:this.model.extraction.isNew()})),this.children.name.render().appendTo(this.$(".save-extractions-form")),"regex"===this.model.state.get("method")||this.isManualMode?this.model.extraction.isNew()&&this.children.name.$(".control").prepend(e("<span class='extract-prelabel'>EXTRACT-</span>")):"delim"===this.model.state.get("method")&&this.children.name.$(".control").prepend(e("<span class='extract-prelabel'>REPORT-</span>")),this.children.permissionsView.render().appendTo(this.$(".save-extractions-form")),this.children.sourcetype.render().appendTo(this.$(".review-extractions-form")),this.isManualMode||this.renderEvents(),this.children.fieldNames.render().appendTo(this.$(".review-extractions-form")),this.children.requiredText&&this.children.requiredText&&this.children.requiredText.render().appendTo(this.$(".review-extractions-form")),this.children.regex.render().appendTo(this.$(".review-extractions-form")),this},template:'            <div class="save-extractions-container">                <div class="save-extractions-form form-horizontal"></div>                <div class="review-extractions-form form-horizontal"></div>            </div>        ',sampleEventTemplate:'            <div class="sample-event-container">                <span class="sample-event-label control-label" for="sample-events-wrapper"><%- _("Sample event").t() %></span>                <div class="events-wrapper">                    <div class="master-event-wrapper"></div>                    <div class="sample-events-wrapper"></div>                </div>            </div>        '})}.apply(t,s))||(e.exports=n)},"views/shared/Sidebar":function(e,t,i){var s;void 0===(s=function(e,t,s){var n=i("require/underscore"),r=i("shim/jquery"),a=i("views/Base"),o=i("util/keyboard");i("views/shared/Sidebar.pcss");return a.extend({moduleId:s.i,className:"side-bar-master",defaults:{modalize:!0,direction:"right"},initialize:function(e){this.options=e=n.extend({},this.defaults,e),a.prototype.initialize.apply(this,arguments),this.contents=[],r(window).on("keydown",this.keyDown.bind(this))},keyDown:function(e){var t=e.which;t===o.KEYS.TAB?this.$(":focus").length?o.handleCircularTabbing(this.contents[this.contents.length-1],e):(this.contents[this.contents.length-1].find("a").first().focus(),e.preventDefault()):t===o.KEYS.ESCAPE&&(this.popSidebar(),e.stopPropagation())},events:{"click .background-cover":"close","click .accordion-toggle":"checkShouldToggleAccordion"},render:function(){return this.$el.html(this.compiledTemplate({options:this.options})),this},close:function(e){"function"==typeof e.preventDefault&&e.preventDefault(),e.data=1,this.removeSidebars(e)},checkShouldToggleAccordion:function(e){this.trigger("accordionToggleClicked",e)},remove:function(){r(window).off("keydown"),a.prototype.remove.apply(this,arguments)},addSidebar:function(e){if(!e)return null;var t=r(n.template(this.sidebarTemplate,{}));t.find(".sidebar-body").append(e),t.css({visibility:"hidden"}),0==this.contents.length&&t.addClass("first"),this.$el.append(t);var i=t.width()+1;this.contents.push(t),t.find(".close").bind("click",this.contents.length,n.bind(this.removeSidebars,this));var s={visibility:"visible",width:i-1};s[this.options.direction]="-"+i+"px",t.css(s),this.shiftSidebars(i)},removeSidebars:function(e){"function"==typeof e.preventDefault&&e.preventDefault();var t=e.data-1,i=this.contents.slice(t,this.contents.length),s=n.reduce(i,(function(e,t){return e+t.width()+1}),0),a=this.contents.length-t,o={};o[this.options.direction]="-="+s,this.$(".sidebar").animate(o,200,n.bind((function(){r.each(i,(function(){this.remove()})),0==t&&this.remove()}),this)),this.contents=this.contents.slice(0,t),this.trigger("sidebarsRemoved",a)},popSidebar:function(){this.removeSidebars({data:this.contents.length})},shiftSidebars:function(e){var t={};t[this.options.direction]="+="+e+"px",this.$(".sidebar").animate(t,200)},show:function(){this.shiftSidebars()},replaceLastSidebar:function(e){this.contents[this.contents.length-1].find(".sidebar-body").empty().append(e)},template:'<% if (options.modalize) { %>    <div class="background-cover"></div><% } %>',sidebarTemplate:'<div class="sidebar"><a class="close" href="#" aria-label="<%- _(\'Close\').t() %>" ><i class="icon-x"></i></a><div class="sidebar-body"></div></div>'})}.call(t,i,t,e))||(e.exports=s)},"views/shared/Sidebar.pcss":function(e,t,i){var s=i(638);"string"==typeof s&&(s=[[e.i,s,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,n);s.locals&&(e.exports=s.locals)},"views/shared/dataenrichment/preview/PreviewJobController":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("controllers/Base"),i("util/field_extractor_utils"),i("shim/splunk.util"),i("util/splunkd_utils"),i("views/shared/dialogs/RiskyCommand"),i("stubs/splunk.config")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d){return n.extend({moduleId:s.i,ADHOC_SEARCH_LEVEL:"verbose",initialize:function(e){n.prototype.initialize.call(this,e),this.model.searchJob.on("change:id",(function(){this.model.searchJob.isNew()?(this.model.searchJob.fetchAbort(),this.model.searchJob.stopPolling(),this.model.searchJob.stopKeepAlive()):this.model.searchJob.startPolling()}),this),this.model.searchJob.on("error",(function(e){o.messagesContainsOneOfTypes(e.error.get("messages"),[o.RISKY_COMMAND])&&this.showRiskyWarning(e)}),this)},createJobAttributes:function(e){var t=this.model.state.get("sampleSize"),i=this.model.state.get("filter"),s=this.model.state.get("clustering"),n=[e],a={earliest_time:t.earliest||null,latest_time:t.latest||null,auto_cancel:100,auto_finalize_ec:0,status_buckets:0,timeFormat:"%s.%Q",ui_dispatch_app:this.model.application.get("app"),rf:"*",preview:!0,adhoc_search_level:this.ADHOC_SEARCH_LEVEL,app:this.model.application.get("app"),owner:this.model.application.get("owner"),check_risky_command:d.ENABLE_RISKY_COMMAND_CHECK};return i&&n.push(this.createFilterSubQuery(i)),t.head&&n.push("head "+t.head),s===r.CLUSTERING_DIVERSE?n.push(this.createClusterSubQuery({sort:"descending"})):s===r.CLUSTERING_OUTLIERS&&n.push(this.createClusterSubQuery({sort:"ascending"})),a.search=n.join(" | "),a},createFilterSubQuery:function(e){var t=e.split("=");if(2===t.length){if('"'!==e.charAt(0)||'"'!==e.charAt(e.length-1))return a.sprintf("search %s=%s",a.searchEscape(t[0]),a.searchEscape(t[1]));e=e.substr(1,e.length-2)}return a.sprintf("search *%s*",a.searchEscape(e))},createClusterSubQuery:function(e){return a.sprintf("cluster t=0.6 showcount=true field=%s labelonly=true | dedup 3 cluster_label | sort 100 %scluster_count | sort -_time | abstract maxlines=100",a.searchEscape(this.model.state.get("inputField")),"ascending"===e.sort?"+":"-")},preview:function(e,i){this._previewSearchString||(this._previewSearchString=e),i=i||{},this.resetSearchJob();var s=t.extend(this.createJobAttributes(e),i.data);return this.model.searchJob.save({},{data:s})},resetSearchJob:function(){this.model.searchJob.clear()},showRiskyWarning:function(i){this.riskyWarningDialog=new l({model:{searchJob:i,application:this.model.application},onHiddenRemove:!0,hideInvestigateBtn:!0,actionableText:t("Do you want to run the search string?").t()}),this.listenTo(this.riskyWarningDialog,"runSearch",function(){this.preview(this._previewSearchString,{data:{provenance:"UI:DataModel",check_risky_command:!1}})}.bind(this)),this.listenTo(this.riskyWarningDialog,"cancel",this.riskyWarningDialog.hide.bind(this.riskyWarningDialog)),this.riskyWarningDialog.render().appendTo(e("body")),this.riskyWarningDialog.show()}})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/RegexGeneratorController":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("controllers/Base"),i("models/services/field_extractor/RegexGenerator")],void 0===(n=function(e,t,i,s){return i.extend({initialize:function(){this.model.regexGenerator=new s,this.masterEvent=null,this.examples=[],this.sampleEvents=[],this.counterExamples=[],this.requiredText=null},setMasterEvent:function(e){this.reset(),this.masterEvent=e},addRequiredText:function(e){return this.requiredText=e,this._fetchNewRegexes()},removeRequiredText:function(){return this.requiredText=null,this._fetchNewRegexes()},addExample:function(e){return this.examples.push(e),this._fetchNewRegexes()},removeExample:function(e){return this.examples=t(this.examples).filter((function(t){return t.fieldName!==e}),this),this.counterExamples=t(this.counterExamples).filter((function(t){return t.fieldName!==e}),this),t(this.sampleEvents).each((function(i){i.extractions=t(i.extractions).filter((function(t){return t.fieldName!==e}))})),this._fetchNewRegexes()},renameExample:function(e,i){return t(this.examples).each((function(t){t.fieldName===e&&(t.fieldName=i)}),this),t(this.counterExamples).each((function(t){t.fieldName===e&&(t.fieldName=i)}),this),t(this.sampleEvents).each((function(s){t(s.extractions).each((function(t){t.fieldName===e&&(t.fieldName=i)}))})),this._fetchNewRegexes()},addSampleEvent:function(e){this.sampleEvents.push({rawText:e,extractions:[]})},removeSampleEvent:function(t){var i=this.sampleEvents[t];return this.sampleEvents.splice(t,1),0===i.extractions.length?e.Deferred().resolve(this.model.regexGenerator.get("rules")):this._fetchNewRegexes()},addSampleExtraction:function(e,i){var s=this.sampleEvents[i],n=t(s.extractions).filter((function(t){return e.fieldName!==t.fieldName}));return n.push(e),s.extractions=n,this._fetchNewRegexes()},removeSampleExtraction:function(e,i){var s=this.sampleEvents[i],n=t(s.extractions).filter((function(t){return e!==t.fieldName}));return s.extractions=n,this._fetchNewRegexes()},addCounterExample:function(e){return this.counterExamples.push(e),this._fetchNewRegexes()},removeCounterExample:function(e){return this.counterExamples.splice(e,1),this._fetchNewRegexes()},getCurrentRegex:function(){var e=this.model.regexGenerator.get("rules");return e&&e[0]||""},getRegexGeneratorModel:function(){return this.model.regexGenerator},getCurrentExamples:function(){return e.extend(!0,[],this.examples)},getCurrentSampleEvents:function(){return e.extend(!0,[],this.sampleEvents)},getCurrentCounterExamples:function(){return e.extend(!0,[],this.counterExamples)},getCurrentRequiredText:function(){return this.requiredText},getCurrentMasterEvent:function(){return this.masterEvent},reset:function(){this.masterEvent=null,this.examples=[],this.sampleEvents=[],this.counterExamples=[],this.requiredText=null,this.model.regexGenerator.clear()},_addToExampleList:function(e,i,s,n,r){var a=t(e).findWhere({_rawtext:i});if(a)a[s]=[n,r];else{var o={_rawtext:i};o[s]=[n,r],e.push(o)}},_fetchNewRegexes:function(){if(0===this.examples.length){var i=this.requiredText?[this.requiredText]:[""];return this.model.regexGenerator.set("rules",i),e.Deferred().resolve(i)}var s=[{_rawtext:this.masterEvent}],n=[];t(this.examples).each((function(e){s[0][e.fieldName]=[e.startIndex,e.endIndex]})),t(this.sampleEvents).each((function(e){if(0!==e.extractions.length){var i={_rawtext:e.rawText};t(e.extractions).each((function(e){i[e.fieldName]=[e.startIndex,e.endIndex]})),s.push(i)}})),t(this.counterExamples).each((function(e){this._addToExampleList(n,e.rawText,e.fieldName,e.startIndex,e.endIndex)}),this);var r={app:this.model.application.get("app"),owner:this.model.application.get("owner"),field:this.model.state.get("inputField"),sid:this.model.searchJob.id,filter:this.requiredText,examples:JSON.stringify(s),counter_examples:n.length>0?JSON.stringify(n):void 0};return this.model.regexGenerator.fetch({data:r}).then(t((function(){var e=this.model.regexGenerator.get("rules");return t(e).isArray()&&1===e.length&&e[0]?(this.model.regexGenerator.trigger("serverValidated",!1,this),e):this._respondWithRegexError("Endpoint did not return exactly one regex")})).bind(this),t(this._respondWithRegexError).bind(this))},_respondWithRegexError:function(t){return e.Deferred().reject(t)}})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/RexPreviewViewStack":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/Base"),i("models/services/search/jobs/Summary"),i("models/shared/fetchdata/ResultsFetchData"),i("models/shared/dataenrichment/ExtractionEventsFetchData"),i("models/services/search/jobs/ResultJsonRows"),i("views/Base"),i("views/shared/tabcontrols/TabbedViewStack"),i("views/shared/results_table/MatchResultsTableMaster"),i("views/shared/dataenrichment/preview/components/PreviewResultsPane"),i("views/shared/dataenrichment/preview/components/MatchResultsControlBar"),i("views/shared/dataenrichment/preview/components/ViewValuesPane"),i("views/shared/dataenrichment/preview/components/DrillDownResultsTable"),i("util/splunkd_utils"),i("util/field_extractor_utils"),i("util/datamodel/search_utils"),i("shim/splunk.util")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c,h,p,u,m,g,f,v,x,b){return d.extend({moduleId:s.i,initialize:function(e){d.prototype.initialize.call(this,e),this.$el.addClass("rex-preview-view-stack"),this.model.searchJob.on("prepared",this.searchJobPrepared,this),this.model.searchJob.on("change:id",this.searchJobClear,this),this.model.summary=new r,this.model.searchJob.entry.links.on("change",(function(){this.model.summary.set("id",this.model.searchJob.entry.links.get("summary"))}),this),this.autoDrilldownEnabled=!1!==this.options.autoDrilldownEnabled},setAddSamplesEnabled:function(e){this.eventsPane&&this.eventsPane.setAddSamplesEnabled(e)},createSubViews:function(){this.eventsPane&&this.eventsPane.remove(),this.viewValuesPanes&&t(this.viewValuesPanes).each((function(e){e.remove()}),this),this.children.viewStack&&this.children.viewStack.remove(),this.model.eventsFetchData=new o({output_mode:"json_rows",segmentation:"full",count:"20",max_lines:v.MAX_EVENT_LINES,search:this.getEventsPostProcessSearch()}),this.model.drillDownFetchData=new a({output_mode:"json_rows",segmentation:"full",count:"20",max_lines:v.MAX_EVENT_LINES,search:""}),this.model.eventResults=new l({},{fetchData:this.model.eventsFetchData}),this.model.drillDownResults=new l({},{fetchData:this.model.drillDownFetchData}),this.model.eventResults.set("id",this.model.searchJob.entry.links.get("results_preview")),this.model.drillDownResults.set("id",this.model.searchJob.entry.links.get("results_preview"));var i=this.model.state.get("regex"),s=v.getCaptureGroupNames(i),n=this.model.state.get("inputField");this.eventsPane=new p({model:{application:this.model.application,state:this.model.state,searchJob:this.model.searchJob,resultsFetchData:this.model.eventsFetchData,results:this.model.eventResults},label:"_raw"===n?t("Events").t():n,resultsTableMasterOptions:e.extend(this.model.state.pick("regex","inputField","requiredText"),{enableTableDock:!1}),resultsTableMasterClass:h,resultsControlBarClass:u,controlBarOptions:{showMatchControl:!!i},noResultsMessage:{type:f.ERROR,html:t("No results found.").t()}}),this.listenTo(this.eventsPane,"action:removeExtraction",t(this.trigger).partial("action:removeExtraction")),this.listenTo(this.eventsPane,"action:selectEvent",t(this.trigger).partial("action:selectEvent")),this.listenTo(this.eventsPane,"action:nextStep",t(this.trigger).partial("action:nextStep")),this.viewValuesPanes=[],t(s).each((function(e){var i=new m({label:this.getFieldDisplayName(e),fieldName:e,model:{state:this.model.state,searchJob:this.model.searchJob,summary:this.model.summary},resultsControlBarClass:u,noResultsMessage:{type:f.WARNING,html:t("The attribute was not found in the events. Try changing the sample size or the regular expression.").t()}});this.viewValuesPanes.push(i),i.on("cellClick",this.handleCellClick,this)}),this),this.children.previewPanes=[this.eventsPane].concat(this.viewValuesPanes),this.visitedPanes=[];for(var r=0;r<this.children.previewPanes.length;r++)this.visitedPanes[r]=!1;this.children.viewStack&&this.stopListening(this.children.viewStack),this.children.viewStack=new c({selectedIndex:0}),this.children.viewStack.render().appendTo(this.$(".viewstack-placeholder")),this.toggleViewStackPanes()},getEventsPostProcessSearch:function(){var e=this.model.state.get("inputField"),i=this.model.state.get("regex"),s=v.getCaptureGroupNames(i),n=this.model.state.get("eventsView");if(i&&n===v.VIEW_MATCHING_EVENTS)return this.getPreviewMatchSearch(e,i)+x.generateFieldSubSearch(t.union([e],s),e);if(i&&n===v.VIEW_NON_MATCHING_EVENTS)return this.getPreviewNonMatchSearch(e,i)+x.generateFieldSubSearch([e],e);var r=t.union([e],s);return i&&r.unshift(v.MATCH_FIELD_NAME),this.getPreviewAllSearch(e,i)+x.generateFieldSubSearch(r,e)},getPreviewAllSearch:function(e,t){return t?b.sprintf("eval %s = if(match(%s, %s), 1, 0)",v.MATCH_FIELD_NAME,b.searchEscape(e),b.searchEscape(t,{forceQuotes:!0})):""},getPreviewMatchSearch:function(e,t){return b.sprintf("where match(%s, %s)",b.searchEscape(e),b.searchEscape(t,{forceQuotes:!0}))},getPreviewNonMatchSearch:function(e,t){return b.sprintf("where NOT match(%s, %s)",b.searchEscape(e),b.searchEscape(t,{forceQuotes:!0}))},getFieldDisplayName:function(e){var t=this.model.state.get("fieldAliases");return t&&t[e]?t[e]:e},handleCellClick:function(e){if(this.autoDrilldownEnabled){var s=this.model.state.get("inputField"),n=t.union(["_raw",s],v.getCaptureGroupNames(this.model.state.get("regex"))),r="search "+e.fieldName+'="'+e.value.replace(/"/g,'\\"')+'"'+x.generateFieldSubSearch(n,s);this.model.drillDownFetchData.set("search",r),this.model.drillDownResults.safeFetch(),this.model.rowInfo=new i.Model,this.drillDownTable=new g({model:{searchJob:this.model.searchJob,resultsFetchData:this.model.drillDownFetchData,rowInfo:this.model.rowInfo,results:this.model.drillDownResults},label:t("Drill-down").t(),tabClassName:"tab-results-last",noResultsMessage:{type:f.WARNING,html:t("None of the results match the selected row.").t()}}),this.drillDownTable.on("backToRegexClicked",(function(){this.trigger("hideDrillDownView",this.drillDownTable)}),this),this.model.rowInfo.set("field",e.fieldName),this.model.rowInfo.set("value",e.value),this.trigger("showDrillDownView",this.drillDownTable.render())}else this.trigger("action:valueDrilldown",e.fieldName,e.value)},searchJobPrepared:function(){this.previousHasEvents=void 0,this.model.searchJob.on("jobProgress",this.searchJobProgress,this),this.model.searchJob.entry.content.on("change:eventCount",this.toggleViewStackPanes,this),this.createSubViews()},searchJobClear:function(){this.model.searchJob.isNew()&&(this.model.searchJob.off("jobProgress",this.searchJobProgress,this),this.model.searchJob.entry.content.off("change:eventCount",this.toggleViewStackPanes,this),this.model.summary.clear())},searchJobProgress:function(){this.model.summary.safeFetch({data:{top_count:1e3,min_freq:0}}),this.model.eventResults.safeFetch()},normalizeEventCount:function(e){return null!=e&&0!=(e=parseInt(e,10))},toggleViewStackPanes:function(){var e=this.normalizeEventCount(this.model.searchJob.entry.content.get("eventCount"));if(e!=this.previousHasEvents){var t=this.children.viewStack.getLength();if(e){if(t<=1)for(var i=this.children.previewPanes.length,s=t;s<i;s++){var n=this.children.previewPanes[s];this.children.viewStack.addPane(n)}}else if(t>1)for(var r=t-1;r>0;r--)this.children.viewStack.removePaneAt(r);else 0==t&&this.children.viewStack.addPane(this.children.previewPanes[0])}this.previousHasEvents=e},render:function(){return this.$el.html(this.compiledTemplate({})),this},template:'                <div class="viewstack-placeholder"></div>            '},{SUMMARY_TOP_COUNT:1e3})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/DrillDownResultsControlBar":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/Base"),i("views/shared/SearchResultsPaginator"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/SyntheticSelectControl"),i("views/shared/jobstatus/Spinner"),i("views/shared/jobstatus/Count"),i("collections/Base")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c){return n.extend({moduleId:s.i,events:{"click .back-to-regex-link":function(e){this.trigger("backToRegexClicked")}},initialize:function(e){n.prototype.initialize.call(this,e),this.children.spinner=new l({model:this.model.searchJob}),this.children.count=new d({model:this.model.searchJob}),this.children.pageCount=new o({menuWidth:"narrow",className:"btn-group pull-left",items:[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],model:this.model.page,modelAttribute:"count",toggleClassName:"btn-pill"}),this.children.paginator=new r({model:{state:this.model.paginatorState,searchJob:this.model.searchJob,results:this.model.results},collection:new c,mode:this.options.reportType}),this.model.rowInfo.on("change",this.renderValueStats,this),this.model.results.on("change:post_process_count",this.renderValueStats,this)},renderValueStats:function(){this.model.results.get("post_process_count")&&this.$(".value-stats").html(this.model.results.get("post_process_count")+" matches for "+this.model.rowInfo.get("field")+"="+this.model.rowInfo.get("value"))},render:function(){return this.$el.html(this.compiledTemplate({})),this.children.pageCount.render().appendTo(this.$(".page-count-placeholder")),this.children.paginator.render().appendTo(this.$(".paginator-placeholder")),this.renderValueStats(),this},template:'                <div class="back-button-container">                        <a href="#" class="back-to-regex-link"><i class="icon-chevron-left icon-no-underline"></i><span><%- _("Back to regex").t() %></span></a>                </div>                <div class="divider"></div>                <div class="value-stats-container">                    <div class="value-stats pull-left"></div>                    <div class="page-count-placeholder"></div>                    <div class="paginator-placeholder pull-right"></div>                </div>'})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/DrillDownResultsTable":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/Base"),i("views/shared/dataenrichment/preview/components/DrillDownResultsControlBar"),i("views/shared/dataenrichment/preview/components/ResultsTableContainer"),i("views/Base"),i("views/shared/results_table/ResultsTableMaster"),i("mixins/ViewPane")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d){return o.extend({moduleId:s.i,REPORT_TYPE:"results_preview",initialize:function(e){t(e).defaults({resultsTableMasterClass:l}),o.prototype.initialize.call(this,e),this.children.resultsControlBar=new r({model:{page:this.model.resultsFetchData,searchJob:this.model.searchJob,paginatorState:this.model.resultsFetchData,rowInfo:this.model.rowInfo,results:this.model.results},reportType:this.REPORT_TYPE}),this.children.resultsControlBar.on("backToRegexClicked",(function(){this.trigger("backToRegexClicked")}),this),this.children.resultsView=new a({model:{searchData:this.model.results,searchDataParams:this.model.resultsFetchData,searchJob:this.model.searchJob,config:new n},resultsTableClass:this.options.resultsTableMasterClass,noResultsMessage:this.options.noResultsMessage})},render:function(){return this.children.resultsControlBar&&this.children.resultsControlBar.detach(),this.$el.html(this.compiledTemplate({})),this.children.resultsControlBar.render().appendTo(this.$(".results-control-bar-placeholder")),this.children.resultsView.render().appendTo(this.$(".drilldown-table-wrapper")),this},invalidateReflow:function(){o.prototype.invalidateReflow.apply(this,arguments),this.children.resultsView.invalidateReflow()},template:'                <div class="results-control-bar-placeholder"></div>                <div class="drilldown-table-wrapper"></div>            '})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/MatchResultsControlBar":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("collections/Base"),i("models/Base"),i("views/Base"),i("views/shared/jobstatus/Count"),i("views/shared/dataenrichment/preview/components/SelectPageCount"),i("views/shared/SearchResultsPaginator"),i("views/shared/jobstatus/Spinner"),i("views/shared/controls/TextControl"),i("views/shared/dataenrichment/preview/components/SelectSampleSize"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/SyntheticSelectControl"),i("views/shared/controls/SyntheticRadioControl"),i("util/field_extractor_utils"),i("util/keyboard")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c,h,p,u,m,g){return n.extend({moduleId:t.i,className:"match-results-control-bar",events:{"click .apply-filter-button":function(e){e.preventDefault(),this.model.state.set(this.model.filterMediator.pick("filter"))},"keypress .filter-input":function(e){e.which===g.KEYS.ENTER&&this.model.state.set(this.model.filterMediator.pick("filter"))}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.count=new r({model:this.model.searchJob}),this.children.spinner=new l({model:this.model.searchJob}),this.children.pageCount=new a({model:this.model.page}),this.options.paginator?this.children.paginator=this.options.paginator:this.children.paginator=new o({model:{state:this.model.paginatorState,searchJob:this.model.searchJob,results:this.model.results},collection:new i,mode:this.options.reportType}),this.model.filterMediator=new s(this.model.state.pick("filter")),this.children.filterInput=new d({model:this.model.filterMediator,modelAttribute:"filter",placeholder:e("filter").t(),className:"control filter-input-control input-append",inputClassName:"filter-input",updateOnKeyUp:!0}),this.listenTo(this.model.filterMediator,"change:filter",this.refreshFilterControl),this.listenTo(this.model.state,"change:filter",this.refreshFilterControl),this.children.selectSampleSize=new c({model:this.model.state,modelAttribute:"sampleSize"}),this.children.selectClustering=new p({model:this.model.state,modelAttribute:"clustering",toggleClassName:"btn",menuWidth:"narrow",items:[{label:e("All events").t(),value:m.CLUSTERING_NONE},{label:e("Diverse events").t(),value:m.CLUSTERING_DIVERSE},{label:e("Rare events").t(),value:m.CLUSTERING_OUTLIERS}]}),this.options.showMatchControl&&(this.children.selectMatch=new u({model:this.model.state,modelAttribute:"eventsView",items:[{label:e("All Events").t(),value:m.VIEW_ALL_EVENTS},{label:e("Matches").t(),value:m.VIEW_MATCHING_EVENTS},{label:e("Non-Matches").t(),value:m.VIEW_NON_MATCHING_EVENTS}]}))},render:function(){e(this.children).invoke("detach"),this.$el.html(this.compiledTemplate({})),this.children.pageCount.render().appendTo(this.$(".page-count-container")),this.children.paginator.render().appendTo(this.$(".pagination-container")),this.children.spinner.render().appendTo(this.$(".spinner-container")),this.children.count.render().appendTo(this.$(".count-container"));var t=this.$(".controls-row");if(this.children.filterInput.render().appendTo(t),this.children.filterInput.$el.append('<a href="#" class="apply-filter-button btn btn-primary">'+e("Apply").t()+"</a>"),this.children.selectSampleSize.render().appendTo(t),this.children.selectClustering.render().appendTo(t),this.children.selectMatch&&this.children.selectMatch.render().appendTo(t),this.model.state.has("useSearchFilter")&&this.model.state.get("hasSid")&&(this.model.state.get("mode")===m.SELECT_SAMPLE_MODE||this.model.state.get("mode")===m.SELECT_FIELDS_MODE||this.model.state.get("mode")===m.VALIDATE_FIELDS_MODE))this.$(".search-filter-container");return this.refreshFilterControl(),this},refreshFilterControl:function(){var e=this.model.state.get("filter"),t=e!==this.model.filterMediator.get("filter"),i=this.$(".apply-filter-button"),s=this.$(".filter-input");t?i.removeClass("disabled"):i.addClass("disabled"),t||e?s.addClass("active"):s.removeClass("active")},template:'            <div class="job-status-row">                <div class="spinner-container"></div>                <div class="count-container"></div>                <div class="pagination-container pull-right"></div>                <div class="page-count-container pull-right"></div>                <div class="search-filter-container pull-right"></div>            </div>            <div class="controls-row"></div>        '})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/PreviewResultsPane":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/Base"),i("views/shared/dataenrichment/preview/components/SearchResultsControlBar"),i("views/shared/dataenrichment/preview/components/ResultsTableContainer"),i("views/Base"),i("views/shared/results_table/ResultsTableMaster"),i("mixins/ViewPane")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d){var c=o.extend({moduleId:s.i,REPORT_TYPE:"results_preview",className:"tab-pane",initialize:function(e){t(e).defaults({resultsTableMasterClass:l,resultsControlBarClass:r}),o.prototype.initialize.call(this,e),this.viewPaneInitialize(e),this.children.resultsControlBar=new this.options.resultsControlBarClass(t.extend({model:{page:this.model.resultsFetchData,state:this.model.state,searchJob:this.model.searchJob,paginatorState:this.model.resultsFetchData,results:this.model.results},reportType:this.REPORT_TYPE},this.options.controlBarOptions)),this.children.resultsView=new a({model:{searchData:this.model.results,searchDataParams:this.model.resultsFetchData,searchJob:this.model.searchJob,state:this.model.state,config:new n},tableOptions:this.options.resultsTableMasterOptions,resultsTableClass:this.options.resultsTableMasterClass,noResultsMessage:this.options.noResultsMessage}),this.listenTo(this.children.resultsView,"all",this.trigger)},setAddSamplesEnabled:function(e){this.children.resultsView.setAddSamplesEnabled(e)},render:function(){return this.children.resultsControlBar&&this.children.resultsControlBar.detach(),this.children.resultsView&&this.children.resultsView.detach(),this.$el.html(this.compiledTemplate({})),this.children.resultsControlBar.render().appendTo(this.$(".results-control-bar-placeholder")),this.children.resultsView.render().appendTo(this.$(".preview-table-wrapper")),this},template:'                <div class="results-control-bar-placeholder"></div>                <div class="preview-table-wrapper"></div>            '});return t.extend(c.prototype,d),c}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/ResultsControlBar":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/Base"),i("views/shared/dataenrichment/preview/components/SelectSampleSize"),i("views/shared/dataenrichment/preview/components/SelectPageCount"),i("views/shared/SearchResultsPaginator"),i("views/shared/controls/ControlGroup"),i("views/shared/jobstatus/Spinner"),i("views/shared/jobstatus/Count"),i("collections/Base")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c,h){return n.extend({moduleId:s.i,initialize:function(e){n.prototype.initialize.call(this,e),this.children.spinner=new d({model:this.model.searchJob}),this.initializeCount(e),this.children.selectSampleSize=new r({model:this.model.state,modelAttribute:"sampleSize"}),this.children.pageCount=new a({model:this.model.page}),this.children.paginator=this.options.paginator},initializeCount:function(e){this.children.count=new c({model:this.model.searchJob})},render:function(){return this.$el.html(this.compiledTemplate({})),this.children.spinner.render().appendTo(this.$(".spinner-container")),this.children.count.render().appendTo(this.$(".count-container")),this.children.selectSampleSize.render().appendTo(this.$(".select-sample-size-placeholder")),this.children.pageCount.render().appendTo(this.$(".page-count-placeholder")),this.children.paginator.render().appendTo(this.$(".paginator-placeholder")),this},template:'                <div class="job-status-row">                    <div class="spinner-container"></div>                    <div class="count-container"></div>                    <div class="paginator-placeholder pull-right"></div>                    <div class="page-count-placeholder pull-right"></div>                </div>                <div class="controls-row">                    <div class="select-sample-size-placeholder pull-left"></div>                </div>'})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/ResultsTableContainer":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/Base"),i("views/shared/results_table/ResultsTableMaster"),i("views/shared/FlashMessages"),i("util/splunkd_utils")],void 0===(n=function(e,t,i,s,n,r,a,o){var l=n.extend({moduleId:s.i,initialize:function(e){n.prototype.initialize.call(this,e),t(e).defaults({resultsTableClass:r,tableOptions:{}}),t(e.tableOptions).defaults({enableTableDock:!0,className:"scrolling-table-wrapper"}),e.tableOptions.model=this.model,this.model.searchData.on("sync",this.resultsRowsChangeHandler,this),this.children.resultsTable=new e.resultsTableClass(e.tableOptions),this.listenTo(this.children.resultsTable,"all",this.trigger),this.children.flashMessagesView=new a({model:[this.model.searchData],whitelist:[o.ERROR,o.INFO]})},setAddSamplesEnabled:function(e){t(this.children.resultsTable.setAddSamplesEnabled).isFunction()&&this.children.resultsTable.setAddSamplesEnabled(e)},resultsRowsChangeHandler:function(){var e=this.model.searchData.get("rows");e&&0!=e.length?(this.children.flashMessagesView.flashMsgHelper.removeGeneralMessage(l.NO_RESULTS_ID),this.children.flashMessagesView.flashMsgHelper.removeGeneralMessage(l.WAITING_ID)):this.model.searchJob.isDone()?(this.children.flashMessagesView.flashMsgHelper.removeGeneralMessage(l.WAITING_ID),this.children.flashMessagesView.flashMsgHelper.addGeneralMessage(l.NO_RESULTS_ID,this.options.noResultsMessage)):(this.children.flashMessagesView.flashMsgHelper.removeGeneralMessage(l.NO_RESULTS_ID),this.children.flashMessagesView.flashMsgHelper.addGeneralMessage(l.WAITING_ID,{type:o.INFO,html:t("Waiting for results...").t()}))},render:function(){return this.$el.html(this.compiledTemplate({})),this.children.resultsTable.render().appendTo(this.$(".results-table-placeholder")),this.children.flashMessagesView.render().appendTo(this.$(".flash-messages-placeholder")),this},invalidateReflow:function(){n.prototype.invalidateReflow.apply(this,arguments),this.children.resultsTable.invalidateReflow()},template:'                <div class="results-table-placeholder"></div>                <div class="flash-messages-placeholder" style="height:100%;"></div>            '},{NO_RESULTS_ID:"__NO_RESULTS_ID__",WAITING_ID:"__WAITING_ID__",NO_RESULTS_MSG:"No results found."});return l}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/SearchResultsControlBar":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("views/shared/dataenrichment/preview/components/ResultsControlBar"),i("views/shared/jobstatus/Count"),i("views/shared/SearchResultsPaginator"),i("collections/Base")],void 0===(n=function(e,t,i,s,n,r,a,o){return n.extend({moduleId:s.i,initialize:function(e){var t=new a({model:{state:this.model.paginatorState,searchJob:this.model.searchJob,results:this.model.results},collection:new o,mode:this.options.reportType});e.paginator=t,n.prototype.initialize.call(this,e)},initializeCount:function(e){this.children.count=new r({model:this.model.searchJob,resultsModel:this.model.results})}})}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/SelectSampleSize":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("views/shared/controls/SyntheticSelectControl"),e],void 0===(n=function(e,t,i,s){var n={FIRST_1000:{head:1e3},FIRST_10000:{head:1e4},LAST_5_MINUTES:{earliest:"-5m",latest:"now"},LAST_24_HOURS:{earliest:"-1d@h",latest:"now"},LAST_7_DAY:{earliest:"-7d@h",latest:"now"}};return i.extend({moduleId:s.i,className:"control btn-group select-field-type",initialize:function(){var s=[{label:t("1,000 events").t(),value:n.FIRST_1000},{label:t("10,000 events").t(),value:n.FIRST_10000},{label:t("5 minutes").t(),value:n.LAST_5_MINUTES},{label:t("24 hours").t(),value:n.LAST_24_HOURS},{label:t("7 days").t(),value:n.LAST_7_DAY}];e.extend(this.options,{toggleClassName:"btn",menuWidth:"narrow",items:s,defaultValue:n.FIRST_1000,label:t("Sample:").t()}),i.prototype.initialize.call(this,this.options)}},n)}.apply(t,s))||(e.exports=n)},"views/shared/dataenrichment/preview/components/ViewValuesPane":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("models/Base"),i("models/shared/fetchdata/ResultsFetchData"),i("models/services/search/jobs/ResultJsonRows"),i("views/Base"),i("views/shared/dataenrichment/preview/components/ResultsControlBar"),i("views/shared/dataenrichment/preview/components/ResultsTableContainer"),i("views/shared/Paginator"),i("views/shared/results_table/FieldValuesTableMaster"),i("mixins/ViewPane")],void 0===(n=function(e,t,i,s,n,r,a,o,l,d,c,h,p){var u=o.extend({moduleId:s.i,className:"tab-pane",initialize:function(e){t(e).defaults({resultsControlBarClass:l}),o.prototype.initialize.call(this,e),this.viewPaneInitialize(e);var i=t(this.summaryChangeHandler).debounce(0);this.model.summary.fields.on("add remove reset",i,this),this.model.summary.on("sync",i,this),this.model.resultsFetchData=new r({count:"20",offset:0,sortKey:"Count",sortDirection:"desc"}),this.model.resultsFetchData.on("change:count change:offset change:sortKey change:sortDirection",this.resultsFetchDataChangeHandler,this),this.model.resultsModel=new n({rows:void 0,fields:[t("Values").t(),t("Count").t(),t("%").t()]});var s=new c({model:this.model.resultsFetchData});this.children.resultsControlBar=new this.options.resultsControlBarClass({model:{page:this.model.resultsFetchData,state:this.model.state,searchJob:this.model.searchJob,paginatorState:this.model.resultsFetchData},paginator:s}),this.children.resultsTable=new d({model:{searchData:this.model.resultsModel,searchDataParams:this.model.resultsFetchData,searchJob:this.model.searchJob,config:new n},resultsTableClass:h,noResultsMessage:this.options.noResultsMessage,tableOptions:{enableTableDock:!1}}),this.children.resultsTable.on("cellClick",(function(e){e.fieldName=this.options.fieldName,this.trigger("cellClick",e)}),this)},summaryChangeHandler:function(){this._modesSortedByValues=void 0;var e=this.options.fieldName,t=this.model.summary.findByFieldName(e);if(t){var i=this._modesSortedByCount=t.get("modes").slice(0);this._fieldCount=t.get("count"),this.model.resultsFetchData.set("length",this._modesSortedByCount.length),"Values"==this.model.resultsFetchData.get("sortKey")&&(i=this.getModesSortedByValues()),this.updateResultsModel(i)}else this.updateResultsModel([])},resultsFetchDataChangeHandler:function(){var e="Values"==this.model.resultsFetchData.get("sortKey")?this.getModesSortedByValues():this._modesSortedByCount;this.updateResultsModel(e)},getModesSortedByValues:function(){return null==this._modesSortedByValues&&(this._modesSortedByValues=this._modesSortedByCount.slice(0),this._modesSortedByValues.sort((function(e,t){return e.value<t.value?1:e.value>t.value?-1:0}))),this._modesSortedByValues},updateResultsModel:function(e){var t,i,s,n,r=[],a=this.model.resultsFetchData.get("sortDirection"),o=parseInt(this.model.resultsFetchData.get("count"),10),l=this.model.resultsFetchData.get("offset");if("desc"==a)for(t=l,i=Math.min(o+t,e.length),s=t;s<i;s++)n=e[s],r.push({Values:n.value,Count:n.count,"%":n.count/Math.max(this._fieldCount,1)});else for(t=e.length-l-1,i=Math.max(t-o,-1),s=t;s>i;s--)n=e[s],r.push({Values:n.value,Count:n.count,"%":n.count/Math.max(this._fieldCount,1)});r.length>0?this.model.resultsModel.set("rows",r):this.model.resultsModel.set("rows",[])},render:function(){return this.$el.html(this.compiledTemplate({})),this.children.resultsControlBar.render().appendTo(this.$(".results-control-bar-placeholder")),this.children.resultsTable.render().appendTo(this.$(".preview-table-wrapper")),this},template:'                <div class="results-control-bar-placeholder"></div>                <div class="preview-table-wrapper"></div>            '});return t.extend(u.prototype,p),u}.apply(t,s))||(e.exports=n)},"views/shared/jobstatus/Spinner":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("views/shared/waitspinner/Master"),i("shim/splunk.util")],void 0===(n=function(e,t,i,s){return i.extend({className:"pull-left",moduleId:t.i,initialize:function(){i.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){i.prototype.startListening.apply(this,arguments),this.listenTo(this.model.entry.content,"change:dispatchState change:isDone change:isPaused",this.debouncedRender)},render:function(){var e=!(this.model.isDone()||this.model.entry.content.get("isPaused")||this.model.isNew());return this.spinning===e||(this.$el[e?"show":"hide"]()[e?"addClass":"removeClass"]("active"),this[e?"start":"stop"](),this.spinning=e),this}})}.apply(t,s))||(e.exports=n)},"views/shared/pcss/data-enrichment.pcss":function(e,t,i){var s=i(641);"string"==typeof s&&(s=[[e.i,s,""]]);var n={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,n);s.locals&&(e.exports=s.locals)},"views/shared/results_table/FieldValuesTableHeader":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("views/shared/results_table/ResultsTableHeader")],void 0===(n=function(e,t,i){return i.extend({moduleId:t.i,template:'                <tr class="">                <% if(rowExpansion) { %>                    <th class="col-info" style="width: 15px;"><i class="icon-info"></i></th>                <% } %>                <% if(rowNumbers) { %>                    <th class="row-number"></th>                <% } %>                <% _(fields).each(function(field) { %>                    <% if (field == "%") { %>                        <th><%- field %></th>                    <% } else { %>                        <th class="sorts <%- columnClasses[field] %>" <%- sortKeyAttribute %>="<%- field %>">                        <a href="#"><%- field %><i class="icon-sorts "></i></a>                        </th>                    <% } %>                <% }) %>            </tr>            '})}.apply(t,s))||(e.exports=n)},"views/shared/results_table/FieldValuesTableMaster":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/shared/results_table/ResultsTableMaster"),i("views/shared/results_table/FieldValuesTableHeader"),i("views/shared/results_table/renderers/PercentCellRenderer")],void 0===(n=function(e,t,i,s,n,r){return s.extend({moduleId:i.i,initialize:function(t){this.options=e.extend(!0,{headerClass:n},this.options),s.prototype.initialize.call(this,this.options),this.addCellRenderer(new r)}})}.apply(t,s))||(e.exports=n)},"views/shared/results_table/MatchResultsTableHeader":function(e,t,i){var s,n;s=[i("require/underscore"),e,i("views/shared/results_table/ResultsTableHeader")],void 0===(n=function(e,t,i){return i.extend({moduleId:t.i,template:'                <tr class="">                    <% if(rowExpansion) { %>                        <th class="col-info" style="width: 15px;"><i class="icon-info"></i></th>                    <% } %>                    <% if(rowNumbers) { %>                        <th class="row-number"></th>                    <% } %>                    <% _(fields).each(function(field) { %>                        <% if (field == viewOptions.matchFieldName) { %>                            <th></th>                        <% } else { %>                            <th class="sorts <%- columnClasses[field] %>" <%- sortKeyAttribute %>="<%- field %>">                                <a href="#"><%- field %><i class="icon-sorts "></i></a>                            </th>                        <% } %>                    <% }) %>                </tr>            '})}.apply(t,s))||(e.exports=n)},"views/shared/results_table/MatchResultsTableMaster":function(e,t,i){var s,n;s=[i("shim/jquery"),i("require/underscore"),e,i("views/shared/results_table/ResultsTableMaster"),i("views/shared/results_table/MatchResultsTableHeader"),i("views/shared/results_table/renderers/CheckmarkCellRenderer"),i("util/field_extractor_utils"),i("shim/bootstrap.tooltip")],void 0===(n=function(e,t,i,s,n,r,a){return s.extend({moduleId:i.i,events:t.extend({},s.prototype.events,{"click .remove-button":function(t){t.preventDefault();var i=e(t.currentTarget),s=i.closest("."+a.HIGHLIGHTED_MATCH_CLASS),n=i.closest("td");this.trigger("action:removeExtraction",{rawText:n.text(),fieldName:s.data("fieldName"),selectedText:s.text(),startIndex:s.data("startIndex"),endIndex:s.data("endIndex")})},"mouseenter tr.shared-resultstable-resultstablerow":function(i){var s=e(i.target),n=s.closest("tr"),r=n.children().first();if(this._getAddSampleEnabled()){t.invoke(e(".results-table").find(".add-sample-event-button"),"remove"),r.append(t(this.addSampleEventButton).template({}));var a=e(window).width()-200;s.find(".add-sample-event-button").css({"margin-left":a+"px"}),n.find("td:last").css({"padding-right":"20px"})}},"mouseleave tr.shared-resultstable-resultstablerow":function(t){var i=e(t.target);this._getAddSampleEnabled()&&i.closest("tr").find(".add-sample-event-button").remove()},"dblclick tbody td":function(t){this.handleCellClick(e(t.target),t),this.model.state.get("mode")===a.SELECT_SAMPLE_MODE&&this.model.state.get("interactiveMode")===a.INTERACTION_MODE&&this.trigger("action:nextStep")},"mousemove tbody td":function(e){this.model.state.get("mode")===a.SELECT_SAMPLE_MODE&&e.preventDefault()}}),initialize:function(i){var o=!this.model.state.get("errorState")&&!this.model.state.get("regexGenErrorState"),l=(this.model.state.get("sampleEvents")?this.model.state.get("sampleEvents").length:0)<a.SAMPLE_EVENT_LIMIT&&!0===o;this.options=e.extend(!0,{headerClass:n},this.options),this.setAddSamplesEnabled(l),s.prototype.initialize.call(this,this.options),this.addCellRenderer(t(this.highlightedFieldsCellRenderer).bind(this)),this.addCellRenderer(new r),this.listenTo(this.model.state,"change:mode change:interactiveMode",(function(){var e=this.model.state.get("mode"),t=this.model.state.previous("mode"),i=this.model.state.get("interactiveMode"),s=this.model.state.previous("interactiveMode");this.updateTableInteractivity(),(e===a.VALIDATE_FIELDS_MODE&&t===a.SELECT_FIELDS_MODE||t===a.VALIDATE_FIELDS_MODE&&e===a.SELECT_FIELDS_MODE||i===a.NO_INTERACTION_MODE&&e===a.VALIDATE_FIELDS_MODE||s===a.NO_INTERACTION_MODE&&e===a.VALIDATE_FIELDS_MODE||s!==i&&this.options.requiredText)&&this.debouncedRender()}))},setAddSamplesEnabled:function(e){this.addSamplesEnabled=e,this.updateTableInteractivity()},updateTableInteractivity:function(){this._getCellClickEnabled()?this.model.config.set({"display.statistics.drilldown":"row"}):(this.model.config.set({"display.statistics.drilldown":"none"}),this.$("tr").removeClass("highlighted"))},handleCellClick:function(i,s){if(0!==i.length&&this._getCellClickEnabled()){s.preventDefault(),i.blur(),i.closest("tr").blur();var n=i.closest("tr").attr("data-row-index"),r=[];if(this.model.state.get("mode")===a.SELECT_SAMPLE_MODE){var o=t(this.rawFields).indexOf("_raw");r=this.generateFieldBounds(n,a.OFFSET_FIELD_NAME)||[],this.trigger("action:selectEvent",this.rawRows[n][o],r)}else{var l=i.closest("tr").find(".interactive-extraction-cell");r=this.generateExistingFieldBounds(n,a.OFFSET_FIELD_NAME)||[],e(".add-sample-event-button").remove(),this.trigger("action:selectEvent",l.text(),r),e("html,body").animate({scrollTop:"0px"},300)}}},generateHeaderViewOptions:function(){return t.extend({matchFieldName:a.MATCH_FIELD_NAME},s.prototype.generateHeaderViewOptions.apply(this,arguments))},generateCellObjects:function(e,i,n,r){var o=t(s.prototype.generateCellObjects.apply(this,arguments)).map((function(e){return t.extend({matchFieldName:a.MATCH_FIELD_NAME,inputField:this.options.inputField,fieldBounds:this.generateFieldBounds(r,a.OFFSET_FIELD_NAME)},e)}),this),l=t(o).find((function(e){return e.field===a.OFFSET_FIELD_NAME}));return t(o).each((function(e){l&&!e.fieldBounds&&(e.fieldBounds=l.fieldBounds)})),o},generateExistingFieldBounds:function(e,i){var s=t(this.rawFields).indexOf(i+0);if(-1===s)return[];for(var n=[],r="",o=[],l=0,d=0,c=0,h=this.model.state.get("existingExtractions");-1!==s;){for(o=(r=this.rawRows[e][s])?a.parseBoundingGroupString(r,!0):[],d=0;d<o.length;d++){for(c=0;c<h.length;c++)if(h[c].fieldName===o[d].fieldName){o[d].hidden=h[c].hidden;break}n.push(o[d])}l++,s=t(this.rawFields).indexOf(i+l)}return t(n).sortBy("startIndex")},generateFieldBounds:function(e,i){var s=t(this.rawFields).indexOf(i),n=t(this.rawFields).indexOf(i+0);if(-1!==s||-1!==n){var r=[],o=this.rawRows[e][s],l=o?a.parseBoundingGroupString(o):[];return r=(r=r.concat(l)).concat(this.generateExistingFieldBounds(e,i)),t(r).sortBy("startIndex")}},isDataField:function(e){return e===a.MATCH_FIELD_NAME||s.prototype.isDataField.apply(this,arguments)},highlightedFieldsCellRenderer:function(i,s){if(s.field!==s.inputField)return!1;var n,r={text:this.options.requiredText};return this.options.regex||(r.text=""),n=this.model.state.get("interactiveMode")===a.NO_INTERACTION_MODE?a.replaceBoundingGroupsWithTemplate(s.value,s.fieldBounds):this.model.state.has("method")&&"delim"===this.model.state.get("method")?t.escape(s.value):a.replaceBoundingGroupsWithTemplate(s.value,s.fieldBounds,r,-1,a.highlightedContentTemplate),i.addClass(a.INTERACTIVE_CELL_CLASS).addClass("field-extraction").html(n),this.model.state.get("mode")===a.VALIDATE_FIELDS_MODE&&this.model.state.get("interactiveMode")===a.INTERACTION_MODE&&i.find("."+a.HIGHLIGHTED_MATCH_CLASS).append('<a class="remove-button" href="#"><i class="icon-x icon-large"></i></a>'),i.find(".highlighted-existing-match").each((function(t,i){e(i).tooltip({animation:!1,title:i.getAttribute("data-field-name"),container:i})})),!0},_getCellClickEnabled:function(){return(this._getAddSampleEnabled()||this.model.state.get("mode")===a.SELECT_SAMPLE_MODE)&&this.model.state.get("interactiveMode")===a.INTERACTION_MODE},_getAddSampleEnabled:function(){return this.model.state.get("mode")===a.SELECT_FIELDS_MODE&&this.model.state.get("interactiveMode")===a.INTERACTION_MODE&&this.addSamplesEnabled},addSampleEventButton:'<div class="add-sample-event-button"><i class="icon-plus" style="color:white"></i><%- _(" Add sample event").t() %></div>'})}.apply(t,s))||(e.exports=n)},"views/shared/results_table/renderers/CheckmarkCellRenderer":function(e,t,i){var s;void 0===(s=function(e,t,s){var n=i("require/underscore");i("stubs/i18n");return i("views/shared/results_table/renderers/BaseCellRenderer").extend({canRender:function(e){return e.field===e.matchFieldName},setup:function(e,t){e.addClass("checkmark")},teardown:function(e,t){e.removeClass("checkmark")},render:function(e,t){return e.html(n.template(this.template,t)),this},template:'            <% if (value == "1") { %>                <span class="font-icon" style="color: #487f22;">âœ“</span>            <% } else { %>                <i class="font-icon" style="color: #b00;">âœ—</i>            <% } %>                    '})}.call(t,i,t,e))||(e.exports=s)},"views/shared/results_table/renderers/PercentCellRenderer":function(e,t,i){var s;void 0===(s=function(e,t,s){var n=i("require/underscore");i("stubs/i18n"),i("util/time");return i("views/shared/results_table/renderers/BaseCellRenderer").extend({canRender:function(e){return"%"==e.field||"Percent"==e.field},setup:function(e,t){e.addClass("percent")},teardown:function(e,t){e.removeClass("percent")},render:function(e,t){return e.html(n.template(this.template,t)),this},template:'            <div style="width:5em; margin-right:8px" class="pull-left"><%- (value * 100).toFixed(3) %></div>            <div style="width:calc(100% - 5em - 8px)" class="pull-left">                <div style="width:<%- Math.round(value * 100) %>%;" class="graph-bar pull-left"></div>            <div>        '})}.call(t,i,t,e))||(e.exports=s)}});