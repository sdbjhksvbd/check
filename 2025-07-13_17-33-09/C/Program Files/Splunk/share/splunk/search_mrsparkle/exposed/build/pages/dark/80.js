(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{2726:function(t,e,i){(t.exports=i(5)(!1)).push([t.i,".splunk-mapping-Map .leaflet-popup-content-wrapper{background:#000;border-radius:3px;-webkit-box-shadow:none;box-shadow:none;padding:6px 12px}.splunk-mapping-Map .leaflet-popup-content{color:#fff;font-family:Splunk Platform Sans,Proxima Nova,Roboto,Droid,Helvetica Neue,Helvetica,Arial,sans-serif;margin:0}.splunk-mapping-Map .map-tooltip-table{border:0;border-collapse:collapse;border-spacing:0}.splunk-mapping-Map .map-tooltip-table td{padding:0;white-space:nowrap}.splunk-mapping-Map .map-tooltip-table td.tooltip-column-left{text-align:left}.splunk-mapping-Map .map-tooltip-table td.tooltip-column-right{text-align:right}",""])},2727:function(t,e,i){(t.exports=i(5)(!1)).push([t.i,".leaflet-reset-zoom-icon{display:block;margin:auto;padding-top:2px}@media print{.leaflet-reset-zoom{display:none}}.leaflet-control-zoom-in:focus,.leaflet-control-zoom-out:focus{border-collapse:separate;-webkit-box-shadow:0 0 1px 2px #006eaa;box-shadow:0 0 1px 2px #006eaa;outline:0}.leaflet-control-zoom-in:focus:active:not([disabled]),.leaflet-control-zoom-out:focus:active:not([disabled]){-webkit-box-shadow:none;box-shadow:none}.leaflet-control-zoom-in:focus,.leaflet-control-zoom-out:focus{text-decoration:none}",""])},974:function(t,e,i){var n=i(133);(t.exports=i(5)(!1)).push([t.i,'/* required styles */\n\n.leaflet-map-pane,\n.leaflet-tile,\n.leaflet-marker-icon,\n.leaflet-marker-shadow,\n.leaflet-tile-pane,\n.leaflet-overlay-pane,\n.leaflet-shadow-pane,\n.leaflet-marker-pane,\n.leaflet-popup-pane,\n.leaflet-overlay-pane svg,\n.leaflet-zoom-box,\n.leaflet-image-layer,\n.leaflet-layer { /* TODO optimize classes */\n\tposition: absolute;\n\t}\n.leaflet-container {\n\toverflow: hidden;\n\toutline: 0;\n\t}\n.leaflet-tile,\n.leaflet-marker-icon,\n.leaflet-marker-shadow {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\tuser-select: none;\n\t}\n.leaflet-marker-icon,\n.leaflet-marker-shadow {\n\tdisplay: block;\n\t}\n.leaflet-clickable {\n\tcursor: pointer;\n\t}\n.leaflet-dragging, .leaflet-dragging .leaflet-clickable {\n\tcursor: move;\n\t}\n.leaflet-container img {\n    /* map is broken in FF if you have max-width: 100% on tiles */\n\tmax-width: none !important;\n\t}\n.leaflet-container img.leaflet-image-layer {\n    /* stupid Android 2 doesn\'t understand "max-width: none" properly */\n    max-width: 15000px !important;\n    }\n\n.leaflet-tile-pane { z-index: 2; }\n.leaflet-objects-pane { z-index: 3; }\n.leaflet-overlay-pane { z-index: 4; }\n.leaflet-shadow-pane { z-index: 5; }\n.leaflet-marker-pane { z-index: 6; }\n.leaflet-popup-pane { z-index: 7; }\n\n.leaflet-tile {\n    filter: inherit;\n    visibility: hidden;\n\t}\n.leaflet-tile-loaded {\n\tvisibility: inherit;\n\t}\n\n.leaflet-zoom-box {\n    width: 0;\n    height: 0;\n    }\n\n/* Leaflet controls */\n\n.leaflet-control {\n\tposition: relative;\n\tz-index: 7;\n\tpointer-events: auto;\n\t}\n.leaflet-top,\n.leaflet-bottom {\n\tposition: absolute;\n\tz-index: 1000;\n\tpointer-events: none;\n\t}\n.leaflet-top {\n\ttop: 0;\n\t}\n.leaflet-right {\n\tright: 0;\n\t}\n.leaflet-bottom {\n\tbottom: 0;\n\t}\n.leaflet-left {\n\tleft: 0;\n\t}\n.leaflet-control {\n\tfloat: left;\n\tclear: both;\n\t}\n.leaflet-right .leaflet-control {\n\tfloat: right;\n\t}\n.leaflet-top .leaflet-control {\n\tmargin-top: 10px;\n\t}\n.leaflet-bottom .leaflet-control {\n\tmargin-bottom: 10px;\n\t}\n.leaflet-left .leaflet-control {\n\tmargin-left: 10px;\n\t}\n.leaflet-right .leaflet-control {\n\tmargin-right: 10px;\n\t}\n\n.leaflet-control-zoom {\n\t-moz-border-radius: 7px;\n\t-webkit-border-radius: 7px;\n\tborder-radius: 7px;\n\t}\n.leaflet-control-zoom {\n\tpadding: 5px;\n\tbackground: rgba(0, 0, 0, 0.25);\n\t}\n.leaflet-control-zoom a {\n\tbackground-color: rgba(255, 255, 255, 0.75);\n\t}\n.leaflet-control-zoom a, .leaflet-control-layers a {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.leaflet-control-zoom a {\n\t-moz-border-radius: 4px;\n\t-webkit-border-radius: 4px;\n\tborder-radius: 4px;\n\twidth: 19px;\n\theight: 19px;\n\t}\n.leaflet-control-zoom a:hover {\n\tbackground-color: #fff;\n\t}\n.leaflet-touch .leaflet-control-zoom a {\n\twidth: 27px;\n\theight: 27px;\n\t}\n.leaflet-control-zoom-in {\n\tbackground-image: url('+n(i("contrib/leaflet/images/zoom-in.png"))+");\n\tmargin-bottom: 5px;\n\t}\n.leaflet-control-zoom-out {\n\tbackground-image: url("+n(i("contrib/leaflet/images/zoom-out.png"))+");\n\t}\n\n.leaflet-control-layers {\n\tbox-shadow: 0 1px 7px #999;\n\tbackground: #f8f8f9;\n\t-moz-border-radius: 8px;\n\t-webkit-border-radius: 8px;\n\tborder-radius: 8px;\n\t}\n.leaflet-control-layers a {\n\tbackground-image: url("+n(i("contrib/leaflet/images/layers.png"))+');\n\twidth: 36px;\n\theight: 36px;\n\t}\n.leaflet-touch .leaflet-control-layers a {\n\twidth: 44px;\n\theight: 44px;\n\t}\n.leaflet-control-layers .leaflet-control-layers-list,\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\n\tdisplay: none;\n\t}\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\n\tdisplay: block;\n\tposition: relative;\n\t}\n.leaflet-control-layers-expanded {\n\tpadding: 6px 10px 6px 6px;\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n\tcolor: #333;\n\tbackground: #fff;\n\t}\n.leaflet-control-layers input {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n.leaflet-control-layers label {\n\tdisplay: block;\n\t}\n.leaflet-control-layers-separator {\n\theight: 0;\n\tborder-top: 1px solid #ddd;\n\tmargin: 5px -10px 5px -6px;\n\t}\n\n.leaflet-container .leaflet-control-attribution {\n\tbackground-color: rgba(255, 255, 255, 0.7);\n\tbox-shadow: 0 0 5px #bbb;\n\tmargin: 0;\n    }\n\n.leaflet-control-attribution,\n.leaflet-control-scale-line {\n\tpadding: 0 5px;\n\tcolor: #333;\n\t}\n\n.leaflet-container .leaflet-control-attribution,\n.leaflet-container .leaflet-control-scale {\n\tfont: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n\t}\n\n.leaflet-left .leaflet-control-scale {\n\tmargin-left: 5px;\n\t}\n.leaflet-bottom .leaflet-control-scale {\n\tmargin-bottom: 5px;\n\t}\n\n.leaflet-control-scale-line {\n\tborder: 2px solid #777;\n\tborder-top: none;\n\tcolor: black;\n\tline-height: 1;\n\tfont-size: 10px;\n\tpadding-bottom: 2px;\n\ttext-shadow: 1px 1px 1px #fff;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\t}\n.leaflet-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tpadding-top: 1px;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.leaflet-touch .leaflet-control-attribution, .leaflet-touch .leaflet-control-layers {\n\tbox-shadow: none;\n\t}\n.leaflet-touch .leaflet-control-layers {\n\tborder: 5px solid #bbb;\n\t}\n\n\n/* Zoom and fade animations */\n\n.leaflet-fade-anim .leaflet-tile, .leaflet-fade-anim .leaflet-popup {\n\topacity: 0;\n\n\t-webkit-transition: opacity 0.2s linear;\n\t-moz-transition: opacity 0.2s linear;\n\t-o-transition: opacity 0.2s linear;\n\ttransition: opacity 0.2s linear;\n\t}\n.leaflet-fade-anim .leaflet-tile-loaded, .leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\n\topacity: 1;\n\t}\n\n.leaflet-zoom-anim .leaflet-zoom-animated {\n\t-webkit-transition: -webkit-transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n\t-moz-transition: -moz-transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n\t-o-transition: -o-transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n\ttransition: transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n\t}\n\n.leaflet-zoom-anim .leaflet-tile,\n.leaflet-pan-anim .leaflet-tile,\n.leaflet-touching .leaflet-zoom-animated {\n    -webkit-transition: none;\n    -moz-transition: none;\n    -o-transition: none;\n    transition: none;\n    }\n\n.leaflet-zoom-anim .leaflet-zoom-hide {\n\tvisibility: hidden;\n\t}\n\n\n/* Popup layout */\n\n.leaflet-popup {\n\tposition: absolute;\n\ttext-align: center;\n\t}\n.leaflet-popup-content-wrapper {\n\tpadding: 1px;\n\ttext-align: left;\n\t}\n.leaflet-popup-content {\n\tmargin: 14px 20px;\n\t}\n.leaflet-popup-tip-container {\n\tmargin: 0 auto;\n\twidth: 40px;\n\theight: 20px;\n\tposition: relative;\n\toverflow: hidden;\n\t}\n.leaflet-popup-tip {\n\twidth: 15px;\n\theight: 15px;\n\tpadding: 1px;\n\n\tmargin: -8px auto 0;\n\n\t-moz-transform: rotate(45deg);\n\t-webkit-transform: rotate(45deg);\n\t-ms-transform: rotate(45deg);\n\t-o-transform: rotate(45deg);\n\ttransform: rotate(45deg);\n\t}\n.leaflet-container a.leaflet-popup-close-button {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tpadding: 4px 5px 0 0;\n\ttext-align: center;\n\twidth: 18px;\n\theight: 14px;\n\tfont: 16px/14px Tahoma, Verdana, sans-serif;\n\tcolor: #c3c3c3;\n\ttext-decoration: none;\n\tfont-weight: bold;\n\t}\n.leaflet-container a.leaflet-popup-close-button:hover {\n\tcolor: #999;\n\t}\n.leaflet-popup-content p {\n\tmargin: 18px 0;\n\t}\n.leaflet-popup-scrolled {\n\toverflow: auto;\n\tborder-bottom: 1px solid #ddd;\n\tborder-top: 1px solid #ddd;\n\t}\n\n\n/* Visual appearance */\n\n.leaflet-container {\n\tbackground: #ddd;\n\t}\n.leaflet-container a {\n\tcolor: #0078A8;\n\t}\n.leaflet-container a.leaflet-active {\n    outline: 2px solid orange;\n    }\n.leaflet-zoom-box {\n\tborder: 2px dotted #05f;\n\tbackground: white;\n\topacity: 0.5;\n\t}\n.leaflet-div-icon {\n    background: #fff;\n    border: 1px solid #666;\n    }\n.leaflet-editing-icon {\n    border-radius: 2px;\n    }\n.leaflet-popup-content-wrapper, .leaflet-popup-tip {\n\tbackground: white;\n\n\tbox-shadow: 0 3px 10px #888;\n\t-moz-box-shadow: 0 3px 10px #888;\n\t-webkit-box-shadow: 0 3px 14px #999;\n\t}\n.leaflet-popup-content-wrapper {\n\t-moz-border-radius: 20px;\n\t-webkit-border-radius: 20px;\n\tborder-radius: 20px;\n\t}\n.leaflet-popup-content {\n\tfont: 12px/1.4 "Helvetica Neue", Arial, Helvetica, sans-serif;\n\t}\n',""])},975:function(t,e){(function(){!function(t,i){var n,o;typeof e!=i+""?n=e:(o=t.L,(n={}).noConflict=function(){return t.L=o,this},t.L=n),n.version="0.4.5",n.Util={extend:function(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=0,o=i.length;n<o;n++)for(var s in e=i[n]||{})e.hasOwnProperty(s)&&(t[s]=e[s]);return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),limitExecByInterval:function(t,e,i){var n,o;return function s(){var a=arguments;n?o=!0:(n=!0,setTimeout((function(){n=!1,o&&(s.apply(i,a),o=!1)}),e),t.apply(i,a))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},splitWords:function(t){return t.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(t,e){return t.options=n.Util.extend({},t.options,e),t.options},getParamString:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,(function(t,i){var n=e[i];if(!e.hasOwnProperty(i))throw Error("No value provided for variable "+t);return n}))},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=t[o[i]+e];return n}function i(e){return t.setTimeout(e,1e3/60)}var o=t.requestAnimationFrame||e("RequestAnimationFrame")||i,s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};n.Util.requestAnimFrame=function(e,s,a,r){if(e=n.Util.bind(e,s),!a||o!==i)return o.call(t,e,r);e()},n.Util.cancelAnimFrame=function(e){e&&s.call(t,e)}}(),n.Class=function(){},n.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var o=new i;for(var s in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);return t.statics&&(n.Util.extend(e,t.statics),delete t.statics),t.includes&&(n.Util.extend.apply(null,[o].concat(t.includes)),delete t.includes),t.options&&o.options&&(t.options=n.Util.extend({},o.options,t.options)),n.Util.extend(o,t),e},n.Class.include=function(t){n.Util.extend(this.prototype,t)},n.Class.mergeOptions=function(t){n.Util.extend(this.prototype.options,t)};var s="_leaflet_events";n.Mixin={},n.Mixin.Events={addEventListener:function(t,e,i){var o,a,r,l=this[s]=this[s]||{};if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&this.addEventListener(o,t[o],e);return this}for(a=0,r=(t=n.Util.splitWords(t)).length;a<r;a++)l[t[a]]=l[t[a]]||[],l[t[a]].push({action:e,context:i||this});return this},hasEventListeners:function(t){return s in this&&t in this[s]&&this[s][t].length>0},removeEventListener:function(t,e,i){var o,a,r,l,h,u=this[s];if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&this.removeEventListener(o,t[o],e);return this}for(a=0,r=(t=n.Util.splitWords(t)).length;a<r;a++)if(this.hasEventListeners(t[a]))for(h=(l=u[t[a]]).length-1;h>=0;h--)(!e||l[h].action===e)&&(!i||l[h].context===i)&&l.splice(h,1);return this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=n.Util.extend({type:t,target:this},e),o=this[s][t].slice(),a=0,r=o.length;a<r;a++)o[a].action.call(o[a].context||this,i);return this}},n.Mixin.Events.on=n.Mixin.Events.addEventListener,n.Mixin.Events.off=n.Mixin.Events.removeEventListener,n.Mixin.Events.fire=n.Mixin.Events.fireEvent,function(){var e=navigator.userAgent.toLowerCase(),o=!!t.ActiveXObject,s=o&&!t.XMLHttpRequest,a=-1!==e.indexOf("webkit"),r=-1!==e.indexOf("gecko"),l=-1!==e.indexOf("chrome"),h=t.opera,u=-1!==e.indexOf("android"),c=-1!==e.search("android [23]"),p=typeof orientation!=i+"",d=document.documentElement,m=o&&"transition"in d.style,f=a&&"WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,_=r&&"MozPerspective"in d.style,g=h&&"OTransition"in d.style,v=!t.L_NO_TOUCH&&function(){var t="ontouchstart";if(t in d)return!0;var e=document.createElement("div"),i=!1;return!!e.setAttribute&&(e.setAttribute(t,"return;"),"function"==typeof e[t]&&(i=!0),e.removeAttribute(t),e=null,i)}(),y="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)").matches;n.Browser={ua:e,ie:o,ie6:s,webkit:a,gecko:r,opera:h,android:u,android23:c,chrome:l,ie3d:m,webkit3d:f,gecko3d:_,opera3d:g,any3d:!t.L_DISABLE_3D&&(m||f||_||g),mobile:p,mobileWebkit:p&&a,mobileWebkit3d:p&&f,mobileOpera:p&&h,touch:v,retina:y}}(),n.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},n.Point.prototype={add:function(t){return this.clone()._add(n.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(n.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t,e){return new n.Point(this.x/t,this.y/t,e)},multiplyBy:function(t,e){return new n.Point(this.x*t,this.y*t,e)},distanceTo:function(t){var e=(t=n.point(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},clone:function(){return new n.Point(this.x,this.y)},toString:function(){return"Point("+n.Util.formatNum(this.x)+", "+n.Util.formatNum(this.y)+")"}},n.point=function(t,e,i){return t instanceof n.Point?t:t instanceof Array?new n.Point(t[0],t[1]):isNaN(t)?t:new n.Point(t,e,i)},n.Bounds=n.Class.extend({initialize:function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},extend:function(t){return t=n.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new n.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new n.Point(this.min.x,this.max.y)},getTopRight:function(){return new n.Point(this.max.x,this.min.y)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof n.Point?n.point(t):n.bounds(t))instanceof n.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=n.bounds(t);var e=this.min,i=this.max,o=t.min,s=t.max,a=s.x>=e.x&&o.x<=i.x,r=s.y>=e.y&&o.y<=i.y;return a&&r}}),n.bounds=function(t,e){return!t||t instanceof n.Bounds?t:new n.Bounds(t,e)},n.Transformation=n.Class.extend({initialize:function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new n.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}}),n.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),!i||"auto"===i){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i},getViewportOffset:function(t){var e=0,i=0,o=t,s=document.body;do{if(e+=o.offsetTop||0,i+=o.offsetLeft||0,o.offsetParent===s&&"absolute"===n.DomUtil.getStyle(o,"position"))break;if("fixed"===n.DomUtil.getStyle(o,"position")){e+=s.scrollTop||0,i+=s.scrollLeft||0;break}o=o.offsetParent}while(o);o=t;do{if(o===s)break;e-=o.scrollTop||0,i-=o.scrollLeft||0,o=o.parentNode}while(o);return new n.Point(i,e)},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=n.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(t,e){return t.className.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){n.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){t.className=t.className.replace(/(\S+)\s*/g,(function(t,i){return i===e?"":t})).replace(/(^\s+|\s+$)/,"")},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if(n.Browser.ie){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(o)}catch(t){}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){var e=n.Browser.webkit3d,i=(e?",0":"")+")";return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){return n.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+(" scale("+t+") ")},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&n.Browser.any3d?(t.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(e),n.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},n.Util.extend(n.DomUtil,{TRANSITION:n.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:n.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])}),n.LatLng=function(t,e,i){var n=parseFloat(t),o=parseFloat(e);if(isNaN(n)||isNaN(o))throw Error("Invalid LatLng object: ("+t+", "+e+")");!0!==i&&(n=Math.max(Math.min(n,90),-90),o=(o+180)%360+(o<-180||180===o?180:-180)),this.lat=n,this.lng=o},n.Util.extend(n.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),n.LatLng.prototype={equals:function(t){return!!t&&(t=n.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=n.LatLng.MAX_MARGIN)},toString:function(){return"LatLng("+n.Util.formatNum(this.lat)+", "+n.Util.formatNum(this.lng)+")"},distanceTo:function(t){t=n.latLng(t);var e=n.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*e,o=(t.lng-this.lng)*e,s=this.lat*e,a=t.lat*e,r=Math.sin(i/2),l=Math.sin(o/2),h=r*r+l*l*Math.cos(s)*Math.cos(a);return 12756274*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}},n.latLng=function(t,e,i){return t instanceof n.LatLng?t:t instanceof Array?new n.LatLng(t[0],t[1]):isNaN(t)?t:new n.LatLng(t,e,i)},n.LatLngBounds=n.Class.extend({initialize:function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},extend:function(t){return(t="number"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t))instanceof n.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new n.LatLng(t.lat,t.lng,!0),this._northEast=new n.LatLng(t.lat,t.lng,!0)):t instanceof n.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new n.LatLngBounds(new n.LatLng(e.lat-o,e.lng-s),new n.LatLng(i.lat+o,i.lng+s))},getCenter:function(){return new n.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new n.LatLng(this._northEast.lat,this._southWest.lng,!0)},getSouthEast:function(){return new n.LatLng(this._southWest.lat,this._northEast.lng,!0)},contains:function(t){t="number"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t);var e,i,o=this._southWest,s=this._northEast;return t instanceof n.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=o.lat&&i.lat<=s.lat&&e.lng>=o.lng&&i.lng<=s.lng},intersects:function(t){t=n.latLngBounds(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),s=t.getNorthEast(),a=s.lat>=e.lat&&o.lat<=i.lat,r=s.lng>=e.lng&&o.lng<=i.lng;return a&&r},toBBoxString:function(){var t=this._southWest,e=this._northEast;return[t.lng,t.lat,e.lng,e.lat].join(",")},equals:function(t){return!!t&&(t=n.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))}}),n.latLngBounds=function(t,e){return!t||t instanceof n.LatLngBounds?t:new n.LatLngBounds(t,e)},n.Projection={},n.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,a=o*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new n.Point(s,a)},unproject:function(t){var e=n.LatLng.RAD_TO_DEG,i=t.x*e,o=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new n.LatLng(o,i,!0)}},n.Projection.LonLat={project:function(t){return new n.Point(t.lng,t.lat)},unproject:function(t){return new n.LatLng(t.y,t.x,!0)}},n.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},n.CRS.EPSG3857=n.Util.extend({},n.CRS,{code:"EPSG:3857",projection:n.Projection.SphericalMercator,transformation:new n.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.projection.project(t).multiplyBy(6378137)}}),n.CRS.EPSG900913=n.Util.extend({},n.CRS.EPSG3857,{code:"EPSG:900913"}),n.CRS.EPSG4326=n.Util.extend({},n.CRS,{code:"EPSG:4326",projection:n.Projection.LonLat,transformation:new n.Transformation(1/360,.5,-1/360,.5)}),n.Map=n.Class.extend({includes:n.Mixin.Events,options:{crs:n.CRS.EPSG3857,fadeAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23,trackResize:!0,markerZoomAnimation:n.DomUtil.TRANSITION&&n.Browser.any3d},initialize:function(t,e){e=n.Util.setOptions(this,e),this._initContainer(t),this._initLayout(),this._initHooks(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(n.latLng(e.center),e.zoom,!0),this._initLayers(e.layers)},setView:function(t,e){return this._resetView(n.latLng(t),this._limitZoom(e)),this},setZoom:function(t){return this.setView(this.getCenter(),t)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(t){var e=this.getBoundsZoom(t);return this.setView(n.latLngBounds(t).getCenter(),e)},fitWorld:function(){var t=new n.LatLng(-60,-170),e=new n.LatLng(85,179);return this.fitBounds(new n.LatLngBounds(t,e))},panTo:function(t){return this.setView(t,this._zoom)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(n.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(t=n.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(this._zoom<e?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this},panInsideBounds:function(t){t=n.latLngBounds(t);var e=this.getBounds(),i=this.project(e.getSouthWest()),o=this.project(e.getNorthEast()),s=this.project(t.getSouthWest()),a=this.project(t.getNorthEast()),r=0,l=0;return o.y<a.y&&(l=a.y-o.y),o.x>a.x&&(r=a.x-o.x),i.y>s.y&&(l=s.y-i.y),i.x<s.x&&(r=s.x-i.x),this.panBy(new n.Point(r,l,!0))},addLayer:function(t){var e=n.Util.stamp(t);if(this._layers[e])return this;this._layers[e]=t,t.options&&!isNaN(t.options.maxZoom)&&(this._layersMaxZoom=Math.max(this._layersMaxZoom||0,t.options.maxZoom)),t.options&&!isNaN(t.options.minZoom)&&(this._layersMinZoom=Math.min(this._layersMinZoom||1/0,t.options.minZoom)),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this));var i=function(){t.onAdd(this),this.fire("layeradd",{layer:t})};return this._loaded?i.call(this):this.on("load",i,this),this},removeLayer:function(t){var e=n.Util.stamp(t);if(this._layers[e])return t.onRemove(this),delete this._layers[e],this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:t})},hasLayer:function(t){var e=n.Util.stamp(t);return this._layers.hasOwnProperty(e)},invalidateSize:function(t){var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=e.subtract(this.getSize()).divideBy(2,!0);return!0===t?this.panBy(i):(this._rawPanBy(i),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n.Util.bind(this.fire,this,"moveend"),200)),this},addHandler:function(t,e){if(e)return this[t]=new e(this),this.options[t]&&this[t].enable(),this},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new n.LatLngBounds(e,i)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===i?1/0:this.options.maxZoom,e=this._layersMaxZoom===i?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(t,e){t=n.latLngBounds(t);var i,o,s,a=this.getSize(),r=this.options.minZoom||0,l=this.getMaxZoom(),h=t.getNorthEast(),u=t.getSouthWest(),c=!0;e&&r--;do{r++,o=this.project(h,r),s=this.project(u,r),i=new n.Point(Math.abs(o.x-s.x),Math.abs(s.y-o.y)),c=e?i.x<a.x||i.y<a.y:i.x<=a.x&&i.y<=a.y}while(c&&r<=l);return c&&e?null:e?r:r-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new n.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size},getPixelBounds:function(){var t=this._getTopLeftPoint();return new n.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(n.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(n.point(t),e)},layerPointToLatLng:function(t){var e=n.point(t).add(this._initialTopLeftPoint);return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(n.latLng(t))._round()._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(t){return n.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return n.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(n.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(n.latLng(t)))},mouseEventToContainerPoint:function(t){return n.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=n.DomUtil.get(t);if(e._leaflet)throw Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;t.innerHTML="",n.DomUtil.addClass(t,"leaflet-container"),n.Browser.touch&&n.DomUtil.addClass(t,"leaflet-touch"),this.options.fadeAnimation&&n.DomUtil.addClass(t,"leaflet-fade-anim");var e=n.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),this._objectsPane=t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(n.DomUtil.addClass(t.markerPane,e),n.DomUtil.addClass(t.shadowPane,e),n.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return n.DomUtil.create("div",t,e||this._objectsPane)},_initializers:[],_initHooks:function(){var t,e;for(t=0,e=this._initializers.length;t<e;t++)this._initializers[t].call(this)},_initLayers:function(t){var e,i;for(t=t?t instanceof Array?t:[t]:[],this._layers={},this._tileLayersNum=0,e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_resetView:function(t,e,i,o){var s=this._zoom!==e;o||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):n.DomUtil.setPosition(this._mapPane,new n.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum,this.fire("viewreset",{hard:!i}),this.fire("move"),(s||o)&&this.fire("zoomend"),this.fire("moveend",{hard:!i}),this._loaded||(this._loaded=!0,this.fire("load"))},_rawPanBy:function(t){n.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_initEvents:function(){if(n.DomEvent){n.DomEvent.on(this._container,"click",this._onMouseClick,this);var e,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,i=o.length;e<i;e++)n.DomEvent.on(this._container,o[e],this._fireMouseEvent,this);this.options.trackResize&&n.DomEvent.on(t,"resize",this._onResize,this)}},_onResize:function(){n.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=n.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&n.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),o=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(o);this.fire(e,{latlng:s,layerPoint:o,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(n.Util.bind(this._clearTileBg,this),500))},_getMapPanePos:function(){return n.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize().divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize().divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),n.Map.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initializers.push(i)},n.map=function(t,e){return new n.Map(t,e)},n.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*s,l=o*e,h=a/s,u=Math.sqrt(1-h*h),c=u*Math.sin(l);c=Math.pow((1-c)/(1+c),.5*u);var p=Math.tan(.5*(.5*Math.PI-l))/c;return l=-a*Math.log(p),new n.Point(r,l)},unproject:function(t){for(var e,i=n.LatLng.RAD_TO_DEG,o=this.R_MAJOR,s=this.R_MINOR,a=t.x*i/o,r=s/o,l=Math.sqrt(1-r*r),h=Math.exp(-t.y/s),u=Math.PI/2-2*Math.atan(h),c=15,p=.1;Math.abs(p)>1e-7&&--c>0;)e=l*Math.sin(u),u+=p=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-u;return new n.LatLng(u*i,a,!0)}},n.CRS.EPSG3395=n.Util.extend({},n.CRS,{code:"EPSG:3395",projection:n.Projection.Mercator,transformation:function(){var t=n.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new n.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*i),.5)}()}),n.TileLayer=n.Class.extend({includes:n.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:n.Browser.mobile,updateWhenIdle:n.Browser.mobile},initialize:function(t,e){(e=n.Util.setOptions(this,e)).detectRetina&&n.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._initContainer(),this._createTileProto(),t.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=n.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._panes.tilePane.removeChild(this._container),t.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){for(var i,n=t.getElementsByClassName("leaflet-layer"),o=-e(1/0,-1/0),s=0,a=n.length;s<a;s++)n[s]!==this._container&&(i=parseInt(n[s].style.zIndex,10),isNaN(i)||(o=e(o,i)));this._container.style.zIndex=isFinite(o)?o+e(1,-1):""},_updateOpacity:function(){n.DomUtil.setOpacity(this._container,this.options.opacity);var t,e=this._tiles;if(n.Browser.webkit)for(t in e)e.hasOwnProperty(t)&&(e[t].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var t=this._map._panes.tilePane;this._container&&!t.empty||(this._container=n.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity())},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){var e,i=this._tiles;for(e in i)i.hasOwnProperty(e)&&this.fire("tileunload",{tile:i[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),t&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(t){if(!this._map._panTransition||!this._map._panTransition._inProgress){var e=this._map.getPixelBounds(),i=this._map.getZoom(),o=this.options.tileSize;if(!(i>this.options.maxZoom||i<this.options.minZoom)){var s=new n.Point(Math.floor(e.min.x/o),Math.floor(e.min.y/o)),a=new n.Point(Math.floor(e.max.x/o),Math.floor(e.max.y/o)),r=new n.Bounds(s,a);this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(t){var e,i,o,s=[],a=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(i=t.min.x;i<=t.max.x;i++)o=new n.Point(i,e),this._tileShouldBeLoaded(o)&&s.push(o);var r=s.length;if(0!==r){s.sort((function(t,e){return t.distanceTo(a)-e.distanceTo(a)}));var l=document.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=r,i=0;i<r;i++)this._addTile(s[i],l);this._container.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;if(!this.options.continuousWorld){var e=this._getWrapTileNum();if(this.options.noWrap&&(t.x<0||t.x>=e)||t.y<0||t.y>=e)return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)this._tiles.hasOwnProperty(o)&&(e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o))},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(n.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._container&&this._container.removeChild(e),n.Browser.android||(e.src=n.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),o=this._getTile();n.DomUtil.setPosition(o,i,n.Browser.chrome||n.Browser.android23),this._tiles[t.x+":"+t.y]=o,this._loadTile(o,t),o.parentNode!==this._container&&e.appendChild(o)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return this._adjustTilePoint(t),n.Util.template(this._url,n.Util.extend({s:this._getSubdomain(t),z:this._getZoomForUrl(),x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();!this.options.continuousWorld&&!this.options.noWrap&&(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1)},_getSubdomain:function(t){var e=(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=n.DomUtil.create("img","leaflet-tile");t.galleryimg="no";var e=this.options.tileSize;t.style.width=e+"px",t.style.height=e+"px"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(t){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(t){var e=this._layer;this.src!==n.Util.emptyImageUrl&&(n.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(t){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var i=e.options.errorTileUrl;i&&(this.src=i),e._tileLoaded()}}),n.tileLayer=function(t,e){return new n.TileLayer(t,e)},n.TileLayer.WMS=n.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=n.Util.extend({},this.defaultWmsParams);for(var o in e.detectRetina&&n.Browser.retina?i.width=i.height=2*this.options.tileSize:i.width=i.height=this.options.tileSize,e)this.options.hasOwnProperty(o)||(i[o]=e[o]);this.wmsParams=i,n.Util.setOptions(this,e)},onAdd:function(t){var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=t.options.crs.code,n.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){var i=this._map,o=i.options.crs,s=this.options.tileSize,a=t.multiplyBy(s),r=a.add(new n.Point(s,s)),l=o.project(i.unproject(a,e)),h=o.project(i.unproject(r,e)),u=[l.x,h.y,h.x,l.y].join(",");return n.Util.template(this._url,{s:this._getSubdomain(t)})+n.Util.getParamString(this.wmsParams)+"&bbox="+u},setParams:function(t,e){return n.Util.extend(this.wmsParams,t),e||this.redraw(),this}}),n.tileLayer.wms=function(t,e){return new n.TileLayer.WMS(t,e)},n.TileLayer.Canvas=n.TileLayer.extend({options:{async:!1},initialize:function(t){n.Util.setOptions(this,t)},redraw:function(){var t,e=this._tiles;for(t in e)e.hasOwnProperty(t)&&this._redrawTile(e[t])},_redrawTile:function(t){this.drawTile(t,t._tilePoint,t._zoom)},_createTileProto:function(){var t=this._canvasProto=n.DomUtil.create("canvas","leaflet-tile"),e=this.options.tileSize;t.width=e,t.height=e},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e,i){t._layer=this,t._tilePoint=e,t._zoom=i,this.drawTile(t,e,i),this.options.async||this.tileDrawn(t)},drawTile:function(t,e,i){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),n.tileLayer.canvas=function(t){return new n.TileLayer.Canvas(t)},n.ImageOverlay=n.Class.extend({includes:n.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=n.latLngBounds(e),n.Util.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&n.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=n.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&n.Browser.any3d?n.DomUtil.addClass(this._image,"leaflet-zoom-animated"):n.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),n.Util.extend(this._image,{galleryimg:"no",onselectstart:n.Util.falseFn,onmousemove:n.Util.falseFn,onload:n.Util.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,o=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(s,t.zoom,t.center),l=e._latLngToNewLayerPoint(a,t.zoom,t.center).subtract(r),h=e.latLngToLayerPoint(a).subtract(e.latLngToLayerPoint(s)),u=r.add(l.subtract(h).divideBy(2));i.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(u)+" scale("+o+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast()).subtract(e);n.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){n.DomUtil.setOpacity(this._image,this.options.opacity)}}),n.imageOverlay=function(t,e,i){return new n.ImageOverlay(t,e,i)},n.Icon=n.Class.extend({options:{className:""},initialize:function(t){n.Util.setOptions(this,t)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(t){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(e);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var i,o=this.options,s=n.point(o[e+"Size"]);!(i="shadow"===e?n.point(o.shadowAnchor||o.iconAnchor):n.point(o.iconAnchor))&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+o.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t){var e;return n.Browser.ie6?(e=document.createElement("div")).style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")':(e=document.createElement("img")).src=t,e},_getIconUrl:function(t){return this.options[t+"Url"]}}),n.icon=function(t){return new n.Icon(t)},n.Icon.Default=n.Icon.extend({options:{iconSize:new n.Point(25,41),iconAnchor:new n.Point(13,41),popupAnchor:new n.Point(1,-34),shadowSize:new n.Point(41,41)},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];var i=n.Icon.Default.imagePath;if(!i)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),n.Icon.Default.imagePath=function(){var t,e,i,n=document.getElementsByTagName("script"),o=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=n.length;t<e;t++)if((i=n[t].src).match(o))return i.split(o)[0]+"/images"}(),n.Marker=n.Class.extend({includes:n.Mixin.Events,options:{icon:new n.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1},initialize:function(t,e){n.Util.setOptions(this,e),this._latlng=n.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._removeIcon(),this.closePopup&&this.closePopup(),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=n.latLng(t),this.update(),this._popup&&this._popup.setLatLng(t)},setZIndexOffset:function(t){this.options.zIndexOffset=t,this.update()},setIcon:function(t){this._map&&this._removeIcon(),this.options.icon=t,this._map&&(this._initIcon(),this.update())},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",o=!1;this._icon||(this._icon=t.icon.createIcon(),t.title&&(this._icon.title=t.title),this._initInteraction(),o=this.options.opacity<1,n.DomUtil.addClass(this._icon,i)),this._shadow||(this._shadow=t.icon.createShadow(),this._shadow&&(n.DomUtil.addClass(this._shadow,i),o=this.options.opacity<1)),o&&this._updateOpacity();var s=this._map._panes;s.markerPane.appendChild(this._icon),this._shadow&&s.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var t=this._map._panes;t.markerPane.removeChild(this._icon),this._shadow&&t.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(t){n.DomUtil.setPosition(this._icon,t),this._shadow&&n.DomUtil.setPosition(this._shadow,t),this._icon.style.zIndex=t.y+this.options.zIndexOffset},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout"];n.DomUtil.addClass(t,"leaflet-clickable"),n.DomEvent.on(t,"click",this._onMouseClick,this);for(var i=0;i<e.length;i++)n.DomEvent.on(t,e[i],this._fireMouseEvent,this);n.Handler.MarkerDrag&&(this.dragging=new n.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){n.DomEvent.stopPropagation(t),this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"mousedown"!==t.type&&n.DomEvent.stopPropagation(t)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){n.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&n.DomUtil.setOpacity(this._shadow,this.options.opacity)}}),n.marker=function(t,e){return new n.Marker(t,e)},n.DivIcon=n.Icon.extend({options:{iconSize:new n.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var t=document.createElement("div"),e=this.options;return e.html&&(t.innerHTML=e.html),e.bgPos&&(t.style.backgroundPosition=-e.bgPos.x+"px "+-e.bgPos.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),n.divIcon=function(t){return new n.DivIcon(t)},n.Map.mergeOptions({closePopupOnClick:!0}),n.Popup=n.Class.extend({includes:n.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new n.Point(0,6),autoPanPadding:new n.Point(5,5),className:""},initialize:function(t,e){n.Util.setOptions(this,t),this._source=e},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&n.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),n.Browser.any3d&&t.on("zoomanim",this._zoomAnimation,this),t.options.closePopupOnClick&&t.on("preclick",this._close,this),this._update(),e&&n.DomUtil.setOpacity(this._container,1)},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),n.Util.falseFn(this._container.offsetWidth),t.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),t.options.fadeAnimation&&n.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(t){return this._latlng=n.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_close:function(){var t=this._map;t&&(t._popup=null,t.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var t,e="leaflet-popup",i=this._container=n.DomUtil.create("div",e+" "+this.options.className+" leaflet-zoom-animated");this.options.closeButton&&((t=this._closeButton=n.DomUtil.create("a",e+"-close-button",i)).href="#close",t.innerHTML="&#215;",n.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=n.DomUtil.create("div",e+"-content-wrapper",i);n.DomEvent.disableClickPropagation(o),this._contentNode=n.DomUtil.create("div",e+"-content",o),n.DomEvent.on(this._contentNode,"mousewheel",n.DomEvent.stopPropagation),this._tipContainer=n.DomUtil.create("div",e+"-tip-container",i),this._tip=n.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,s=this.options.maxHeight,a="leaflet-popup-scrolled";s&&o>s?(e.height=s+"px",n.DomUtil.addClass(t,a)):n.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng),e=n.Browser.any3d,i=this.options.offset;e&&n.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);n.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,o=new n.Point(this._containerLeft,-e-this._containerBottom);n.Browser.any3d&&o._add(n.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(o),a=this.options.autoPanPadding,r=t.getSize(),l=0,h=0;s.x<0&&(l=s.x-a.x),s.x+i>r.x&&(l=s.x+i-r.x+a.x),s.y<0&&(h=s.y-a.y),s.y+e>r.y&&(h=s.y+e-r.y+a.y),(l||h)&&t.panBy(new n.Point(l,h))}},_onCloseButtonClick:function(t){this._close(),n.DomEvent.stop(t)}}),n.popup=function(t,e){return new n.Popup(t,e)},n.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(t,e){var i=n.point(this.options.icon.options.popupAnchor)||new n.Point(0,0);return i=i.add(n.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=n.Util.extend({offset:i},e),this._popup||this.on("click",this.openPopup,this),this._popup=new n.Popup(e,this).setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup)),this}}),n.Map.include({openPopup:function(t){return this.closePopup(),this._popup=t,this.addLayer(t).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),n.LayerGroup=n.Class.extend({initialize:function(t){var e,i;if(this._layers={},t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=n.Util.stamp(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=n.Util.stamp(t);return delete this._layers[e],this._map&&this._map.removeLayer(t),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)this._layers.hasOwnProperty(e)&&((i=this._layers[e])[t]&&i[t].apply(i,n));return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)this._layers.hasOwnProperty(i)&&t.call(e,this._layers[i])}}),n.layerGroup=function(t){return new n.LayerGroup(t)},n.FeatureGroup=n.LayerGroup.extend({includes:n.Mixin.Events,addLayer:function(t){return this._layers[n.Util.stamp(t)]||(t.on("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this),n.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent)),this},removeLayer:function(t){return t.off("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this),n.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent?this.invoke("unbindPopup"):this},bindPopup:function(t){return this._popupContent=t,this.invoke("bindPopup",t)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new n.LatLngBounds;return this.eachLayer((function(e){t.extend(e instanceof n.Marker?e.getLatLng():e.getBounds())}),this),t},_propagateEvent:function(t){t.layer=t.target,t.target=this,this.fire(t.type,t)}}),n.featureGroup=function(t){return new n.FeatureGroup(t)},n.Path=n.Class.extend({includes:[n.Mixin.Events],statics:{CLIP_PADDING:n.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(t.innerWidth,t.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){n.Util.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this._map=null,n.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return n.Util.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),n.Map.include({_updatePathViewport:function(){var t=n.Path.CLIP_PADDING,e=this.getSize(),i=n.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)),o=i.add(e.multiplyBy(1+2*t));this._pathViewport=new n.Bounds(i,o)}}),n.Path.SVG_NS="http://www.w3.org/2000/svg",n.Browser.svg=!!document.createElementNS&&!!document.createElementNS(n.Path.SVG_NS,"svg").createSVGRect,n.Path=n.Path.extend({statics:{SVG:n.Browser.svg},bringToFront:function(){return this._container&&this._map._pathRoot.appendChild(this._container),this},bringToBack:function(){if(this._container){var t=this._map._pathRoot;t.insertBefore(this._container,t.firstChild)}return this},getPathString:function(){},_createElement:function(t){return document.createElementNS(n.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(n.Browser.svg||!n.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),n.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)n.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||(this._fireMouseEvent(t),n.DomEvent.stopPropagation(t))},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){"contextmenu"===t.type&&n.DomEvent.preventDefault(t);var e=this._map,i=e.mouseEventToContainerPoint(t),o=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(o);this.fire(t.type,{latlng:s,layerPoint:o,containerPoint:i,originalEvent:t})}}}),n.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=n.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&n.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center).divideBy(1-1/e),o=this.containerPointToLayerPoint(this.getSize().multiplyBy(-n.Path.CLIP_PADDING)).add(i).round();this._pathRoot.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(o.multiplyBy(-1).add(n.DomUtil.getPosition(this._pathRoot)).multiplyBy(e).add(o))+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,o=i.x-e.x,s=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;n.Browser.mobileWebkit&&r.removeChild(a),n.DomUtil.setPosition(a,e),a.setAttribute("width",o),a.setAttribute("height",s),a.setAttribute("viewBox",[e.x,e.y,o,s].join(" ")),n.Browser.mobileWebkit&&r.appendChild(a)}}}),n.Path.include({bindPopup:function(t,e){return this._popup&&this._popup.options===e||(this._popup=new n.Popup(e,this)),this._popup.setContent(t),this._openPopupAdded||(this.on("click",this._openPopup,this),this._openPopupAdded=!0),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),n.Browser.vml=function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),n.Path=n.Browser.svg||!n.Browser.vml?n.Path:n.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");n.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&n.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||((t=this._stroke=this._createElement("stroke")).endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=i.dashArray.replace(/ *, */g," "):t.dashStyle=""):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),n.Map.include(n.Browser.svg||!n.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=document.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),n.Browser.canvas=!!document.createElement("canvas").getContext,n.Path=n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?n.Path:n.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return n.Util.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&(n.Util.cancelAnimFrame(this._fireMapMoveEnd),this._updateRequest=n.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,o,s,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;t<i;t++){for(e=0,o=this._parts[t].length;e<o;e++)s=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](s.x,s.y);this instanceof n.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(e.fillOpacity<1&&(t.globalAlpha=e.fillOpacity),t.fill()),e.stroke&&(e.opacity<1&&(t.globalAlpha=e.opacity),t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)}}),n.Map.include(n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||((e=this._pathRoot=document.createElement("canvas")).style.position="absolute",(t=this._canvasCtx=e.getContext("2d")).lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),o=this._pathRoot;n.DomUtil.setPosition(o,e),o.width=i.x,o.height=i.y,o.getContext("2d").translate(-e.x,-e.y)}}}),n.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=new(typeof Uint8Array!=i+""?Uint8Array:Array)(n);o[0]=o[n-1]=1,this._simplifyDPStep(t,o,e,0,n-1);var s,a=[];for(s=0;s<n;s++)o[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,l=0;for(a=n+1;a<=o-1;a++)(r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0))>l&&(s=a,l=r);l>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){i.min,i.max;var o=n?this._lastCode:this._getBitCode(t,i),s=this._getBitCode(e,i);for(this._lastCode=s;;){if(!(o|s))return[t,e];if(o&s)return!1;var a=o||s,r=this._getEdgeIntersection(t,e,a,i),l=this._getBitCode(r,i);a===o?(t=r,o=l):(e=r,s=l)}},_getEdgeIntersection:function(t,e,i,o){var s=e.x-t.x,a=e.y-t.y,r=o.min,l=o.max;return 8&i?new n.Point(t.x+s*(l.y-t.y)/a,l.y):4&i?new n.Point(t.x+s*(r.y-t.y)/a,r.y):2&i?new n.Point(l.x,t.y+a*(l.x-t.x)/s):1&i?new n.Point(r.x,t.y+a*(r.x-t.x)/s):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,o){var s,a=e.x,r=e.y,l=i.x-a,h=i.y-r,u=l*l+h*h;return u>0&&((s=((t.x-a)*l+(t.y-r)*h)/u)>1?(a=i.x,r=i.y):s>0&&(a+=l*s,r+=h*s)),l=t.x-a,h=t.y-r,o?l*l+h*h:new n.Point(a,r)}},n.Polyline=n.Path.extend({initialize:function(t,e){n.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t),n.Handler.PolyEdit&&(this.editing=new n.Handler.PolyEdit(this),this.options.editable&&this.editing.enable())},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";t<e;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(n.latLng(t)),this.redraw()},spliceLatLngs:function(t,e){var i=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),i},closestLayerPoint:function(t){for(var e,i,o=1/0,s=this._parts,a=null,r=0,l=s.length;r<l;r++)for(var h=s[r],u=1,c=h.length;u<c;u++){e=h[u-1],i=h[u];var p=n.LineUtil._sqClosestPointOnSegment(t,e,i,!0);p<o&&(o=p,a=n.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(o)),a},getBounds:function(){for(var t=new n.LatLngBounds,e=this.getLatLngs(),i=0,o=e.length;i<o;i++)t.extend(e[i]);return t},onAdd:function(t){n.Path.prototype.onAdd.call(this,t),this.editing&&this.editing.enabled()&&this.editing.addHooks()},onRemove:function(t){this.editing&&this.editing.enabled()&&this.editing.removeHooks(),n.Path.prototype.onRemove.call(this,t)},_convertLatLngs:function(t){var e,i;for(e=0,i=t.length;e<i;e++){if(t[e]instanceof Array&&"number"!=typeof t[e][0])return;t[e]=n.latLng(t[e])}return t},_initEvents:function(){n.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=n.Path.VML,o=0,s=t.length,a="";o<s;o++)e=t[o],i&&e._round(),a+=(o?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,i,o=this._originalPoints,s=o.length;if(this.options.noClip)this._parts=[o];else{this._parts=[];var a=this._parts,r=this._map._pathViewport,l=n.LineUtil;for(t=0,e=0;t<s-1;t++)(i=l.clipSegment(o[t],o[t+1],r,t))&&(a[e]=a[e]||[],a[e].push(i[0]),i[1]===o[t+1]&&t!==s-2||(a[e].push(i[1]),e++))}},_simplifyPoints:function(){for(var t=this._parts,e=n.LineUtil,i=0,o=t.length;i<o;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),n.Path.prototype._updatePath.call(this))}}),n.polyline=function(t,e){return new n.Polyline(t,e)},n.PolyUtil={},n.PolyUtil.clipPolygon=function(t,e){e.min,e.max;var i,o,s,a,r,l,h,u,c,p=[1,4,2,8],d=n.LineUtil;for(o=0,h=t.length;o<h;o++)t[o]._code=d._getBitCode(t[o],e);for(a=0;a<4;a++){for(u=p[a],i=[],o=0,s=(h=t.length)-1;o<h;s=o++)r=t[o],l=t[s],r._code&u?l._code&u||((c=d._getEdgeIntersection(l,r,u,e))._code=d._getBitCode(c,e),i.push(c)):(l._code&u&&((c=d._getEdgeIntersection(l,r,u,e))._code=d._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},n.Polygon=n.Polyline.extend({options:{fill:!0},initialize:function(t,e){n.Polyline.prototype.initialize.call(this,t,e),t&&t[0]instanceof Array&&"number"!=typeof t[0][0]&&(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1))},projectLatlngs:function(){if(n.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(var t=0,e=this._holes.length;t<e;t++){this._holePoints[t]=[];for(var i=0,o=this._holes[t].length;i<o;i++)this._holePoints[t][i]=this._map.latLngToLayerPoint(this._holes[t][i])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,o=this._parts.length;i<o;i++){var s=n.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){return n.Polyline.prototype._getPathPartStr.call(this,t)+(n.Browser.svg?"z":"x")}}),n.polygon=function(t,e){return new n.Polygon(t,e)},function(){function t(t){return n.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer((function(t){i<n?t.setLatLngs(e[i++]):this.removeLayer(t)}),this);i<n;)this.addLayer(new t(e[i++],this._options));return this}})}n.MultiPolyline=t(n.Polyline),n.MultiPolygon=t(n.Polygon),n.multiPolyline=function(t,e){return new n.MultiPolyline(t,e)},n.multiPolygon=function(t,e){return new n.MultiPolygon(t,e)}}(),n.Rectangle=n.Polygon.extend({initialize:function(t,e){n.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=n.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),n.rectangle=function(t,e){return new n.Rectangle(t,e)},n.Circle=n.Path.extend({initialize:function(t,e,i){n.Path.prototype.initialize.call(this,i),this._latlng=n.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=n.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=new n.LatLng(this._latlng.lat,this._latlng.lng-t,!0),i=this._map.latLngToLayerPoint(e);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-i.x),1)},getBounds:function(){var t=this._map,e=this._radius*Math.cos(Math.PI/4),i=t.project(this._latlng),o=new n.Point(i.x-e,i.y+e),s=new n.Point(i.x+e,i.y-e),a=t.unproject(o),r=t.unproject(s);return new n.LatLngBounds(a,r)},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":n.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLngRadius:function(){var t=40075017*Math.cos(n.LatLng.DEG_TO_RAD*this._latlng.lat);return this._mRadius/t*360},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),n.circle=function(t,e,i){return new n.Circle(t,e,i)},n.CircleMarker=n.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){n.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(t){return this._radius=t,this.redraw()}}),n.circleMarker=function(t,e){return new n.CircleMarker(t,e)},n.Polyline.include(n.Path.CANVAS?{_containsPoint:function(t,e){var i,o,s,a,r,l,h=this.options.weight/2;for(n.Browser.touch&&(h+=10),i=0,a=this._parts.length;i<a;i++)for(o=0,s=(r=(l=this._parts[i]).length)-1;o<r;s=o++)if((e||0!==o)&&n.LineUtil.pointToSegmentDistance(t,l[s],l[o])<=h)return!0;return!1}}:{}),n.Polygon.include(n.Path.CANVAS?{_containsPoint:function(t){var e,i,o,s,a,r,l,h,u=!1;if(n.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,l=this._parts.length;s<l;s++)for(a=0,r=(h=(e=this._parts[s]).length)-1;a<h;r=a++)i=e[a],o=e[r],i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(u=!u);return u}}:{}),n.Circle.include(n.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),n.GeoJSON=n.FeatureGroup.extend({initialize:function(t,e){n.Util.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,o=t instanceof Array?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)this.addData(o[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=n.GeoJSON.geometryToLayer(t,s.pointToLayer);return a.feature=t,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&this._setLayerStyle(t,e)},setStyle:function(t){this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),n.Util.extend(n.GeoJSON,{geometryToLayer:function(t,e){var i,o,s,a,r,l="Feature"===t.type?t.geometry:t,h=l.coordinates,u=[];switch(l.type){case"Point":return i=this.coordsToLatLng(h),e?e(t,i):new n.Marker(i);case"MultiPoint":for(s=0,a=h.length;s<a;s++)i=this.coordsToLatLng(h[s]),r=e?e(t,i):new n.Marker(i),u.push(r);return new n.FeatureGroup(u);case"LineString":return o=this.coordsToLatLngs(h),new n.Polyline(o);case"Polygon":return o=this.coordsToLatLngs(h,1),new n.Polygon(o);case"MultiLineString":return o=this.coordsToLatLngs(h,1),new n.MultiPolyline(o);case"MultiPolygon":return o=this.coordsToLatLngs(h,2),new n.MultiPolygon(o);case"GeometryCollection":for(s=0,a=l.geometries.length;s<a;s++)r=this.geometryToLayer(l.geometries[s],e),u.push(r);return new n.FeatureGroup(u);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t,e){var i=parseFloat(t[e?0:1]),o=parseFloat(t[e?1:0]);return new n.LatLng(i,o,!0)},coordsToLatLngs:function(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;o<s;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):this.coordsToLatLng(t[o],i),a.push(n);return a}}),n.geoJson=function(t,e){return new n.GeoJSON(t,e)},n.DomEvent={addListener:function(t,e,i,o){var s,a,r,l=n.Util.stamp(i),h="_leaflet_"+e+l;return t[h]?this:(s=function(e){return i.call(o||t,e||n.DomEvent._getEvent())},n.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener?this.addDoubleTapListener(t,s,l):("addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",s,!1),t.addEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?(a=s,r="mouseenter"===e?"mouseover":"mouseout",s=function(e){if(n.DomEvent._checkMouse(t,e))return a(e)},t.addEventListener(r,s,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[h]=s,this))},removeListener:function(t,e,i){var o=n.Util.stamp(i),s="_leaflet_"+e+o,a=t[s];if(a)return n.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null,this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){var e=n.DomEvent.stopPropagation;return n.DomEvent.addListener(t,n.Draggable.START,e).addListener(t,"click",e).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return n.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){var i=document.body,o=document.documentElement,s=t.pageX?t.pageX:t.clientX+i.scrollLeft+o.scrollLeft,a=t.pageY?t.pageY:t.clientY+i.scrollTop+o.scrollTop,r=new n.Point(s,a);return e?r._subtract(n.DomUtil.getViewportOffset(e)):r},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(!(e=i.arguments[0])||t.Event!==e.constructor);)i=i.caller;return e}},n.DomEvent.on=n.DomEvent.addListener,n.DomEvent.off=n.DomEvent.removeListener,n.Draggable=n.Class.extend({includes:n.Mixin.Events,statics:{START:n.Browser.touch?"touchstart":"mousedown",END:n.Browser.touch?"touchend":"mouseup",MOVE:n.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){this._enabled||(n.DomEvent.on(this._dragStartTarget,n.Draggable.START,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(n.DomEvent.off(this._dragStartTarget,n.Draggable.START,this._onDown),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(!n.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches))if(this._simulateClick=!0,t.touches&&t.touches.length>1)this._simulateClick=!1;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=e.target;n.DomEvent.preventDefault(t),n.Browser.touch&&"a"===i.tagName.toLowerCase()&&n.DomUtil.addClass(i,"leaflet-active"),this._moved=!1,this._moving||(this._startPos=this._newPos=n.DomUtil.getPosition(this._element),this._startPoint=new n.Point(e.clientX,e.clientY),n.DomEvent.on(document,n.Draggable.MOVE,this._onMove,this),n.DomEvent.on(document,n.Draggable.END,this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new n.Point(e.clientX,e.clientY).subtract(this._startPoint);(i.x||i.y)&&(n.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,n.Browser.touch||(n.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(i),this._moving=!0,n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),n.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){if(this._simulateClick&&t.changedTouches){var e=t.changedTouches[0],i=e.target,o=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===i.tagName.toLowerCase()&&n.DomUtil.removeClass(i,"leaflet-active"),o<n.Draggable.TAP_TOLERANCE&&this._simulateEvent("click",e)}n.Browser.touch||(n.DomUtil.enableTextSelection(),this._restoreCursor()),n.DomEvent.off(document,n.Draggable.MOVE,this._onMove),n.DomEvent.off(document,n.Draggable.END,this._onUp),this._moved&&(n.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1},_setMovingCursor:function(){n.DomUtil.addClass(document.body,"leaflet-dragging")},_restoreCursor:function(){n.DomUtil.removeClass(document.body,"leaflet-dragging")},_simulateEvent:function(e,i){var n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(n)}}),n.Handler=n.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),n.Map.mergeOptions({dragging:!0,inertia:!n.Browser.android23,inertiaDeceleration:3e3,inertiaMaxSpeed:1500,inertiaThreshold:n.Browser.touch?32:14,worldCopyJump:!0}),n.Map.Drag=n.Handler.extend({addHooks:function(){this._draggable||(this._draggable=new n.Draggable(this._map._mapPane,this._map._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._map.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),this._map.on("viewreset",this._onViewReset,this)));this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t.fire("movestart").fire("dragstart"),t._panTransition&&t._panTransition._onTransitionEnd(!0),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint(new n.LatLng(0,0));this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project(new n.LatLng(0,180)).x},_onPreDrag:function(){this._map;var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=a},_onDragEnd:function(){var t=this._map,e=t.options,o=+new Date-this._lastTime;if(!e.inertia||o>e.inertiaThreshold||this._positions[0]===i)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+o-this._times[0])/1e3,r=s.multiplyBy(.58/a),l=r.distanceTo(new n.Point(0,0)),h=Math.min(e.inertiaMaxSpeed,l),u=r.multiplyBy(h/l),c=h/e.inertiaDeceleration,p=u.multiplyBy(-c/2).round(),d={duration:c,easing:"ease-out"};n.Util.requestAnimFrame(n.Util.bind((function(){this._map.panBy(p,d)}),this))}t.fire("dragend"),e.maxBounds&&n.Util.requestAnimFrame(this._panInsideMaxBounds,t,!0,t._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),n.Map.addInitHook("addHandler","dragging",n.Map.Drag),n.Map.mergeOptions({doubleClickZoom:!0}),n.Map.DoubleClickZoom=n.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setView(t.latlng,this._zoom+1)}}),n.Map.addInitHook("addHandler","doubleClickZoom",n.Map.DoubleClickZoom),n.Map.mergeOptions({scrollWheelZoom:!n.Browser.touch}),n.Map.ScrollWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(t){var e=n.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),clearTimeout(this._timer),this._timer=setTimeout(n.Util.bind(this._performZoom,this),40),n.DomEvent.preventDefault(t)},_performZoom:function(){var t=this._map,e=Math.round(this._delta),i=t.getZoom();if(e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,e){var n=i+e,o=this._getCenterForScrollWheelZoom(this._lastMousePos,n);t.setView(o,n)}},_getCenterForScrollWheelZoom:function(t,e){var i=this._map,n=i.getZoomScale(e),o=i.getSize().divideBy(2),s=t.subtract(o).multiplyBy(1-1/n),a=i._getTopLeftPoint().add(o).add(s);return i.unproject(a)}}),n.Map.addInitHook("addHandler","scrollWheelZoom",n.Map.ScrollWheelZoom),n.Util.extend(n.DomEvent,{addDoubleTapListener:function(t,e,i){function n(t){if(1===t.touches.length){var e=Date.now(),i=e-(s||e);a=t.touches[0],r=i>0&&i<=l,s=e}}function o(t){r&&(a.type="dblclick",e(a),s=null)}var s,a,r=!1,l=250,h="_leaflet_",u="touchstart",c="touchend";return t[h+u+i]=n,t[h+c+i]=o,t.addEventListener(u,n,!1),t.addEventListener(c,o,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_";return t.removeEventListener(t,t[i+"touchstart"+e],!1),t.removeEventListener(t,t[i+"touchend"+e],!1),this}}),n.Map.mergeOptions({touchZoom:n.Browser.touch&&!n.Browser.android23}),n.Map.TouchZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]),s=e._getCenterLayerPoint();this._startCenter=i.add(o).divideBy(2,!0),this._startDist=i.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),n.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),n.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length){var e=this._map,i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(o)/this._startDist,this._delta=i.add(o).divideBy(2,!0).subtract(this._startCenter),1!==this._scale&&(this._moved||(n.DomUtil.addClass(e._mapPane,"leaflet-zoom-anim leaflet-touching"),e.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),n.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e);t.fire("zoomanim",{center:i,zoom:t.getScaleZoom(this._scale)}),t._tileBg.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(this._delta)+" "+n.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(t){if(this._moved&&this._zooming){var e=this._map;this._zooming=!1,n.DomUtil.removeClass(e._mapPane,"leaflet-touching"),n.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),o=e.layerPointToLatLng(i),s=e.getZoom(),a=e.getScaleZoom(this._scale)-s,r=a>0?Math.ceil(a):Math.floor(a),l=e._limitZoom(s+r);e.fire("zoomanim",{center:o,zoom:l}),e._runAnimation(o,l,e.getZoomScale(l)/this._scale,i,!0)}},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),n.Map.addInitHook("addHandler","touchZoom",n.Map.TouchZoom),n.Map.mergeOptions({boxZoom:!0}),n.Map.BoxZoom=n.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){n.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;n.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=n.DomUtil.create("div","leaflet-zoom-box",this._pane),n.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",n.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).preventDefault(t),this._map.fire("boxzoomstart")},_onMouseMove:function(t){var e=this._startLayerPoint,i=this._box,o=this._map.mouseEventToLayerPoint(t),s=o.subtract(e),a=new n.Point(Math.min(o.x,e.x),Math.min(o.y,e.y));n.DomUtil.setPosition(i,a),i.style.width=Math.abs(s.x)-4+"px",i.style.height=Math.abs(s.y)-4+"px"},_onMouseUp:function(t){this._pane.removeChild(this._box),this._container.style.cursor="",n.DomUtil.enableTextSelection(),n.DomEvent.off(document,"mousemove",this._onMouseMove).off(document,"mouseup",this._onMouseUp);var e=this._map,i=e.mouseEventToLayerPoint(t),o=new n.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(o),e.fire("boxzoomend",{boxZoomBounds:o})}}),n.Map.addInitHook("addHandler","boxZoom",n.Map.BoxZoom),n.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),n.Map.Keyboard=n.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),n.DomEvent.addListener(t,"focus",this._onFocus,this).addListener(t,"blur",this._onBlur,this).addListener(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;n.DomEvent.removeListener(t,"focus",this._onFocus,this).removeListener(t,"blur",this._onBlur,this).removeListener(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){n.DomEvent.addListener(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){n.DomEvent.removeListener(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode;if(this._panKeys.hasOwnProperty(e))this._map.panBy(this._panKeys[e]);else{if(!this._zoomKeys.hasOwnProperty(e))return;this._map.setZoom(this._map.getZoom()+this._zoomKeys[e])}n.DomEvent.stop(t)}}),n.Map.addInitHook("addHandler","keyboard",n.Map.Keyboard),n.Handler.MarkerDrag=n.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new n.Draggable(t,t).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(t){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=n.DomUtil.getPosition(this._marker._icon);this._marker._shadow&&n.DomUtil.setPosition(this._marker._shadow,e),this._marker._latlng=this._marker._map.layerPointToLatLng(e),this._marker.fire("move").fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),n.Handler.PolyEdit=n.Handler.extend({options:{icon:new n.DivIcon({iconSize:new n.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,n.Util.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new n.LayerGroup),this._markers=[];var t,e,i,o,s,a,r=this._poly._latlngs;for(t=0,i=r.length;t<i;t++)(o=this._createMarker(r[t],t)).on("click",this._onMarkerClick,this),this._markers.push(o);for(t=0,e=i-1;t<i;e=t++)(0!==t||n.Polygon&&this._poly instanceof n.Polygon)&&(s=this._markers[e],a=this._markers[t],this._createMiddleMarker(s,a),this._updatePrevNext(s,a))},_createMarker:function(t,e){var i=new n.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;n.Util.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){if(!(this._poly._latlngs.length<3)){var e=t.target,i=e._index;e._prev&&e._next&&(this._createMiddleMarker(e._prev,e._next),this._updatePrevNext(e._prev,e._next)),this._markerGroup.removeLayer(e),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),this._markers.splice(i,1),this._poly.spliceLatLngs(i,1),this._updateIndexes(i,-1),this._poly.fire("edit")}},_updateIndexes:function(t,e){this._markerGroup.eachLayer((function(i){i._index>t&&(i._index+=e)}))},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),a=this._createMarker(s);a.setOpacity(.6),t._middleRight=e._middleLeft=a,n=function(){var n=e._index;a._index=n,a.off("click",i).on("click",this._onMarkerClick,this),s.lat=a.getLatLng().lat,s.lng=a.getLatLng().lng,this._poly.spliceLatLngs(n,0,s),this._markers.splice(n,0,a),a.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e)},o=function(){a.off("dragstart",n,this),a.off("dragend",o,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},i=function(){n.call(this),o.call(this),this._poly.fire("edit")},a.on("click",i,this).on("dragstart",n,this).on("dragend",o,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t._next=e,e._prev=t},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.latLngToLayerPoint(t.getLatLng()),o=i.latLngToLayerPoint(e.getLatLng());return i.layerPointToLatLng(n._add(o).divideBy(2))}}),n.Control=n.Class.extend({options:{position:"topright"},initialize:function(t){n.Util.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return n.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),n.control=function(t){return new n.Control(t)},n.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var a=i+t+" "+i+s;e[t+s]=n.DomUtil.create("div",a,o)}var e=this._controlCorners={},i="leaflet-",o=this._controlContainer=n.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")}}),n.Control.Zoom=n.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",i=n.DomUtil.create("div",e);return this._createButton("Zoom in",e+"-in",i,t.zoomIn,t),this._createButton("Zoom out",e+"-out",i,t.zoomOut,t),i},_createButton:function(t,e,i,o,s){var a=n.DomUtil.create("a",e,i);return a.href="#",a.title=t,n.DomEvent.on(a,"click",n.DomEvent.stopPropagation).on(a,"click",n.DomEvent.preventDefault).on(a,"click",o,s).on(a,"dblclick",n.DomEvent.stopPropagation),a}}),n.Map.mergeOptions({zoomControl:!0}),n.Map.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new n.Control.Zoom,this.addControl(this.zoomControl))})),n.control.zoom=function(t){return new n.Control.Zoom(t)},n.Control.Attribution=n.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>'},initialize:function(t){n.Util.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=n.DomUtil.create("div","leaflet-control-attribution"),n.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]--,this._update(),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions.hasOwnProperty(e)&&this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" &#8212; ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),n.Map.mergeOptions({attributionControl:!0}),n.Map.addInitHook((function(){this.options.attributionControl&&(this.attributionControl=(new n.Control.Attribution).addTo(this))})),n.control.attribution=function(t){return new n.Control.Attribution(t)},n.Control.Scale=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=n.DomUtil.create("div",e),o=this.options;return this._addScales(o,e,i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),this._update(),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=n.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=n.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,n=this._map.getSize(),o=this.options,s=0;n.x>0&&(s=i*(o.maxWidth/n.x)),this._updateScales(o,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),n.control.scale=function(t){return new n.Control.Scale(t)},n.Control.Layers=n.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){for(var o in n.Util.setOptions(this,i),this._layers={},this._lastZIndex=0,t)t.hasOwnProperty(o)&&this._addLayer(t[o],o);for(o in e)e.hasOwnProperty(o)&&this._addLayer(e[o],o,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._container},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=n.Util.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=n.DomUtil.create("div",t);n.Browser.touch?n.DomEvent.on(e,"click",n.DomEvent.stopPropagation):n.DomEvent.disableClickPropagation(e);var i=this._form=n.DomUtil.create("form",t+"-list");if(this.options.collapsed){n.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var o=this._layersLink=n.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",n.Browser.touch?n.DomEvent.on(o,"click",n.DomEvent.stopPropagation).on(o,"click",n.DomEvent.preventDefault).on(o,"click",this._expand,this):n.DomEvent.on(o,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=n.DomUtil.create("div",t+"-base",i),this._separator=n.DomUtil.create("div",t+"-separator",i),this._overlaysList=n.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var o=n.Util.stamp(t);this._layers[o]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t=!1,e=!1;for(var i in this._layers)if(this._layers.hasOwnProperty(i)){var n=this._layers[i];this._addItem(n),e=e||n.overlay,t=t||!n.overlay}this._separator.style.display=e&&t?"":"none"}},_createRadioElement:function(t,e){var i='<input type="radio" name="'+t+'"';e&&(i+=' checked="checked"'),i+="/>";var n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=n.Util.stamp(t.layer),n.DomEvent.on(e,"click",this._onInputClick,this);var s=document.createTextNode(" "+t.name);i.appendChild(e),i.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i)},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(t=0;t<o;t++)e=n[t],i=this._layers[e.layerId],e.checked?this._map.addLayer(i.layer,!i.overlay):this._map.removeLayer(i.layer)},_expand:function(){n.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),n.control.layers=function(t,e,i){return new n.Control.Layers(t,e,i)},n.Transition=n.Class.extend({includes:n.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:n.DomUtil.setPosition},implemented:function(){return n.Transition.NATIVE||n.Transition.TIMER}},options:{easing:"ease",duration:.5},_setProperty:function(t,e){var i=n.Transition.CUSTOM_PROPS_SETTERS;t in i?i[t](this._el,e):this._el.style[t]=e}}),n.Transition=n.Transition.extend({statics:function(){var t=n.DomUtil.TRANSITION;return{NATIVE:!!t,TRANSITION:t,PROPERTY:t+"Property",DURATION:t+"Duration",EASING:t+"TimingFunction",END:"webkitTransition"===t||"OTransition"===t?t+"End":"transitionend",CUSTOM_PROPS_PROPERTIES:{position:n.Browser.any3d?n.DomUtil.TRANSFORM:"top, left"}}}(),options:{fakeStepInterval:100},initialize:function(t,e){this._el=t,n.Util.setOptions(this,e),n.DomEvent.on(t,n.Transition.END,this._onTransitionEnd,this),this._onFakeStep=n.Util.bind(this._onFakeStep,this)},run:function(t){var e,i=[],o=n.Transition.CUSTOM_PROPS_PROPERTIES;for(e in t)t.hasOwnProperty(e)&&(e=o[e]?o[e]:e,e=this._dasherize(e),i.push(e));for(e in this._el.style[n.Transition.DURATION]=this.options.duration+"s",this._el.style[n.Transition.EASING]=this.options.easing,this._el.style[n.Transition.PROPERTY]="all",t)t.hasOwnProperty(e)&&this._setProperty(e,t[e]);n.Util.falseFn(this._el.offsetWidth),this._inProgress=!0,n.Browser.mobileWebkit&&(this.backupEventFire=setTimeout(n.Util.bind(this._onBackupFireEnd,this),1.2*this.options.duration*1e3)),n.Transition.NATIVE?(clearInterval(this._timer),this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval)):this._onTransitionEnd()},_dasherize:function(){function t(t){return"-"+t.toLowerCase()}var e=/([A-Z])/g;return function(i){return i.replace(e,t)}}(),_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(t){this._inProgress&&(this._inProgress=!1,clearInterval(this._timer),this._el.style[n.Transition.TRANSITION]="",clearTimeout(this.backupEventFire),delete this.backupEventFire,this.fire("step"),t&&t.type&&this.fire("end"))},_onBackupFireEnd:function(){var t=document.createEvent("Event");t.initEvent(n.Transition.END,!0,!1),this._el.dispatchEvent(t)}}),n.Transition=n.Transition.NATIVE?n.Transition:n.Transition.extend({statics:{getTime:Date.now||function(){return+new Date},TIMER:!0,EASINGS:{linear:function(t){return t},"ease-out":function(t){return t*(2-t)}},CUSTOM_PROPS_GETTERS:{position:n.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(t,e){this._el=t,n.Util.extend(this.options,e),this._easing=n.Transition.EASINGS[this.options.easing]||n.Transition.EASINGS["ease-out"],this._step=n.Util.bind(this._step,this),this._interval=Math.round(1e3/this.options.fps)},run:function(t){this._props={};var e=n.Transition.CUSTOM_PROPS_GETTERS,i=n.Transition.UNIT_RE;for(var o in this.fire("start"),t)if(t.hasOwnProperty(o)){var s={};if(o in e)s.from=e[o](this._el);else{var a=this._el.style[o].match(i);s.from=parseFloat(a[0]),s.unit=a[1]}s.to=t[o],this._props[o]=s}clearInterval(this._timer),this._timer=setInterval(this._step,this._interval),this._startTime=n.Transition.getTime()},_step:function(){var t=n.Transition.getTime()-this._startTime,e=1e3*this.options.duration;t<e?this._runFrame(this._easing(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e,i,o,s=n.Transition.CUSTOM_PROPS_SETTERS;for(e in this._props)this._props.hasOwnProperty(e)&&(i=this._props[e],e in s?(o=i.to.subtract(i.from).multiplyBy(t).add(i.from),s[e](this._el,o)):this._el.style[e]=(i.to-i.from)*t+i.from+i.unit);this.fire("step")},_complete:function(){clearInterval(this._timer),this.fire("end")}}),n.Map.include(n.Transition&&n.Transition.implemented()?{setView:function(t,e,i){e=this._limitZoom(e);var n=this._zoom!==e;if(this._loaded&&!i&&this._layers&&(n?this._zoomToIfClose&&this._zoomToIfClose(t,e):this._panByIfClose(t)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},panBy:function(t,e){return(t=n.point(t)).x||t.y?(this._panTransition||(this._panTransition=new n.Transition(this._mapPane),this._panTransition.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.Util.setOptions(this._panTransition,n.Util.extend({duration:.25},e)),this.fire("movestart"),n.DomUtil.addClass(this._mapPane,"leaflet-pan-anim"),this._panTransition.run({position:n.DomUtil.getPosition(this._mapPane).subtract(t)}),this):this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){n.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(t){var e=this._getCenterOffset(t)._floor();return!!this._offsetIsWithinView(e)&&(this.panBy(e),!0)},_offsetIsWithinView:function(t,e){var i=e||1,n=this.getSize();return Math.abs(t.x)<=n.x*i&&Math.abs(t.y)<=n.y*i}}:{}),n.Map.mergeOptions({zoomAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23&&!n.Browser.mobileOpera}),n.DomUtil.TRANSITION&&n.Map.addInitHook((function(){n.DomEvent.on(this._mapPane,n.Transition.END,this._catchTransitionEnd,this)})),n.Map.include(n.DomUtil.TRANSITION?{_zoomToIfClose:function(t,e){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t).divideBy(1-1/i);if(!this._offsetIsWithinView(o,1))return!1;n.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:t,zoom:e});var s=this._getCenterLayerPoint().add(o);return this._prepareTileBg(),this._runAnimation(t,e,i,s),!0},_catchTransitionEnd:function(t){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(t,e,i,o,s){this._animateToCenter=t,this._animateToZoom=e,this._animatingZoom=!0;var a=n.DomUtil.TRANSFORM,r=this._tileBg;clearTimeout(this._clearTileBgTimer),n.Util.falseFn(r.offsetWidth);var l=n.DomUtil.getScaleString(i,o),h=r.style[a];r.style[a]=s?h+" "+l:l+" "+h},_prepareTileBg:function(){var t=this._tilePane,e=this._tileBg;if(e&&this._getLoadedTilesPercentage(e)>.5&&this._getLoadedTilesPercentage(t)<.5)return t.style.visibility="hidden",t.empty=!0,void this._stopLoadingImages(t);e||((e=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane)).style.zIndex=1),e.style[n.DomUtil.TRANSFORM]="",e.style.visibility="hidden",e.empty=!0,t.empty=!1,this._tilePane=this._panes.tilePane=e;var i=this._tileBg=t;n.DomUtil.addClass(i,"leaflet-zoom-animated"),this._stopLoadingImages(i)},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;e<i;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,o,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;e<i;e++)(o=s[e]).complete||(o.onload=n.Util.falseFn,o.onerror=n.Util.falseFn,o.src=n.Util.emptyImageUrl,o.parentNode.removeChild(o))},_onZoomTransitionEnd:function(){this._restoreTileFront(),n.Util.falseFn(this._tileBg.offsetWidth),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),n.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){!this._animatingZoom&&!this.touchZoom._zooming&&(this._tileBg.innerHTML="")}}:{}),n.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locationOptions=n.Util.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=n.Util.bind(this._handleGeolocationResponse,this),i=n.Util.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=180*t.coords.accuracy/4e7,i=2*e,o=t.coords.latitude,s=t.coords.longitude,a=new n.LatLng(o,s),r=new n.LatLng(o-e,s-i),l=new n.LatLng(o+e,s+i),h=new n.LatLngBounds(r,l),u=this._locationOptions;if(u.setView){var c=Math.min(this.getBoundsZoom(h),u.maxZoom);this.setView(a,c)}this.fire("locationfound",{latlng:a,bounds:h,accuracy:t.coords.accuracy})}})}(this)}).call(window)},"contrib/jg_lib/geom/Rectangle":function(t,e,i){var n;
/*!
 * Copyright (c) 2007-2016 Jason Gatt
 * 
 * Released under the MIT license:
 * http://opensource.org/licenses/MIT
 */void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/utils/NumberUtil");return o(n.i,Object,(function(t,e){var i=/^\s*\(?([^\)]+)\)?\s*$/;t.interpolate=function(e,i,n){var o=s.interpolate(e.x,i.x,n),a=s.interpolate(e.y,i.y,n),r=s.interpolate(e.width,i.width,n),l=s.interpolate(e.height,i.height,n);return new t(o,a,r,l)},t.fromArray=function(e){var i=e.length,n=i>0?e[0]:0,o=i>1?e[1]:0,s=i>2?e[2]:0,a=i>3?e[3]:0;return new t(n,o,s,a)},t.fromString=function(e){var n=(""+e).match(i);return n?t.fromArray(n[1].split(",")):new t},this.x=0,this.y=0,this.width=0,this.height=0,this.constructor=function(t,e,i,n){this.x=null!=t?+t:0,this.y=null!=e?+e:0,this.width=null!=i?+i:0,this.height=null!=n?+n:0},this.hasNaN=function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height)},this.hasInfinity=function(){return this.x==1/0||this.x==-1/0||this.y==1/0||this.y==-1/0||this.width==1/0||this.width==-1/0||this.height==1/0||this.height==-1/0},this.isFinite=function(){return this.x-this.x==0&&this.y-this.y==0&&this.width-this.width==0&&this.height-this.height==0},this.approxEquals=function(t,e){return s.approxEqual(this.x,t.x,e)&&s.approxEqual(this.y,t.y,e)&&s.approxEqual(this.width,t.width,e)&&s.approxEqual(this.height,t.height,e)},this.equals=function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},this.clone=function(){return new t(this.x,this.y,this.width,this.height)},this.toArray=function(){return[+this.x,+this.y,+this.width,+this.height]},this.toString=function(){return"("+ +this.x+","+ +this.y+","+ +this.width+","+ +this.height+")"}}))}.call(e,i,e,t))||(t.exports=n)},"contrib/leaflet/images/layers.png":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABJRJREFUeNqklk9IG1kcx78zk8mMhGRiYqKxJsE0CKVsWXtYFoqnHrSHWo899FLoSRYs6KE3ocUiJaFbkP4BqR4UqrCw6UFtaU+lKCsoeLGENJI/mubfmElIM5P5t5c1u7Mpaay/23uPeZ/33nz4vkfouo526vr16+jt7cWNGzdmASASidw7OjpCtVpFO3MQ7YLevn17lWGYVw6HowsAeJ4vSJJ0c3Fx8X2hUEC9Xm8J/C5obW3NQdP0a47jrvh8PlitVgBApVJBMpmEIAgfZVkeff78OV8ul6EoyulBa2trsyzLTnq9XpPT6YTZbDaM1+t1FItFpFIpRRTF8PLy8r1sNouvX7827e6boEgkcpWm6Vdut7vL4/Ggo6MDBEF8czG6rqNWqyGTySCXyxVkWb45Pz//nud5KIrSABpAKysr3Waz+Q+O46709fXBYrHAZDI17QJA0+4URUG1WkU6nYYgCB9VVR2dm5vjq9UqVFX9F7S6uhpiGGbi3LlzJofDAZqmDROpqgpRFEFRVKPNsmyjfVKyLIPneRweHiqSJD1ZWFiYKhaLIF68eDFCUdSSz+dzejwesCxrOCZd1xsKMwxjAEmSBIIgYLFYmr4RRRGZTAbJZLKoquotkyRJdLlcJkVRBAD09PQ0JqvVahBFESzLwmQyQVEUg1UEQUBRFGSzWbAsi46OjsYivnz5gmg0ilKpRNpsNrpxdI8ePfq9VCr9FggEKK/XC5IkQdM0WJYFSZItZdA0DaIoQpZlaJqGVCqFeDyu2u32uYWFhbuyLBtlePny5U+pVGqb53nmwoUL6O/vb6zypDRNAwCQJGnor9VqODg4wP7+PhwOh9Tb2/vzzMzMJ03ToOv6t2Wo1+vY2NiArusIBoPo6uoCSZJQVbUB0DQNFEVB0zQUCgXEYjEQBIGRkRGYzeaGDBMTE1MAWsuws7ODDx8+oLOzE16vF52dnQbQ8fExUqkUjo+PMTQ0hMuXL/+YDIFAAE6nE1tbW9je3obf74fH4wEAZDIZJBIJ+P1+jI2NgeM4SJJ0dhny+TzevHkDQRAAABzHYXh4GC6Xq6UMDx8+vNuUDO3IsLe3BwC4dOnSd2WYnJz81JR135Ph/1H03+hpJcOdO3fal8HlcsHv98NqtTbGdF1HpVJBIpFAPp8/mwwXL15EMBjEu3fvsLm5CZ/PZ5AhmUwiEAjg9u3bYBjm9DKcP38edrvdkAbZbBbr6+solUoAALvdjmvXrqG7u9uQEqVSCZ8/f24tw+PHj7sFQXitquovAwMD8Pv9YFnW8E92d3cBAIODg4Z+URSRSCQQjUZBUdRfHMeNTk9PZ1tefKFQaCSfzy9ZrVbnwMAA3G53SxlyuRyi0SgqlUrR5XLdun///saprvIHDx6EisXihM/nMwUCAdhsNoMM5XIZ8XgcyWRScTqdT549ezb1Q28GAJidne0WBOFPSZJ+DQaD6OvrAwCk02nEYjEwDLPFcdxYOBzOngTumZ5bMzMzI7lcbknTNOc/6V10u923wuHwRivAqUE2mw0URWF8fDwEAE+fPp1SVRXt1t8DAKzuGCketP3pAAAAAElFTkSuQmCC"},"contrib/leaflet/images/zoom-in.png":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAMAAADXT/YiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUwRTZCRkI3NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUwRTZCRkI4NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTBFNkJGQjU2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFNkJGQjY2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7cwPMXAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAAZSURBVHjaYmBkZGRgYACR2Fj4AV69AAEGAAauACW68QgkAAAAAElFTkSuQmCC"},"contrib/leaflet/images/zoom-out.png":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAMAAADXT/YiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5MjRDMEQ5NjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5MjRDMERBNjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTkyNEMwRDc2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTkyNEMwRDg2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uh53jAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAAVSURBVHjaYmCEAQZsLPwAr16AAAMACdgAN9MxY1IAAAAASUVORK5CYII="},"contrib/leaflet/leaflet.css":function(t,e,i){var n=i(974);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,o);n.locals&&(t.exports=n.locals)},"shim/leaflet":function(t,e,i){var n,o;n=[i("contrib/leaflet/leaflet.css"),i(975)],void 0===(o=function(t,e){return e&&e.Util&&(e.Util.getParamString=function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}),e}.apply(e,n))||(t.exports=o)},"splunk/charting/ExternalLegend":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/splunk.legend"),s=i("contrib/jg_lib/Class"),a=i("contrib/jg_lib/utils/FunctionUtil"),r=i("splunk/charting/Legend");return s(n.i,r,(function(t,e){var i=0;this._id=null,this._isConnected=!1,this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,this.constructor=function(){e.constructor.call(this),this._external_setLabels=a.bind(this._external_setLabels,this),this._external_labelIndexMapChanged=a.bind(this._external_labelIndexMapChanged,this),this._id="splunk-charting-ExternalLegend-"+ ++i},this.connect=function(){this.close(),o.register(this._id),o.addEventListener("setLabels",this._external_setLabels),o.addEventListener("labelIndexMapChanged",this._external_labelIndexMapChanged),this._isConnected=!0},this.close=function(){this._isConnected&&(this._isConnected=!1,o.removeEventListener("labelIndexMapChanged",this._external_labelIndexMapChanged),o.removeEventListener("setLabels",this._external_setLabels),o.unregister(this._id))},this.isConnected=function(){return this._isConnected},this.getNumLabelsOverride=function(){if(this._isConnected){var t=this._cachedExternalNumLabels;return t<0&&(t=this._cachedExternalNumLabels=o.numLabels()),t}return-1},this.getLabelIndexOverride=function(t){if(this._isConnected){var e=this._cachedExternalLabelMap;e||(e=this._cachedExternalLabelMap={});var i=e[t];return null==i&&(i=e[t]=o.getLabelIndex(t)),i}return-1},this.updateLabelsOverride=function(t){return!!this._isConnected&&(this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,o.setLabels(this._id,t),!0)},this._external_setLabels=function(){this.notifySettingLabels()},this._external_labelIndexMapChanged=function(){this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,this.notifyLabelIndexMapChanged()}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/charting/Legend":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/events/ChainedEvent"),a=i("contrib/jg_lib/events/Event"),r=i("contrib/jg_lib/events/EventData"),l=i("contrib/jg_lib/events/MEventTarget"),h=i("contrib/jg_lib/events/MListenerTarget"),u=i("contrib/jg_lib/events/MObservableTarget"),c=i("contrib/jg_lib/properties/MPropertyTarget"),p=i("contrib/jg_lib/properties/ObservableProperty"),d=i("contrib/jg_lib/utils/ArrayUtil"),m=i("contrib/jg_lib/utils/Map");return o(n.i,Object,(function(t,e){o.mixin(this,l,h,u,c),this.settingLabels=new a("settingLabels",r),this.labelIndexMapChanged=new s("labelIndexMapChanged",this.change),this.labels=new p("labels",Array,[]).readFilter((function(t){return t.concat()})).writeFilter((function(t){return t?t.concat():[]})).onChange((function(t){this._updateLabelMap()})),this.actualLabels=new p("actualLabels",Array,[]).readOnly(!0).readFilter((function(t){return t.concat()})),this._targetMap=null,this._targetList=null,this._labelMap=null,this._labelList=null,this._isSettingLabels=!1,this.constructor=function(){e.constructor.call(this),this._targetMap=new m,this._targetList=[],this._labelMap={},this._labelList=[]},this.register=function(t){if(null==t)throw new Error("Parameter target must be non-null.");var e=this._targetMap.get(t);e||(e={labels:null},this._targetMap.set(t,e),this._targetList.push(e))},this.unregister=function(t){if(null==t)throw new Error("Parameter target must be non-null.");var e=this._targetMap.get(t);if(e){var i=d.indexOf(this._targetList,e);i>=0&&this._targetList.splice(i,1),this._targetMap.del(t),this._updateLabelMap()}},this.setLabels=function(t,e){if(null==t)throw new Error("Parameter target must be non-null.");if(null!=e&&!o.isArray(e))throw new Error("Parameter labels must be of type Array.");var i=this._targetMap.get(t);i&&(i.labels=e?e.concat():null,this.notifySettingLabels())},this.getLabelIndex=function(t){if(null==t)throw new Error("Parameter label must be non-null.");if(!o.isString(t))throw new Error("Parameter label must be of type String.");var e=this.getLabelIndexOverride(t);if(e<0){var i=this._labelMap[t];e=null!=i?i:-1}return e},this.getNumLabels=function(){var t=this.getNumLabelsOverride();return t<0&&(t=this._labelList.length),t},this.notifySettingLabels=function(){if(!this._isSettingLabels)try{this._isSettingLabels=!0,this.fire(this.settingLabels,new r),this._updateLabelMap()}finally{this._isSettingLabels=!1}},this.notifyLabelIndexMapChanged=function(){this.fire(this.labelIndexMapChanged,new r)},this.getNumLabelsOverride=function(){return-1},this.getLabelIndexOverride=function(t){return-1},this.updateLabelsOverride=function(t){return!1},this._updateLabelMap=function(){var t,e,i,n,o,s,a=this._labelList,r=!1,l={},h=[],u=this._targetList;for(i=0,o=(t=this.getInternal("labels")).length;i<o;i++)null==l[e=String(t[i])]&&(l[e]=h.length,h.push(e));for(i=0,o=u.length;i<o;i++)if(t=u[i].labels)for(n=0,s=t.length;n<s;n++)null==l[e=String(t[n])]&&(l[e]=h.length,h.push(e));if(h.length!=a.length)r=!0;else for(i=0,o=h.length;i<o;i++)if(h[i]!==a[i]){r=!0;break}r&&(this._labelMap=l,this._labelList=h,this.setInternal("actualLabels",h.concat()),this.updateLabelsOverride(h.concat())||this.notifyLabelIndexMapChanged())}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/events/GenericEventData":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/events/EventData"),a=i("contrib/jg_lib/utils/ObjectUtil");return o(n.i,s,(function(t,e){this.constructor=function(t){if(null!=t)for(var e in t)a.has(t,e)&&!(e in this)&&(this[e]=t[e])}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/LatLon":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/leaflet");return i("contrib/jg_lib/Class")(n.i,Object,(function(t,e){t.fromLeaflet=function(e){return new t(e.lat,e.lng)},this.lat=0,this.lon=0,this.constructor=function(t,e){this.lat=null!=t?+t:0,this.lon=null!=e?+e:0},this.normalize=function(e){var i=+this.lat;i<-90?i=-90:i>90&&(i=90);var n=e?e.lon:0,o=(this.lon-n)%360;return o<-180?o+=360:o>180&&(o-=360),new t(i,o+=n)},this.isFinite=function(){return this.lat-this.lat==0&&this.lon-this.lon==0},this.equals=function(t){return this.lat==t.lat&&this.lon==t.lon},this.clone=function(){return new t(this.lat,this.lon)},this.toString=function(){return"("+ +this.lat+","+ +this.lon+")"},this.toLeaflet=function(){var t=new o.LatLng(0,0);return t.lat=+this.lat,t.lng=+this.lon,t}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/LatLonBounds":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/leaflet"),s=i("contrib/jg_lib/Class"),a=i("splunk/mapping/LatLon");return s(n.i,Object,(function(t,e){t.fromLeaflet=function(e){var i=e.getSouthWest(),n=e.getNorthEast();return new t(i.lat,i.lng,n.lat,n.lng)},this.s=0,this.w=0,this.n=0,this.e=0,this.constructor=function(t,e,i,n){this.s=null!=t?+t:0,this.w=null!=e?+e:0,this.n=null!=i?+i:0,this.e=null!=n?+n:0},this.getSW=function(){return new a(this.s,this.w)},this.getSE=function(){return new a(this.s,this.e)},this.getNW=function(){return new a(this.n,this.w)},this.getNE=function(){return new a(this.n,this.e)},this.getCenter=function(){return new a((+this.s+ +this.n)/2,(+this.w+ +this.e)/2)},this.expand=function(t){var e=+t.lat,i=+t.lon,n=+this.s,o=+this.w,s=+this.n,a=+this.e;e<n&&(this.s=e),e>s&&(this.n=e),i<o&&(this.w=i),i>a&&(this.e=i)},this.contains=function(t){var e=+t.lat,i=+t.lon,n=+this.s,o=+this.w,s=+this.n,a=+this.e;return e>=n&&e<=s&&i>=o&&i<=a},this.normalize=function(e){var i=+this.s;i<-90?i=-90:i>90&&(i=90);var n=+this.n;n<i?n=i:n>90&&(n=90);var o=e?e.lon:0,s=this.w-o,a=this.e-o;return a-s>=360?(s=-180,a=180):((s%=360)<-180?s+=360:s>180&&(s-=360),(a%=360)<-180?a+=360:a>180&&(a-=360),a<s&&(a>-s?s-=360:a+=360)),new t(i,s+=o,n,a+=o)},this.isFinite=function(){return this.s-this.s==0&&this.w-this.w==0&&this.n-this.n==0&&this.e-this.e==0},this.equals=function(t){return this.s==t.s&&this.w==t.w&&this.n==t.n&&this.e==t.e},this.clone=function(){return new t(this.s,this.w,this.n,this.e)},this.toString=function(){return"("+ +this.s+","+ +this.w+","+ +this.n+","+ +this.e+")"},this.toLeaflet=function(){var t=new o.LatLng(0,0);t.lat=+this.s,t.lng=+this.w;var e=new o.LatLng(0,0);return e.lat=+this.n,e.lng=+this.e,new o.LatLngBounds(t,e)}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/Map":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/jquery"),s=(i("require/underscore"),i("shim/leaflet")),a=i("contrib/jg_lib/Class"),r=i("contrib/jg_lib/async/Pass"),l=i("contrib/jg_lib/events/ChainedEvent"),h=i("contrib/jg_lib/events/Event"),u=i("contrib/jg_lib/events/EventData"),c=i("contrib/jg_lib/properties/ObservableArrayProperty"),p=i("contrib/jg_lib/properties/ObservableProperty"),d=i("contrib/jg_lib/properties/Property"),m=i("contrib/jg_lib/utils/ArrayUtil"),f=i("contrib/jg_lib/utils/FunctionUtil"),_=i("contrib/jg_lib/utils/NumberUtil"),g=i("contrib/jg_lib/utils/StringUtil"),v=i("splunk/events/GenericEventData"),y=i("splunk/mapping/LatLon"),b=i("splunk/mapping/LatLonBounds"),L=i("splunk/mapping/controls/ControlBase"),x=i("splunk/mapping/layers/LayerBase"),P=i("splunk/viz/VizBase"),w=i("util/htmlcleaner");return i("shim/jquery.resize"),i("splunk/mapping/Map.pcss"),a(n.i,P,(function(t,e){this.updateLeafletMapSizePass=new r("updateLeafletMapSize",.001),this.updateTilesPass=new r("updateTiles",.002),this.boundsChanged=new l("boundsChanged",this.change),this.mapClicked=new h("mapClicked",v),this.center=new d("center",y).getter((function(){return y.fromLeaflet(this.leafletMap.getCenter())})).setter((function(t){t=t&&t.isFinite()?t.clone():new y,this.validate(),this.leafletMap.setView(t.toLeaflet(),this.leafletMap.getZoom(),!0),this._checkBoundsChanged(),clearTimeout(this._setCenterTimeout),this._setCenterTimeout=setTimeout(f.bind((function(){this.leafletMap.setView(t.toLeaflet(),this.leafletMap.getZoom(),!0),this._checkBoundsChanged()}),this),500)})),this.zoom=new d("zoom",Number).getter((function(){return this.leafletMap.getZoom()})).setter((function(t){t=t>=0&&t<1/0?t:0,this.validate(),this.leafletMap.setView(this.leafletMap.getCenter(),t,!0),this._checkBoundsChanged()})),this.tileURL=new p("tileURL",String,null).onChange((function(t){this.invalidate("updateTilesPass")})),this.tileSubdomains=new c("tileSubdomains",String,["a","b","c"]).onChange((function(t){this.invalidate("updateTilesPass")})),this.tileMinZoom=new p("tileMinZoom",Number,0).writeFilter((function(t){return t>=0&&t<1/0?Math.floor(t):0})).onChange((function(t){this.invalidate("updateTilesPass")})),this.tileMaxZoom=new p("tileMaxZoom",Number,1/0).writeFilter((function(t){return t>=0&&t<1/0?Math.floor(t):1/0})).onChange((function(t){this.invalidate("updateTilesPass")})),this.tileInvertY=new p("tileInvertY",Boolean,!1).onChange((function(t){this.invalidate("updateTilesPass")})),this.tileOpacity=new p("tileOpacity",Number,1).writeFilter((function(t){return t>0&&t<1/0?Math.min(t,1):0})).onChange((function(t){this.invalidate("updateTilesPass")})),this.tileAttribution=new p("tileAttribution",String,null).onChange((function(t){this.invalidate("updateTilesPass")})),this.showTiles=new p("showTiles",Boolean,!0).onChange((function(t){this.invalidate("updateTilesPass")})),this.tilesLoaded=new p("tilesLoaded",Boolean,!1).readOnly(!0),this.leafletMap=null,this.formatNumber=null,this.formatDegrees=null,this.isCategorical=!1,this._tooltip=null,this._tooltipMetadata=null,this._tileLayer=null,this._layers=null,this._controls=null,this._width=0,this._height=0,this._bounds=null,this._setCenterTimeout=0,this._clicks=0,this._doubleClickTimeout=null,this.constructor=function(){e.constructor.call(this),this.addStyleClass("splunk-mapping-Map"),this.setStyle({position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"none"}),this.updateSize=f.bind(this.updateSize,this),this._leafletMap_moveend=f.bind(this._leafletMap_moveend,this),this._leafletMap_zoomend=f.bind(this._leafletMap_zoomend,this),this._self_mouseOver=f.bind(this._self_mouseOver,this),this._self_mouseOut=f.bind(this._self_mouseOut,this),this._self_mouseMove=f.bind(this._self_mouseMove,this),this._self_click=f.bind(this._self_click,this),this._self_dbl_click=f.bind(this._self_dbl_click,this),this.leafletMap=new s.Map(this.element,{center:new s.LatLng(0,0),zoom:0,trackResize:!1,worldCopyJump:!1}),this.leafletMap.attributionControl.setPrefix(""),this.leafletMap.on("moveend",this._leafletMap_moveend),this.leafletMap.on("zoomend",this._leafletMap_zoomend),this._tooltip=new i,this._layers=[],this._controls=[],this.$element.bind("mouseover",this._self_mouseOver),this.$element.bind("mouseout",this._self_mouseOut),this.$element.bind("mousemove",this._self_mouseMove),this.$element.bind("click",this._self_click),this.$element.bind("dblclick",this._self_dbl_click)},this.updateLeafletMapSize=function(){this.isValid("updateLeafletMapSizePass")||(this.leafletMap.invalidateSize(),clearTimeout(this.leafletMap._sizeTimer),this.leafletMap.fire("moveend"),this.markValid("updateLeafletMapSizePass"))},this.updateTiles=function(){if(!this.isValid("updateTilesPass")){var t=this.leafletMap,e=this._tileLayer;e&&(e.off("load"),e.off("unload"),t.removeLayer(e),this._tileLayer=null);var i={};i.opacity=this.getInternal("tileOpacity"),i.subdomains=this.getInternal("tileSubdomains"),i.minZoom=this.getInternal("tileMinZoom"),i.maxZoom=Math.max(this.getInternal("tileMinZoom"),this.getInternal("tileMaxZoom")),i.tms=this.getInternal("tileInvertY"),i.attribution=this.getInternal("tileAttribution");var n=this.getInternal("showTiles")?this.getInternal("tileURL"):null;n&&((e=this._tileLayer=new s.TileLayer(n,i)).on("load",(function(){this.setInternal("tilesLoaded",!0)}),this),e.on("unload",(function(){this.setInternal("tilesLoaded",!1)}),this),t.addLayer(e,!0)),t.options.minZoom=i.minZoom,t.options.maxZoom=i.maxZoom,t.setZoom(t.getZoom()),this.markValid("updateTilesPass"),this._checkBoundsChanged()}},this.addLayer=function(t){if(null==t)throw new Error("Parameter layer must be non-null.");if(!(t instanceof x))throw new Error("Parameter layer must be of type "+a.getName(x)+".");var e=this._layers;m.indexOf(e,t)>=0||(e.push(t),this.leafletMap.addLayer(t.leafletLayer),t.onAddedToMap(this))},this.removeLayer=function(t){if(null==t)throw new Error("Parameter layer must be non-null.");if(!(t instanceof x))throw new Error("Parameter layer must be of type "+a.getName(x)+".");var e=this._layers,i=m.indexOf(e,t);i<0||(t.onRemovedFromMap(this),this.leafletMap.removeLayer(t.leafletLayer),e.splice(i,1))},this.addControl=function(t){if(null===t)throw new Error("Parameter control must be non-null.");if(!(t instanceof L))throw new Error("Parameter control must be of type "+a.getName(L)+".");var e=this._controls;m.indexOf(e,t)>=0||(e.push(t),this.leafletMap.addControl(t.leafletControl),t.onAddedToMap(this))},this.removeControl=function(t){if(null===t)throw new Error("Parameter control must be non-null.");if(!(t instanceof L))throw new Error("Parameter control must be of type "+a.getName(L)+".");var e=this._controls,i=m.indexOf(e,t);i<0||(t.onRemovedFromMap(this),this.leafletMap.removeControl(t.leafletControl),e.splice(i,1))},this.fitWorld=function(t){if(null!=t&&!a.isBoolean(t))throw new Error("Parameter viewportInside must be of type Boolean.");this.fitBounds(new b(-60,-180,85,180),t)},this.fitBounds=function(t,e){if(null==t)throw new Error("Parameter latLonBounds must be non-null.");if(!(t instanceof b))throw new Error("Parameter latLonBounds must be of type "+a.getName(b)+".");if(null!=e&&!a.isBoolean(e))throw new Error("Parameter viewportInside must be of type Boolean.");t=t.isFinite()?t:new b(-60,-180,85,180),e=!0===e,clearTimeout(this._setCenterTimeout);var i=this.leafletMap.getBoundsZoom(t.toLeaflet(),e);this.leafletMap.setView(this.leafletMap.getCenter(),i,!0);var n=this.leafletMap.latLngToLayerPoint(t.getNW().toLeaflet()),o=this.leafletMap.latLngToLayerPoint(t.getSE().toLeaflet()),r=new s.Point((n.x+o.x)/2,(n.y+o.y)/2),l=this.leafletMap.layerPointToLatLng(r);this.leafletMap.setView(l,i,!0),this._checkBoundsChanged()},this.getLatLonBounds=function(){return b.fromLeaflet(this.leafletMap.getBounds())},this.updateSize=function(){var t=this.$element.width(),e=this.$element.height();t===this._width&&e===this._height||this.$element.is(":visible")&&(this._width=t,this._height=e,this.leafletMap.invalidateSize(),this.invalidate("updateLeafletMapSizePass"),this._checkBoundsChanged())},this.dispose=function(){clearTimeout(this._setCenterTimeout);for(var t=this._layers.concat(),i=t.length-1;i>=0;i--)this.removeLayer(t[i]);for(var n=this._controls.concat(),o=n.length-1;o>=0;o--)this.removeControl(n[o]);this.$element.off("elementResize"),e.dispose.call(this)},this.onAppend=function(){this.updateSize(),this.$element.on("elementResize",this.updateSize)},this._checkBoundsChanged=function(){var t=this._bounds,e=this.getLatLonBounds();t&&t.equals(e)||(this._bounds=e,this.fire("boundsChanged",new u))},this._checkBoundsDefault=function(t){return 0!==t.e&&(0!==t.w&&(0!==t.n&&0!==t.s))},this._updateTooltip=function(t){var e=this._tooltip,i=this._getMetadataFromElement(t);if(i&&i!==this._tooltipMetadata){this._tooltipMetadata=i;var n=i.data,s=i.fields,a=i.sliceList,r=i.tooltipFields,l=i.tooltipLatLng,h=i.tooltipOffsetRadius;if(n&&(s||r)&&l){var u,c,p,d,m="";if(m+='<table class="map-tooltip-table">',a){for(p=0,d=Math.min(s.length,2);p<d;p++)u=s[p],m+="<tr>",m+='<td class="tooltip-column-left">'+g.escapeHTML(u)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+g.escapeHTML(this._formatDegrees(n[u],0===p?"ns":"ew"))+"</td>",m+="</tr>";for(p=0,d=a.length;p<d;p++)m+="<tr>",m+='<td class="tooltip-column-left" style="color: #'+(16777216|(c=a[p]).series.color).toString(16).substring(1)+';">'+g.escapeHTML(c.series.name)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+g.escapeHTML(this._formatNumber(c.value))+"</td>",m+="</tr>"}else if(r)for(p=0,d=r.length;p<d;p++){var f=n[u=r[p]];f=u!==i.valueFieldName||this.isCategorical||isNaN(parseFloat(f))?g.escapeHTML(f):this._formatNumber(f),m+="<tr>",m+='<td class="tooltip-column-left">'+g.escapeHTML(u)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+f+"</td>",m+="</tr>"}else for(p=0,d=s.length;p<d;p+=2)u=s[p],m+="<tr>",m+='<td class="tooltip-column-left">'+g.escapeHTML(u)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+g.escapeHTML(n[u])+"</td>",m+="</tr>";m+="</table>",e.setLatLng(l),e.setOffsetRadius(h),e.setContent(m),this.leafletMap.openPopup(e)}else this.leafletMap.closePopup()}else if(!i&&this._tooltipMetadata){o.contains(this._tooltip._container,t)&&this._tooltip!==t||(this._tooltipMetadata=null,this.leafletMap.closePopup())}},this._getMetadataFromElement=function(t){for(;t;){if(t[x.METADATA_KEY])return t[x.METADATA_KEY];t=t.parentNode}return null},this._formatNumber=function(t){var e=this.formatNumber;return"function"==typeof e?e(Number(t)):String(t)},this._formatDegrees=function(t,e){var i=this.formatDegrees;return"function"==typeof i?i(Number(t),e):String(t)},this._leafletMap_moveend=function(t){this._checkBoundsChanged()},this._leafletMap_zoomend=function(t){this._checkBoundsChanged()},this._self_mouseOver=function(t){this._updateTooltip(t.target)},this._self_mouseOut=function(t){this._updateTooltip(t.relatedTarget)},this._self_mouseMove=function(t){this._updateTooltip(t.target)},this._self_dbl_click=function(t){clearTimeout(this._doubleClickTimeout)},this._self_click=function(t){if(!this.leafletMap.dragging||!this.leafletMap.dragging.moved()){var e=this._getMetadataFromElement(t.target);if(e&&e.data&&e.fields){t.preventDefault();var i={};for(var n in e.data)i[n]=e.data[n];var o=e.fields.concat();clearTimeout(this._doubleClickTimeout),this._doubleClickTimeout=setTimeout(function(){this.fire("mapClicked",new v({data:i,fields:o,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,jQueryEvent:t,originalEvent:t.originalEvent}))}.bind(this),500)}}};var i=s.Popup.extend({options:{paddingX:5,paddingY:5},_offsetRadius:0,initialize:function(t){t=s.Util.extend(t||{},{maxWidth:1/0,maxHeight:1/0,autoPan:!1,closeButton:!1}),s.Popup.prototype.initialize.call(this,t)},setOffsetRadius:function(t){return this._offsetRadius=t,this._update(),this},_initLayout:function(){s.Popup.prototype._initLayout.call(this),this._tipContainer.style.display="none",this._container.style.pointerEvents="none"},_updatePosition:function(){var t=this._map,e=t.containerPointToLayerPoint(new s.Point(0,0)),i=t.containerPointToLayerPoint(t.getSize()),n=e.x,o=e.y,a=i.x,r=i.y,l=this._container,h=l.offsetWidth,u=l.offsetHeight,c=s.Browser.any3d,p=this._offsetRadius,d=this.options.paddingX,m=this.options.paddingY,f=t.latLngToLayerPoint(this._latlng),g=f.x>(n+a)/2?-h-p-d:p+d,v=_.maxMin(f.y-u/2,r-u-m,o+m)-f.y;c&&s.DomUtil.setPosition(l,f);var y=g+(c?0:f.x),b=v+(c?0:f.y);l.style.left=Math.round(y)+"px",l.style.top=Math.round(b)+"px"}});s.Control.Attribution.include({_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions.hasOwnProperty(e)&&this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", "));var n=w.clean(i.join(" &#8212; "));this._container.innerHTML=n,this._container.style.display=n?"":"none"}}})}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/Map.pcss":function(t,e,i){var n=i(2726);"string"==typeof n&&(n=[[t.i,n,""]]);var o={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,o);n.locals&&(t.exports=n.locals)},"splunk/mapping/axis/BaseAxis":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/async/MPassTarget"),a=i("contrib/jg_lib/async/Pass"),r=i("contrib/jg_lib/events/ChainedEvent"),l=i("contrib/jg_lib/events/EventData"),h=i("contrib/jg_lib/events/MEventTarget"),u=i("contrib/jg_lib/events/MListenerTarget"),c=i("contrib/jg_lib/events/MObservableTarget"),p=i("contrib/jg_lib/properties/MPropertyTarget"),d=i("contrib/jg_lib/properties/ObservableProperty"),m=i("contrib/jg_lib/utils/Map");return o(n.i,Object,(function(t,e){o.mixin(this,h,u,c,p,s),this.processContainedValuesPass=new a("processContainedValues",.11),this.processContainedRangePass=new a("processContainedRange",.12),this.processExtendedRangePass=new a("processExtendedRange",.13),this.processActualRangePass=new a("processActualRange",.14),this.absoluteMapChanged=new r("absoluteMapChanged",this.change),this.relativeMapChanged=new r("relativeMapChanged",this.change),this.minimum=new d("minimum",Number,NaN).writeFilter((function(t){return t>-1/0&&t<1/0?t:NaN})).onChange((function(t){this.invalidate("processActualRangePass")})),this.maximum=new d("maximum",Number,NaN).writeFilter((function(t){return t>-1/0&&t<1/0?t:NaN})).onChange((function(t){this.invalidate("processActualRangePass")})),this.preliminaryMinimum=new d("preliminaryMinimum",Number,1/0).readOnly(!0),this.preliminaryMaximum=new d("preliminaryMaximum",Number,-1/0).readOnly(!0),this.containedMinimum=new d("containedMinimum",Number,1/0).readOnly(!0),this.containedMaximum=new d("containedMaximum",Number,-1/0).readOnly(!0),this.extendedMinimum=new d("extendedMinimum",Number,1/0).readOnly(!0),this.extendedMaximum=new d("extendedMaximum",Number,-1/0).readOnly(!0),this.actualMinimum=new d("actualMinimum",Number,1/0).readOnly(!0),this.actualMaximum=new d("actualMaximum",Number,-1/0).readOnly(!0),this._vizStore=null,this._actualMaximum=0,this._actualMinimum=0,this.constructor=function(){this._vizStore=new m},this.register=function(t){this._vizStore.has(t)||this._vizStore.set(t,{values:[],extendedRange:{absolute1:NaN,absolute2:NaN},containedRange:{absolute1:NaN,absolute2:NaN}})},this.unregister=function(t){this._vizStore.has(t)&&(this._vizStore.del(t),this.invalidate(this.processContainedRangePass))},this.provideContainedValues=function(t,e){var i=this._vizStore.get(t);i&&(i.values=e.slice(),this._vizStore.set(t,i),this.invalidate(this.processContainedValuesPass))},this.provideContainedRange=function(t,e,i){var n=this._vizStore.get(t);if(e>i){var o=i;i=e,e=o}n&&(n.containedRange.absolute1=e,n.containedRange.absolute2=i,this.invalidate(this.processContainedRangePass))},this.provideExtendedRange=function(t,e,i){var n=this._vizStore.get(t);if(e>i){var o=i;i=e,e=o}n&&(n.extendedRange.absolute1=e,n.extendedRange.absolute2=i,this.invalidate(this.processExtendedRangePass))},this.processContainedValues=function(){var t,e=this._vizStore.values(),i=[],n=1/0,o=-1/0;for(t=0;t<e.length;t++)i=i.concat(e[t].values);for(i=this.processValues(i),t=0;t<i.length;t++){var s=this.valueToAbsolute(i[t]);s<n&&(n=s),s>o&&(o=s)}this.setInternal("preliminaryMinimum",n),this.setInternal("preliminaryMaximum",o),this.invalidate("processContainedRangePass")},this.processContainedRange=function(){for(var t=this.getInternal("preliminaryMinimum"),e=this.getInternal("preliminaryMaximum"),i=this._vizStore.values(),n=0;n<i.length;n++)i[n].containedRange.absolute1<t&&(t=i[n].containedRange.absolute1),i[n].containedRange.absolute2>e&&(e=i[n].containedRange.absolute2);this.setInternal("containedMaximum",e),this.setInternal("containedMinimum",t),this.invalidate("processExtendedRangePass")},this.processExtendedRange=function(){for(var t=this.getInternal("containedMinimum"),e=this.getInternal("containedMaximum"),i=this._vizStore.values(),n=0;n<i.length;n++)i[n].extendedRange.absolute1<t&&(t=i[n].extendedRange.absolute1),i[n].extendedRange.absolute2>e&&(e=i[n].extendedRange.absolute2);this.setInternal("extendedMinimum",t),this.setInternal("extendedMaximum",e),this.invalidate("processActualRangePass")},this.processActualRange=function(){var t=this.getInternal("minimum"),e=this.getInternal("maximum"),i=this._actualMinimum,n=this._actualMaximum;isNaN(t)&&(t=this.getInternal("extendedMinimum")),isNaN(e)&&(e=this.getInternal("extendedMaximum")),this._actualMinimum=t,this._actualMaximum=e,this.setInternal("actualMaximum",e),this.setInternal("actualMinimum",t),this._actualMaximum===n&&this._actualMinimum===i||this.fire("relativeMapChanged",new l)},this.valueToAbsolute=function(t){throw new Error("Must implement valueToAbsolute method")},this.absoluteToValue=function(t){throw new Error("Must implement absoluteToValue method")},this.absoluteToRelative=function(t){return this._actualMaximum===this._actualMinimum?0:(t-this._actualMinimum)/(this._actualMaximum-this._actualMinimum)},this.relativeToAbsolute=function(t){return t*(this._actualMaximum-this._actualMinimum)+this._actualMinimum},this.processValues=function(t){throw new Error("Must implement processValues mehod")}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/axis/NumericAxis":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("splunk/mapping/axis/BaseAxis");return o(n.i,s,(function(t,e){this.valueToAbsolute=function(t){if(null===t||""===t)return NaN;var e=Number(t);return e>-1/0&&e<1/0?e:NaN},this.absoluteToValue=function(t){return t},this.processValues=function(t){for(var e=[],i=0;i<t.length;i++){var n=this.valueToAbsolute(t[i]);isNaN(n)||e.push(n)}return e}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/controls/CategoricalVisualLegend":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/jquery"),s=i("shim/leaflet"),a=i("contrib/jg_lib/Class"),r=i("contrib/jg_lib/graphics/Color"),l=i("contrib/jg_lib/properties/ObservableProperty"),h=i("splunk/charting/Legend"),u=i("splunk/mapping/controls/ControlBase"),c=i("splunk/palettes/ColorPalette"),p=i("util/svg");return a(n.i,u,(function(t,e){this.colorPalette=new l("colorPalette",c,null).onChange((function(t){this.invalidate("renderPass")})),this.legend=new l("legend",h,null).onChange((function(t){this.invalidate("renderPass")})),this.maxHeight=new l("maxHeight",Number,1/0).onChange((function(t){this.invalidate("renderPass")})),this.clip=new l("clip",Boolean,!1).onChange((function(t){this.invalidate("renderPass")})),this.selectedField=new l("selectedField",String,null).onChange((function(t){this.invalidate("renderPass")})),this.render=function(){var t=this.leafletControl.getContainer();if(o(t).empty(),this.getInternal("isVisible")){var e=this.getInternal("legend"),i=[];if(e&&(i=e.get("actualLabels")),i&&i.length>0){var n=16*i.length+20-12+5;n=Math.min(n,this.getInternal("maxHeight")-20-5),this.svg=p.createElement("svg").attr("height",n);var s=p.createElement("g").attr("class","svg-labels").attr("height",n),a=p.createElement("g").attr("class","svg-colors"),r=p.createElement("rect").attr("class","background").attr("height",n).attr("fill","rgb(255,255,255)").attr("fill-opacity","0.75");this.getInternal("clip")&&(this.svg.append('                        <defs>                            <clipPath id="choropleth-legend-clip">                                <rect class="clip" x="0" y="0"></rect>                            </clipPath>                        </defs>'),this.svg.find(".clip").attr("height",n),s.attr("clip-path","url(#choropleth-legend-clip)"),a.attr("clip-path","url(#choropleth-legend-clip)"));for(var l=this.getInternal("selectedField"),h=12,u="",c=0;c<i.length;c++){0==c&&(u=i[c]),i[c].length>u.length&&(u=i[c]);var d=20+16*c;s.append(this._drawRow({label:i[c],y:d},l)),a.append(this._drawColor(d-10,c,i[c],l))}h+=47+7*u.length,o(this.svg).attr("width",h),o(r).attr("width",h),n>165&&(o(t).css("overflow-y","scroll"),o(t).css("overflow-x","hidden"),o(t).css("height",165)),this.svg.append(r),this.svg.append(s),this.svg.append(a),o(t).append(this.svg),this._adjustLegend()}}},this.getContainer=function(){return this.leafletControl.getContainer()},this.createLeafletControl=function(){return new i(this.leafletOptions)},this._adjustLegend=function(){for(var t=o(this.svg[0]).find(".svg-label text"),e=t[0],i=0,n=0;n<t.length;n++)t[n].getBBox().width>i&&(i=(e=t[n]).getBBox().width);if(e){var s=47+i;o(this.svg).attr("width",s),o(this.svg).find(".background").attr("width",s),this.getInternal("clip")&&this.svg.find(".clip").attr("width",s)}},this._drawColor=function(t,e,i,n){var o=null!=n&&n!==""+i,s=this.getInternal("legend");if(s){var a=this.getInternal("colorPalette"),l="rgb(0,0,0)";if(a){var h=Math.max(s.getNumLabels()-1,0),u=h>0?s.getLabelIndex(i)/h:0;l=(a.getItem(u,h,i)||new r).toString("rgb")}var c=p.createElement("rect").attr("height",12).attr("width",16).attr("y",t).attr("x",12).attr("class","legend-color legend-elem").attr("stroke",o?"rgb(51,51,51)":l).attr("stroke-opacity",o?.1:1).attr("fill",o?"rgb(51,51,51)":l).attr("fill-opacity",o?.1:1).data("fieldName",i).css("cursor","default");return"rgb(255,255,255)"===l&&c.attr("stroke","rgb(204,204,204)"),c}},this._drawRow=function(t,e){var i,n,o=null!=e&&e!==""+t.label;return i=p.createElement("g").attr("class","svg-label legend-label legend-elem").data("fieldName",t.label),n=p.createElement("text").attr({y:t.y,x:35}).attr("fill-opacity",o?.3:1).text(t.label).css({"font-size":"12px",fill:"#333333","font-weight":"regular","padding-top":"12px",cursor:"default"}),i.append(n),i};var i=s.Control.extend({options:{position:"bottomright"},initialize:function(t){this.container=s.DomUtil.create("div","legend"),s.DomEvent.disableClickPropagation(this.container),o(this.container).css("pointer-events","visiblepainted")},onAdd:function(t){return this.container},getContainer:function(){return this.container}})}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/controls/ControlBase":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/async/MPassTarget"),a=i("contrib/jg_lib/events/MEventTarget"),r=i("contrib/jg_lib/events/MListenerTarget"),l=i("contrib/jg_lib/events/MObservableTarget"),h=i("contrib/jg_lib/properties/MPropertyTarget"),u=i("splunk/viz/MRenderTarget"),c=i("contrib/jg_lib/properties/ObservableProperty");return o(n.i,Object,(function(t,e){o.mixin(this,a,r,l,h,s,u),this.isVisible=new c("isVisible",Boolean,!0).onChange((function(t){this.invalidate("renderPass")})),this.constructor=function(){if(this.leafletControl=this.createLeafletControl(),!this.leafletControl)throw new Error("Value returned from createLeafletControl() must be non-null.")},this.render=function(){},this.createLeafletControl=function(){throw new Error("Must implement method createLeafletControl.")},this.onAddedToMap=function(t){this.map=t},this.onRemovedFromMap=function(t){this.map=null}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/controls/NumericalLegend":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/jquery"),s=i("require/underscore"),a=i("stubs/i18n"),r=i("shim/leaflet"),l=i("contrib/jg_lib/Class"),h=i("contrib/jg_lib/async/Pass"),u=i("contrib/jg_lib/graphics/Color"),c=i("contrib/jg_lib/properties/ObservableProperty"),p=i("splunk/mapping/axis/BaseAxis"),d=i("splunk/mapping/controls/ControlBase"),m=i("splunk/palettes/ColorPalette"),f=(i("splunk/palettes/ListColorPalette"),i("util/math_utils")),_=i("util/svg");return l(n.i,d,(function(t,e){this.computeExtendedPass=new h("computeExtended",.121),this.axis=new c("axis",p,null).onChange((function(t){t.target===this?(t.oldValue&&t.oldValue.unregister(this),t.newValue&&(t.newValue.register(this),this.invalidate("computeExtendedPass")),this.invalidate("renderPass")):!t.property||t.property!==t.target.containedMinimum&&t.property!==t.target.containedMaximum?!t.property||t.property!==t.target.extendedMinimum&&t.property!==t.target.extendedMaximum||this.invalidate("renderPass"):this.invalidate("computeExtendedPass")})),this.bins=new c("bins",Number,5).writeFilter((function(t){return isNaN(t)?5:Math.min(Math.max(Math.floor(t),1),9)})).onChange((function(t){this.invalidate("computeExtendedPass"),this.invalidate("renderPass")})),this.neutralPoint=new c("neutralPoint",Number,NaN).writeFilter((function(t){return t>-1/0&&t<1/0?t:NaN})).onChange((function(t){this.invalidate("computeExtendedPass"),this.invalidate("renderPass")})),this.colorPalette=new c("colorPalette",m,null).onChange((function(t){this.invalidate("renderPass")})),this.selectedField=new c("selectedField",String,null).onChange((function(t){this.invalidate("renderPass")})),this.constructor=function(t){this.leafletOptions=t||{},e.constructor.call(this)},this.computeExtended=function(){var t=this.get("axis");if(t){var e=t.get("containedMinimum"),i=t.get("containedMaximum");if(s.isFinite(e)&&s.isFinite(i)){var n,o,a,r,l,h,u=this.getInternal("bins"),c=this.getInternal("neutralPoint"),p=!s.isNaN(c),d=i>e,m=[1,2,2.5,3,4,5,6,7,7.5,8,9,10];if(d){var _=(i-e)/u;n=f.nearestPowerOfTen(_),o=(a=s(m).find((function(t){return t*n>=_})))*n}else o=f.nearestPowerOfTen(e||1);if(d)if(p)r=c-(h=o*(u/2)),l=c+h;else for(l=(r=Math.floor(e/n)*n)+u*o;l<i;)l=r+u*(o=(a=m[s(m).indexOf(a)+1]||a+1)*n);else r=e-(h=o*(u/2)),l=e+h;t.provideExtendedRange(this,r,l)}else t.provideExtendedRange(this,NaN,NaN)}},this.render=function(){var t=this.leafletControl.getContainer();if(o(t).empty(),this.getInternal("isVisible")){var e=this.get("axis");if(e){var i=e.get("extendedMinimum"),n=e.get("extendedMaximum");if(i!==1/0&&n!==-1/0){var s=this.getInternal("bins"),r=16*s+20-12+5,l=12;this.svg=_.createElement("svg").attr("height",r).attr("fill","rgba(0,0,0,1)");for(var h,c,p,d,m,g,v=_.createElement("g").attr("class","svg-labels").attr("height",r),y=_.createElement("g").attr("class","svg-colors"),b=_.createElement("rect").attr("class","background").attr("height",r).attr("fill","rgb(255,255,255)").attr("fill-opacity","0.75"),L=(n-i)/s,x=this.getInternal("colorPalette"),P=this.getInternal("selectedField"),w="",M=Math.max(s-1,0),C=0;C<s;C++)h=20+16*C,d=f.stripFloatingPointErrors(i+C*L),m=f.stripFloatingPointErrors(d+L),p=a.format_decimal(d)+" - "+a.format_decimal(m),x?(g=M>0?C/M:0,c=x.getItem(g,M)||new u):c=new u,v.append(this._drawRow({label:p,y:h,lower:d},P)),y.append(this._drawColor(h-10,c,d,P)),p.length>w.length&&(w=p);l+=47+7*w.length,o(this.svg).attr("width",l),o(b).attr("width",l),this.svg.append(b),this.svg.append(v),this.svg.append(y),o(t).append(this.svg),this._adjustLegend(l)}}}},this.getContainer=function(){return this.leafletControl.getContainer()},this.createLeafletControl=function(){return new i(this.leafletOptions)},this._adjustLegend=function(){for(var t=o(this.svg[0]).find(".svg-label text"),e=t[0],i=0,n=0;n<t.length;n++)t[n].getBBox().width>i&&(i=(e=t[n]).getBBox().width);if(e){var s=47+i;o(this.svg).attr("width",s),o(this.svg).find(".background").attr("width",s)}},this._drawRow=function(t,e){var i,n,o=null!=e&&e!==""+t.lower;return i=_.createElement("g").attr("class","svg-label legend-label legend-elem").data("fieldName",t.lower),n=_.createElement("text").attr({y:t.y,x:35}).attr("fill-opacity",o?.3:1).text(t.label).css({"font-size":"12px","font-weight":"regular",fill:"#333333","padding-top":"12px",cursor:"default"}),i.append(n),i},this._drawColor=function(t,e,i,n){var o=null!=n&&n!==""+i,s=e.toString("rgb"),a=_.createElement("rect").attr("height",12).attr("width",16).attr("y",t).attr("x",12).attr("fill",o?"rgb(51,51,51)":s).attr("fill-opacity",o?.1:1).attr("class","legend-color legend-elem").data("fieldName",i).attr("stroke",o?"rgb(51,51,51)":s).attr("stroke-opacity",o?.1:1).css("cursor","default");return"rgb(255,255,255)"===s&&a.attr("stroke","rgb(204,204,204)"),a};var i=r.Control.extend({options:{position:"bottomright"},initialize:function(t){this.container=r.DomUtil.create("div","legend"),o(this.container).css("pointer-events","visiblepainted")},onAdd:function(t){return this.container},getContainer:function(){return this.container}})}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/controls/ResetZoomControl":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/jquery"),s=i("require/underscore"),a=i("shim/leaflet"),r=i("contrib/jg_lib/Class"),l=i("splunk/mapping/LatLon"),h=i("splunk/mapping/controls/ControlBase");i("splunk/vectors/Rect"),i("splunk/vectors/Text"),i("splunk/vectors/Viewport");return r(n.i,h,(function(t,e){this.constructor=function(t){this.leafletOptions=t,e.constructor.call(this)},this.setOriginalZoom=function(t){this.leafletControl.originalZoom=parseInt(t,10)},this.setOriginalCenter=function(t){var e=(t=(t=t.replace("(","")).replace(")","")).split(","),i=parseFloat(e[0]),n=parseFloat(e[1]);this.leafletControl.originalCenter=new l(i,n)},this.createLeafletControl=function(){return new i(this.leafletOptions)},this.onAddedToMap=function(t){e.onAddedToMap.call(this,t),this.leafletControl.setMap(t)};var i=a.Control.extend({options:{position:"topleft"},linkTemplate:'<a class="leaflet-reset-zoom" href="#" title="<%= resetZoomText %>" style="width: 15px; height:15px; padding: 2px; "> <svg version="1.1"                    id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                    width="15px" height="15px" viewBox="0 0 15 15" enable-background="new 0 0 15 15" xml:space="preserve">                    <g>                        <ellipse fill="#333333" cx="7.586" cy="7.287" rx="2.313" ry="2.33"/>                        <path fill="#333333" d="M7.586,13.525c-3.384,0-6.136-2.753-6.136-6.136s2.753-6.136,6.136-6.136c3.385,0,6.136,2.753,6.136,6.136                            S10.969,13.525,7.586,13.525z M7.586,2.712c-2.579,0-4.677,2.098-4.677,4.677s2.098,4.677,4.677,4.677                            c2.58,0,4.677-2.098,4.677-4.677S10.165,2.712,7.586,2.712z"/>                        <rect y="6.429" fill="#333333" width="2.143" height="2.143"/>                        <rect x="12.857" y="6.429" fill="#333333" width="2.143" height="2.143"/>                        <rect x="6.429" y="12.857" fill="#333333" width="2.143" height="2.143"/>                        <rect x="6.429" fill="#333333" width="2.143" height="2.143"/>                    </g>                </svg></a>',initialize:function(t){this._button={},this.setButton();var e=s("Reset to original position and zoom").t();if(this.linkTemplate=s.template(this.linkTemplate),this.linkTemplate=this.linkTemplate({resetZoomText:e}),this.originalZoom=t.originalZoom?parseInt(t.originalZoom,10):2,t.originalCenter){this.originalCenter=t.originalCenter.replace("(",""),this.originalCenter=this.originalCenter.replace(")","");var i=this.originalCenter.split(","),n=parseFloat(i[0]),o=parseFloat(i[1]);this.originalCenter=new l(n,o)}else this.originalZoom=2},onAdd:function(t){this._map=t;var e=a.DomUtil.create("div","leaflet-reset-zoom leaflet-control-zoom");return this._container=e,this._update(),this._container},setButton:function(){var t={text:s("Reset Zoom").t()};this._button=t,this._update()},_update:function(){this._map&&(this._container.innerHTML="",this._makeButton(this._button))},_makeButton:function(t){var e=a.DomUtil.create("div","leaflet-reset-zoom",this._container);""!==t.text&&o(e).append(this.linkTemplate),o(e).find("a").on("focus",(function(){o(this).css("background-color","rgba(212, 221, 254, 0.75)")})),o(e).find("a").on("focusout",(function(){o(this).css("background-color","rgba(255, 255, 255, 0.75")})),o(e).on("click",function(t){t.stopPropagation(),t.preventDefault(),this.map.set("center",this.originalCenter),this.map.set("zoom",this.originalZoom)}.bind(this)),o(e).dblclick((function(t){t.stopPropagation()}))},setMap:function(t){this.map=t}})}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/layers/ChoroplethLayer":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("require/underscore"),s=i("contrib/jg_lib/Class"),a=i("contrib/jg_lib/async/Pass"),r=i("contrib/jg_lib/events/Event"),l=i("contrib/jg_lib/events/EventData"),h=i("contrib/jg_lib/geom/Rectangle"),u=i("contrib/jg_lib/graphics/Color"),c=i("contrib/jg_lib/properties/ObservableProperty"),p=(i("contrib/jg_lib/utils/NumberUtil"),i("contrib/jg_lib/utils/ObjectUtil")),d=i("splunk/mapping/LatLon"),m=i("splunk/mapping/LatLonBounds"),f=i("splunk/mapping/axis/BaseAxis"),_=i("splunk/mapping/layers/LayerBase"),g=i("splunk/mapping/layers/VectorLayerBase"),v=i("splunk/palettes/ColorPalette"),y=(i("splunk/palettes/ListColorPalette"),i("splunk/utils/DataUtil")),b=i("splunk/vectors/Path"),L=i("splunk/viz/MDataTarget"),x=i("util/math_utils");return s(n.i,g,(function(t,e){s.mixin(this,L),t.parseFieldTypes=function(t,e){var i=e?o(t).without(e):t;return{count:i[0],geom:i[1],area:i.length>2?i[2]:null}};this.computeContainedRangePass=new a("computeContainedRange",.111),this.rendered=new r("rendered",l),this.axis=new c("axis",f,null).onChange((function(t){t.target===this?(t.oldValue&&t.oldValue.unregister(this),t.newValue&&t.newValue.register(this),this.invalidate("processDataPass"),this.invalidate("computeContainedRangePass")):!t.property||t.property!==t.target.preliminaryMinimum&&t.property!==t.target.preliminaryMaximum?!t.property||t.property!==t.target.extendedMinimum&&t.property!==t.target.extendedMaximum?!t.property||t.property!==t.target.actualMinimum&&t.property!==t.target.actualMaximum||this.invalidate("renderPass"):this.invalidate("renderDataPass"):this.invalidate("computeContainedRangePass")})),this.bins=new c("bins",Number,5).writeFilter((function(t){return isNaN(t)?5:Math.min(Math.max(Math.floor(t),1),9)})).onChange((function(t){this.invalidate("renderDataPass")})),this.neutralPoint=new c("neutralPoint",Number,NaN).writeFilter((function(t){return t>-1/0&&t<1/0?t:NaN})).onChange((function(t){this.invalidate("computeContainedRangePass")})),this.sharedMinimum=new c("sharedMinimum",Number,-1/0).writeFilter((function(t){return t>-1/0&&t<1/0?t:-1/0})).onChange((function(t){this.invalidate("computeContainedRangePass")})),this.sharedMaximum=new c("sharedMaximum",Number,1/0).writeFilter((function(t){return t>-1/0&&t<1/0?t:1/0})).onChange((function(t){this.invalidate("computeContainedRangePass")})),this.colorPalette=new c("colorPalette",v,null).onChange((function(t){this.invalidate("renderDataPass")})),this.shapeOpacity=new c("shapeOpacity",Number,.75).writeFilter((function(t){return isNaN(t)?.75:t>=0?Math.min(t,1):0})).onChange((function(t){this.invalidate("renderDataPass")})),this.borderColor=new c("borderColor",u,u.fromNumber(15329769)).readFilter((function(t){return t.clone()})).writeFilter((function(t){return t?t.clone().normalize():u.fromNumber(15329769)})).changeComparator((function(t,e){return!t.equals(e)})).onChange((function(t){this.invalidate("renderDataPass")})),this.borderOpacity=new c("borderOpacity",Number,.75).writeFilter((function(t){return isNaN(t)?.75:t>=0?Math.min(t,1):0})).onChange((function(t){this.invalidate("renderDataPass")})),this.borderWidth=new c("borderWidth",Number,1).writeFilter((function(t){return t<1/0?Math.max(t,0):0})).onChange((function(t){this.invalidate("renderDataPass")})),this.showDensity=new c("showDensity",Boolean,!1).onChange((function(t){this.invalidate("processDataPass")})),this.wrapX=new c("wrapX",Boolean,!0).onChange((function(t){this.invalidate("renderPass")})),this.wrapY=new c("wrapY",Boolean,!1).onChange((function(t){this.invalidate("renderPass")})),this.featureIdFieldName=new c("featureIdFieldName",String,"").onChange((function(t){this.invalidate("processDataPass")})),this.selectedField=new c("selectedField",String,null).onChange((function(t){this.invalidate("renderDataPass")})),this._colorPalette=null,this._polygonMap=null,this._polygonList=null,this._labelValues=[],this.constructor=function(){e.constructor.call(this),this._polygonMap={},this._polygonList=[]},this.getLatLonBounds=function(t){if(null!=t&&!(t instanceof d))throw new Error("Parameter center must be of type "+s.getName(d)+".");this.validate();for(var e,i=new m(1/0,1/0,-1/0,-1/0),n=this._polygonList,o=0,a=n.length;o<a;o++)e=n[o].getLatLonBounds(),i.expand(e.getSW().normalize(t)),i.expand(e.getNE().normalize(t));return i.isFinite()?i:null},this.processDataOverride=function(e,n){this.invalidate("renderPass");var o,s,a=this._polygonMap,r=this._polygonMap={},l=this._polygonList=[],h=e.length,u=n.length,c=[],d=this.getInternal("axis");if(h>0&&u>1){var m,f,_,g,v,b=this.getInternal("showDensity"),L=this.vectorContainer,x=this.getInternal("featureIdFieldName"),P=t.parseFieldTypes(n,x),w=P.count,M=P.geom,C=b?P.area:null;for(o=0;o<h;o++)if(null!=(m=e[o])){if(_=m[M],f=x&&m[x]?m[x]:_,g=null!=m[w]?m[w]:"NULL",c.push(g),C?y.parseNumber(m[C]):0,(v=a[f])&&v.geom!==_&&(v.dispose(),v=null,delete a[f]),!v){if(!(v=i.fromJSON(_)))continue;v.appendTo(L)}delete a[f],r[f]=v,l.push(v),v.data=m,v.count=g,v.geom=_,v.fields=n,v.tooltipFields=x&&m[x]?[x,w]:[w],v.valueFieldName=w}d?(this._labelValues=null,d.provideContainedValues(this,c)):this._labelValues=c}for(s in a)p.has(a,s)&&a[s].dispose()},this.computeContainedRange=function(){var t=this.get("axis");if(t){var e=this.getInternal("sharedMinimum"),i=this.getInternal("sharedMaximum"),n=o.isFinite(e)&&o.isFinite(i),s=n?e:t.get("preliminaryMinimum"),a=n?i:t.get("preliminaryMaximum");if(o.isFinite(s)&&o.isFinite(a)){var r=this.getInternal("neutralPoint"),l=!o.isNaN(r);if(a!==s||l&&s!==r)if(l){var h=Math.max(r-s,a-r);t.provideContainedRange(this,r-h,r+h)}else n?t.provideContainedRange(this,s,a):t.provideContainedRange(this,NaN,NaN);else t.provideContainedRange(this,NaN,NaN)}else t.provideContainedRange(this,NaN,NaN)}},this.updateLegendLabelsOverride=function(t,e){return this.getInternal("axis")?null:this._labelValues},this.renderDataOverride=function(t,e,i){var n=this.getInternal("axis");if(n||i){var o,s=this.getInternal("shapeOpacity"),a=this.getInternal("borderColor"),r=this.getInternal("borderOpacity"),h=this.getInternal("borderWidth"),c=this.getInternal("colorPalette"),p=this._polygonList;if(n)var d=n.get("extendedMinimum"),m=n.get("extendedMaximum");var f=this.getInternal("bins"),_=this.get("selectedField");o=n?f:i.getNumLabels();for(var g,v,y,b,L,P=Math.max(o-1,0),w=0,M=p.length;w<M;w++)v=p[w],c?n?(y=n.valueToAbsolute(v.count),b=Math.floor(x.stripFloatingPointErrors((y-d)/((m-d)/o))),g=P>0?b/P:0,_?(L=n.valueToAbsolute(_),b===Math.floor(x.stripFloatingPointErrors((L-d)/((m-d)/o)))?v.fillColor((c.getItem(g,P,String(y))||new u).toNumber()):v.fillColor(13750737)):isNaN(y)?v.fillColor(13750737):v.fillColor((c.getItem(g,P,String(y))||new u).toNumber())):_?(y=v.count)===_?(b=i.getLabelIndex(y),g=P>0?b/P:0,v.fillColor((c.getItem(g,P,String(y))||new u).toNumber())):v.fillColor(13750737):(y=v.count,b=i.getLabelIndex(y),g=P>0?b/P:0,v.fillColor((c.getItem(g,P,String(y))||new u).toNumber())):v.fillColor(0),v.fillOpacity(s),h>0?(v.strokeColor(a.toNumber()),v.strokeOpacity(r),v.strokeWidth(h)):(v.strokeColor(NaN),v.strokeOpacity(NaN),v.strokeWidth(NaN));this.isValid("renderPass")&&this.fire("rendered",new l)}},this.renderOverride=function(t){var i=this.getInternal("axis");e.renderOverride.call(this,t);for(var n,o,s,a,r,h,u,c,p,d=t.leafletMap,m=d.getCenter(),f=this.getInternal("wrapX"),_=this.getInternal("wrapY"),g=this.vectorBounds,v=g.minX,y=g.minY,b=g.maxX,L=g.maxY,x=this._polygonList,P=0,w=x.length;P<w;P++){var M=x[P].count;M=i?i.absoluteToRelative(M):0,(n=x[P]).render(d),o=n.getPixelBounds(),a=(s=n.getLatLonBounds().getCenter()).toLeaflet(),r=s.toLeaflet(),f&&(r.lng-=m.lng,r.lng%=360,r.lng>180?r.lng-=360:r.lng<-180&&(r.lng+=360),r.lng+=m.lng),_&&(r.lat-=m.lat,r.lat%=180,r.lat>90?r.lat-=180:r.lat<-90&&(r.lat+=180),r.lat+=m.lat),n.tooltipLatLng=r,h=d.latLngToLayerPoint(a),c=(u=d.latLngToLayerPoint(r)).x-h.x,p=u.y-h.y,n.translate(c,p),c+o.x+o.width<v||c+o.x>b||p+o.y+o.height<y||p+o.y>L||M<0||M>1?n.display("none"):n.display(null)}this.fire("rendered",new l)};var i=s(b,(function(t,e){t.fromJSON=function(e){if(null==e)return null;if("string"==typeof e&&(e=JSON.parse(e)),!e||"MultiPolygon"!==e.type)return null;var o=e.coordinates;return o&&(o=i(o))?(n(o),new t(o)):null};var i=function(t,e,n){if(!t)return null;var o=t.length;if(!o)return null;if(e||(e=[]),2===o&&"number"==typeof t[0]&&"number"==typeof t[1])n?n.push(new d(t[1],t[0])):e.push([new d(t[1],t[0])]);else{n=[];for(var s=0;s<o;s++)i(t[s],e,n);n.length>0&&e.push(n)}return e.length>0?e:null},n=function(t){var e,i,n,o,s,a=t.length,r=0,l=0;for(n=0;n<a;n++)for(o=0,s=(e=t[n]).length;o<s;o++)r+=(i=e[o]).lon,l++;var h=r/l;for(n=0;n<a;n++)if((i=(e=t[n])[0]).lon-h>180)for(o=0,s=e.length;o<s;o++)(i=e[o]).lon-=360;else if(i.lon-h<-180)for(o=0,s=e.length;o<s;o++)(i=e[o]).lon+=360};this.magnitude=0,this.scale=0,this.data=null,this.fields=null,this.tooltipFields=null,this.tooltipLatLng=null,this.tooltipOffsetRadius=0,this._coordinates=null,this._bounds=null,this._boundsPixels=new h(NaN,NaN,NaN,NaN),this.constructor=function(t){if(null==t)throw new Error("Parameter coordinates must be non-null.");e.constructor.call(this),this._coordinates=t,this.element[_.METADATA_KEY]=this},this.getLatLonBounds=function(){var t=this._bounds;if(!t){t=this._bounds=new m(1/0,1/0,-1/0,-1/0);var e,i,n,o,s,a=this._coordinates;for(i=0,n=a.length;i<n;i++)for(o=0,s=(e=a[i]).length;o<s;o++)t.expand(e[o])}return t},this.getPixelBounds=function(){return this._boundsPixels},this.render=function(t){var e=this._coordinates,i=this.getLatLonBounds(),n=t.latLngToLayerPoint(i.getNW().toLeaflet()),o=t.latLngToLayerPoint(i.getSE().toLeaflet()),s=new h(n.x,n.y,o.x-n.x,o.y-n.y);if(!s.equals(this._boundsPixels)){var a,r,l,u,c,p,d;for(this._boundsPixels=s,this.beginPath(),u=0,c=e.length;u<c;u++){for(a=e[u],r=t.latLngToLayerPoint(a[0].toLeaflet()),this.moveTo(r.x,r.y),p=1,d=a.length;p<d;p++)l=t.latLngToLayerPoint(a[p].toLeaflet()),this.lineTo(l.x,l.y);this.lineTo(r.x,r.y)}this.endPath()}},this.dispose=function(){this.element[_.METADATA_KEY]=null,e.dispose.call(this)}}))}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/layers/LayerBase":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/async/MPassTarget"),a=i("contrib/jg_lib/events/MEventTarget"),r=i("contrib/jg_lib/events/MListenerTarget"),l=i("contrib/jg_lib/events/MObservableTarget"),h=i("contrib/jg_lib/properties/MPropertyTarget"),u=i("contrib/jg_lib/properties/Property"),c=i("contrib/jg_lib/utils/FunctionUtil"),p=i("splunk/viz/MRenderTarget");return o(n.i,Object,(function(t,e){o.mixin(this,a,r,l,h,s,p),t.METADATA_KEY="__splunk_mapping_layers_LayerBase_metadata",this.map=new u("map",Object,null).readOnly(!0),this.leafletLayer=null,this.constructor=function(){if(this._map_boundsChanged=c.bind(this._map_boundsChanged,this),this.leafletLayer=this.createLeafletLayer(),!this.leafletLayer)throw new Error("Value returned from createLeafletLayer() must be non-null.")},this.render=function(){if(!this.isValid("renderPass")){var t=this.getInternal("map");t&&this.renderOverride(t),this.markValid("renderPass")}},this.createLeafletLayer=function(){throw new Error("Must implement method createLeafletLayer.")},this.renderOverride=function(t){},this.onAddedToMap=function(t){this.setInternal("map",t),t.on("boundsChanged",this._map_boundsChanged),this.invalidate("renderPass")},this.onRemovedFromMap=function(t){t.off("boundsChanged",this._map_boundsChanged),this.setInternal("map",null)},this._map_boundsChanged=function(t){this.invalidate("renderPass")}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/layers/PieMarkerLayer":function(t,e,i){var n;void 0===(n=function(t,e,n){i("shim/leaflet");var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/events/Event"),a=i("contrib/jg_lib/events/EventData"),r=i("contrib/jg_lib/graphics/Color"),l=i("contrib/jg_lib/properties/ObservableProperty"),h=i("contrib/jg_lib/utils/NumberUtil"),u=i("splunk/mapping/LatLon"),c=i("splunk/mapping/LatLonBounds"),p=i("splunk/mapping/layers/LayerBase"),d=i("splunk/mapping/layers/VectorLayerBase"),m=i("splunk/palettes/ColorPalette"),f=i("splunk/palettes/ListColorPalette"),_=i("splunk/utils/DataUtil"),g=i("splunk/vectors/Group"),v=i("splunk/vectors/Wedge"),y=i("splunk/viz/MDataTarget");return o(n.i,d,(function(t,e){o.mixin(this,y),this.rendered=new s("rendered",a),this.markerColorPalette=new l("markerColorPalette",m,new f([r.fromNumber(52224),r.fromNumber(13421568),r.fromNumber(13369344)],!0)).onChange((function(t){this.invalidate("renderDataPass")})),this.markerOpacity=new l("markerOpacity",Number,1).writeFilter((function(t){return isNaN(t)?1:t>=0&&t<=1/0?Math.min(t,1):0})).onChange((function(t){this.invalidate("renderDataPass")})),this.markerMinSize=new l("markerMinSize",Number,10).writeFilter((function(t){return t>=0&&t<1/0?t:0})).onChange((function(t){this.invalidate("renderDataPass")})),this.markerMaxSize=new l("markerMaxSize",Number,50).writeFilter((function(t){return t>=0&&t<1/0?t:0})).onChange((function(t){this.invalidate("renderDataPass")})),this.wrapX=new l("wrapX",Boolean,!0).onChange((function(t){this.invalidate("renderPass")})),this.wrapY=new l("wrapY",Boolean,!1).onChange((function(t){this.invalidate("renderPass")})),this._seriesList=null,this._markerList=null,this.constructor=function(){e.constructor.call(this),this._seriesList=[],this._markerList=[]},this.getLatLonBounds=function(t){if(null!=t&&!(t instanceof u))throw new Error("Parameter center must be of type "+o.getName(u)+".");this.validate();for(var e=new c(1/0,1/0,-1/0,-1/0),i=this._markerList,n=0,s=i.length;n<s;n++)e.expand(i[n].latLon.normalize(t));return e.isFinite()?e:null},this.processDataOverride=function(t,e){var o,s,a,r,l,c,p,m=this._seriesList,f=0,g=this._markerList,v=0,y=t.length,b=e.length;if(y>0&&b>2){var L,x,P,w,M,C,T,k,A,E,D=this.vectorContainer,N=e[0],S=e[1],z=1/0,B=-1/0;for(c=2;c<b;c++)L=e[c],f<m.length?o=m[f]:(o=new i,m.push(o)),o.name=L,f++;for(c=0;c<y;c++)if(null!=(x=t[c])&&(P=_.parseNumber(x[N]),w=_.parseNumber(x[S]),!isNaN(P)&&!isNaN(w))){for(v<g.length?s=g[v]:((s=new n).appendTo(D),g.push(s)),a=s.sliceList,r=0,T=0,p=0;p<f;p++)o=m[p],M=_.parseNumber(x[o.name]),isNaN(M)||M<=0||(r<a.length?l=a[r]:((l=new d).appendTo(s),a.push(l)),l.series=o,l.value=M,T+=M,r++);if(0!==r){for(s.latLon=new u(P,w),s.data=x,s.fields=e,s.magnitude=T,T<z&&(z=T),T>B&&(B=T),k=0,A=0,E=0,p=0;p<r;p++)A=E,E=(k+=(l=a[p]).value)/T*360,l.startAngle=A-90,l.arcAngle=E-A;for(p=a.length-1;p>=r;p--)(l=a.pop()).dispose();v++}}for(C=B-z,c=0;c<v;c++)(s=g[c]).scale=C>0?h.minMax((s.magnitude-z)/C,0,1):1/v}for(c=g.length-1;c>=v;c--)(s=g.pop()).dispose();for(c=m.length-1;c>=f;c--)m.pop()},this.updateLegendLabelsOverride=function(t,e){for(var i=this._seriesList,n=i.length,o=n>0?new Array(n):null,s=0;s<n;s++)o[s]=i[s].name;return o},this.renderDataOverride=function(t,e,i){this.invalidate("renderPass");var n,o,s,a,l,u,c,p,d,m,f,_=this._seriesList,g=_.length,v=this.getInternal("markerColorPalette"),y=this.getInternal("markerOpacity"),b=this.getInternal("markerMinSize"),L=this.getInternal("markerMaxSize"),x=this._markerList,P=x.length;for(s=i?i.getNumLabels():g,m=Math.max(s-1,0),p=0;p<g;p++)n=_[p],o=i?i.getLabelIndex(n.name):p,f=m>0?o/m:0,n.color=v?(v.getItem(f,m,n.name)||new r).toNumber():0;for(p=0;p<P;p++)for(u=(l=(a=x[p]).sliceList).length,a.radius=Math.round(h.interpolate(b,L,a.scale))/2,a.tooltipOffsetRadius=a.radius,a.display("none"),d=0;d<u;d++)(c=l[d]).fillColor(c.series.color),c.fillOpacity(y),c.draw(0,0,a.radius,a.radius,c.startAngle,c.arcAngle)},this.renderOverride=function(t){e.renderOverride.call(this,t);for(var i,n,o,s=t.leafletMap,r=s.getCenter(),l=this.getInternal("wrapX"),h=this.getInternal("wrapY"),u=this.vectorBounds,c=u.minX,p=u.minY,d=u.maxX,m=u.maxY,f=this._markerList,_=0,g=f.length;_<g;_++)n=(i=f[_]).latLon.toLeaflet(),l&&(n.lng-=r.lng,n.lng%=360,n.lng>180?n.lng-=360:n.lng<-180&&(n.lng+=360),n.lng+=r.lng),h&&(n.lat-=r.lat,n.lat%=180,n.lat>90?n.lat-=180:n.lat<-90&&(n.lat+=180),n.lat+=r.lat),i.tooltipLatLng=n,o=s.latLngToLayerPoint(n),i.translate(o.x,o.y),o.x+i.radius<c||o.x-i.radius>d||o.y+i.radius<p||o.y-i.radius>m?i.display("none"):i.display(null);this.fire("rendered",new a)};var i=o(Object,(function(t,e){this.name=null,this.color=0,this.constructor=function(){}})),n=o(g,(function(t,e){this.sliceList=null,this.latLon=null,this.data=null,this.fields=null,this.magnitude=0,this.scale=0,this.radius=0,this.tooltipLatLng=null,this.tooltipOffsetRadius=0,this.constructor=function(){e.constructor.call(this),this.element[p.METADATA_KEY]=this,this.sliceList=[]},this.dispose=function(){for(var t=this.sliceList,i=t.length-1;i>=0;i--)t[i].dispose();this.element[p.METADATA_KEY]=null,e.dispose.call(this)}})),d=o(v,(function(t,e){this.series=null,this.value=0,this.startAngle=0,this.arcAngle=0,this.constructor=function(){e.constructor.call(this)}}))}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/layers/VectorLayerBase":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/leaflet"),s=i("contrib/jg_lib/Class"),a=i("contrib/jg_lib/geom/Rectangle"),r=i("contrib/jg_lib/utils/FunctionUtil"),l=i("splunk/mapping/layers/LayerBase"),h=i("splunk/vectors/Group"),u=i("splunk/vectors/Viewport");return s(n.i,l,(function(t,e){this.vectorContainer=null,this.vectorBounds=null,this._isZooming=!1,this.constructor=function(){e.constructor.call(this),this._leafletMap_move=r.bind(this._leafletMap_move,this),this._leafletMap_zoomstart=r.bind(this._leafletMap_zoomstart,this),this._leafletMap_zoomend=r.bind(this._leafletMap_zoomend,this),this.vectorContainer=this.leafletLayer.vectorContainer,this.vectorBounds={minX:0,minY:0,maxX:0,maxY:0}},this.createLeafletLayer=function(){return new i},this.renderOverride=function(t){this._isZooming||this.vectorContainer.display(null)},this.onAddedToMap=function(t){e.onAddedToMap.call(this,t);var i=t.leafletMap;this.vectorContainer.hasSVG?i.on("move",this._leafletMap_move):i.on("moveend",this._leafletMap_move),i.on("viewreset",this._leafletMap_move),i.on("zoomstart",this._leafletMap_zoomstart),i.on("zoomend",this._leafletMap_zoomend),this.vectorBounds=i._vectorLayerBounds,this.vectorContainer.display("none")},this.onRemovedFromMap=function(t){var i=t.leafletMap;this.vectorContainer.hasSVG?i.off("move",this._leafletMap_move):i.off("moveend",this._leafletMap_move),i.off("viewreset",this._leafletMap_move),i.off("zoomstart",this._leafletMap_zoomstart),i.off("zoomend",this._leafletMap_zoomend),this.vectorBounds={minX:0,minY:0,maxX:0,maxY:0},e.onRemovedFromMap.call(this,t)},this._leafletMap_move=function(t){this.invalidate("renderPass")},this._leafletMap_zoomstart=function(t){this._isZooming=!0,this.vectorContainer.display("none")},this._leafletMap_zoomend=function(t){this._isZooming=!1,this.invalidate("renderPass")};var i=o.Class.extend({includes:[o.Mixin.Events],options:{clickable:!0},vectorContainer:null,initialize:function(t){o.Util.setOptions(this,t),this.vectorContainer=new h},onAdd:function(t){this._map=t,t._initVectorLayerViewport(),this.vectorContainer.appendTo(t._vectorLayerViewport)},onRemove:function(t){this._map=null,this.vectorContainer.remove()}});o.Map.include({_initVectorLayerViewport:function(){if(!this._vectorLayerRoot){var t=this._vectorLayerRoot=document.createElement("div");t.style.position="absolute",this._panes.overlayPane.appendChild(t);var e=this._vectorLayerViewport=new u;e.appendTo(t),this._vectorLayerBounds={minX:0,minY:0,maxX:0,maxY:0},e.hasSVG?this.on("move",this._updateVectorLayerBounds):this.on("moveend",this._updateVectorLayerBounds),this._updateVectorLayerBounds()}},_updateVectorLayerBounds:function(){var t=this._vectorLayerRoot,e=this._vectorLayerViewport,i=this._vectorLayerBounds,n=e.hasSVG?0:.5,s=this.getSize(),r=o.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(s.multiplyBy(n)),l=r.add(s.multiplyBy(1+2*n)),h=l.x-r.x,u=l.y-r.y;i.minX=r.x,i.minY=r.y,i.maxX=l.x,i.maxY=l.y,o.DomUtil.setPosition(t,r),e.width(h),e.height(u),e.viewBox(new a(r.x,r.y,h,u))}})}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/parsers/LatLonBoundsParser":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("splunk/mapping/LatLonBounds"),a=i("splunk/parsers/NumberParser"),r=i("splunk/parsers/Parser"),l=i("splunk/parsers/ParseUtils");return o(n.i,r,(function(t,e){var i=null;t.getInstance=function(){return i||(i=new t),i},this.numberParser=null,this.constructor=function(){this.numberParser=a.getInstance()},this.stringToValue=function(t){var e=l.prepareTuple(t);if(!e)return null;var i=new s,n=e.length;return n>0&&(i.s=this.numberParser.stringToValue(e[0])),n>1&&(i.w=this.numberParser.stringToValue(e[1])),n>2&&(i.n=this.numberParser.stringToValue(e[2])),n>3&&(i.e=this.numberParser.stringToValue(e[3])),i},this.valueToString=function(t){var e=t instanceof s?t:null;if(!e)return null;var i="";return i+=this.numberParser.valueToString(e.s)+",",i+=this.numberParser.valueToString(e.w)+",",i+=this.numberParser.valueToString(e.n)+",","("+(i+=this.numberParser.valueToString(e.e))+")"}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/parsers/LatLonParser":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("splunk/mapping/LatLon"),a=i("splunk/parsers/NumberParser"),r=i("splunk/parsers/Parser"),l=i("splunk/parsers/ParseUtils");return o(n.i,r,(function(t,e){var i=null;t.getInstance=function(){return i||(i=new t),i},this.numberParser=null,this.constructor=function(){this.numberParser=a.getInstance()},this.stringToValue=function(t){var e=l.prepareTuple(t);if(!e)return null;var i=new s,n=e.length;return n>0&&(i.lat=this.numberParser.stringToValue(e[0])),n>1&&(i.lon=this.numberParser.stringToValue(e[1])),i},this.valueToString=function(t){var e=t instanceof s?t:null;if(!e)return null;var i="";return i+=this.numberParser.valueToString(e.lat)+",","("+(i+=this.numberParser.valueToString(e.lon))+")"}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/mapping/utils/GeoJsonUtils":function(t,e,i){var n;void 0===(n=function(t,e,n){return i("contrib/jg_lib/Class")(n.i,(function(t){t.createFromBoundingBox=function(t,e,i,n){return t=Number(t),e=Number(e),i=Number(i),{type:"MultiPolygon",coordinates:[[[[e,t],[n=Number(n),t],[n,i],[e,i]]]]}}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/palettes/FieldColorPalette":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/graphics/Color"),a=i("contrib/jg_lib/properties/ObservableObjectProperty"),r=i("contrib/jg_lib/properties/ObservableProperty"),l=i("contrib/jg_lib/utils/ObjectUtil"),h=i("splunk/palettes/ColorPalette");return o(n.i,h,(function(t,e){this.fieldColors=new a("fieldColors",s,{}).itemReadFilter((function(t){return t.clone()})).itemWriteFilter((function(t){return t?t.clone().normalize():new s})).itemChangeComparator((function(t,e){return!t.equals(e)})),this.defaultColorPalette=new r("defaultColorPalette",h,null),this.constructor=function(t,i){e.constructor.call(this),null!=t&&this.set("fieldColors",t),null!=i&&this.set("defaultColorPalette",i)},this.getItemOverride=function(t,e,i,n){if(null!=n){var o=l.get(t.fieldColors,""+n);if(o)return o.clone()}var s=t.defaultColorPalette;return s?s.getItem(e,i,n):null}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Group":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("splunk/vectors/VectorElement");return o(n.i,s,(function(t,e){this.constructor=function(){e.constructor.call(this)};var i=o((function(t){this.constructor=function(){e.constructor.call(this,"g")}})),n=o((function(t){this.constructor=function(){e.constructor.call(this,"group"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize="1,1"}}));s.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Path":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("splunk/vectors/Shape"),a=i("splunk/vectors/VectorElement");return o(n.i,s,(function(t,e){this.constructor=function(){e.constructor.call(this)},this.beginPath=function(){return this},this.endPath=function(){return this},this.moveTo=function(t,e){return this},this.lineTo=function(t,e){return this},this.curveTo=function(t,e,i,n){return this};var i=o((function(t){this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null,this.constructor=function(){e.constructor.call(this,"path")},this.beginPath=function(){return null!=this._pathData&&this.endPath(),this._pathData="",this},this.endPath=function(){return null==this._pathData||(this._pathData?("M"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" Z"),this.element.setAttribute("d",this._pathData.substring(1))):this.element.removeAttribute("d"),this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null),this},this.moveTo=function(t,e){return null==this._pathData||(t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,this._pathData&&"M"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" Z"),"M"!==this._lastCommand&&(this._lastCommand="M"),this._penX=t,this._penY=e,this._startX=t,this._startY=e,this._pathData+=" M"+t+","+e),this},this.lineTo=function(t,e){return null==this._pathData||(t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,this._lastCommand||this.moveTo(0,0),"L"!==this._lastCommand?(this._lastCommand="L",this._pathData+=" L"):this._pathData+=" ",this._penX=t,this._penY=e,this._pathData+=t+","+e),this},this.curveTo=function(t,e,i,n){return null==this._pathData||(t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,i=null!=i&&i>-1/0&&i<1/0?i:0,n=null!=n&&n>-1/0&&n<1/0?n:0,this._lastCommand||this.moveTo(0,0),"Q"!==this._lastCommand?(this._lastCommand="Q",this._pathData+=" Q"):this._pathData+=" ",this._penX=i,this._penY=n,this._pathData+=t+","+e+" "+i+","+n),this}})),n=o((function(t){this._pathElement=null,this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null,this.constructor=function(){e.constructor.call(this,"shape"),this._pathElement=this.createElement("path"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize="64,64",this.element.appendChild(this._pathElement)},this.dispose=function(){e.dispose.call(this),this._pathElement=null},this.beginPath=function(){return null!=this._pathData&&this.endPath(),this._pathData="",this},this.endPath=function(){return null==this._pathData||(this._pathData?("m"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" x"),this._pathElement.v=this._pathData.substring(1)):this._pathElement.v=" ",this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null),this},this.moveTo=function(t,e){return null==this._pathData||(t=null!=t&&t>-1/0&&t<1/0?Math.round(64*t):0,e=null!=e&&e>-1/0&&e<1/0?Math.round(64*e):0,this._pathData&&"M"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" x"),"m"!==this._lastCommand&&(this._lastCommand="m"),this._penX=t,this._penY=e,this._startX=t,this._startY=e,this._pathData+=" m "+t+","+e),this},this.lineTo=function(t,e){return null==this._pathData||(t=null!=t&&t>-1/0&&t<1/0?Math.round(64*t):0,e=null!=e&&e>-1/0&&e<1/0?Math.round(64*e):0,this._lastCommand||this.moveTo(0,0),"l"!==this._lastCommand?(this._lastCommand="l",this._pathData+=" l "):this._pathData+=", ",this._penX=t,this._penY=e,this._pathData+=t+","+e),this},this.curveTo=function(t,e,i,n){return null==this._pathData||(t=null!=t&&t>-1/0&&t<1/0?Math.round(64*t):0,e=null!=e&&e>-1/0&&e<1/0?Math.round(64*e):0,i=null!=i&&i>-1/0&&i<1/0?Math.round(64*i):0,n=null!=n&&n>-1/0&&n<1/0?Math.round(64*n):0,this._lastCommand||this.moveTo(0,0),"qb"!==this._lastCommand&&(this._lastCommand="qb"),this._penX=i,this._penY=n,this._pathData+=" qb "+t+","+e+" l "+i+","+n),this}}));a.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Rect":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("splunk/vectors/Shape"),a=i("splunk/vectors/VectorElement");return o(n.i,s,(function(t,e){this.constructor=function(t,i,n,o){e.constructor.call(this)},this.x=function(t){return this},this.y=function(t){return this},this.width=function(t){return this},this.height=function(t){return this};var i=o((function(t){this.constructor=function(t,i,n,o){e.constructor.call(this,"rect"),null!=t&&this.x(t),null!=i&&this.y(i),null!=n&&this.width(n),null!=o&&this.height(o)},this.x=function(t){return null!=t&&t>-1/0&&t<1/0?this.element.setAttribute("x",t):this.element.removeAttribute("x"),this},this.y=function(t){return null!=t&&t>-1/0&&t<1/0?this.element.setAttribute("y",t):this.element.removeAttribute("y"),this},this.width=function(t){return null!=t&&t<1/0?this.element.setAttribute("width",Math.max(t,0)):this.element.removeAttribute("width"),this},this.height=function(t){return null!=t&&t<1/0?this.element.setAttribute("height",Math.max(t,0)):this.element.removeAttribute("height"),this}})),n=o((function(t){this.constructor=function(t,i,n,o){e.constructor.call(this,"rect"),null!=t&&this.x(t),null!=i&&this.y(i),null!=n&&this.width(n),null!=o&&this.height(o)},this.x=function(t){return this.element.style.left=null!=t&&t>-1/0&&t<1/0?Math.round(t)+"px":"",this},this.y=function(t){return this.element.style.top=null!=t&&t>-1/0&&t<1/0?Math.round(t)+"px":"",this},this.width=function(t){return this.element.style.width=null!=t&&t<1/0?Math.round(Math.max(t,0))+"px":"",this},this.height=function(t){return this.element.style.height=null!=t&&t<1/0?Math.round(Math.max(t,0))+"px":"",this}}));a.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Shape":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/utils/NumberUtil"),a=i("splunk/vectors/VectorElement");return o(n.i,a,(function(t,e){this.constructor=function(t){e.constructor.call(this,t)},this.fillColor=function(t){return this},this.fillOpacity=function(t){return this},this.strokeColor=function(t){return this},this.strokeOpacity=function(t){return this},this.strokeWidth=function(t){return this},this.strokeLineCap=function(t){return this},this.strokeLineJoin=function(t){return this},this.strokeMiterLimit=function(t){return this};var i=o((function(t){this.constructor=function(t){e.constructor.call(this,t),this.fillColor(NaN),this.strokeColor(NaN),this.strokeLineCap("none"),this.strokeLineJoin("miter")},this.fillColor=function(t){return null==t||isNaN(t)?this.element.setAttribute("fill","none"):(t=s.minMax(Math.floor(t),0,16777215),this.element.setAttribute("fill","#"+(16777216|t).toString(16).substring(1))),this},this.fillOpacity=function(t){return null==t||isNaN(t)?this.element.removeAttribute("fill-opacity"):this.element.setAttribute("fill-opacity",s.minMax(t,0,1)),this},this.strokeColor=function(t){return null==t||isNaN(t)?this.element.removeAttribute("stroke"):(t=s.minMax(Math.floor(t),0,16777215),this.element.setAttribute("stroke","#"+(16777216|t).toString(16).substring(1))),this},this.strokeOpacity=function(t){return null==t||isNaN(t)?this.element.removeAttribute("stroke-opacity"):this.element.setAttribute("stroke-opacity",s.minMax(t,0,1)),this},this.strokeWidth=function(t){return null!=t&&t<1/0?this.element.setAttribute("stroke-width",Math.max(t,1)):this.element.removeAttribute("stroke-width"),this},this.strokeLineCap=function(t){return"round"===t?this.element.setAttribute("stroke-linecap","round"):"square"===t?this.element.setAttribute("stroke-linecap","square"):this.element.removeAttribute("stroke-linecap"),this},this.strokeLineJoin=function(t){return"round"===t?this.element.setAttribute("stroke-linejoin","round"):"bevel"===t?this.element.setAttribute("stroke-linejoin","bevel"):this.element.removeAttribute("stroke-linejoin"),this},this.strokeMiterLimit=function(t){return null!=t&&t<1/0?this.element.setAttribute("stroke-miterlimit",Math.max(t,1)):this.element.removeAttribute("stroke-miterlimit"),this}})),n=o((function(t){this._fillElement=null,this._strokeElement=null,this.constructor=function(t){e.constructor.call(this,t),this._fillElement=this.createElement("fill"),this._strokeElement=this.createElement("stroke"),this.element.appendChild(this._fillElement),this.element.appendChild(this._strokeElement),this.fillColor(NaN),this.strokeColor(NaN),this.strokeLineCap("none"),this.strokeLineJoin("miter")},this.dispose=function(){e.dispose.call(this),this._fillElement=null,this._strokeElement=null},this.fillColor=function(t){return null==t||isNaN(t)?(this._fillElement.on=!1,this._fillElement.color="#000000"):(t=s.minMax(Math.floor(t),0,16777215),this._fillElement.on=!0,this._fillElement.color="#"+(16777216|t).toString(16).substring(1)),this},this.fillOpacity=function(t){return null==t||isNaN(t)?this._fillElement.opacity=1:this._fillElement.opacity=s.minMax(t,0,1),this},this.strokeColor=function(t){return null==t||isNaN(t)?(this._strokeElement.on=!1,this._strokeElement.color="#000000"):(t=s.minMax(Math.floor(t),0,16777215),this._strokeElement.on=!0,this._strokeElement.color="#"+(16777216|t).toString(16).substring(1)),this},this.strokeOpacity=function(t){return null==t||isNaN(t)?this._strokeElement.opacity=1:this._strokeElement.opacity=s.minMax(t,0,1),this},this.strokeWidth=function(t){return this._strokeElement.weight=null!=t&&t<1/0?Math.max(t,1)+"px":"1px",this},this.strokeLineCap=function(t){return this._strokeElement.endcap="round"===t?"round":"square"===t?"square":"flat",this},this.strokeLineJoin=function(t){return this._strokeElement.joinstyle="round"===t?"round":"bevel"===t?"bevel":"miter",this},this.strokeMiterLimit=function(t){return this._strokeElement.miterlimit=null!=t&&t<1/0?Math.max(t,1):4,this}}));a.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Text":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/geom/Rectangle"),a=i("splunk/vectors/Shape"),r=i("splunk/vectors/VectorElement");return o(n.i,a,(function(t,e){this.constructor=function(t,i,n){e.constructor.call(this)},this.x=function(t){return this},this.y=function(t){return this},this.text=function(t){return this},this.alignmentBaseline=function(t){return this},this.baselineShift=function(t){return this},this.direction=function(t){return this},this.dominantBaseline=function(t){return this},this.fontFamily=function(t){return this},this.fontSize=function(t){return this},this.fontSizeAdjust=function(t){return this},this.fontStretch=function(t){return this},this.fontStyle=function(t){return this},this.fontVariant=function(t){return this},this.fontWeight=function(t){return this},this.glyphOrientationHorizontal=function(t){return this},this.glyphOrientationVertical=function(t){return this},this.kerning=function(t){return this},this.letterSpacing=function(t){return this},this.textAnchor=function(t){return this},this.textDecoration=function(t){return this},this.textRendering=function(t){return this},this.unicodeBidi=function(t){return this},this.wordSpacing=function(t){return this},this.writingMode=function(t){return this},this.getBounds=function(){return new s};var i=o((function(t){this.constructor=function(t,i,n){e.constructor.call(this,"text"),this.fillColor(0),null!=t&&this.x(t),null!=i&&this.y(i),null!=n&&this.text(n)},this.x=function(t){return null!=t&&t>-1/0&&t<1/0?this.element.setAttribute("x",t):this.element.removeAttribute("x"),this},this.y=function(t){return null!=t&&t>-1/0&&t<1/0?this.element.setAttribute("y",t):this.element.removeAttribute("y"),this},this.text=function(t){return this.element.textContent=t||"",this},this.alignmentBaseline=function(t){return t?this.element.setAttribute("alignment-baseline",t):this.element.removeAttribute("alignment-baseline"),this},this.baselineShift=function(t){return t?this.element.setAttribute("baseline-shift",t):this.element.removeAttribute("baseline-shift"),this},this.direction=function(t){return t?this.element.setAttribute("direction",t):this.element.removeAttribute("direction"),this},this.dominantBaseline=function(t){return t?this.element.setAttribute("dominant-baseline",t):this.element.removeAttribute("dominant-baseline"),this},this.fontFamily=function(t){return t?this.element.setAttribute("font-family",t):this.element.removeAttribute("font-family"),this},this.fontSize=function(t){return t?this.element.setAttribute("font-size",t):this.element.removeAttribute("font-size"),this},this.fontSizeAdjust=function(t){return t?this.element.setAttribute("font-size-adjust",t):this.element.removeAttribute("font-size-adjust"),this},this.fontStretch=function(t){return t?this.element.setAttribute("font-stretch",t):this.element.removeAttribute("font-stretch"),this},this.fontStyle=function(t){return t?this.element.setAttribute("font-style",t):this.element.removeAttribute("font-style"),this},this.fontVariant=function(t){return t?this.element.setAttribute("font-variant",t):this.element.removeAttribute("font-variant"),this},this.fontWeight=function(t){return t?this.element.setAttribute("font-weight",t):this.element.removeAttribute("font-weight"),this},this.glyphOrientationHorizontal=function(t){return t?this.element.setAttribute("glyph-orientation-horizontal",t):this.element.removeAttribute("glyph-orientation-horizontal"),this},this.glyphOrientationVertical=function(t){return t?this.element.setAttribute("glyph-orientation-vertical",t):this.element.removeAttribute("glyph-orientation-vertical"),this},this.kerning=function(t){return t?this.element.setAttribute("kerning",t):this.element.removeAttribute("kerning"),this},this.letterSpacing=function(t){return t?this.element.setAttribute("letter-spacing",t):this.element.removeAttribute("letter-spacing"),this},this.textAnchor=function(t){return t?this.element.setAttribute("text-anchor",t):this.element.removeAttribute("text-anchor"),this},this.textDecoration=function(t){return t?this.element.setAttribute("text-decoration",t):this.element.removeAttribute("text-decoration"),this},this.textRendering=function(t){return t?this.element.setAttribute("text-rendering",t):this.element.removeAttribute("text-rendering"),this},this.unicodeBidi=function(t){return t?this.element.setAttribute("unicode-bidi",t):this.element.removeAttribute("unicode-bidi"),this},this.wordSpacing=function(t){return t?this.element.setAttribute("word-spacing",t):this.element.removeAttribute("word-spacing"),this},this.writingMode=function(t){return t?this.element.setAttribute("writing-mode",t):this.element.removeAttribute("writing-mode"),this},this.getBounds=function(){try{var t=this.element.getBBox();return new s(t.x,t.y,t.width,t.height)}catch(t){return new s}}})),n=o((function(t){}));r.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/VectorElement":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class");return o(n.i,Object,(function(t,e){var i="function"==typeof document.createElementNS,n=!i&&function(){try{document.namespaces.add("splvml","urn:schemas-microsoft-com:vml");var t=".splvml { behavior: url(#default#VML); display: inline-block; position: absolute; }",e=document.createElement("style");return e.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),!0}catch(t){return!1}}();t.mixin=function(t,e,s){i?(o.mixin(t,e),e.constructor!==Object&&"function"==typeof e.constructor&&(t.constructor=e.constructor)):n&&(o.mixin(t,s),s.constructor!==Object&&"function"==typeof s.constructor&&(t.constructor=s.constructor))},this.hasSVG=i,this.hasVML=n,this.element=null,this.constructor=function(t){if(null!=t&&!o.isString(t))throw new Error("Parameter tagName must be of type String.");this.element=this.createElement(t||null)},this.appendTo=function(e){if(null==e)throw new Error("Parameter parentElement must be non-null.");if(!(e instanceof t))throw new Error("Parameter parentElement must be of type "+o.getName(t)+".");return e.element.appendChild(this.element),this},this.remove=function(){return this.element.parentNode&&this.element.parentNode.removeChild(this.element),this},this.dispose=function(){this.remove(),this.element=null},this.display=function(t){return this.element.style.display=t||"",this},this.visibility=function(t){return this.element.style.visibility=t||"",this},this.translate=function(t,e){return t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,this.element.style.left=0!=t?t+"px":"",this.element.style.top=0!=e?e+"px":"",this},this.createElement=function(t){var e=document.createElement("div");return e.style.position="absolute",e};var s=o((function(t){this.display=function(t){return t?this.element.setAttribute("display",t):this.element.removeAttribute("display"),this},this.visibility=function(t){return t?this.element.setAttribute("visibility",t):this.element.removeAttribute("visibility"),this},this.translate=function(t,e){return e=null!=e&&e>-1/0&&e<1/0?e:0,0!=(t=null!=t&&t>-1/0&&t<1/0?t:0)||0!=e?this.element.setAttribute("transform","translate("+t+","+e+")"):this.element.removeAttribute("transform"),this},this.createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t||"g")}})),a=o((function(t){this.createElement=function(t){return document.createElement("<splvml:"+(t||"group")+' class="splvml">')}}));t.mixin(this,s,a)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/VectorUtils":function(t,e,i){var n;void 0===(n=function(t,e,n){return i("contrib/jg_lib/Class")(n.i,(function(t){t.toSVGString=function(t){var e=t.cloneNode(!0),i=document.createElement("div");i.appendChild(e);var n=i.innerHTML;return e=null,i=null,n=(n=(n=n.replace(/xlink:href=|href=/g,"x:href=")).replace(/<image([\S\s]*?)\s*\/?>\s*(<\/image>)?/g,"<image$1></image>")).replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:x="http://www.w3.org/1999/xlink"')},t.concatSVGStrings=function(){for(var t,e,i,n="",o=0,s=0,a=0,r=arguments.length;a<r;a++)(e=(t=arguments[a]).match(/^<svg[^>]*viewBox=\"([^ ]+) ([^ ]+) ([^ ]+) ([^\"]+)\"[^>]*>/))&&5==e.length?(i={x:Number(e[1]),y:Number(e[2]),width:Number(e[3]),height:Number(e[4])},o=Math.max(o,i.width),s=Math.max(s,i.height)):i=null,n+=t=(t=!i||0==i.x&&0==i.y?t.replace(/^<svg[^>]*>/,"<g>"):t.replace(/^<svg[^>]*>/,'<g transform="translate('+-i.x+", "+-i.y+')">')).replace(/<\/svg>$/,"</g>");return t="<svg",t+=' xmlns="http://www.w3.org/2000/svg"',t+=' xmlns:x="http://www.w3.org/1999/xlink"',t+=' width="'+o+'"',t+=' height="'+s+'"',t+=' viewBox="0 0 '+o+" "+s+'"',t+=">",t+=n,t+="</svg>"}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Viewport":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/geom/Rectangle"),a=i("splunk/vectors/VectorElement"),r=i("splunk/vectors/VectorUtils");return o(n.i,a,(function(t,e){this.constructor=function(t,i,n,o){e.constructor.call(this)},this.width=function(t){return this},this.height=function(t){return this},this.viewBox=function(t){return this},this.preserveAspectRatio=function(t){return this},this.toSVGString=function(){return""};var i=o((function(t){this.constructor=function(t,i,n,o){e.constructor.call(this,"svg"),this.width(null!=t?t:0),this.height(null!=i?i:0),null!=n&&this.viewBox(n),null!=o&&this.preserveAspectRatio(o)},this.appendTo=function(t){if(null==t)throw new Error("Parameter parentElement must be non-null.");if(null==t.appendChild)throw new Error("Parameter parentElement must be a DOM node.");return t.appendChild(this.element),this},this.width=function(t){return null!=t&&t<1/0?this.element.setAttribute("width",Math.max(t,0)):this.element.setAttribute("width",0),this},this.height=function(t){return null!=t&&t<1/0?this.element.setAttribute("height",Math.max(t,0)):this.element.setAttribute("height",0),this},this.viewBox=function(t){return t&&t instanceof s&&t.isFinite()?this.element.setAttribute("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height):this.element.removeAttribute("viewBox"),this},this.preserveAspectRatio=function(t){return t?this.element.setAttribute("preserveAspectRatio",t):this.element.removeAttribute("preserveAspectRatio"),this},this.toSVGString=function(){return r.toSVGString(this.element)}})),n=o((function(t){this._containerElement=null,this._width=0,this._height=0,this._viewBox=null,this.constructor=function(t,i,n,o){e.constructor.call(this,"group"),this._containerElement=document.createElement("div"),this._containerElement.style.position="relative",this._containerElement.style.overflow="hidden",this._containerElement.appendChild(this.element),this.width(null!=t?t:0),this.height(null!=i?i:0),null!=n&&this.viewBox(n),null!=o&&this.preserveAspectRatio(o)},this.appendTo=function(t){if(null==t)throw new Error("Parameter parentElement must be non-null.");if(null==t.appendChild)throw new Error("Parameter parentElement must be a DOM node.");return t.appendChild(this._containerElement),this},this.remove=function(){return this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement),this},this.dispose=function(){e.dispose.call(this),this._containerElement=null},this.display=function(t){return this._containerElement.style.display=t||"",this},this.visibility=function(t){return this._containerElement.style.visibility=t||"",this},this.translate=function(t,e){return t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,this._containerElement.style.left=0!=t?t+"px":"",this._containerElement.style.top=0!=e?e+"px":"",this},this.width=function(t){return this._width=null!=t&&t<1/0?Math.max(t,0):0,this._updateView(),this},this.height=function(t){return this._height=null!=t&&t<1/0?Math.max(t,0):0,this._updateView(),this},this.viewBox=function(t){return this._viewBox=t&&t instanceof s&&t.isFinite()?t.clone():null,this._updateView(),this},this.preserveAspectRatio=function(t){return this},this._updateView=function(){var t=Math.round(this._width),e=Math.round(this._height),i=this._viewBox,n=i?Math.round(i.x):0,o=i?Math.round(i.y):0,s=i?Math.round(Math.max(i.width,1)):t,a=i?Math.round(Math.max(i.height,1)):e,r=this.element,l=r.style,h=this._containerElement.style;l.display="none",r.coordorigin=n+","+o,r.coordsize=s+","+a,l.width=t+"px",l.height=e+"px",h.width=t+"px",h.height=e+"px",l.display=""}}));a.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/vectors/Wedge":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/utils/NumberUtil"),a=i("splunk/vectors/Shape"),r=i("splunk/vectors/VectorElement");return o(n.i,a,(function(t,e){this.constructor=function(){e.constructor.call(this)},this.draw=function(t,e,i,n,o,s){return this};var i=o((function(t){this.constructor=function(){e.constructor.call(this,"path")},this.draw=function(t,e,i,n,o,a){if(t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,i=null!=i&&i<1/0?Math.max(i,0):0,n=null!=n&&n<1/0?Math.max(n,0):0,o=null!=o&&o>-1/0&&o<1/0?o:0,a=null==a||null==a||isNaN(a)?0:s.minMax(a,-360,360),0==i||0==n||0==a)return this.element.removeAttribute("d"),this;var r=o/180*Math.PI,l=t+Math.cos(r)*i,h=e+Math.sin(r)*n,u=(o+a/2)/180*Math.PI,c=t+Math.cos(u)*i,p=e+Math.sin(u)*n,d=(o+a)/180*Math.PI,m=a<0?0:1,f="";return a>-360&&a<360?(f+="M"+t+","+e,f+=" L"+l+","+h):f+="M"+l+","+h,f+=" A"+i+","+n+" 0 0 "+m+" "+c+","+p,f+=" "+i+","+n+" 0 0 "+m+" "+(t+Math.cos(d)*i)+","+(e+Math.sin(d)*n),f+=" Z",this.element.setAttribute("d",f),this}})),n=o((function(t){this._pathElement=null,this.constructor=function(){e.constructor.call(this,"shape"),this._pathElement=this.createElement("path"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize="64,64",this.element.appendChild(this._pathElement)},this.dispose=function(){e.dispose.call(this),this._pathElement=null},this.draw=function(t,e,i,n,o,a){if(t=null!=t&&t>-1/0&&t<1/0?t:0,e=null!=e&&e>-1/0&&e<1/0?e:0,i=null!=i&&i<1/0?Math.max(i,0):0,n=null!=n&&n<1/0?Math.max(n,0):0,o=null!=o&&o>-1/0&&o<1/0?o:0,a=null==a||null==a||isNaN(a)?0:s.minMax(a,-360,360),0==i||0==n||0==a)return this._pathElement.v=" ",this;var r=o/180*Math.PI,l=t+Math.cos(r)*i,h=e+Math.sin(r)*n,u=(o+a/2)/180*Math.PI,c=t+Math.cos(u)*i,p=e+Math.sin(u)*n,d=(o+a)/180*Math.PI,m=t+Math.cos(d)*i,f=e+Math.sin(d)*n,_=Math.round(64*(t-i)),g=Math.round(64*(e-n)),v=Math.round(64*(t+i)),y=Math.round(64*(e+n));t=Math.round(64*t),e=Math.round(64*e),l=Math.round(64*l),h=Math.round(64*h);var b="";return a>-360&&a<360?(b+="m "+t+","+e,b+=" l "+l+","+h):b+="m "+l+","+h,b+=a<0?" at":" wa",b+=" "+_+","+g+","+v+","+y+", "+l+","+h+", "+(c=Math.round(64*c))+","+(p=Math.round(64*p)),b+=", "+_+","+g+","+v+","+y+", "+c+","+p+", "+(m=Math.round(64*m))+","+(f=Math.round(64*f)),b+=" x",this._pathElement.v=b,this}}));r.mixin(this,i,n)}))}.call(e,i,e,t))||(t.exports=n)},"splunk/viz/MDataTarget":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/async/Pass"),a=i("contrib/jg_lib/properties/ObservableArrayProperty"),r=i("contrib/jg_lib/properties/ObservableProperty"),l=i("splunk/charting/Legend");return o(n.i,(function(t){this.processDataPass=new s("processData",.1),this.updateLegendLabelsPass=new s("updateLegendLabels",.2),this.renderDataPass=new s("renderData",.3),this.data=new r("data",Array,null).onChange((function(t){this.invalidate("processDataPass")})),this.fields=new a("fields",String,null).onChange((function(t){this.invalidate("processDataPass")})),this.legend=new r("legend",l,null).onChange((function(t){if(t.target===this){var e=t.oldValue,i=t.newValue;return e&&(e.off("settingLabels",this._legend_settingLabels,this),e.unregister(this)),i&&(i.register(this),i.on("settingLabels",this._legend_settingLabels,this)),void this.invalidate("updateLegendLabelsPass")}t.event!==t.target.labelIndexMapChanged||this.invalidate("renderDataPass")})),this._cachedData=null,this._cachedFields=null,this._cachedLegend=null,this.processData=function(){if(!this.isValid("processDataPass")){this.invalidate("updateLegendLabelsPass");var t=this._cachedData=this.getInternal("data")||[],e=this._cachedFields=this.getInternal("fields")||[];this.processDataOverride(t,e),this.markValid("processDataPass")}},this.updateLegendLabels=function(){if(!this.isValid("updateLegendLabelsPass")){this.invalidate("renderDataPass");var t=this._cachedLegend=this.getInternal("legend"),e=null;t&&(e=this.updateLegendLabelsOverride(this._cachedData,this._cachedFields)),this.markValid("updateLegendLabelsPass"),t&&t.setLabels(this,e)}},this.renderData=function(){this.isValid("renderDataPass")||(this.renderDataOverride(this._cachedData,this._cachedFields,this._cachedLegend),this.markValid("renderDataPass"))},this.processDataOverride=function(t,e){},this.updateLegendLabelsOverride=function(t,e){return null},this.renderDataOverride=function(t,e,i){},this._legend_settingLabels=function(t){this.validate("updateLegendLabelsPass"),this.updateLegendLabels()}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/viz/MRenderTarget":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("contrib/jg_lib/Class"),s=i("contrib/jg_lib/async/Pass");return o(n.i,(function(t){this.renderPass=new s("render",3,"topDown"),this.render=function(){}}))}.call(e,i,e,t))||(t.exports=n)},"splunk/viz/VizBase":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/jquery"),s=i("contrib/jg_lib/Class"),a=i("contrib/jg_lib/async/MPassTarget"),r=i("contrib/jg_lib/events/MEventTarget"),l=i("contrib/jg_lib/events/MListenerTarget"),h=i("contrib/jg_lib/events/MObservableTarget"),u=i("contrib/jg_lib/properties/MPropertyTarget"),c=i("contrib/jg_lib/properties/Property");return s(n.i,Object,(function(t,e){s.mixin(this,r,l,h,u,a);var i=0;t.getInstance=function(e){if(null==e)return null;if(0==(e=o(e)).length)return null;var i=(e=e[0]).__splunk_viz_VizBase_instance;return i instanceof t?i:null},this.id=new c("id",String,null).readOnly(!0),this.element=null,this.$element=null,this.constructor=function(t){if(null!=t&&!s.isString(t))throw new Error("Parameter html must be of type String.");var e=o(t||"<div></div>");if(0==e.length)throw new Error("Parameter html must be valid markup.");var n="splunk-viz-VizBase-"+ ++i;this.element=e[0],this.$element=o(this.element),this.setInternal("id",n),this.addStyleClass("splunk-viz-VizBase")},this.addStyleClass=function(t){this.$element.addClass(t)},this.removeStyleClass=function(t){this.$element.removeClass(t)},this.setStyle=function(t){this.$element.css(t)},this.appendTo=function(e){if(null==e)throw new Error("Parameter parentElement must be non-null.");if(e instanceof t&&(e=e.element),0!=(e=o(e)).length){e=e[0];var i=this.element.parentNode;i&&i!==e&&this.onRemove(),e.appendChild(this.element),i!==e&&this.onAppend()}},this.replace=function(e){if(null==e)throw new Error("Parameter element must be non-null.");if(e instanceof t&&(e=e.element),0!=(e=o(e)).length){var i=(e=e[0]).parentNode;if(null!=i){var n=this.element.parentNode;n&&n!==i&&this.onRemove(),i.replaceChild(this.element,e),n!==i&&this.onAppend()}}},this.remove=function(){var t=this.element,e=t.parentNode;e&&(this.onRemove(),e.removeChild(t))},this.dispose=function(){this.remove(),this.listenOff(),this.off(),this.markValid(),this.$element.remove()},this.getValidateDepth=function(){for(var t=0,e=this.element.parentNode;e;)t++,e=e.parentNode;return t},this.onAppend=function(){},this.onRemove=function(){}}))}.call(e,i,e,t))||(t.exports=n)},"views/shared/map/Master":function(t,e,i){var n;void 0===(n=function(t,e,n){var o=i("shim/jquery"),s=i("stubs/i18n"),a=i("require/underscore"),r=i("shim/splunk.util"),l=r.sprintf,h=i("contrib/jg_lib/graphics/Color"),u=i("contrib/jg_lib/utils/FunctionUtil"),c=i("models/Base"),p=i("splunk/charting/ExternalLegend"),d=i("splunk/mapping/Map"),m=i("splunk/mapping/layers/ChoroplethLayer"),f=i("splunk/mapping/layers/PieMarkerLayer"),_=i("splunk/mapping/parsers/LatLonBoundsParser"),g=i("splunk/mapping/parsers/LatLonParser"),v=i("splunk/palettes/ColorCodes"),y=i("splunk/palettes/FieldColorPalette"),b=i("splunk/palettes/ListColorPalette"),L=i("splunk/parsers/ArrayParser"),x=i("splunk/parsers/BooleanParser"),P=i("splunk/parsers/ColorParser"),w=i("splunk/parsers/NumberParser"),M=i("splunk/parsers/ObjectParser"),C=i("splunk/parsers/StringParser"),T=(i("splunk/mapping/utils/GeoJsonUtils"),i("views/shared/viz/Base")),k=i("util/console"),A=i("splunk/mapping/controls/ResetZoomControl"),E=i("splunk/mapping/axis/NumericAxis"),D=i("splunk/mapping/controls/NumericalLegend"),N=i("util/general_utils"),S=i("splunk/mapping/controls/CategoricalVisualLegend"),z=i("util/theme_utils"),B=(i("views/shared/map/Master.pcss"),{output_mode:"json_cols",show_metadata:"true",offset:"0"}),I={fieldColors:"",seriesColors:"["+v.toPrefixed(v.CATEGORICAL,"0x").join(",")+"]","data.maxClusters":"100",showTiles:"1","tileLayer.tileOpacity":"1","tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles/{z}/{x}/{y}","tileLayer.subdomains":"[a,b,c]","tileLayer.minZoom":"0","tileLayer.maxZoom":"7","tileLayer.invertY":"false","tileLayer.attribution":"","map.scrollZoom":0,"map.panning":!0,"markerLayer.markerOpacity":"1","markerLayer.markerMinSize":"10","markerLayer.markerMaxSize":"50",drilldown:"all","choroplethLayer.colorMode":"auto","choroplethLayer.maximumColor":"0xAF575A","choroplethLayer.minimumColor":"0x2F25BA","choroplethLayer.neutralPoint":"0","choroplethLayer.shapeOpacity":"0.75","choroplethLayer.colorBins":"5","choroplethLayer.showBorder":"1",layerType:"marker"},O="dark"===z.getCurrentTheme().colorScheme?{"tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles-dark/{z}/{x}/{y}"}:{"tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles/{z}/{x}/{y}"},R=a.extend({},I,O),U=/^display\.visualizations\.mapping\./;return T.extend({moduleId:n.i,_map:null,_markerLayer:null,_choroplethLayer:null,_externalLegend:null,_fieldColorPalette:null,_seriesColorPalette:null,_choroplethColorPalette:null,_choroplethColorMode:null,_choroplethAutoDetectedColorMode:"sequential",_choroplethMinimumColor:h.fromNumber(0),_choroplethNeutralColor:h.fromNumber(16777215),_choroplethMaximumColor:h.fromNumber(0),_choroplethNullColor:h.fromNumber(13750737),_numericLegend:null,_numericAxis:null,_propertyValues:null,_booleanParser:null,_numberParser:null,_stringParser:null,_colorParser:null,_numberArrayParser:null,_stringArrayParser:null,_colorArrayParser:null,_numberObjectParser:null,_colorObjectParser:null,_latLonParser:null,_latLonBoundsParser:null,_maxClusters:100,_maxShapes:1e4,_isPrinting:!1,_prePrintCenter:null,_prePrintZoom:0,_drilldown:"all",_layerType:null,initialize:function(t){this.model.config||(this.model.config=new c),T.prototype.initialize.apply(this,arguments),this.options=t||{},this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%");var e=parseInt(r.getConfigValue("CHOROPLETH_SHAPE_LIMIT",this._maxShapes)||0,10);a.isNaN(e)||(this._maxShapes=e),this._map_boundsChanged=u.bind(this._map_boundsChanged,this),this._map_mapClicked=u.bind(this._map_mapClicked,this),this._propertyValues={},this._booleanParser=x.getInstance(),this._numberParser=w.getInstance(),this._stringParser=C.getInstance(),this._colorParser=P.getInstance(),this._numberArrayParser=L.getInstance(this._numberParser),this._stringArrayParser=L.getInstance(this._stringParser),this._colorArrayParser=L.getInstance(this._colorParser),this._numberObjectParser=M.getInstance(this._numberParser),this._colorObjectParser=M.getInstance(this._colorParser),this._latLonParser=g.getInstance(),this._latLonBoundsParser=_.getInstance(),this._seriesColorPalette=new b,this._fieldColorPalette=new y(null,this._seriesColorPalette),this._externalLegend=new p,this._categoricalVisualLegend=new S,this._externalLegend.connect(),this._markerLayer=new f,this._markerLayer.set("legend",this._externalLegend),this._markerLayer.set("markerColorPalette",this._fieldColorPalette),this._numericAxis=new E,this._numericLegend=new D,this._choroplethColorPalette=new b(null,!0),this._updateChoroplethColorPalette(),this._choroplethLayer=new m,this._choroplethLayer.set("colorPalette",this._choroplethColorPalette),this._numericLegend.set("axis",this._numericAxis),this._categoricalVisualLegend.set("colorPalette",this._fieldColorPalette),this._categoricalVisualLegend.set("legend",this._externalLegend),this._choroplethLayer.set("legend",this._externalLegend),this._numericLegend.set("colorPalette",this._choroplethColorPalette),this._map=new d,this._updateDataBounds(),this._map.formatNumber=this._formatNumber,this._map.formatDegrees=this._formatDegrees;var i=this.model.config.get("display.visualizations.mapping.map.zoom"),n=this.model.config.get("display.visualizations.mapping.map.center");this._map.on("boundsChanged",this._map_boundsChanged.bind(this)),this._map.on("mapClicked",this._map_mapClicked),this._map.appendTo(this.$el),this._map.fitWorld(!0),this._reset_zoom=new A({originalZoom:i,originalCenter:n}),this._map.addControl(this._reset_zoom),this.$el.find(".leaflet-top").css("z-index","50"),this.$el.on("mouseenter",".legend-elem",function(t){var e=o(t.currentTarget).data().fieldName;this._choroplethLayer.set("selectedField",""+e),this._numericLegend.set("selectedField",""+e),this._categoricalVisualLegend.set("selectedField",""+e)}.bind(this)),this.$el.on("mouseleave",".legend-elem",function(t){this._choroplethLayer.set("selectedField",null),this._numericLegend.set("selectedField",null),this._categoricalVisualLegend.set("selectedField",null)}.bind(this))},getCenter:function(){return this._map.get("center").normalize()},getZoom:function(){return this._map.get("zoom")},getLatLonBounds:function(){return this._map.getLatLonBounds().normalize()},getScrollWheelZoom:function(){return this._map.leafletMap.scrollWheelZoom._enabled},getPostProcessSearch:function(){var t=this._map.getLatLonBounds().normalize();return"marker"===this._layerType?"geofilter south="+t.s+" west="+t.w+" north="+t.n+" east="+t.e+" maxclusters="+this._maxClusters:"geomfilter min_y="+t.s+" min_x="+t.w+" max_y="+t.n+" max_x="+t.e},hasNonZeroBounds:function(){var t=this._map.getLatLonBounds().normalize();return!(0===t.s&&0===t.w&&0===t.n&&0===t.e)},getResultsCount:function(){return"marker"===this._layerType?this._maxClusters:this._maxShapes},formatData:function(){var t=null,e=this.getPrimaryDataSource().searchResults;t=e.has("rows")?this._extractRowData(e):this._extractColumnData(e),k.debug("Updating map data to",t);var i=[];if(this._layerType=this.model.config.get("display.visualizations.mapping.type"),"marker"===this._layerType&&this._markerLayer)this._markerLayer.set("data",t?t.data:null),this._markerLayer.set("fields",t?this._filterFields(t.fields):null);else if("choropleth"===this._layerType&&this._choroplethLayer){if(!a(t.fields).contains("geom"))return this._choroplethLayer.set("featureIdFieldName",null),this._choroplethLayer.set("data",null),void this._choroplethLayer.set("fields",null);var n,o=t.data[0]._featureIdField;if(o&&(n=a.union([o],this._filterFields(t.fields))),n&&n.length>1){for(var s=n[1],r=0;r<t.data.length;r++)i.push(t.data[r][s]);i.length>0&&(this._choroplethAutoDetectedColorMode=N.valuesAreNumeric(i)?"sequential":"categorical"),this.model.config.set({autoDetectedColorMode:this._choroplethAutoDetectedColorMode},{transient:!0}),"auto"===this._choroplethColorMode&&this._updateChoroplethToMatchColorMode()}this._choroplethLayer.set("featureIdFieldName",n?n[0]:null),this._choroplethLayer.set("data",t?t.data:null),this._choroplethLayer.set("fields",t?n:null)}else k.log("cannot update layer data because of incorrect layerType, OR the _layerType hasn't been initialized!")},provideScaleValues:function(t,e){var i={color:[]};if("choropleth"!==this._layerType)return i;var n=this._choroplethLayer.get("fields"),o=this._choroplethLayer.get("featureIdFieldName");if(!n||!o)return i;var s=m.parseFieldTypes(n,o).count;return{color:a(this._choroplethLayer.get("data")).pluck(s)}},updateView:function(t,e,i){i();var n,o=this._propertyValues,s={};for(n in o)o.hasOwnProperty(n)&&(s[n]=null);var a=R;for(n in a)a.hasOwnProperty(n)&&(s[n]=a[n]);var r,l=this.model.config?this.model.config.toJSON():{};for(n in l)l.hasOwnProperty(n)&&U.test(n)&&null!=(r=l[n])&&""!==r&&(s[n.replace(U,"")]=r);s.hasOwnProperty("map.zoom")&&(this._setMapProperty("map.zoom",s["map.zoom"]),this._reset_zoom.setOriginalZoom(s["map.zoom"])),s.hasOwnProperty("map.center")&&(this._setMapProperty("map.center",s["map.center"]),this._reset_zoom.setOriginalCenter(s["map.center"])),s.hasOwnProperty("map.fitBounds")&&this._setMapProperty("map.fitBounds",s["map.fitBounds"]);var h=s["choroplethLayer.colorMode"];if("auto"===h||"sequential"===h||"divergent"===h||"categorical"===h?this._choroplethColorMode=h:delete s["choroplethLayer.colorMode"],"divergent"!==this._getComputedColorMode()&&(s["choroplethLayer.minimumColor"]=null,s["choroplethLayer.neutralPoint"]=null),"categorical"!==this._getComputedColorMode()&&this.getScale("color")){var u=this.getScale("color");this._choroplethLayer.set("sharedMinimum",u.get("actualMinimum")),this._choroplethLayer.set("sharedMaximum",u.get("actualMaximum"))}else this._choroplethLayer.set("sharedMinimum",-1/0),this._choroplethLayer.set("sharedMaximum",1/0);for(n in s)s.hasOwnProperty(n)&&this._setMapProperty(n,s[n])},onAddedToDocument:function(){this._map.updateSize()},remove:function(){return this._map.off("boundsChanged",this._map_boundsChanged),this._map.off("mapClicked",this._map_mapClicked),this._map.dispose(),this._markerLayer.off("rendered",this._onDataLayerRendered,this),this._choroplethLayer.off("rendered",this._onDataLayerRendered,this),this._externalLegend.close(),T.prototype.remove.apply(this,arguments)},onShow:function(){this._map.updateSize(),this._map.validate(),T.prototype.onShow.call(this)},_updateDataBounds:function(){var t=this.model.config;if(t){var e=this._map.getLatLonBounds().normalize();t.set({"display.visualizations.mapping.data.bounds":this._latLonBoundsParser.valueToString(e)})}},_needsPropertyUpdate:function(t){if(!t)return!1;for(var e in t)if(t.hasOwnProperty(e)&&"display.visualizations.mapping.data.bounds"!==e)return!0;return!1},_extractRowData:function(t){var e={},i=this._getNormalizedFieldNames(t),n=t.get("rows");if(i&&n){var o,s,a,r,l,h=i.length,u=n.length;for(e.fields=i.concat(),e.data=[],r=0;r<u;r++){for(s=n[r],o=Math.min(s.length,h),a={},l=0;l<o;l++)a[i[l]]=s[l];e.data.push(a)}}return e},_extractColumnData:function(t){var e={},i=this._getNormalizedFieldNames(t),n=t.get("columns");if(i&&n){var o,s,a,r=Math.min(i.length,n.length),l=r>0?n[0].length:0;for(s=1;s<r;s++)l=Math.min(l,n[s].length);for(e.fields=i.slice(0,r),e.data=[],s=0;s<l;s++){for(o={},a=0;a<r;a++)o[i[a]]=n[a][s];e.data.push(o)}}return e},_getNormalizedFieldNames:function(t){return a(t.get("fields")).map((function(t){return a.isString(t)?t:t.name}))},_filterFields:function(t){if(!t)return null;for(var e,i=[],n=0,o=t.length;n<o;n++)(e=t[n])&&"_"!==e.charAt(0)&&i.push(e);return i},_setMapProperty:function(t,e){if(e=null!=e?String(e):null,this._propertyValues[t]!=e)switch(null!=e?this._propertyValues[t]=e:delete this._propertyValues[t],t){case"fieldColors":var i=a.extend({NULL:this._choroplethNullColor},this._colorObjectParser.stringToValue(e));this._fieldColorPalette.set("fieldColors",i);break;case"seriesColors":this._seriesColorPalette.set("colors",this._colorArrayParser.stringToValue(e));break;case"data.maxClusters":var n=this._numberParser.stringToValue(e);this._maxClusters=n<1/0?Math.max(Math.floor(n),64):100,this._updateDataParams();break;case"map.center":var o=this._latLonParser.stringToValue(e);o&&this._map.set("center",o);break;case"map.zoom":var s=this._numberParser.stringToValue(e);isNaN(s)||this._map.set("zoom",s);break;case"map.fitBounds":var r=this._latLonBoundsParser.stringToValue(e);r&&this._map.fitBounds(r);break;case"map.scrollZoom":this._booleanParser.stringToValue(e)?this._map.leafletMap.scrollWheelZoom.enable():this._map.leafletMap.scrollWheelZoom.disable();break;case"map.panning":this._booleanParser.stringToValue(e)?this._map.leafletMap.dragging.enable():this._map.leafletMap.dragging.disable();break;case"drilldown":this._drilldown=this._stringParser.stringToValue(e);break;case"showTiles":this._map.set("showTiles",this._booleanParser.stringToValue(e));break;case"tileLayer.tileOpacity":this._map.set("tileOpacity",this._numberParser.stringToValue(e));break;case"tileLayer.url":this._map.set("tileURL",this._resolveURL(e));break;case"tileLayer.subdomains":this._map.set("tileSubdomains",this._stringArrayParser.stringToValue(e));break;case"tileLayer.minZoom":this._map.set("tileMinZoom",this._numberParser.stringToValue(e));break;case"tileLayer.maxZoom":this._map.set("tileMaxZoom",this._numberParser.stringToValue(e));break;case"tileLayer.invertY":this._map.set("tileInvertY",this._booleanParser.stringToValue(e));break;case"tileLayer.attribution":this._map.set("tileAttribution",this._stringParser.stringToValue(e));break;case"markerLayer.markerOpacity":this._markerLayer.set("markerOpacity",this._numberParser.stringToValue(e));break;case"markerLayer.markerMinSize":this._markerLayer.set("markerMinSize",this._numberParser.stringToValue(e));break;case"markerLayer.markerMaxSize":this._markerLayer.set("markerMaxSize",this._numberParser.stringToValue(e));break;case"choroplethLayer.colorMode":var l=this._getComputedColorMode();"sequential"!==l&&"divergent"!==l||this._updateChoroplethColorPalette(),this._updateChoroplethToMatchColorMode();break;case"choroplethLayer.maximumColor":this._choroplethMaximumColor=this._colorParser.stringToValue(e),this._updateChoroplethColorPalette();break;case"choroplethLayer.minimumColor":this._choroplethMinimumColor=this._colorParser.stringToValue(e),this._updateChoroplethColorPalette();break;case"choroplethLayer.colorBins":var h=this._numberParser.stringToValue(e);this._choroplethLayer.set("bins",h),this._numericLegend.set("bins",h);break;case"choroplethLayer.neutralPoint":var u=null!=e?this._numberParser.stringToValue(e):NaN;this._choroplethLayer.set("neutralPoint",u),this._numericLegend.set("neutralPoint",u);break;case"choroplethLayer.shapeOpacity":this._choroplethLayer.set("shapeOpacity",this._numberParser.stringToValue(e));break;case"choroplethLayer.showBorder":var c=this._booleanParser.stringToValue(e);this._choroplethLayer.set("borderWidth",c?1:0);break;case"legend.placement":var p="none"!==e;this._numericLegend.set("isVisible",p),this._categoricalVisualLegend.set("isVisible",p);break;case"type":"marker"===e?(this._map.removeLayer(this._choroplethLayer),this._choroplethLayer.off("rendered",this._onDataLayerRendered,this),this._map.addLayer(this._markerLayer),this._markerLayer.on("rendered",this._onDataLayerRendered,this),this._map.removeControl(this._numericLegend),this._map.removeControl(this._categoricalVisualLegend),this._updateDataParams()):"choropleth"===e?(this._map.removeLayer(this._markerLayer),this._markerLayer.off("rendered",this._onDataLayerRendered,this),this._map.addLayer(this._choroplethLayer),this._choroplethLayer.on("rendered",this._onDataLayerRendered,this),this._updateChoroplethToMatchColorMode(),this._updateDataParams()):k.log("cannot initialize customize layer because of incorrect _layerType!")}},_updateChoroplethColorPalette:function(){"divergent"===this._getComputedColorMode()?this._choroplethColorPalette.set("colors",[this._choroplethMinimumColor,this._choroplethNeutralColor,this._choroplethMaximumColor]):this._choroplethColorPalette.set("colors",[this._choroplethNeutralColor,this._choroplethMaximumColor])},_updateChoroplethToMatchColorMode:function(){"categorical"===this._getComputedColorMode()?(this._map.isCategorical=!0,this._choroplethLayer.set("axis",null),this._choroplethLayer.set("legend",this._externalLegend),this._choroplethLayer.set("colorPalette",this._fieldColorPalette),this._map.removeControl(this._numericLegend),this._map.addControl(this._categoricalVisualLegend)):(this._map.isCategorical=!1,this._choroplethLayer.set("legend",null),this._choroplethLayer.set("axis",this._numericAxis),this._choroplethLayer.set("colorPalette",this._choroplethColorPalette),this._map.removeControl(this._categoricalVisualLegend),this._map.addControl(this._numericLegend))},_getComputedColorMode:function(){return"auto"===this._choroplethColorMode?this._choroplethAutoDetectedColorMode:this._choroplethColorMode},_resolveURL:function(t){var e=t?r.trim(t):t;if(e&&"/"===e.charAt(0)){var i="/"===e.charAt(e.length-1);"/"===(e=r.make_url(e)).charAt(e.length-1)!=i&&(e=i?e+"/":e.substring(0,e.length-1)),t=e}return t},_formatNumber:function(t){var e=Math.abs(t);return e>0&&(e<.001||e>=1e9)?s.format_scientific(t,"##0E0"):s.format_decimal(t)},_formatDegrees:function(t,e){var i=Math.abs(t),n=Math.floor(i),o=""+n,s=60*(i-n),r=Math.floor(s),h=r<10?"0"+r:""+r,u=60*(s-r),c=Math.floor(u),p=c<10?"0"+c:""+c,d="";return t>0?d="ns"===e?a("N").t():a("E").t():t<0&&(d="ns"===e?a("S").t():a("W").t()),c>0?l("%(degrees)sÂ°%(minutes)s'%(seconds)s\"%(direction)s",{degrees:o,minutes:h,seconds:p,direction:d}):r>0?l("%(degrees)sÂ°%(minutes)s'%(direction)s",{degrees:o,minutes:h,direction:d}):l("%(degrees)sÂ°%(direction)s",{degrees:o,direction:d})},onConfigChange:function(t){a(t).chain().keys().any((function(t){return 0===t.indexOf("display.visualizations.mapping.")})).value()&&(t.hasOwnProperty("display.visualizations.mapping.type")&&this.invalidate("formatDataPass"),this.invalidate("updateViewPass"))},_shouldUpdateViewOnDataChange:function(){return!1},_map_boundsChanged:function(t){this._isPrinting||(this._updateDataBounds(),this._updateDataParams(),this.model.config.set({currentMapZoom:this.getZoom(),currentMapCenter:this.getCenter().clone()},{transient:!0}),this.trigger("boundsChanged",{}))},_map_mapClicked:function(t){this._isPrinting||"none"===this._drilldown||this.trigger("drilldown",{data:t.data,fields:t.fields,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,type:"geoviz"})},onPrintStart:function(t){this._isPrinting||(this._isPrinting=!0,this._prePrintCenter=this._map.get("center"),this._prePrintZoom=this._map.get("zoom"),this._map.updateSize(),this._map.validate())},onPrintEnd:function(t){this._isPrinting&&(this._map.set("center",this._prePrintCenter),this._map.set("zoom",this._prePrintZoom),this._prePrintCenter=null,this._prePrintZoom=0,this._isPrinting=!1,this._map.updateSize(),this._map.validate())},_onDataLayerRendered:function(){this._map.off("tilesLoaded.change",this._handleTileLoadOnce,this),this._map.get("tilesLoaded")?this._onViewUpdated():this._map.on("tilesLoaded.change",this._handleTileLoadOnce,this)},_handleTileLoadOnce:function(){this._onViewUpdated(),this._map.off("tilesLoaded.change",this._handleTileLoadOnce,this)},_updateDataParams:function(){this._layerType=this.model.config.get("display.visualizations.mapping.type"),this._layerType&&this.hasNonZeroBounds()&&this.getPrimaryDataSource().updateFetchParams(a.extend({},B,{search:this.getPostProcessSearch(),count:String(this.getResultsCount())}))}},{DEFAULT_PROPERTY_VALUES:R})}.call(e,i,e,t))||(t.exports=n)},"views/shared/map/Master.pcss":function(t,e,i){var n=i(2727);"string"==typeof n&&(n=[[t.i,n,""]]);var o={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(6)(n,o);n.locals&&(t.exports=n.locals)}}]);