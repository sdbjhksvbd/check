import{a as k,b as ce,c as me}from"./chunk-VHLICZNV.js";import{a as W,b as V}from"./chunk-XLE52FNY.js";import{a as fe,b as q}from"./chunk-2YWXDMAC.js";import{a as N}from"./chunk-6BPMW6O6.js";import{f as ue,g as he,h as pe}from"./chunk-7UHH6O2S.js";import{a as de,b as Ee,c as Ce}from"./chunk-XCI2AFAF.js";import{a as U}from"./chunk-ARHEEBC3.js";import{O as R,c as u,d as D,e as M,f as $,g as L,h,i as y,j as F,k as e,l as a,m as B,o as T,p as w,q as ne,r as b,x as ie,y as se,z as oe}from"./chunk-JNNA6YYS.js";import{d as re}from"./chunk-O7F7YGX6.js";import"./chunk-P7VIGQO4.js";import"./chunk-JNARL5PJ.js";import"./chunk-GECC65SD.js";import{pa as We,qa as Ve,sa as H,ua as le}from"./chunk-VWCNWZTS.js";import"./chunk-HSXE43VV.js";import"./chunk-RQXY73SC.js";import"./chunk-EZGXPQUG.js";import{qa as He,ra as Ue}from"./chunk-NP732JJA.js";import{i as C,o as ae}from"./chunk-FOXWPXSG.js";var K=C(de(),1),Ne=C(de(),1),X=C(Ee(),1),Je=C(Ee(),1),Z=C(Ce(),1),Ye=C(Ce(),1);var be=C(We(),1),P=C(He(),1),j=C(Ue(),1),ge=C(Ve(),1);var _e="scheduled/views",ve=d=>ae(void 0,[d],function*({dashboardId:t,app:l,emailTo:i,emailBCC:r,emailCC:o,emailPriority:c,emailSubject:s,emailMessage:m}){let n=`| sendemail use_ssl=false use_tls=false to="${i}" cc="${o}" bcc="${r}" priority=${c} sendpdf="True" from="splunk" subject="${s}" message="${m}" papersize="letter" paperorientation="portrait" pdfview="${t}" sendtestemail="1"`;return yield be.default.default.create({search:n},{app:l,owner:P.username}).getResults().first().toPromise()}),Fe=({enabled:t,cronSchedule:l,dashboardId:i,app:r,emailTo:o,emailBCC:c,emailCC:s,emailPriority:m,emailSubject:d,emailMessage:n})=>{let E="_ScheduledView__".concat(i),_=(0,j.createRESTURL)(`${_e}/${E}?output_mode=json`,{app:r,owner:P.username});return H(_,{method:"POST",body:ge.default.stringify({cron_schedule:l,"action.email.to":o,"action.email.bcc":c,"action.email.cc":s,"action.email.priority":m,"action.email.subject":d,"action.email.message":n,is_scheduled:t})})},xe=(t,l)=>{let i=(0,j.createRESTURL)(`${_e}/${t}?output_mode=json`,{app:l,owner:P.username});return H(i,{method:"GET"})},ye=()=>{let t=(0,j.createRESTURL)("properties/alert_actions/email/allowedDomainList");return le(t)};var $e={filename:"/builds/devplat/dashboard-enterprise/packages/enterprise-dashboard-dialogs/ScheduledExport.js",dirname:"/builds/devplat/dashboard-enterprise/packages/enterprise-dashboard-dialogs",relativefilename:"../../../enterprise-dashboard-dialogs/ScheduledExport.js",relativedirname:"../../../enterprise-dashboard-dialogs",line:0},Q={};$(Q,{default:()=>qe});L(Q,Ne);var Se,De,qe=(De=(Se=K.default)==null?void 0:Se.default)!=null?De:K.default,Le={};$(Le,{default:()=>Be});L(Le,Je);var Te,we,Be=(we=(Te=X.default)==null?void 0:Te.default)!=null?we:X.default,Re={};$(Re,{default:()=>Pe});L(Re,Ye);var ke,Ae,Pe=(Ae=(ke=Z.default)==null?void 0:ke.default)!=null?Ae:Z.default,Ke=b(T)`
    min-width: 80vw;
    will-change: opacity;

    ${me}
`,Xe=b(ce)`
    textarea[disabled] {
        ${(0,w.pick)({enterprise:{dark:ne.css`
                    color: ${w.variables.textDisabledColor};
                    background-color: ${w.variables.borderColor};
                    border-color: ${w.variables.backgroundColorHover};
                `}})}
    }
`,Ze=b(k)`
    width: 250px !important;
`,g=b(q)`
    max-width: 1000px;
`,Qe=b(T.Footer)`
    display: flex;
    justify-content: space-between;
`,Ie=b.hr`
    margin: 20px 0;
    color: lightgray;
`,je=b.div`
    display: flex;
    flex-direction: row;
    > *:first-child {
        margin-top: 0;
        margin-left: 0;
    }
    > * {
        margin-top: 0;
        margin-left: 20px;
    }
    @media screen and (max-width: 1440px) {
        flex-direction: column;
        > * {
            margin-top: 10px;
            margin-left: 0;
        }
    }
`,x=e.createContext({disabled:!1}),Oe={fontWeight:"lighter",color:"#6b7785"},et=D(u({},Oe),{filter:"greyscale(75%)",opacity:.5}),f=t=>{let{disabled:l}=e.useContext(x),i=l?et:Oe;return e.createElement(W,{inline:!0,style:i},t.children)},ze=t=>{var l=M(t,[]);let{disabled:i}=e.useContext(x);return e.createElement(Xe,D(u({},l),{disabled:i}))},S=t=>{var l=t,{list:i}=l,r=M(l,["list"]);let{disabled:o}=e.useContext(x);return e.createElement(k,D(u({},r),{disabled:o}),i.map((c,s)=>e.createElement(k.Option,{key:c,value:s,label:`${c}`})))},tt=t=>{let{disabled:l}=e.useContext(x);return e.createElement(Ze,D(u({},t),{disabled:l}),t.children)},J=t=>y(void 0,null,function*(){if(!t)return"";let l=t.replace(/\s/g,"").split(","),i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if(l.some(o=>!i.test(o)))return pe;let r;try{r=yield ye()}catch(o){return(0,a._)("Unable to contact the Splunk server for email domain validation")}if(r.length>0){let o=r.toLowerCase().replace(/\s/g,"").split(",");if(l.some(c=>{let s=c.toLowerCase().split("@")[1];return!o.includes(s)}))return he}return""}),at={5:(0,a._)("Very Low"),4:(0,a._)("Low"),3:(0,a._)("Normal"),2:(0,a._)("High"),1:(0,a._)("Critical")},lt={5:"priority-button-very-low",4:"priority-button-low",3:"priority-button-normal",2:"priority-button-high",1:"priority-button-critical"},rt=b.div`
    width: 300px;
    height: '32px';
    overflow: 'visible';
    @media screen and (max-width: 1440px) {
        width: auto;
        height: auto;
    }
`,A=R($e.filename),I=t=>{var l=t,{errorText:i,sidebarContent:r,name:o}=l,c=M(l,["errorText","sidebarContent","name"]);return e.createElement(je,{style:{width:"80%"}},e.createElement("div",{style:{width:"100%"}},e.createElement(ze,u({error:!!i,name:o},c)),i&&e.createElement("small",{style:{color:"red",marginTop:"-10px"},"data-test":`${o}-error-text`},i)),e.createElement("div",null,e.createElement(rt,null,e.createElement("div",{style:{flexShrink:0,marginTop:"-6px"}},r))))},nt=e.memo(t=>{let[l,i]=e.useState(!1),{disabled:r}=e.useContext(x);return e.createElement(e.Fragment,null,e.createElement(g,{label:(0,a._)("Email To"),tabIndex:0,controlsLayout:"stack"},e.createElement(I,u({placeholder:(0,a._)("Enter email addresses"),multiline:!0,rowsMax:5,errorText:t.error,name:"emailTo",value:t.emailTo,onChange:t.handleGenericEmailChange,sidebarContent:e.createElement(f,null,(0,a._)("Comma separated list of email addresses."))},A("email-field"))),e.createElement(V,{"data-test-name":"show-cc-and-bcc",disabled:r,onClick:()=>{i(!l)},selected:l,appearance:"toggle"},(0,a._)("Show CC and BCC"))),l&&e.createElement(g,{label:(0,a._)("CC")},e.createElement(I,u({placeholder:(0,a._)("Enter CC addresses"),multiline:!0,rowsMax:3,name:"emailCC",value:t.emailCC,onChange:t.handleGenericEmailChange},A("cc-email-field")))),l&&e.createElement(g,{label:(0,a._)("BCC")},e.createElement(I,u({placeholder:(0,a._)("Enter BCC addresses"),multiline:!0,rowsMax:3,name:"emailBCC",value:t.emailBCC,onChange:t.handleGenericEmailChange},A("bcc-email-field")))),e.createElement(g,{label:(0,a._)("Priority"),tabIndex:0},e.createElement("div",{"data-test":"email-priority"},Object.entries(at).map(([o,c],s)=>e.createElement(B,{inline:!0,key:o,style:{fontSize:"90%",fontWeight:"bold"},appearance:"toggle",disabled:r,onClick:m=>{t.handleGenericEmailChange(m,{name:"emailPriority",value:o})},selected:t.emailPriority===o,"data-test-selected":t.emailPriority===o,"data-test-name":lt[o]},c)))),e.createElement(g,{label:(0,a._)("Subject"),tabIndex:0},e.createElement(I,u({placeholder:(0,a._)("Splunk Dashboard: $dashboard.label$"),name:"emailSubject",value:t.emailSubject,onChange:t.handleGenericEmailChange,sidebarContent:e.createElement(f,null,(0,a._)("The email subject, recipients, and messages can include tokens that insert text based on the search results."),e.createElement("br",null),e.createElement(U,{to:re(),openInNewContext:!0},(0,a._)("Learn more")))},A("subject-field")))),e.createElement(g,{label:(0,a._)("Message"),tabIndex:0},e.createElement(I,u({placeholder:(0,a._)("A dashboard was generated for $dashboard.label$"),name:"emailMessage",value:t.emailMessage,onChange:t.handleGenericEmailChange,multiline:!0,rowsMin:8,rowsMax:10},A("message-field")))))}),it=[(0,a._)("Sunday"),(0,a._)("Monday"),(0,a._)("Tuesday"),(0,a._)("Wednesday"),(0,a._)("Thursday"),(0,a._)("Friday"),(0,a._)("Saturday")],Y=[(0,a._)("12:00 midnight"),...Array.from({length:11},(t,l)=>`${l+1}:00am`),(0,a._)("12:00 noon"),...Array.from({length:11},(t,l)=>`${l+1}:00pm`)],Me={hourly:{label:(0,a._)("Run every hour"),cronDefault:"5 * * * *"},daily:{label:(0,a._)("Run every day"),cronDefault:"0 18 * * *"},weekly:{label:(0,a._)("Run every week"),cronDefault:"0 18 * * 1"},monthly:{label:(0,a._)("Run every month"),cronDefault:"0 18 11 * *"},cron:{label:(0,a._)("Run by Cron"),cronDefault:"0 0 * * *"}},st=t=>t+(t==31||t==21||t==1?"st":t==22||t==2?"nd":t==23||t==3?"rd":"th"),ot=({cronExpression:t,handleCronExpressionChange:l})=>{let{disabled:i}=(0,F.useContext)(x),r;/\d+ \* \* \* \*/.test(t)?r="hourly":/\d+ \d+ \* \* \*/.test(t)?r="daily":/\d+ \d+ \* \* \d+/.test(t)?r="weekly":/\d+ \d+ \d+ \* \*/.test(t)?r="monthly":r="cron";let[o,c]=(0,F.useState)(r==="cron");o&&(r="cron");let s=(d,n)=>{let E=t.split(" ");return n!==void 0&&(E[d]=`${n}`,l(E.join(" "))),Number(E[d])},m=(()=>{switch(r){case"hourly":return e.createElement(e.Fragment,null,e.createElement(f,null,(0,a._)("At")),e.createElement(S,{list:Array.from({length:60},(d,n)=>`${n}`),value:s(0),onChange:(d,{value:n})=>{s(0,n)},"data-test-name":"pick-minute-in-hour"}),e.createElement(f,null,(0,a._)("Minutes past the hour")));case"daily":return e.createElement(e.Fragment,null,e.createElement(f,null,(0,a._)("At")),e.createElement(S,{list:Y,value:s(1),onChange:(d,{value:n})=>{s(1,n)},"data-test-name":"pick-hour-in-day"}));case"weekly":return e.createElement(e.Fragment,null,e.createElement(f,null,(0,a._)("On")),e.createElement(S,{list:it,value:s(4),onChange:(d,{value:n})=>{s(4,n)},"data-test-name":"pick-day-in-week"}),e.createElement(f,null,(0,a._)("At")),e.createElement(S,{list:Y,value:s(1),onChange:(d,{value:n})=>{s(1,n)},"data-test-name":"pick-hour-in-day-in-week"}));case"monthly":return e.createElement(e.Fragment,null,e.createElement(f,null,(0,a._)("On")),e.createElement(S,{list:Array.from({length:28},(d,n)=>`the ${st(n+1)} day`),value:s(2)-1,onChange:(d,{value:n})=>{s(2,n+1)},"data-test-name":"pick-day-in-month"}),e.createElement(f,null,(0,a._)("At")),e.createElement(S,{list:Y,value:s(1),onChange:(d,{value:n})=>{s(1,n)},"data-test-name":"pick-hour-in-day-in-month"}));case"cron":return e.createElement(e.Fragment,null,e.createElement(ze,{inline:!0,value:t,onChange:(d,{value:n})=>{l(n)},"data-test-name":"pick-cron"}),e.createElement(f,null,(0,a._)("e.g 0 18 * * * (every day at 6:00pm)")));default:throw new Error(`Unknown option "${r}"`)}})();return e.createElement(q,{label:(0,a._)("Schedule"),tabIndex:0},e.createElement(je,{style:{flexShrink:0}},e.createElement(tt,{disabled:i,value:r,onChange:(d,{value:n})=>{c(n==="cron"),l(Me[n].cronDefault)}},Object.entries(Me).map(([d,{label:n}])=>e.createElement(k.Option,{key:n,label:n,value:d,"data-test-name":d}))),e.createElement("div",null,m)))},dt={marginLeft:"10px"},ct={overflowX:"hidden"},mt={marginRight:"20px",display:"inline-flex",alignItems:"center",verticalAlign:"middle"},ut={height:"16px"},ht={height:"14px"},pt={margin:"0 4px"},Ge=R($e.filename),O=class extends e.Component{constructor(t){super(t),h(this,"fieldsLoaded"),h(this,"loadInitialFields",()=>y(this,null,function*(){this.setState({loading:!0});let{defaultState:l}=O,i=yield xe(this.props.dashboardId,this.props.app);try{let{is_scheduled:r=l.enabled,cron_schedule:o=l.cronSchedule,"action.email.to":c=l.emailTo,"action.email.bcc":s=l.emailBCC,"action.email.cc":m=l.emailCC,"action.email.priority":d=l.emailPriority,"action.email.subject":n=l.emailSubject,"action.email.message":E=l.emailMessage}=i.entry[0].content,_={enabled:r,cronSchedule:o,emailTo:c,emailBCC:s,emailCC:m,emailPriority:d,emailSubject:n,emailMessage:E};this.fieldsLoaded=_,this.setState(u({loading:!1},_))}catch(r){this.setState({loading:!1})}})),h(this,"testFieldsOK",()=>y(this,null,function*(){let{emailTo:l,emailBCC:i,emailCC:r,cronSchedule:o,errorA11yToggle:c}=this.state;if(!l&&this.state.enabled)return this.setState({errorBanner:ue,errorA11yToggle:!c,errorEmailTo:(0,a._)("Please fill in this field")}),!1;let[s,m,d]=yield Promise.all([J(l),J(i),J(r)]);return s&&this.setState({errorBanner:s,errorA11yToggle:!c,errorEmailTo:s}),(m||d)&&this.setState({errorBanner:m||d,errorA11yToggle:!c}),s||m||d?!1:o?!0:(this.setState({errorBanner:(0,a._)("Please select a schedule"),errorA11yToggle:!c}),!1)})),h(this,"handleCloseModal",l=>{this.props.onCloseModal(l),l==="cancel"&&this.props.trackEvent(ie),setTimeout(()=>{this.setState(u({},O.defaultState))},500)}),h(this,"handleSendTestEmail",()=>y(this,null,function*(){if(!(yield this.testFieldsOK()))return!1;try{return yield ve({dashboardId:this.props.dashboardId,app:this.props.app,emailTo:this.state.emailTo,emailBCC:this.state.emailBCC,emailCC:this.state.emailCC,emailMessage:this.state.emailMessage,emailPriority:this.state.emailPriority,emailSubject:this.state.emailSubject}),!0}catch(i){return this.setState({errorBanner:i.message,errorA11yToggle:!this.state.errorA11yToggle}),!1}})),h(this,"handleEmailFieldChange",(l,{name:i,value:r})=>{this.setState({[i]:r,errorEmailTo:void 0,errorBanner:void 0})}),h(this,"handleSave",()=>y(this,null,function*(){if(!(yield this.testFieldsOK()))return;let{dashboardId:i,trackEvent:r,app:o}=this.props,{enabled:c,emailTo:s,emailBCC:m,emailCC:d,emailMessage:n,emailPriority:E,emailSubject:_,cronSchedule:te}=this.state,z=v=>v.split(",").filter(p=>p!=="").length;try{let v=yield Fe({enabled:c,dashboardId:i,app:o,emailTo:s,emailBCC:m,emailCC:d,emailMessage:n,emailPriority:E,emailSubject:_,cronSchedule:te}),{entry:p}=v,G="";Array.isArray(p)&&p[0]&&p[0].content&&p[0].content.next_scheduled_time&&(G=new Date(p[0].content.next_scheduled_time.replace(/\s*[A-Z]+$/,"")).toLocaleString().replace(/:00 (a|p)\.m/,"$1m")),r(se({enabledInitially:this.fieldsLoaded&&this.fieldsLoaded.enabled||!1,enabledAtSave:this.state.enabled,cronSchedule:te,emailCountTo:z(s),emailCountBCC:z(m),emailCountCC:z(d),emailSubjectLength:_.length,emailMessageLength:n.length})),this.props.createToast({type:"success",message:e.createElement(e.Fragment,null,e.createElement("strong",null,(0,a._)(`Schedule ${this.state.enabled?"enabled":"disabled"} and saved`)),G&&e.createElement("span",null,e.createElement("br",null),(0,a._)("The next scheduled email will send on "),G)),autoDismiss:!0,dismissOnActionClick:!0,showAction:!1}),this.props.onSave(this.state),this.handleCloseModal("save")}catch(v){let{message:p=""}=v;console.error(v),(!p||/^\d\d\d\s*-?/.test(p))&&(p=(0,a._)("The server did not accept your entry; the chosen schedule may not be supported")),this.setState({errorBanner:p}),r({type:"dashboard.telemetry",data:{pageAction:"scheduledExport.save",success:!1,serverError:p}}),r(oe(v.message))}})),h(this,"handleRequestClose",()=>this.handleCloseModal("cancel")),h(this,"handleActivateSwitch",()=>{this.setState(l=>({enabled:!l.enabled}))}),h(this,"handleCronChange",l=>{this.setState({cronSchedule:l})}),h(this,"getErrors",()=>this.state.errorBanner?[this.state.errorBanner]:[]),h(this,"getDisabledContextValue",()=>({disabled:this.state.loading||!this.state.enabled})),this.state=u({},O.defaultState),this.fieldsLoaded=void 0}componentDidMount(){this.loadInitialFields()}componentDidUpdate(t){t.open===!1&&this.props.open&&this.loadInitialFields()}render(){return e.createElement(Ke,{open:this.props.open},e.createElement(T.Header,{"aria-labelledby":"modal-header-text",title:e.createElement("span",null,e.createElement("span",{id:"modal-header-text"},(0,a._)("Edit Export Schedule")),this.state.loading&&e.createElement("span",{style:dt},e.createElement(N,null))),onRequestClose:this.handleRequestClose}),e.createElement(T.Body,{style:ct},e.createElement(fe,{appearance:"fill",errors:this.getErrors(),errorA11yToggle:this.state.errorA11yToggle}),e.createElement(g,{label:(0,a._)("Enable"),tabIndex:0,"data-test":"enable-control-group"},e.createElement(V,u({onClick:this.handleActivateSwitch,selected:this.state.enabled,disabled:this.state.loading,appearance:"toggle"},Ge("activate-export")),this.state.enabled?(0,a._)("Active"):(0,a._)("Inactive"))),e.createElement(x.Provider,{value:this.getDisabledContextValue()},e.createElement(g,{label:(0,a._)("Dashboard"),tabIndex:0},e.createElement(W,null,e.createElement("strong",null,this.props.dashboardName))),e.createElement(ot,{cronExpression:this.state.cronSchedule,handleCronExpressionChange:this.handleCronChange}),e.createElement(g,{label:""},e.createElement("div",null,e.createElement(f,null,(0,a._)("The schedule is set to the timezone of this Splunk instance")))),e.createElement(Ie,null),e.createElement(nt,{emailTo:this.state.emailTo,emailBCC:this.state.emailBCC,emailCC:this.state.emailCC,emailPriority:this.state.emailPriority,emailSubject:this.state.emailSubject,emailMessage:this.state.emailMessage,handleGenericEmailChange:this.handleEmailFieldChange,error:this.state.errorEmailTo}),e.createElement(Ie,null))),e.createElement(Qe,null,e.createElement("div",null,e.createElement(B,{appearance:"default","data-test":"modal-cancel",onClick:this.handleRequestClose,label:(0,a._)("Cancel")})),e.createElement("div",null,e.createElement(ft,{text:(0,a._)("Send Test Email"),linkIcon:e.createElement(Q.ShareActionsIcon,{appearance:"filled",size:"s"}),startPromise:this.handleSendTestEmail}),e.createElement(B,{appearance:"primary",onClick:this.handleSave,"data-test":"modal-save",label:this.state.enabled?(0,a._)("Save & Enable"):(0,a._)("Save & Disable")}))))}},ee=O;h(ee,"defaultProps",{onCloseModal:()=>{},onSave:()=>{},trackEvent:()=>{},createToast:()=>{}});h(ee,"defaultState",{loading:!1,emailTo:"",emailBCC:"",emailCC:"",emailPriority:"3",emailSubject:(0,a._)("Splunk Dashboard: $dashboard.label$"),emailMessage:(0,a._)("A dashboard was generated for $dashboard.label$"),enabled:!0,errorBanner:void 0,errorA11yToggle:!1,errorEmailTo:void 0,cronSchedule:"0 18 * * *"});function ft(t){let{startPromise:l}=t,[i,r]=(0,F.useState)(!1),[o,c]=(0,F.useState)(void 0);(0,F.useEffect)(()=>{if(!i){let m=setTimeout(()=>{c(void 0)},1e3);return()=>clearTimeout(m)}return()=>{}});let s=(0,F.useCallback)(()=>{r(!0);let m=e.createElement(Be,{height:"14px",width:"14px",preserveAspectRatio:"xMaxYMid"}),d=e.createElement(Pe,{height:"14px",width:"14px",preserveAspectRatio:"xMaxYMid"});l().then(n=>{r(!1),c(n?m:d)}).catch(()=>{r(!1),c(d)})},[l]);return e.createElement(U,u({onClick:s,style:mt},Ge("send-test-email")),t.linkIcon&&e.createElement("span",{style:ut},t.linkIcon),e.createElement("span",{style:pt},t.text),i&&e.createElement(N,{size:"small",style:ht}),o)}var Ut=e.memo(ee);export{Ut as default};
