(self["webpackJsonp-desktop-app"]=self["webpackJsonp-desktop-app"]||[]).push([[66142],{o6hE:(e,t,n)=>{"use strict";n.d(t,{AR:()=>i,V7:()=>a,gL:()=>s,mG:()=>o,yK:()=>r,yc:()=>c,ys:()=>l});const o="kwcollection",r="global",i="global:kwc",s="user:kwc",a="KW Create your own",l="KW None",c=50},rjgr:(e,t,n)=>{"use strict";n.d(t,{$D:()=>r,HY:()=>notifyKWCUIEvent,ew:()=>useCustomKWCUIEvent});var o=n("YWiy");const r=new(n("18Hv").A),useCustomKWCUIEvent=(e,t)=>{(0,o.useEffect)((()=>(r.subscribe(e,t),()=>r.unsubscribe(e,t))),[])},notifyKWCUIEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.dispatch(e,t)}},"2Wlf":(e,t,n)=>{"use strict";n.d(t,{s3:()=>g,Ay:()=>p,c:()=>_,te:()=>m});const o=class NoteConfigs{constructor(){this.directUploadSizeLimit=5242880,this.directDownloadLimit=10485760,this.autoSaveFrequency=2e4}};var r=n("CVnK"),i=n("mVLN");const s=class NoteStore{constructor(){var e=this;this.selectedNoteId=null,this.makeNotesEndless=!1,this.noteListError=!1,this.showBottomBar=!1,this.activeNoteAttributions={noteId:"",attributions:[],activeAttribution:null},this.setNoteListError=e=>{this.noteListError=e},this.setNoteIdForActiveNoteAttributions=e=>{this.activeNoteAttributions.noteId=null!=e?e:""},this.setActiveNoteAttributions=e=>{this.activeNoteAttributions={noteId:this.activeNoteAttributions.noteId,attributions:e,activeAttribution:this.activeNoteAttributions.activeAttribution}},this.updateShowBottomBar=e=>{this.showBottomBar=e},this.addNote=function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const n=e.notes.findIndex((e=>e.created<t.created));-1===n?e.notes.unshift(t):e.notes.splice(n,0,t)}else e.notes.unshift(t)},this.deleteNote=e=>{this.notes=this.notes.filter((t=>t.id!==e))},this.removeAllNotes=()=>{this.notes=[]},this.getNoteFromId=e=>this.notes.find((t=>t.id===e)),this.ifNoteExists=e=>this.notes.some((t=>t.name===e)),this.updateNoteTitle=(e,t)=>{const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].name=t)},this.updateNoteAccessLevel=(e,t)=>{const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].accessLevel=t)},this.updateNoteShowAttributions=(e,t)=>{const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].showAttributions=t)},this.updateNoteChecked=(e,t)=>{const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].checked=t)},this.updateNoteCollapseState=(e,t)=>{const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].isCollapsed=t)},this.updateNotecontent=(e,t)=>{const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].content=t)},this.updateIsCreatedInServer=(e,t)=>{e.isCreatedInServer=t},this.updateNoteStatus=(e,t)=>{e.status=t},this.updateNoteIsHovered=(e,t)=>{e.isHovered=t},this.updateNoteConfigs=e=>{this.noteConfigs=e},this.setAddNoteInProgress=e=>{this.addNoteInProgress=e},this.setSelectedNoteId=e=>{this.selectedNoteId=e},this.setContentLoaded=(e,t)=>{e.contentLoaded=t},this.updateContentSource=(e,t)=>{e.contentSource=t},this.updateNoteFromCreateNoteResponse=(e,t)=>{e.id=t.id,e.name=t.name,e.accessLevel=t.access_level,e.eTag=t.eTag,e.status=i.fd.kUploaded,e.isCreatedInServer=!0},this.setMakeNotesEndless=e=>{this.makeNotesEndless=e},this.updateNoteIsInEditMode=(e,t)=>{e.isInEditMode=t},this.getNoteIndex=e=>this.notes.findIndex((t=>t.id===e)),this.restoreNote=(e,t)=>{t>=0&&t<=this.notes.length?this.notes.splice(t,0,e):this.notes.push(e)},this.noteConfigs=new o,this.notes=[],this.addNoteInProgress=!1,(0,r.Gn)(this,{notes:r.sH,addNoteInProgress:r.sH,selectedNoteId:r.sH,makeNotesEndless:r.sH,showBottomBar:r.sH,noteListError:r.sH,addNote:r.XI,deleteNote:r.XI,updateNoteTitle:r.XI,updateNoteAccessLevel:r.XI,updateNoteShowAttributions:r.XI,updateNoteChecked:r.XI,updateNoteCollapseState:r.XI,setAddNoteInProgress:r.XI,setSelectedNoteId:r.XI,setContentLoaded:r.XI,updateIsCreatedInServer:r.XI,updateContentSource:r.XI,updateNoteFromCreateNoteResponse:r.XI,updateNoteFromDownloadNoteResponse:r.XI,updateNoteFromSaveNoteResponse:r.XI,setMakeNotesEndless:r.XI,updateNoteStatus:r.XI,updateNoteIsHovered:r.XI,updateShowBottomBar:r.XI,updateNoteIsInEditMode:r.XI,setNoteListError:r.XI,getNoteIndex:r.XI,restoreNote:r.XI})}get notesCount(){return this.notes.length}updateNoteFromDownloadNoteResponse(e,t){e.content=JSON.parse(t.content),e.eTag=t.eTag,e.status=i.fd.kDownloaded,e.contentLoaded=!0}updateNoteFromSaveNoteResponse(e,t){const n=this.notes.findIndex((t=>t.id===e));-1!==n&&(this.notes[n].eTag=t.eTag)}getAvailableNoteName(){let e=this.notesCount,t=0===e?"Untitled":`Untitled ${e}`;for(;this.ifNoteExists(t);)e+=1,t=`Untitled ${e}`;return t}};var a=n("vJCg"),l=n("rjgr");const c=class SourceStore{constructor(){this.sources=[],(0,r.Gn)(this,{sources:r.sH,addSource:r.XI,deleteSource:r.XI,updateSourceTitle:r.XI,mergeSources:r.XI,setSources:r.XI,updateSourceCheckedStatus:r.XI,updateAllSourceCheckedStatus:r.XI,allSourcesImported:r.EW,sourceCountNoErrorImported:r.EW,sourceCountNoError:r.EW,updateErrorStatus:r.XI,updateIngestionStatus:r.XI,importedSources:r.EW,sourceCountFailedBeforeImport:r.EW})}addSource(e){0===this.sources.length&&(0,l.HY)(a.A.kSourceListAvailable),this.sources.unshift(e)}addSources(e){this.sources.push(...e)}mergeSources(e){const t=[];e.forEach((e=>{const n=this.sources.find((t=>t.id===e.id));n?(n.status=e.status,n.errorStatus=e.errorStatus):t.push(e)})),this.sources.push(...t)}deleteSource(e){this.sources=this.sources.filter((t=>t.id!==e)),(0,l.HY)(a.A.kCollectionUpdated)}getSourceFromId(e){return this.sources.find((t=>t.id===e))}getSourceFromName(e){return this.sources.find((t=>t.name===e))}updateSourceTitle(e,t){const n=this.sources.findIndex((t=>t.id===e));-1!==n&&(this.sources[n].name=t)}updateSourceCheckedStatus(e,t){const n=this.sources.findIndex((t=>t.id===e));-1!==n&&(this.sources[n].checked=t)}updateAllSourceCheckedStatus(e){this.sources.forEach((t=>{t.checked=e}))}setSources(e){this.sources=e}get allSourcesImported(){const e=this.sources.filter((e=>e.errorStatus===i.by.kKWNoError||e.errorStatus===i.by.kKWSamFileDownloadError||e.errorStatus===i.by.kKWDeleteError||e.errorStatus===i.by.kIngestionFailed));return e.length>0&&-1===e.findIndex((e=>e.status<i.fd.kImported))}get sourceCountNoErrorImported(){return this.sources.filter((e=>e.errorStatus===i.by.kKWNoError||e.errorStatus===i.by.kKWSamFileDownloadError)).filter((e=>e.status>=i.fd.kImported)).length}get sourceCountNoError(){return this.sources.filter((e=>e.errorStatus===i.by.kKWNoError||e.errorStatus===i.by.kKWSamFileDownloadError)).length}get importedSources(){return this.sources.filter((e=>e.status>=i.fd.kImported))}updateErrorStatus(e,t){const n=this.sources.findIndex((t=>t.id===e));-1!==n&&(this.sources[n].errorStatus=t)}updateIngestionStatus(e,t,n){const o=this.sources.findIndex((t=>t.id===e));-1!==o&&(this.sources[o].ingestionStatus={status:t,errorCode:n})}get sourceCountFailedBeforeImport(){return this.sources.filter((e=>e.status<i.fd.kImported&&e.errorStatus!==i.by.kKWNoError)).length}};var u=n("2NhI"),d=n("o6hE"),h=n("bV+/");const v=class CustomAgentStore{constructor(){this.selectedCustomAgentId=null,this.generateInstructionsErrorState=null,this.intendedCustomAgent="",this.nativeSpectrumToastPosition=i.Xu.kBottomRight,this.defaultCustomAgentName="",this.showCustomAgentForRecipient=!1,this.recipientCustomAgentUserKWC=!1,this.setAddCustomAgentInProgress=e=>{this.addCustomAgentInProgress=e},this.setSelectedCustomAgentId=e=>{this.selectedCustomAgentId=e},this.setConfirmedCustomAgentChange=e=>{this.changeConfirmedOnce=e},this.setShowCustomAgentForRecipient=e=>{this.showCustomAgentForRecipient=e},this.setShowCustomAgentChangeSoftBanner=e=>{this.showCustomAgentChangeSoftBanner=e},this.shouldCloseModalStringifiedJson=e=>{const t={closeModal:e};return JSON.stringify(t)},this.showCustomAgentChangeSoftBannerIfRequire=()=>{if(this.confirmedCustomAgentChange)if(this.canShowCustomAgentChangeSoftBanner){const e={type:i.O.kInfo,timeout:5,position:this.nativeSpectrumToastPosition,message:"ChangeAgent"};(0,h.uJ)(e)}else this.setShowCustomAgentChangeSoftBanner(!0)},this.showCustomAgentDeleteSoftBanner=e=>{const t={type:i.O.kPositive,timeout:5,position:this.nativeSpectrumToastPosition,message:e?"DeleteActiveAgent":"DeleteAgent"};(0,h.uJ)(t)},this.showCustomAgentDeleteNotFoundSoftBanner=()=>{const e={type:i.O.kNegative,timeout:5,position:this.nativeSpectrumToastPosition,message:"DeleteAgentNotFound"};(0,h.uJ)(e)},this.showCustomAgentDeleteFailureSoftBanner=()=>{const e={type:i.O.kNegative,timeout:5,position:this.nativeSpectrumToastPosition,message:"DeleteAgentFailure"};(0,h.uJ)(e)},this.showCustomAgentChangedToPresetSoftBanner=e=>{const t={type:i.O.kPositive,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentChangedToPreset",actionRef:e};(0,h.uJ)(t)},this.showCustomAgentChangedSoftBanner=()=>{const e={type:i.O.kPositive,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentChanged"};(0,h.uJ)(e)},this.showCustomAgentChangedToPresetFailureSoftBanner=e=>{const t={type:i.O.kNegative,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentChangedToPresetFailure",actionRef:e};(0,h.uJ)(t)},this.showCustomAgentChangedFailureSoftBanner=()=>{const e={type:i.O.kNegative,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentChangedFailure"};(0,h.uJ)(e)},this.showCustomAgentCreatedSoftBanner=()=>{const e={type:i.O.kPositive,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentCreated",actionRef:this.shouldCloseModalStringifiedJson(!0)};(0,h.uJ)(e)},this.showCustomAgentCreatedFailureSoftBanner=()=>{const e={type:i.O.kNegative,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentCreatedFailure"};(0,h.uJ)(e)},this.showCustomAgentModifiedSoftBanner=()=>{const e={type:i.O.kPositive,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentModified",actionRef:this.shouldCloseModalStringifiedJson(!0)};(0,h.uJ)(e)},this.showCustomAgentModifiedFailureSoftBanner=()=>{const e={type:i.O.kNegative,timeout:5,position:this.nativeSpectrumToastPosition,message:"CustomAgentModifiedFailure"};(0,h.uJ)(e)},this.showCustomAgentCreateNewNameConflictTryAgain=e=>{const t={type:i.O.kNegative,timeout:8,position:this.nativeSpectrumToastPosition,message:"CustomAgentCreateNewNameConflictTryAgain",actionRef:e};(0,h.uJ)(t)},this.showCustomAgentModifiedNameConflictTryAgain=(e,t)=>{const n={type:i.O.kNegative,timeout:8,position:this.nativeSpectrumToastPosition,message:"CustomAgentModifiedNameConflictTryAgain",actionString:e,actionRef:t};(0,h.uJ)(n)},this.showCustomAgentCreatedContentModulationErrorSoftBanner=e=>{const t={type:i.O.kNegative,timeout:8,position:this.nativeSpectrumToastPosition,message:"CustomAgentCreatedFailure",actionRef:e};(0,h.uJ)(t)},this.showCustomAgentModifiedContentModulationErrorSoftBanner=e=>{const t={type:i.O.kNegative,timeout:8,position:this.nativeSpectrumToastPosition,message:"CustomAgentModifiedFailure",actionRef:e};(0,h.uJ)(t)},this.setRecipientCustomAgentUserKWC=e=>{this.recipientCustomAgentUserKWC=e},this.customAgents=[],this.addCustomAgentInProgress=!1,this.changeConfirmedOnce=!1,this.showCustomAgentChangeSoftBanner=!1,this.nativeSpectrumToastPosition=i.Xu.kBottomRight,this.showCustomAgentForRecipient=!1,this.recipientCustomAgentUserKWC=!1,(0,r.Gn)(this,{customAgents:r.sH,addCustomAgentInProgress:r.sH,selectedCustomAgentId:r.sH,showCustomAgentForRecipient:r.sH,recipientCustomAgentUserKWC:r.sH,addCustomAgent:r.XI,removeCustomAgent:r.XI,setAddCustomAgentInProgress:r.XI,setSelectedCustomAgentId:r.XI,clearAllCustomAgentAudience:r.XI,setCustomAgentAudience:r.XI,updateCustomAgent:r.XI,setShowCustomAgentForRecipient:r.XI,setRecipientCustomAgentUserKWC:r.XI})}get defaultCustomAgentNameText(){return this.defaultCustomAgentName}set defaultCustomAgentNameText(e){this.defaultCustomAgentName=e}refreshCustomAgentStore(e){this.customAgents=e,this.customAgents.every((e=>e.audience!==d.mG||(this.setCustomAgentAudience(e.id,d.mG),!1)))}insertCustomAgentConsideringSort(e){const t=this.customAgents.findIndex((t=>t.name.localeCompare(e.name)>0));this.customAgents.splice(-1===t?this.customAgents.length:t,0,e)}addCustomAgent(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.insertCustomAgentConsideringSort(e):this.customAgents.push(e),e.audience===d.mG&&this.setCustomAgentAudience(e.id,d.mG)}removeCustomAgent(e){this.selectedCustomAgentId===e&&this.setSelectedCustomAgentId(null),this.customAgents=this.customAgents.filter((t=>t.id!==e))}replaceCustomAgent(e,t){this.selectedCustomAgentId===e&&this.setSelectedCustomAgentId(null);const n=this.customAgents.findIndex((t=>t.id===e));if(-1!==n){const e=this.customAgents[n].audience!==t.audience;this.customAgents[n]=t,e&&this.setCustomAgentAudience(t.id,t.audience)}}updateCustomAgent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.customAgents.findIndex((t=>t.id===e.id));if(-1!==n){const o=this.customAgents[n].audience!==e.audience;if(t)this.customAgents[n].audience=e.audience,this.customAgents[n].type=e.type;else{this.customAgents[n].name!==e.name?(this.customAgents.splice(n,1),this.insertCustomAgentConsideringSort(e)):this.customAgents[n]=e}o&&this.setCustomAgentAudience(e.id,e.audience)}}getCustomAgentFromId(e){return this.customAgents.find((t=>t.id===e))}getActiveCustomAgent(){return this.customAgents.find((e=>e.audience===d.mG))}clearAllCustomAgentAudience(){this.customAgents.forEach((e=>{e.audience===d.mG&&(e.audience="")}))}setCustomAgentAudience(e,t){const n=this.customAgents.findIndex((t=>t.id===e));-1!==n&&(t===d.mG?(this.clearAllCustomAgentAudience(),this.customAgents[n].audience=t,this.setSelectedCustomAgentId(this.customAgents[n].id)):(this.selectedCustomAgentId===e&&this.setSelectedCustomAgentId(null),this.customAgents[n].audience=t))}get customAgentsCount(){return this.customAgents.length}get confirmedCustomAgentChange(){return this.changeConfirmedOnce}get shouldShowCustomAgentForRecipient(){return this.showCustomAgentForRecipient}get canShowCustomAgentChangeSoftBanner(){return this.showCustomAgentChangeSoftBanner}setErrorState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.generateInstructionsErrorState=e,console.log("setErrorState::errorCode",e),console.log("setErrorState::transactionID",t)}get isRecipientCustomAgentUserKWC(){return this.recipientCustomAgentUserKWC}};const f=new class SessionStore{setAutoRenameStatus(e){this.wasAutoRenameSuccessful=e}get assets(){return[...this.sourceStore.sources,...this.noteStore.notes]}get sessionServiceV2BaseUri(){return this.genaiServiceLinks.sessionServiceV2BaseUri}set sessionServiceV2BaseUri(e){this.genaiServiceLinks.sessionServiceV2BaseUri=e}get senseiServiceBaseUri(){return this.genaiServiceLinks.senseiServiceBaseUri}set senseiServiceBaseUri(e){this.genaiServiceLinks.senseiServiceBaseUri=e}addAsset(e){let t=this.getAssetById(e.id);t?t=e:e&&(e.type!==i.PW.kUGA?this.sourceStore.addSource(e):this.noteStore.addNote(e))}getAssetById(e){let t=this.sourceStore.getSourceFromId(e);return t||(t=this.noteStore.getNoteFromId(e)),t}removeAssetById(e){const t=this.getAssetById(e);t&&(t.type!==i.PW.kUGA?this.sourceStore.deleteSource(t.id):this.noteStore.deleteNote(t.id))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.Z.kOwner,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",p=arguments.length>11&&void 0!==arguments[11]&&arguments[11],_=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"",m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:{sessionServiceV2BaseUri:"",senseiServiceBaseUri:""},g=arguments.length>14&&void 0!==arguments[14]&&arguments[14],E=arguments.length>15&&void 0!==arguments[15]&&arguments[15],C=arguments.length>16&&void 0!==arguments[16]&&arguments[16],y=arguments.length>17&&void 0!==arguments[17]&&arguments[17],A=arguments.length>18&&void 0!==arguments[18]&&arguments[18],b=arguments.length>19&&void 0!==arguments[19]&&arguments[19],O=arguments.length>20&&void 0!==arguments[20]&&arguments[20],S=arguments.length>21&&void 0!==arguments[21]&&arguments[21],R=arguments.length>22&&void 0!==arguments[22]&&arguments[22],I=arguments.length>23&&void 0!==arguments[23]?arguments[23]:"",N=arguments.length>24&&void 0!==arguments[24]?arguments[24]:"";this.sessionID=e,this.workspaceName=t,this.workspaceGoal=n,this.workspaceDescription=o,this.workspaceCreateLongNote=r,this.workspaceUpdateLongNote=i,this.workspaceDownloadLongNote=a,this.isNewCollection=l,this.userRole=d,this.lpFolderId=h,this.notesFolderId=f,this.sourceStore=new c,this.noteStore=new s,this.customAgentStore=new v,this.enableShareAssetOutsideCollection=p,this.genAISessionId=_,this.genaiServiceLinks=m,this.workspaceUseCustomAgent=g,this.enableReportAbuse=E,this.enableDownloadAsPdf=C,this.isCuratedCollection=y,this.isKWCreationEnabled=A,this.isPresentInCache=b,this.wasAutoRenameSuccessful=O,this.isCalledFromVerifyOpen=S,this.isReadFromCache=R,this.recipientCustomAgentID=I,this.recipientCustomAgentType=N}},p=f,_=f.noteStore,m=f.sourceStore,g=f.customAgentStore},"bV+/":(e,t,n)=>{"use strict";n.d(t,{$W:()=>DeleteNoteConfirmation,Bo:()=>CreateEmptyFeedbackNote,Co:()=>InitAppMethodObj,EP:()=>ClearAllCustomAgents,Ec:()=>PerformNetworkCallSuccessWork,Fo:()=>AIAConsentConfirmation,GI:()=>notifyNativeToInitiateNotesSharingFromKW,HE:()=>DownloadLongNote,IG:()=>InitiateKWSignIn,I_:()=>UpdatePDFPreviewDataAPI,Il:()=>CreateNoteFromCompleteChatHistory,Ny:()=>OpenJITDialogForKW,QK:()=>OnNotesListFetched,Rt:()=>GetClearChatConfirmation,SE:()=>OpenCustomAgentModal,SH:()=>openShareSheetKwAssetShare,Uq:()=>ShowSingleAssetShareToast,Vf:()=>ShowNativeSpectrumToast,_f:()=>GetKWCThumbnail,ab:()=>SetUndoRedoVisibilityInTopBar,dl:()=>FetchOwnerAvatar,e9:()=>AIAConsentStatus,h6:()=>IncrementKWOnboardingShownCount,i8:()=>executeKWCNativeEvent,kM:()=>OpenProtectedURL,my:()=>FetchAutoRenameStatus,r:()=>CloseCollection,rC:()=>CanChangeCustomAgent,s8:()=>OpenAddSourceModal,tE:()=>UpdateRedoEnabledStateInTopBar,tJ:()=>UpdateUndoEnabledStateInTopBar,tw:()=>FetchDefaultAvatar,uJ:()=>ShowCustomAgentChangeSoftBanner,zq:()=>ShowEditNoteWithAttributionsConfirmationDialog});var o=n("U5BB"),r=n("oYND"),__awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};const executeKWCNativeEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return __awaiter(void 0,void 0,void 0,(function*(){const t=yield o.A.getKWCAPIObject();let r=null;return t&&(r=yield t.invoke(e,...n)),r}))},InitAppMethodObj=()=>executeKWCNativeEvent(r.A.INIT),OpenAddSourceModal=(e,t)=>executeKWCNativeEvent(r.A.ADD_SOURCE_MODAL,e,t),UpdatePDFPreviewDataAPI=e=>executeKWCNativeEvent(r.A.UPDATE_PREVIEW_DATA,{DesiredRect:e}),DownloadLongNote=(e,t,n)=>executeKWCNativeEvent(r.A.DOWNLOAD_LONG_NOTE,e,t,n),DeleteNoteConfirmation=(e,t)=>executeKWCNativeEvent(r.A.DELETE_NOTE_CONFIRMATION,e,t),ShowNativeSpectrumToast=e=>executeKWCNativeEvent(r.A.SHOW_NATIVE_SPECTRUM_TOAST,e),CloseCollection=e=>executeKWCNativeEvent(r.A.CLOSE_COLLECTION,e),SetUndoRedoVisibilityInTopBar=e=>executeKWCNativeEvent(r.A.UNDO_REDO_VISIBILITY,e),UpdateUndoEnabledStateInTopBar=e=>executeKWCNativeEvent(r.A.UPDATE_UNDO_ENABLED_STATE,e),UpdateRedoEnabledStateInTopBar=e=>executeKWCNativeEvent(r.A.UPDATE_REDO_ENABLED_STATE,e),OpenProtectedURL=e=>executeKWCNativeEvent(r.A.OPEN_PROTECTED_URL,e),IncrementKWOnboardingShownCount=()=>executeKWCNativeEvent(r.A.INCREMENT_ONBOARDING_COUNT),FetchOwnerAvatar=e=>executeKWCNativeEvent(r.A.FETCH_OWNER_AVATAR,e),FetchDefaultAvatar=()=>executeKWCNativeEvent(r.A.FETCH_DEFAULT_AVATAR),FetchAutoRenameStatus=e=>executeKWCNativeEvent(r.A.GET_STATUS_AUTO_RENAME,e),openShareSheetKwAssetShare=(e,t,n,o)=>__awaiter(void 0,void 0,void 0,(function*(){return executeKWCNativeEvent(r.A.KW_SHARE_ASSET,e,t,n,o)})),notifyNativeToInitiateNotesSharingFromKW=(e,t,n,o,i)=>__awaiter(void 0,void 0,void 0,(function*(){return executeKWCNativeEvent(r.A.KW_NOTIFY_NATIVE_SHARE_NOTE,e,t,n,o,i)})),ShowSingleAssetShareToast=(e,t,n)=>__awaiter(void 0,void 0,void 0,(function*(){return executeKWCNativeEvent(r.A.SHOW_SINGLE_ASSET_SHARE_TOAST,e,t,n)})),PerformNetworkCallSuccessWork=e=>{executeKWCNativeEvent(r.A.PERFORM_NETWORK_CALL_SUCCESS,e)},ShowEditNoteWithAttributionsConfirmationDialog=()=>executeKWCNativeEvent(r.A.EDIT_NOTE_WITH_ATTRIBUTIONS_CONFIRMATION),OpenCustomAgentModal=e=>executeKWCNativeEvent(r.A.OPEN_CUSTOM_AGENT_MODAL,e),CanChangeCustomAgent=()=>executeKWCNativeEvent(r.A.CAN_CHANGE_CUSTOM_AGENT),ShowCustomAgentChangeSoftBanner=e=>executeKWCNativeEvent(r.A.SHOW_CUSTOM_AGENT_CHANGE_SOFT_BANNER,e),CreateNoteFromCompleteChatHistory=()=>executeKWCNativeEvent(r.A.CREATE_NOTE_FROM_COMPLETE_CHAT_NATIVE),CreateEmptyFeedbackNote=()=>executeKWCNativeEvent(r.A.CREATE_EMPTY_FEEDBACK_NOTE_NATIVE),ClearAllCustomAgents=()=>executeKWCNativeEvent(r.A.CLEAR_ALL_CUSTOM_AGENTS),GetClearChatConfirmation=()=>executeKWCNativeEvent(r.A.CLEAR_CHAT_CONFIRMATION),OnNotesListFetched=()=>executeKWCNativeEvent(r.A.ON_NOTES_LIST_FETCHED),InitiateKWSignIn=()=>executeKWCNativeEvent(r.A.INITIATE_KW_SIGN_IN),GetKWCThumbnail=(e,t,n,o,i)=>executeKWCNativeEvent(r.A.GET_KWC_THUMBNAIL,{assetId:e,renditionAssetId:t,renditionAssetUrl:n,fetchFromSAM:o,sizeToBeFetched:i}),OpenJITDialogForKW=()=>executeKWCNativeEvent(r.A.OPEN_JIT_DIALOG_KW),AIAConsentConfirmation=()=>executeKWCNativeEvent(r.A.AIA_CONSENT_CONFIRMATION),AIAConsentStatus=()=>executeKWCNativeEvent(r.A.AIA_CONSENT_STATUS)},mVLN:(e,t,n)=>{"use strict";var o,r,i,s,a,l,c,u,d,h;n.d(t,{O:()=>d,PW:()=>l,Xu:()=>h,Y1:()=>o,by:()=>a,fd:()=>r,js:()=>u,qu:()=>i,rZ:()=>s,vU:()=>c}),function(e){e.kPDF="PDF",e.kURL="URL",e.kDOCX="DOCX",e.kPPTX="PPTX",e.kRTF="RTX",e.kXLV="XLV",e.kTXT="TXT",e.kVVT="VVT"}(o||(o={})),function(e){e[e.kToUpload=0]="kToUpload",e[e.kUploading=1]="kUploading",e[e.kUploaded=2]="kUploaded",e[e.kImporting=3]="kImporting",e[e.kImported=4]="kImported",e[e.kDownloading=5]="kDownloading",e[e.kDownloaded=6]="kDownloaded",e[e.kDeleted=7]="kDeleted"}(r||(r={})),function(e){e[e.kToUpdate=0]="kToUpdate",e[e.kUpdating=1]="kUpdating",e[e.kUpdated=2]="kUpdated",e[e.kNone=3]="kNone"}(i||(i={})),function(e){e[e.kCannotOpen=0]="kCannotOpen",e[e.kCanOpen=1]="kCanOpen",e[e.kToOpen=2]="kToOpen",e[e.kLocalOpened=3]="kLocalOpened",e[e.kOpened=4]="kOpened"}(s||(s={})),function(e){e[e.kKWNoError=0]="kKWNoError",e[e.kBlockUploadSuccess=1]="kBlockUploadSuccess",e[e.kBlockUploadFilePathUnavailable=2]="kBlockUploadFilePathUnavailable",e[e.kBlockUploadDiscoveryUnavailable=3]="kBlockUploadDiscoveryUnavailable",e[e.kBlockUploadError=4]="kBlockUploadError",e[e.kSamFilePathUnavailable=5]="kSamFilePathUnavailable",e[e.kKWImportError=6]="kKWImportError",e[e.kKWNotesAddError=7]="kKWNotesAddError",e[e.kKWNotesUpdateError=8]="kKWNotesUpdateError",e[e.kKWSAMFileUploadError=9]="kKWSAMFileUploadError",e[e.kKWSamFileDownloadError=10]="kKWSamFileDownloadError",e[e.kKWGenericError=11]="kKWGenericError",e[e.kKWMonitorError=12]="kKWMonitorError",e[e.kKWShareNotesError=13]="kKWShareNotesError",e[e.kDesktopWebURLConversionError=14]="kDesktopWebURLConversionError",e[e.kLargeFileSizeError=15]="kLargeFileSizeError",e[e.kKWImportErrorGeneric=16]="kKWImportErrorGeneric",e[e.kKWImportErrorUnauthorized=17]="kKWImportErrorUnauthorized",e[e.kKWImportErrorForbidden=18]="kKWImportErrorForbidden",e[e.kKWImportErrorObjNotFound=19]="kKWImportErrorObjNotFound",e[e.kKWImportErrorNotAcceptable=20]="kKWImportErrorNotAcceptable",e[e.kKWImportErrorUnsupportedMediaType=21]="kKWImportErrorUnsupportedMediaType",e[e.kKWImportErrorMaxFileSize=22]="kKWImportErrorMaxFileSize",e[e.kKWImportErrorTooManyRequests=23]="kKWImportErrorTooManyRequests",e[e.kKWImportErrorInternalServerErr=24]="kKWImportErrorInternalServerErr",e[e.kKWImportErrorServiceUnavailable=25]="kKWImportErrorServiceUnavailable",e[e.kKWImportErrorSourceIsEncrypted=26]="kKWImportErrorSourceIsEncrypted",e[e.kKWImportErrorTimeOut=27]="kKWImportErrorTimeOut",e[e.kKWImportErrorQuotaExceeded=28]="kKWImportErrorQuotaExceeded",e[e.kKWImportErrorSourceIsEmpty=29]="kKWImportErrorSourceIsEmpty",e[e.kKWImportErrorSourceTooLarge=30]="kKWImportErrorSourceTooLarge",e[e.kKWImportErrorUnsupportedMimeType=31]="kKWImportErrorUnsupportedMimeType",e[e.kKWImportErrorDocumentCorrupted=32]="kKWImportErrorDocumentCorrupted",e[e.kKWImportErrorGone=33]="kKWImportErrorGone",e[e.kKWODBusinessSharedLinksNotSupported=34]="kKWODBusinessSharedLinksNotSupported",e[e.kKWODPersonalLegacyTokenDeprecated=35]="kKWODPersonalLegacyTokenDeprecated",e[e.kKWDeleteError=36]="kKWDeleteError",e[e.kIngestionFailed=37]="kIngestionFailed"}(a||(a={})),function(e){e[e.kPDF=0]="kPDF",e[e.kNonPDF=1]="kNonPDF",e[e.kUGA=2]="kUGA"}(l||(l={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.NORMAL=1]="NORMAL",e[e.EXPANDED=2]="EXPANDED",e[e.FULL_SCREEN=3]="FULL_SCREEN"}(c||(c={})),function(e){e.None="None",e.Sources="SourcesTab",e.Notes="NotesTab"}(u||(u={})),function(e){e[e.kInfo=0]="kInfo",e[e.kPositive=1]="kPositive",e[e.kNegative=2]="kNegative",e[e.kNeutral=3]="kNeutral"}(d||(d={})),function(e){e[e.kTopRight=0]="kTopRight",e[e.kBottomCenter=1]="kBottomCenter",e[e.kBottomRight=2]="kBottomRight"}(h||(h={}))},vJCg:(e,t,n)=>{"use strict";var o;n.d(t,{A:()=>r}),function(e){e.kSourceListAvailable="KWC::SourceListAvailable",e.kCollectionUpdated="KWC::CollectionUpdated",e.kNotesShowToast="KWC::NotesShowToast",e.kReloadAssetList="KWC::ReloadAssetList",e.kCustomAgentApplied="KWC::CustomAgentApplied",e.kRefreshCustomAgentsOnONS="KWC::RefreshCustomAgentsOnONS",e.kErrorStateChanged="KWC::ErrorStateChanged",e.kInvalidateAttributionMenu="KWC::InvalidateAttributionMenu"}(o||(o={}));const r=o},"C/hT":(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,Bm:()=>InitKWCacheEventsObj,p3:()=>o});var o,r=n("plsW"),i=n("sVfd"),__awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};!function(e){e[e.KWCollectionDoc=0]="KWCollectionDoc",e[e.KWCollectionChat=1]="KWCollectionChat",e[e.KWCollectionLPCard=2]="KWCollectionLPCard",e[e.KWCollectionGoal=3]="KWCollectionGoal",e[e.KWCollectionNote=4]="KWCollectionNote",e[e.KWCollectionShareInfo=5]="KWCollectionShareInfo",e[e.KWCollection=6]="KWCollection"}(o||(o={}));const s=class KWCacheNativeAPI{constructor(){this.KWCacheAPIPromise=null}static get Instance(){return this.instance||(this.instance=new this),this.instance}getKWCacheNativeAPI(){return __awaiter(this,void 0,void 0,(function*(){return this.KWCacheAPI?this.KWCacheAPI:(this.KWCacheAPIPromise||(this.KWCacheAPIPromise=this.createKWCacheAPIPromise()),this.KWCacheAPIPromise)}))}createKWCacheAPIPromise(){return __awaiter(this,void 0,void 0,(function*(){if(!r.providers["native-api"]){const e="Native API provider not found";throw(0,i.tz)(`KW:Cache API Object fetch failed due to: ${e}`),new Error(e)}try{const e=yield r.providers["native-api"]();return this.KWCacheAPI=yield null==e?void 0:e.KWCacheAPI(),this.KWCacheAPI}catch(e){throw(0,i.tz)(`KW:Cache API Object fetch failed due to: ${e}`),e}finally{this.KWCacheAPIPromise=null}}))}}.Instance,a=s,InitKWCacheEventsObj=()=>__awaiter(void 0,void 0,void 0,(function*(){const e=yield s.getKWCacheNativeAPI();e&&(yield e.FetchKWCacheEventsObject())}))},y4dE:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var o=n("yXqW"),r=n("jpy3"),i=n("j66d"),s=n("M+Pm"),a=n("C/hT"),l=n("bV+/"),c=n("bTOH"),__awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class CreateCollection extends s.t{MakeNetworkCall(e){return __awaiter(this,void 0,void 0,(function*(){const t=e;return this.invokeNetworkCall(e,"POST","",t,["kwcollections","create"],!0,!0,!0)}))}HandleRequest(e){return __awaiter(this,void 0,void 0,(function*(){let t={ERR_CODE:r.dE.UNKNOWN_ERROR};if(t=yield this.MakeNetworkCall(e),t.ERR_CODE===r.dE.NO_ERROR){const n=yield a.Ay.getKWCacheNativeAPI();null==n||n.WriteMetaDataToCache(t.id,t),t.fromCache=!1,this.OnNetworkCallSuccess(e)}return t}))}OnNetworkCallSuccess(e){e&&(0,l.Ec)({networkCallName:c.oj.CREATE_COLLECTION,name:e.name,goal:e.goal,description:e.description})}}var u=n("OHug"),UpdateCollection_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))},__rest=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};class UpdateCollection extends s.t{MakeNetworkCall(e){return UpdateCollection_awaiter(this,void 0,void 0,(function*(){const t=e,{iD:n}=t,o=__rest(t,["iD"]);return this.invokeNetworkCall(e,"PATCH",`/${n}`,o,["kwcollections","patch"],!1,!0,!0,{},u.A.CollectionURI,!1,"",{},void 0,{kwcollection_id:n})}))}HandleRequest(e){return UpdateCollection_awaiter(this,void 0,void 0,(function*(){let t={ERR_CODE:r.dE.UNKNOWN_ERROR};const n=e;if(t=yield this.MakeNetworkCall(n),t.ERR_CODE===r.dE.NO_ERROR){const e=yield a.Ay.getKWCacheNativeAPI(),t=yield null==e?void 0:e.readMetaDataFromCache(n.iD);t&&(t.name=n.name,t.description=n.description,null==e||e.WriteMetaDataToCache(n.iD,t)),this.OnNetworkCallSuccess(n)}return t}))}IsValidRequest(e){const t=e;return!!(t.name||t.description||t.goal)}OnNetworkCallSuccess(e){e&&(0,l.Ec)({networkCallName:c.oj.UPDATE_COLLECTION,id:e.iD,name:e.name,goal:e.goal,description:e.description})}}class DeleteCollectionPollCommand extends o.VM{constructor(e){super(o.Bm.DELETE_COLLECTION_POLL),this.pollingUrl=e}}var d=n("Jjq2"),DeleteCollection_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DeleteCollection extends s.t{MakeNetworkCall(e){var t,n,o,r;return DeleteCollection_awaiter(this,void 0,void 0,(function*(){const i=e.iD,s=yield(0,c.C5)(),a={Accept:null!=s?s:"application/json"},l=yield this.invokeNetworkCall(e,"DELETE",`/${i}`,{},["kwcollections","delete"],!1,!1,!0,void 0,u.A.CollectionURI,!1,"",a,void 0,{kwcollection_id:i});if(204===l.responseCode)return l;if(202===l.responseCode){if(l.job_uri&&l.retry_interval)return this.pollJobStatus(l.job_uri,null!==(t=null==l?void 0:l.retry_interval)&&void 0!==t?t:"1000",null!==(n=null==l?void 0:l.poll_timeout)&&void 0!==n?n:"300000");throw new Error("Job URI or retry interval is missing.")}if("FAILED"===l.status)throw new Error(`Job failed with error: ${(null===(o=l.error)||void 0===o?void 0:o.code)||"Unknown error"} - ${(null===(r=l.error)||void 0===r?void 0:r.message)||"No message provided"}`);return l}))}pollJobStatus(e,t,n){var o,r;return DeleteCollection_awaiter(this,void 0,void 0,(function*(){const delay=e=>new Promise((t=>setTimeout(t,e))),i=parseInt(t,10),s=parseInt(n,10),a=Date.now(),l=new DeleteCollectionPollCommand(e),h=l,v=yield(0,c.Rs)(),f={Accept:null!=v?v:"application/json"};for(;;){if(Date.now()-a>s)throw new Error(`Polling timed out after ${s}ms`);const t=yield this.invokeNetworkCall(l,"GET",e,h,["temp","temp"],!1,!1,!0,{},u.A.kwPollingURI,!1,"",f,void 0);if("DONE"===t.status)return(0,d.a8)(d.bi.CollectionLHP,d.Hc.Delete,`Delete collection job status: ${t.status}`),t;if("IN_PROGRESS"===t.status&&(0,d.a8)(d.bi.CollectionLHP,d.Hc.Delete,`Delete collection job status: ${t.status}`),"FAILED"===t.status)throw(0,d.a8)(d.bi.CollectionLHP,d.Hc.Delete,`Delete collection job status: ${t.status}`),new Error(`Job failed with error: ${(null===(o=t.error)||void 0===o?void 0:o.code)||"Unknown error"} - ${(null===(r=t.error)||void 0===r?void 0:r.message)||"No message provided"}`);yield delay(i)}}))}HandleRequest(e){return DeleteCollection_awaiter(this,void 0,void 0,(function*(){let t={ERR_CODE:r.dE.UNKNOWN_ERROR};const n=e;if(t=yield this.MakeNetworkCall(e),t.ERR_CODE===r.dE.NO_ERROR){(yield a.Ay.getKWCacheNativeAPI()).removeDataFromCache(n.iD),t.fromCache=!1,this.OnNetworkCallSuccess(n)}return t}))}OnNetworkCallSuccess(e){e&&(0,l.Ec)({networkCallName:c.oj.DELETE_COLLECTION,id:e.iD})}}var GetCollectionByID_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetCollectionByID extends s.t{MakeNetworkCall(e){return GetCollectionByID_awaiter(this,void 0,void 0,(function*(){const t=e.iD;return this.invokeNetworkCall(e,"GET",`/${t}`,{},["kwcollections","get"],!0,!1,!0,{},u.A.CollectionURI,!1,"",{},void 0,{kwcollection_id:t})}))}ExecuteNetworkRequest(e){return GetCollectionByID_awaiter(this,void 0,void 0,(function*(){const t=yield this.MakeNetworkCall(e),n=t;if(n.ERR_CODE===r.dE.NO_ERROR){const e=yield a.Ay.getKWCacheNativeAPI();null==e||e.WriteMetaDataToCache(n.id,n)}return t}))}HandleRequest(e){return GetCollectionByID_awaiter(this,void 0,void 0,(function*(){const t=e,n=yield a.Ay.getKWCacheNativeAPI(),o=yield null==n?void 0:n.readMetaDataFromCache(t.iD);if(o&&o.ERR_CODE===r.dE.APPLICATION_UPDATE_REQUIRED)return(0,d.a8)(d.bi.WorkspaceHome,d.Hc.ErrorNetworkFailure,"Application update required error (410) found in cache in GetCollectionByID"),console.log("Application update required from cache in GetCollectionByID"),o;if(o){o.fromCache=!0;const[t,n]=yield(0,c.kT)();if(t&&!n)return o;return[o,this.ExecuteNetworkRequest(e)]}return this.ExecuteNetworkRequest(e)}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetCollectionByID_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return o.fromCache=!1,o}))}}var h=n("srgf");class GetCollectionMetadataCommand extends o.VM{constructor(e){let{assetList:t}=e;super(o.Bm.GET_COLLECTION_METADATA),this.ids=t}}var GetAllCollections_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetAllCollections extends s.t{MakeNetworkCall(e){return GetAllCollections_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";const o={};return t.pageInfo?n=t.pageInfo.next_page_uri.split("/kwcollections")[1]:(t.order_by&&(o.order_by=t.order_by),t.sort_order&&(o.sort_order=t.sort_order),t.page_size&&(o.page_size=t.page_size)),this.invokeNetworkCall(e,"GET",n,{},["kwcollections","list"],!0,!1,!0,o,u.A.CollectionURI,!1,"",{},void 0,o,t.pageInfo?t.pageInfo.next_page_uri:void 0)}))}delay(e){return new Promise((t=>setTimeout(t,e)))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetAllCollections_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);if(o.ERR_CODE===r.dE.NO_ERROR){const e=t,n=e.pageInfo;o.fromCache=!1,o._pages.pageNumber=n?n.pageNumber+1:0;let r=[];o.children.forEach((e=>{r.push(e.id)})),1==e.addDelay&&(yield this.delay(2e3)),yield this.fetchMetadata(r,o)}return o}))}IsValidRequest(e){const t=e;return!(t.order_by&&!Object.values(h.J6).includes(t.order_by))&&(!(t.sort_order&&!Object.values(h.qP).includes(t.sort_order))&&(!t.page_size||t.page_size>=1&&t.page_size<=100))}fetchMetadata(e,t){return GetAllCollections_awaiter(this,void 0,void 0,(function*(){const n=new GetCollectionMetadataCommand({assetList:e}),o=yield A.ExecuteKWCommand(n);return o.ERR_CODE===r.dE.NO_ERROR&&t.children.forEach((e=>{const t=o.children[e.id];e.created=t.created,e.modified=t.modified,e.isShared=t.isShared,e.isOwner=t.isOwner,e.canComment=t.canComment})),t}))}}var GetCollectionMetadata_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetCollectionMetadata extends s.t{MakeNetworkCall(e){return GetCollectionMetadata_awaiter(this,void 0,void 0,(function*(){let t={};return e.ids&&(t=this.createBody(e)),this.invokeNetworkCall(e,"POST","",t,["",""],!1,!1,!0,{},u.A.USSUri,!0,void 0,{"Content-Type":"application/vnd.adobe.search-request+json",Accept:"application/json, text/javascript, */*; q=0.01","x-product-location":"document_cloud search input","x-product":"acrobat.adobe.com"})}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetCollectionMetadata_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return o.ERR_CODE===r.dE.NO_ERROR&&(o.children=o.children||{},e.data.result_sets[0].items.forEach((e=>{const t={id:e.asset_id,created:e.create_date,modified:e.modify_date,isShared:e.collab_metadata&&e.collab_metadata.shared_by&&e.collab_metadata.shared_by.length>0,isOwner:e.ownership_types&&e.ownership_types.length>0&&"owned"===e.ownership_types[0],canComment:!1,name:e.asset_name,rendition_asset_id:e.rendition_asset_id};o.children[e.asset_id]=t}))),o}))}IsValidRequest(e){const t=e;return void 0!==t.ids&&0!==t.ids.length}createBody(e){const t=e.ids;if(!t)throw new Error("Asset IDs are undefined");const n=t[0];return{op_none_of:[{"api:metadata/application$$shell:visibility":["hiddenSelf","hiddenRecursive"]},{"app_metadata$$project:directoryType":"team"},{op_field_exists:["app_metadata$$cc:inherited$$cc:team","app_metadata$$review:sourceAsset$$dc:format"]}],creative_cloud_asset_type:"collection",creative_cloud_toplevel_collection_name:"kwcs",asset_id_opacity:!0,fetch_fields:{includes:["api:metadata/application$$docCloud:kwCollection","api:metadata/application$$shell:lastActivity$$date","collab_metadata.collaborators","collab_metadata.shared_by","rendition_asset_id"]},scope:["creative_cloud"],function:[{name:"lookupAssetsWithAssetIdAndFilters",parameters:{assets_discovering_asset_tuple:[{asset_id:t.map((e=>e)),discovering_asset_id:`${n}`}]}}],limit:100}}}var v=n("htLm"),f=n("sVfd"),EnumerateAssests_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class EnumerateAssets extends s.t{MakeNetworkCall(e){return EnumerateAssests_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";const o={};return t.pageInfo?n=t.pageInfo.next_page_uri.split("/kwcollections")[1]:(n=`/${t.id}/assets`,t.order_by&&(o.order_by=t.order_by),t.sort_order&&(o.sort_order=t.sort_order),t.page_size&&(o.page_size=t.page_size)),this.invokeNetworkCall(e,"GET",n,{},["kwcollections","list_kwcollection_assets"],!0,!1,!0,o,u.A.CollectionURI,!1,"",{},void 0,Object.assign({kwcollection_id:t.id},o),t.pageInfo?t.pageInfo.next_page_uri:void 0)}))}IsCacheDataStale(e,t){if(super.IsCacheDataStale(e,t))return!0;if(!e.children||!t.children)return!0;if(e.children.length!==t.children.length)return!0;for(let n=0;n<e.children.length;n+=1){if(e.children[n].id!==t.children[n].id)return!0;if(e.children[n].modified!==t.children[n].modified)return!0}return!1}ExecuteNetworkRequest(e,t){var n,o;return EnumerateAssests_awaiter(this,void 0,void 0,(function*(){const i=e,s=yield this.MakeNetworkCall(e);if(s.ERR_CODE===r.dE.NO_ERROR){const e=yield a.Ay.getKWCacheNativeAPI(),r=[...void 0===(null===(n=i.pageInfo)||void 0===n?void 0:n.pageNumber)||0===(null===(o=i.pageInfo)||void 0===o?void 0:o.pageNumber)?[{purgeExistingCache:!0}]:[],...s.children];if(null==e||e.WriteMetaDataToCache(i.id,r,a.p3.KWCollectionDoc),t&&s&&!this.IsCacheDataStale(t,s))return Promise.reject(new Error("Sources are already up to date"))}return s}))}HandleRequest(e){return EnumerateAssests_awaiter(this,void 0,void 0,(function*(){const t={ERR_CODE:r.dE.UNKNOWN_ERROR},n=e;try{const o=yield a.Ay.getKWCacheNativeAPI(),i=yield null==o?void 0:o.readMetaDataFromCache(n.id,a.p3.KWCollectionDoc);if(i){(0,f.th)("KW:Cache: EnumerateAssets Data fetched from cache"),t.children=i,t.ERR_CODE=r.dE.NO_ERROR,t.responseCode=200;const[o,s]=yield(0,c.kT)();if(o&&!s)return t;n.page_size=20;return[t,this.ExecuteNetworkRequest(e,t)]}return(0,f.th)("KW:Cache: EnumerateAssets Data not found in cache"),this.ExecuteNetworkRequest(n)}catch(t){(0,f.tz)(`Error Reading KW sources data from cache due to: ${t}`);try{return this.ExecuteNetworkRequest(e)}catch(t){return(0,f.tz)(`Error fetching cache API due to: ${t}`),this.MakeNetworkCall(e)}}}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return EnumerateAssests_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);if(o.ERR_CODE===r.dE.NO_ERROR){const e=t.pageInfo;o._pages.pageNumber=e?e.pageNumber+1:0}return o}))}IsValidRequest(e){const t=e;return!(t.order_by&&!Object.values(v.J6).includes(t.order_by))&&(!(t.sort_order&&!Object.values(v.qP).includes(t.sort_order))&&(!t.page_size||t.page_size>=1&&t.page_size<=100))}}var DeleteAsset_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DeleteAsset extends s.t{MakeNetworkCall(e){return DeleteAsset_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.kwcID,o=t.assetID;return this.invokeNetworkCall(e,"DELETE",`/${n}/assets/${o}`,{},["kwcollections","delete_asset"],!1,!1,!0,{},u.A.CollectionURI,!1,"",{},void 0,{kwcollection_id:n,asset_id:o})}))}HandleRequest(e){return DeleteAsset_awaiter(this,void 0,void 0,(function*(){let t={ERR_CODE:r.dE.UNKNOWN_ERROR};const n=e;if(t=yield this.MakeNetworkCall(e),t.ERR_CODE===r.dE.NO_ERROR){(yield a.Ay.getKWCacheNativeAPI()).removeDataFromCache(n.kwcID,a.p3.KWCollectionDoc,n.assetID),t.fromCache=!1,this.OnNetworkCallSuccess(n)}return t}))}OnNetworkCallSuccess(e){e&&(0,l.Ec)({networkCallName:c.oj.DELETE_ASSET,assetId:e.assetID})}}var GetCollaborators_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetCollaborators extends s.t{MakeNetworkCall(e){return GetCollaborators_awaiter(this,void 0,void 0,(function*(){const t=e.kw_id;return this.invokeNetworkCall(e,"GET",`/kwcollections/${t}/collaborators`,{},["kwc_collaboration","get_collaborators"],!0,!1,!0,{},u.A.CollaborationURI,!1,"",{},void 0,{collection_id:t})}))}ExecuteNetworkRequest(e){return GetCollaborators_awaiter(this,void 0,void 0,(function*(){const t=e,n=yield this.MakeNetworkCall(e);if(n.ERR_CODE===r.dE.NO_ERROR){const e=yield a.Ay.getKWCacheNativeAPI();null==e||e.WriteMetaDataToCache(t.kw_id,n,a.p3.KWCollectionShareInfo)}return n}))}HandleRequest(e){return GetCollaborators_awaiter(this,void 0,void 0,(function*(){const t=e;if(t.fetch_from_cache){const n=yield a.Ay.getKWCacheNativeAPI(),o=yield null==n?void 0:n.readMetaDataFromCache(t.kw_id,a.p3.KWCollectionShareInfo);if(o){(0,f.th)("KW:Cache: GetCollaborators Data fetched from cache"),o.fromCache=!0;return[o,this.ExecuteNetworkRequest(e)]}(0,f.th)("KW:Cache: GetCollaborators Data not found in cache")}return this.ExecuteNetworkRequest(e)}))}}var GetUserSharingMetadata_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetUserSharingMetadata extends s.t{MakeNetworkCall(e){return GetUserSharingMetadata_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.kw_id,o=t.includeCustomAgent?"?include=custom_agent":"";return this.invokeNetworkCall(e,"GET",`/kwcollections/${n}/collaborators/me${o}`,{},["kwc_collaboration","get_metadata"],!0,!1,!0,{},u.A.CollaborationURI,!1,"",{},void 0,{collection_id:n})}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetUserSharingMetadata_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return o.fromCache=!1,o}))}}var AddCollaborators_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class AddCollaborators extends s.t{MakeNetworkCall(e){return AddCollaborators_awaiter(this,void 0,void 0,(function*(){const t=e,n={collaborators:t.collaborators,email_subject:t.email_subject,custom_message:t.custom_message};return this.invokeNetworkCall(e,"POST",`/kwcollections/${t.kwId}/collaborators`,n,["kwc_collaboration","add_collaborators"],!0,!0,!0,{},u.A.CollaborationURI,!1,"",{},void 0,{collection_id:t.kwId})}))}IsValidRequest(e){const t=e;return t.kwId.length>0&&t.collaborators.length>0}}var UpdateCollaborators_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class UpdateCollaborators extends s.t{MakeNetworkCall(e){return UpdateCollaborators_awaiter(this,void 0,void 0,(function*(){const t=e,n={collaborators:t.collaborators};return this.invokeNetworkCall(e,"PATCH",`/kwcollections/${t.kwId}/collaborators`,n,["kwc_collaboration","update_collaborators"],!0,!0,!0,{},u.A.CollaborationURI,!1,"",{},void 0,{collection_id:t.kwId})}))}IsValidRequest(e){const t=e;return t.kwId.length>0&&t.collaborators.length>0}}var Unshare_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class Unshare extends s.t{MakeNetworkCall(e){return Unshare_awaiter(this,void 0,void 0,(function*(){const t=e.kwID;return this.invokeNetworkCall(e,"DELETE",`/kwcollections/${t}/collaborators`,{},["kwc_collaboration","remove_collaborators"],!0,!1,!0,{},u.A.CollaborationURI,!1,"",{},void 0,{collection_id:t})}))}}var CreateChatSession_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class CreateChatSession extends s.t{MakeNetworkCall(e){return CreateChatSession_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.sessionId;return this.invokeNetworkCall(e,"POST",`/kwcollections/session/${n}/chat`,{doc_ids:{}},["temp","temp"],!1,!1,!0,{},u.A.ChatSessionURI,!0,"",{},t.session_service_v2_base_uri)}))}}var GetStatusInSession_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetStatusInSession extends s.t{MakeNetworkCall(e){return GetStatusInSession_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.session_id_or_collection_id;return this.invokeNetworkCall(e,"GET",`/kwcollections/session/${n}/status`,{},["temp","temp"],!1,!1,!0,{},u.A.ChatSessionURI,!0,"",{},t.session_service_v2_base_uri)}))}HandleRequest(e){return GetStatusInSession_awaiter(this,void 0,void 0,(function*(){return this.MakeNetworkCall(e)}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetStatusInSession_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return o.fromCache=!1,o}))}}var DeleteChatSession_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DeleteChatSession extends s.t{MakeNetworkCall(e){return DeleteChatSession_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.collection_id,o=t.chat_session_id;return this.invokeNetworkCall(e,"DELETE",`/kwcollections/${n}/conversations/${o}`,{},["genai_conversations","delete_kwcollection_conversations"],!1,!1,!0,{},u.A.ChatHistoryURI,!0,"",{},t.session_service_v2_base_uri)}))}}var DeleteDocumentsInSession_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DeleteDocumentsInSession extends s.t{MakeNetworkCall(e){return DeleteDocumentsInSession_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.chat_session_id,o={doc_ids:t.doc_ids};return this.invokeNetworkCall(e,"DELETE",`/kwcollections/session/chat/${n}/document`,o,["temp","temp"],!1,!1,!0,{},u.A.ChatSessionURI,!0,"",{},t.session_service_v2_base_uri)}))}}var p=n("36Lb"),GetListOfConversation_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetListOfConversation extends s.t{MakeNetworkCall(e){return GetListOfConversation_awaiter(this,void 0,void 0,(function*(){const t=e;let n=`/kwcollections/${t.id}/conversations`;const o={};return t.pageInfo?(n=t.pageInfo.next_page_uri.split("/kwcollections")[1],n=`/kwcollections${n}`):(t.order_by&&(o.order_by=t.order_by),t.sort_order&&(o.sort_order=t.sort_order),t.page_size&&(o.page_size=t.page_size)),this.invokeNetworkCall(e,"GET",n,{},["genai_conversations","list_kwcollection_conversations"],!0,!1,!0,o,u.A.ChatHistoryURI,!0)}))}IsValidRequest(e){const t=e;return!(t.order_by&&!Object.values(p.J6).includes(t.order_by))&&(!(t.sort_order&&!Object.values(p.qP).includes(t.sort_order))&&(!t.page_size||t.page_size>=1&&t.page_size<=50))}IsCacheDataStale(e,t){var n,o;return!!super.IsCacheDataStale(e,t)||(null===(n=null==e?void 0:e.conversations[0])||void 0===n?void 0:n.modified)!==(null===(o=null==t?void 0:t.conversations[0])||void 0===o?void 0:o.modified)}ExecuteNetworkRequest(e,t){return GetListOfConversation_awaiter(this,void 0,void 0,(function*(){const n=e,o=yield this.MakeNetworkCall(e);if(o.ERR_CODE===r.dE.NO_ERROR){if(Array.isArray(o.conversations)&&o.conversations.length>0){const e=yield a.Ay.getKWCacheNativeAPI();null==e||e.WriteMetaDataToCache(n.id,o.conversations[0],a.p3.KWCollectionChat,o.conversations[0].id)}if(t&&!this.IsCacheDataStale(t,o))return Promise.reject(new Error("Conversation List is already up to date"))}return o}))}HandleRequest(e){return GetListOfConversation_awaiter(this,void 0,void 0,(function*(){const t={ERR_CODE:r.dE.UNKNOWN_ERROR},n=e;try{const o=yield a.Ay.getKWCacheNativeAPI(),i=yield null==o?void 0:o.readMetaDataFromCache(n.id,a.p3.KWCollectionChat);if(i&&i.length>0&&null!==i[0]){t.conversations=i,t.ERR_CODE=r.dE.NO_ERROR,t.responseCode=200;const[n,o]=yield(0,c.kT)();return n&&!o||this.ExecuteNetworkRequest(e,t),t}return this.ExecuteNetworkRequest(n)}catch(t){(0,f.tz)(`Error Reading KW conversations list data from cache due to: ${t}`);try{return this.ExecuteNetworkRequest(e)}catch(t){return(0,f.tz)(`Error fetching cache API due to: ${t}`),this.MakeNetworkCall(e)}}}))}}class PollingStatusCommand extends o.VM{constructor(e){super(o.Bm.POLL_COPY_COLLECTION),this.pollingUrl=e}}var _=n("plsW"),CopyCollection_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class CopyCollection extends s.t{MakeNetworkCall(e){return CopyCollection_awaiter(this,void 0,void 0,(function*(){const t=Object.assign({},e);return delete t.mCommand,this.invokeNetworkCall(e,"POST","/copy",t,["kwcollections","copy"],!0,!0,!0)}))}HandleRequest(e){var t,n;return CopyCollection_awaiter(this,void 0,void 0,(function*(){let o={ERR_CODE:r.dE.UNKNOWN_ERROR};if(o=yield this.MakeNetworkCall(e),o.ERR_CODE===r.dE.NO_ERROR){const e=yield a.Ay.getKWCacheNativeAPI();if(null==e||e.WriteMetaDataToCache(o.id,o),o.fromCache=!1,"IN_PROGRESS"===o.status){if(o.job_uri&&o.retry_interval)return this.pollJobStatus(o.job_uri,o.retry_interval,o.poll_timeout);throw new Error("Job URI or retry interval is missing.")}if("FAILED"===o.status)throw new Error(`Job failed with error: ${(null===(t=o.error)||void 0===t?void 0:t.code)||"Unknown error"} - ${(null===(n=o.error)||void 0===n?void 0:n.message)||"No message provided"}`);return this.OnNetworkCallSuccess(),o}return o}))}OnNetworkCallSuccess(){(0,l.Ec)({networkCallName:c.oj.COPY_COLLECTION})}pollJobStatus(e,t,n){var o,r,i,s,a;return CopyCollection_awaiter(this,void 0,void 0,(function*(){const delay=e=>new Promise((t=>setTimeout(t,e))),l=parseInt(t,10),c=new PollingStatusCommand(e),d=c,h=yield _.providers["dc-discovery"](),v=yield h.GetDCDiscoveryReponse(),f=null===(i=null===(r=null===(o=null==v?void 0:v.resources)||void 0===o?void 0:o.kwcollections)||void 0===r?void 0:r.get_input_asset_job_status)||void 0===i?void 0:i.accept,p={accept:null==f?void 0:f["kwcollection_copied_asset_v1.json"]},m=Date.now();for(;;){const t=yield this.invokeNetworkCall(c,"GET",e,d,["kwcollections","get_input_asset_job_status"],!1,!0,!0,{},u.A.kwPollingURI,!1,"",p);if("DONE"===t.status)return t;if("FAILED"===t.status)throw new Error(`Job failed with error: ${(null===(s=t.error)||void 0===s?void 0:s.code)||"Unknown error"} - ${(null===(a=t.error)||void 0===a?void 0:a.message)||"No message provided"}`);if("IN_PROGRESS"===t.status&&console.log(`Job still in progress. Retrying in ${l} ms...`),Date.now()-m>n)throw new Error("Polling timeout exceeded");yield delay(l)}}))}}var m=n("iFic"),g=n("2Wlf"),GetAllNotes_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetAllNotes extends s.t{MakeNetworkCall(e){return GetAllNotes_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";const o={};return t.pageInfo?n=t.pageInfo.next_page_uri.split("/kwcollections")[1]:(n=`/kwcollections/${t.id}/notes`,t.access_level&&(o.access_level=t.access_level),t.order_by&&(o.order_by=t.order_by),t.sort_order&&(o.sort_order=t.sort_order),t.page_size&&(o.page_size=t.page_size),t.type&&(o.type=t.type)),this.invokeNetworkCall(e,"GET",n,{},["kwc_notes","list"],!0,!1,!0,o,u.A.NotesURI,!1,"",{},void 0,{kwcollection_id:t.id},t.pageInfo?t.pageInfo.next_page_uri:void 0)}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetAllNotes_awaiter(this,void 0,void 0,(function*(){return yield n.fillInterfaceResponse.call(this,e,t)}))}IsValidRequest(e){const t=e;return!(t.order_by&&!Object.values(m.J6).includes(t.order_by))&&(!(t.sort_order&&!Object.values(m.qP).includes(t.sort_order))&&(!t.page_size||t.page_size>=1&&t.page_size<=100))}getCollectionQuery(){return"lp_card"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user_note")?a.p3.KWCollectionLPCard:a.p3.KWCollectionNote}HandleRequest(e){return GetAllNotes_awaiter(this,void 0,void 0,(function*(){const t=e,n={ERR_CODE:r.dE.UNKNOWN_ERROR},o=this.getCollectionQuery(t.type),i="lp_card"==t.type?d.Hc.LandingPage:d.Hc.Notes;try{if(t.canFetchFromCache){const t=yield this.fetchNotesFromCache(o);if(t){n.children=t,n.ERR_CODE=r.dE.NO_ERROR,n.responseCode=200,(0,d.a8)(d.bi.CollectionLHP,i,"Fetched list from the cache");const[o,s]=yield(0,c.kT)();if(o&&!s)return n;return[n,this.ExecuteNetworkRequest(e,n)]}}return this.ExecuteNetworkRequest(e)}catch(t){return(0,d.a8)(d.bi.CollectionLHP,i,"Error while fetching getAllNotes"),this.MakeNetworkCall(e)}}))}fetchNotesFromCache(e){return GetAllNotes_awaiter(this,void 0,void 0,(function*(){const t=yield a.Ay.getKWCacheNativeAPI();return yield null==t?void 0:t.readMetaDataFromCache(g.Ay.sessionID,e)}))}ExecuteNetworkRequest(e,t){return GetAllNotes_awaiter(this,void 0,void 0,(function*(){const n=e,o=this.getCollectionQuery(n.type),i=yield this.MakeNetworkCall(e),s="lp_card"==n.type?d.Hc.LandingPage:d.Hc.Notes,l=i;if(l.ERR_CODE===r.dE.NO_ERROR){(0,d.a8)(d.bi.CollectionLHP,s,"Fetched list from Network");const e=t&&i&&this.IsCacheDataStale(t,i,n.type);if(0!==l.children.length){const e=yield a.Ay.getKWCacheNativeAPI();null==e||e.WriteMetaDataToCache(g.Ay.sessionID,l.children,o)}if(t&&!e)return(0,d.a8)(d.bi.CollectionLHP,s,"Data is already up to date in cache"),Promise.reject(new Error("LPCard/Note is already up to date"))}return i}))}IsCacheDataStale(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user_note";if(!e.children||!t.children)return!0;let o=!1;const removeStaleData=e=>GetAllNotes_awaiter(this,void 0,void 0,(function*(){const t=yield a.Ay.getKWCacheNativeAPI();yield t.removeDataFromCache(g.Ay.sessionID,this.getCollectionQuery(n),e)}));e.children.forEach((e=>{const n=t.children.find((t=>t.id===e.id));n&&e.etag===n.etag||(o=!0,removeStaleData(e.id))}));const r="lp_card"==n?d.Hc.LandingPage:d.Hc.Notes;if((0,d.a8)(d.bi.CollectionLHP,r,`Note list cache data stale: ${o}`),"lp_card"===n)o||e.children.length===t.children.length||(o=!0,(0,d.a8)(d.bi.CollectionLHP,r,`Note list cache data stale: ${o}`));else o=!0;return o}}var E=n("Itil").Buffer,CreateNote_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class CreateNote extends s.t{constructor(){super(...arguments),this.addNoteToCache=(e,t)=>CreateNote_awaiter(this,void 0,void 0,(function*(){const n={id:t.id,name:t.name,access_level:t.access_level,created:new Date,modified:new Date,size:e.file.length,etag:t.eTag,content_source:e.parameters.content_source,show_attributions:!1},o=yield a.Ay.getKWCacheNativeAPI();null==o||o.WriteMetaDataToCache(e.id,n,a.p3.KWCollectionNote,t.id);const i={ERR_CODE:r.dE.NO_ERROR,responseCode:200,content:e.file,eTag:t.eTag};null==o||o.WriteResourceDataToCache(e.id,i,a.p3.KWCollectionNote,t.id)}))}MakeNetworkCall(e){return CreateNote_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";n=`/kwcollections/${t.id}/notes`;const o=new FormData;o.append("parameters",JSON.stringify(t.parameters)),o.append("file",t.file);const r=E.byteLength(t.file,"utf-8"),i="parts";let s=`--${i}\r\n`;s+='Content-Disposition: form-data; name="parameters"\r\n',s+="Content-Type: application/json\r\n",s+=`\r\n${o.get("parameters")}\r\n`,s+=`\r\n--${i}\r\n`,s+=`Content-Disposition: form-data; name="file"; filename="${t.parameters.name}"\r\n`,s+="Content-Type: application/vnd.adobe.note+json\r\n",s+=`Content-Length: ${r}\r\n`,s+=`\r\n${t.file}\r\n`,s+=`--${i}--\r\n`;return this.invokeNetworkCall(e,"POST",n,{},["kwc_notes","create"],!0,!1,!0,{},u.A.NotesURI,!1,s,{"Content-Type":'multipart/mixed; boundary="parts"'},void 0,{kwcollection_id:t.id})}))}HandleRequest(e){return CreateNote_awaiter(this,void 0,void 0,(function*(){const t=e,n=yield this.MakeNetworkCall(t);return n.ERR_CODE===r.dE.NO_ERROR&&this.addNoteToCache(t,n),n}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return CreateNote_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return e.ERR_CODE===r.dE.NO_ERROR&&(o.eTag=e.headers.get("ETag")),o}))}IsValidRequest(e){return void 0!==e.parameters}}var UpdateNote_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class UpdateNote extends s.t{constructor(){super(...arguments),this.updateNoteContentToCache=(e,t)=>UpdateNote_awaiter(this,void 0,void 0,(function*(){const n=yield a.Ay.getKWCacheNativeAPI(),o=yield null==n?void 0:n.readMetaDataFromCache(e.parameters.kwId,a.p3.KWCollectionNote,e.parameters.noteId);if(o){o.etag=t.eTag,o.showAttributions=!1,o.contentSource="",null==n||n.WriteMetaDataToCache(e.parameters.kwId,o,a.p3.KWCollectionNote,e.parameters.noteId);const r=t;t.content=e.content,null==n||n.WriteResourceDataToCache(e.parameters.kwId,r,a.p3.KWCollectionNote,e.parameters.noteId)}}))}MakeNetworkCall(e){return UpdateNote_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.content;let o="";o=`/kwcollections/${t.parameters.kwId}/notes/${t.parameters.noteId}/content`;const r={"Content-Type":"application/vnd.adobe.note+json","If-Match":t.eTag};return this.invokeNetworkCall(e,"PUT",o,{},["kwc_notes","update_content"],!0,!1,!0,{},u.A.NotesURI,!1,n,r,void 0,{kwcollection_id:t.parameters.kwId,note_id:t.parameters.noteId})}))}HandleRequest(e){return UpdateNote_awaiter(this,void 0,void 0,(function*(){let t={ERR_CODE:r.dE.UNKNOWN_ERROR};const n=e;return t=yield this.MakeNetworkCall(n),t.ERR_CODE===r.dE.NO_ERROR&&this.updateNoteContentToCache(n,t),t}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return UpdateNote_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return e.ERR_CODE===r.dE.NO_ERROR&&(o.eTag=e.headers.get("etag")),o}))}IsValidRequest(e){return void 0!==e.parameters}}var DeleteNote_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DeleteNote extends s.t{MakeNetworkCall(e){return DeleteNote_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";return n=`/kwcollections/${t.parameters.kwId}/notes/${t.parameters.noteId}`,this.invokeNetworkCall(e,"DELETE",n,{},["kwc_notes","delete"],!1,!1,!0,{},u.A.NotesURI,!1,"",{},void 0,{kwcollection_id:t.parameters.kwId,note_id:t.parameters.noteId})}))}HandleRequest(e){return DeleteNote_awaiter(this,void 0,void 0,(function*(){const t=e,n=yield this.MakeNetworkCall(e);if(n.ERR_CODE===r.dE.NO_ERROR){(yield a.Ay.getKWCacheNativeAPI()).removeDataFromCache(t.parameters.kwId,a.p3.KWCollectionNote,t.parameters.noteId)}return n}))}IsValidRequest(e){return void 0!==e.parameters}}var C=n("EvqT"),DownloadSmallNote_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DownloadSmallNote extends s.t{MakeNetworkCall(e){return DownloadSmallNote_awaiter(this,void 0,void 0,(function*(){const t=yield _.providers["native-api"](),n=yield t.SessionAPI(),o={Authorization:`Bearer ${(yield n.isGuestUser())?yield n.GetGuestAccessToken():yield n.GetAccessToken()}`,"x-api-key":n.xApiKey,"x-api-app-info":n.xApiClientId,"x-api-client-id":n.xApiClientId},i=e,s=yield fetch(i.parameters.downloadURL,{headers:o}),a={ERR_CODE:r.dE.UNKNOWN_ERROR,responseCode:s.status,content:"",eTag:""};if(s.status>=200&&s.status<300){const e=yield s.text();a.content=e,a.ERR_CODE=r.dE.NO_ERROR,a.eTag=s.headers.get("etag")||""}return a}))}HandleRequest(e){var t,n,o,r;return DownloadSmallNote_awaiter(this,void 0,void 0,(function*(){const i=e,s=null===(t=null==i?void 0:i.parameters)||void 0===t?void 0:t.id,a="lp_card"==(null===(n=null==i?void 0:i.parameters)||void 0===n?void 0:n.noteType)?d.Hc.LandingPage:d.Hc.Notes;try{if((null===(o=null==i?void 0:i.parameters)||void 0===o?void 0:o.featureFlag)===C.d.READ_CACHE){(0,d.a8)(d.bi.CollectionLHP,a,`Fetching from cache: ${s}`);const t=yield this.ReadDataFromCache(i);return t&&t.eTag&&t.eTag===(null===(r=null==i?void 0:i.parameters)||void 0===r?void 0:r.eTag)?t:this.ExecuteNetworkRequest(e)}return(0,d.a8)(d.bi.CollectionLHP,a,`Fetching from network & updating to cache: ${s}`),this.ExecuteNetworkRequest(e)}catch(e){return(0,d.a8)(d.bi.CollectionLHP,a,`Error handling  for request: ${s}, ${e}`),this.MakeNetworkCall(i)}}))}ExecuteNetworkRequest(e){return DownloadSmallNote_awaiter(this,void 0,void 0,(function*(){const t=yield this.MakeNetworkCall(e),n=e;return t.ERR_CODE===r.dE.NO_ERROR&&this.WriteDataToCache(t,n),t}))}ReadDataFromCache(e){var t,n;return DownloadSmallNote_awaiter(this,void 0,void 0,(function*(){const o="lp_card"==(null===(t=null==e?void 0:e.parameters)||void 0===t?void 0:t.noteType)?d.Hc.LandingPage:d.Hc.Notes;try{const t=yield a.Ay.getKWCacheNativeAPI(),r=yield null==t?void 0:t.readResourceDataFromCache(g.Ay.sessionID,this.getCollectionQuery(null===(n=null==e?void 0:e.parameters)||void 0===n?void 0:n.noteType),e.parameters.id);return r?((0,d.a8)(d.bi.CollectionLHP,o,`Fetched from the cache: ${e.parameters.id}`),r):((0,d.a8)(d.bi.CollectionLHP,o,`Not present in cache: ${e.parameters.id}`),null)}catch(t){return(0,d.a8)(d.bi.CollectionLHP,o,`Error reading from cache: ${e.parameters.id}`),null}}))}WriteDataToCache(e,t){var n,o;return DownloadSmallNote_awaiter(this,void 0,void 0,(function*(){const r=yield a.Ay.getKWCacheNativeAPI();null==r||r.WriteResourceDataToCache(g.Ay.sessionID,e,this.getCollectionQuery(null===(n=null==t?void 0:t.parameters)||void 0===n?void 0:n.noteType),t.parameters.id);const i="lp_card"==(null===(o=null==t?void 0:t.parameters)||void 0===o?void 0:o.noteType)?d.Hc.LandingPage:d.Hc.Notes;(0,d.a8)(d.bi.CollectionLHP,i,`Write to cache: ${t.parameters.id}`)}))}getCollectionQuery(){return"lp_card"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user_note")?a.p3.KWCollectionLPCard:a.p3.KWCollectionNote}}var GetNoteMetadata_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetNoteMetadata extends s.t{MakeNetworkCall(e){return GetNoteMetadata_awaiter(this,void 0,void 0,(function*(){const t=e,n=`/kwcollections/${t.kwId}/notes/${t.noteId}/metadata`;return this.invokeNetworkCall(e,"GET",n,{},["kwc_notes","get_metadata"],!0,!1,!0,{},u.A.NotesURI,void 0,"",{},void 0,{kwcollection_id:t.kwId,note_id:t.noteId})}))}IsValidRequest(e){const t=e;return void 0!==t.kwId&&void 0!==t.noteId}}var UpdateNoteMetadata_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class UpdateNoteMetadata extends s.t{MakeNetworkCall(e){return UpdateNoteMetadata_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";n=`/kwcollections/${t.kwId}/notes/${t.noteId}/metadata`;const o=t.parameters;return this.invokeNetworkCall(e,"PATCH",n,o,["kwc_notes","patch_metadata"],!1,!0,!0,{},u.A.NotesURI,void 0,"",{},void 0,{kwcollection_id:t.kwId,note_id:t.noteId})}))}IsValidRequest(e){return void 0!==e.parameters}}var GetNoteConfig_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetNoteConfig extends s.t{MakeNetworkCall(e){return GetNoteConfig_awaiter(this,void 0,void 0,(function*(){return this.invokeNetworkCall(e,"GET","/configs",{},["kwc_notes","get_configs"],!0,!1,!0,{},u.A.NotesURI)}))}}class ShareSingleAssetPollingCommand extends o.VM{constructor(e){super(o.Bm.SHARE_SINGLE_ASSET_POLL),this.pollingUrl=e}}var ShareSingleAsset_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class ShareSingleAsset extends s.t{MakeNetworkCall(e){var t,n;return ShareSingleAsset_awaiter(this,void 0,void 0,(function*(){const o=e,r={collaborators:o.collaborators,email_subject:o.email_subject,custom_message:o.custom_message,generate_instant_link:o.generate_instant_link},i=yield this.invokeNetworkCall(e,"POST",`/kwcollections/${o.kwId}/assets/${o.assetId}/collaborators`,r,["kwc_collaboration","add_collaborators_asset"],!0,!0,!0,{},u.A.CollaborationURI,!1,"",{},void 0,{collection_id:o.kwId,asset_id:o.assetId});if("IN_PROGRESS"===i.status){if(i.job_uri&&i.retry_interval)return this.pollJobStatus(i.job_uri,i.retry_interval);throw new Error("Job URI or retry interval is missing.")}if("FAILED"===i.status)throw new Error(`Job failed with error: ${(null===(t=i.error)||void 0===t?void 0:t.code)||"Unknown error"} - ${(null===(n=i.error)||void 0===n?void 0:n.message)||"No message provided"}`);return i}))}pollJobStatus(e,t){var n,o;return ShareSingleAsset_awaiter(this,void 0,void 0,(function*(){const delay=e=>new Promise((t=>setTimeout(t,e))),r=parseInt(t,10),i=new ShareSingleAssetPollingCommand(e),s=i;for(;;){const t=yield this.invokeNetworkCall(i,"GET",e,s,["kwc_collaboration","add_collaborators_asset_job_status"],!0,!0,!0,{},u.A.kwPollingURI);if("DONE"===t.status)return t;if("FAILED"===t.status)throw new Error(`Job failed with error: ${(null===(n=t.error)||void 0===n?void 0:n.code)||"Unknown error"} - ${(null===(o=t.error)||void 0===o?void 0:o.message)||"No message provided"}`);"IN_PROGRESS"===t.status&&console.log(`Job still in progress. Retrying in ${r} ms...`),yield delay(r)}}))}}class CreateCustomAgentPollingCommand extends o.VM{constructor(e){super(o.Bm.CREATE_CUSTOM_AGENT_POLL),this.pollingUrl=e}}var CreateCustomAgent_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class CreateCustomAgent extends s.t{MakeNetworkCall(e){return CreateCustomAgent_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";n=`/${t.kwId}/custom_agents`;const o=void 0===t.parameters.globalAgentID||""===t.parameters.globalAgentID?{configs:{goal:t.parameters.goal,name:t.parameters.name,instructions:t.parameters.instructions},audience:[t.parameters.audience]}:{audience:[t.parameters.audience],global_agent_id:t.parameters.globalAgentID},i=yield this.invokeNetworkCall(e,"POST",n,o,["custom_agent","create_kwc_custom_agent"],!0,!0,!0,{},u.A.CustomAgentURI,void 0,"",{},void 0,{kwcollection_id:t.kwId});if("IN_PROGRESS"===i.status){if(i.job_uri&&i.retry_interval){const e=Date.now();return this.pollJobStatus(i.job_uri,i.retry_interval,i.poll_timeout,e)}throw new Error("Job URI or retry interval is missing.")}return"FAILED"===i.status?(i.ERR_CODE=r.dE.UNKNOWN_ERROR,i):i}))}pollJobStatus(e,t,n,o){return CreateCustomAgent_awaiter(this,void 0,void 0,(function*(){const delay=e=>new Promise((t=>setTimeout(t,e))),i=parseInt(t,10),s=new CreateCustomAgentPollingCommand(e),a=s;for(;;){const t=yield this.invokeNetworkCall(s,"GET",e,a,["custom_agent","get_custom_agent_job_status"],!0,!0,!0,{},u.A.kwPollingURI);if("DONE"===t.status)return t;if("FAILED"===t.status)return t.ERR_CODE=r.dE.UNKNOWN_ERROR,t;if("IN_PROGRESS"===t.status&&console.log(`Job still in progress. Retrying in ${i} ms...`),n>0&&Date.now()-o>n)return t.ERR_CODE=r.dE.UNKNOWN_ERROR,t;yield delay(i)}}))}IsValidRequest(e){const t=e;return t.command===o.Bm.CREATE_CUSTOM_AGENT_POLL||void 0!==t.parameters}}class UpdateCustomAgentPollingCommand extends o.VM{constructor(e){super(o.Bm.UPDATE_CUSTOM_AGENT_POLL),this.pollingUrl=e}}var UpdateCustomAgent_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class UpdateCustomAgent extends s.t{MakeNetworkCall(e){return UpdateCustomAgent_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";n=`/${t.kwId}/custom_agents/${t.agentId}`;const o=t.parameters.updateOnlyAudience?{audience:t.parameters.audience.length>0?[t.parameters.audience]:[]}:{configs:{goal:t.parameters.goal,name:t.parameters.name,instructions:t.parameters.instructions},audience:[t.parameters.audience]},i=yield this.invokeNetworkCall(e,"PATCH",n,o,["custom_agent","update_kwc_custom_agent"],!0,!0,!0,{},u.A.CustomAgentURI,void 0,"",{},void 0,{kwcollection_id:t.kwId,agent_id:t.agentId});if("IN_PROGRESS"===i.status){if(i.job_uri&&i.retry_interval){const e=Date.now();return this.pollJobStatus(i.job_uri,i.retry_interval,i.poll_timeout,e)}throw new Error("Job URI or retry interval is missing.")}return"FAILED"===i.status?(i.ERR_CODE=r.dE.UNKNOWN_ERROR,i):i}))}pollJobStatus(e,t,n,o){return UpdateCustomAgent_awaiter(this,void 0,void 0,(function*(){const delay=e=>new Promise((t=>setTimeout(t,e))),i=parseInt(t,10),s=new UpdateCustomAgentPollingCommand(e),a=s;for(;;){const t=yield this.invokeNetworkCall(s,"GET",e,a,["custom_agent","get_custom_agent_job_status"],!0,!0,!0,{},u.A.kwPollingURI);if("DONE"===t.status)return t;if("FAILED"===t.status)return t.ERR_CODE=r.dE.UNKNOWN_ERROR,t;if("IN_PROGRESS"===t.status&&console.log(`Job still in progress. Retrying in ${i} ms...`),n>0&&Date.now()-o>n)return t.ERR_CODE=r.dE.UNKNOWN_ERROR,t;yield delay(i)}}))}IsValidRequest(e){const t=e;return t.command===o.Bm.UPDATE_CUSTOM_AGENT_POLL||void 0!==t.parameters}}var GetCustomAgents_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetCustomAgents extends s.t{MakeNetworkCall(e){return GetCustomAgents_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";n=`/${t.kwId}/custom_agents`;return this.invokeNetworkCall(e,"GET",n,{},["custom_agent","list_kwc_custom_agents"],!0,!0,!0,{},u.A.CustomAgentURI,void 0,"",{},void 0,{kwcollection_id:t.kwId})}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetCustomAgents_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);try{o.ERR_CODE===r.dE.NO_ERROR&&(o.agents=[],e.data.forEach((e=>{const t={audience:e.audience,configs:{description:e.configs.description,goal:e.configs.goal,instructions:e.configs.instructions,name:e.configs.name},id:e.id,type:e.type};o.agents.push(t)})))}catch(e){console.log("Error in GetCustomAgents.fillInterfaceResponse: ",e)}return o}))}IsValidRequest(e){return void 0!==e}}var DeleteCustomAgent_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DeleteCustomAgent extends s.t{MakeNetworkCall(e){return DeleteCustomAgent_awaiter(this,void 0,void 0,(function*(){const t=e;let n="";n=`/${t.kwId}/custom_agents/${t.agentId}`;return this.invokeNetworkCall(e,"DELETE",n,{},["custom_agent","delete_kwc_custom_agent"],!0,!0,!0,{},u.A.CustomAgentURI,void 0,"",{},void 0,{kwcollection_id:t.kwId,custom_agent_id:t.agentId})}))}IsValidRequest(e){return void 0!==e}}var GetKWProvisioningInfo_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetKWProvisioningInfo extends s.t{MakeNetworkCall(e){return GetKWProvisioningInfo_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.typeOfRequest,o={Accept:t.acceptJson};return this.invokeNetworkCall(e,"GET",`${n}`,{},["temp","temp"],!1,!1,!0,void 0,u.A.ProvisioningURI,!0,void 0,o)}))}ExecuteNetworkRequest(e){return GetKWProvisioningInfo_awaiter(this,void 0,void 0,(function*(){return yield this.MakeNetworkCall(e)}))}HandleRequest(e){return GetKWProvisioningInfo_awaiter(this,void 0,void 0,(function*(){return this.ExecuteNetworkRequest(e)}))}fillInterfaceResponse(e,t){var n,o,r,i,s,a,l,c,u,d,h,v,f,p,_,m,g,E,C,y,A,b,O,S,R,I;return GetKWProvisioningInfo_awaiter(this,void 0,void 0,(function*(){const t={};return t.provisioningInfo={isKWCreationAvailable:null===(r=null===(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.kw_credits_info)||void 0===o?void 0:o.kw_creation)||void 0===r?void 0:r.is_available,isKWCreationLimited:null===(a=null===(s=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.kw_credits_info)||void 0===s?void 0:s.kw_creation)||void 0===a?void 0:a.is_limited,isKWConsumptionAvailable:null===(u=null===(c=null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.kw_credits_info)||void 0===c?void 0:c.kw_consumption)||void 0===u?void 0:u.is_available,isKWConsumptionLimited:null===(v=null===(h=null===(d=null==e?void 0:e.data)||void 0===d?void 0:d.kw_credits_info)||void 0===h?void 0:h.kw_consumption)||void 0===v?void 0:v.is_limited,kwCreationQuantityAvailable:null===(_=null===(p=null===(f=null==e?void 0:e.data)||void 0===f?void 0:f.kw_credits_info)||void 0===p?void 0:p.kw_creation)||void 0===_?void 0:_.quantity_available,kwConsumptionQuantityAvailable:null===(E=null===(g=null===(m=null==e?void 0:e.data)||void 0===m?void 0:m.kw_credits_info)||void 0===g?void 0:g.kw_consumption)||void 0===E?void 0:E.quantity_available},t.userInfo={accountType:null===(y=null===(C=null==e?void 0:e.data)||void 0===C?void 0:C.profile)||void 0===y?void 0:y.account_type,customerType:null===(b=null===(A=null==e?void 0:e.data)||void 0===A?void 0:A.profile)||void 0===b?void 0:b.customer_type,licenseType:null===(S=null===(O=null==e?void 0:e.data)||void 0===O?void 0:O.profile)||void 0===S?void 0:S.license_type},t.isProvisioned="PROVISIONED"===(null===(R=null==e?void 0:e.data)||void 0===R?void 0:R.status),t.subscriptionLevel=null===(I=null==e?void 0:e.data)||void 0===I?void 0:I.subscription_level,t.ERR_CODE=null==e?void 0:e.ERR_CODE,t}))}}var GetGoalRecommendations_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class GetGoalRecommendations extends s.t{MakeNetworkCall(e){return GetGoalRecommendations_awaiter(this,void 0,void 0,(function*(){const t=e,n=t.collectionId,o=t.acceptJson,r={Accept:null!=o?o:"application/json"};return this.invokeNetworkCall(e,"GET",n,{},["temp","temp"],!1,!1,!0,void 0,u.A.GoalRecommendationsURI,!1,void 0,r)}))}ExecuteNetworkRequest(e){return GetGoalRecommendations_awaiter(this,void 0,void 0,(function*(){return yield this.MakeNetworkCall(e)}))}HandleRequest(e){return GetGoalRecommendations_awaiter(this,void 0,void 0,(function*(){return this.ExecuteNetworkRequest(e)}))}fillInterfaceResponse(e,t){const n=Object.create(null,{fillInterfaceResponse:{get:()=>super.fillInterfaceResponse}});return GetGoalRecommendations_awaiter(this,void 0,void 0,(function*(){const o=yield n.fillInterfaceResponse.call(this,e,t);return o.transactionId=e.transactionId,o}))}IsValidRequest(e){return!0}}var y=n("mflA"),KWNetProvider_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class KWNetProvider{static getInstance(){return KWNetProvider.instance||(KWNetProvider.instance=new KWNetProvider),KWNetProvider.instance}constructor(){this.mCommandToExecutor=new Map,this.initializeCommands()}initializeCommands(){this.mCommandToExecutor.set(o.Bm.CREATE_COLLECTION,new CreateCollection),this.mCommandToExecutor.set(o.Bm.UPDATE_COLLECTION,new UpdateCollection),this.mCommandToExecutor.set(o.Bm.DELETE_COLLECTION,new DeleteCollection),this.mCommandToExecutor.set(o.Bm.GET_COLLECTION_BY_ID,new GetCollectionByID),this.mCommandToExecutor.set(o.Bm.GET_ALL_COLLECTIONS,new GetAllCollections),this.mCommandToExecutor.set(o.Bm.COPY_COLLECTION,new CopyCollection),this.mCommandToExecutor.set(o.Bm.GET_COLLECTION_METADATA,new GetCollectionMetadata),this.mCommandToExecutor.set(o.Bm.ENUMERATE_ASSETS,new EnumerateAssets),this.mCommandToExecutor.set(o.Bm.DELETE_ASSET,new DeleteAsset),this.mCommandToExecutor.set(o.Bm.GET_COLLABORATORS,new GetCollaborators),this.mCommandToExecutor.set(o.Bm.GET_USER_SHARING_METADATA,new GetUserSharingMetadata),this.mCommandToExecutor.set(o.Bm.ADD_COLLABORATORS,new AddCollaborators),this.mCommandToExecutor.set(o.Bm.UPDATE_REMOVE_COLLABORATORS,new UpdateCollaborators),this.mCommandToExecutor.set(o.Bm.UNSHARE_COLLECTION,new Unshare),this.mCommandToExecutor.set(o.Bm.SHARE_SINGLE_ASSET,new ShareSingleAsset),this.mCommandToExecutor.set(o.Bm.CREATE_CHAT_SESSION,new CreateChatSession),this.mCommandToExecutor.set(o.Bm.GET_STATUS_IN_SESSION,new GetStatusInSession),this.mCommandToExecutor.set(o.Bm.DELELE_CHAT_SESSION,new DeleteChatSession),this.mCommandToExecutor.set(o.Bm.DELETE_DOCUMENTS_IN_SESSION,new DeleteDocumentsInSession),this.mCommandToExecutor.set(o.Bm.GET_LIST_OF_CONVERSATION,new GetListOfConversation),this.mCommandToExecutor.set(o.Bm.GET_ALL_NOTES,new GetAllNotes),this.mCommandToExecutor.set(o.Bm.CREATE_NOTE,new CreateNote),this.mCommandToExecutor.set(o.Bm.UPDATE_NOTE,new UpdateNote),this.mCommandToExecutor.set(o.Bm.DELETE_NOTE,new DeleteNote),this.mCommandToExecutor.set(o.Bm.DOWNLOAD_SMALL_NOTE,new DownloadSmallNote),this.mCommandToExecutor.set(o.Bm.UPDATE_NOTE_METADATA,new UpdateNoteMetadata),this.mCommandToExecutor.set(o.Bm.GET_NOTE_METADATA,new GetNoteMetadata),this.mCommandToExecutor.set(o.Bm.GET_NOTE_CONFIG,new GetNoteConfig),this.mCommandToExecutor.set(o.Bm.CONVERT_NOTE_TO_PDF,new y.A),this.mCommandToExecutor.set(o.Bm.CREATE_CUSTOM_AGENT,new CreateCustomAgent),this.mCommandToExecutor.set(o.Bm.UPDATE_CUSTOM_AGENT,new UpdateCustomAgent),this.mCommandToExecutor.set(o.Bm.GET_CUSTOM_AGENTS,new GetCustomAgents),this.mCommandToExecutor.set(o.Bm.DELETE_CUSTOM_AGENT,new DeleteCustomAgent),this.mCommandToExecutor.set(o.Bm.GET_KW_PROVISIONING_INFO,new GetKWProvisioningInfo),this.mCommandToExecutor.set(o.Bm.GET_GOAL_RECOMMENDATIONS,new GetGoalRecommendations)}ready(){return Promise.resolve(this)}IsValidCommand(e){return this.mCommandToExecutor.has(e.command)}ExecuteKWCommand(e){return KWNetProvider_awaiter(this,void 0,void 0,(function*(){const t=new i.A;let n={ERR_CODE:r.dE.NO_ERROR};if(!this.IsValidCommand(e))return n.ERR_CODE=r.dE.INVALID_COMMAND,t.reject(n),t.promise;const o=this.mCommandToExecutor.get(e.command);if(o)try{n=yield o.HandleRequest(e),t.resolve(n)}catch(e){t.reject(e)}return t.promise}))}}const A=KWNetProvider.getInstance()},"M+Pm":(e,t,n)=>{"use strict";n.d(t,{t:()=>KWNetworkCall});var o,r=n("yXqW"),i=n("jpy3"),s=n("OHug"),a=n("QLQe"),l=n("h9J0"),__awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};!function(e){e.QUERY="QUERY",e.MUTATE="MUTATE"}(o||(o={}));class KWNetworkCall{HandleRequest(e){return this.MakeNetworkCall(e)}invokeNetworkCall(e,t,n,r,a,l,c,u,d){let h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:s.A.CollectionURI,v=arguments.length>10&&void 0!==arguments[10]&&arguments[10],f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",p=arguments.length>12?arguments[12]:void 0,_=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,g=arguments.length>15?arguments[15]:void 0;return __awaiter(this,void 0,void 0,(function*(){const E={};if(!this.IsValidRequest(e))return E.ERR_CODE=i.dE.INVALID_PARAMS,E;const C=new s.h(t,n,r,a,l,c,u,d,h,v,f,p,_,m,g);return this.invoke(C,"GET"===t?o.QUERY:o.MUTATE,e)}))}fillInterfaceResponse(e,t){return __awaiter(this,void 0,void 0,(function*(){return Object.assign({responseCode:null==e?void 0:e.status,ERR_CODE:null==e?void 0:e.ERR_CODE},e.data||{})}))}invoke(e,t,n){return __awaiter(this,void 0,void 0,(function*(){let s={};const c=n.networkCallName(),u=`${r.dG.kKWNetworkCall}_${c}`,d=Date.now();try{switch(t){case o.QUERY:s=yield e.invokeQuery();break;case o.MUTATE:s=yield e.invokeMutation()}r.I$.includes(n.command)&&(0,a.mB)(u,r.Bx.kSuccess)}catch(e){s.status=e.status,409==e.status?s.ERR_CODE=i.dE.RESOURCE_CONFLICT:410==e.status?s.ERR_CODE=i.dE.APPLICATION_UPDATE_REQUIRED:e.status>=500?s.ERR_CODE=i.dE.UNKNOWN_ERROR:s.ERR_CODE=i.dE.NETWORK_CALL_FAILED,r.I$.includes(n.command)&&(0,a.mB)(u,r.Bx.kError)}const h=`${r.dG.KWNetworkCallPrefTime}_${c}`;return r.I$.includes(n.command)&&(0,a.mB)(h,(0,l.A)(Date.now()-d)),this.fillInterfaceResponse(s,n)}))}IsValidRequest(e){return!0}IsCacheDataStale(e,t){return(null==e?void 0:e.etag)!==(null==t?void 0:t.etag)}OnNetworkCallSuccess(){}}},bTOH:(e,t,n)=>{"use strict";n.d(t,{C5:()=>GetAcceptHeaderForDeleteCollection,HH:()=>KWCreateErrorJson,Jg:()=>getNextCollectionName,Mt:()=>GetSecondaryDiscoveryResponse,Od:()=>o,Rs:()=>GetAcceptHeaderForDeletePollingCollection,WM:()=>GetAcceptJsonForProvisioningAPIs,b7:()=>GetAcceptJsonForGoalRecommendations,db:()=>compareProvisioningObjects,kJ:()=>GetPrimaryDiscoveryResponse,kT:()=>isNetworkAvailable,oj:()=>c,wc:()=>getErrorEventName,yO:()=>u});var o,r=n("plsW"),i=n("jpy3"),s=n("sVfd"),a=n("C/hT"),l=n("CVnK"),__awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};!function(e){e[e.QuestionAnswer=0]="QuestionAnswer",e[e.GoalRecommendation=1]="GoalRecommendation",e[e.LPCard=2]="LPCard",e[e.LPCardMetadata=3]="LPCardMetadata",e[e.ConversationHistory=4]="ConversationHistory",e[e.GenerateInstructions=5]="GenerateInstructions"}(o||(o={}));const getNextCollectionName=()=>`Untitled project ${(()=>{const e=new Date;return`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"}).replace(/,/g,"")} at ${e.getHours().toString().padStart(2,"0")}.${e.getMinutes().toString().padStart(2,"0")}.${e.getSeconds().toString().padStart(2,"0")}`})()}`,KWCreateErrorJson=function(e,t){return{ERR:"error",ERR_CODE:e,ERR_MSG:t,tId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",qId:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}},GetPrimaryDiscoveryResponse=()=>__awaiter(void 0,void 0,void 0,(function*(){const e=yield r.providers["dc-discovery"]();return yield e.GetDCDiscoveryReponse()})),GetSecondaryDiscoveryResponse=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return __awaiter(void 0,void 0,void 0,(function*(){const t=yield r.providers["native-api"](),n=yield t.ServicesAPI(),o=yield n.getSecondaryDiscoveryResponse("dc_index_uri");if(0===Object.keys(o).length){if((0,s.th)(`Secondary discovery response not available, retry count : ${e}`),e>20)return"";return new Promise(((t,n)=>{setTimeout((()=>__awaiter(void 0,void 0,void 0,(function*(){GetSecondaryDiscoveryResponse(e+1).then((e=>{t(e)})).catch((e=>{n(e)}))}))),500)}))}return o}))},isNetworkAvailable=()=>__awaiter(void 0,void 0,void 0,(function*(){const e=yield a.Ay.getKWCacheNativeAPI(),t=yield null==e?void 0:e.isNetworkAvailable(),n=yield __awaiter(void 0,void 0,void 0,(function*(){const e=yield a.Ay.getKWCacheNativeAPI();return yield null==e?void 0:e.isEnableOfflineKW()}));return[n,t]})),GetAcceptJsonForProvisioningAPIs=e=>__awaiter(void 0,void 0,void 0,(function*(){var t,n,o,r,i,s,a,l,c,u,d,h;let v="";const f=yield GetSecondaryDiscoveryResponse();return v="status"===e?null===(s=null===(i=null===(r=null===(o=null===(n=null===(t=null==f?void 0:f.services)||void 0===t?void 0:t.gen_ai_provisioning_v2)||void 0===n?void 0:n.resources)||void 0===o?void 0:o.operations)||void 0===r?void 0:r.status)||void 0===i?void 0:i.accept)||void 0===s?void 0:s.application_json_v1:null===(h=null===(d=null===(u=null===(c=null===(l=null===(a=null==f?void 0:f.services)||void 0===a?void 0:a.gen_ai_provisioning_v2)||void 0===l?void 0:l.resources)||void 0===c?void 0:c.operations)||void 0===u?void 0:u.provision)||void 0===d?void 0:d.accept)||void 0===h?void 0:h.application_json_v1,0===v.length&&(v="application/json"),v})),GetAcceptJsonForGoalRecommendations=()=>__awaiter(void 0,void 0,void 0,(function*(){var e,t,n,o;const r=yield GetPrimaryDiscoveryResponse();return null===(o=null===(n=null===(t=null===(e=null==r?void 0:r.resources)||void 0===e?void 0:e.kwc_goal_recommendations)||void 0===t?void 0:t.get)||void 0===n?void 0:n.accept)||void 0===o?void 0:o["kwcollection_goal_recommendations_v1.json"]})),GetAcceptHeaderForDeletePollingCollection=()=>__awaiter(void 0,void 0,void 0,(function*(){var e,t,n,o;const r=yield GetPrimaryDiscoveryResponse();return null===(o=null===(n=null===(t=null===(e=null==r?void 0:r.resources)||void 0===e?void 0:e.kwcollections)||void 0===t?void 0:t.get_input_asset_job_status)||void 0===n?void 0:n.accept)||void 0===o?void 0:o["delete_kwcollection_v1.json"]})),GetAcceptHeaderForDeleteCollection=()=>__awaiter(void 0,void 0,void 0,(function*(){var e,t,n,o;const r=yield GetPrimaryDiscoveryResponse();return null===(o=null===(n=null===(t=null===(e=null==r?void 0:r.resources)||void 0===e?void 0:e.kwcollections)||void 0===t?void 0:t.delete)||void 0===n?void 0:n.accept)||void 0===o?void 0:o["delete_kwcollection_v1.json"]}));var c;!function(e){e.CREATE_COLLECTION="CreateCollection",e.DELETE_COLLECTION="DeleteCollection",e.DELETE_ASSET="DeleteAsset",e.COPY_COLLECTION="CopyCollection",e.UPDATE_COLLECTION="UpdateCollection"}(c||(c={}));const compareProvisioningObjects=(e,t)=>{var n,o,r,i,s,a,c,u,d,h,v,f,p,_,m,g,E,C;if(null===e&&null===t)return!0;if(null===e||null===t)return!1;const y=(0,l.HO)(e),A=(0,l.HO)(t),b=null===(n=y.provisioningInfo)||void 0===n?void 0:n.kwConsumptionQuantityAvailable,O=null===(o=A.provisioningInfo)||void 0===o?void 0:o.kwConsumptionQuantityAvailable;return(null===(r=y.provisioningInfo)||void 0===r?void 0:r.isKWCreationAvailable)===(null===(i=A.provisioningInfo)||void 0===i?void 0:i.isKWCreationAvailable)&&(null===(s=y.provisioningInfo)||void 0===s?void 0:s.isKWCreationLimited)===(null===(a=A.provisioningInfo)||void 0===a?void 0:a.isKWCreationLimited)&&(null===(c=y.provisioningInfo)||void 0===c?void 0:c.isKWConsumptionAvailable)===(null===(u=A.provisioningInfo)||void 0===u?void 0:u.isKWConsumptionAvailable)&&(null===(d=y.provisioningInfo)||void 0===d?void 0:d.isKWConsumptionLimited)===(null===(h=A.provisioningInfo)||void 0===h?void 0:h.isKWConsumptionLimited)&&(null===(v=y.provisioningInfo)||void 0===v?void 0:v.kwCreationQuantityAvailable)===(null===(f=A.provisioningInfo)||void 0===f?void 0:f.kwCreationQuantityAvailable)&&b===O&&(null===(p=y.userInfo)||void 0===p?void 0:p.accountType)===(null===(_=A.userInfo)||void 0===_?void 0:_.accountType)&&(null===(m=y.userInfo)||void 0===m?void 0:m.customerType)===(null===(g=A.userInfo)||void 0===g?void 0:g.customerType)&&(null===(E=y.userInfo)||void 0===E?void 0:E.licenseType)===(null===(C=A.userInfo)||void 0===C?void 0:C.licenseType)&&y.isProvisioned===A.isProvisioned&&y.subscriptionLevel===A.subscriptionLevel},u={kErrorInvalidCommand:"Error_InvalidCommand_Client",kErrorInvalidParams:"Error_InvalidParams_Client",kErrorNetworkCallFailed:"Error_NetworkCallFailed_Server",kErrorUnknown:"Error_Unknown_Server",kErrorResourceConflict:"Error_ResourceConflict_Server",kErrorException:"Error_Exception_Client"},getErrorEventName=e=>{switch(e){case i.dE.INVALID_COMMAND:return u.kErrorInvalidCommand;case i.dE.INVALID_PARAMS:return u.kErrorInvalidParams;case i.dE.NETWORK_CALL_FAILED:return u.kErrorNetworkCallFailed;case i.dE.UNKNOWN_ERROR:return u.kErrorUnknown;case i.dE.RESOURCE_CONFLICT:return u.kErrorResourceConflict;default:return u.kErrorUnknown}}},OHug:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,h:()=>INetworkInit});var o,r=n("plsW");!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.FETCHING=2]="FETCHING",e[e.IDLE=3]="IDLE"}(o||(o={}));var __awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class NetworkCall{get status(){return this.mStatus}get responseData(){return this.mResponseData}get errorData(){return this.mErrorData}get numSubscribers(){return this.mObservers.length}get isRetrying(){return null!==this.mRetryInfo.timerID}constructor(e,t,n,r){this.mResponseData={},this.mErrorData={},this.mRequest={},this.mObservers=[],this.mOptions={retries:3},this.mLastSuccessTimestamp=0,this.mRetryInfo={retryIndex:0,timerID:null},this.mIsFetching=!1,this.mStatus=o.IDLE,this.Retry=this.Retry.bind(this),r&&(this.mOptions=Object.assign(Object.assign({},this.mOptions),r)),this.mFullUrl=NetworkCall.CreateFullUrl(e,t),n&&(this.mRequest=n)}Subscribe(e){this.mObservers.includes(e)||this.mObservers.push(e)}Unsubscribe(e){this.mObservers=this.mObservers.filter((t=>t!==e))}NotifyStatusChange(e){this.mObservers.forEach((t=>t.onStatusChange(e)))}NotifyResponse(e){this.mObservers.forEach((t=>t.onResponse(e)))}NotifyError(e){this.mObservers.forEach((t=>t.onError(e)))}static CreateFullUrl(e,t){if(!t)return e;const n=new URL(e);return Object.entries(t).forEach((e=>{n.searchParams.set(e[0],e[1].toString())})),n.searchParams.sort(),n.toString()}MakeFetchCall(){return __awaiter(this,void 0,void 0,(function*(){let e,t;this.mIsFetching=!0;try{e=yield fetch(this.mFullUrl,this.mRequest)}catch(t){e=t}this.mResponseHeaders=null==e?void 0:e.headers,this.mResponseStatusCode=null==e?void 0:e.status;try{t=yield e.json()}catch(e){t=e}e.ok?this.HandleSuccess(t):this.HandleError(t),this.mIsFetching=!1}))}HandleSuccess(e){var t;this.mLastSuccessTimestamp=Date.now(),this.mStatus=o.SUCCESS,this.mResponseData=e,(null===(t=this.mOptions)||void 0===t?void 0:t.wantsHeaders)?this.NotifyResponse({body:this.mResponseData,headers:this.mResponseHeaders,status:this.mResponseStatusCode}):this.NotifyResponse(this.mResponseData),this.NotifyStatusChange(this.mStatus),this.mRetryInfo.retryIndex=0,this.ClearRetryTimer()}HandleError(e){var t;if((null==e?void 0:e.statusCode)>=500&&this.mRetryInfo.retryIndex<this.mOptions.retries){this.mRetryInfo.retryIndex+=1,this.ClearRetryTimer();const e=this.CalcRetryInterval(this.mRetryInfo.retryIndex);this.mRetryInfo.timerID=setTimeout(this.Retry,e)}else this.mStatus=o.ERROR,this.mErrorData=e,(null===(t=this.mOptions)||void 0===t?void 0:t.wantsHeaders)?this.NotifyError({body:this.mErrorData,headers:this.mResponseHeaders,status:this.mResponseStatusCode}):this.NotifyError(this.mErrorData),this.NotifyStatusChange(this.mStatus)}Retry(){this.mRetryInfo.timerID=null,this.MakeFetchCall()}ClearRetryTimer(){null!==this.mRetryInfo.timerID&&(clearTimeout(this.mRetryInfo.timerID),this.mRetryInfo.timerID=null)}CalcRetryInterval(e){const t=Math.pow(2,e-1);return Math.min(1e3*t,3e4)}}class NetworkQuery extends NetworkCall{get options(){return this.mOptions}constructor(e,t,n,o){n||(n={}),n.method="GET",super(e,t,n,o=o?Object.assign(Object.assign({},NetworkQuery.sDefaultOptions),o):NetworkQuery.sDefaultOptions),o&&o.refreshInterval&&setInterval(this.RefreshAtInterval.bind(this),o.refreshInterval)}RefreshAtInterval(){this.mIsFetching||this.isRetrying||this.MakeFetchCall()}Refresh(){if(this.mIsFetching)return;const e=0!==this.mLastSuccessTimestamp,t=this.mLastSuccessTimestamp+this.options.staleTime<Date.now();e&&!t||(this.ClearRetryTimer(),void 0!==this.mResponseData&&0!==Object.keys(this.mResponseData).length||(this.mStatus=o.FETCHING,this.NotifyStatusChange(this.mStatus)),this.MakeFetchCall())}}NetworkQuery.sDefaultOptions={staleTime:0,retries:3};class NetworkMutation extends NetworkCall{constructor(e,t,n,o){n?n.method||(n.method="POST"):n={method:"POST"},super(e,t,n,o)}Mutate(e){this.mIsFetching||(this.mRequest.body=JSON.stringify(e),this.ClearRetryTimer(),this.mStatus=o.FETCHING,this.NotifyStatusChange(this.mStatus),this.MakeFetchCall())}MutateStr(e){this.mIsFetching||(this.mRequest.body=e,this.ClearRetryTimer(),this.mStatus=o.FETCHING,this.NotifyStatusChange(this.mStatus),this.MakeFetchCall())}}const i=new class NetworkCallDirectory{constructor(){this.mDirectory={}}get length(){return Object.keys(this.mDirectory).length}Has(e){return e in this.mDirectory}Get(e){return e in this.mDirectory?this.mDirectory[e]:null}Add(e,t){this.mDirectory[t]=e}Remove(e){delete this.mDirectory[e]}RemoveCall(e){let t=null;Object.entries(this.mDirectory).every((n=>n[1]!==e||(t=n[0],!1))),t&&delete this.mDirectory[t]}CreateHash(e,t,n){const o={url:NetworkCall.CreateFullUrl(e,t)};return n&&(o.request=n),JSON.stringify(o,((e,t)=>"object"!=typeof t?t:Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{})))}};class NetworkProvider{ready(){return Promise.resolve(this)}GetNetworkQuery(e,t,n,o){const r=i.CreateHash(e,t,n);let s=i.Get(r);return s||(i.Add(new NetworkQuery(e,t,n,o),r),s=i.Get(r)),s}GetNetworkMutation(e,t,n,o){return new NetworkMutation(e,t,n,o)}}NetworkProvider.getInstance=r.providerUtil.getSingletonFunction(NetworkProvider);var s=n("jpy3"),a=n("j66d"),l=n("bTOH"),c=n("0VNB");class URITemplateParser{static expand(e,t){return e.replace(this.EXPRESSION_PATTERN,((e,n,o,r,i)=>{const s=o.split(",").map((e=>{const o=t[e];return null==o?"":this.expandVariable(e,o,n,!!i,r?parseInt(r,10):void 0)})).filter(Boolean);return this.joinExpandedParts(s,n)}))}static expandVariable(e,t,n,o,r){const i=this.getOperatorPrefix(n),s=this.getOperatorSeparator(n);return Array.isArray(t)?this.expandArray(e,t,n,o,i,s):"object"==typeof t?this.expandObject(e,t,n,o,i,s):this.expandSimple(e,String(t),n,i,r)}static expandArray(e,t,n,o,r,i){const s="+"===n?t:t.map((e=>this.encodeURIComponent(e)));return o?"?"===n||"&"===n||";"===n?s.map((t=>`${this.encodeURIComponent(e)}=${t}`)).join(i):s.join(i):"?"===n||"&"===n||";"===n?`${r}${this.encodeURIComponent(e)}=${s.join(",")}`:`${r}${s.join(",")}`}static expandObject(e,t,n,o,r,i){const s=Object.entries(t).reduce(((e,t)=>{let[o,r]=t;if(null!=r){const t="+"===n?o:this.encodeURIComponent(o),i="+"===n?String(r):this.encodeURIComponent(String(r));e.push([t,i])}return e}),[]);return o?s.map((e=>{let[t,n]=e;return`${t}=${n}`})).join(i):"?"===n||"&"===n||";"===n?`${r}${this.encodeURIComponent(e)}=${s.map((e=>{let[t,n]=e;return`${t},${n}`})).join(",")}`:`${r}${s.map((e=>{let[t,n]=e;return`${t},${n}`})).join(",")}`}static expandSimple(e,t,n,o,r){if(""===t)return"?"===n||"&"===n||";"===n?`${o}${this.encodeURIComponent(e)}=`:"";void 0!==r&&t.length>r&&(t=t.substring(0,r));const i="+"===n?t:this.encodeURIComponent(t);return"?"===n||"&"===n||";"===n?`${o}${this.encodeURIComponent(e)}=${i}`:`${o}${i}`}static getOperatorPrefix(e){return"+"===e?"":e||""}static getOperatorSeparator(e){return"."===e||"/"===e?"/":";"===e?";":"?"===e||"&"===e?"&":","}static joinExpandedParts(e,t){if(0===e.length)return"";const n=this.getOperatorSeparator(t);return e.join(n)}static encodeURIComponent(e){return encodeURIComponent(e)}}URITemplateParser.EXPRESSION_PATTERN=/\{([+#./;?&])?([a-zA-Z0-9_,]+)(?::(\d+))?(\*)?\}/g;var DiscoveryURIExpander_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class DiscoveryURIExpander{constructor(){this.primaryDiscoveryResponse={},this.secondaryDiscoveryResponse={}}static getInstance(){return DiscoveryURIExpander.instance||(DiscoveryURIExpander.instance=new DiscoveryURIExpander),DiscoveryURIExpander.instance}getPrimaryDiscoveryResponse(){return DiscoveryURIExpander_awaiter(this,void 0,void 0,(function*(){if(0===Object.keys(this.primaryDiscoveryResponse).length){const e=yield r.providers["dc-discovery"]();this.primaryDiscoveryResponse=yield e.GetDCDiscoveryReponse()}return this.primaryDiscoveryResponse}))}getSecondaryDiscoveryResponse(){return DiscoveryURIExpander_awaiter(this,void 0,void 0,(function*(){if(0===Object.keys(this.secondaryDiscoveryResponse).length){const e=yield r.providers["native-api"](),t=yield e.ServicesAPI();this.secondaryDiscoveryResponse=yield t.getSecondaryDiscoveryResponse("dc_index_uri")}return this.secondaryDiscoveryResponse}))}getURI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return DiscoveryURIExpander_awaiter(this,void 0,void 0,(function*(){const o=yield this.getPrimaryDiscoveryResponse(),r=null===(n=o.templates)||void 0===n?void 0:n[e];if(!r)throw new Error(`Template not found for key: ${e}`);return URITemplateParser.expand(r,t)}))}getResourceURI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,o;return DiscoveryURIExpander_awaiter(this,void 0,void 0,(function*(){const r=yield this.getPrimaryDiscoveryResponse(),i=null===(o=null===(n=null==r?void 0:r.resources)||void 0===n?void 0:n[e[0]])||void 0===o?void 0:o[e[1]];if(!(null==i?void 0:i.uri))throw new Error(`Resource URI not found for path: ${e.join(".")}`);let s=i.uri;const a=s.match(/\{([^}]+)\}/g);return a&&(s=a.reduce(((e,t)=>{var n;const o=t.slice(1,-1).replace("+",""),i=null===(n=r.templates)||void 0===n?void 0:n[o];return i?e.replace(t,i):e}),s)),URITemplateParser.expand(s,t)}))}}var u,NetworkInit_awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};!function(e){e.CollectionURI="kwcollection_uri",e.CollaborationURI="collaboration_uri",e.ChatSessionURI="chat_session_uri",e.ChatHistoryURI="genai_conversations_uri",e.NotesURI="notes_uri",e.ThoughtPartnerURI="thought_partner_uri",e.USSUri="search_uri_v2",e.kwPollingURI="",e.CustomAgentURI="custom_agent_uri",e.ProvisioningURI="provisioning_uri",e.GoalRecommendationsURI="goal_recommendations_uri",e.ConvertHtmlToPdfURI="convert_html_to_pdf_uri",e.ConvertHtmlToPdfStatusURI="convert_html_to_pdf_status_uri"}(u||(u={}));class INetworkInit{constructor(e,t,n,o,r,i,s,a){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.CollectionURI,c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",h=arguments.length>11?arguments[11]:void 0,v=arguments.length>12?arguments[12]:void 0,f=arguments.length>13?arguments[13]:void 0,p=arguments.length>14?arguments[14]:void 0;this.urlParams={},this.additionalHeaders={},this.primaryDiscoveryResponse={},this.secondaryDiscoveryResponse={},this.sessionServiceV2BaseUri="",this.urlSubpart=t,this.body=n,this.methodType=e,this.typeOfDiscovery=o,this.addAccept=r,this.addContentType=i,this.addAuthorization=s,this.addXApiKey=c,this.urlParams=a,this.hostUrl=l,this.formBody=d,this.additionalHeaders=h,this.sessionServiceV2BaseUri=v,this.uriTemplateVariables=f,this.completeUrl=p}GetDiscoveryResponse(){return NetworkInit_awaiter(this,void 0,void 0,(function*(){return 0===Object.keys(this.primaryDiscoveryResponse).length&&(this.primaryDiscoveryResponse=yield(0,l.kJ)()),0===Object.keys(this.secondaryDiscoveryResponse).length&&(this.secondaryDiscoveryResponse=yield(0,l.Mt)()),[this.primaryDiscoveryResponse,this.secondaryDiscoveryResponse]}))}createURLForProvisioningAPI(e,t){var n,o,r,i,s,a,l,c,u,d,h,v,f,p,_,m;const g=null===(n=null==t?void 0:t.services)||void 0===n?void 0:n.gen_ai_provisioning_v2,E=null===(o=null==g?void 0:g.resources)||void 0===o?void 0:o.operations;if("status"===this.urlSubpart){const t=null===(i=null===(r=null==E?void 0:E.status)||void 0===r?void 0:r.resource_parameter)||void 0===i?void 0:i.default,n=null===(a=null===(s=null==E?void 0:E.status)||void 0===s?void 0:s.resource_parameter)||void 0===a?void 0:a.name;let o=null===(l=null==E?void 0:E.status)||void 0===l?void 0:l.uri;o=null==o?void 0:o.replace(`{+${n}}`,t);e=`${o}?group_name=${null===(h=null===(d=null===(u=null===(c=null==E?void 0:E.status)||void 0===c?void 0:c.uri_parameters)||void 0===u?void 0:u.find((e=>"group_name"===e.name)))||void 0===d?void 0:d.enum)||void 0===h?void 0:h[0]}&surface=ACROBAT_DESKTOP`}else{const t=null===(f=null===(v=null==E?void 0:E.provision)||void 0===v?void 0:v.resource_parameter)||void 0===f?void 0:f.default,n=null===(_=null===(p=null==E?void 0:E.provision)||void 0===p?void 0:p.resource_parameter)||void 0===_?void 0:_.name;let o=null===(m=null==E?void 0:E.provision)||void 0===m?void 0:m.uri;o=null==o?void 0:o.replace(`{+${n}}`,t),e=o}return e}GetRequestUrl(){var e,t,n,o,r,i,s,a,l,c,d,h,v,f,p,_,m,g,E,C,y,A,b,O,S,R,I,N,w,k,T,D,P,L,x,U,j;return NetworkInit_awaiter(this,void 0,void 0,(function*(){const[M,F]=yield this.GetDiscoveryResponse(),G=null===(e=null==M?void 0:M.templates)||void 0===e?void 0:e[this.hostUrl];let W="";switch(this.hostUrl){case u.CollectionURI:case u.CollaborationURI:case u.NotesURI:case u.CustomAgentURI:if(this.completeUrl)W=this.completeUrl;else{const e=DiscoveryURIExpander.getInstance();W=yield e.getResourceURI(this.typeOfDiscovery,this.uriTemplateVariables)}break;case u.ChatSessionURI:W=`${this.sessionServiceV2BaseUri?this.sessionServiceV2BaseUri:null===(i=null===(r=null===(o=null===(n=null===(t=null==F?void 0:F.services)||void 0===t?void 0:t.gen_ai_session_service_v2)||void 0===n?void 0:n.resources.sessions)||void 0===o?void 0:o.create_chat_session)||void 0===r?void 0:r.resource_parameter)||void 0===i?void 0:i.default}${this.urlSubpart}`;break;case u.USSUri:W=G;break;case u.ThoughtPartnerURI:{const e=this.sessionServiceV2BaseUri?this.sessionServiceV2BaseUri:null===(h=null===(d=null===(c=null===(l=null===(a=null===(s=null==F?void 0:F.services)||void 0===s?void 0:s.generate_thought_partner)||void 0===a?void 0:a.resources)||void 0===l?void 0:l.operations)||void 0===c?void 0:c.predict)||void 0===d?void 0:d.resource_parameter)||void 0===h?void 0:h.default,t=null===(m=null===(_=null===(p=null===(f=null===(v=null==F?void 0:F.services)||void 0===v?void 0:v.generate_question_answer)||void 0===f?void 0:f.resources)||void 0===p?void 0:p.operations)||void 0===_?void 0:_.predict)||void 0===m?void 0:m.uri,n=null===(b=null===(A=null===(y=null===(C=null===(E=null===(g=null==F?void 0:F.services)||void 0===g?void 0:g.generate_thought_partner)||void 0===E?void 0:E.resources)||void 0===C?void 0:C.operations)||void 0===y?void 0:y.predict)||void 0===A?void 0:A.resource_parameter)||void 0===b?void 0:b.name;W=t.replace(`{+${n}}`,e)}break;case u.ChatHistoryURI:W=G+this.urlSubpart;break;case u.ConvertHtmlToPdfURI:W=null===(R=null===(S=null===(O=null==M?void 0:M.resources)||void 0===O?void 0:O.assets)||void 0===S?void 0:S.createpdf_from_html)||void 0===R?void 0:R.uri;break;case u.ConvertHtmlToPdfStatusURI:case u.kwPollingURI:W=this.urlSubpart;break;case u.ProvisioningURI:W=this.createURLForProvisioningAPI(W,F);break;case u.GoalRecommendationsURI:{W=null===(w=null===(N=null===(I=null==M?void 0:M.resources)||void 0===I?void 0:I.kwc_goal_recommendations)||void 0===N?void 0:N.get)||void 0===w?void 0:w.uri;const e=null===(P=null===(D=null===(T=null===(k=null==M?void 0:M.resources)||void 0===k?void 0:k.kwc_goal_recommendations)||void 0===T?void 0:T.get)||void 0===D?void 0:D.uri_parameters[0])||void 0===P?void 0:P.name,t=null===(j=null===(U=null===(x=null===(L=null==M?void 0:M.resources)||void 0===L?void 0:L.kwc_goal_recommendations)||void 0===x?void 0:x.get)||void 0===U?void 0:U.resource_parameter)||void 0===j?void 0:j.name;W=W.replace(`{${e}}`,this.urlSubpart),W=W.replace(`{+${t}}`,G);break}}return W}))}GetHeaders(e,t,n,o){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return NetworkInit_awaiter(this,void 0,void 0,(function*(){const s=yield r.providers["native-api"](),a=yield s.SessionAPI(),l=(yield a.isGuestUser())?yield a.GetGuestAccessToken():yield a.GetAccessToken(),d=a.xApiClientId,h={};this.hostUrl!==u.USSUri&&(h["x-api-client-id"]=d,h["x-api-app-info"]=d),i&&(h["x-api-key"]=a.xApiKey),o&&(h.Authorization=`Bearer ${l}`),t&&(h.Accept=String(Object.values(null==e?void 0:e.accept)[0]));const v=yield a.GetPerfRequestId();return v&&(h["x-request-id"]=`${v}----${(0,c.v4)()}`.slice(0,50)),h["Content-Type"]="application/json",n&&(h["Content-Type"]=String(Object.values(null==e?void 0:e.content_type)[0])),this.additionalHeaders&&Object.assign(h,this.additionalHeaders),h}))}invokeMutation(){var e,t;return NetworkInit_awaiter(this,void 0,void 0,(function*(){const n=new a.A,o={ERR_CODE:s.dE.NO_ERROR},[r]=yield this.GetDiscoveryResponse(),i=yield this.GetRequestUrl(),l=yield NetworkProvider.getInstance(),c=yield this.GetHeaders(null===(t=null===(e=null==r?void 0:r.resources)||void 0===e?void 0:e[this.typeOfDiscovery[0]])||void 0===t?void 0:t[this.typeOfDiscovery[1]],this.addAccept,this.addContentType,this.addAuthorization,this.addXApiKey),u=this.urlParams,d=l.GetNetworkMutation(i,u,{method:this.methodType,headers:c},{wantsHeaders:!0}),h={onResponse:e=>{d.Unsubscribe(h),o.ERR_CODE=s.dE.NO_ERROR,o.data=null==e?void 0:e.body,o.headers=null==e?void 0:e.headers,o.status=null==e?void 0:e.status,n.resolve(o)},onStatusChange:e=>{},onError:e=>{d.Unsubscribe(h),o.ERR_CODE=s.dE.NETWORK_CALL_FAILED,o.error=null==e?void 0:e.body,o.headers=null==e?void 0:e.headers,o.status=null==e?void 0:e.status,n.reject(o)}};return d.Subscribe(h),this.formBody.length?d.MutateStr(this.formBody):d.Mutate(this.body),n.promise}))}invokeQuery(){var e,t;return NetworkInit_awaiter(this,void 0,void 0,(function*(){const n=new a.A,o={ERR_CODE:s.dE.NO_ERROR},[r]=yield this.GetDiscoveryResponse(),i=yield this.GetRequestUrl(),l=yield NetworkProvider.getInstance(),c=yield this.GetHeaders(null===(t=null===(e=null==r?void 0:r.resources)||void 0===e?void 0:e[this.typeOfDiscovery[0]])||void 0===t?void 0:t[this.typeOfDiscovery[1]],this.addAccept,this.addContentType,this.addAuthorization,this.addXApiKey),u=this.urlParams,d=l.GetNetworkQuery(i,u,{method:this.methodType,headers:c},{wantsHeaders:!0}),h={onResponse:e=>{d.Unsubscribe(h),o.ERR_CODE=s.dE.NO_ERROR,o.data=null==e?void 0:e.body,o.headers=null==e?void 0:e.headers,o.status=null==e?void 0:e.status,n.resolve(o)},onStatusChange:e=>{},onError:e=>{d.Unsubscribe(h),o.ERR_CODE=s.dE.NETWORK_CALL_FAILED,o.error=null==e?void 0:e.body,o.headers=null==e?void 0:e.headers,o.status=null==e?void 0:e.status,n.reject(o)}};return d.Subscribe(h),d.Refresh(),n.promise}))}}},mflA:(e,t,n)=>{"use strict";n.d(t,{A:()=>ConvertNoteToPdf});var o=n("M+Pm"),r=n("jpy3"),i=n("yXqW"),s=n("OHug"),a=n("plsW"),l=n("Jjq2");class ConvertNoteToPdfpollingStatusCommand extends i.VM{constructor(e){super(i.Bm.CONVERT_NOTE_TO_PDF_POLL),this.pollingUrl=e}}var __awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};class ConvertNoteToPdf extends o.t{MakeNetworkCall(e){var t,n,o,r,i,l,c,u,d,h,v;return __awaiter(this,void 0,void 0,(function*(){const f=e,p=Object.assign({},f.parameters),_=yield a.providers["dc-discovery"](),m=yield _.GetDCDiscoveryReponse(),g=null===(n=null===(t=null==m?void 0:m.resources)||void 0===t?void 0:t.assets)||void 0===n?void 0:n.createpdf_from_html,E=null===(i=null===(r=null===(o=null==m?void 0:m.resources)||void 0===o?void 0:o.assets)||void 0===r?void 0:r.createpdf_from_html)||void 0===i?void 0:i.uri;console.log("apiUrl",g),console.log("apiURITemplate",E);const C=null===(u=null===(c=null===(l=null==m?void 0:m.resources)||void 0===l?void 0:l.assets)||void 0===c?void 0:c.createpdf_from_html)||void 0===u?void 0:u.accept,y=null===(v=null===(h=null===(d=null==m?void 0:m.resources)||void 0===d?void 0:d.assets)||void 0===h?void 0:h.createpdf_from_html)||void 0===v?void 0:v.content_type,A={Accept:null==C?void 0:C["new_asset_job_v1.json"],"Content-Type":null==y?void 0:y["createpdf_from_html_parameters_v1.json"],"x-api-app-info":"KW Desktop Client","x-request-context":"kw","x-user-action-name":"html-to-pdf"};return this.invokeNetworkCall(e,"POST","",p,["assets","createpdf_from_html"],!0,!0,!0,{},s.A.ConvertHtmlToPdfURI,!0,"",A)}))}pollJobStatus(e,t){var n,o,r,i,c;return __awaiter(this,void 0,void 0,(function*(){const u=yield a.providers["dc-discovery"](),d=yield u.GetDCDiscoveryReponse(),h=null===(r=null===(o=null===(n=null==d?void 0:d.resources)||void 0===n?void 0:n.assets)||void 0===o?void 0:o.createpdf_from_html)||void 0===r?void 0:r.accept,v={Accept:null==h?void 0:h["new_asset_job_v1.json"]},f=new ConvertNoteToPdfpollingStatusCommand(e),p=f,delay=e=>new Promise((t=>setTimeout(t,e))),_=parseInt(t,10);for(;;){const t=yield this.invokeNetworkCall(f,"GET",`${e}/status`,p,["assets","createpdf_from_html"],!0,!1,!0,{},s.A.ConvertHtmlToPdfStatusURI,!1,"",v);if("done"===t.status)return t;"failed"===t.status&&(0,l.qz)(l.bi.DownloadAsPDF,l.Hc.DownloadNoteAsPDF,`Job failed with error: ${(null===(i=t.error)||void 0===i?void 0:i.code)||"Unknown error"} - ${(null===(c=t.error)||void 0===c?void 0:c.message)||"No message provided"}`),"in progress"===t.status&&(0,l.a8)(l.bi.DownloadAsPDF,l.Hc.DownloadNoteAsPDF,`Job still in progress. Retrying in ${_} ms...`),yield delay(_)}}))}HandleRequest(e){var t,n;return __awaiter(this,void 0,void 0,(function*(){const o=yield this.MakeNetworkCall(e);if(o.ERR_CODE===r.dE.NO_ERROR){if("in progress"===o.status&&o.job_uri&&o.retry_interval)return this.pollJobStatus(o.job_uri,o.retry_interval);"failed"===o.status&&(0,l.qz)(l.bi.DownloadAsPDF,l.Hc.DownloadNoteAsPDF,`Job failed with error: ${(null===(t=o.error)||void 0===t?void 0:t.code)||"Unknown error"} - ${(null===(n=o.error)||void 0===n?void 0:n.message)||"No message provided"}`)}return o}))}IsValidRequest(e){const t=e;return t.command===i.Bm.CONVERT_NOTE_TO_PDF_POLL||!!(t.parameters&&t.parameters.asset_uri&&t.parameters.name)}}},"2NhI":(e,t,n)=>{"use strict";var o;n.d(t,{Z:()=>o}),function(e){e[e.kOwner=0]="kOwner",e[e.kViewer=1]="kViewer",e[e.kReviewer=2]="kReviewer",e[e.kContributor=3]="kContributor",e[e.kUndefined=4]="kUndefined"}(o||(o={}))},htLm:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>EnumerateAssetsCommand,J6:()=>o,qP:()=>r});var o,r,i=n("yXqW");!function(e){e.NAME="name",e.CREATED="created",e.MODIFIED="modified"}(o||(o={})),function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(r||(r={}));class EnumerateAssetsCommand extends i.VM{constructor(e){let{pageInfo:t,id:n="",order_by:o,sort_order:r,page_size:s}=e;super(i.Bm.ENUMERATE_ASSETS),this.id=n,this.pageInfo=t,this.order_by=o,this.sort_order=r,this.page_size=s}}},"36Lb":(e,t,n)=>{"use strict";n.d(t,{Ay:()=>GetListOfConversationCommand,J6:()=>o,qP:()=>r});var o,r,i=n("yXqW");!function(e){e.NAME="name",e.CREATED="created",e.MODIFIED="modified"}(o||(o={})),function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(r||(r={}));class GetListOfConversationCommand extends i.VM{constructor(e){let{id:t,pageInfo:n,order_by:o,sort_order:r,page_size:s}=e;super(i.Bm.GET_LIST_OF_CONVERSATION),this.id=t,this.pageInfo=n,this.order_by=o,this.sort_order=r,this.page_size=s}}},srgf:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>GetAllCollectionsCommand,J6:()=>o,qP:()=>r});var o,r,i=n("yXqW");!function(e){e.NAME="name",e.CREATED="created",e.MODIFIED="modified"}(o||(o={})),function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(r||(r={}));class GetAllCollectionsCommand extends i.VM{constructor(e){let{pageInfo:t,order_by:n,sort_order:o,page_size:r,addDelay:s}=e;super(i.Bm.GET_ALL_COLLECTIONS),this.pageInfo=t,this.order_by=n,this.sort_order=o,this.page_size=r,this.addDelay=s}}},yXqW:(e,t,n)=>{"use strict";n.d(t,{Bm:()=>i,Bx:()=>r,I$:()=>s,VM:()=>KWRequestCommand,dG:()=>o});const o={kKWNetworkCall:"NetworkCall",KWNetworkCallPrefTime:"NetworkCallPrefTime"},r={kSuccess:"Success",kError:"Error"};var i;!function(e){e[e.CREATE_COLLECTION=0]="CREATE_COLLECTION",e[e.GET_COLLECTION_BY_ID=1]="GET_COLLECTION_BY_ID",e[e.UPDATE_COLLECTION=2]="UPDATE_COLLECTION",e[e.DELETE_COLLECTION=3]="DELETE_COLLECTION",e[e.DELETE_COLLECTION_POLL=4]="DELETE_COLLECTION_POLL",e[e.GET_ALL_COLLECTIONS=5]="GET_ALL_COLLECTIONS",e[e.COPY_COLLECTION=6]="COPY_COLLECTION",e[e.POLL_COPY_COLLECTION=7]="POLL_COPY_COLLECTION",e[e.GET_COLLECTION_METADATA=8]="GET_COLLECTION_METADATA",e[e.ENUMERATE_ASSETS=9]="ENUMERATE_ASSETS",e[e.DELETE_ASSET=10]="DELETE_ASSET",e[e.GET_USER_SHARING_METADATA=11]="GET_USER_SHARING_METADATA",e[e.ADD_COLLABORATORS=12]="ADD_COLLABORATORS",e[e.UPDATE_REMOVE_COLLABORATORS=13]="UPDATE_REMOVE_COLLABORATORS",e[e.UNSHARE_COLLECTION=14]="UNSHARE_COLLECTION",e[e.GET_COLLABORATORS=15]="GET_COLLABORATORS",e[e.SHARE_SINGLE_ASSET=16]="SHARE_SINGLE_ASSET",e[e.SHARE_SINGLE_ASSET_POLL=17]="SHARE_SINGLE_ASSET_POLL",e[e.CREATE_CHAT_SESSION=18]="CREATE_CHAT_SESSION",e[e.GET_STATUS_IN_SESSION=19]="GET_STATUS_IN_SESSION",e[e.DELELE_CHAT_SESSION=20]="DELELE_CHAT_SESSION",e[e.DELETE_DOCUMENTS_IN_SESSION=21]="DELETE_DOCUMENTS_IN_SESSION",e[e.GET_LIST_OF_CONVERSATION=22]="GET_LIST_OF_CONVERSATION",e[e.GET_ALL_NOTES=23]="GET_ALL_NOTES",e[e.CREATE_NOTE=24]="CREATE_NOTE",e[e.UPDATE_NOTE=25]="UPDATE_NOTE",e[e.DELETE_NOTE=26]="DELETE_NOTE",e[e.DOWNLOAD_SMALL_NOTE=27]="DOWNLOAD_SMALL_NOTE",e[e.UPDATE_NOTE_METADATA=28]="UPDATE_NOTE_METADATA",e[e.GET_NOTE_METADATA=29]="GET_NOTE_METADATA",e[e.GET_NOTE_CONFIG=30]="GET_NOTE_CONFIG",e[e.ASK_QUESTION=31]="ASK_QUESTION",e[e.GET_GOAL_RECOMMENDATIONS=32]="GET_GOAL_RECOMMENDATIONS",e[e.CREATE_CUSTOM_AGENT=33]="CREATE_CUSTOM_AGENT",e[e.UPDATE_CUSTOM_AGENT=34]="UPDATE_CUSTOM_AGENT",e[e.GET_CUSTOM_AGENTS=35]="GET_CUSTOM_AGENTS",e[e.DELETE_CUSTOM_AGENT=36]="DELETE_CUSTOM_AGENT",e[e.CREATE_CUSTOM_AGENT_POLL=37]="CREATE_CUSTOM_AGENT_POLL",e[e.UPDATE_CUSTOM_AGENT_POLL=38]="UPDATE_CUSTOM_AGENT_POLL",e[e.GET_KW_PROVISIONING_INFO=39]="GET_KW_PROVISIONING_INFO",e[e.CONVERT_NOTE_TO_PDF=40]="CONVERT_NOTE_TO_PDF",e[e.CONVERT_NOTE_TO_PDF_POLL=41]="CONVERT_NOTE_TO_PDF_POLL"}(i||(i={}));const s=[i.CREATE_COLLECTION];class KWRequestCommand{constructor(e){this.mCommand=e}get command(){return this.mCommand}networkCallName(){switch(this.mCommand){case i.CREATE_COLLECTION:return"CreateCollection";case i.GET_COLLECTION_BY_ID:return"GetCollectionById";case i.UPDATE_COLLECTION:return"UpdateCollection";case i.DELETE_COLLECTION:return"deleteCollection";case i.DELETE_COLLECTION_POLL:return"deleteCollectionPoll";case i.GET_ALL_COLLECTIONS:return"GetAllCollections";case i.COPY_COLLECTION:return"CopyCollection";case i.POLL_COPY_COLLECTION:return"PollCopyCollection";case i.GET_COLLECTION_METADATA:return"GetCollectionMetadata";case i.ENUMERATE_ASSETS:return"EnumerateAssets";case i.GET_USER_SHARING_METADATA:return"GetUserSharingMetadata";case i.ADD_COLLABORATORS:return"AddCollaborators";case i.UPDATE_REMOVE_COLLABORATORS:return"UpdateRemoveCollaborators";case i.UNSHARE_COLLECTION:return"UnshareCollection";case i.GET_COLLABORATORS:return"GetCollaborators";case i.SHARE_SINGLE_ASSET:return"ShareSingleAsset";case i.SHARE_SINGLE_ASSET_POLL:return"ShareSingleAssetPolling";case i.DELETE_ASSET:return"DeleteAsset";case i.CREATE_CHAT_SESSION:return"CreateChatSession";case i.GET_STATUS_IN_SESSION:return"GetStatusInSession";case i.DELELE_CHAT_SESSION:return"DeleteChatSession";case i.DELETE_DOCUMENTS_IN_SESSION:return"DeleteDocumentsInSession";case i.GET_LIST_OF_CONVERSATION:return"GetListOfConversation";case i.GET_ALL_NOTES:return"GetAllNotes";case i.CREATE_NOTE:return"CreateNote";case i.UPDATE_NOTE:return"UpdateNote";case i.DELETE_NOTE:return"DeleteNote";case i.DOWNLOAD_SMALL_NOTE:return"DownloadSmallNote";case i.ASK_QUESTION:return"AskQuestion";case i.GET_GOAL_RECOMMENDATIONS:return"GetGoalRecommendations";case i.CREATE_CUSTOM_AGENT:return"CreateCustomAgent";case i.UPDATE_CUSTOM_AGENT:return"UpdateCustomAgent";case i.GET_CUSTOM_AGENTS:return"GetCustomAgents";case i.DELETE_CUSTOM_AGENT:return"DeleteCustomAgent";case i.CREATE_CUSTOM_AGENT_POLL:return"CreateCustomAgentPolling";case i.UPDATE_CUSTOM_AGENT_POLL:return"UpdateCustomAgentPolling";case i.CONVERT_NOTE_TO_PDF:return"ConvertNoteToPdf";case i.CONVERT_NOTE_TO_PDF_POLL:return"ConvertNoteToPdfPolling";default:return""}}}},EvqT:(e,t,n)=>{"use strict";n.d(t,{A:()=>DownloadSmallNoteCommand,d:()=>o});var o,r=n("yXqW");!function(e){e.READ_NETWORK="readFromNetwork",e.READ_CACHE="readFromCache"}(o||(o={}));class DownloadSmallNoteCommand extends r.VM{constructor(e,t,n,o,i){super(r.Bm.DOWNLOAD_SMALL_NOTE),this.parameters={downloadURL:e,id:t,featureFlag:o,noteType:n,eTag:i}}}},iFic:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>GetAllNotesCommand,J6:()=>o,qP:()=>r});var o,r,i=n("yXqW");!function(e){e.NAME="name",e.CREATED="created",e.MODIFIED="modified"}(o||(o={})),function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(r||(r={}));class GetAllNotesCommand extends i.VM{constructor(e){let{pageInfo:t,id:n,access_level:r,order_by:s=o.CREATED,sort_order:a,page_size:l,type:c,canFetchFromCache:u=!0}=e;super(i.Bm.GET_ALL_NOTES),this.id=n,this.pageInfo=t,this.order_by=s,this.sort_order=a,this.page_size=l,this.access_level=r,this.type=c,this.canFetchFromCache=u}}},jpy3:(e,t,n)=>{"use strict";var o,r,i,s;n.d(t,{dE:()=>o}),function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_COMMAND=1]="INVALID_COMMAND",e[e.INVALID_PARAMS=2]="INVALID_PARAMS",e[e.NETWORK_CALL_FAILED=3]="NETWORK_CALL_FAILED",e[e.UNKNOWN_ERROR=4]="UNKNOWN_ERROR",e[e.RESOURCE_CONFLICT=5]="RESOURCE_CONFLICT",e[e.APPLICATION_UPDATE_REQUIRED=6]="APPLICATION_UPDATE_REQUIRED"}(o||(o={})),function(e){e[e.DROPBOX=0]="DROPBOX",e[e.ONEDRIVE=1]="ONEDRIVE",e[e.GDRIVE=2]="GDRIVE",e[e.BOX=3]="BOX"}(r||(r={})),function(e){e[e.ID=0]="ID",e[e.FILE_PATH=1]="FILE_PATH",e[e.URI=2]="URI"}(i||(i={})),function(e){e[e.LOCAL=0]="LOCAL",e[e.SC=1]="SC",e[e.ACPC=2]="ACPC",e[e.EMAIL=3]="EMAIL",e[e.RTF=4]="RTF",e[e.WEB_LINK=5]="WEB_LINK",e[e.EXTERNAL_DRIVE=6]="EXTERNAL_DRIVE"}(s||(s={}))},h9J0:(e,t,n)=>{"use strict";n.d(t,{A:()=>BucketiseForAnalytics});const o=[{threshold:0,label:"bad_time_arg"},{threshold:10,label:"0ms_to_10ms"},{threshold:20,label:"10ms_to_20ms"},{threshold:50,label:"20ms_to_50ms"},{threshold:100,label:"50ms_to_100ms"},{threshold:200,label:"100ms_to_200ms"},{threshold:300,label:"200ms_to_300ms"},{threshold:400,label:"300ms_to_400ms"},{threshold:500,label:"400ms_to_500ms"},{threshold:750,label:"500ms_to_750ms"},{threshold:1e3,label:"750ms_to_1s"},{threshold:1500,label:"1s_to_1.5s"},{threshold:2e3,label:"1.5s_to_2s"},{threshold:2500,label:"2s_to_2.5s"},{threshold:3e3,label:"2.5s_to_3s"},{threshold:4e3,label:"3s_to_4s"},{threshold:5e3,label:"4s_to_5s"},{threshold:6e3,label:"5s_to_6s"},{threshold:7e3,label:"6s_to_7s"},{threshold:8e3,label:"7s_to_8s"},{threshold:9e3,label:"8s_to_9s"},{threshold:1e4,label:"9s_to_10s"},{threshold:12e3,label:"10s_to_12s"},{threshold:15e3,label:"12s_to_15s"},{threshold:2e4,label:"15s_to_20s"},{threshold:25e3,label:"20s_to_25s"},{threshold:3e4,label:"25s_to_30s"},{threshold:35e3,label:"30s_to_35s"},{threshold:4e4,label:"35s_to_40s"},{threshold:45e3,label:"40s_to_45s"},{threshold:5e4,label:"45s_to_50s"},{threshold:55e3,label:"50s_to_55s"},{threshold:6e4,label:"55s_to_60s"},{threshold:9e4,label:"1m_to_1.5m"},{threshold:12e4,label:"1.5m_to_2m"},{threshold:15e4,label:"2m_to_2.5m"},{threshold:18e4,label:"2.5m_to_3m"},{threshold:3e5,label:"3m_to_5m"},{threshold:6e5,label:"5m_to_10m"},{threshold:Number.MAX_SAFE_INTEGER,label:"above_10m"}];function BucketiseForAnalytics(e){var t;return(null===(t=o.find((t=>e<t.threshold)))||void 0===t?void 0:t.label)||"above_10m"}},j66d:(e,t,n)=>{"use strict";n.d(t,{A:()=>Deferred});class Deferred{constructor(){this.mPromise=new Promise(((e,t)=>{this.mResolve=e,this.mReject=t}))}resolve(e){this.mResolve&&this.mResolve(e)}reject(e){this.mReject&&this.mReject(e)}get promise(){return this.mPromise}}},"18Hv":(e,t,n)=>{"use strict";n.d(t,{A:()=>EventDispatcher});class EventDispatcher extends EventTarget{subscribe(e,t,n){this.addEventListener(e,t,n)}unsubscribe(e,t,n){this.removeEventListener(e,t,n)}dispatch(e,t){return this.dispatchEvent(new CustomEvent(e,{detail:t}))}dispatchAsync(e,t){return new Promise((()=>this.dispatchEvent(new CustomEvent(e,t))))}}},CVnK:(e,t,n)=>{"use strict";n.d(t,{EW:()=>U,Gn:()=>makeObservable,HO:()=>toJS,XI:()=>ce,fm:()=>autorun,h5:()=>runInAction,jK:()=>configure,mJ:()=>reaction,qT:()=>Y,sH:()=>D,yl:()=>getDependencyTree,z7:()=>when});function die(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var o={};function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:o}var r=Object.assign,i=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=Object.prototype,l=[];Object.freeze(l);var c={};Object.freeze(c);var u="undefined"!=typeof Proxy,d=Object.toString();function assertProxies(){u||die("Proxy not available")}function once(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var h=function noop(){};function isFunction(e){return"function"==typeof e}function isStringish(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function isObject(e){return null!==e&&"object"==typeof e}function isPlainObject(e){if(!isObject(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===d}function isGenerator(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function addHiddenProp(e,t,n){s(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function addHiddenFinalProp(e,t,n){s(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function createInstanceofPredicate(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return isObject(e)&&!0===e[n]}}function isES6Map(e){return null!=e&&"[object Map]"===Object.prototype.toString.call(e)}function isES6Set(e){return null!=e&&"[object Set]"===Object.prototype.toString.call(e)}var v=void 0!==Object.getOwnPropertySymbols;var f="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:v?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function toPrimitive(e){return null===e?null:"object"==typeof e?""+e:e}function hasProp(e,t){return a.hasOwnProperty.call(e,t)}var p=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(e){var t={};return f(e).forEach((function(n){t[n]=i(e,n)})),t};function getFlag(e,t){return!!(e&t)}function setFlag(e,t,n){return n?e|=t:e&=~t,e}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _createForOfIteratorHelperLoose(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends.apply(null,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var _=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(e){return Object.assign((function decorator(t,n){if(is20223Decorator(n))return e.decorate_20223_(t,n);storeAnnotation(t,n,e)}),e)}function storeAnnotation(e,t,n){hasProp(e,_)||addHiddenProp(e,_,_extends({},e[_])),function assertNotDecorated(e,t,n){0}(),function isOverride(e){return e.annotationType_===y}(n)||(e[_][t]=n)}function is20223Decorator(e){return"object"==typeof e&&"string"==typeof e.kind}var m=Symbol("mobx administration"),g=function(){function Atom(e){void 0===e&&(e="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=V.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var e=Atom.prototype;return e.onBO=function onBO(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},e.onBUO=function onBUO(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},e.reportObserved=function reportObserved$1(){return reportObserved(this)},e.reportChanged=function reportChanged(){startBatch(),propagateChanged(this),endBatch()},e.toString=function toString(){return this.name_},_createClass(Atom,[{key:"isBeingObserved",get:function get(){return getFlag(this.flags_,Atom.isBeingObservedMask_)},set:function set(e){this.flags_=setFlag(this.flags_,Atom.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function get(){return getFlag(this.flags_,Atom.isPendingUnobservationMask_)},set:function set(e){this.flags_=setFlag(this.flags_,Atom.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function get(){return getFlag(this.flags_,Atom.diffValueMask_)?1:0},set:function set(e){this.flags_=setFlag(this.flags_,Atom.diffValueMask_,1===e)}}])}();g.isBeingObservedMask_=1,g.isPendingUnobservationMask_=2,g.diffValueMask_=4;var E=createInstanceofPredicate("Atom",g);function createAtom(e,t,n){void 0===t&&(t=h),void 0===n&&(n=h);var o=new g(e);return t!==h&&function onBecomeObserved(e,t,n){return interceptHook(he,e,t,n)}(o,t),n!==h&&onBecomeUnobserved(o,n),o}var C={identity:function identityComparer(e,t){return e===t},structural:function structuralComparer(e,t){return deepEqual(e,t)},default:function defaultComparer(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function shallowComparer(e,t){return deepEqual(e,t,1)}};function deepEnhancer(e,t,n){return isObservable(e)?e:Array.isArray(e)?D.array(e,{name:n}):isPlainObject(e)?D.object(e,void 0,{name:n}):isES6Map(e)?D.map(e,{name:n}):isES6Set(e)?D.set(e,{name:n}):"function"!=typeof e||isAction(e)||isFlow(e)?e:isGenerator(e)?Ce(e):ue(n,e)}function referenceEnhancer(e){return e}var y="override";function createActionAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$1,extend_:extend_$1,decorate_20223_:decorate_20223_$1}}function make_$1(e,t,n,o){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(o===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(isAction(n.value))return 1;var i=createActionDescriptor(e,this,t,n,!1);return s(o,t,i),2}function extend_$1(e,t,n,o){var r=createActionDescriptor(e,this,t,n);return e.defineProperty_(t,r,o)}function decorate_20223_$1(e,t){var n,o=t.kind,r=t.name,i=t.addInitializer,s=this,a=function _createAction(e){var t,n,o,i;return createAction(null!=(t=null==(n=s.options_)?void 0:n.name)?t:r.toString(),e,null!=(o=null==(i=s.options_)?void 0:i.autoAction)&&o)};return"field"==o?function(e){var t,n=e;return isAction(n)||(n=a(n)),null!=(t=s.options_)&&t.bound&&((n=n.bind(this)).isMobxAction=!0),n}:"method"==o?(isAction(e)||(e=a(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e):void die("Cannot apply '"+s.annotationType_+"' to '"+String(r)+"' (kind: "+o+"):\n'"+s.annotationType_+"' can only be used on properties with a function value.")}function createActionDescriptor(e,t,n,o,r){var i,s,a,l,c,u,d;void 0===r&&(r=Q.safeDescriptors),function assertActionDescriptor(e,t,n,o){t.annotationType_,o.value}(0,t,0,o);var h,v=o.value;null!=(i=t.options_)&&i.bound&&(v=v.bind(null!=(h=e.proxy_)?h:e.target_));return{value:createAction(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),v,null!=(l=null==(c=t.options_)?void 0:c.autoAction)&&l,null!=(u=t.options_)&&u.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function createFlowAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$2,extend_:extend_$2,decorate_20223_:decorate_20223_$2}}function make_$2(e,t,n,o){var r;if(o===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!hasProp(e.target_,t)||!isFlow(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(isFlow(n.value))return 1;var i=createFlowDescriptor(e,this,t,n,!1,!1);return s(o,t,i),2}function extend_$2(e,t,n,o){var r,i=createFlowDescriptor(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,i,o)}function decorate_20223_$2(e,t){var n;var o=t.name,r=t.addInitializer;return isFlow(e)||(e=Ce(e)),null!=(n=this.options_)&&n.bound&&r((function(){var e=this,t=e[o].bind(e);t.isMobXFlow=!0,e[o]=t})),e}function createFlowDescriptor(e,t,n,o,r,i){void 0===i&&(i=Q.safeDescriptors),function assertFlowDescriptor(e,t,n,o){t.annotationType_,o.value}(0,t,0,o);var s,a=o.value;(isFlow(a)||(a=Ce(a)),r)&&((a=a.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:a,configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function createComputedAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$3,extend_:extend_$3,decorate_20223_:decorate_20223_$3}}function make_$3(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function extend_$3(e,t,n,o){return function assertComputedDescriptor(e,t,n,o){t.annotationType_,o.get;0}(0,this,0,n),e.defineComputedProperty_(t,_extends({},this.options_,{get:n.get,set:n.set}),o)}function decorate_20223_$3(e,t){var n=this,o=t.name;return(0,t.addInitializer)((function(){var t=asObservableObject(this)[m],r=_extends({},n.options_,{get:e,context:this});r.name||(r.name="ObservableObject."+o.toString()),t.values_.set(o,new K(r))})),function(){return this[m].getObservablePropValue_(o)}}function createObservableAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$4,extend_:extend_$4,decorate_20223_:decorate_20223_$4}}function make_$4(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function extend_$4(e,t,n,o){var r,i;return function assertObservableDescriptor(e,t,n,o){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(r=null==(i=this.options_)?void 0:i.enhancer)?r:deepEnhancer,o)}function decorate_20223_$4(e,t){var n=this,o=t.kind,r=t.name,i=new WeakSet;function initializeObservable(e,t){var o,s,a=asObservableObject(e)[m],l=new W(t,null!=(o=null==(s=n.options_)?void 0:s.enhancer)?o:deepEnhancer,"ObservableObject."+r.toString(),!1);a.values_.set(r,l),i.add(e)}if("accessor"==o)return{get:function get(){return i.has(this)||initializeObservable(this,e.get.call(this)),this[m].getObservablePropValue_(r)},set:function set(e){return i.has(this)||initializeObservable(this,e),this[m].setObservablePropValue_(r,e)},init:function init(e){return i.has(this)||initializeObservable(this,e),e}}}var A="true",b=createAutoAnnotation();function createAutoAnnotation(e){return{annotationType_:A,options_:e,make_:make_$5,extend_:extend_$5,decorate_20223_:decorate_20223_$5}}function make_$5(e,t,n,o){var r,i,a,l;if(n.get)return U.make_(e,t,n,o);if(n.set){var c=createAction(t.toString(),n.set);return o===e.target_?null===e.defineProperty_(t,{configurable:!Q.safeDescriptors||e.isPlainObject_,set:c})?0:2:(s(o,t,{configurable:!0,set:c}),2)}if(o!==e.target_&&"function"==typeof n.value)return isGenerator(n.value)?(null!=(l=this.options_)&&l.autoBind?Ce.bound:Ce).make_(e,t,n,o):(null!=(a=this.options_)&&a.autoBind?ue.bound:ue).make_(e,t,n,o);var u,d=!1===(null==(r=this.options_)?void 0:r.deep)?D.ref:D;"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return d.make_(e,t,n,o)}function extend_$5(e,t,n,o){var r,i,s;if(n.get)return U.extend_(e,t,n,o);if(n.set)return e.defineProperty_(t,{configurable:!Q.safeDescriptors||e.isPlainObject_,set:createAction(t.toString(),n.set)},o);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(i=this.options_)?void 0:i.deep)?D.ref:D).extend_(e,t,n,o)}function decorate_20223_$5(e,t){die("'"+this.annotationType_+"' cannot be used as a decorator")}var O={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function asCreateObservableOptions(e){return e||O}Object.freeze(O);var S=createObservableAnnotation("observable"),R=createObservableAnnotation("observable.ref",{enhancer:referenceEnhancer}),I=createObservableAnnotation("observable.shallow",{enhancer:function shallowEnhancer(e,t,n){return null==e||isObservableObject(e)||isObservableArray(e)||De(e)||xe(e)?e:Array.isArray(e)?D.array(e,{name:n,deep:!1}):isPlainObject(e)?D.object(e,void 0,{name:n,deep:!1}):isES6Map(e)?D.map(e,{name:n,deep:!1}):isES6Set(e)?D.set(e,{name:n,deep:!1}):void 0}}),N=createObservableAnnotation("observable.struct",{enhancer:function refStructEnhancer(e,t){return deepEqual(e,t)?t:e}}),w=createDecoratorAnnotation(S);function getEnhancerFromOptions(e){return!0===e.deep?deepEnhancer:!1===e.deep?referenceEnhancer:function getEnhancerFromAnnotation(e){var t,n;return e&&null!=(t=null==(n=e.options_)?void 0:n.enhancer)?t:deepEnhancer}(e.defaultDecorator)}function createObservable(e,t,n){return is20223Decorator(t)?S.decorate_20223_(e,t):isStringish(t)?void storeAnnotation(e,t,S):isObservable(e)?e:isPlainObject(e)?D.object(e,t,n):Array.isArray(e)?D.array(e,t):isES6Map(e)?D.map(e,t):isES6Set(e)?D.set(e,t):"object"==typeof e&&null!==e?e:D.box(e,t)}r(createObservable,w);var k,T,D=r(createObservable,{box:function box(e,t){var n=asCreateObservableOptions(t);return new W(e,getEnhancerFromOptions(n),n.name,!0,n.equals)},array:function array(e,t){var n=asCreateObservableOptions(t);return(!1===Q.useProxies||!1===n.proxy?createLegacyArray:createObservableArray)(e,getEnhancerFromOptions(n),n.name)},map:function map(e,t){var n=asCreateObservableOptions(t);return new Te(e,getEnhancerFromOptions(n),n.name)},set:function set(e,t){var n=asCreateObservableOptions(t);return new Le(e,getEnhancerFromOptions(n),n.name)},object:function object(e,t,n){return initObservable((function(){return extendObservable(!1===Q.useProxies||!1===(null==n?void 0:n.proxy)?asObservableObject({},n):function asDynamicObservableObject(e,t){var n,o;return assertProxies(),e=asObservableObject(e,t),null!=(o=(n=e[m]).proxy_)?o:n.proxy_=new Proxy(e,ye)}({},n),e,t)}))},ref:createDecoratorAnnotation(R),shallow:createDecoratorAnnotation(I),deep:w,struct:createDecoratorAnnotation(N)}),P="computed",L=createComputedAnnotation(P),x=createComputedAnnotation("computed.struct",{equals:C.structural}),U=function computed(e,t){if(is20223Decorator(t))return L.decorate_20223_(e,t);if(isStringish(t))return storeAnnotation(e,t,L);if(isPlainObject(e))return createDecoratorAnnotation(createComputedAnnotation(P,e));var n=isPlainObject(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new K(n)};Object.assign(U,L),U.struct=createDecoratorAnnotation(x);var j=0,M=1,F=null!=(k=null==(T=i((function(){}),"name"))?void 0:T.configurable)&&k,G={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(e,t,n,o){function res(){return executeAction(e,n,t,o||this,arguments)}return void 0===n&&(n=!1),res.isMobxAction=!0,res.toString=function(){return t.toString()},F&&(G.value=e,s(res,"name",G)),res}function executeAction(e,t,n,o,r){var i=function _startAction(e,t,n,o){var r=!1,i=0;0;var s=Q.trackingDerivation,a=!t||!s;startBatch();var l=Q.allowStateChanges;a&&(untrackedStart(),l=allowStateChangesStart(!0));var c=allowStateReadsStart(!0),u={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:c,notifySpy_:r,startTime_:i,actionId_:M++,parentActionId_:j};return j=u.actionId_,u}(0,t);try{return n.apply(o,r)}catch(e){throw i.error_=e,e}finally{!function _endAction(e){j!==e.actionId_&&die(30);j=e.parentActionId_,void 0!==e.error_&&(Q.suppressReactionErrors=!0);allowStateChangesEnd(e.prevAllowStateChanges_),allowStateReadsEnd(e.prevAllowStateReads_),endBatch(),e.runAsAction_&&untrackedEnd(e.prevDerivation_);0;Q.suppressReactionErrors=!1}(i)}}function allowStateChanges(e,t){var n=allowStateChangesStart(e);try{return t()}finally{allowStateChangesEnd(n)}}function allowStateChangesStart(e){var t=Q.allowStateChanges;return Q.allowStateChanges=e,t}function allowStateChangesEnd(e){Q.allowStateChanges=e}var W=function(e){function ObservableValue(t,n,o,r,i){var s;return void 0===o&&(o="ObservableValue"),void 0===r&&(r=!0),void 0===i&&(i=C.default),(s=e.call(this,o)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=o,s.equals=i,s.value_=n(t,void 0,o),s}_inheritsLoose(ObservableValue,e);var t=ObservableValue.prototype;return t.dehanceValue=function dehanceValue(e){return void 0!==this.dehancer?this.dehancer(e):e},t.set=function set(e){this.value_;if((e=this.prepareNewValue_(e))!==Q.UNCHANGED){0,this.setNewValue_(e)}},t.prepareNewValue_=function prepareNewValue_(e){if(checkIfStateModificationsAreAllowed(this),hasInterceptors(this)){var t=interceptChange(this,{object:this,type:be,newValue:e});if(!t)return Q.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Q.UNCHANGED:e},t.setNewValue_=function setNewValue_(e){var t=this.value_;this.value_=e,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:be,object:this,newValue:e,oldValue:t})},t.get=function get(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function intercept_(e){return registerInterceptor(this,e)},t.observe_=function observe_(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:be,newValue:this.value_,oldValue:void 0}),registerListener(this,e)},t.raw=function raw(){return this.value_},t.toJSON=function toJSON(){return this.get()},t.toString=function toString(){return this.name_+"["+this.value_+"]"},t.valueOf=function valueOf(){return toPrimitive(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},ObservableValue}(g),B=createInstanceofPredicate("ObservableValue",W),K=function(){function ComputedValue(e){this.dependenciesState_=V.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=V.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new q(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=H.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||die(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=createAction("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?C.structural:C.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var e=ComputedValue.prototype;return e.onBecomeStale_=function onBecomeStale_(){!function propagateMaybeChanged(e){if(e.lowestObserverState_!==V.UP_TO_DATE_)return;e.lowestObserverState_=V.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===V.UP_TO_DATE_&&(e.dependenciesState_=V.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},e.onBO=function onBO(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},e.onBUO=function onBUO(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},e.get=function get(){if(this.isComputing&&die(32,this.name_,this.derivation),0!==Q.inBatch||0!==this.observers_.size||this.keepAlive_){if(reportObserved(this),shouldCompute(this)){var e=Q.trackingContext;this.keepAlive_&&!e&&(Q.trackingContext=this),this.trackAndCompute()&&function propagateChangeConfirmed(e){if(e.lowestObserverState_===V.STALE_)return;e.lowestObserverState_=V.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===V.POSSIBLY_STALE_?t.dependenciesState_=V.STALE_:t.dependenciesState_===V.UP_TO_DATE_&&(e.lowestObserverState_=V.UP_TO_DATE_)}))}(this),Q.trackingContext=e}}else shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());var t=this.value_;if(isCaughtException(t))throw t.cause;return t},e.set=function set(e){if(this.setter_){this.isRunningSetter&&die(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter=!1}}else die(34,this.name_)},e.trackAndCompute=function trackAndCompute(){var e=this.value_,t=this.dependenciesState_===V.NOT_TRACKING_,n=this.computeValue_(!0),o=t||isCaughtException(e)||isCaughtException(n)||!this.equals_(e,n);return o&&(this.value_=n),o},e.computeValue_=function computeValue_(e){this.isComputing=!0;var t,n=allowStateChangesStart(!1);if(e)t=trackDerivedFunction(this,this.derivation,this.scope_);else if(!0===Q.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new q(e)}return allowStateChangesEnd(n),this.isComputing=!1,t},e.suspend_=function suspend_(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},e.observe_=function observe_(e,t){var n=this,o=!0,r=void 0;return autorun((function(){var i=n.get();if(!o||t){var s=untrackedStart();e({observableKind:"computed",debugObjectName:n.name_,type:be,object:n,newValue:i,oldValue:r}),untrackedEnd(s)}o=!1,r=i}))},e.warnAboutUntrackedRead_=function warnAboutUntrackedRead_(){},e.toString=function toString(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function valueOf(){return toPrimitive(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},_createClass(ComputedValue,[{key:"isComputing",get:function get(){return getFlag(this.flags_,ComputedValue.isComputingMask_)},set:function set(e){this.flags_=setFlag(this.flags_,ComputedValue.isComputingMask_,e)}},{key:"isRunningSetter",get:function get(){return getFlag(this.flags_,ComputedValue.isRunningSetterMask_)},set:function set(e){this.flags_=setFlag(this.flags_,ComputedValue.isRunningSetterMask_,e)}},{key:"isBeingObserved",get:function get(){return getFlag(this.flags_,ComputedValue.isBeingObservedMask_)},set:function set(e){this.flags_=setFlag(this.flags_,ComputedValue.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function get(){return getFlag(this.flags_,ComputedValue.isPendingUnobservationMask_)},set:function set(e){this.flags_=setFlag(this.flags_,ComputedValue.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function get(){return getFlag(this.flags_,ComputedValue.diffValueMask_)?1:0},set:function set(e){this.flags_=setFlag(this.flags_,ComputedValue.diffValueMask_,1===e)}}])}();K.isComputingMask_=1,K.isRunningSetterMask_=2,K.isBeingObservedMask_=4,K.isPendingUnobservationMask_=8,K.diffValueMask_=16;var V,H,$=createInstanceofPredicate("ComputedValue",K);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(V||(V={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(H||(H={}));var q=function CaughtException(e){this.cause=void 0,this.cause=e};function isCaughtException(e){return e instanceof q}function shouldCompute(e){switch(e.dependenciesState_){case V.UP_TO_DATE_:return!1;case V.NOT_TRACKING_:case V.STALE_:return!0;case V.POSSIBLY_STALE_:for(var t=allowStateReadsStart(!0),n=untrackedStart(),o=e.observing_,r=o.length,i=0;i<r;i++){var s=o[i];if($(s)){if(Q.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return untrackedEnd(n),allowStateReadsEnd(t),!0}if(e.dependenciesState_===V.STALE_)return untrackedEnd(n),allowStateReadsEnd(t),!0}}return changeDependenciesStateTo0(e),untrackedEnd(n),allowStateReadsEnd(t),!1}}function checkIfStateModificationsAreAllowed(e){}function trackDerivedFunction(e,t,n){var o=allowStateReadsStart(!0);changeDependenciesStateTo0(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Q.runId;var r,i=Q.trackingDerivation;if(Q.trackingDerivation=e,Q.inBatch++,!0===Q.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new q(e)}return Q.inBatch--,Q.trackingDerivation=i,function bindDependencies(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,o=V.UP_TO_DATE_,r=0,i=e.unboundDepsCount_,s=0;s<i;s++){var a=n[s];0===a.diffValue&&(a.diffValue=1,r!==s&&(n[r]=a),r++),a.dependenciesState_>o&&(o=a.dependenciesState_)}n.length=r,e.newObserving_=null,i=t.length;for(;i--;){var l=t[i];0===l.diffValue&&removeObserver(l,e),l.diffValue=0}for(;r--;){var c=n[r];1===c.diffValue&&(c.diffValue=0,addObserver(c,e))}o!==V.UP_TO_DATE_&&(e.dependenciesState_=o,e.onBecomeStale_())}(e),allowStateReadsEnd(o),r}function clearObserving(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)removeObserver(t[n],e);e.dependenciesState_=V.NOT_TRACKING_}function untracked(e){var t=untrackedStart();try{return e()}finally{untrackedEnd(t)}}function untrackedStart(){var e=Q.trackingDerivation;return Q.trackingDerivation=null,e}function untrackedEnd(e){Q.trackingDerivation=e}function allowStateReadsStart(e){var t=Q.allowStateReads;return Q.allowStateReads=e,t}function allowStateReadsEnd(e){Q.allowStateReads=e}function changeDependenciesStateTo0(e){if(e.dependenciesState_!==V.UP_TO_DATE_){e.dependenciesState_=V.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=V.UP_TO_DATE_}}var J=function MobXGlobals(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},X=!0,z=!1,Q=function(){var e=getGlobal();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(X=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new J).version&&(X=!1),X?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new J):(setTimeout((function(){z||die(35)}),1),new J)}();function addObserver(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function removeObserver(e,t){e.observers_.delete(t),0===e.observers_.size&&queueForUnobservation(e)}function queueForUnobservation(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Q.pendingUnobservations.push(e))}function startBatch(){Q.inBatch++}function endBatch(){if(0==--Q.inBatch){runReactions();for(var e=Q.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers_.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof K&&n.suspend_())}Q.pendingUnobservations=[]}}function reportObserved(e){var t=Q.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&Q.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(0===e.observers_.size&&Q.inBatch>0&&queueForUnobservation(e),!1)}function propagateChanged(e){e.lowestObserverState_!==V.STALE_&&(e.lowestObserverState_=V.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===V.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=V.STALE_})))}var Y=function(){function Reaction(e,t,n,o){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=V.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=H.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=o}var e=Reaction.prototype;return e.onBecomeStale_=function onBecomeStale_(){this.schedule_()},e.schedule_=function schedule_(){this.isScheduled||(this.isScheduled=!0,Q.pendingReactions.push(this),runReactions())},e.runReaction_=function runReaction_(){if(!this.isDisposed){startBatch(),this.isScheduled=!1;var e=Q.trackingContext;if(Q.trackingContext=this,shouldCompute(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Q.trackingContext=e,endBatch()}},e.track=function track(e){if(!this.isDisposed){startBatch();0,this.isRunning=!0;var t=Q.trackingContext;Q.trackingContext=this;var n=trackDerivedFunction(this,e,void 0);Q.trackingContext=t,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(n)&&this.reportExceptionInDerivation_(n.cause),endBatch()}},e.reportExceptionInDerivation_=function reportExceptionInDerivation_(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Q.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Q.suppressReactionErrors||console.error(n,e),Q.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.dispose=function dispose(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(startBatch(),clearObserving(this),endBatch()))},e.getDisposer_=function getDisposer_(e){var t=this,n=function dispose(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",dispose)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[m]=this,n},e.toString=function toString(){return"Reaction["+this.name_+"]"},e.trace=function trace$1(e){void 0===e&&(e=!1)},_createClass(Reaction,[{key:"isDisposed",get:function get(){return getFlag(this.flags_,Reaction.isDisposedMask_)},set:function set(e){this.flags_=setFlag(this.flags_,Reaction.isDisposedMask_,e)}},{key:"isScheduled",get:function get(){return getFlag(this.flags_,Reaction.isScheduledMask_)},set:function set(e){this.flags_=setFlag(this.flags_,Reaction.isScheduledMask_,e)}},{key:"isTrackPending",get:function get(){return getFlag(this.flags_,Reaction.isTrackPendingMask_)},set:function set(e){this.flags_=setFlag(this.flags_,Reaction.isTrackPendingMask_,e)}},{key:"isRunning",get:function get(){return getFlag(this.flags_,Reaction.isRunningMask_)},set:function set(e){this.flags_=setFlag(this.flags_,Reaction.isRunningMask_,e)}},{key:"diffValue",get:function get(){return getFlag(this.flags_,Reaction.diffValueMask_)?1:0},set:function set(e){this.flags_=setFlag(this.flags_,Reaction.diffValueMask_,1===e)}}])}();Y.isDisposedMask_=1,Y.isScheduledMask_=2,Y.isTrackPendingMask_=4,Y.isRunningMask_=8,Y.diffValueMask_=16;var Z=100,ee=function reactionScheduler(e){return e()};function runReactions(){Q.inBatch>0||Q.isRunningReactions||ee(runReactionsHelper)}function runReactionsHelper(){Q.isRunningReactions=!0;for(var e=Q.pendingReactions,t=0;e.length>0;){++t===Z&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),o=0,r=n.length;o<r;o++)n[o].runReaction_()}Q.isRunningReactions=!1}var te=createInstanceofPredicate("Reaction",Y);var ne="action",oe="autoAction",re="<unnamed action>",ie=createActionAnnotation(ne),se=createActionAnnotation("action.bound",{bound:!0}),ae=createActionAnnotation(oe,{autoAction:!0}),le=createActionAnnotation("autoAction.bound",{autoAction:!0,bound:!0});function createActionFactory(e){return function action(t,n){return isFunction(t)?createAction(t.name||re,t,e):isFunction(n)?createAction(t,n,e):is20223Decorator(n)?(e?ae:ie).decorate_20223_(t,n):isStringish(n)?storeAnnotation(t,n,e?ae:ie):isStringish(t)?createDecoratorAnnotation(createActionAnnotation(e?oe:ne,{name:t,autoAction:e})):void 0}}var ce=createActionFactory(!1);Object.assign(ce,ie);var ue=createActionFactory(!0);function runInAction(e){return executeAction(e.name,!1,e,this,void 0)}function isAction(e){return isFunction(e)&&!0===e.isMobxAction}function autorun(e,t){var n,o,r,i;void 0===t&&(t=c);var s,a=null!=(n=null==(o=t)?void 0:o.name)?n:"Autorun";if(!t.scheduler&&!t.delay)s=new Y(a,(function(){this.track(reactionRunner)}),t.onError,t.requiresObservable);else{var l=createSchedulerFromOptions(t),u=!1;s=new Y(a,(function(){u||(u=!0,l((function(){u=!1,s.isDisposed||s.track(reactionRunner)})))}),t.onError,t.requiresObservable)}function reactionRunner(){e(s)}return null!=(r=t)&&null!=(r=r.signal)&&r.aborted||s.schedule_(),s.getDisposer_(null==(i=t)?void 0:i.signal)}Object.assign(ue,ae),ce.bound=createDecoratorAnnotation(se),ue.bound=createDecoratorAnnotation(le);var de=function run(e){return e()};function createSchedulerFromOptions(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:de}function reaction(e,t,n){var o,r,i;void 0===n&&(n=c);var s,a=null!=(o=n.name)?o:"Reaction",l=ce(a,n.onError?function wrapErrorHandler(e,t){return function(){try{return t.apply(this,arguments)}catch(t){e.call(this,t)}}}(n.onError,t):t),u=!n.scheduler&&!n.delay,d=createSchedulerFromOptions(n),h=!0,v=!1,f=n.compareStructural?C.structural:n.equals||C.default,p=new Y(a,(function(){h||u?reactionRunner():v||(v=!0,d(reactionRunner))}),n.onError,n.requiresObservable);function reactionRunner(){if(v=!1,!p.isDisposed){var t=!1,o=s;p.track((function(){var n=allowStateChanges(!1,(function(){return e(p)}));t=h||!f(s,n),s=n})),(h&&n.fireImmediately||!h&&t)&&l(s,o,p),h=!1}}return null!=(r=n)&&null!=(r=r.signal)&&r.aborted||p.schedule_(),p.getDisposer_(null==(i=n)?void 0:i.signal)}var he="onBO",ve="onBUO";function onBecomeUnobserved(e,t,n){return interceptHook(ve,e,t,n)}function interceptHook(e,t,n,o){var r="function"==typeof o?getAtom(t,n):getAtom(t),i=isFunction(o)?o:n,s=e+"L";return r[s]?r[s].add(i):r[s]=new Set([i]),function(){var e=r[s];e&&(e.delete(i),0===e.size&&delete r[s])}}var fe="never",pe="always",_e="observed";function configure(e){!0===e.isolateGlobalState&&function isolateGlobalState(){if((Q.pendingReactions.length||Q.inBatch||Q.isRunningReactions)&&die(36),z=!0,X){var e=getGlobal();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),Q=new J}}();var t=e.useProxies,n=e.enforceActions;if(void 0!==t&&(Q.useProxies=t===pe||t!==fe&&"undefined"!=typeof Proxy),"ifavailable"===t&&(Q.verifyProxies=!0),void 0!==n){var o=n===pe?pe:n===_e;Q.enforceActions=o,Q.allowStateChanges=!0!==o&&o!==pe}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(Q[t]=!!e[t])})),Q.allowStateReads=!Q.observableRequiresReaction,e.reactionScheduler&&function setReactionScheduler(e){var t=ee;ee=function reactionScheduler(n){return e((function(){return t(n)}))}}(e.reactionScheduler)}function extendObservable(e,t,n,o){var r=p(t);return initObservable((function(){var t=asObservableObject(e,o)[m];f(r).forEach((function(e){t.extend_(e,r[e],!n||(!(e in n)||n[e]))}))})),e}function getDependencyTree(e,t){return nodeToDependencyTree(getAtom(e,t))}function nodeToDependencyTree(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=function unique(e){return Array.from(new Set(e))}(e.observing_).map(nodeToDependencyTree)),t}var me=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var ge=createFlowAnnotation("flow"),Ee=createFlowAnnotation("flow.bound",{bound:!0}),Ce=Object.assign((function flow(e,t){if(is20223Decorator(t))return ge.decorate_20223_(e,t);if(isStringish(t))return storeAnnotation(e,t,ge);var n=e,o=n.name||"<unnamed flow>",r=function res(){var e,t=arguments,r=++me,i=ce(o+" - runid: "+r+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function onFulfilled(e){var t;s=void 0;try{t=ce(o+" - runid: "+r+" - yield "+a++,i.next).call(i,e)}catch(e){return n(e)}next(t)}function onRejected(e){var t;s=void 0;try{t=ce(o+" - runid: "+r+" - yield "+a++,i.throw).call(i,e)}catch(e){return n(e)}next(t)}function next(e){if(!isFunction(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(onFulfilled,onRejected);e.then(next,n)}e=n,onFulfilled(void 0)}));return a.cancel=ce(o+" - runid: "+r+" - cancel",(function(){try{s&&cancelPromise(s);var t=i.return(void 0),n=Promise.resolve(t.value);n.then(h,h),cancelPromise(n),e(new FlowCancellationError)}catch(t){e(t)}})),a};return r.isMobXFlow=!0,r}),ge);function cancelPromise(e){isFunction(e.cancel)&&e.cancel()}function isFlow(e){return!0===(null==e?void 0:e.isMobXFlow)}function _isObservable(e,t){return!!e&&(void 0!==t?!!isObservableObject(e)&&e[m].values_.has(t):isObservableObject(e)||!!e[m]||E(e)||te(e)||$(e))}function isObservable(e){return _isObservable(e)}function cache(e,t,n){return e.set(t,n),n}function toJSHelper(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!isObservable(e))return e;if(B(e)||$(e))return toJSHelper(e.get(),t);if(t.has(e))return t.get(e);if(isObservableArray(e)){var n=cache(t,e,new Array(e.length));return e.forEach((function(e,o){n[o]=toJSHelper(e,t)})),n}if(xe(e)){var o=cache(t,e,new Set);return e.forEach((function(e){o.add(toJSHelper(e,t))})),o}if(De(e)){var r=cache(t,e,new Map);return e.forEach((function(e,n){r.set(n,toJSHelper(e,t))})),r}var i=cache(t,e,{});return function apiOwnKeys(e){if(isObservableObject(e))return e[m].ownKeys_();die(38)}(e).forEach((function(n){a.propertyIsEnumerable.call(e,n)&&(i[n]=toJSHelper(e[n],t))})),i}function toJS(e,t){return toJSHelper(e,new Map)}function transaction(e,t){void 0===t&&(t=void 0),startBatch();try{return e.apply(t)}finally{endBatch()}}function when(e,t,n){return 1===arguments.length||t&&"object"==typeof t?function whenPromise(e,t){var n,o,r;0;if(null!=t&&null!=(n=t.signal)&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function cancel(){return null}});var i=new Promise((function(n,i){var s,a=_when(e,n,_extends({},t,{onError:i}));o=function cancel(){a(),i(new Error("WHEN_CANCELLED"))},r=function abort(){a(),i(new Error("WHEN_ABORTED"))},null==t||null==(s=t.signal)||null==s.addEventListener||s.addEventListener("abort",r)})).finally((function(){var e;return null==t||null==(e=t.signal)||null==e.removeEventListener?void 0:e.removeEventListener("abort",r)}));return i.cancel=o,i}(e,t):_when(e,t,n||{})}function _when(e,t,n){var o;if("number"==typeof n.timeout){var r=new Error("WHEN_TIMEOUT");o=setTimeout((function(){if(!s[m].isDisposed){if(s(),!n.onError)throw r;n.onError(r)}}),n.timeout)}n.name="When";var i=createAction("When-effect",t),s=autorun((function(t){allowStateChanges(!1,e)&&(t.dispose(),o&&clearTimeout(o),i())}),n);return s}function getAdm(e){return e[m]}Ce.bound=createDecoratorAnnotation(Ee);var ye={has:function has(e,t){return getAdm(e).has_(t)},get:function get(e,t){return getAdm(e).get_(t)},set:function set(e,t,n){var o;return!!isStringish(t)&&(null==(o=getAdm(e).set_(t,n,!0))||o)},deleteProperty:function deleteProperty(e,t){var n;return!!isStringish(t)&&(null==(n=getAdm(e).delete_(t,!0))||n)},defineProperty:function defineProperty(e,t,n){var o;return null==(o=getAdm(e).defineProperty_(t,n))||o},ownKeys:function ownKeys(e){return getAdm(e).ownKeys_()},preventExtensions:function preventExtensions(e){die(13)}};function hasInterceptors(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function registerInterceptor(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),once((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function interceptChange(e,t){var n=untrackedStart();try{for(var o=[].concat(e.interceptors_||[]),r=0,i=o.length;r<i&&((t=o[r](t))&&!t.type&&die(14),t);r++);return t}finally{untrackedEnd(n)}}function hasListeners(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function registerListener(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),once((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function notifyListeners(e,t){var n=untrackedStart(),o=e.changeListeners_;if(o){for(var r=0,i=(o=o.slice()).length;r<i;r++)o[r](t);untrackedEnd(n)}}function makeObservable(e,t,n){return initObservable((function(){var o=asObservableObject(e,n)[m];null!=t||(t=function collectStoredAnnotations(e){return hasProp(e,_)||addHiddenProp(e,_,_extends({},e[_])),e[_]}(e)),f(t).forEach((function(e){return o.make_(e,t[e])}))})),e}var Ae="splice",be="update",Oe={get:function get(e,t){var n=e[m];return t===m?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?hasProp(Re,t)?Re[t]:e[t]:n.get_(parseInt(t))},set:function set(e,t,n){var o=e[m];return"length"===t&&o.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:o.set_(parseInt(t),n),!0},preventExtensions:function preventExtensions(){die(15)}},Se=function(){function ObservableArrayAdministration(e,t,n,o){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=o,this.atom_=new g(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var e=ObservableArrayAdministration.prototype;return e.dehanceValue_=function dehanceValue_(e){return void 0!==this.dehancer?this.dehancer(e):e},e.dehanceValues_=function dehanceValues_(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.intercept_=function intercept_(e){return registerInterceptor(this,e)},e.observe_=function observe_(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,e)},e.getArrayLength_=function getArrayLength_(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function setArrayLength_(e){("number"!=typeof e||isNaN(e)||e<0)&&die("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),o=0;o<e-t;o++)n[o]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},e.updateArrayLength_=function updateArrayLength_(e,t){e!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&reserveArrayBuffer(e+t+1)},e.spliceWithArray_=function spliceWithArray_(e,t,n){var o=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=l),hasInterceptors(this)){var i=interceptChange(this,{object:this.proxy_,type:Ae,index:e,removedCount:t,added:n});if(!i)return l;t=i.removedCount,n=i.added}if(n=0===n.length?n:n.map((function(e){return o.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},e.spliceItemsIntoValues_=function spliceItemsIntoValues_(e,t,n){var o;if(n.length<1e4)return(o=this.values_).splice.apply(o,[e,t].concat(n));var r=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<i.length;a++)this.values_[e+n.length+a]=i[a];return r},e.notifyArrayChildUpdate_=function notifyArrayChildUpdate_(e,t,n){var o=!this.owned_&&!1,r=hasListeners(this),i=r||o?{observableKind:"array",object:this.proxy_,type:be,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&notifyListeners(this,i)},e.notifyArraySplice_=function notifyArraySplice_(e,t,n){var o=!this.owned_&&!1,r=hasListeners(this),i=r||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Ae,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&notifyListeners(this,i)},e.get_=function get_(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},e.set_=function set_(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&die(17,e,n.length),e<n.length){this.atom_;var o=n[e];if(hasInterceptors(this)){var r=interceptChange(this,{type:be,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,o))!==o&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,o))}else{for(var i=new Array(e+1-n.length),s=0;s<i.length-1;s++)i[s]=void 0;i[i.length-1]=t,this.spliceWithArray_(n.length,0,i)}},ObservableArrayAdministration}();function createObservableArray(e,t,n,o){return void 0===n&&(n="ObservableArray"),void 0===o&&(o=!1),assertProxies(),initObservable((function(){var r=new Se(n,t,o,!1);addHiddenFinalProp(r.values_,m,r);var i=new Proxy(r.values_,Oe);return r.proxy_=i,e&&e.length&&r.spliceWithArray_(0,0,e),i}))}var Re={clear:function clear(){return this.splice(0)},replace:function replace(e){var t=this[m];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function toJSON(){return this.slice()},splice:function splice(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var i=this[m];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,o)},spliceWithArray:function spliceWithArray(e,t,n){return this[m].spliceWithArray_(e,t,n)},push:function push(){for(var e=this[m],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function pop(){return this.splice(Math.max(this[m].values_.length-1,0),1)[0]},shift:function shift(){return this.splice(0,1)[0]},unshift:function unshift(){for(var e=this[m],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function reverse(){return Q.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function sort(){Q.trackingDerivation&&die(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function remove(e){var t=this[m],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function addArrayExtension(e,t){"function"==typeof Array.prototype[e]&&(Re[e]=t(e))}function simpleFunc(e){return function(){var t=this[m];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function mapLikeFunc(e){return function(t,n){var o=this,r=this[m];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,o)}))}}function reduceLikeFunc(e){return function(){var t=this,n=this[m];n.atom_.reportObserved();var o=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,o){return r(e,n,o,t)},o[e].apply(o,arguments)}}addArrayExtension("at",simpleFunc),addArrayExtension("concat",simpleFunc),addArrayExtension("flat",simpleFunc),addArrayExtension("includes",simpleFunc),addArrayExtension("indexOf",simpleFunc),addArrayExtension("join",simpleFunc),addArrayExtension("lastIndexOf",simpleFunc),addArrayExtension("slice",simpleFunc),addArrayExtension("toString",simpleFunc),addArrayExtension("toLocaleString",simpleFunc),addArrayExtension("toSorted",simpleFunc),addArrayExtension("toSpliced",simpleFunc),addArrayExtension("with",simpleFunc),addArrayExtension("every",mapLikeFunc),addArrayExtension("filter",mapLikeFunc),addArrayExtension("find",mapLikeFunc),addArrayExtension("findIndex",mapLikeFunc),addArrayExtension("findLast",mapLikeFunc),addArrayExtension("findLastIndex",mapLikeFunc),addArrayExtension("flatMap",mapLikeFunc),addArrayExtension("forEach",mapLikeFunc),addArrayExtension("map",mapLikeFunc),addArrayExtension("some",mapLikeFunc),addArrayExtension("toReversed",mapLikeFunc),addArrayExtension("reduce",reduceLikeFunc),addArrayExtension("reduceRight",reduceLikeFunc);var Ie=createInstanceofPredicate("ObservableArrayAdministration",Se);function isObservableArray(e){return isObject(e)&&Ie(e[m])}var Ne={},we="add",ke="delete",Te=function(){function ObservableMap(e,t,n){var o=this;void 0===t&&(t=deepEnhancer),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[m]=Ne,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,isFunction(Map)||die(18),initObservable((function(){o.keysAtom_=createAtom("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,e&&o.merge(e)}))}var e=ObservableMap.prototype;return e.has_=function has_(e){return this.data_.has(e)},e.has=function has(e){var t=this;if(!Q.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var o=n=new W(this.has_(e),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(e,o),onBecomeUnobserved(o,(function(){return t.hasMap_.delete(e)}))}return n.get()},e.set=function set(e,t){var n=this.has_(e);if(hasInterceptors(this)){var o=interceptChange(this,{type:n?be:we,object:this,newValue:t,name:e});if(!o)return this;t=o.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},e.delete=function _delete(e){var t=this;if((this.keysAtom_,hasInterceptors(this))&&!interceptChange(this,{type:ke,object:this,name:e}))return!1;if(this.has_(e)){var n=hasListeners(this),o=n?{observableKind:"map",debugObjectName:this.name_,type:ke,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return transaction((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&notifyListeners(this,o),!0}return!1},e.updateValue_=function updateValue_(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Q.UNCHANGED){var o=hasListeners(this),r=o?{observableKind:"map",debugObjectName:this.name_,type:be,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),o&&notifyListeners(this,r)}},e.addValue_=function addValue_(e,t){var n=this;this.keysAtom_,transaction((function(){var o,r=new W(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(o=n.hasMap_.get(e))||o.setNewValue_(!0),n.keysAtom_.reportChanged()}));var o=hasListeners(this),r=o?{observableKind:"map",debugObjectName:this.name_,type:we,object:this,name:e,newValue:t}:null;o&&notifyListeners(this,r)},e.get=function get(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function dehanceValue_(e){return void 0!==this.dehancer?this.dehancer(e):e},e.keys=function keys(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function values(){var e=this,t=this.keys();return makeIterableForMap({next:function next(){var n=t.next(),o=n.done,r=n.value;return{done:o,value:o?void 0:e.get(r)}}})},e.entries=function entries(){var e=this,t=this.keys();return makeIterableForMap({next:function next(){var n=t.next(),o=n.done,r=n.value;return{done:o,value:o?void 0:[r,e.get(r)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function forEach(e,t){for(var n,o=_createForOfIteratorHelperLoose(this);!(n=o()).done;){var r=n.value,i=r[0],s=r[1];e.call(t,s,i,this)}},e.merge=function merge(e){var t=this;return De(e)&&(e=new Map(e)),transaction((function(){isPlainObject(e)?function getPlainObjectKeys(e){var t=Object.keys(e);if(!v)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return a.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],o=e[1];return t.set(n,o)})):isES6Map(e)?(function isPlainES6Map(e){var t=Object.getPrototypeOf(e),n=Object.getPrototypeOf(t);return null===Object.getPrototypeOf(n)}(e)||die(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&die(20,e)})),this},e.clear=function clear(){var e=this;transaction((function(){untracked((function(){for(var t,n=_createForOfIteratorHelperLoose(e.keys());!(t=n()).done;){var o=t.value;e.delete(o)}}))}))},e.replace=function replace(e){var t=this;return transaction((function(){for(var n,o=function convertToMap(e){if(isES6Map(e)||De(e))return e;if(Array.isArray(e))return new Map(e);if(isPlainObject(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return die(21,e)}(e),r=new Map,i=!1,s=_createForOfIteratorHelperLoose(t.data_.keys());!(n=s()).done;){var a=n.value;if(!o.has(a))if(t.delete(a))i=!0;else{var l=t.data_.get(a);r.set(a,l)}}for(var c,u=_createForOfIteratorHelperLoose(o.entries());!(c=u()).done;){var d=c.value,h=d[0],v=d[1],f=t.data_.has(h);if(t.set(h,v),t.data_.has(h)){var p=t.data_.get(h);r.set(h,p),f||(i=!0)}}if(!i)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var _=t.data_.keys(),m=r.keys(),g=_.next(),E=m.next();!g.done;){if(g.value!==E.value){t.keysAtom_.reportChanged();break}g=_.next(),E=m.next()}t.data_=r})),this},e.toString=function toString(){return"[object ObservableMap]"},e.toJSON=function toJSON(){return Array.from(this)},e.observe_=function observe_(e,t){return registerListener(this,e)},e.intercept_=function intercept_(e){return registerInterceptor(this,e)},_createClass(ObservableMap,[{key:"size",get:function get(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function get(){return"Map"}}])}(),De=createInstanceofPredicate("ObservableMap",Te);function makeIterableForMap(e){return e[Symbol.toStringTag]="MapIterator",makeIterable(e)}var Pe={},Le=function(){function ObservableSet(e,t,n){var o=this;void 0===t&&(t=deepEnhancer),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[m]=Pe,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,isFunction(Set)||die(22),this.enhancer_=function(e,o){return t(e,o,n)},initObservable((function(){o.atom_=createAtom(o.name_),e&&o.replace(e)}))}var e=ObservableSet.prototype;return e.dehanceValue_=function dehanceValue_(e){return void 0!==this.dehancer?this.dehancer(e):e},e.clear=function clear(){var e=this;transaction((function(){untracked((function(){for(var t,n=_createForOfIteratorHelperLoose(e.data_.values());!(t=n()).done;){var o=t.value;e.delete(o)}}))}))},e.forEach=function forEach(e,t){for(var n,o=_createForOfIteratorHelperLoose(this);!(n=o()).done;){var r=n.value;e.call(t,r,r,this)}},e.add=function add(e){var t=this;if((this.atom_,hasInterceptors(this))&&!interceptChange(this,{type:we,object:this,newValue:e}))return this;if(!this.has(e)){transaction((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,o=hasListeners(this),r=o?{observableKind:"set",debugObjectName:this.name_,type:we,object:this,newValue:e}:null;n,o&&notifyListeners(this,r)}return this},e.delete=function _delete(e){var t=this;if(hasInterceptors(this)&&!interceptChange(this,{type:ke,object:this,oldValue:e}))return!1;if(this.has(e)){var n=hasListeners(this),o=n?{observableKind:"set",debugObjectName:this.name_,type:ke,object:this,oldValue:e}:null;return transaction((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&notifyListeners(this,o),!0}return!1},e.has=function has(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},e.entries=function entries(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return makeIterableForSet({next:function next(){var o=e;return e+=1,o<n.length?{value:[t[o],n[o]],done:!1}:{value:void 0,done:!0}}})},e.keys=function keys(){return this.values()},e.values=function values(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return makeIterableForSet({next:function next(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{value:void 0,done:!0}}})},e.intersection=function intersection(e){return isES6Set(e)&&!xe(e)?e.intersection(this):new Set(this).intersection(e)},e.union=function union(e){return isES6Set(e)&&!xe(e)?e.union(this):new Set(this).union(e)},e.difference=function difference(e){return new Set(this).difference(e)},e.symmetricDifference=function symmetricDifference(e){return isES6Set(e)&&!xe(e)?e.symmetricDifference(this):new Set(this).symmetricDifference(e)},e.isSubsetOf=function isSubsetOf(e){return new Set(this).isSubsetOf(e)},e.isSupersetOf=function isSupersetOf(e){return new Set(this).isSupersetOf(e)},e.isDisjointFrom=function isDisjointFrom(e){return isES6Set(e)&&!xe(e)?e.isDisjointFrom(this):new Set(this).isDisjointFrom(e)},e.replace=function replace(e){var t=this;return xe(e)&&(e=new Set(e)),transaction((function(){Array.isArray(e)||isES6Set(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&die("Cannot initialize set from "+e)})),this},e.observe_=function observe_(e,t){return registerListener(this,e)},e.intercept_=function intercept_(e){return registerInterceptor(this,e)},e.toJSON=function toJSON(){return Array.from(this)},e.toString=function toString(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},_createClass(ObservableSet,[{key:"size",get:function get(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function get(){return"Set"}}])}(),xe=createInstanceofPredicate("ObservableSet",Le);function makeIterableForSet(e){return e[Symbol.toStringTag]="SetIterator",makeIterable(e)}var Ue=Object.create(null),je="remove",Me=function(){function ObservableObjectAdministration(e,t,n,o){void 0===t&&(t=new Map),void 0===o&&(o=b),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=o,this.keysAtom_=new g("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var e=ObservableObjectAdministration.prototype;return e.getObservablePropValue_=function getObservablePropValue_(e){return this.values_.get(e).get()},e.setObservablePropValue_=function setObservablePropValue_(e,t){var n=this.values_.get(e);if(n instanceof K)return n.set(t),!0;if(hasInterceptors(this)){var o=interceptChange(this,{type:be,object:this.proxy_||this.target_,name:e,newValue:t});if(!o)return null;t=o.newValue}if((t=n.prepareNewValue_(t))!==Q.UNCHANGED){var r=hasListeners(this),i=r?{type:be,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&notifyListeners(this,i)}return!0},e.get_=function get_(e){return Q.trackingDerivation&&!hasProp(this.target_,e)&&this.has_(e),this.target_[e]},e.set_=function set_(e,t,n){return void 0===n&&(n=!1),hasProp(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function has_(e){if(!Q.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new W(e in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},e.make_=function make_(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(assertAnnotable(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[_])&&n[e])return;die(1,t.annotationType_,this.name_+"."+e.toString())}for(var o=this.target_;o&&o!==a;){var r=i(o,e);if(r){var s=t.make_(this,e,r,o);if(0===s)return;if(1===s)break}o=Object.getPrototypeOf(o)}recordAnnotationApplied(this,t,e)}},e.extend_=function extend_(e,t,n,o){if(void 0===o&&(o=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,o);assertAnnotable(this,n,e);var r=n.extend_(this,e,t,o);return r&&recordAnnotationApplied(this,n,e),r},e.defineProperty_=function defineProperty_(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{startBatch();var o=this.delete_(e);if(!o)return o;if(hasInterceptors(this)){var r=interceptChange(this,{object:this.proxy_||this.target_,name:e,type:we,newValue:t.value});if(!r)return null;var i=r.newValue;t.value!==i&&(t=_extends({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else s(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{endBatch()}return!0},e.defineObservableProperty_=function defineObservableProperty_(e,t,n,o){void 0===o&&(o=!1),this.keysAtom_;try{startBatch();var r=this.delete_(e);if(!r)return r;if(hasInterceptors(this)){var i=interceptChange(this,{object:this.proxy_||this.target_,name:e,type:we,newValue:t});if(!i)return null;t=i.newValue}var a=getCachedObservablePropDescriptor(e),l={configurable:!Q.safeDescriptors||this.isPlainObject_,enumerable:!0,get:a.get,set:a.set};if(o){if(!Reflect.defineProperty(this.target_,e,l))return!1}else s(this.target_,e,l);var c=new W(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{endBatch()}return!0},e.defineComputedProperty_=function defineComputedProperty_(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{startBatch();var o=this.delete_(e);if(!o)return o;if(hasInterceptors(this))if(!interceptChange(this,{object:this.proxy_||this.target_,name:e,type:we,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=getCachedObservablePropDescriptor(e),i={configurable:!Q.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else s(this.target_,e,i);this.values_.set(e,new K(t)),this.notifyPropertyAddition_(e,void 0)}finally{endBatch()}return!0},e.delete_=function delete_(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!hasProp(this.target_,e))return!0;if(hasInterceptors(this)&&!interceptChange(this,{object:this.proxy_||this.target_,name:e,type:je}))return null;try{var n;startBatch();var o,r=hasListeners(this),s=this.values_.get(e),a=void 0;if(!s&&r)a=null==(o=i(this.target_,e))?void 0:o.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof W&&(a=s.value_),propagateChanged(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(n=n.get(e))||n.set(e in this.target_),r){var l={type:je,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,r&&notifyListeners(this,l)}}finally{endBatch()}return!0},e.observe_=function observe_(e,t){return registerListener(this,e)},e.intercept_=function intercept_(e){return registerInterceptor(this,e)},e.notifyPropertyAddition_=function notifyPropertyAddition_(e,t){var n,o=hasListeners(this);if(o){var r=o?{type:we,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,o&&notifyListeners(this,r)}null==(n=this.pendingKeys_)||null==(n=n.get(e))||n.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function ownKeys_(){return this.keysAtom_.reportObserved(),f(this.target_)},e.keys_=function keys_(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},ObservableObjectAdministration}();function asObservableObject(e,t){var n;if(hasProp(e,m))return e;var o=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new Me(e,new Map,String(o),function getAnnotationFromOptions(e){var t;return e?null!=(t=e.defaultDecorator)?t:createAutoAnnotation(e):void 0}(t));return addHiddenProp(e,m,r),e}var Fe=createInstanceofPredicate("ObservableObjectAdministration",Me);function getCachedObservablePropDescriptor(e){return Ue[e]||(Ue[e]={get:function get(){return this[m].getObservablePropValue_(e)},set:function set(t){return this[m].setObservablePropValue_(e,t)}})}function isObservableObject(e){return!!isObject(e)&&Fe(e[m])}function recordAnnotationApplied(e,t,n){var o;null==(o=e.target_[_])||delete o[n]}function assertAnnotable(e,t,n){}var Ge=createArrayEntryDescriptor(0),We=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function set(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Be=0,Ke=function StubArray(){};!function inherit(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(Ke,Array.prototype);var Ve=function(e){function LegacyObservableArray(t,n,o,r){var i;return void 0===o&&(o="ObservableArray"),void 0===r&&(r=!1),i=e.call(this)||this,initObservable((function(){var e=new Se(o,n,r,!0);e.proxy_=i,addHiddenFinalProp(i,m,e),t&&t.length&&i.spliceWithArray(0,0,t),We&&Object.defineProperty(i,"0",Ge)})),i}_inheritsLoose(LegacyObservableArray,e);var t=LegacyObservableArray.prototype;return t.concat=function concat(){this[m].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return isObservableArray(e)?e.slice():e})))},t[Symbol.iterator]=function(){var e=this,t=0;return makeIterable({next:function next(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},_createClass(LegacyObservableArray,[{key:"length",get:function get(){return this[m].getArrayLength_()},set:function set(e){this[m].setArrayLength_(e)}},{key:Symbol.toStringTag,get:function get(){return"Array"}}])}(Ke);function createArrayEntryDescriptor(e){return{enumerable:!1,configurable:!0,get:function get(){return this[m].get_(e)},set:function set(t){this[m].set_(e,t)}}}function createArrayBufferItem(e){s(Ve.prototype,""+e,createArrayEntryDescriptor(e))}function reserveArrayBuffer(e){if(e>Be){for(var t=Be;t<e+100;t++)createArrayBufferItem(t);Be=e}}function createLegacyArray(e,t,n){return new Ve(e,t,n)}function getAtom(e,t){if("object"==typeof e&&null!==e){if(isObservableArray(e))return void 0!==t&&die(23),e[m].atom_;if(xe(e))return e.atom_;if(De(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||die(25,t,getDebugName(e)),n}if(isObservableObject(e)){if(!t)return die(26);var o=e[m].values_.get(t);return o||die(27,t,getDebugName(e)),o}if(E(e)||$(e)||te(e))return e}else if(isFunction(e)&&te(e[m]))return e[m];die(28)}function getAdministration(e,t){return e||die(29),void 0!==t?getAdministration(getAtom(e,t)):E(e)||$(e)||te(e)||De(e)||xe(e)?e:e[m]?e[m]:void die(24,e)}function getDebugName(e,t){var n;if(void 0!==t)n=getAtom(e,t);else{if(isAction(e))return e.name;n=isObservableObject(e)||De(e)||xe(e)?getAdministration(e):getAtom(e)}return n.name_}function initObservable(e){var t=untrackedStart(),n=allowStateChangesStart(!0);startBatch();try{return e()}finally{endBatch(),allowStateChangesEnd(n),untrackedEnd(t)}}Object.entries(Re).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&addHiddenProp(Ve.prototype,t,n)})),reserveArrayBuffer(1e3);var He,$e=a.toString;function deepEqual(e,t,n){return void 0===n&&(n=-1),eq(e,t,n)}function eq(e,t,n,o,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var s=$e.call(e);if(s!==$e.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=unwrap(e),t=unwrap(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(isFunction(l)&&l instanceof l&&isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var u=(o=o||[]).length;u--;)if(o[u]===e)return r[u]===t;if(o.push(e),r.push(t),a){if((u=e.length)!==t.length)return!1;for(;u--;)if(!eq(e[u],t[u],n-1,o,r))return!1}else{var d,h=Object.keys(e);if(u=h.length,Object.keys(t).length!==u)return!1;for(;u--;)if(!hasProp(t,d=h[u])||!eq(e[d],t[d],n-1,o,r))return!1}return o.pop(),r.pop(),!0}function unwrap(e){return isObservableArray(e)?e.slice():isES6Map(e)||De(e)||isES6Set(e)||xe(e)?Array.from(e.entries()):e}var qe=(null==(He=getGlobal().Iterator)?void 0:He.prototype)||{};function makeIterable(e){return e[Symbol.iterator]=getSelf,Object.assign(Object.create(qe),e)}function getSelf(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===getGlobal()[e]&&die("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function spy(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName},$mobx:m})},"0VNB":(e,t,n)=>{var o=n("5qvf"),r=n("bF6B"),i=r;i.v1=o,i.v4=r,e.exports=i},"2a4/":e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function bytesToUuid(e,n){var o=n||0,r=t;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}},JTTR:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function whatwgRNG(){return t(n),n}}else{var o=new Array(16);e.exports=function mathRNG(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},"5qvf":(e,t,n)=>{var o,r,i=n("JTTR"),s=n("2a4/"),a=0,l=0;e.exports=function v1(e,t,n){var c=t&&n||0,u=t||[],d=(e=e||{}).node||o,h=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==h){var v=i();null==d&&(d=o=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==h&&(h=r=16383&(v[6]<<8|v[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:l+1,_=f-a+(p-l)/1e4;if(_<0&&void 0===e.clockseq&&(h=h+1&16383),(_<0||f>a)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,l=p,r=h;var m=(1e4*(268435455&(f+=122192928e5))+p)%4294967296;u[c++]=m>>>24&255,u[c++]=m>>>16&255,u[c++]=m>>>8&255,u[c++]=255&m;var g=f/4294967296*1e4&268435455;u[c++]=g>>>8&255,u[c++]=255&g,u[c++]=g>>>24&15|16,u[c++]=g>>>16&255,u[c++]=h>>>8|128,u[c++]=255&h;for(var E=0;E<6;++E)u[c+E]=d[E];return t||s(u)}},bF6B:(e,t,n)=>{var o=n("JTTR"),r=n("2a4/");e.exports=function v4(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||r(s)}}}]);