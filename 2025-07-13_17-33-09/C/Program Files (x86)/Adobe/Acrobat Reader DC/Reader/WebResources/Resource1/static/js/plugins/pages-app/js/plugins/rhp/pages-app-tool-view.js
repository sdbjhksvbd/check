/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
 *
 * ADOBE CONFIDENTIAL
 * ___________________
 *
 *  Copyright 2012 Adobe Systems Incorporated
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 **************************************************************************/

define("acplugins/pages-app/js/ac-pages-app",["plugins-common/ac-plugins"],function(e){var i=e.PagesApp;return i||(i=e.PagesApp={}),i}),define("acplugins/pages-app/js/templates/rhp/pages-app-tool",[],function(){return'<!-- Copyright 2012 Adobe Systems Incorporated. All Rights Reserved. --><div class="rhp pagesapp_tool ui-theme theme-container"><div class="rhp pagesapp-content"><div class="rhp description theme-text"><%= description %></div></div><input type="button" class="rhp control-button pagesapp-start   theme-button theme-button-label site-catalyst" tabindex="0"    aria-labelledby="<%= start %>" value="<%= start %>" role="button"/></div>'}),define("acplugins/pages-app/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/pages-app/js/nls/root/ui-strings",{PAGES_APP:"Organize Pages",PAGES_APP_TOOL_VIEW_TITLE_RHP:"Delete, insert, extract and rotate pages.",PAGES_APP_ICON_TOOLTIP:"Learn more",PAGES_APP_START:"Try now",PAGES_APP_HEADING:"Adobe Acrobat Pro",PAGES_APP_RHP_GO_URL:"http://www.adobe.com/go/organizerhprdr_12_0_0"}),define("aictools/aic",["aicx/ac-aicx"],function(e){return window.AiC=_.extend(window.AiC||{},{getBaseUrl:function(){return e.getBaseAicUrl()+"createpdf/"},getBaseUriApi:function(){return this.getBaseUrl()+"api/"},appEvents:_.extend({},Backbone.Events),init:function(e){return this.initializedPromise||(this.initializedPromise=$.Deferred()),this.appApi||!e?this.initializedPromise.promise():(this.appApi=e,AiC.appApi.done(_.bind(function(){try{var e=AiC.appApi.routerApi,i=_.map(e.getQueryParams(),function(e,i){return i+":"+e+";"}).join("");1===e.getPathname().indexOf("my_plan")&&LOG("requestType=deeplink	requestPath="+e.getPathname().substr(1)+"	requestParams="+i+"	requestHash="+AiC.appApi.routerApi.getHash().substr(1)+"	requestHost="+location.host,LOG.INFO,{logConsole:!1,logServer:!0})}catch(t){}this.initializedPromise.resolve()},this)),this.initializedPromise.promise())}}),window.AiC}),define("aictools/util/localize",["aictools/aic"],function(e){return e.Localize={htmlTrim:function(e){return e.replace(/<!--(.*?)-->\s*/,"")},htmlSanitize:function(e){function i(e){return _.isString(e)||_.isNumber(e)||_.isBoolean(e)||_.isDate(e)}var t={};if(i(e))t=this.htmlSanitizeString(e.toString());else{if(!_.isObject(e))throw"localize: invalid object: "+e.toString();_.each(e,_.bind(function(e,p){if(!i(e))throw"localize: Value for key: "+p+" is missing or invalid";t[p]=this.htmlSanitizeString(e.toString())},this))}return t},htmlSanitizeString:function(e){var i=e,t=i.indexOf("<%="),p=i.indexOf("%>");if(t>=0&&p>t)throw"Unprocessed template parameter: "+i;return i=_.escape(i)}},e.Localize}),define("acplugins/pages-app/js/ops/plugin/starting-plugin-op",["core/ac-core","acplugins/pages-app/js/ac-pages-app","core/ops/op"],function(e,i){return i.StartingPluginOp=e.Op.extend({run:function(){return this._getResolvedPromise()}}),i.StartingPluginOp}),define("acplugins/pages-app/js/ops/full-preview-overlay/selecting-full-preview-overlay-op",["core/ac-core","acplugins/pages-app/js/ac-pages-app","core/ops/op"],function(e,i){return i.SelectingFullPreviewOverlayOp=e.Op.extend({run:function(){return e.opFactory.create("SelectingPluginOp",this.options).run("full_preview_overlay_example")}}),i.SelectingFullPreviewOverlayOp}),define("acplugins/pages-app/js/ops/op-factory",["core/ac-core","acplugins/pages-app/js/ac-pages-app","acplugins/pages-app/js/ops/plugin/starting-plugin-op","acplugins/pages-app/js/ops/full-preview-overlay/selecting-full-preview-overlay-op"],function(e,i){i.OpFactory=e.Op.extend({create:function(e,t){var p=i[e];return p?new p(t):void LOG(0,"AcPagesApp.OpFactory.create: Unrecognized class: "+e)}})}),define("acplugins/pages-app/js/pages-app",["acplugins/pages-app/js/ac-pages-app","acplugins/pages-app/js/ops/op-factory"],function(e){_.extend(e,{init:function(){e.opFactory=new e.OpFactory}})}),define("acplugins/pages-app/js/plugin",["acplugins/pages-app/js/ac-pages-app","acplugins/pages-app/js/pages-app"],function(e){e.init()}),define("acplugins/pages-app/js/views/selector-view",["core/ac-core","acplugins/pages-app/js/ac-pages-app","i18n!acplugins/pages-app/js/nls/ui-strings","core/views/plugin-selector-view"],function(e,i,t){return i.SelectorView=e.PluginSelectorView.extend({getSelectorLabel:function(){return t.PAGES_APP},getSelectorIconClass:function(){return"pagesapp-toolbar-icon"},getSiteCatalystName:function(){return"pagesapp"}}),i.SelectorView}),define("acplugins/pages-app/js/plugins/rhp/pages-app-selector",["acplugins/pages-app/js/ac-pages-app","acplugins/pages-app/js/views/selector-view","acplugins/pages-app/js/pages-app"],function(e){return e.SelectorView}),define("acplugins/pages-app/js/plugins/rhp/pages-app-tool-view",["core/ac-core","files/ac-files","acplugins/pages-app/js/ac-pages-app","acplugins/pages-app/js/templates/rhp/pages-app-tool","i18n!acplugins/pages-app/js/nls/ui-strings","aictools/util/localize","core/utils/sc-analytics","core/views/plugin-content-view","acplugins/pages-app/js/plugin","acplugins/pages-app/js/plugins/rhp/pages-app-selector"],function(e,i,t,p,n,a,s){return t.ToolView=e.PluginContentView.extend({events:{"click .pagesapp-start":"_onStartClick","click .icon":"_onIconClick","keydown .icon":"_onKeyDown"},initialize:function(i){e.PluginContentView.prototype.initialize.call(this,i)},template:_.template(p),_onStartClick:function(){var e=[s.TOOLS,this.getSiteCatalystName(),s.START_NOW,s.CLICKED,s.RHP];this.options.appApi.siteCatalystApi.logScEvent(e),this.options.appApi.rnaApi.done(_.bind(function(e){this._launchPagesAppGoUrl(e)},this));var i=[s.TOOLS,this.getSiteCatalystName(),s.UPSELL_STARTED,s.RHP];this.options.appApi.siteCatalystApi.logScEvent(i)},_onIconClick:function(){this.options.appApi.rnaApi.done(_.bind(function(e){this._launchPagesAppSsoUrl(e)},this))},_launchPagesAppSsoUrl:function(e){e.rnaServicesAPI.handleCloudLinkedApps("PagesApp").done(_.bind(function(i){i||this._launchPagesAppGoUrl(e)},this))},_launchPagesAppGoUrl:function(e){e.rnaServicesAPI.invokeMethod({methodName:"ExecuteCommand",methodArgs:"PageRdrAppCTARHP"}).then(_.bind(function(i){i||e.openDecoratedUrl(n.PAGES_APP_RHP_GO_URL)},this),_.bind(function(){e.openDecoratedUrl(n.PAGES_APP_RHP_GO_URL)},this))},setHtml:function(e){return this.$el.html(this.template(a.htmlSanitize(e))),this.$el},render:function(){this.$el;if(this.$el.addClass("pagesapp-rhp"),e.PluginContentView.prototype.render.call(this),!($("#pagesapp_tool").length>0)){this.setHtml({heading:n.PAGES_APP_HEADING,description:n.PAGES_APP_TOOL_VIEW_TITLE_RHP,icon_tooltip:n.PAGES_APP_ICON_TOOLTIP,start:n.PAGES_APP_START}),this._renderChildViews();var i=[s.TOOLS,this.getSiteCatalystName(),s.START_NOW,s.SHOWN,s.RHP];this.options.appApi.siteCatalystApi.logScEvent(i)}},_onKeyDown:function(e){var i=e.keyCode,t=$(e.target),p=$.Event("click");switch(i){case 13:case 32:t.trigger(p),e.preventDefault()}},selectPlugin:function(){this.options.appApi.displayApi.applyUIThemeStyles(this.$el).then(_.bind(function(){this.render(),this.options.appApi.displayApi.showSpinner(!1)},this));var e=this.options;return this._startPlugin().then(_.bind(function(){return this.render(),this.options.appApi.displayApi.showSpinner(!1),t.opFactory.create("SelectingFullPreviewOverlayOp",_.extend({},e,{})).run()},this))},getSiteCatalystName:function(){return"pagesapp"},_renderChildViews:function(){return void 0},_startPlugin:function(){var e=this._startingPluginPromise;return e||(e=this._startingPluginPromise=t.opFactory.create("StartingPluginOp",this.options).run()),e}}),t.ToolView});