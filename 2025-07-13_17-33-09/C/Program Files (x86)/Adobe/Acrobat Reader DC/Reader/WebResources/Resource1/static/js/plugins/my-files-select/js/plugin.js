/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

define("acplugins/my-files/js/ac-my-files",["plugins-common/ac-plugins"],function(e){var i=e.MyFiles;return i||(i=e.MyFiles={}),i}),define("acplugins/my-files-select/js/ac-my-files-select",["plugins-common/ac-plugins"],function(e){var i=e.MyFilesSelect;return i||(i=e.MyFilesSelect={}),i}),define("acplugins/my-files/js/ops/plugin/initializing-plugin-op",["core/ac-core","files/ac-files","plugins-common/ac-plugins","acplugins/my-files/js/ac-my-files","core/ops/op"],function(e,i,n,t){return t.InitializingPluginOp=e.Op.extend({run:function(){var t,o,s,l,r=this.options,c=r.appApi,a=c.pluginsApi;t=e.modelFactory,o=e.uiModelFactory,s=i.uiModelFactory,_.extend(r,{fileUploadModel:t.create("FileUploadModel"),notificationModel:t.create("NotificationModel"),sessionModel:t.create("SessionModel"),collectionsUiModel:o.create("CollectionsUiModel"),dialogsUiModel:o.create("DialogsUiModel"),errorUiModel:o.create("ErrorUiModel"),fileUploadUiModel:o.create("FileUploadUiModel"),folderUiModel:o.create("FolderUiModel"),hoverPreviewUiModel:o.create("HoverPreviewUiModel"),rhpPreviewUiModel:o.create("RhpPreviewUiModel"),selectionActionsPluginsUiModel:o.create("PluginsUiModel"),keyUiModel:o.create("KeyUiModel"),menusUiModel:o.create("MenusUiModel"),sortUiModel:o.create("SortUiModel"),filesUiModel:s.create("FilesUiModel"),sharingUiModel:s.create("SharingUiModel")}),r.noFullPreviewImpl||_.extend(r,{fullPreviewUiModel:o.create("FullPreviewUiModel"),fullPreviewOverlaysUiModel:o.create("PluginsUiModel"),fullPreviewPluginsUiModel:o.create("PluginsUiModel"),fullPreviewRhpPluginsUiModel:o.create("PluginsUiModel")}),a.isInSearchResultsView()?(_.extend(r,{noSearchControl:!0,noSort:!0,noNewFolder:!0,noFilter:!0,isInSearchResultsView:!0}),r.filesUiModel.set("view",i.FilesUiModel.VIEW_SEARCH_RESULTS)):_.extend(r,{searchModel:t.create("SearchModel",{},this.options),searchUiModel:o.create("SearchUiModel"),selectionUiModel:o.create("SelectionUiModel")}),r.noSelectionActions||(l=a.getPluginTypeConfig("file_selection_actions"),_.extend(r,{actualPluginIds:[]}),_.each(l.plugin_ids,function(e){var i=a.getPluginGroupId(e);e=e+"-"+r.pluginId,r.actualPluginIds.push(e),a.registerPluginsUiModel(e,r.selectionActionsPluginsUiModel),a.addPluginsConfig(e,n.types.file_selection_actions),a.setPluginGroupId(e,i)}),a.registerPluginsUiModel(a.getPluginTypeConfig("file_selection_actions"),r.selectionActionsPluginsUiModel));var p=new $.Deferred,d=r.appApi.connectorsApi,u=d.isConnectorRemovable(d.getConnectorPluginName(r.pluginId));return u?(_.extend(r,{folderModel:t.create("FolderModel")}),p.resolve()):r.appApi.discoveryUrisApi.checkDCAPIEnabled().done(_.bind(function(){r.appApi.discoveryUrisApi.useDCApi()?_.extend(r,{folderModel:t.create("FolderModelDCAPI")}):_.extend(r,{folderModel:t.create("FolderModel")}),p.resolve()})),p.promise()}}),t.InitializingPluginOp}),define("acplugins/my-files/js/ops/plugin/running-plugin-op",["core/ac-core","files/ac-files","acplugins/my-files/js/ac-my-files","core/ops/op"],function(e,i,n){n.RunningPluginOp=e.Op.extend({run:function(){var e,n,t,o,s,l,r,c=this.options;return e=i.opFactory,n=e.create("ListeningForSelectionChangeOp",c),t=e.create("ListeningForViewEventsOp",c),s=e.create("ListeningForSearchInvalidationOp",c),o=e.create("ListeningForSearchQueriesChangeOp",c),l=c.noNotifications?this._getResolvedPromise():e.create("ListeningForCurrentFolderNotificationsOp",c).run(),r=c.noNotifications?this._getResolvedPromise():e.create("ListeningForDupErrorsOp",c).run(),$.when(n.run(),t.run(),s.run(),o.run(),l,r)}})}),define("acplugins/my-files/js/ops/plugin/starting-plugin-op",["core/ac-core","files/ac-files","acplugins/my-files/js/ac-my-files","core/utils/util","core/ops/op"],function(e,i,n,t){n.StartingPluginOp=e.Op.extend({run:function(){var o,s,l=this.options,r=l.appApi,c=i.opFactory,a=$.Deferred();return t.isCEF()||c.create("RestoringFilesPrefsOp",l).run(),c.create("InitializingAcrobatOp",l).run(),n.opFactory.create("RunningPluginOp",l).run(),l.noSelectionActions||e.opFactory.create("LoadingSelectionActionsOp",l).run(),o=l.pluginId,s=r.pluginsApi.getDefaultPluginId("file_selection_dlg"),!r.saveAsApi.isRunningInFileSaveAs()||s!==o||"root-select"!==o&&"ccloud-select"!==o?this._getResolvedPromise():(l.readerContextModel.done(_.bind(function(e){var i=e.get("rna"),n=i.get("viewData").get("fileSelectData");n.invoke("getFileAncestors",[]).done(_.bind(function(e){_.isUndefined(e)||0===e.length||(r.folderApi.setCurrentFolderId(o,e),r.saveAsApi.setCurrentFolderId(e)),a.resolve()},this))},this)),a.promise())}})}),define("acplugins/my-files/js/ops/op-factory",["core/ac-core","acplugins/my-files/js/ac-my-files","acplugins/my-files/js/ops/plugin/initializing-plugin-op","acplugins/my-files/js/ops/plugin/running-plugin-op","acplugins/my-files/js/ops/plugin/starting-plugin-op"],function(e,i){i.OpFactory=e.Op.extend({create:function(e,n){var t=i[e];return t?new t(n):void LOG(0,"AcMyFiles.OpFactory.create: Unrecognized class: "+e)}})}),define("acplugins/ac-bh",[],function(){var e=Ac.Bh;return e||(e=Ac.Bh={}),e}),define("acplugins/build-num",{pluginBuildNumber:"000001"}),define("acplugins/my-files/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/my-files/js/nls/root/ui-strings",{FOOTER_ANCHOR:"Go to Adobe Document Cloud Website",NOTIFICATION_HEADING:"<%= cloudName %> Files",CLOUD_NAME:"Adobe cloud storage",UNSUPPORTED_CONNECTOR_MSG:"<%= actionName %> is currently not supported for files stored in <%= connectorLabel %>."}),define("acplugins/bh-plugin-view",["core/ac-core","acplugins/ac-bh","core/views/plugin-content-view"],function(e,i){return i.PluginView=e.PluginContentView.extend({getAppApiVersion:function(){return Ac.Plugins.groups.blue_heron.FRAMEWORK_VERSION}}),i.PluginView}),define("acplugins/my-files/js/views/plugin-view",["core/ac-core","files/ac-files","plugins-common/ac-plugins","acplugins/ac-bh","acplugins/my-files/js/ac-my-files","core/utils/sc-analytics","acplugins/build-num","core/utils/router-util","core/utils/action-ids","i18n!files/nls/ui-strings","i18n!core/nls/ui-strings","core/utils/file-types","core/utils/util","core/utils/string-util","i18n!acplugins/my-files/js/nls/ui-strings","acplugins/bh-plugin-view","files/views/files-container-view"],function(e,i,n,t,o,s,l,r,c,a,p,d,u,g,h){return o.PluginView=t.PluginView.extend({initialize:function(){t.PluginView.prototype.initialize.call(this),u.isCEF()&&_.extend(this.options,{noUpload:!0,noHoverPreview:!0,noNewFolder:!1,folderDeletionDisabled:!1,noDownload:!0,noShare:!1,noShareButton:!1,footerAnchorText:void 0})},render:function(){var e=this.options;e.appApi.displayApi.applyUIThemeStyles(this.$el).then(_.bind(function(){t.PluginView.prototype.render.call(this),this._renderChildViews(),this._isListeningForFileUploadEvents||(i.opFactory.create("ListeningForFileUploadEventsOp",e).run(),this._isListeningForFileUploadEvents=!0)},this)),!e.appApi.selectionApi.isRunningInFileSelection()||"root-select"!==e.pluginId&&"ccloud-select"!==e.pluginId||e.appApi.rnaApi.done(function(e){e.logAnayticsCustomOpenSave("Time_To_Show_Dialog_View_Connector_File_List")}),e.forRecentFileListing&&this.options.appApi.rnaApi.done(_.bind(function(e){e.fileApi({methodName:"getSelectedRecentFileData"}).done(_.bind(function(){},this))},this))},events:function(){return u.isCEF()?_.extend({},e.View.prototype.events,{changeNetworkStateFromFeat:"_onNetworkStateChangeFromFeat"}):void 0},initPlugin:function(){return this._initPlugin()},selectPlugin:function(n){var t,o,s,l,r,p=this.options,d=p.fullPreviewUiModel,g=p.appApi.routerApi,f=p.appApi.connectorsApi,A=p.appApi.pluginsApi,v=p.appApi.folderApi,F=p.appApi.sessionApi,C=p.appApi.networkConnectivityApi,S=p.appApi.displayApi,m=this.options.rnaRecentFilesSelect,I=u.isCEF();this.options.appApi.acroLogApi.ACRO_INFO("[Funcn: selectPlugin ]: yourfiles start"),this.options.appApi.done(_.bind(function(){},this));var P=this.options.appApi.routerApi.parseQueryParams(window.location.href.slice(window.location.href.indexOf("?")));if(I){if(n&&(this._pluginOptions=n),p.isInSearchResultsView&&(p.searchModel=this._pluginOptions.searchModel,p.searchUiModel=this._pluginOptions.searchUiModel,p.selectionUiModel=this._pluginOptions.selectionUiModel,p.ussSearchModel=this._pluginOptions.ussSearchModel,p.selectionUiModel.set("multiple_selection",!n.singleFileSelection),p.collectionsUiModel.set("checkbox",!n.singleFileSelection),"root"===p.pluginId?(p.sortUiModel.set("order_by","modified"),p.sortUiModel.set("mru_date_order","modified")):p.sortUiModel.set("order_by","none")),p.forRecentFileListing="true"==P.forRecentFileListing?!0:!1,C.removeNetworkOnlineChangeCallback(this._onOnlineChanged),C.addNetworkOnlineChangeCallback(this._onOnlineChanged),p.appApi.rnaApi.done(_.bind(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&C.addNetworkConnectivtyChangeCallback(this._onOnlineChanged)},this)),!C.isOnline()&&!m||!F.isSignedInReader()&&!m)return this.options.appApi.acroLogApi.ACRO_INFO("[Funcn: selectPlugin]: yourfiles, no network connectivity or not signed in "),F.removeSignedInChangeCallback(this._onSignedInChange),F.addSignedInChangeCallback(this._onSignedInChange),this._isSelected=!0,p.isInSearchResultsView&&e.opFactory.create("LoadingSelectionActionsOp",p).run(),this.render(),this.options.appApi.displayApi.showSpinner(!1),this._getResolvedPromise();this.options.appApi.acroLogApi.ACRO_INFO("[Funcn: selectPlugin ]: yourfiles, network connectivity and signed in checks done")}if(n=n||this.getPluginOptions(),n&&(this._setParentScContext(n.scContext),t=n.routeFolderId,o=n.routeViewType,s=n.routeFilesFilters,l=n.routeFileId),t)p.folderUiModel.set("route_folder_id",t),p.searchUiModel.removeAllFieldQueries();else if(s)p.searchUiModel.removeAllFieldQueries(),p.searchUiModel.setFieldQueriesPath(s),p.sortUiModel.setSortFromQueryParams(g.getQueryParams());else if(I&&this._isSelected)return m||(F.removeSignedInChangeCallback(this._onSignedInChange),F.addSignedInChangeCallback(this._onSignedInChange)),this.render(),this._getResolvedPromise();this._isSelected=!0,I&&!p.isInSearchResultsView;var M=this.options.appApi.acroLogApi;return this._startPlugin().then(function(){return m?(M.ACRO_INFO("[Funcn: selectPlugin]: rnaRecentFilesSelect yourfiles, ensuring user is signed in"),$.Deferred().resolve().promise()):(M.ACRO_INFO("[Funcn: selectPlugin]: yourfiles, ensuring user is signed in"),F.ensureSignedIn())}).then(_.bind(function(){M.ACRO_INFO("[Funcn: selectPlugin]: yourfiles, after ensuring user signed in");var t,s=n&&n.singleFileSelection,u=p.pluginId,C=A.getPluginUiModel(u),P=C.get("connector_name"),y=n&&n.selectedToolPlugin||A.getSelectedPluginId("tools"),w=c.toolIdsToActionIds[y],U=c.toolIdsToActionNames[y],O=f.getConnectorPluginLabel(u);return I&&(this.options.isInSearchResultsView||i.opFactory.create("RestoringFilesPrefsOp",p).run(),m||(F.removeSignedInChangeCallback(this._onSignedInChange),F.addSignedInChangeCallback(this._onSignedInChange)),"root"===P?f.setConnectorPluginRoot(u,v.getRootFolderId(u)):(this.options.footerAnchorText=void 0,this.options.noShare=!0,this.options.noShareButton=!0)),p.selectionUiModel.set("multiple_selection",!s),p.collectionsUiModel.set("checkbox",!s),o&&p.collectionsUiModel.set("view",o),(I||e.Features.isFeatureEnabled("no_collection_item_checkbox")&&g.hasQueryParam("no_collection_item_checkbox","1"))&&p.collectionsUiModel.set("checkbox",!1),this._initFilter(n),this._configureActions(P),this.render(),p.fileUploadUiModel.startListening(),l?(d.isFileOpen(l)||(d.close({silent:!0}),i.opFactory.create("OpeningFullPreviewOp",_.extend({},p,{id:l})).run()),void(I&&S.showSpinner(!1))):f.isConnectorPlugin(u)&&!f.getConnectorPluginRoot(u)?(g.navigate(P),I&&S.showSpinner(!1),this._getResolvedPromise()):p.noUrlUpdate&&f.isActionRestricted(P,w)?(U&&O&&(t=A.getSelectorApi(y),t&&t.getSelectorLabel&&(U=t.getSelectorLabel(),U&&""!==U||(U=c.toolIdsToActionNames[y])),r=_.template(I?h.UNSUPPORTED_CONNECTOR_MSG:a.UNSUPPORTED_CONNECTOR_MSG,{actionName:U,connectorLabel:O}),p.collectionsUiModel.set("force_empty_msg",r)),p.collectionsUiModel.set("force_empty",!0),p.sortUiModel.set("is_locked",!0),p.searchUiModel.set("is_locked",!0),I&&S.showSpinner(!1),this._getResolvedPromise()):(n&&(p=_.extend({},p,_.pick(n,"noHistoryEffect"))),this._runSearchOp(p))},this),_.bind(function(e){if(I){if(S.showSpinner(!1),e&&"NoAccessToPdfServices"===e.errorString)return F.removeSignedInChangeCallback(this._onSignedInChange),F.addSignedInChangeCallback(this._onSignedInChange),this._isSelected=!0,this.render(),this._getResolvedPromise();0===this.$el.children().length&&A.handleServerOutageFailure()}},this))},deselectPlugin:function(){var i=this.options,n=i.appApi.networkConnectivityApi;u.isCEF()&&n.removeNetworkOnlineChangeCallback(this._onOnlineChanged),e.PluginContentView.prototype.deselectPlugin.call(this),this._isSelected=!1},remove:function(){this.deselectPlugin(),e.PluginContentView.prototype.remove.call(this)},releasePlugin:function(){var e=this.options,i=this.options.appApi.folderApi;t.PluginView.prototype.releasePlugin.call(this),u.isCEF()&&(this._unsetPluginRoot(),i.setCurrentFolderId(e.pluginId,void 0),e.folderModel.unset("name"),this._pluginOptions=_.omit(this._pluginOptions,"routeFolderId","routeFilesFilters","routeFileId")),e.folderModel.unset("id"),e.searchUiModel.removeAllFieldQueries()},getSelectionUiModel:function(){return this.options.selectionUiModel},getPluginVersionList:function(){var e=[l.pluginBuildNumber],i=this.options.appApi.baseFilesUrisApi.getServerVersion();return i&&e.push(i),$.Deferred().resolve().promise(e)},getFilesFooterUrl:function(){var i=this.options,n=i.appApi.folderApi;return"root"===i.pluginId?e.opFactory.create("GettingSsoUriOp",i).run("folder/"+encodeURIComponent(n.getRootFolderId())):void 0},clickedOutsideAiCview:function(){return u.isCEF()&&(this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION),$(document.body).click()),this._getResolvedPromise()},getSiteCatalystName:function(){var e=this.options,i=e.appApi,n=e.pluginId;return i&&i.connectorsApi.isConnectorPlugin(n)?i.connectorsApi.getConnectorPluginScName(n):s.DOCUMENT_CLOUD},doesFileExists:function(e){var i,n,t,o,s,l=this.options,r=l.filesUiModel;return r.isFolderView()?i=l.folderModel.get("items"):l.filesUiModel.isSearchResultsView()&&(i=l.searchModel.get("items")),e&&i&&(e=e.toLowerCase(),s=g.getNormalizedString(e,"NFC"),_.isUndefined(s)||(e=s),t=i.models,n=_.find(t,function(i){return"file"===i.get("object_type")?(o=i.get("name").toLowerCase(),s=g.getNormalizedString(o,"NFC"),_.isUndefined(s)||(o=s),o===e):!1})),n},_runSearchOp:function(e){return this.options.isInSearchResultsView?(u.isCEF()&&this.options.appApi.displayApi.showSpinner(!1),$.Deferred().resolve().promise()):i.opFactory.create("SearchingIfAskedOp",e).run().done(_.bind(function(){if(e.noInitialViewCounts||this._seenInitialView||(this._seenInitialView=!0,this._logInitialViewCounts()),u.isCEF())if("root-select"===e.pluginId){var i=e.folderModel.get("loaded");i&&i===!0&&this.options.appApi.displayApi.showSpinner(!1)}else this.options.appApi.displayApi.showSpinner(!1)},this)).fail(_.bind(function(){u.isCEF()&&this.options.appApi.displayApi.showSpinner(!1)},this))},_onViewEvent:function(i,n){var t=this.options;return t.inFileSelectionDlg&&i===e.ViewEvents.SELECTION_COMMIT?void t.selectionUiModel.commitSelection():void this.trigger(i,n)},_renderChildViews:function(){if(this.options.forRecentFileListing){var n=_.template('<div class="files-rhp ui-theme theme-container">');this.$el.append(n()),this.$rhp=this.$(".files-rhp"),this.$cbView=this._renderChildView("_filesRhpView",i.FilesRhpView,this.$rhp,{forRecentFileList:!0,rhpPreviewUiModel:e.modelFactory.create("RhpPreviewUiModel")})}else this._renderChildView("_filesContainerView",i.FilesContainerView,this.$el)},_initPlugin:function(){var e,i,n=this._initingPluginPromise,t=this.options,s=t.pluginId,l=t.appApi.connectorsApi,r=s,c=h.CLOUD_NAME;return i=l.getConnectorUIName(s),i&&(c=i),e=_.template(h.NOTIFICATION_HEADING,{cloudName:c}),_.extend(this.options,{notificationHeading:e,notificatonCategory:r}),n||(n=this._initingPluginPromise=o.opFactory.create("InitializingPluginOp",this.options).run()),n},_startPlugin:function(){var e=this._startingPluginPromise,i=!1,n=!1;return this.options.forRecentFileListing?(this.render(),void this.options.appApi.displayApi.showSpinner(!1)):(e||(e=this._startingPluginPromise=o.opFactory.create("StartingPluginOp",this.options).run().then(_.bind(function(){this.options.noAcrobat||this._addAppApiCallbacks(),i=this.options.showFoldersInSearch===!0,n=i&&this.options.showNavigationAtRoot===!0,this.options.searchUiModel.set({should_show_folders:i,should_show_navigate_root:n},{silent:!0})},this))),e)},_configureAction:function(e,i,n){var t=this.options,o=t.appApi.connectorsApi,s=o.isActionRestricted(e,i);return s&&(t[n]=!0),s},_configureActions:function(e){var i=this.options,n=i.pluginId,t=i.appApi.connectorsApi;t.isConnectorPlugin(n)&&(this._configureAction(e,c.NEWFOLDER,"noNewFolder"),this._configureAction(e,c.UPLOAD,"noUpload"),this._configureAction(e,c.FILTER,"noFilter"),this._configureAction(e,c.SORT,"noSort")&&i.sortUiModel.set("is_locked",!0),this._configureAction(e,c.SEND,"noShare"),this._configureAction(e,c.SEND,"noShareButton"),this._configureAction(e,c.DOWNLOAD,"noDownload"),this._configureAction(e,c.DELETE,"noDelete"),this._configureAction(e,c.MOVE,"noMove"),this._configureAction(e,c.RENAME,"noRename"))},_initFilter:function(i){var n,t,o,s,l,r=e.SearchUiModel,c=this.options.searchUiModel,a=this._getResolvedPromise();return u.isCEF()&&(a=this.options.readerContextModel),a.then(_.bind(function(){return i?(n=i.filter,n&&(t=n.mimeTypes,o=n.extensions,t&&t.length>0?c.addFieldQuery({field:r.FIELD_FILE_TYPE,value:t.join(),commitQueryBox:!0,queryBoxVisible:!this.options.noVisibleFieldQueries,queryLabel:n.queryLabel,removable:!1},{silent:!0}):u.isCEF()&&o&&o.length>0&&this.options.collectionsUiModel.set("filter_by_extension",o,{silent:!0}),s=n.minSize,s&&c.addFieldQuery({field:r.FIELD_FILE_MIN_SIZE,value:s,commitQueryBox:!1,queryBoxVisible:!this.options.noVisibleFieldQueries,removable:!1},{silent:!0}),l=n.maxSize,l&&c.addFieldQuery({field:r.FIELD_FILE_MAX_SIZE,value:l,commitQueryBox:!1,queryBoxVisible:!this.options.noVisibleFieldQueries,removable:!1},{silent:!0})),n):void 0},this))},_getSiteCatalystContext:function(){var e=this.options,i=e.appApi,n=e.pluginId;return i&&i.connectorsApi.isConnectorPlugin(n)?e.selectFilesScContext?i.connectorsApi.getConnectorPluginScName(n):s.FILE_LIST:e.selectFilesScContext?s.DOCUMENT_CLOUD:s.FILE_LIST},_logInitialViewCounts:function(){var e=this.options,i=e.appApi.siteCatalystApi,n=e.folderModel,t=[this._getSiteCatalystContext(),s.INITIAL_VIEW];i.logScEvent(t.concat([s.NUM_FILES_SHOWN,s.getCountCode(n.getChildFilesCount())])),i.logScEvent(t.concat([s.NUM_FOLDERS_SHOWN,s.getCountCode(n.getChildFoldersCount())]))},_addAppApiCallbacks:function(){var e=this.options.appApi;u.isCEF()||e.sessionApi.addSignedInChangeCallback(this._onSignedInChange),e.acrobatApi.addSelectedFilterIndexChangeCallback(this._onSelectedFilterIndexChange)},_onSignedInChange:function(e,i){var n=this.options;u.isCEF()?this._isSelected?i?(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):(n.dialogsUiModel.closeAll(),n.selectionUiModel.clearSelection(!1),this.releasePlugin(),delete this._startingPluginPromise,this.render()):i||(n.selectionUiModel.clearSelection(!1),this.releasePlugin(),delete this._startingPluginPromise):i||delete this._startingPluginPromise},_onSelectedFilterIndexChange:function(e,i){var n=this.options;n.collectionsUiModel.set("filter_by_extension",n.appApi.acrobatApi.getFilterFileExtensions(i))},_onOnlineChanged:function(e,i){i?(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):(this.options.appApi.saveAsApi.setCanSave(!1),this.render())},_unsetPluginRoot:function(){var e=this.options,i=e.appApi.connectorsApi;"root"===i.getConnectorPluginName(e.pluginId)&&i.setConnectorPluginRoot(e.pluginId,void 0)},getFolderAncestorIds:function(){var e,i=[];return e=this.options.folderUiModel.get("path"),_.each(e,function(e){i.push(e.id)}),i},_onNetworkStateChangeFromFeat:function(e,i){var n=(this.options,this.options.appApi);n.rnaApi.done(_.bind(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&(n.options.networkConnectivityModel.set({is_connected:i?i.state:!1}),n.networkConnectivityApi.removeNetworkConnectivtyChangeCallback(this._onOnlineChanged))},this))},_setContextBoardModel:function(e){this.$cbView&&e&&this.$cbView._setModel(e,!0)},_getSendUriTrimmed:function(){var e=this.options.appApi.baseFilesUrisApi.getSendApiUri(),i=e.lastIndexOf("api");return e=e.substring(0,i)},_onDeleteViewAsset:function(){this._triggerViewEvent(e.ViewEvents.DELETE_SHARED,{parentView:this,parcelModel:this.options.selectionUiModel.getSingleSelectedItemModel()})},_enableRefresh:function(e){this._enableRefresh=e},_refreshDcUI:function(){(void 0==this._enableRefresh||this._enableRefresh)&&this.options.appApi.folderApi.refreshCurrentFolder(this.options)},_refreshAssetSharedStatusInDC:function(e){this.options.appApi.folderApi.updateFileSharedStatus(this.options,e)},_onDeleteReviewAsset:function(i){var n=this.options,t={},o={};i.isOriginalShared?(t.Title=p.CONFIRM_DELETE_SHARED_FILE_TITLE_NO_COPY_MODEL,t.Message=p.CONFIRM_DELETE_SHARED_FILE_MSG_NO_COPY_MODEL,t.ActionButtonName=p.CONFIRM_DELETE_SHARED_FILE_BUTTON_NO_COPY_MODEL):(t.Title=p.CONFIRM_DELETE_SHARED_FILE_TITLE_COPY_MODEL,t.Message=p.CONFIRM_DELETE_SHARED_FILE_MSG_COPY_MODEL,t.ActionButtonName=p.CONFIRM_DELETE_SHARED_FILE_BUTTON_COPY_MODEL),t.RejectButtonName=p.CANCEL,o.InvitationId=i.InvitationId,t.Warn="true",n.appApi.rnaApi.done(_.bind(function(l){l._reviewAPI.invoke("EurekaAlertDialog",t).done(_.bind(function(t){t===!0&&e.opFactory.create("DeletingReviewOp",this.options).run(i.ParcelId).then(_.bind(function(){try{var e="Delete";void 0!==i.isOriginalShared&&i.isOriginalShared&&(e+=s.VIRGO_ORIGINAL_SHARE),e+=" Review",l._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Review success","Success",e,"EurekaActions",i.ParcelId,i.role])}catch(t){}l._reviewAPI.invoke("deleteReview",[i.ParcelId,i.InvitationId,i.workflowType]),l._reviewAPI.invoke("AVEurekaDocClose",o),l._reviewAPI.invoke("DeleteEurekaCache",o),this._showToast(p.DELETED_STRING);var r,c=this.options.selectionUiModel.getSingleSelectedItemModel(),a=void 0;Ac.discoveryUrisModel&&(r=Ac.discoveryUrisModel.getUSSUrlsAndUserInfo()),r&&(a=r.isACPUser),n.isInSearchResultsView?a?n.searchUiModel.trigger("refresh_search_category","creative_cloud"):(n.searchUiModel.trigger("refresh_search_category","document_cloud"),n.searchUiModel.trigger("refresh_search_category","review")):(n.selectionUiModel.deselectItem(c.id,!0),n.appApi.folderApi.refreshCurrentFolder(n).then(_.bind(function(){n.selectionUiModel.triggerSelectionChange()},this)))},this))},this))},this))},_showToast:function(i){this.options.toastArgumentString=i,this.options.FadeOutTime=3e3;var n=this.$el;this.$toastPlaceholderDIV=n.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),n.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options})},_showCustomizeToast:function(i){if(!_.isUndefined(i)&&!_.isUndefined(i.argsString)){this.options.toastArgumentString=i.argsString,this.options.FadeOutTime=3e3,i.fadeTimeout&&(this.options.FadeOutTime=i.fadeTimeout);var n=this.$el;if(this.$toastPlaceholderDIV=n.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),n.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options}),i.hideIcon){var t=n.find(".toast-icon");t&&(t.hide(),this._rhpToast.$toastAction.css("display","block"))}}}}),o.PluginView}),define("acplugins/my-files/js/my-files",["acplugins/my-files/js/ac-my-files","acplugins/my-files/js/ops/op-factory","acplugins/my-files/js/views/plugin-view"],function(e){_.extend(e,{init:function(){e.opFactory=new e.OpFactory}})}),define("acplugins/my-files-select/js/views/plugin-view",["acplugins/my-files/js/ac-my-files","acplugins/my-files-select/js/ac-my-files-select","core/utils/util","acplugins/my-files/js/views/plugin-view"],function(e,i,n){return i.PluginView=e.PluginView.extend({initialize:function(){e.PluginView.prototype.initialize.call(this),_.extend(this.options,{inFileSelectionDlg:!0,noSelectionActions:!0,noUpload:!0,noNewFolder:!0,noUrlUpdate:!0,noNotifications:!0,noPreferences:!0,noAcrobat:!0,noFolderSelection:!0,noHoverPreview:!0,noFullPreview:!0,noShareButton:!0,noSearchControl:!0,selectFilesScContext:!0,noInitialViewCounts:!0,noVisibleFieldQueries:!0,showFoldersInSearch:!0,showNavigationAtRoot:!1,footerAnchorText:void 0})},selectPlugin:function(i){var t=this.options;return this.options.appApi.done(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this)),n.isCEF()&&(t.appApi.saveAsApi.isRunningInFileSaveAs()&&_.extend(t,{showNavigationAtRoot:!0,noFilesHeader:!0,showNewFolderInNavigation:!0}),$(".file-selection-dlg-continue-btn").show()),e.PluginView.prototype.selectPlugin.call(this,i)}}),i.PluginView}),define("acplugins/my-files-select/js/my-files-select",["acplugins/my-files/js/ac-my-files","acplugins/my-files-select/js/ac-my-files-select","acplugins/my-files/js/ops/op-factory","acplugins/my-files-select/js/views/plugin-view"],function(e,i){_.extend(i,{init:function(){e.init()}})}),define("acplugins/my-files-select/js/plugin",["core/ac-core-init","files/ac-files-init","acplugins/my-files/js/ac-my-files","acplugins/my-files-select/js/ac-my-files-select","acplugins/my-files/js/my-files","acplugins/my-files-select/js/my-files-select"],function(e,i,n,t){t.init()});